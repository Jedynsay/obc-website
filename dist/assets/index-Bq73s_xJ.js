var Bx=Object.defineProperty;var Ix=(t,e,s)=>e in t?Bx(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var ce=(t,e,s)=>Ix(t,typeof e!="symbol"?e+"":e,s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function s(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=s(r);fetch(r.href,i)}})();var Bt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $x(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function zx(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var s=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(s,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}),s}var zm={exports:{}},zo={},Fm={exports:{}},ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qi=Symbol.for("react.element"),Fx=Symbol.for("react.portal"),Ux=Symbol.for("react.fragment"),Wx=Symbol.for("react.strict_mode"),Hx=Symbol.for("react.profiler"),Vx=Symbol.for("react.provider"),qx=Symbol.for("react.context"),Kx=Symbol.for("react.forward_ref"),Yx=Symbol.for("react.suspense"),Gx=Symbol.for("react.memo"),Qx=Symbol.for("react.lazy"),Uu=Symbol.iterator;function Xx(t){return t===null||typeof t!="object"?null:(t=Uu&&t[Uu]||t["@@iterator"],typeof t=="function"?t:null)}var Um={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Wm=Object.assign,Hm={};function Tr(t,e,s){this.props=t,this.context=e,this.refs=Hm,this.updater=s||Um}Tr.prototype.isReactComponent={};Tr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Tr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Vm(){}Vm.prototype=Tr.prototype;function jd(t,e,s){this.props=t,this.context=e,this.refs=Hm,this.updater=s||Um}var kd=jd.prototype=new Vm;kd.constructor=jd;Wm(kd,Tr.prototype);kd.isPureReactComponent=!0;var Wu=Array.isArray,qm=Object.prototype.hasOwnProperty,Nd={current:null},Km={key:!0,ref:!0,__self:!0,__source:!0};function Ym(t,e,s){var n,r={},i=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)qm.call(e,n)&&!Km.hasOwnProperty(n)&&(r[n]=e[n]);var l=arguments.length-2;if(l===1)r.children=s;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];r.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)r[n]===void 0&&(r[n]=l[n]);return{$$typeof:qi,type:t,key:i,ref:a,props:r,_owner:Nd.current}}function Jx(t,e){return{$$typeof:qi,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Sd(t){return typeof t=="object"&&t!==null&&t.$$typeof===qi}function Zx(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(s){return e[s]})}var Hu=/\/+/g;function xl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Zx(""+t.key):e.toString(36)}function Ia(t,e,s,n,r){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case qi:case Fx:a=!0}}if(a)return a=t,r=r(a),t=n===""?"."+xl(a,0):n,Wu(r)?(s="",t!=null&&(s=t.replace(Hu,"$&/")+"/"),Ia(r,e,s,"",function(d){return d})):r!=null&&(Sd(r)&&(r=Jx(r,s+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(Hu,"$&/")+"/")+t)),e.push(r)),1;if(a=0,n=n===""?".":n+":",Wu(t))for(var l=0;l<t.length;l++){i=t[l];var c=n+xl(i,l);a+=Ia(i,e,s,c,r)}else if(c=Xx(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=n+xl(i,l++),a+=Ia(i,e,s,c,r);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function na(t,e,s){if(t==null)return t;var n=[],r=0;return Ia(t,n,"","",function(i){return e.call(s,i,r++)}),n}function ey(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(s){(t._status===0||t._status===-1)&&(t._status=1,t._result=s)},function(s){(t._status===0||t._status===-1)&&(t._status=2,t._result=s)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var lt={current:null},$a={transition:null},ty={ReactCurrentDispatcher:lt,ReactCurrentBatchConfig:$a,ReactCurrentOwner:Nd};function Gm(){throw Error("act(...) is not supported in production builds of React.")}ue.Children={map:na,forEach:function(t,e,s){na(t,function(){e.apply(this,arguments)},s)},count:function(t){var e=0;return na(t,function(){e++}),e},toArray:function(t){return na(t,function(e){return e})||[]},only:function(t){if(!Sd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ue.Component=Tr;ue.Fragment=Ux;ue.Profiler=Hx;ue.PureComponent=jd;ue.StrictMode=Wx;ue.Suspense=Yx;ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ty;ue.act=Gm;ue.cloneElement=function(t,e,s){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Wm({},t.props),r=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=Nd.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)qm.call(e,c)&&!Km.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=s;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:qi,type:t.type,key:r,ref:i,props:n,_owner:a}};ue.createContext=function(t){return t={$$typeof:qx,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Vx,_context:t},t.Consumer=t};ue.createElement=Ym;ue.createFactory=function(t){var e=Ym.bind(null,t);return e.type=t,e};ue.createRef=function(){return{current:null}};ue.forwardRef=function(t){return{$$typeof:Kx,render:t}};ue.isValidElement=Sd;ue.lazy=function(t){return{$$typeof:Qx,_payload:{_status:-1,_result:t},_init:ey}};ue.memo=function(t,e){return{$$typeof:Gx,type:t,compare:e===void 0?null:e}};ue.startTransition=function(t){var e=$a.transition;$a.transition={};try{t()}finally{$a.transition=e}};ue.unstable_act=Gm;ue.useCallback=function(t,e){return lt.current.useCallback(t,e)};ue.useContext=function(t){return lt.current.useContext(t)};ue.useDebugValue=function(){};ue.useDeferredValue=function(t){return lt.current.useDeferredValue(t)};ue.useEffect=function(t,e){return lt.current.useEffect(t,e)};ue.useId=function(){return lt.current.useId()};ue.useImperativeHandle=function(t,e,s){return lt.current.useImperativeHandle(t,e,s)};ue.useInsertionEffect=function(t,e){return lt.current.useInsertionEffect(t,e)};ue.useLayoutEffect=function(t,e){return lt.current.useLayoutEffect(t,e)};ue.useMemo=function(t,e){return lt.current.useMemo(t,e)};ue.useReducer=function(t,e,s){return lt.current.useReducer(t,e,s)};ue.useRef=function(t){return lt.current.useRef(t)};ue.useState=function(t){return lt.current.useState(t)};ue.useSyncExternalStore=function(t,e,s){return lt.current.useSyncExternalStore(t,e,s)};ue.useTransition=function(){return lt.current.useTransition()};ue.version="18.3.1";Fm.exports=ue;var k=Fm.exports;const Ke=$x(k);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sy=k,ny=Symbol.for("react.element"),ry=Symbol.for("react.fragment"),iy=Object.prototype.hasOwnProperty,ay=sy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,oy={key:!0,ref:!0,__self:!0,__source:!0};function Qm(t,e,s){var n,r={},i=null,a=null;s!==void 0&&(i=""+s),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)iy.call(e,n)&&!oy.hasOwnProperty(n)&&(r[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)r[n]===void 0&&(r[n]=e[n]);return{$$typeof:ny,type:t,key:i,ref:a,props:r,_owner:ay.current}}zo.Fragment=ry;zo.jsx=Qm;zo.jsxs=Qm;zm.exports=zo;var o=zm.exports,Xm={exports:{}},Et={},Jm={exports:{}},Zm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(W,q){var X=W.length;W.push(q);e:for(;0<X;){var Z=X-1>>>1,re=W[Z];if(0<r(re,q))W[Z]=q,W[X]=re,X=Z;else break e}}function s(W){return W.length===0?null:W[0]}function n(W){if(W.length===0)return null;var q=W[0],X=W.pop();if(X!==q){W[0]=X;e:for(var Z=0,re=W.length,M=re>>>1;Z<M;){var J=2*(Z+1)-1,ee=W[J],se=J+1,L=W[se];if(0>r(ee,X))se<re&&0>r(L,ee)?(W[Z]=L,W[se]=X,Z=se):(W[Z]=ee,W[J]=X,Z=J);else if(se<re&&0>r(L,X))W[Z]=L,W[se]=X,Z=se;else break e}}return q}function r(W,q){var X=W.sortIndex-q.sortIndex;return X!==0?X:W.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],d=[],u=1,h=null,f=3,m=!1,p=!1,x=!1,b=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(W){for(var q=s(d);q!==null;){if(q.callback===null)n(d);else if(q.startTime<=W)n(d),q.sortIndex=q.expirationTime,e(c,q);else break;q=s(d)}}function w(W){if(x=!1,v(W),!p)if(s(c)!==null)p=!0,B(_);else{var q=s(d);q!==null&&H(w,q.startTime-W)}}function _(W,q){p=!1,x&&(x=!1,y(A),A=-1),m=!0;var X=f;try{for(v(q),h=s(c);h!==null&&(!(h.expirationTime>q)||W&&!P());){var Z=h.callback;if(typeof Z=="function"){h.callback=null,f=h.priorityLevel;var re=Z(h.expirationTime<=q);q=t.unstable_now(),typeof re=="function"?h.callback=re:h===s(c)&&n(c),v(q)}else n(c);h=s(c)}if(h!==null)var M=!0;else{var J=s(d);J!==null&&H(w,J.startTime-q),M=!1}return M}finally{h=null,f=X,m=!1}}var j=!1,E=null,A=-1,S=5,O=-1;function P(){return!(t.unstable_now()-O<S)}function R(){if(E!==null){var W=t.unstable_now();O=W;var q=!0;try{q=E(!0,W)}finally{q?U():(j=!1,E=null)}}else j=!1}var U;if(typeof g=="function")U=function(){g(R)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,T=K.port2;K.port1.onmessage=R,U=function(){T.postMessage(null)}}else U=function(){b(R,0)};function B(W){E=W,j||(j=!0,U())}function H(W,q){A=b(function(){W(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){p||m||(p=!0,B(_))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return s(c)},t.unstable_next=function(W){switch(f){case 1:case 2:case 3:var q=3;break;default:q=f}var X=f;f=q;try{return W()}finally{f=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,q){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var X=f;f=W;try{return q()}finally{f=X}},t.unstable_scheduleCallback=function(W,q,X){var Z=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?Z+X:Z):X=Z,W){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=X+re,W={id:u++,callback:q,priorityLevel:W,startTime:X,expirationTime:re,sortIndex:-1},X>Z?(W.sortIndex=X,e(d,W),s(c)===null&&W===s(d)&&(x?(y(A),A=-1):x=!0,H(w,X-Z))):(W.sortIndex=re,e(c,W),p||m||(p=!0,B(_))),W},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(W){var q=f;return function(){var X=f;f=q;try{return W.apply(this,arguments)}finally{f=X}}}})(Zm);Jm.exports=Zm;var ly=Jm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cy=k,Pt=ly;function F(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)e+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ep=new Set,ji={};function $n(t,e){yr(t,e),yr(t+"Capture",e)}function yr(t,e){for(ji[t]=e,t=0;t<e.length;t++)ep.add(e[t])}var _s=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cc=Object.prototype.hasOwnProperty,dy=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Vu={},qu={};function uy(t){return cc.call(qu,t)?!0:cc.call(Vu,t)?!1:dy.test(t)?qu[t]=!0:(Vu[t]=!0,!1)}function hy(t,e,s,n){if(s!==null&&s.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:s!==null?!s.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function fy(t,e,s,n){if(e===null||typeof e>"u"||hy(t,e,s,n))return!0;if(n)return!1;if(s!==null)switch(s.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ct(t,e,s,n,r,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=r,this.mustUseProperty=s,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var Qe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Qe[t]=new ct(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Qe[e]=new ct(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Qe[t]=new ct(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Qe[t]=new ct(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Qe[t]=new ct(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Qe[t]=new ct(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Qe[t]=new ct(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Qe[t]=new ct(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Qe[t]=new ct(t,5,!1,t.toLowerCase(),null,!1,!1)});var Cd=/[\-:]([a-z])/g;function Pd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Cd,Pd);Qe[e]=new ct(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Cd,Pd);Qe[e]=new ct(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Cd,Pd);Qe[e]=new ct(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Qe[t]=new ct(t,1,!1,t.toLowerCase(),null,!1,!1)});Qe.xlinkHref=new ct("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Qe[t]=new ct(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ed(t,e,s,n){var r=Qe.hasOwnProperty(e)?Qe[e]:null;(r!==null?r.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(fy(e,s,r,n)&&(s=null),n||r===null?uy(e)&&(s===null?t.removeAttribute(e):t.setAttribute(e,""+s)):r.mustUseProperty?t[r.propertyName]=s===null?r.type===3?!1:"":s:(e=r.attributeName,n=r.attributeNamespace,s===null?t.removeAttribute(e):(r=r.type,s=r===3||r===4&&s===!0?"":""+s,n?t.setAttributeNS(n,e,s):t.setAttribute(e,s))))}var Ss=cy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ra=Symbol.for("react.element"),Xn=Symbol.for("react.portal"),Jn=Symbol.for("react.fragment"),Td=Symbol.for("react.strict_mode"),dc=Symbol.for("react.profiler"),tp=Symbol.for("react.provider"),sp=Symbol.for("react.context"),Ad=Symbol.for("react.forward_ref"),uc=Symbol.for("react.suspense"),hc=Symbol.for("react.suspense_list"),Od=Symbol.for("react.memo"),Ms=Symbol.for("react.lazy"),np=Symbol.for("react.offscreen"),Ku=Symbol.iterator;function Dr(t){return t===null||typeof t!="object"?null:(t=Ku&&t[Ku]||t["@@iterator"],typeof t=="function"?t:null)}var Oe=Object.assign,yl;function Qr(t){if(yl===void 0)try{throw Error()}catch(s){var e=s.stack.trim().match(/\n( *(at )?)/);yl=e&&e[1]||""}return`
`+yl+t}var vl=!1;function bl(t,e){if(!t||vl)return"";vl=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var n=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){n=d}t.call(e.prototype)}else{try{throw Error()}catch(d){n=d}t()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var r=d.stack.split(`
`),i=n.stack.split(`
`),a=r.length-1,l=i.length-1;1<=a&&0<=l&&r[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(r[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||r[a]!==i[l]){var c=`
`+r[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=l);break}}}finally{vl=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?Qr(t):""}function my(t){switch(t.tag){case 5:return Qr(t.type);case 16:return Qr("Lazy");case 13:return Qr("Suspense");case 19:return Qr("SuspenseList");case 0:case 2:case 15:return t=bl(t.type,!1),t;case 11:return t=bl(t.type.render,!1),t;case 1:return t=bl(t.type,!0),t;default:return""}}function fc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Jn:return"Fragment";case Xn:return"Portal";case dc:return"Profiler";case Td:return"StrictMode";case uc:return"Suspense";case hc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case sp:return(t.displayName||"Context")+".Consumer";case tp:return(t._context.displayName||"Context")+".Provider";case Ad:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Od:return e=t.displayName||null,e!==null?e:fc(t.type)||"Memo";case Ms:e=t._payload,t=t._init;try{return fc(t(e))}catch{}}return null}function py(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fc(e);case 8:return e===Td?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Zs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function rp(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function gy(t){var e=rp(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var r=s.get,i=s.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){n=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ia(t){t._valueTracker||(t._valueTracker=gy(t))}function ip(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var s=e.getValue(),n="";return t&&(n=rp(t)?t.checked?"true":"false":t.value),t=n,t!==s?(e.setValue(t),!0):!1}function to(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function mc(t,e){var s=e.checked;return Oe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??t._wrapperState.initialChecked})}function Yu(t,e){var s=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;s=Zs(e.value!=null?e.value:s),t._wrapperState={initialChecked:n,initialValue:s,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ap(t,e){e=e.checked,e!=null&&Ed(t,"checked",e,!1)}function pc(t,e){ap(t,e);var s=Zs(e.value),n=e.type;if(s!=null)n==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+s):t.value!==""+s&&(t.value=""+s);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?gc(t,e.type,s):e.hasOwnProperty("defaultValue")&&gc(t,e.type,Zs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Gu(t,e,s){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,s||e===t.value||(t.value=e),t.defaultValue=e}s=t.name,s!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,s!==""&&(t.name=s)}function gc(t,e,s){(e!=="number"||to(t.ownerDocument)!==t)&&(s==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+s&&(t.defaultValue=""+s))}var Xr=Array.isArray;function dr(t,e,s,n){if(t=t.options,e){e={};for(var r=0;r<s.length;r++)e["$"+s[r]]=!0;for(s=0;s<t.length;s++)r=e.hasOwnProperty("$"+t[s].value),t[s].selected!==r&&(t[s].selected=r),r&&n&&(t[s].defaultSelected=!0)}else{for(s=""+Zs(s),e=null,r=0;r<t.length;r++){if(t[r].value===s){t[r].selected=!0,n&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function xc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(F(91));return Oe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Qu(t,e){var s=e.value;if(s==null){if(s=e.children,e=e.defaultValue,s!=null){if(e!=null)throw Error(F(92));if(Xr(s)){if(1<s.length)throw Error(F(93));s=s[0]}e=s}e==null&&(e=""),s=e}t._wrapperState={initialValue:Zs(s)}}function op(t,e){var s=Zs(e.value),n=Zs(e.defaultValue);s!=null&&(s=""+s,s!==t.value&&(t.value=s),e.defaultValue==null&&t.defaultValue!==s&&(t.defaultValue=s)),n!=null&&(t.defaultValue=""+n)}function Xu(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function lp(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?lp(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var aa,cp=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,s,n,r){MSApp.execUnsafeLocalFunction(function(){return t(e,s,n,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(aa=aa||document.createElement("div"),aa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=aa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ki(t,e){if(e){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=e;return}}t.textContent=e}var ai={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xy=["Webkit","ms","Moz","O"];Object.keys(ai).forEach(function(t){xy.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ai[e]=ai[t]})});function dp(t,e,s){return e==null||typeof e=="boolean"||e===""?"":s||typeof e!="number"||e===0||ai.hasOwnProperty(t)&&ai[t]?(""+e).trim():e+"px"}function up(t,e){t=t.style;for(var s in e)if(e.hasOwnProperty(s)){var n=s.indexOf("--")===0,r=dp(s,e[s],n);s==="float"&&(s="cssFloat"),n?t.setProperty(s,r):t[s]=r}}var yy=Oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vc(t,e){if(e){if(yy[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(F(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(F(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(F(61))}if(e.style!=null&&typeof e.style!="object")throw Error(F(62))}}function bc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wc=null;function Md(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _c=null,ur=null,hr=null;function Ju(t){if(t=Gi(t)){if(typeof _c!="function")throw Error(F(280));var e=t.stateNode;e&&(e=Vo(e),_c(t.stateNode,t.type,e))}}function hp(t){ur?hr?hr.push(t):hr=[t]:ur=t}function fp(){if(ur){var t=ur,e=hr;if(hr=ur=null,Ju(t),e)for(t=0;t<e.length;t++)Ju(e[t])}}function mp(t,e){return t(e)}function pp(){}var wl=!1;function gp(t,e,s){if(wl)return t(e,s);wl=!0;try{return mp(t,e,s)}finally{wl=!1,(ur!==null||hr!==null)&&(pp(),fp())}}function Ni(t,e){var s=t.stateNode;if(s===null)return null;var n=Vo(s);if(n===null)return null;s=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(F(231,e,typeof s));return s}var jc=!1;if(_s)try{var Br={};Object.defineProperty(Br,"passive",{get:function(){jc=!0}}),window.addEventListener("test",Br,Br),window.removeEventListener("test",Br,Br)}catch{jc=!1}function vy(t,e,s,n,r,i,a,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(s,d)}catch(u){this.onError(u)}}var oi=!1,so=null,no=!1,kc=null,by={onError:function(t){oi=!0,so=t}};function wy(t,e,s,n,r,i,a,l,c){oi=!1,so=null,vy.apply(by,arguments)}function _y(t,e,s,n,r,i,a,l,c){if(wy.apply(this,arguments),oi){if(oi){var d=so;oi=!1,so=null}else throw Error(F(198));no||(no=!0,kc=d)}}function zn(t){var e=t,s=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(s=e.return),t=e.return;while(t)}return e.tag===3?s:null}function xp(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Zu(t){if(zn(t)!==t)throw Error(F(188))}function jy(t){var e=t.alternate;if(!e){if(e=zn(t),e===null)throw Error(F(188));return e!==t?null:t}for(var s=t,n=e;;){var r=s.return;if(r===null)break;var i=r.alternate;if(i===null){if(n=r.return,n!==null){s=n;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===s)return Zu(r),t;if(i===n)return Zu(r),e;i=i.sibling}throw Error(F(188))}if(s.return!==n.return)s=r,n=i;else{for(var a=!1,l=r.child;l;){if(l===s){a=!0,s=r,n=i;break}if(l===n){a=!0,n=r,s=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===s){a=!0,s=i,n=r;break}if(l===n){a=!0,n=i,s=r;break}l=l.sibling}if(!a)throw Error(F(189))}}if(s.alternate!==n)throw Error(F(190))}if(s.tag!==3)throw Error(F(188));return s.stateNode.current===s?t:e}function yp(t){return t=jy(t),t!==null?vp(t):null}function vp(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=vp(t);if(e!==null)return e;t=t.sibling}return null}var bp=Pt.unstable_scheduleCallback,eh=Pt.unstable_cancelCallback,ky=Pt.unstable_shouldYield,Ny=Pt.unstable_requestPaint,Be=Pt.unstable_now,Sy=Pt.unstable_getCurrentPriorityLevel,Rd=Pt.unstable_ImmediatePriority,wp=Pt.unstable_UserBlockingPriority,ro=Pt.unstable_NormalPriority,Cy=Pt.unstable_LowPriority,_p=Pt.unstable_IdlePriority,Fo=null,rs=null;function Py(t){if(rs&&typeof rs.onCommitFiberRoot=="function")try{rs.onCommitFiberRoot(Fo,t,void 0,(t.current.flags&128)===128)}catch{}}var Gt=Math.clz32?Math.clz32:Ay,Ey=Math.log,Ty=Math.LN2;function Ay(t){return t>>>=0,t===0?32:31-(Ey(t)/Ty|0)|0}var oa=64,la=4194304;function Jr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function io(t,e){var s=t.pendingLanes;if(s===0)return 0;var n=0,r=t.suspendedLanes,i=t.pingedLanes,a=s&268435455;if(a!==0){var l=a&~r;l!==0?n=Jr(l):(i&=a,i!==0&&(n=Jr(i)))}else a=s&~r,a!==0?n=Jr(a):i!==0&&(n=Jr(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&r)&&(r=n&-n,i=e&-e,r>=i||r===16&&(i&4194240)!==0))return e;if(n&4&&(n|=s&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)s=31-Gt(e),r=1<<s,n|=t[s],e&=~r;return n}function Oy(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function My(t,e){for(var s=t.suspendedLanes,n=t.pingedLanes,r=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-Gt(i),l=1<<a,c=r[a];c===-1?(!(l&s)||l&n)&&(r[a]=Oy(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function Nc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function jp(){var t=oa;return oa<<=1,!(oa&4194240)&&(oa=64),t}function _l(t){for(var e=[],s=0;31>s;s++)e.push(t);return e}function Ki(t,e,s){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Gt(e),t[e]=s}function Ry(t,e){var s=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<s;){var r=31-Gt(s),i=1<<r;e[r]=0,n[r]=-1,t[r]=-1,s&=~i}}function Ld(t,e){var s=t.entangledLanes|=e;for(t=t.entanglements;s;){var n=31-Gt(s),r=1<<n;r&e|t[n]&e&&(t[n]|=e),s&=~r}}var be=0;function kp(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Np,Dd,Sp,Cp,Pp,Sc=!1,ca=[],Ws=null,Hs=null,Vs=null,Si=new Map,Ci=new Map,Ls=[],Ly="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function th(t,e){switch(t){case"focusin":case"focusout":Ws=null;break;case"dragenter":case"dragleave":Hs=null;break;case"mouseover":case"mouseout":Vs=null;break;case"pointerover":case"pointerout":Si.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ci.delete(e.pointerId)}}function Ir(t,e,s,n,r,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:s,eventSystemFlags:n,nativeEvent:i,targetContainers:[r]},e!==null&&(e=Gi(e),e!==null&&Dd(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function Dy(t,e,s,n,r){switch(e){case"focusin":return Ws=Ir(Ws,t,e,s,n,r),!0;case"dragenter":return Hs=Ir(Hs,t,e,s,n,r),!0;case"mouseover":return Vs=Ir(Vs,t,e,s,n,r),!0;case"pointerover":var i=r.pointerId;return Si.set(i,Ir(Si.get(i)||null,t,e,s,n,r)),!0;case"gotpointercapture":return i=r.pointerId,Ci.set(i,Ir(Ci.get(i)||null,t,e,s,n,r)),!0}return!1}function Ep(t){var e=jn(t.target);if(e!==null){var s=zn(e);if(s!==null){if(e=s.tag,e===13){if(e=xp(s),e!==null){t.blockedOn=e,Pp(t.priority,function(){Sp(s)});return}}else if(e===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function za(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var s=Cc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(s===null){s=t.nativeEvent;var n=new s.constructor(s.type,s);wc=n,s.target.dispatchEvent(n),wc=null}else return e=Gi(s),e!==null&&Dd(e),t.blockedOn=s,!1;e.shift()}return!0}function sh(t,e,s){za(t)&&s.delete(e)}function By(){Sc=!1,Ws!==null&&za(Ws)&&(Ws=null),Hs!==null&&za(Hs)&&(Hs=null),Vs!==null&&za(Vs)&&(Vs=null),Si.forEach(sh),Ci.forEach(sh)}function $r(t,e){t.blockedOn===e&&(t.blockedOn=null,Sc||(Sc=!0,Pt.unstable_scheduleCallback(Pt.unstable_NormalPriority,By)))}function Pi(t){function e(r){return $r(r,t)}if(0<ca.length){$r(ca[0],t);for(var s=1;s<ca.length;s++){var n=ca[s];n.blockedOn===t&&(n.blockedOn=null)}}for(Ws!==null&&$r(Ws,t),Hs!==null&&$r(Hs,t),Vs!==null&&$r(Vs,t),Si.forEach(e),Ci.forEach(e),s=0;s<Ls.length;s++)n=Ls[s],n.blockedOn===t&&(n.blockedOn=null);for(;0<Ls.length&&(s=Ls[0],s.blockedOn===null);)Ep(s),s.blockedOn===null&&Ls.shift()}var fr=Ss.ReactCurrentBatchConfig,ao=!0;function Iy(t,e,s,n){var r=be,i=fr.transition;fr.transition=null;try{be=1,Bd(t,e,s,n)}finally{be=r,fr.transition=i}}function $y(t,e,s,n){var r=be,i=fr.transition;fr.transition=null;try{be=4,Bd(t,e,s,n)}finally{be=r,fr.transition=i}}function Bd(t,e,s,n){if(ao){var r=Cc(t,e,s,n);if(r===null)Ol(t,e,n,oo,s),th(t,n);else if(Dy(r,t,e,s,n))n.stopPropagation();else if(th(t,n),e&4&&-1<Ly.indexOf(t)){for(;r!==null;){var i=Gi(r);if(i!==null&&Np(i),i=Cc(t,e,s,n),i===null&&Ol(t,e,n,oo,s),i===r)break;r=i}r!==null&&n.stopPropagation()}else Ol(t,e,n,null,s)}}var oo=null;function Cc(t,e,s,n){if(oo=null,t=Md(n),t=jn(t),t!==null)if(e=zn(t),e===null)t=null;else if(s=e.tag,s===13){if(t=xp(e),t!==null)return t;t=null}else if(s===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return oo=t,null}function Tp(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Sy()){case Rd:return 1;case wp:return 4;case ro:case Cy:return 16;case _p:return 536870912;default:return 16}default:return 16}}var Is=null,Id=null,Fa=null;function Ap(){if(Fa)return Fa;var t,e=Id,s=e.length,n,r="value"in Is?Is.value:Is.textContent,i=r.length;for(t=0;t<s&&e[t]===r[t];t++);var a=s-t;for(n=1;n<=a&&e[s-n]===r[i-n];n++);return Fa=r.slice(t,1<n?1-n:void 0)}function Ua(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function da(){return!0}function nh(){return!1}function Tt(t){function e(s,n,r,i,a){this._reactName=s,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(s=t[l],this[l]=s?s(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?da:nh,this.isPropagationStopped=nh,this}return Oe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=da)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=da)},persist:function(){},isPersistent:da}),e}var Ar={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$d=Tt(Ar),Yi=Oe({},Ar,{view:0,detail:0}),zy=Tt(Yi),jl,kl,zr,Uo=Oe({},Yi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==zr&&(zr&&t.type==="mousemove"?(jl=t.screenX-zr.screenX,kl=t.screenY-zr.screenY):kl=jl=0,zr=t),jl)},movementY:function(t){return"movementY"in t?t.movementY:kl}}),rh=Tt(Uo),Fy=Oe({},Uo,{dataTransfer:0}),Uy=Tt(Fy),Wy=Oe({},Yi,{relatedTarget:0}),Nl=Tt(Wy),Hy=Oe({},Ar,{animationName:0,elapsedTime:0,pseudoElement:0}),Vy=Tt(Hy),qy=Oe({},Ar,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ky=Tt(qy),Yy=Oe({},Ar,{data:0}),ih=Tt(Yy),Gy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jy(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Xy[t])?!!e[t]:!1}function zd(){return Jy}var Zy=Oe({},Yi,{key:function(t){if(t.key){var e=Gy[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ua(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Qy[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(t){return t.type==="keypress"?Ua(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ua(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ev=Tt(Zy),tv=Oe({},Uo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ah=Tt(tv),sv=Oe({},Yi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),nv=Tt(sv),rv=Oe({},Ar,{propertyName:0,elapsedTime:0,pseudoElement:0}),iv=Tt(rv),av=Oe({},Uo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ov=Tt(av),lv=[9,13,27,32],Fd=_s&&"CompositionEvent"in window,li=null;_s&&"documentMode"in document&&(li=document.documentMode);var cv=_s&&"TextEvent"in window&&!li,Op=_s&&(!Fd||li&&8<li&&11>=li),oh=" ",lh=!1;function Mp(t,e){switch(t){case"keyup":return lv.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rp(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Zn=!1;function dv(t,e){switch(t){case"compositionend":return Rp(e);case"keypress":return e.which!==32?null:(lh=!0,oh);case"textInput":return t=e.data,t===oh&&lh?null:t;default:return null}}function uv(t,e){if(Zn)return t==="compositionend"||!Fd&&Mp(t,e)?(t=Ap(),Fa=Id=Is=null,Zn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Op&&e.locale!=="ko"?null:e.data;default:return null}}var hv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ch(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!hv[t.type]:e==="textarea"}function Lp(t,e,s,n){hp(n),e=lo(e,"onChange"),0<e.length&&(s=new $d("onChange","change",null,s,n),t.push({event:s,listeners:e}))}var ci=null,Ei=null;function fv(t){qp(t,0)}function Wo(t){var e=sr(t);if(ip(e))return t}function mv(t,e){if(t==="change")return e}var Dp=!1;if(_s){var Sl;if(_s){var Cl="oninput"in document;if(!Cl){var dh=document.createElement("div");dh.setAttribute("oninput","return;"),Cl=typeof dh.oninput=="function"}Sl=Cl}else Sl=!1;Dp=Sl&&(!document.documentMode||9<document.documentMode)}function uh(){ci&&(ci.detachEvent("onpropertychange",Bp),Ei=ci=null)}function Bp(t){if(t.propertyName==="value"&&Wo(Ei)){var e=[];Lp(e,Ei,t,Md(t)),gp(fv,e)}}function pv(t,e,s){t==="focusin"?(uh(),ci=e,Ei=s,ci.attachEvent("onpropertychange",Bp)):t==="focusout"&&uh()}function gv(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Wo(Ei)}function xv(t,e){if(t==="click")return Wo(e)}function yv(t,e){if(t==="input"||t==="change")return Wo(e)}function vv(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Xt=typeof Object.is=="function"?Object.is:vv;function Ti(t,e){if(Xt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var s=Object.keys(t),n=Object.keys(e);if(s.length!==n.length)return!1;for(n=0;n<s.length;n++){var r=s[n];if(!cc.call(e,r)||!Xt(t[r],e[r]))return!1}return!0}function hh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function fh(t,e){var s=hh(t);t=0;for(var n;s;){if(s.nodeType===3){if(n=t+s.textContent.length,t<=e&&n>=e)return{node:s,offset:e-t};t=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=hh(s)}}function Ip(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Ip(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function $p(){for(var t=window,e=to();e instanceof t.HTMLIFrameElement;){try{var s=typeof e.contentWindow.location.href=="string"}catch{s=!1}if(s)t=e.contentWindow;else break;e=to(t.document)}return e}function Ud(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function bv(t){var e=$p(),s=t.focusedElem,n=t.selectionRange;if(e!==s&&s&&s.ownerDocument&&Ip(s.ownerDocument.documentElement,s)){if(n!==null&&Ud(s)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in s)s.selectionStart=e,s.selectionEnd=Math.min(t,s.value.length);else if(t=(e=s.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=s.textContent.length,i=Math.min(n.start,r);n=n.end===void 0?i:Math.min(n.end,r),!t.extend&&i>n&&(r=n,n=i,i=r),r=fh(s,i);var a=fh(s,n);r&&a&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=s;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<e.length;s++)t=e[s],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var wv=_s&&"documentMode"in document&&11>=document.documentMode,er=null,Pc=null,di=null,Ec=!1;function mh(t,e,s){var n=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Ec||er==null||er!==to(n)||(n=er,"selectionStart"in n&&Ud(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),di&&Ti(di,n)||(di=n,n=lo(Pc,"onSelect"),0<n.length&&(e=new $d("onSelect","select",null,e,s),t.push({event:e,listeners:n}),e.target=er)))}function ua(t,e){var s={};return s[t.toLowerCase()]=e.toLowerCase(),s["Webkit"+t]="webkit"+e,s["Moz"+t]="moz"+e,s}var tr={animationend:ua("Animation","AnimationEnd"),animationiteration:ua("Animation","AnimationIteration"),animationstart:ua("Animation","AnimationStart"),transitionend:ua("Transition","TransitionEnd")},Pl={},zp={};_s&&(zp=document.createElement("div").style,"AnimationEvent"in window||(delete tr.animationend.animation,delete tr.animationiteration.animation,delete tr.animationstart.animation),"TransitionEvent"in window||delete tr.transitionend.transition);function Ho(t){if(Pl[t])return Pl[t];if(!tr[t])return t;var e=tr[t],s;for(s in e)if(e.hasOwnProperty(s)&&s in zp)return Pl[t]=e[s];return t}var Fp=Ho("animationend"),Up=Ho("animationiteration"),Wp=Ho("animationstart"),Hp=Ho("transitionend"),Vp=new Map,ph="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rn(t,e){Vp.set(t,e),$n(e,[t])}for(var El=0;El<ph.length;El++){var Tl=ph[El],_v=Tl.toLowerCase(),jv=Tl[0].toUpperCase()+Tl.slice(1);rn(_v,"on"+jv)}rn(Fp,"onAnimationEnd");rn(Up,"onAnimationIteration");rn(Wp,"onAnimationStart");rn("dblclick","onDoubleClick");rn("focusin","onFocus");rn("focusout","onBlur");rn(Hp,"onTransitionEnd");yr("onMouseEnter",["mouseout","mouseover"]);yr("onMouseLeave",["mouseout","mouseover"]);yr("onPointerEnter",["pointerout","pointerover"]);yr("onPointerLeave",["pointerout","pointerover"]);$n("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$n("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$n("onBeforeInput",["compositionend","keypress","textInput","paste"]);$n("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$n("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$n("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kv=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zr));function gh(t,e,s){var n=t.type||"unknown-event";t.currentTarget=s,_y(n,e,void 0,t),t.currentTarget=null}function qp(t,e){e=(e&4)!==0;for(var s=0;s<t.length;s++){var n=t[s],r=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var a=n.length-1;0<=a;a--){var l=n[a],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&r.isPropagationStopped())break e;gh(r,l,d),i=c}else for(a=0;a<n.length;a++){if(l=n[a],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&r.isPropagationStopped())break e;gh(r,l,d),i=c}}}if(no)throw t=kc,no=!1,kc=null,t}function Se(t,e){var s=e[Rc];s===void 0&&(s=e[Rc]=new Set);var n=t+"__bubble";s.has(n)||(Kp(e,t,2,!1),s.add(n))}function Al(t,e,s){var n=0;e&&(n|=4),Kp(s,t,n,e)}var ha="_reactListening"+Math.random().toString(36).slice(2);function Ai(t){if(!t[ha]){t[ha]=!0,ep.forEach(function(s){s!=="selectionchange"&&(kv.has(s)||Al(s,!1,t),Al(s,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ha]||(e[ha]=!0,Al("selectionchange",!1,e))}}function Kp(t,e,s,n){switch(Tp(e)){case 1:var r=Iy;break;case 4:r=$y;break;default:r=Bd}s=r.bind(null,e,s,t),r=void 0,!jc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),n?r!==void 0?t.addEventListener(e,s,{capture:!0,passive:r}):t.addEventListener(e,s,!0):r!==void 0?t.addEventListener(e,s,{passive:r}):t.addEventListener(e,s,!1)}function Ol(t,e,s,n,r){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var l=n.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(a===4)for(a=n.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;a=a.return}for(;l!==null;){if(a=jn(l),a===null)return;if(c=a.tag,c===5||c===6){n=i=a;continue e}l=l.parentNode}}n=n.return}gp(function(){var d=i,u=Md(s),h=[];e:{var f=Vp.get(t);if(f!==void 0){var m=$d,p=t;switch(t){case"keypress":if(Ua(s)===0)break e;case"keydown":case"keyup":m=ev;break;case"focusin":p="focus",m=Nl;break;case"focusout":p="blur",m=Nl;break;case"beforeblur":case"afterblur":m=Nl;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=rh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Uy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=nv;break;case Fp:case Up:case Wp:m=Vy;break;case Hp:m=iv;break;case"scroll":m=zy;break;case"wheel":m=ov;break;case"copy":case"cut":case"paste":m=Ky;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=ah}var x=(e&4)!==0,b=!x&&t==="scroll",y=x?f!==null?f+"Capture":null:f;x=[];for(var g=d,v;g!==null;){v=g;var w=v.stateNode;if(v.tag===5&&w!==null&&(v=w,y!==null&&(w=Ni(g,y),w!=null&&x.push(Oi(g,w,v)))),b)break;g=g.return}0<x.length&&(f=new m(f,p,null,s,u),h.push({event:f,listeners:x}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&s!==wc&&(p=s.relatedTarget||s.fromElement)&&(jn(p)||p[js]))break e;if((m||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,m?(p=s.relatedTarget||s.toElement,m=d,p=p?jn(p):null,p!==null&&(b=zn(p),p!==b||p.tag!==5&&p.tag!==6)&&(p=null)):(m=null,p=d),m!==p)){if(x=rh,w="onMouseLeave",y="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(x=ah,w="onPointerLeave",y="onPointerEnter",g="pointer"),b=m==null?f:sr(m),v=p==null?f:sr(p),f=new x(w,g+"leave",m,s,u),f.target=b,f.relatedTarget=v,w=null,jn(u)===d&&(x=new x(y,g+"enter",p,s,u),x.target=v,x.relatedTarget=b,w=x),b=w,m&&p)t:{for(x=m,y=p,g=0,v=x;v;v=Un(v))g++;for(v=0,w=y;w;w=Un(w))v++;for(;0<g-v;)x=Un(x),g--;for(;0<v-g;)y=Un(y),v--;for(;g--;){if(x===y||y!==null&&x===y.alternate)break t;x=Un(x),y=Un(y)}x=null}else x=null;m!==null&&xh(h,f,m,x,!1),p!==null&&b!==null&&xh(h,b,p,x,!0)}}e:{if(f=d?sr(d):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var _=mv;else if(ch(f))if(Dp)_=yv;else{_=gv;var j=pv}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=xv);if(_&&(_=_(t,d))){Lp(h,_,s,u);break e}j&&j(t,f,d),t==="focusout"&&(j=f._wrapperState)&&j.controlled&&f.type==="number"&&gc(f,"number",f.value)}switch(j=d?sr(d):window,t){case"focusin":(ch(j)||j.contentEditable==="true")&&(er=j,Pc=d,di=null);break;case"focusout":di=Pc=er=null;break;case"mousedown":Ec=!0;break;case"contextmenu":case"mouseup":case"dragend":Ec=!1,mh(h,s,u);break;case"selectionchange":if(wv)break;case"keydown":case"keyup":mh(h,s,u)}var E;if(Fd)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Zn?Mp(t,s)&&(A="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(A="onCompositionStart");A&&(Op&&s.locale!=="ko"&&(Zn||A!=="onCompositionStart"?A==="onCompositionEnd"&&Zn&&(E=Ap()):(Is=u,Id="value"in Is?Is.value:Is.textContent,Zn=!0)),j=lo(d,A),0<j.length&&(A=new ih(A,t,null,s,u),h.push({event:A,listeners:j}),E?A.data=E:(E=Rp(s),E!==null&&(A.data=E)))),(E=cv?dv(t,s):uv(t,s))&&(d=lo(d,"onBeforeInput"),0<d.length&&(u=new ih("onBeforeInput","beforeinput",null,s,u),h.push({event:u,listeners:d}),u.data=E))}qp(h,e)})}function Oi(t,e,s){return{instance:t,listener:e,currentTarget:s}}function lo(t,e){for(var s=e+"Capture",n=[];t!==null;){var r=t,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=Ni(t,s),i!=null&&n.unshift(Oi(t,i,r)),i=Ni(t,e),i!=null&&n.push(Oi(t,i,r))),t=t.return}return n}function Un(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function xh(t,e,s,n,r){for(var i=e._reactName,a=[];s!==null&&s!==n;){var l=s,c=l.alternate,d=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&d!==null&&(l=d,r?(c=Ni(s,i),c!=null&&a.unshift(Oi(s,c,l))):r||(c=Ni(s,i),c!=null&&a.push(Oi(s,c,l)))),s=s.return}a.length!==0&&t.push({event:e,listeners:a})}var Nv=/\r\n?/g,Sv=/\u0000|\uFFFD/g;function yh(t){return(typeof t=="string"?t:""+t).replace(Nv,`
`).replace(Sv,"")}function fa(t,e,s){if(e=yh(e),yh(t)!==e&&s)throw Error(F(425))}function co(){}var Tc=null,Ac=null;function Oc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Mc=typeof setTimeout=="function"?setTimeout:void 0,Cv=typeof clearTimeout=="function"?clearTimeout:void 0,vh=typeof Promise=="function"?Promise:void 0,Pv=typeof queueMicrotask=="function"?queueMicrotask:typeof vh<"u"?function(t){return vh.resolve(null).then(t).catch(Ev)}:Mc;function Ev(t){setTimeout(function(){throw t})}function Ml(t,e){var s=e,n=0;do{var r=s.nextSibling;if(t.removeChild(s),r&&r.nodeType===8)if(s=r.data,s==="/$"){if(n===0){t.removeChild(r),Pi(e);return}n--}else s!=="$"&&s!=="$?"&&s!=="$!"||n++;s=r}while(s);Pi(e)}function qs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function bh(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(e===0)return t;e--}else s==="/$"&&e++}t=t.previousSibling}return null}var Or=Math.random().toString(36).slice(2),ns="__reactFiber$"+Or,Mi="__reactProps$"+Or,js="__reactContainer$"+Or,Rc="__reactEvents$"+Or,Tv="__reactListeners$"+Or,Av="__reactHandles$"+Or;function jn(t){var e=t[ns];if(e)return e;for(var s=t.parentNode;s;){if(e=s[js]||s[ns]){if(s=e.alternate,e.child!==null||s!==null&&s.child!==null)for(t=bh(t);t!==null;){if(s=t[ns])return s;t=bh(t)}return e}t=s,s=t.parentNode}return null}function Gi(t){return t=t[ns]||t[js],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function sr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(F(33))}function Vo(t){return t[Mi]||null}var Lc=[],nr=-1;function an(t){return{current:t}}function Pe(t){0>nr||(t.current=Lc[nr],Lc[nr]=null,nr--)}function ke(t,e){nr++,Lc[nr]=t.current,t.current=e}var en={},tt=an(en),xt=an(!1),An=en;function vr(t,e){var s=t.type.contextTypes;if(!s)return en;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in s)r[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function yt(t){return t=t.childContextTypes,t!=null}function uo(){Pe(xt),Pe(tt)}function wh(t,e,s){if(tt.current!==en)throw Error(F(168));ke(tt,e),ke(xt,s)}function Yp(t,e,s){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return s;n=n.getChildContext();for(var r in n)if(!(r in e))throw Error(F(108,py(t)||"Unknown",r));return Oe({},s,n)}function ho(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||en,An=tt.current,ke(tt,t),ke(xt,xt.current),!0}function _h(t,e,s){var n=t.stateNode;if(!n)throw Error(F(169));s?(t=Yp(t,e,An),n.__reactInternalMemoizedMergedChildContext=t,Pe(xt),Pe(tt),ke(tt,t)):Pe(xt),ke(xt,s)}var ps=null,qo=!1,Rl=!1;function Gp(t){ps===null?ps=[t]:ps.push(t)}function Ov(t){qo=!0,Gp(t)}function on(){if(!Rl&&ps!==null){Rl=!0;var t=0,e=be;try{var s=ps;for(be=1;t<s.length;t++){var n=s[t];do n=n(!0);while(n!==null)}ps=null,qo=!1}catch(r){throw ps!==null&&(ps=ps.slice(t+1)),bp(Rd,on),r}finally{be=e,Rl=!1}}return null}var rr=[],ir=0,fo=null,mo=0,Mt=[],Rt=0,On=null,xs=1,ys="";function xn(t,e){rr[ir++]=mo,rr[ir++]=fo,fo=t,mo=e}function Qp(t,e,s){Mt[Rt++]=xs,Mt[Rt++]=ys,Mt[Rt++]=On,On=t;var n=xs;t=ys;var r=32-Gt(n)-1;n&=~(1<<r),s+=1;var i=32-Gt(e)+r;if(30<i){var a=r-r%5;i=(n&(1<<a)-1).toString(32),n>>=a,r-=a,xs=1<<32-Gt(e)+r|s<<r|n,ys=i+t}else xs=1<<i|s<<r|n,ys=t}function Wd(t){t.return!==null&&(xn(t,1),Qp(t,1,0))}function Hd(t){for(;t===fo;)fo=rr[--ir],rr[ir]=null,mo=rr[--ir],rr[ir]=null;for(;t===On;)On=Mt[--Rt],Mt[Rt]=null,ys=Mt[--Rt],Mt[Rt]=null,xs=Mt[--Rt],Mt[Rt]=null}var St=null,jt=null,Ee=!1,Kt=null;function Xp(t,e){var s=Lt(5,null,null,0);s.elementType="DELETED",s.stateNode=e,s.return=t,e=t.deletions,e===null?(t.deletions=[s],t.flags|=16):e.push(s)}function jh(t,e){switch(t.tag){case 5:var s=t.type;return e=e.nodeType!==1||s.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,St=t,jt=qs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,St=t,jt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(s=On!==null?{id:xs,overflow:ys}:null,t.memoizedState={dehydrated:e,treeContext:s,retryLane:1073741824},s=Lt(18,null,null,0),s.stateNode=e,s.return=t,t.child=s,St=t,jt=null,!0):!1;default:return!1}}function Dc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Bc(t){if(Ee){var e=jt;if(e){var s=e;if(!jh(t,e)){if(Dc(t))throw Error(F(418));e=qs(s.nextSibling);var n=St;e&&jh(t,e)?Xp(n,s):(t.flags=t.flags&-4097|2,Ee=!1,St=t)}}else{if(Dc(t))throw Error(F(418));t.flags=t.flags&-4097|2,Ee=!1,St=t}}}function kh(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;St=t}function ma(t){if(t!==St)return!1;if(!Ee)return kh(t),Ee=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Oc(t.type,t.memoizedProps)),e&&(e=jt)){if(Dc(t))throw Jp(),Error(F(418));for(;e;)Xp(t,e),e=qs(e.nextSibling)}if(kh(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(F(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"){if(e===0){jt=qs(t.nextSibling);break e}e--}else s!=="$"&&s!=="$!"&&s!=="$?"||e++}t=t.nextSibling}jt=null}}else jt=St?qs(t.stateNode.nextSibling):null;return!0}function Jp(){for(var t=jt;t;)t=qs(t.nextSibling)}function br(){jt=St=null,Ee=!1}function Vd(t){Kt===null?Kt=[t]:Kt.push(t)}var Mv=Ss.ReactCurrentBatchConfig;function Fr(t,e,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(F(309));var n=s.stateNode}if(!n)throw Error(F(147,t));var r=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var l=r.refs;a===null?delete l[i]:l[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(F(284));if(!s._owner)throw Error(F(290,t))}return t}function pa(t,e){throw t=Object.prototype.toString.call(e),Error(F(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Nh(t){var e=t._init;return e(t._payload)}function Zp(t){function e(y,g){if(t){var v=y.deletions;v===null?(y.deletions=[g],y.flags|=16):v.push(g)}}function s(y,g){if(!t)return null;for(;g!==null;)e(y,g),g=g.sibling;return null}function n(y,g){for(y=new Map;g!==null;)g.key!==null?y.set(g.key,g):y.set(g.index,g),g=g.sibling;return y}function r(y,g){return y=Qs(y,g),y.index=0,y.sibling=null,y}function i(y,g,v){return y.index=v,t?(v=y.alternate,v!==null?(v=v.index,v<g?(y.flags|=2,g):v):(y.flags|=2,g)):(y.flags|=1048576,g)}function a(y){return t&&y.alternate===null&&(y.flags|=2),y}function l(y,g,v,w){return g===null||g.tag!==6?(g=Fl(v,y.mode,w),g.return=y,g):(g=r(g,v),g.return=y,g)}function c(y,g,v,w){var _=v.type;return _===Jn?u(y,g,v.props.children,w,v.key):g!==null&&(g.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Ms&&Nh(_)===g.type)?(w=r(g,v.props),w.ref=Fr(y,g,v),w.return=y,w):(w=Ga(v.type,v.key,v.props,null,y.mode,w),w.ref=Fr(y,g,v),w.return=y,w)}function d(y,g,v,w){return g===null||g.tag!==4||g.stateNode.containerInfo!==v.containerInfo||g.stateNode.implementation!==v.implementation?(g=Ul(v,y.mode,w),g.return=y,g):(g=r(g,v.children||[]),g.return=y,g)}function u(y,g,v,w,_){return g===null||g.tag!==7?(g=Pn(v,y.mode,w,_),g.return=y,g):(g=r(g,v),g.return=y,g)}function h(y,g,v){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Fl(""+g,y.mode,v),g.return=y,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case ra:return v=Ga(g.type,g.key,g.props,null,y.mode,v),v.ref=Fr(y,null,g),v.return=y,v;case Xn:return g=Ul(g,y.mode,v),g.return=y,g;case Ms:var w=g._init;return h(y,w(g._payload),v)}if(Xr(g)||Dr(g))return g=Pn(g,y.mode,v,null),g.return=y,g;pa(y,g)}return null}function f(y,g,v,w){var _=g!==null?g.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return _!==null?null:l(y,g,""+v,w);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ra:return v.key===_?c(y,g,v,w):null;case Xn:return v.key===_?d(y,g,v,w):null;case Ms:return _=v._init,f(y,g,_(v._payload),w)}if(Xr(v)||Dr(v))return _!==null?null:u(y,g,v,w,null);pa(y,v)}return null}function m(y,g,v,w,_){if(typeof w=="string"&&w!==""||typeof w=="number")return y=y.get(v)||null,l(g,y,""+w,_);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ra:return y=y.get(w.key===null?v:w.key)||null,c(g,y,w,_);case Xn:return y=y.get(w.key===null?v:w.key)||null,d(g,y,w,_);case Ms:var j=w._init;return m(y,g,v,j(w._payload),_)}if(Xr(w)||Dr(w))return y=y.get(v)||null,u(g,y,w,_,null);pa(g,w)}return null}function p(y,g,v,w){for(var _=null,j=null,E=g,A=g=0,S=null;E!==null&&A<v.length;A++){E.index>A?(S=E,E=null):S=E.sibling;var O=f(y,E,v[A],w);if(O===null){E===null&&(E=S);break}t&&E&&O.alternate===null&&e(y,E),g=i(O,g,A),j===null?_=O:j.sibling=O,j=O,E=S}if(A===v.length)return s(y,E),Ee&&xn(y,A),_;if(E===null){for(;A<v.length;A++)E=h(y,v[A],w),E!==null&&(g=i(E,g,A),j===null?_=E:j.sibling=E,j=E);return Ee&&xn(y,A),_}for(E=n(y,E);A<v.length;A++)S=m(E,y,A,v[A],w),S!==null&&(t&&S.alternate!==null&&E.delete(S.key===null?A:S.key),g=i(S,g,A),j===null?_=S:j.sibling=S,j=S);return t&&E.forEach(function(P){return e(y,P)}),Ee&&xn(y,A),_}function x(y,g,v,w){var _=Dr(v);if(typeof _!="function")throw Error(F(150));if(v=_.call(v),v==null)throw Error(F(151));for(var j=_=null,E=g,A=g=0,S=null,O=v.next();E!==null&&!O.done;A++,O=v.next()){E.index>A?(S=E,E=null):S=E.sibling;var P=f(y,E,O.value,w);if(P===null){E===null&&(E=S);break}t&&E&&P.alternate===null&&e(y,E),g=i(P,g,A),j===null?_=P:j.sibling=P,j=P,E=S}if(O.done)return s(y,E),Ee&&xn(y,A),_;if(E===null){for(;!O.done;A++,O=v.next())O=h(y,O.value,w),O!==null&&(g=i(O,g,A),j===null?_=O:j.sibling=O,j=O);return Ee&&xn(y,A),_}for(E=n(y,E);!O.done;A++,O=v.next())O=m(E,y,A,O.value,w),O!==null&&(t&&O.alternate!==null&&E.delete(O.key===null?A:O.key),g=i(O,g,A),j===null?_=O:j.sibling=O,j=O);return t&&E.forEach(function(R){return e(y,R)}),Ee&&xn(y,A),_}function b(y,g,v,w){if(typeof v=="object"&&v!==null&&v.type===Jn&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case ra:e:{for(var _=v.key,j=g;j!==null;){if(j.key===_){if(_=v.type,_===Jn){if(j.tag===7){s(y,j.sibling),g=r(j,v.props.children),g.return=y,y=g;break e}}else if(j.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Ms&&Nh(_)===j.type){s(y,j.sibling),g=r(j,v.props),g.ref=Fr(y,j,v),g.return=y,y=g;break e}s(y,j);break}else e(y,j);j=j.sibling}v.type===Jn?(g=Pn(v.props.children,y.mode,w,v.key),g.return=y,y=g):(w=Ga(v.type,v.key,v.props,null,y.mode,w),w.ref=Fr(y,g,v),w.return=y,y=w)}return a(y);case Xn:e:{for(j=v.key;g!==null;){if(g.key===j)if(g.tag===4&&g.stateNode.containerInfo===v.containerInfo&&g.stateNode.implementation===v.implementation){s(y,g.sibling),g=r(g,v.children||[]),g.return=y,y=g;break e}else{s(y,g);break}else e(y,g);g=g.sibling}g=Ul(v,y.mode,w),g.return=y,y=g}return a(y);case Ms:return j=v._init,b(y,g,j(v._payload),w)}if(Xr(v))return p(y,g,v,w);if(Dr(v))return x(y,g,v,w);pa(y,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,g!==null&&g.tag===6?(s(y,g.sibling),g=r(g,v),g.return=y,y=g):(s(y,g),g=Fl(v,y.mode,w),g.return=y,y=g),a(y)):s(y,g)}return b}var wr=Zp(!0),eg=Zp(!1),po=an(null),go=null,ar=null,qd=null;function Kd(){qd=ar=go=null}function Yd(t){var e=po.current;Pe(po),t._currentValue=e}function Ic(t,e,s){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===s)break;t=t.return}}function mr(t,e){go=t,qd=ar=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(gt=!0),t.firstContext=null)}function It(t){var e=t._currentValue;if(qd!==t)if(t={context:t,memoizedValue:e,next:null},ar===null){if(go===null)throw Error(F(308));ar=t,go.dependencies={lanes:0,firstContext:t}}else ar=ar.next=t;return e}var kn=null;function Gd(t){kn===null?kn=[t]:kn.push(t)}function tg(t,e,s,n){var r=e.interleaved;return r===null?(s.next=s,Gd(e)):(s.next=r.next,r.next=s),e.interleaved=s,ks(t,n)}function ks(t,e){t.lanes|=e;var s=t.alternate;for(s!==null&&(s.lanes|=e),s=t,t=t.return;t!==null;)t.childLanes|=e,s=t.alternate,s!==null&&(s.childLanes|=e),s=t,t=t.return;return s.tag===3?s.stateNode:null}var Rs=!1;function Qd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ws(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ks(t,e,s){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,ge&2){var r=n.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),n.pending=e,ks(t,s)}return r=n.interleaved,r===null?(e.next=e,Gd(n)):(e.next=r.next,r.next=e),n.interleaved=e,ks(t,s)}function Wa(t,e,s){if(e=e.updateQueue,e!==null&&(e=e.shared,(s&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,s|=n,e.lanes=s,Ld(t,s)}}function Sh(t,e){var s=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,s===n)){var r=null,i=null;if(s=s.firstBaseUpdate,s!==null){do{var a={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};i===null?r=i=a:i=i.next=a,s=s.next}while(s!==null);i===null?r=i=e:i=i.next=e}else r=i=e;s={baseState:n.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=e:t.next=e,s.lastBaseUpdate=e}function xo(t,e,s,n){var r=t.updateQueue;Rs=!1;var i=r.firstBaseUpdate,a=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var c=l,d=c.next;c.next=null,a===null?i=d:a.next=d,a=c;var u=t.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==a&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(i!==null){var h=r.baseState;a=0,u=d=c=null,l=i;do{var f=l.lane,m=l.eventTime;if((n&f)===f){u!==null&&(u=u.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=t,x=l;switch(f=e,m=s,x.tag){case 1:if(p=x.payload,typeof p=="function"){h=p.call(m,h,f);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=x.payload,f=typeof p=="function"?p.call(m,h,f):p,f==null)break e;h=Oe({},h,f);break e;case 2:Rs=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[l]:f.push(l))}else m={eventTime:m,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=m,c=h):u=u.next=m,a|=f;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;f=l,l=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(u===null&&(c=h),r.baseState=c,r.firstBaseUpdate=d,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else i===null&&(r.shared.lanes=0);Rn|=a,t.lanes=a,t.memoizedState=h}}function Ch(t,e,s){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],r=n.callback;if(r!==null){if(n.callback=null,n=s,typeof r!="function")throw Error(F(191,r));r.call(n)}}}var Qi={},is=an(Qi),Ri=an(Qi),Li=an(Qi);function Nn(t){if(t===Qi)throw Error(F(174));return t}function Xd(t,e){switch(ke(Li,e),ke(Ri,t),ke(is,Qi),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:yc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=yc(e,t)}Pe(is),ke(is,e)}function _r(){Pe(is),Pe(Ri),Pe(Li)}function ng(t){Nn(Li.current);var e=Nn(is.current),s=yc(e,t.type);e!==s&&(ke(Ri,t),ke(is,s))}function Jd(t){Ri.current===t&&(Pe(is),Pe(Ri))}var Te=an(0);function yo(t){for(var e=t;e!==null;){if(e.tag===13){var s=e.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ll=[];function Zd(){for(var t=0;t<Ll.length;t++)Ll[t]._workInProgressVersionPrimary=null;Ll.length=0}var Ha=Ss.ReactCurrentDispatcher,Dl=Ss.ReactCurrentBatchConfig,Mn=0,Ae=null,ze=null,We=null,vo=!1,ui=!1,Di=0,Rv=0;function Xe(){throw Error(F(321))}function eu(t,e){if(e===null)return!1;for(var s=0;s<e.length&&s<t.length;s++)if(!Xt(t[s],e[s]))return!1;return!0}function tu(t,e,s,n,r,i){if(Mn=i,Ae=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ha.current=t===null||t.memoizedState===null?Iv:$v,t=s(n,r),ui){i=0;do{if(ui=!1,Di=0,25<=i)throw Error(F(301));i+=1,We=ze=null,e.updateQueue=null,Ha.current=zv,t=s(n,r)}while(ui)}if(Ha.current=bo,e=ze!==null&&ze.next!==null,Mn=0,We=ze=Ae=null,vo=!1,e)throw Error(F(300));return t}function su(){var t=Di!==0;return Di=0,t}function ts(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return We===null?Ae.memoizedState=We=t:We=We.next=t,We}function $t(){if(ze===null){var t=Ae.alternate;t=t!==null?t.memoizedState:null}else t=ze.next;var e=We===null?Ae.memoizedState:We.next;if(e!==null)We=e,ze=t;else{if(t===null)throw Error(F(310));ze=t,t={memoizedState:ze.memoizedState,baseState:ze.baseState,baseQueue:ze.baseQueue,queue:ze.queue,next:null},We===null?Ae.memoizedState=We=t:We=We.next=t}return We}function Bi(t,e){return typeof e=="function"?e(t):e}function Bl(t){var e=$t(),s=e.queue;if(s===null)throw Error(F(311));s.lastRenderedReducer=t;var n=ze,r=n.baseQueue,i=s.pending;if(i!==null){if(r!==null){var a=r.next;r.next=i.next,i.next=a}n.baseQueue=r=i,s.pending=null}if(r!==null){i=r.next,n=n.baseState;var l=a=null,c=null,d=i;do{var u=d.lane;if((Mn&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:t(n,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=h,a=n):c=c.next=h,Ae.lanes|=u,Rn|=u}d=d.next}while(d!==null&&d!==i);c===null?a=n:c.next=l,Xt(n,e.memoizedState)||(gt=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=c,s.lastRenderedState=n}if(t=s.interleaved,t!==null){r=t;do i=r.lane,Ae.lanes|=i,Rn|=i,r=r.next;while(r!==t)}else r===null&&(s.lanes=0);return[e.memoizedState,s.dispatch]}function Il(t){var e=$t(),s=e.queue;if(s===null)throw Error(F(311));s.lastRenderedReducer=t;var n=s.dispatch,r=s.pending,i=e.memoizedState;if(r!==null){s.pending=null;var a=r=r.next;do i=t(i,a.action),a=a.next;while(a!==r);Xt(i,e.memoizedState)||(gt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),s.lastRenderedState=i}return[i,n]}function rg(){}function ig(t,e){var s=Ae,n=$t(),r=e(),i=!Xt(n.memoizedState,r);if(i&&(n.memoizedState=r,gt=!0),n=n.queue,nu(lg.bind(null,s,n,t),[t]),n.getSnapshot!==e||i||We!==null&&We.memoizedState.tag&1){if(s.flags|=2048,Ii(9,og.bind(null,s,n,r,e),void 0,null),He===null)throw Error(F(349));Mn&30||ag(s,e,r)}return r}function ag(t,e,s){t.flags|=16384,t={getSnapshot:e,value:s},e=Ae.updateQueue,e===null?(e={lastEffect:null,stores:null},Ae.updateQueue=e,e.stores=[t]):(s=e.stores,s===null?e.stores=[t]:s.push(t))}function og(t,e,s,n){e.value=s,e.getSnapshot=n,cg(e)&&dg(t)}function lg(t,e,s){return s(function(){cg(e)&&dg(t)})}function cg(t){var e=t.getSnapshot;t=t.value;try{var s=e();return!Xt(t,s)}catch{return!0}}function dg(t){var e=ks(t,1);e!==null&&Qt(e,t,1,-1)}function Ph(t){var e=ts();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bi,lastRenderedState:t},e.queue=t,t=t.dispatch=Bv.bind(null,Ae,t),[e.memoizedState,t]}function Ii(t,e,s,n){return t={tag:t,create:e,destroy:s,deps:n,next:null},e=Ae.updateQueue,e===null?(e={lastEffect:null,stores:null},Ae.updateQueue=e,e.lastEffect=t.next=t):(s=e.lastEffect,s===null?e.lastEffect=t.next=t:(n=s.next,s.next=t,t.next=n,e.lastEffect=t)),t}function ug(){return $t().memoizedState}function Va(t,e,s,n){var r=ts();Ae.flags|=t,r.memoizedState=Ii(1|e,s,void 0,n===void 0?null:n)}function Ko(t,e,s,n){var r=$t();n=n===void 0?null:n;var i=void 0;if(ze!==null){var a=ze.memoizedState;if(i=a.destroy,n!==null&&eu(n,a.deps)){r.memoizedState=Ii(e,s,i,n);return}}Ae.flags|=t,r.memoizedState=Ii(1|e,s,i,n)}function Eh(t,e){return Va(8390656,8,t,e)}function nu(t,e){return Ko(2048,8,t,e)}function hg(t,e){return Ko(4,2,t,e)}function fg(t,e){return Ko(4,4,t,e)}function mg(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function pg(t,e,s){return s=s!=null?s.concat([t]):null,Ko(4,4,mg.bind(null,e,t),s)}function ru(){}function gg(t,e){var s=$t();e=e===void 0?null:e;var n=s.memoizedState;return n!==null&&e!==null&&eu(e,n[1])?n[0]:(s.memoizedState=[t,e],t)}function xg(t,e){var s=$t();e=e===void 0?null:e;var n=s.memoizedState;return n!==null&&e!==null&&eu(e,n[1])?n[0]:(t=t(),s.memoizedState=[t,e],t)}function yg(t,e,s){return Mn&21?(Xt(s,e)||(s=jp(),Ae.lanes|=s,Rn|=s,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,gt=!0),t.memoizedState=s)}function Lv(t,e){var s=be;be=s!==0&&4>s?s:4,t(!0);var n=Dl.transition;Dl.transition={};try{t(!1),e()}finally{be=s,Dl.transition=n}}function vg(){return $t().memoizedState}function Dv(t,e,s){var n=Gs(t);if(s={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null},bg(t))wg(e,s);else if(s=tg(t,e,s,n),s!==null){var r=at();Qt(s,t,n,r),_g(s,e,n)}}function Bv(t,e,s){var n=Gs(t),r={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null};if(bg(t))wg(e,r);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,s);if(r.hasEagerState=!0,r.eagerState=l,Xt(l,a)){var c=e.interleaved;c===null?(r.next=r,Gd(e)):(r.next=c.next,c.next=r),e.interleaved=r;return}}catch{}finally{}s=tg(t,e,r,n),s!==null&&(r=at(),Qt(s,t,n,r),_g(s,e,n))}}function bg(t){var e=t.alternate;return t===Ae||e!==null&&e===Ae}function wg(t,e){ui=vo=!0;var s=t.pending;s===null?e.next=e:(e.next=s.next,s.next=e),t.pending=e}function _g(t,e,s){if(s&4194240){var n=e.lanes;n&=t.pendingLanes,s|=n,e.lanes=s,Ld(t,s)}}var bo={readContext:It,useCallback:Xe,useContext:Xe,useEffect:Xe,useImperativeHandle:Xe,useInsertionEffect:Xe,useLayoutEffect:Xe,useMemo:Xe,useReducer:Xe,useRef:Xe,useState:Xe,useDebugValue:Xe,useDeferredValue:Xe,useTransition:Xe,useMutableSource:Xe,useSyncExternalStore:Xe,useId:Xe,unstable_isNewReconciler:!1},Iv={readContext:It,useCallback:function(t,e){return ts().memoizedState=[t,e===void 0?null:e],t},useContext:It,useEffect:Eh,useImperativeHandle:function(t,e,s){return s=s!=null?s.concat([t]):null,Va(4194308,4,mg.bind(null,e,t),s)},useLayoutEffect:function(t,e){return Va(4194308,4,t,e)},useInsertionEffect:function(t,e){return Va(4,2,t,e)},useMemo:function(t,e){var s=ts();return e=e===void 0?null:e,t=t(),s.memoizedState=[t,e],t},useReducer:function(t,e,s){var n=ts();return e=s!==void 0?s(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Dv.bind(null,Ae,t),[n.memoizedState,t]},useRef:function(t){var e=ts();return t={current:t},e.memoizedState=t},useState:Ph,useDebugValue:ru,useDeferredValue:function(t){return ts().memoizedState=t},useTransition:function(){var t=Ph(!1),e=t[0];return t=Lv.bind(null,t[1]),ts().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,s){var n=Ae,r=ts();if(Ee){if(s===void 0)throw Error(F(407));s=s()}else{if(s=e(),He===null)throw Error(F(349));Mn&30||ag(n,e,s)}r.memoizedState=s;var i={value:s,getSnapshot:e};return r.queue=i,Eh(lg.bind(null,n,i,t),[t]),n.flags|=2048,Ii(9,og.bind(null,n,i,s,e),void 0,null),s},useId:function(){var t=ts(),e=He.identifierPrefix;if(Ee){var s=ys,n=xs;s=(n&~(1<<32-Gt(n)-1)).toString(32)+s,e=":"+e+"R"+s,s=Di++,0<s&&(e+="H"+s.toString(32)),e+=":"}else s=Rv++,e=":"+e+"r"+s.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},$v={readContext:It,useCallback:gg,useContext:It,useEffect:nu,useImperativeHandle:pg,useInsertionEffect:hg,useLayoutEffect:fg,useMemo:xg,useReducer:Bl,useRef:ug,useState:function(){return Bl(Bi)},useDebugValue:ru,useDeferredValue:function(t){var e=$t();return yg(e,ze.memoizedState,t)},useTransition:function(){var t=Bl(Bi)[0],e=$t().memoizedState;return[t,e]},useMutableSource:rg,useSyncExternalStore:ig,useId:vg,unstable_isNewReconciler:!1},zv={readContext:It,useCallback:gg,useContext:It,useEffect:nu,useImperativeHandle:pg,useInsertionEffect:hg,useLayoutEffect:fg,useMemo:xg,useReducer:Il,useRef:ug,useState:function(){return Il(Bi)},useDebugValue:ru,useDeferredValue:function(t){var e=$t();return ze===null?e.memoizedState=t:yg(e,ze.memoizedState,t)},useTransition:function(){var t=Il(Bi)[0],e=$t().memoizedState;return[t,e]},useMutableSource:rg,useSyncExternalStore:ig,useId:vg,unstable_isNewReconciler:!1};function Ht(t,e){if(t&&t.defaultProps){e=Oe({},e),t=t.defaultProps;for(var s in t)e[s]===void 0&&(e[s]=t[s]);return e}return e}function $c(t,e,s,n){e=t.memoizedState,s=s(n,e),s=s==null?e:Oe({},e,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var Yo={isMounted:function(t){return(t=t._reactInternals)?zn(t)===t:!1},enqueueSetState:function(t,e,s){t=t._reactInternals;var n=at(),r=Gs(t),i=ws(n,r);i.payload=e,s!=null&&(i.callback=s),e=Ks(t,i,r),e!==null&&(Qt(e,t,r,n),Wa(e,t,r))},enqueueReplaceState:function(t,e,s){t=t._reactInternals;var n=at(),r=Gs(t),i=ws(n,r);i.tag=1,i.payload=e,s!=null&&(i.callback=s),e=Ks(t,i,r),e!==null&&(Qt(e,t,r,n),Wa(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var s=at(),n=Gs(t),r=ws(s,n);r.tag=2,e!=null&&(r.callback=e),e=Ks(t,r,n),e!==null&&(Qt(e,t,n,s),Wa(e,t,n))}};function Th(t,e,s,n,r,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,a):e.prototype&&e.prototype.isPureReactComponent?!Ti(s,n)||!Ti(r,i):!0}function jg(t,e,s){var n=!1,r=en,i=e.contextType;return typeof i=="object"&&i!==null?i=It(i):(r=yt(e)?An:tt.current,n=e.contextTypes,i=(n=n!=null)?vr(t,r):en),e=new e(s,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Yo,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=i),e}function Ah(t,e,s,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(s,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(s,n),e.state!==t&&Yo.enqueueReplaceState(e,e.state,null)}function zc(t,e,s,n){var r=t.stateNode;r.props=s,r.state=t.memoizedState,r.refs={},Qd(t);var i=e.contextType;typeof i=="object"&&i!==null?r.context=It(i):(i=yt(e)?An:tt.current,r.context=vr(t,i)),r.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&($c(t,e,i,s),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Yo.enqueueReplaceState(r,r.state,null),xo(t,s,r,n),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function jr(t,e){try{var s="",n=e;do s+=my(n),n=n.return;while(n);var r=s}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:r,digest:null}}function $l(t,e,s){return{value:t,source:null,stack:s??null,digest:e??null}}function Fc(t,e){try{console.error(e.value)}catch(s){setTimeout(function(){throw s})}}var Fv=typeof WeakMap=="function"?WeakMap:Map;function kg(t,e,s){s=ws(-1,s),s.tag=3,s.payload={element:null};var n=e.value;return s.callback=function(){_o||(_o=!0,Xc=n),Fc(t,e)},s}function Ng(t,e,s){s=ws(-1,s),s.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var r=e.value;s.payload=function(){return n(r)},s.callback=function(){Fc(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(s.callback=function(){Fc(t,e),typeof n!="function"&&(Ys===null?Ys=new Set([this]):Ys.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),s}function Oh(t,e,s){var n=t.pingCache;if(n===null){n=t.pingCache=new Fv;var r=new Set;n.set(e,r)}else r=n.get(e),r===void 0&&(r=new Set,n.set(e,r));r.has(s)||(r.add(s),t=tb.bind(null,t,e,s),e.then(t,t))}function Mh(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Rh(t,e,s,n,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(e=ws(-1,1),e.tag=2,Ks(s,e,1))),s.lanes|=1),t)}var Uv=Ss.ReactCurrentOwner,gt=!1;function it(t,e,s,n){e.child=t===null?eg(e,null,s,n):wr(e,t.child,s,n)}function Lh(t,e,s,n,r){s=s.render;var i=e.ref;return mr(e,r),n=tu(t,e,s,n,i,r),s=su(),t!==null&&!gt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Ns(t,e,r)):(Ee&&s&&Wd(e),e.flags|=1,it(t,e,n,r),e.child)}function Dh(t,e,s,n,r){if(t===null){var i=s.type;return typeof i=="function"&&!hu(i)&&i.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(e.tag=15,e.type=i,Sg(t,e,i,n,r)):(t=Ga(s.type,null,n,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&r)){var a=i.memoizedProps;if(s=s.compare,s=s!==null?s:Ti,s(a,n)&&t.ref===e.ref)return Ns(t,e,r)}return e.flags|=1,t=Qs(i,n),t.ref=e.ref,t.return=e,e.child=t}function Sg(t,e,s,n,r){if(t!==null){var i=t.memoizedProps;if(Ti(i,n)&&t.ref===e.ref)if(gt=!1,e.pendingProps=n=i,(t.lanes&r)!==0)t.flags&131072&&(gt=!0);else return e.lanes=t.lanes,Ns(t,e,r)}return Uc(t,e,s,n,r)}function Cg(t,e,s){var n=e.pendingProps,r=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ke(lr,wt),wt|=s;else{if(!(s&1073741824))return t=i!==null?i.baseLanes|s:s,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ke(lr,wt),wt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:s,ke(lr,wt),wt|=n}else i!==null?(n=i.baseLanes|s,e.memoizedState=null):n=s,ke(lr,wt),wt|=n;return it(t,e,r,s),e.child}function Pg(t,e){var s=e.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(e.flags|=512,e.flags|=2097152)}function Uc(t,e,s,n,r){var i=yt(s)?An:tt.current;return i=vr(e,i),mr(e,r),s=tu(t,e,s,n,i,r),n=su(),t!==null&&!gt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Ns(t,e,r)):(Ee&&n&&Wd(e),e.flags|=1,it(t,e,s,r),e.child)}function Bh(t,e,s,n,r){if(yt(s)){var i=!0;ho(e)}else i=!1;if(mr(e,r),e.stateNode===null)qa(t,e),jg(e,s,n),zc(e,s,n,r),n=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,d=s.contextType;typeof d=="object"&&d!==null?d=It(d):(d=yt(s)?An:tt.current,d=vr(e,d));var u=s.getDerivedStateFromProps,h=typeof u=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==n||c!==d)&&Ah(e,a,n,d),Rs=!1;var f=e.memoizedState;a.state=f,xo(e,n,a,r),c=e.memoizedState,l!==n||f!==c||xt.current||Rs?(typeof u=="function"&&($c(e,s,u,n),c=e.memoizedState),(l=Rs||Th(e,s,l,n,f,c,d))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),a.props=n,a.state=c,a.context=d,n=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,sg(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:Ht(e.type,l),a.props=d,h=e.pendingProps,f=a.context,c=s.contextType,typeof c=="object"&&c!==null?c=It(c):(c=yt(s)?An:tt.current,c=vr(e,c));var m=s.getDerivedStateFromProps;(u=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==h||f!==c)&&Ah(e,a,n,c),Rs=!1,f=e.memoizedState,a.state=f,xo(e,n,a,r);var p=e.memoizedState;l!==h||f!==p||xt.current||Rs?(typeof m=="function"&&($c(e,s,m,n),p=e.memoizedState),(d=Rs||Th(e,s,d,n,f,p,c)||!1)?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,p,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,p,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=p),a.props=n,a.state=p,a.context=c,n=d):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return Wc(t,e,s,n,i,r)}function Wc(t,e,s,n,r,i){Pg(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return r&&_h(e,s,!1),Ns(t,e,i);n=e.stateNode,Uv.current=e;var l=a&&typeof s.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=wr(e,t.child,null,i),e.child=wr(e,null,l,i)):it(t,e,l,i),e.memoizedState=n.state,r&&_h(e,s,!0),e.child}function Eg(t){var e=t.stateNode;e.pendingContext?wh(t,e.pendingContext,e.pendingContext!==e.context):e.context&&wh(t,e.context,!1),Xd(t,e.containerInfo)}function Ih(t,e,s,n,r){return br(),Vd(r),e.flags|=256,it(t,e,s,n),e.child}var Hc={dehydrated:null,treeContext:null,retryLane:0};function Vc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Tg(t,e,s){var n=e.pendingProps,r=Te.current,i=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(r&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),ke(Te,r&1),t===null)return Bc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,i?(n=e.mode,i=e.child,a={mode:"hidden",children:a},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Xo(a,n,0,null),t=Pn(t,n,s,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Vc(s),e.memoizedState=Hc,t):iu(e,a));if(r=t.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return Wv(t,e,a,n,l,r,s);if(i){i=n.fallback,a=e.mode,r=t.child,l=r.sibling;var c={mode:"hidden",children:n.children};return!(a&1)&&e.child!==r?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=Qs(r,c),n.subtreeFlags=r.subtreeFlags&14680064),l!==null?i=Qs(l,i):(i=Pn(i,a,s,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,a=t.child.memoizedState,a=a===null?Vc(s):{baseLanes:a.baseLanes|s,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~s,e.memoizedState=Hc,n}return i=t.child,t=i.sibling,n=Qs(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=s),n.return=e,n.sibling=null,t!==null&&(s=e.deletions,s===null?(e.deletions=[t],e.flags|=16):s.push(t)),e.child=n,e.memoizedState=null,n}function iu(t,e){return e=Xo({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ga(t,e,s,n){return n!==null&&Vd(n),wr(e,t.child,null,s),t=iu(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Wv(t,e,s,n,r,i,a){if(s)return e.flags&256?(e.flags&=-257,n=$l(Error(F(422))),ga(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,r=e.mode,n=Xo({mode:"visible",children:n.children},r,0,null),i=Pn(i,r,a,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&wr(e,t.child,null,a),e.child.memoizedState=Vc(a),e.memoizedState=Hc,i);if(!(e.mode&1))return ga(t,e,a,null);if(r.data==="$!"){if(n=r.nextSibling&&r.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(F(419)),n=$l(i,n,void 0),ga(t,e,a,n)}if(l=(a&t.childLanes)!==0,gt||l){if(n=He,n!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(n.suspendedLanes|a)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,ks(t,r),Qt(n,t,r,-1))}return uu(),n=$l(Error(F(421))),ga(t,e,a,n)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=sb.bind(null,t),r._reactRetry=e,null):(t=i.treeContext,jt=qs(r.nextSibling),St=e,Ee=!0,Kt=null,t!==null&&(Mt[Rt++]=xs,Mt[Rt++]=ys,Mt[Rt++]=On,xs=t.id,ys=t.overflow,On=e),e=iu(e,n.children),e.flags|=4096,e)}function $h(t,e,s){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Ic(t.return,e,s)}function zl(t,e,s,n,r){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:s,tailMode:r}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=s,i.tailMode=r)}function Ag(t,e,s){var n=e.pendingProps,r=n.revealOrder,i=n.tail;if(it(t,e,n.children,s),n=Te.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&$h(t,s,e);else if(t.tag===19)$h(t,s,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(ke(Te,n),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(s=e.child,r=null;s!==null;)t=s.alternate,t!==null&&yo(t)===null&&(r=s),s=s.sibling;s=r,s===null?(r=e.child,e.child=null):(r=s.sibling,s.sibling=null),zl(e,!1,r,s,i);break;case"backwards":for(s=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&yo(t)===null){e.child=r;break}t=r.sibling,r.sibling=s,s=r,r=t}zl(e,!0,s,null,i);break;case"together":zl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function qa(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ns(t,e,s){if(t!==null&&(e.dependencies=t.dependencies),Rn|=e.lanes,!(s&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(F(153));if(e.child!==null){for(t=e.child,s=Qs(t,t.pendingProps),e.child=s,s.return=e;t.sibling!==null;)t=t.sibling,s=s.sibling=Qs(t,t.pendingProps),s.return=e;s.sibling=null}return e.child}function Hv(t,e,s){switch(e.tag){case 3:Eg(e),br();break;case 5:ng(e);break;case 1:yt(e.type)&&ho(e);break;case 4:Xd(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,r=e.memoizedProps.value;ke(po,n._currentValue),n._currentValue=r;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(ke(Te,Te.current&1),e.flags|=128,null):s&e.child.childLanes?Tg(t,e,s):(ke(Te,Te.current&1),t=Ns(t,e,s),t!==null?t.sibling:null);ke(Te,Te.current&1);break;case 19:if(n=(s&e.childLanes)!==0,t.flags&128){if(n)return Ag(t,e,s);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),ke(Te,Te.current),n)break;return null;case 22:case 23:return e.lanes=0,Cg(t,e,s)}return Ns(t,e,s)}var Og,qc,Mg,Rg;Og=function(t,e){for(var s=e.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};qc=function(){};Mg=function(t,e,s,n){var r=t.memoizedProps;if(r!==n){t=e.stateNode,Nn(is.current);var i=null;switch(s){case"input":r=mc(t,r),n=mc(t,n),i=[];break;case"select":r=Oe({},r,{value:void 0}),n=Oe({},n,{value:void 0}),i=[];break;case"textarea":r=xc(t,r),n=xc(t,n),i=[];break;default:typeof r.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=co)}vc(s,n);var a;s=null;for(d in r)if(!n.hasOwnProperty(d)&&r.hasOwnProperty(d)&&r[d]!=null)if(d==="style"){var l=r[d];for(a in l)l.hasOwnProperty(a)&&(s||(s={}),s[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ji.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(l=r!=null?r[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(s||(s={}),s[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(s||(s={}),s[a]=c[a])}else s||(i||(i=[]),i.push(d,s)),s=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(ji.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Se("scroll",t),i||l===c||(i=[])):(i=i||[]).push(d,c))}s&&(i=i||[]).push("style",s);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};Rg=function(t,e,s,n){s!==n&&(e.flags|=4)};function Ur(t,e){if(!Ee)switch(t.tailMode){case"hidden":e=t.tail;for(var s=null;e!==null;)e.alternate!==null&&(s=e),e=e.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Je(t){var e=t.alternate!==null&&t.alternate.child===t.child,s=0,n=0;if(e)for(var r=t.child;r!==null;)s|=r.lanes|r.childLanes,n|=r.subtreeFlags&14680064,n|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)s|=r.lanes|r.childLanes,n|=r.subtreeFlags,n|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=n,t.childLanes=s,e}function Vv(t,e,s){var n=e.pendingProps;switch(Hd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Je(e),null;case 1:return yt(e.type)&&uo(),Je(e),null;case 3:return n=e.stateNode,_r(),Pe(xt),Pe(tt),Zd(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(ma(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Kt!==null&&(ed(Kt),Kt=null))),qc(t,e),Je(e),null;case 5:Jd(e);var r=Nn(Li.current);if(s=e.type,t!==null&&e.stateNode!=null)Mg(t,e,s,n,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(F(166));return Je(e),null}if(t=Nn(is.current),ma(e)){n=e.stateNode,s=e.type;var i=e.memoizedProps;switch(n[ns]=e,n[Mi]=i,t=(e.mode&1)!==0,s){case"dialog":Se("cancel",n),Se("close",n);break;case"iframe":case"object":case"embed":Se("load",n);break;case"video":case"audio":for(r=0;r<Zr.length;r++)Se(Zr[r],n);break;case"source":Se("error",n);break;case"img":case"image":case"link":Se("error",n),Se("load",n);break;case"details":Se("toggle",n);break;case"input":Yu(n,i),Se("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Se("invalid",n);break;case"textarea":Qu(n,i),Se("invalid",n)}vc(s,i),r=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&fa(n.textContent,l,t),r=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&fa(n.textContent,l,t),r=["children",""+l]):ji.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Se("scroll",n)}switch(s){case"input":ia(n),Gu(n,i,!0);break;case"textarea":ia(n),Xu(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=co)}n=r,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=lp(s)),t==="http://www.w3.org/1999/xhtml"?s==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(s,{is:n.is}):(t=a.createElement(s),s==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,s),t[ns]=e,t[Mi]=n,Og(t,e,!1,!1),e.stateNode=t;e:{switch(a=bc(s,n),s){case"dialog":Se("cancel",t),Se("close",t),r=n;break;case"iframe":case"object":case"embed":Se("load",t),r=n;break;case"video":case"audio":for(r=0;r<Zr.length;r++)Se(Zr[r],t);r=n;break;case"source":Se("error",t),r=n;break;case"img":case"image":case"link":Se("error",t),Se("load",t),r=n;break;case"details":Se("toggle",t),r=n;break;case"input":Yu(t,n),r=mc(t,n),Se("invalid",t);break;case"option":r=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},r=Oe({},n,{value:void 0}),Se("invalid",t);break;case"textarea":Qu(t,n),r=xc(t,n),Se("invalid",t);break;default:r=n}vc(s,r),l=r;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?up(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&cp(t,c)):i==="children"?typeof c=="string"?(s!=="textarea"||c!=="")&&ki(t,c):typeof c=="number"&&ki(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ji.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Se("scroll",t):c!=null&&Ed(t,i,c,a))}switch(s){case"input":ia(t),Gu(t,n,!1);break;case"textarea":ia(t),Xu(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Zs(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?dr(t,!!n.multiple,i,!1):n.defaultValue!=null&&dr(t,!!n.multiple,n.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=co)}switch(s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Je(e),null;case 6:if(t&&e.stateNode!=null)Rg(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(F(166));if(s=Nn(Li.current),Nn(is.current),ma(e)){if(n=e.stateNode,s=e.memoizedProps,n[ns]=e,(i=n.nodeValue!==s)&&(t=St,t!==null))switch(t.tag){case 3:fa(n.nodeValue,s,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&fa(n.nodeValue,s,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(s.nodeType===9?s:s.ownerDocument).createTextNode(n),n[ns]=e,e.stateNode=n}return Je(e),null;case 13:if(Pe(Te),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ee&&jt!==null&&e.mode&1&&!(e.flags&128))Jp(),br(),e.flags|=98560,i=!1;else if(i=ma(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(F(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(F(317));i[ns]=e}else br(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Je(e),i=!1}else Kt!==null&&(ed(Kt),Kt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=s,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Te.current&1?Fe===0&&(Fe=3):uu())),e.updateQueue!==null&&(e.flags|=4),Je(e),null);case 4:return _r(),qc(t,e),t===null&&Ai(e.stateNode.containerInfo),Je(e),null;case 10:return Yd(e.type._context),Je(e),null;case 17:return yt(e.type)&&uo(),Je(e),null;case 19:if(Pe(Te),i=e.memoizedState,i===null)return Je(e),null;if(n=(e.flags&128)!==0,a=i.rendering,a===null)if(n)Ur(i,!1);else{if(Fe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=yo(t),a!==null){for(e.flags|=128,Ur(i,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=s,s=e.child;s!==null;)i=s,t=n,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s=s.sibling;return ke(Te,Te.current&1|2),e.child}t=t.sibling}i.tail!==null&&Be()>kr&&(e.flags|=128,n=!0,Ur(i,!1),e.lanes=4194304)}else{if(!n)if(t=yo(a),t!==null){if(e.flags|=128,n=!0,s=t.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),Ur(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Ee)return Je(e),null}else 2*Be()-i.renderingStartTime>kr&&s!==1073741824&&(e.flags|=128,n=!0,Ur(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(s=i.last,s!==null?s.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Be(),e.sibling=null,s=Te.current,ke(Te,n?s&1|2:s&1),e):(Je(e),null);case 22:case 23:return du(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?wt&1073741824&&(Je(e),e.subtreeFlags&6&&(e.flags|=8192)):Je(e),null;case 24:return null;case 25:return null}throw Error(F(156,e.tag))}function qv(t,e){switch(Hd(e),e.tag){case 1:return yt(e.type)&&uo(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return _r(),Pe(xt),Pe(tt),Zd(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Jd(e),null;case 13:if(Pe(Te),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(F(340));br()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Pe(Te),null;case 4:return _r(),null;case 10:return Yd(e.type._context),null;case 22:case 23:return du(),null;case 24:return null;default:return null}}var xa=!1,et=!1,Kv=typeof WeakSet=="function"?WeakSet:Set,Q=null;function or(t,e){var s=t.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(n){Me(t,e,n)}else s.current=null}function Kc(t,e,s){try{s()}catch(n){Me(t,e,n)}}var zh=!1;function Yv(t,e){if(Tc=ao,t=$p(),Ud(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var n=s.getSelection&&s.getSelection();if(n&&n.rangeCount!==0){s=n.anchorNode;var r=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{s.nodeType,i.nodeType}catch{s=null;break e}var a=0,l=-1,c=-1,d=0,u=0,h=t,f=null;t:for(;;){for(var m;h!==s||r!==0&&h.nodeType!==3||(l=a+r),h!==i||n!==0&&h.nodeType!==3||(c=a+n),h.nodeType===3&&(a+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===t)break t;if(f===s&&++d===r&&(l=a),f===i&&++u===n&&(c=a),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}s=l===-1||c===-1?null:{start:l,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(Ac={focusedElem:t,selectionRange:s},ao=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var x=p.memoizedProps,b=p.memoizedState,y=e.stateNode,g=y.getSnapshotBeforeUpdate(e.elementType===e.type?x:Ht(e.type,x),b);y.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(w){Me(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return p=zh,zh=!1,p}function hi(t,e,s){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var r=n=n.next;do{if((r.tag&t)===t){var i=r.destroy;r.destroy=void 0,i!==void 0&&Kc(e,s,i)}r=r.next}while(r!==n)}}function Go(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var s=e=e.next;do{if((s.tag&t)===t){var n=s.create;s.destroy=n()}s=s.next}while(s!==e)}}function Yc(t){var e=t.ref;if(e!==null){var s=t.stateNode;switch(t.tag){case 5:t=s;break;default:t=s}typeof e=="function"?e(t):e.current=t}}function Lg(t){var e=t.alternate;e!==null&&(t.alternate=null,Lg(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ns],delete e[Mi],delete e[Rc],delete e[Tv],delete e[Av])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Dg(t){return t.tag===5||t.tag===3||t.tag===4}function Fh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Dg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Gc(t,e,s){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?s.nodeType===8?s.parentNode.insertBefore(t,e):s.insertBefore(t,e):(s.nodeType===8?(e=s.parentNode,e.insertBefore(t,s)):(e=s,e.appendChild(t)),s=s._reactRootContainer,s!=null||e.onclick!==null||(e.onclick=co));else if(n!==4&&(t=t.child,t!==null))for(Gc(t,e,s),t=t.sibling;t!==null;)Gc(t,e,s),t=t.sibling}function Qc(t,e,s){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?s.insertBefore(t,e):s.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Qc(t,e,s),t=t.sibling;t!==null;)Qc(t,e,s),t=t.sibling}var qe=null,Vt=!1;function Es(t,e,s){for(s=s.child;s!==null;)Bg(t,e,s),s=s.sibling}function Bg(t,e,s){if(rs&&typeof rs.onCommitFiberUnmount=="function")try{rs.onCommitFiberUnmount(Fo,s)}catch{}switch(s.tag){case 5:et||or(s,e);case 6:var n=qe,r=Vt;qe=null,Es(t,e,s),qe=n,Vt=r,qe!==null&&(Vt?(t=qe,s=s.stateNode,t.nodeType===8?t.parentNode.removeChild(s):t.removeChild(s)):qe.removeChild(s.stateNode));break;case 18:qe!==null&&(Vt?(t=qe,s=s.stateNode,t.nodeType===8?Ml(t.parentNode,s):t.nodeType===1&&Ml(t,s),Pi(t)):Ml(qe,s.stateNode));break;case 4:n=qe,r=Vt,qe=s.stateNode.containerInfo,Vt=!0,Es(t,e,s),qe=n,Vt=r;break;case 0:case 11:case 14:case 15:if(!et&&(n=s.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){r=n=n.next;do{var i=r,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Kc(s,e,a),r=r.next}while(r!==n)}Es(t,e,s);break;case 1:if(!et&&(or(s,e),n=s.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=s.memoizedProps,n.state=s.memoizedState,n.componentWillUnmount()}catch(l){Me(s,e,l)}Es(t,e,s);break;case 21:Es(t,e,s);break;case 22:s.mode&1?(et=(n=et)||s.memoizedState!==null,Es(t,e,s),et=n):Es(t,e,s);break;default:Es(t,e,s)}}function Uh(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new Kv),e.forEach(function(n){var r=nb.bind(null,t,n);s.has(n)||(s.add(n),n.then(r,r))})}}function Ut(t,e){var s=e.deletions;if(s!==null)for(var n=0;n<s.length;n++){var r=s[n];try{var i=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:qe=l.stateNode,Vt=!1;break e;case 3:qe=l.stateNode.containerInfo,Vt=!0;break e;case 4:qe=l.stateNode.containerInfo,Vt=!0;break e}l=l.return}if(qe===null)throw Error(F(160));Bg(i,a,r),qe=null,Vt=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(d){Me(r,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Ig(e,t),e=e.sibling}function Ig(t,e){var s=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ut(e,t),Jt(t),n&4){try{hi(3,t,t.return),Go(3,t)}catch(x){Me(t,t.return,x)}try{hi(5,t,t.return)}catch(x){Me(t,t.return,x)}}break;case 1:Ut(e,t),Jt(t),n&512&&s!==null&&or(s,s.return);break;case 5:if(Ut(e,t),Jt(t),n&512&&s!==null&&or(s,s.return),t.flags&32){var r=t.stateNode;try{ki(r,"")}catch(x){Me(t,t.return,x)}}if(n&4&&(r=t.stateNode,r!=null)){var i=t.memoizedProps,a=s!==null?s.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&ap(r,i),bc(l,a);var d=bc(l,i);for(a=0;a<c.length;a+=2){var u=c[a],h=c[a+1];u==="style"?up(r,h):u==="dangerouslySetInnerHTML"?cp(r,h):u==="children"?ki(r,h):Ed(r,u,h,d)}switch(l){case"input":pc(r,i);break;case"textarea":op(r,i);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?dr(r,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?dr(r,!!i.multiple,i.defaultValue,!0):dr(r,!!i.multiple,i.multiple?[]:"",!1))}r[Mi]=i}catch(x){Me(t,t.return,x)}}break;case 6:if(Ut(e,t),Jt(t),n&4){if(t.stateNode===null)throw Error(F(162));r=t.stateNode,i=t.memoizedProps;try{r.nodeValue=i}catch(x){Me(t,t.return,x)}}break;case 3:if(Ut(e,t),Jt(t),n&4&&s!==null&&s.memoizedState.isDehydrated)try{Pi(e.containerInfo)}catch(x){Me(t,t.return,x)}break;case 4:Ut(e,t),Jt(t);break;case 13:Ut(e,t),Jt(t),r=t.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(lu=Be())),n&4&&Uh(t);break;case 22:if(u=s!==null&&s.memoizedState!==null,t.mode&1?(et=(d=et)||u,Ut(e,t),et=d):Ut(e,t),Jt(t),n&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!u&&t.mode&1)for(Q=t,u=t.child;u!==null;){for(h=Q=u;Q!==null;){switch(f=Q,m=f.child,f.tag){case 0:case 11:case 14:case 15:hi(4,f,f.return);break;case 1:or(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){n=f,s=f.return;try{e=n,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(x){Me(n,s,x)}}break;case 5:or(f,f.return);break;case 22:if(f.memoizedState!==null){Hh(h);continue}}m!==null?(m.return=f,Q=m):Hh(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{r=h.stateNode,d?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=dp("display",a))}catch(x){Me(t,t.return,x)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(x){Me(t,t.return,x)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Ut(e,t),Jt(t),n&4&&Uh(t);break;case 21:break;default:Ut(e,t),Jt(t)}}function Jt(t){var e=t.flags;if(e&2){try{e:{for(var s=t.return;s!==null;){if(Dg(s)){var n=s;break e}s=s.return}throw Error(F(160))}switch(n.tag){case 5:var r=n.stateNode;n.flags&32&&(ki(r,""),n.flags&=-33);var i=Fh(t);Qc(t,i,r);break;case 3:case 4:var a=n.stateNode.containerInfo,l=Fh(t);Gc(t,l,a);break;default:throw Error(F(161))}}catch(c){Me(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Gv(t,e,s){Q=t,$g(t)}function $g(t,e,s){for(var n=(t.mode&1)!==0;Q!==null;){var r=Q,i=r.child;if(r.tag===22&&n){var a=r.memoizedState!==null||xa;if(!a){var l=r.alternate,c=l!==null&&l.memoizedState!==null||et;l=xa;var d=et;if(xa=a,(et=c)&&!d)for(Q=r;Q!==null;)a=Q,c=a.child,a.tag===22&&a.memoizedState!==null?Vh(r):c!==null?(c.return=a,Q=c):Vh(r);for(;i!==null;)Q=i,$g(i),i=i.sibling;Q=r,xa=l,et=d}Wh(t)}else r.subtreeFlags&8772&&i!==null?(i.return=r,Q=i):Wh(t)}}function Wh(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var s=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:et||Go(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!et)if(s===null)n.componentDidMount();else{var r=e.elementType===e.type?s.memoizedProps:Ht(e.type,s.memoizedProps);n.componentDidUpdate(r,s.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Ch(e,i,n);break;case 3:var a=e.updateQueue;if(a!==null){if(s=null,e.child!==null)switch(e.child.tag){case 5:s=e.child.stateNode;break;case 1:s=e.child.stateNode}Ch(e,a,s)}break;case 5:var l=e.stateNode;if(s===null&&e.flags&4){s=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Pi(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}et||e.flags&512&&Yc(e)}catch(f){Me(e,e.return,f)}}if(e===t){Q=null;break}if(s=e.sibling,s!==null){s.return=e.return,Q=s;break}Q=e.return}}function Hh(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var s=e.sibling;if(s!==null){s.return=e.return,Q=s;break}Q=e.return}}function Vh(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var s=e.return;try{Go(4,e)}catch(c){Me(e,s,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var r=e.return;try{n.componentDidMount()}catch(c){Me(e,r,c)}}var i=e.return;try{Yc(e)}catch(c){Me(e,i,c)}break;case 5:var a=e.return;try{Yc(e)}catch(c){Me(e,a,c)}}}catch(c){Me(e,e.return,c)}if(e===t){Q=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Q=l;break}Q=e.return}}var Qv=Math.ceil,wo=Ss.ReactCurrentDispatcher,au=Ss.ReactCurrentOwner,Dt=Ss.ReactCurrentBatchConfig,ge=0,He=null,$e=null,Ge=0,wt=0,lr=an(0),Fe=0,$i=null,Rn=0,Qo=0,ou=0,fi=null,ft=null,lu=0,kr=1/0,hs=null,_o=!1,Xc=null,Ys=null,ya=!1,$s=null,jo=0,mi=0,Jc=null,Ka=-1,Ya=0;function at(){return ge&6?Be():Ka!==-1?Ka:Ka=Be()}function Gs(t){return t.mode&1?ge&2&&Ge!==0?Ge&-Ge:Mv.transition!==null?(Ya===0&&(Ya=jp()),Ya):(t=be,t!==0||(t=window.event,t=t===void 0?16:Tp(t.type)),t):1}function Qt(t,e,s,n){if(50<mi)throw mi=0,Jc=null,Error(F(185));Ki(t,s,n),(!(ge&2)||t!==He)&&(t===He&&(!(ge&2)&&(Qo|=s),Fe===4&&Ds(t,Ge)),vt(t,n),s===1&&ge===0&&!(e.mode&1)&&(kr=Be()+500,qo&&on()))}function vt(t,e){var s=t.callbackNode;My(t,e);var n=io(t,t===He?Ge:0);if(n===0)s!==null&&eh(s),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(s!=null&&eh(s),e===1)t.tag===0?Ov(qh.bind(null,t)):Gp(qh.bind(null,t)),Pv(function(){!(ge&6)&&on()}),s=null;else{switch(kp(n)){case 1:s=Rd;break;case 4:s=wp;break;case 16:s=ro;break;case 536870912:s=_p;break;default:s=ro}s=Kg(s,zg.bind(null,t))}t.callbackPriority=e,t.callbackNode=s}}function zg(t,e){if(Ka=-1,Ya=0,ge&6)throw Error(F(327));var s=t.callbackNode;if(pr()&&t.callbackNode!==s)return null;var n=io(t,t===He?Ge:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=ko(t,n);else{e=n;var r=ge;ge|=2;var i=Ug();(He!==t||Ge!==e)&&(hs=null,kr=Be()+500,Cn(t,e));do try{Zv();break}catch(l){Fg(t,l)}while(!0);Kd(),wo.current=i,ge=r,$e!==null?e=0:(He=null,Ge=0,e=Fe)}if(e!==0){if(e===2&&(r=Nc(t),r!==0&&(n=r,e=Zc(t,r))),e===1)throw s=$i,Cn(t,0),Ds(t,n),vt(t,Be()),s;if(e===6)Ds(t,n);else{if(r=t.current.alternate,!(n&30)&&!Xv(r)&&(e=ko(t,n),e===2&&(i=Nc(t),i!==0&&(n=i,e=Zc(t,i))),e===1))throw s=$i,Cn(t,0),Ds(t,n),vt(t,Be()),s;switch(t.finishedWork=r,t.finishedLanes=n,e){case 0:case 1:throw Error(F(345));case 2:yn(t,ft,hs);break;case 3:if(Ds(t,n),(n&130023424)===n&&(e=lu+500-Be(),10<e)){if(io(t,0)!==0)break;if(r=t.suspendedLanes,(r&n)!==n){at(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Mc(yn.bind(null,t,ft,hs),e);break}yn(t,ft,hs);break;case 4:if(Ds(t,n),(n&4194240)===n)break;for(e=t.eventTimes,r=-1;0<n;){var a=31-Gt(n);i=1<<a,a=e[a],a>r&&(r=a),n&=~i}if(n=r,n=Be()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Qv(n/1960))-n,10<n){t.timeoutHandle=Mc(yn.bind(null,t,ft,hs),n);break}yn(t,ft,hs);break;case 5:yn(t,ft,hs);break;default:throw Error(F(329))}}}return vt(t,Be()),t.callbackNode===s?zg.bind(null,t):null}function Zc(t,e){var s=fi;return t.current.memoizedState.isDehydrated&&(Cn(t,e).flags|=256),t=ko(t,e),t!==2&&(e=ft,ft=s,e!==null&&ed(e)),t}function ed(t){ft===null?ft=t:ft.push.apply(ft,t)}function Xv(t){for(var e=t;;){if(e.flags&16384){var s=e.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var n=0;n<s.length;n++){var r=s[n],i=r.getSnapshot;r=r.value;try{if(!Xt(i(),r))return!1}catch{return!1}}}if(s=e.child,e.subtreeFlags&16384&&s!==null)s.return=e,e=s;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ds(t,e){for(e&=~ou,e&=~Qo,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var s=31-Gt(e),n=1<<s;t[s]=-1,e&=~n}}function qh(t){if(ge&6)throw Error(F(327));pr();var e=io(t,0);if(!(e&1))return vt(t,Be()),null;var s=ko(t,e);if(t.tag!==0&&s===2){var n=Nc(t);n!==0&&(e=n,s=Zc(t,n))}if(s===1)throw s=$i,Cn(t,0),Ds(t,e),vt(t,Be()),s;if(s===6)throw Error(F(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,yn(t,ft,hs),vt(t,Be()),null}function cu(t,e){var s=ge;ge|=1;try{return t(e)}finally{ge=s,ge===0&&(kr=Be()+500,qo&&on())}}function Ln(t){$s!==null&&$s.tag===0&&!(ge&6)&&pr();var e=ge;ge|=1;var s=Dt.transition,n=be;try{if(Dt.transition=null,be=1,t)return t()}finally{be=n,Dt.transition=s,ge=e,!(ge&6)&&on()}}function du(){wt=lr.current,Pe(lr)}function Cn(t,e){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==-1&&(t.timeoutHandle=-1,Cv(s)),$e!==null)for(s=$e.return;s!==null;){var n=s;switch(Hd(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&uo();break;case 3:_r(),Pe(xt),Pe(tt),Zd();break;case 5:Jd(n);break;case 4:_r();break;case 13:Pe(Te);break;case 19:Pe(Te);break;case 10:Yd(n.type._context);break;case 22:case 23:du()}s=s.return}if(He=t,$e=t=Qs(t.current,null),Ge=wt=e,Fe=0,$i=null,ou=Qo=Rn=0,ft=fi=null,kn!==null){for(e=0;e<kn.length;e++)if(s=kn[e],n=s.interleaved,n!==null){s.interleaved=null;var r=n.next,i=s.pending;if(i!==null){var a=i.next;i.next=r,n.next=a}s.pending=n}kn=null}return t}function Fg(t,e){do{var s=$e;try{if(Kd(),Ha.current=bo,vo){for(var n=Ae.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}vo=!1}if(Mn=0,We=ze=Ae=null,ui=!1,Di=0,au.current=null,s===null||s.return===null){Fe=1,$i=e,$e=null;break}e:{var i=t,a=s.return,l=s,c=e;if(e=Ge,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=Mh(a);if(m!==null){m.flags&=-257,Rh(m,a,l,i,e),m.mode&1&&Oh(i,d,e),e=m,c=d;var p=e.updateQueue;if(p===null){var x=new Set;x.add(c),e.updateQueue=x}else p.add(c);break e}else{if(!(e&1)){Oh(i,d,e),uu();break e}c=Error(F(426))}}else if(Ee&&l.mode&1){var b=Mh(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),Rh(b,a,l,i,e),Vd(jr(c,l));break e}}i=c=jr(c,l),Fe!==4&&(Fe=2),fi===null?fi=[i]:fi.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=kg(i,c,e);Sh(i,y);break e;case 1:l=c;var g=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Ys===null||!Ys.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var w=Ng(i,l,e);Sh(i,w);break e}}i=i.return}while(i!==null)}Hg(s)}catch(_){e=_,$e===s&&s!==null&&($e=s=s.return);continue}break}while(!0)}function Ug(){var t=wo.current;return wo.current=bo,t===null?bo:t}function uu(){(Fe===0||Fe===3||Fe===2)&&(Fe=4),He===null||!(Rn&268435455)&&!(Qo&268435455)||Ds(He,Ge)}function ko(t,e){var s=ge;ge|=2;var n=Ug();(He!==t||Ge!==e)&&(hs=null,Cn(t,e));do try{Jv();break}catch(r){Fg(t,r)}while(!0);if(Kd(),ge=s,wo.current=n,$e!==null)throw Error(F(261));return He=null,Ge=0,Fe}function Jv(){for(;$e!==null;)Wg($e)}function Zv(){for(;$e!==null&&!ky();)Wg($e)}function Wg(t){var e=qg(t.alternate,t,wt);t.memoizedProps=t.pendingProps,e===null?Hg(t):$e=e,au.current=null}function Hg(t){var e=t;do{var s=e.alternate;if(t=e.return,e.flags&32768){if(s=qv(s,e),s!==null){s.flags&=32767,$e=s;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Fe=6,$e=null;return}}else if(s=Vv(s,e,wt),s!==null){$e=s;return}if(e=e.sibling,e!==null){$e=e;return}$e=e=t}while(e!==null);Fe===0&&(Fe=5)}function yn(t,e,s){var n=be,r=Dt.transition;try{Dt.transition=null,be=1,eb(t,e,s,n)}finally{Dt.transition=r,be=n}return null}function eb(t,e,s,n){do pr();while($s!==null);if(ge&6)throw Error(F(327));s=t.finishedWork;var r=t.finishedLanes;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error(F(177));t.callbackNode=null,t.callbackPriority=0;var i=s.lanes|s.childLanes;if(Ry(t,i),t===He&&($e=He=null,Ge=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||ya||(ya=!0,Kg(ro,function(){return pr(),null})),i=(s.flags&15990)!==0,s.subtreeFlags&15990||i){i=Dt.transition,Dt.transition=null;var a=be;be=1;var l=ge;ge|=4,au.current=null,Yv(t,s),Ig(s,t),bv(Ac),ao=!!Tc,Ac=Tc=null,t.current=s,Gv(s),Ny(),ge=l,be=a,Dt.transition=i}else t.current=s;if(ya&&(ya=!1,$s=t,jo=r),i=t.pendingLanes,i===0&&(Ys=null),Py(s.stateNode),vt(t,Be()),e!==null)for(n=t.onRecoverableError,s=0;s<e.length;s++)r=e[s],n(r.value,{componentStack:r.stack,digest:r.digest});if(_o)throw _o=!1,t=Xc,Xc=null,t;return jo&1&&t.tag!==0&&pr(),i=t.pendingLanes,i&1?t===Jc?mi++:(mi=0,Jc=t):mi=0,on(),null}function pr(){if($s!==null){var t=kp(jo),e=Dt.transition,s=be;try{if(Dt.transition=null,be=16>t?16:t,$s===null)var n=!1;else{if(t=$s,$s=null,jo=0,ge&6)throw Error(F(331));var r=ge;for(ge|=4,Q=t.current;Q!==null;){var i=Q,a=i.child;if(Q.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(Q=d;Q!==null;){var u=Q;switch(u.tag){case 0:case 11:case 15:hi(8,u,i)}var h=u.child;if(h!==null)h.return=u,Q=h;else for(;Q!==null;){u=Q;var f=u.sibling,m=u.return;if(Lg(u),u===d){Q=null;break}if(f!==null){f.return=m,Q=f;break}Q=m}}}var p=i.alternate;if(p!==null){var x=p.child;if(x!==null){p.child=null;do{var b=x.sibling;x.sibling=null,x=b}while(x!==null)}}Q=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,Q=a;else e:for(;Q!==null;){if(i=Q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:hi(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,Q=y;break e}Q=i.return}}var g=t.current;for(Q=g;Q!==null;){a=Q;var v=a.child;if(a.subtreeFlags&2064&&v!==null)v.return=a,Q=v;else e:for(a=g;Q!==null;){if(l=Q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Go(9,l)}}catch(_){Me(l,l.return,_)}if(l===a){Q=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,Q=w;break e}Q=l.return}}if(ge=r,on(),rs&&typeof rs.onPostCommitFiberRoot=="function")try{rs.onPostCommitFiberRoot(Fo,t)}catch{}n=!0}return n}finally{be=s,Dt.transition=e}}return!1}function Kh(t,e,s){e=jr(s,e),e=kg(t,e,1),t=Ks(t,e,1),e=at(),t!==null&&(Ki(t,1,e),vt(t,e))}function Me(t,e,s){if(t.tag===3)Kh(t,t,s);else for(;e!==null;){if(e.tag===3){Kh(e,t,s);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ys===null||!Ys.has(n))){t=jr(s,t),t=Ng(e,t,1),e=Ks(e,t,1),t=at(),e!==null&&(Ki(e,1,t),vt(e,t));break}}e=e.return}}function tb(t,e,s){var n=t.pingCache;n!==null&&n.delete(e),e=at(),t.pingedLanes|=t.suspendedLanes&s,He===t&&(Ge&s)===s&&(Fe===4||Fe===3&&(Ge&130023424)===Ge&&500>Be()-lu?Cn(t,0):ou|=s),vt(t,e)}function Vg(t,e){e===0&&(t.mode&1?(e=la,la<<=1,!(la&130023424)&&(la=4194304)):e=1);var s=at();t=ks(t,e),t!==null&&(Ki(t,e,s),vt(t,s))}function sb(t){var e=t.memoizedState,s=0;e!==null&&(s=e.retryLane),Vg(t,s)}function nb(t,e){var s=0;switch(t.tag){case 13:var n=t.stateNode,r=t.memoizedState;r!==null&&(s=r.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(F(314))}n!==null&&n.delete(e),Vg(t,s)}var qg;qg=function(t,e,s){if(t!==null)if(t.memoizedProps!==e.pendingProps||xt.current)gt=!0;else{if(!(t.lanes&s)&&!(e.flags&128))return gt=!1,Hv(t,e,s);gt=!!(t.flags&131072)}else gt=!1,Ee&&e.flags&1048576&&Qp(e,mo,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;qa(t,e),t=e.pendingProps;var r=vr(e,tt.current);mr(e,s),r=tu(null,e,n,t,r,s);var i=su();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,yt(n)?(i=!0,ho(e)):i=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Qd(e),r.updater=Yo,e.stateNode=r,r._reactInternals=e,zc(e,n,t,s),e=Wc(null,e,n,!0,i,s)):(e.tag=0,Ee&&i&&Wd(e),it(null,e,r,s),e=e.child),e;case 16:n=e.elementType;e:{switch(qa(t,e),t=e.pendingProps,r=n._init,n=r(n._payload),e.type=n,r=e.tag=ib(n),t=Ht(n,t),r){case 0:e=Uc(null,e,n,t,s);break e;case 1:e=Bh(null,e,n,t,s);break e;case 11:e=Lh(null,e,n,t,s);break e;case 14:e=Dh(null,e,n,Ht(n.type,t),s);break e}throw Error(F(306,n,""))}return e;case 0:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:Ht(n,r),Uc(t,e,n,r,s);case 1:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:Ht(n,r),Bh(t,e,n,r,s);case 3:e:{if(Eg(e),t===null)throw Error(F(387));n=e.pendingProps,i=e.memoizedState,r=i.element,sg(t,e),xo(e,n,null,s);var a=e.memoizedState;if(n=a.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){r=jr(Error(F(423)),e),e=Ih(t,e,n,s,r);break e}else if(n!==r){r=jr(Error(F(424)),e),e=Ih(t,e,n,s,r);break e}else for(jt=qs(e.stateNode.containerInfo.firstChild),St=e,Ee=!0,Kt=null,s=eg(e,null,n,s),e.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(br(),n===r){e=Ns(t,e,s);break e}it(t,e,n,s)}e=e.child}return e;case 5:return ng(e),t===null&&Bc(e),n=e.type,r=e.pendingProps,i=t!==null?t.memoizedProps:null,a=r.children,Oc(n,r)?a=null:i!==null&&Oc(n,i)&&(e.flags|=32),Pg(t,e),it(t,e,a,s),e.child;case 6:return t===null&&Bc(e),null;case 13:return Tg(t,e,s);case 4:return Xd(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=wr(e,null,n,s):it(t,e,n,s),e.child;case 11:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:Ht(n,r),Lh(t,e,n,r,s);case 7:return it(t,e,e.pendingProps,s),e.child;case 8:return it(t,e,e.pendingProps.children,s),e.child;case 12:return it(t,e,e.pendingProps.children,s),e.child;case 10:e:{if(n=e.type._context,r=e.pendingProps,i=e.memoizedProps,a=r.value,ke(po,n._currentValue),n._currentValue=a,i!==null)if(Xt(i.value,a)){if(i.children===r.children&&!xt.current){e=Ns(t,e,s);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=ws(-1,s&-s),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=s,c=i.alternate,c!==null&&(c.lanes|=s),Ic(i.return,s,e),l.lanes|=s;break}c=c.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(F(341));a.lanes|=s,l=a.alternate,l!==null&&(l.lanes|=s),Ic(a,s,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}it(t,e,r.children,s),e=e.child}return e;case 9:return r=e.type,n=e.pendingProps.children,mr(e,s),r=It(r),n=n(r),e.flags|=1,it(t,e,n,s),e.child;case 14:return n=e.type,r=Ht(n,e.pendingProps),r=Ht(n.type,r),Dh(t,e,n,r,s);case 15:return Sg(t,e,e.type,e.pendingProps,s);case 17:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:Ht(n,r),qa(t,e),e.tag=1,yt(n)?(t=!0,ho(e)):t=!1,mr(e,s),jg(e,n,r),zc(e,n,r,s),Wc(null,e,n,!0,t,s);case 19:return Ag(t,e,s);case 22:return Cg(t,e,s)}throw Error(F(156,e.tag))};function Kg(t,e){return bp(t,e)}function rb(t,e,s,n){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lt(t,e,s,n){return new rb(t,e,s,n)}function hu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ib(t){if(typeof t=="function")return hu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ad)return 11;if(t===Od)return 14}return 2}function Qs(t,e){var s=t.alternate;return s===null?(s=Lt(t.tag,e,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=e,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&14680064,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,e=t.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function Ga(t,e,s,n,r,i){var a=2;if(n=t,typeof t=="function")hu(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Jn:return Pn(s.children,r,i,e);case Td:a=8,r|=8;break;case dc:return t=Lt(12,s,e,r|2),t.elementType=dc,t.lanes=i,t;case uc:return t=Lt(13,s,e,r),t.elementType=uc,t.lanes=i,t;case hc:return t=Lt(19,s,e,r),t.elementType=hc,t.lanes=i,t;case np:return Xo(s,r,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case tp:a=10;break e;case sp:a=9;break e;case Ad:a=11;break e;case Od:a=14;break e;case Ms:a=16,n=null;break e}throw Error(F(130,t==null?t:typeof t,""))}return e=Lt(a,s,e,r),e.elementType=t,e.type=n,e.lanes=i,e}function Pn(t,e,s,n){return t=Lt(7,t,n,e),t.lanes=s,t}function Xo(t,e,s,n){return t=Lt(22,t,n,e),t.elementType=np,t.lanes=s,t.stateNode={isHidden:!1},t}function Fl(t,e,s){return t=Lt(6,t,null,e),t.lanes=s,t}function Ul(t,e,s){return e=Lt(4,t.children!==null?t.children:[],t.key,e),e.lanes=s,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ab(t,e,s,n,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_l(0),this.expirationTimes=_l(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_l(0),this.identifierPrefix=n,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function fu(t,e,s,n,r,i,a,l,c){return t=new ab(t,e,s,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Lt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qd(i),t}function ob(t,e,s){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Xn,key:n==null?null:""+n,children:t,containerInfo:e,implementation:s}}function Yg(t){if(!t)return en;t=t._reactInternals;e:{if(zn(t)!==t||t.tag!==1)throw Error(F(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(yt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(F(171))}if(t.tag===1){var s=t.type;if(yt(s))return Yp(t,s,e)}return e}function Gg(t,e,s,n,r,i,a,l,c){return t=fu(s,n,!0,t,r,i,a,l,c),t.context=Yg(null),s=t.current,n=at(),r=Gs(s),i=ws(n,r),i.callback=e??null,Ks(s,i,r),t.current.lanes=r,Ki(t,r,n),vt(t,n),t}function Jo(t,e,s,n){var r=e.current,i=at(),a=Gs(r);return s=Yg(s),e.context===null?e.context=s:e.pendingContext=s,e=ws(i,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Ks(r,e,a),t!==null&&(Qt(t,r,a,i),Wa(t,r,a)),a}function No(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Yh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<e?s:e}}function mu(t,e){Yh(t,e),(t=t.alternate)&&Yh(t,e)}function lb(){return null}var Qg=typeof reportError=="function"?reportError:function(t){console.error(t)};function pu(t){this._internalRoot=t}Zo.prototype.render=pu.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(F(409));Jo(t,e,null,null)};Zo.prototype.unmount=pu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ln(function(){Jo(null,t,null,null)}),e[js]=null}};function Zo(t){this._internalRoot=t}Zo.prototype.unstable_scheduleHydration=function(t){if(t){var e=Cp();t={blockedOn:null,target:t,priority:e};for(var s=0;s<Ls.length&&e!==0&&e<Ls[s].priority;s++);Ls.splice(s,0,t),s===0&&Ep(t)}};function gu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function el(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Gh(){}function cb(t,e,s,n,r){if(r){if(typeof n=="function"){var i=n;n=function(){var d=No(a);i.call(d)}}var a=Gg(e,n,t,0,null,!1,!1,"",Gh);return t._reactRootContainer=a,t[js]=a.current,Ai(t.nodeType===8?t.parentNode:t),Ln(),a}for(;r=t.lastChild;)t.removeChild(r);if(typeof n=="function"){var l=n;n=function(){var d=No(c);l.call(d)}}var c=fu(t,0,!1,null,null,!1,!1,"",Gh);return t._reactRootContainer=c,t[js]=c.current,Ai(t.nodeType===8?t.parentNode:t),Ln(function(){Jo(e,c,s,n)}),c}function tl(t,e,s,n,r){var i=s._reactRootContainer;if(i){var a=i;if(typeof r=="function"){var l=r;r=function(){var c=No(a);l.call(c)}}Jo(e,a,t,r)}else a=cb(s,e,t,r,n);return No(a)}Np=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var s=Jr(e.pendingLanes);s!==0&&(Ld(e,s|1),vt(e,Be()),!(ge&6)&&(kr=Be()+500,on()))}break;case 13:Ln(function(){var n=ks(t,1);if(n!==null){var r=at();Qt(n,t,1,r)}}),mu(t,1)}};Dd=function(t){if(t.tag===13){var e=ks(t,134217728);if(e!==null){var s=at();Qt(e,t,134217728,s)}mu(t,134217728)}};Sp=function(t){if(t.tag===13){var e=Gs(t),s=ks(t,e);if(s!==null){var n=at();Qt(s,t,e,n)}mu(t,e)}};Cp=function(){return be};Pp=function(t,e){var s=be;try{return be=t,e()}finally{be=s}};_c=function(t,e,s){switch(e){case"input":if(pc(t,s),e=s.name,s.type==="radio"&&e!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<s.length;e++){var n=s[e];if(n!==t&&n.form===t.form){var r=Vo(n);if(!r)throw Error(F(90));ip(n),pc(n,r)}}}break;case"textarea":op(t,s);break;case"select":e=s.value,e!=null&&dr(t,!!s.multiple,e,!1)}};mp=cu;pp=Ln;var db={usingClientEntryPoint:!1,Events:[Gi,sr,Vo,hp,fp,cu]},Wr={findFiberByHostInstance:jn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ub={bundleType:Wr.bundleType,version:Wr.version,rendererPackageName:Wr.rendererPackageName,rendererConfig:Wr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ss.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=yp(t),t===null?null:t.stateNode},findFiberByHostInstance:Wr.findFiberByHostInstance||lb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var va=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!va.isDisabled&&va.supportsFiber)try{Fo=va.inject(ub),rs=va}catch{}}Et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=db;Et.createPortal=function(t,e){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gu(e))throw Error(F(200));return ob(t,e,null,s)};Et.createRoot=function(t,e){if(!gu(t))throw Error(F(299));var s=!1,n="",r=Qg;return e!=null&&(e.unstable_strictMode===!0&&(s=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=fu(t,1,!1,null,null,s,!1,n,r),t[js]=e.current,Ai(t.nodeType===8?t.parentNode:t),new pu(e)};Et.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(F(188)):(t=Object.keys(t).join(","),Error(F(268,t)));return t=yp(e),t=t===null?null:t.stateNode,t};Et.flushSync=function(t){return Ln(t)};Et.hydrate=function(t,e,s){if(!el(e))throw Error(F(200));return tl(null,t,e,!0,s)};Et.hydrateRoot=function(t,e,s){if(!gu(t))throw Error(F(405));var n=s!=null&&s.hydratedSources||null,r=!1,i="",a=Qg;if(s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(i=s.identifierPrefix),s.onRecoverableError!==void 0&&(a=s.onRecoverableError)),e=Gg(e,null,t,1,s??null,r,!1,i,a),t[js]=e.current,Ai(t),n)for(t=0;t<n.length;t++)s=n[t],r=s._getVersion,r=r(s._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[s,r]:e.mutableSourceEagerHydrationData.push(s,r);return new Zo(e)};Et.render=function(t,e,s){if(!el(e))throw Error(F(200));return tl(null,t,e,!1,s)};Et.unmountComponentAtNode=function(t){if(!el(t))throw Error(F(40));return t._reactRootContainer?(Ln(function(){tl(null,null,t,!1,function(){t._reactRootContainer=null,t[js]=null})}),!0):!1};Et.unstable_batchedUpdates=cu;Et.unstable_renderSubtreeIntoContainer=function(t,e,s,n){if(!el(s))throw Error(F(200));if(t==null||t._reactInternals===void 0)throw Error(F(38));return tl(t,e,s,!1,n)};Et.version="18.3.1-next-f1338f8080-20240426";function Xg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Xg)}catch(t){console.error(t)}}Xg(),Xm.exports=Et;var hb=Xm.exports,Jg,Qh=hb;Jg=Qh.createRoot,Qh.hydrateRoot;const fb="modulepreload",mb=function(t){return"/"+t},Xh={},Xi=function(e,s,n){let r=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));r=Promise.allSettled(s.map(c=>{if(c=mb(c),c in Xh)return;Xh[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":fb,d||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return r.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},pb=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>Xi(async()=>{const{default:n}=await Promise.resolve().then(()=>Mr);return{default:n}},void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)};class xu extends Error{constructor(e,s="FunctionsError",n){super(e),this.name=s,this.context=n}}class gb extends xu{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Jh extends xu{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Zh extends xu{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var td;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(td||(td={}));var xb=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(a){a(i)})}return new(s||(s=Promise))(function(i,a){function l(u){try{d(n.next(u))}catch(h){a(h)}}function c(u){try{d(n.throw(u))}catch(h){a(h)}}function d(u){u.done?i(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};class yb{constructor(e,{headers:s={},customFetch:n,region:r=td.Any}={}){this.url=e,this.headers=s,this.region=r,this.fetch=pb(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,s={}){var n;return xb(this,void 0,void 0,function*(){try{const{headers:r,method:i,body:a}=s;let l={},{region:c}=s;c||(c=this.region);const d=new URL(`${this.url}/${e}`);c&&c!=="any"&&(l["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let u;a&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=a):typeof a=="string"?(l["Content-Type"]="text/plain",u=a):typeof FormData<"u"&&a instanceof FormData?u=a:(l["Content-Type"]="application/json",u=JSON.stringify(a)));const h=yield this.fetch(d.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),r),body:u}).catch(x=>{throw new gb(x)}),f=h.headers.get("x-relay-error");if(f&&f==="true")throw new Jh(h);if(!h.ok)throw new Zh(h);let m=((n=h.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),p;return m==="application/json"?p=yield h.json():m==="application/octet-stream"?p=yield h.blob():m==="text/event-stream"?p=h:m==="multipart/form-data"?p=yield h.formData():p=yield h.text(),{data:p,error:null,response:h}}catch(r){return{data:null,error:r,response:r instanceof Zh||r instanceof Jh?r.context:void 0}}})}}var mt={},yu={},sl={},Ji={},nl={},rl={},vb=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Nr=vb();const bb=Nr.fetch,Zg=Nr.fetch.bind(Nr),e0=Nr.Headers,wb=Nr.Request,_b=Nr.Response,Mr=Object.freeze(Object.defineProperty({__proto__:null,Headers:e0,Request:wb,Response:_b,default:Zg,fetch:bb},Symbol.toStringTag,{value:"Module"})),jb=zx(Mr);var il={};Object.defineProperty(il,"__esModule",{value:!0});let kb=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};il.default=kb;var t0=Bt&&Bt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(rl,"__esModule",{value:!0});const Nb=t0(jb),Sb=t0(il);let Cb=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Nb.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,s){return this.headers=Object.assign({},this.headers),this.headers[e]=s,this}then(e,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let r=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var a,l,c;let d=null,u=null,h=null,f=i.status,m=i.statusText;if(i.ok){if(this.method!=="HEAD"){const y=await i.text();y===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=y:u=JSON.parse(y))}const x=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),b=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");x&&b&&b.length>1&&(h=parseInt(b[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(d={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,f=406,m="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const x=await i.text();try{d=JSON.parse(x),Array.isArray(d)&&i.status===404&&(u=[],d=null,f=200,m="OK")}catch{i.status===404&&x===""?(f=204,m="No Content"):d={message:x}}if(d&&this.isMaybeSingle&&(!((c=d==null?void 0:d.details)===null||c===void 0)&&c.includes("0 rows"))&&(d=null,f=200,m="OK"),d&&this.shouldThrowOnError)throw new Sb.default(d)}return{error:d,data:u,count:h,status:f,statusText:m}});return this.shouldThrowOnError||(r=r.catch(i=>{var a,l,c;return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,s)}returns(){return this}overrideTypes(){return this}};rl.default=Cb;var Pb=Bt&&Bt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(nl,"__esModule",{value:!0});const Eb=Pb(rl);let Tb=class extends Eb.default{select(e){let s=!1;const n=(e??"*").split("").map(r=>/\s/.test(r)&&!s?"":(r==='"'&&(s=!s),r)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:s=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){const a=i?`${i}.order`:"order",l=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${l?`${l},`:""}${e}.${s?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:s,referencedTable:n=s}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,s,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"offset":`${r}.offset`,a=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(a,`${s-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:s=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:a="text"}={}){var l;const c=[e?"analyze":null,s?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${d}"; options=${c};`,a==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};nl.default=Tb;var Ab=Bt&&Bt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ji,"__esModule",{value:!0});const Ob=Ab(nl);let Mb=class extends Ob.default{eq(e,s){return this.url.searchParams.append(e,`eq.${s}`),this}neq(e,s){return this.url.searchParams.append(e,`neq.${s}`),this}gt(e,s){return this.url.searchParams.append(e,`gt.${s}`),this}gte(e,s){return this.url.searchParams.append(e,`gte.${s}`),this}lt(e,s){return this.url.searchParams.append(e,`lt.${s}`),this}lte(e,s){return this.url.searchParams.append(e,`lte.${s}`),this}like(e,s){return this.url.searchParams.append(e,`like.${s}`),this}likeAllOf(e,s){return this.url.searchParams.append(e,`like(all).{${s.join(",")}}`),this}likeAnyOf(e,s){return this.url.searchParams.append(e,`like(any).{${s.join(",")}}`),this}ilike(e,s){return this.url.searchParams.append(e,`ilike.${s}`),this}ilikeAllOf(e,s){return this.url.searchParams.append(e,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(e,s){return this.url.searchParams.append(e,`ilike(any).{${s.join(",")}}`),this}is(e,s){return this.url.searchParams.append(e,`is.${s}`),this}in(e,s){const n=Array.from(new Set(s)).map(r=>typeof r=="string"&&new RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cs.{${s.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(s)}`),this}containedBy(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cd.{${s.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(s)}`),this}rangeGt(e,s){return this.url.searchParams.append(e,`sr.${s}`),this}rangeGte(e,s){return this.url.searchParams.append(e,`nxl.${s}`),this}rangeLt(e,s){return this.url.searchParams.append(e,`sl.${s}`),this}rangeLte(e,s){return this.url.searchParams.append(e,`nxr.${s}`),this}rangeAdjacent(e,s){return this.url.searchParams.append(e,`adj.${s}`),this}overlaps(e,s){return typeof s=="string"?this.url.searchParams.append(e,`ov.${s}`):this.url.searchParams.append(e,`ov.{${s.join(",")}}`),this}textSearch(e,s,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const a=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${a}.${s}`),this}match(e){return Object.entries(e).forEach(([s,n])=>{this.url.searchParams.append(s,`eq.${n}`)}),this}not(e,s,n){return this.url.searchParams.append(e,`not.${s}.${n}`),this}or(e,{foreignTable:s,referencedTable:n=s}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,s,n){return this.url.searchParams.append(e,`${s}.${n}`),this}};Ji.default=Mb;var Rb=Bt&&Bt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(sl,"__esModule",{value:!0});const Hr=Rb(Ji);let Lb=class{constructor(e,{headers:s={},schema:n,fetch:r}){this.url=e,this.headers=s,this.schema=n,this.fetch=r}select(e,{head:s=!1,count:n}={}){const r=s?"HEAD":"GET";let i=!1;const a=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",a),n&&(this.headers.Prefer=`count=${n}`),new Hr.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:s,defaultToNull:n=!0}={}){const r="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),s&&i.push(`count=${s}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const a=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Hr.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:s,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){const a="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&l.push(this.headers.Prefer),r&&l.push(`count=${r}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const c=e.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(c.length>0){const d=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new Hr.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:s}={}){const n="PATCH",r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),s&&r.push(`count=${s}`),this.headers.Prefer=r.join(","),new Hr.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const s="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Hr.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};sl.default=Lb;var al={},ol={};Object.defineProperty(ol,"__esModule",{value:!0});ol.version=void 0;ol.version="0.0.0-automated";Object.defineProperty(al,"__esModule",{value:!0});al.DEFAULT_HEADERS=void 0;const Db=ol;al.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Db.version}`};var s0=Bt&&Bt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(yu,"__esModule",{value:!0});const Bb=s0(sl),Ib=s0(Ji),$b=al;let zb=class n0{constructor(e,{headers:s={},schema:n,fetch:r}={}){this.url=e,this.headers=Object.assign(Object.assign({},$b.DEFAULT_HEADERS),s),this.schemaName=n,this.fetch=r}from(e){const s=new URL(`${this.url}/${e}`);return new Bb.default(s,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new n0(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,s={},{head:n=!1,get:r=!1,count:i}={}){let a;const l=new URL(`${this.url}/rpc/${e}`);let c;n||r?(a=n?"HEAD":"GET",Object.entries(s).filter(([u,h])=>h!==void 0).map(([u,h])=>[u,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([u,h])=>{l.searchParams.append(u,h)})):(a="POST",c=s);const d=Object.assign({},this.headers);return i&&(d.Prefer=`count=${i}`),new Ib.default({method:a,url:l,headers:d,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};yu.default=zb;var Rr=Bt&&Bt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(mt,"__esModule",{value:!0});mt.PostgrestError=mt.PostgrestBuilder=mt.PostgrestTransformBuilder=mt.PostgrestFilterBuilder=mt.PostgrestQueryBuilder=mt.PostgrestClient=void 0;const r0=Rr(yu);mt.PostgrestClient=r0.default;const i0=Rr(sl);mt.PostgrestQueryBuilder=i0.default;const a0=Rr(Ji);mt.PostgrestFilterBuilder=a0.default;const o0=Rr(nl);mt.PostgrestTransformBuilder=o0.default;const l0=Rr(rl);mt.PostgrestBuilder=l0.default;const c0=Rr(il);mt.PostgrestError=c0.default;var Fb=mt.default={PostgrestClient:r0.default,PostgrestQueryBuilder:i0.default,PostgrestFilterBuilder:a0.default,PostgrestTransformBuilder:o0.default,PostgrestBuilder:l0.default,PostgrestError:c0.default};const{PostgrestClient:Ub,PostgrestQueryBuilder:iS,PostgrestFilterBuilder:aS,PostgrestTransformBuilder:oS,PostgrestBuilder:lS,PostgrestError:cS}=Fb;function Wb(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const Hb=Wb(),Vb="2.11.15",qb=`realtime-js/${Vb}`,Kb="1.0.0",d0=1e4,Yb=1e3;var pi;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(pi||(pi={}));var Ze;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Ze||(Ze={}));var qt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(qt||(qt={}));var sd;(function(t){t.websocket="websocket"})(sd||(sd={}));var _n;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(_n||(_n={}));class Gb{constructor(){this.HEADER_LENGTH=1}decode(e,s){return e.constructor===ArrayBuffer?s(this._binaryDecode(e)):s(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const s=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,s,n)}_decodeBroadcast(e,s,n){const r=s.getUint8(1),i=s.getUint8(2);let a=this.HEADER_LENGTH+2;const l=n.decode(e.slice(a,a+r));a=a+r;const c=n.decode(e.slice(a,a+i));a=a+i;const d=JSON.parse(n.decode(e.slice(a,e.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class u0{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var _e;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(_e||(_e={}));const ef=(t,e,s={})=>{var n;const r=(n=s.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((i,a)=>(i[a]=Qb(a,t,e,r),i),{})},Qb=(t,e,s,n)=>{const r=e.find(l=>l.name===t),i=r==null?void 0:r.type,a=s[t];return i&&!n.includes(i)?h0(i,a):nd(a)},h0=(t,e)=>{if(t.charAt(0)==="_"){const s=t.slice(1,t.length);return ew(e,s)}switch(t){case _e.bool:return Xb(e);case _e.float4:case _e.float8:case _e.int2:case _e.int4:case _e.int8:case _e.numeric:case _e.oid:return Jb(e);case _e.json:case _e.jsonb:return Zb(e);case _e.timestamp:return tw(e);case _e.abstime:case _e.date:case _e.daterange:case _e.int4range:case _e.int8range:case _e.money:case _e.reltime:case _e.text:case _e.time:case _e.timestamptz:case _e.timetz:case _e.tsrange:case _e.tstzrange:return nd(e);default:return nd(e)}},nd=t=>t,Xb=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Jb=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Zb=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},ew=(t,e)=>{if(typeof t!="string")return t;const s=t.length-1,n=t[s];if(t[0]==="{"&&n==="}"){let i;const a=t.slice(1,s);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(l=>h0(e,l))}return t},tw=t=>typeof t=="string"?t.replace(" ","T"):t,f0=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Wl{constructor(e,s,n={},r=d0){this.channel=e,this.event=s,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var n;return this._hasReceived(e)&&s((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var tf;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(tf||(tf={}));class gi{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},r=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=gi.syncState(this.state,r,i,a),this.pendingDiffs.forEach(c=>{this.state=gi.syncDiff(this.state,c,i,a)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},r=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=gi.syncDiff(this.state,r,i,a),l())}),this.onJoin((r,i,a)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:i,newPresences:a})}),this.onLeave((r,i,a)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,n,r){const i=this.cloneDeep(e),a=this.transformState(s),l={},c={};return this.map(i,(d,u)=>{a[d]||(c[d]=u)}),this.map(a,(d,u)=>{const h=i[d];if(h){const f=u.map(b=>b.presence_ref),m=h.map(b=>b.presence_ref),p=u.filter(b=>m.indexOf(b.presence_ref)<0),x=h.filter(b=>f.indexOf(b.presence_ref)<0);p.length>0&&(l[d]=p),x.length>0&&(c[d]=x)}else l[d]=u}),this.syncDiff(i,{joins:l,leaves:c},n,r)}static syncDiff(e,s,n,r){const{joins:i,leaves:a}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(i,(l,c)=>{var d;const u=(d=e[l])!==null&&d!==void 0?d:[];if(e[l]=this.cloneDeep(c),u.length>0){const h=e[l].map(m=>m.presence_ref),f=u.filter(m=>h.indexOf(m.presence_ref)<0);e[l].unshift(...f)}n(l,u,c)}),this.map(a,(l,c)=>{let d=e[l];if(!d)return;const u=c.map(h=>h.presence_ref);d=d.filter(h=>u.indexOf(h.presence_ref)<0),e[l]=d,r(l,d,c),d.length===0&&delete e[l]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(n=>s(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,n)=>{const r=e[n];return"metas"in r?s[n]=r.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):s[n]=r,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var sf;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(sf||(sf={}));var nf;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(nf||(nf={}));var fs;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(fs||(fs={}));class vu{constructor(e,s={config:{}},n){this.topic=e,this.params=s,this.socket=n,this.bindings={},this.state=Ze.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Wl(this,qt.join,this.params,this.timeout),this.rejoinTimer=new u0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ze.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ze.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=Ze.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ze.errored,this.rejoinTimer.scheduleTimeout())}),this._on(qt.reply,{},(r,i)=>{this._trigger(this._replyEventName(i),r)}),this.presence=new gi(this),this.broadcastEndpointURL=f0(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,s=this.timeout){var n,r;if(this.socket.isConnected()||this.socket.connect(),this.state==Ze.closed){const{config:{broadcast:i,presence:a,private:l}}=this.params;this._onError(u=>e==null?void 0:e(fs.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(fs.CLOSED));const c={},d={broadcast:i,presence:a,postgres_changes:(r=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(u=>u.filter))!==null&&r!==void 0?r:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:u})=>{var h;if(this.socket.setAuth(),u===void 0){e==null||e(fs.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,m=(h=f==null?void 0:f.length)!==null&&h!==void 0?h:0,p=[];for(let x=0;x<m;x++){const b=f[x],{filter:{event:y,schema:g,table:v,filter:w}}=b,_=u&&u[x];if(_&&_.event===y&&_.schema===g&&_.table===v&&_.filter===w)p.push(Object.assign(Object.assign({},b),{id:_.id}));else{this.unsubscribe(),this.state=Ze.errored,e==null||e(fs.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e(fs.SUBSCRIBED);return}}).receive("error",u=>{this.state=Ze.errored,e==null||e(fs.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(fs.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,n){return this._on(e,s,n)}async send(e,s={}){var n,r;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:a}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=s.timeout)!==null&&n!==void 0?n:this.timeout);return await((r=d.body)===null||r===void 0?void 0:r.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,l,c;const d=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ze.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(qt.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(r=>{n=new Wl(this,qt.leave,{},e),n.receive("ok",()=>{s(),r("ok")}).receive("timeout",()=>{s(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,s,n){const r=new AbortController,i=setTimeout(()=>r.abort(),n),a=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:r.signal}));return clearTimeout(i),a}_push(e,s,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new Wl(this,e,s,n);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,s,n){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,n){var r,i;const a=e.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=qt;if(n&&[l,c,d,u].indexOf(a)>=0&&n!==this._joinRef())return;let f=this._onMessage(a,s,n);if(s&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(m=>{var p,x,b;return((p=m.filter)===null||p===void 0?void 0:p.event)==="*"||((b=(x=m.filter)===null||x===void 0?void 0:x.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===a}).map(m=>m.callback(f,n)):(i=this.bindings[a])===null||i===void 0||i.filter(m=>{var p,x,b,y,g,v;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in m){const w=m.id,_=(p=m.filter)===null||p===void 0?void 0:p.event;return w&&((x=s.ids)===null||x===void 0?void 0:x.includes(w))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((b=s.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const w=(g=(y=m==null?void 0:m.filter)===null||y===void 0?void 0:y.event)===null||g===void 0?void 0:g.toLocaleLowerCase();return w==="*"||w===((v=s==null?void 0:s.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===a}).map(m=>{if(typeof f=="object"&&"ids"in f){const p=f.data,{schema:x,table:b,commit_timestamp:y,type:g,errors:v}=p;f=Object.assign(Object.assign({},{schema:x,table:b,commit_timestamp:y,eventType:g,new:{},old:{},errors:v}),this._getPayloadRecords(p))}m.callback(f,n)})}_isClosed(){return this.state===Ze.closed}_isJoined(){return this.state===Ze.joined}_isJoining(){return this.state===Ze.joining}_isLeaving(){return this.state===Ze.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,n){const r=e.toLocaleLowerCase(),i={type:r,filter:s,callback:n};return this.bindings[r]?this.bindings[r].push(i):this.bindings[r]=[i],this}_off(e,s){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(r=>{var i;return!(((i=r.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&vu.isEqual(r.filter,s))}),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const n in e)if(e[n]!==s[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(qt.close,{},e)}_onError(e){this._on(qt.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ze.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=ef(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=ef(e.columns,e.old_record)),s}}const rf=()=>{},sw=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class nw{constructor(e,s){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=d0,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=rf,this.ref=0,this.logger=rf,this.conn=null,this.sendBuffer=[],this.serializer=new Gb,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...l)=>Xi(async()=>{const{default:c}=await Promise.resolve().then(()=>Mr);return{default:c}},void 0).then(({default:c})=>c(...l)):a=fetch,(...l)=>a(...l)},this.endPoint=`${e}/${sd.websocket}`,this.httpEndpoint=f0(e),s!=null&&s.transport?this.transport=s.transport:this.transport=null,s!=null&&s.params&&(this.params=s.params),s!=null&&s.timeout&&(this.timeout=s.timeout),s!=null&&s.logger&&(this.logger=s.logger),(s!=null&&s.logLevel||s!=null&&s.log_level)&&(this.logLevel=s.logLevel||s.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),s!=null&&s.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const r=(n=s==null?void 0:s.params)===null||n===void 0?void 0:n.apikey;if(r&&(this.accessTokenValue=r,this.apiKey=r),this.reconnectAfterMs=s!=null&&s.reconnectAfterMs?s.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=s!=null&&s.encode?s.encode:(i,a)=>a(JSON.stringify(i)),this.decode=s!=null&&s.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new u0(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s==null?void 0:s.fetch),s!=null&&s.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(s==null?void 0:s.worker)||!1,this.workerUrl=s==null?void 0:s.workerUrl}this.accessToken=(s==null?void 0:s.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=Hb),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Kb}))}disconnect(e,s){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,s,n){this.logger(e,s,n)}connectionState(){switch(this.conn&&this.conn.readyState){case pi.connecting:return _n.Connecting;case pi.open:return _n.Open;case pi.closing:return _n.Closing;default:return _n.Closed}}isConnected(){return this.connectionState()===_n.Open}channel(e,s={config:{}}){const n=`realtime:${e}`,r=this.getChannels().find(i=>i.topic===n);if(r)return r;{const i=new vu(`realtime:${e}`,s,this);return this.channels.push(i),i}}push(e){const{topic:s,event:n,payload:r,ref:i}=e,a=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${s} ${n} (${i})`,r),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){let s=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(n=>{const r={access_token:s,version:qb};s&&n.updateJoinPayload(r),n.joinedOnce&&n._isJoined()&&n._push(qt.access_token,{access_token:s})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(Yb,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,s=>{let{topic:n,event:r,payload:i,ref:a}=s;n==="phoenix"&&r==="phx_reply"&&this.heartbeatCallback(s.payload.status=="ok"?"ok":"error"),a&&a===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${r} ${a&&"("+a+")"||""}`,i),Array.from(this.channels).filter(l=>l._isMember(n)).forEach(l=>l._trigger(r,i,a)),this.stateChangeCallbacks.message.forEach(l=>l(s))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(qt.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const n=e.match(/\?/)?"&":"?",r=new URLSearchParams(s);return`${e}${n}${r}`}_workerObjectUrl(e){let s;if(e)s=e;else{const n=new Blob([sw],{type:"application/javascript"});s=URL.createObjectURL(n)}return s}}class bu extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ue(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class rw extends bu{constructor(e,s,n){super(e),this.name="StorageApiError",this.status=s,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class rd extends bu{constructor(e,s){super(e),this.name="StorageUnknownError",this.originalError=s}}var iw=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(a){a(i)})}return new(s||(s=Promise))(function(i,a){function l(u){try{d(n.next(u))}catch(h){a(h)}}function c(u){try{d(n.throw(u))}catch(h){a(h)}}function d(u){u.done?i(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};const m0=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>Xi(async()=>{const{default:n}=await Promise.resolve().then(()=>Mr);return{default:n}},void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)},aw=()=>iw(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Xi(()=>Promise.resolve().then(()=>Mr),void 0)).Response:Response}),id=t=>{if(Array.isArray(t))return t.map(s=>id(s));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([s,n])=>{const r=s.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[r]=id(n)}),e},ow=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var Fn=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(a){a(i)})}return new(s||(s=Promise))(function(i,a){function l(u){try{d(n.next(u))}catch(h){a(h)}}function c(u){try{d(n.throw(u))}catch(h){a(h)}}function d(u){u.done?i(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};const Hl=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),lw=(t,e,s)=>Fn(void 0,void 0,void 0,function*(){const n=yield aw();t instanceof n&&!(s!=null&&s.noResolveJson)?t.json().then(r=>{const i=t.status||500,a=(r==null?void 0:r.statusCode)||i+"";e(new rw(Hl(r),i,a))}).catch(r=>{e(new rd(Hl(r),r))}):e(new rd(Hl(t),t))}),cw=(t,e,s,n)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?r:(ow(n)?(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r.body=JSON.stringify(n)):r.body=n,Object.assign(Object.assign({},r),s))};function Zi(t,e,s,n,r,i){return Fn(this,void 0,void 0,function*(){return new Promise((a,l)=>{t(s,cw(e,n,r,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>lw(c,l,n))})})}function So(t,e,s,n){return Fn(this,void 0,void 0,function*(){return Zi(t,"GET",e,s,n)})}function ms(t,e,s,n,r){return Fn(this,void 0,void 0,function*(){return Zi(t,"POST",e,n,r,s)})}function ad(t,e,s,n,r){return Fn(this,void 0,void 0,function*(){return Zi(t,"PUT",e,n,r,s)})}function dw(t,e,s,n){return Fn(this,void 0,void 0,function*(){return Zi(t,"HEAD",e,Object.assign(Object.assign({},s),{noResolveJson:!0}),n)})}function p0(t,e,s,n,r){return Fn(this,void 0,void 0,function*(){return Zi(t,"DELETE",e,n,r,s)})}var ut=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(a){a(i)})}return new(s||(s=Promise))(function(i,a){function l(u){try{d(n.next(u))}catch(h){a(h)}}function c(u){try{d(n.throw(u))}catch(h){a(h)}}function d(u){u.done?i(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};const uw={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},af={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class hw{constructor(e,s={},n,r){this.url=e,this.headers=s,this.bucketId=n,this.fetch=m0(r)}uploadOrUpdate(e,s,n,r){return ut(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},af),r);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),r!=null&&r.headers&&(l=Object.assign(Object.assign({},l),r.headers));const d=this._removeEmptyFolders(s),u=this._getFinalPath(d),h=yield(e=="PUT"?ad:ms)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:d,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(Ue(i))return{data:null,error:i};throw i}})}upload(e,s,n){return ut(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,s,n)})}uploadToSignedUrl(e,s,n,r){return ut(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),a=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",s);try{let c;const d=Object.assign({upsert:af.upsert},r),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",d.cacheControl)):(c=n,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const h=yield ad(this.fetch,l.toString(),c,{headers:u});return{data:{path:i,fullPath:h.Key},error:null}}catch(c){if(Ue(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,s){return ut(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const r=Object.assign({},this.headers);s!=null&&s.upsert&&(r["x-upsert"]="true");const i=yield ms(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:r}),a=new URL(this.url+i.url),l=a.searchParams.get("token");if(!l)throw new bu("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:l},error:null}}catch(n){if(Ue(n))return{data:null,error:n};throw n}})}update(e,s,n){return ut(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,s,n)})}move(e,s,n){return ut(this,void 0,void 0,function*(){try{return{data:yield ms(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(Ue(r))return{data:null,error:r};throw r}})}copy(e,s,n){return ut(this,void 0,void 0,function*(){try{return{data:{path:(yield ms(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(Ue(r))return{data:null,error:r};throw r}})}createSignedUrl(e,s,n){return ut(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),i=yield ms(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:s},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(r){if(Ue(r))return{data:null,error:r};throw r}})}createSignedUrls(e,s,n){return ut(this,void 0,void 0,function*(){try{const r=yield ms(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:e},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:r.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(r){if(Ue(r))return{data:null,error:r};throw r}})}download(e,s){return ut(this,void 0,void 0,function*(){const r=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),a=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield So(this.fetch,`${this.url}/${r}/${l}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Ue(l))return{data:null,error:l};throw l}})}info(e){return ut(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{const n=yield So(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:id(n),error:null}}catch(n){if(Ue(n))return{data:null,error:n};throw n}})}exists(e){return ut(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{return yield dw(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Ue(n)&&n instanceof rd){const r=n.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,s){const n=this._getFinalPath(e),r=[],i=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";i!==""&&r.push(i);const l=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});c!==""&&r.push(c);let d=r.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${d}`)}}}remove(e){return ut(this,void 0,void 0,function*(){try{return{data:yield p0(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(s){if(Ue(s))return{data:null,error:s};throw s}})}list(e,s,n){return ut(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},uw),s),{prefix:e||""});return{data:yield ms(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(Ue(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const s=[];return e.width&&s.push(`width=${e.width}`),e.height&&s.push(`height=${e.height}`),e.resize&&s.push(`resize=${e.resize}`),e.format&&s.push(`format=${e.format}`),e.quality&&s.push(`quality=${e.quality}`),s.join("&")}}const fw="2.10.4",mw={"X-Client-Info":`storage-js/${fw}`};var Wn=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(a){a(i)})}return new(s||(s=Promise))(function(i,a){function l(u){try{d(n.next(u))}catch(h){a(h)}}function c(u){try{d(n.throw(u))}catch(h){a(h)}}function d(u){u.done?i(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};class pw{constructor(e,s={},n,r){const i=new URL(e);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},mw),s),this.fetch=m0(n)}listBuckets(){return Wn(this,void 0,void 0,function*(){try{return{data:yield So(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Ue(e))return{data:null,error:e};throw e}})}getBucket(e){return Wn(this,void 0,void 0,function*(){try{return{data:yield So(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(s){if(Ue(s))return{data:null,error:s};throw s}})}createBucket(e,s={public:!1}){return Wn(this,void 0,void 0,function*(){try{return{data:yield ms(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Ue(n))return{data:null,error:n};throw n}})}updateBucket(e,s){return Wn(this,void 0,void 0,function*(){try{return{data:yield ad(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Ue(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Wn(this,void 0,void 0,function*(){try{return{data:yield ms(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(Ue(s))return{data:null,error:s};throw s}})}deleteBucket(e){return Wn(this,void 0,void 0,function*(){try{return{data:yield p0(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(Ue(s))return{data:null,error:s};throw s}})}}class gw extends pw{constructor(e,s={},n,r){super(e,s,n,r)}from(e){return new hw(this.url,this.headers,e,this.fetch)}}const xw="2.53.0";let ei="";typeof Deno<"u"?ei="deno":typeof document<"u"?ei="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ei="react-native":ei="node";const yw={"X-Client-Info":`supabase-js-${ei}/${xw}`},vw={headers:yw},bw={schema:"public"},ww={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},_w={};var jw=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(a){a(i)})}return new(s||(s=Promise))(function(i,a){function l(u){try{d(n.next(u))}catch(h){a(h)}}function c(u){try{d(n.throw(u))}catch(h){a(h)}}function d(u){u.done?i(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};const kw=t=>{let e;return t?e=t:typeof fetch>"u"?e=Zg:e=fetch,(...s)=>e(...s)},Nw=()=>typeof Headers>"u"?e0:Headers,Sw=(t,e,s)=>{const n=kw(s),r=Nw();return(i,a)=>jw(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:t;let d=new r(a==null?void 0:a.headers);return d.has("apikey")||d.set("apikey",t),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},a),{headers:d}))})};var Cw=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(a){a(i)})}return new(s||(s=Promise))(function(i,a){function l(u){try{d(n.next(u))}catch(h){a(h)}}function c(u){try{d(n.throw(u))}catch(h){a(h)}}function d(u){u.done?i(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};function Pw(t){return t.endsWith("/")?t:t+"/"}function Ew(t,e){var s,n;const{db:r,auth:i,realtime:a,global:l}=t,{db:c,auth:d,realtime:u,global:h}=e,f={db:Object.assign(Object.assign({},c),r),auth:Object.assign(Object.assign({},d),i),realtime:Object.assign(Object.assign({},u),a),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(s=h==null?void 0:h.headers)!==null&&s!==void 0?s:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>Cw(this,void 0,void 0,function*(){return""})};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}const g0="2.71.1",Gn=30*1e3,od=3,Vl=od*Gn,Tw="http://localhost:9999",Aw="supabase.auth.token",Ow={"X-Client-Info":`gotrue-js/${g0}`},ld="X-Supabase-Api-Version",x0={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Mw=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Rw=10*60*1e3;class wu extends Error{constructor(e,s,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=n}}function oe(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Lw extends wu{constructor(e,s,n){super(e,s,n),this.name="AuthApiError",this.status=s,this.code=n}}function Dw(t){return oe(t)&&t.name==="AuthApiError"}class y0 extends wu{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class ln extends wu{constructor(e,s,n,r){super(e,n,r),this.name=s,this.status=n}}class Os extends ln{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Bw(t){return oe(t)&&t.name==="AuthSessionMissingError"}class ba extends ln{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class wa extends ln{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class _a extends ln{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Iw(t){return oe(t)&&t.name==="AuthImplicitGrantRedirectError"}class of extends ln{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class cd extends ln{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function ql(t){return oe(t)&&t.name==="AuthRetryableFetchError"}class lf extends ln{constructor(e,s,n){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=n}}class dd extends ln{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Co="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),cf=` 	
\r=`.split(""),$w=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<cf.length;e+=1)t[cf[e].charCodeAt(0)]=-2;for(let e=0;e<Co.length;e+=1)t[Co[e].charCodeAt(0)]=e;return t})();function df(t,e,s){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;s(Co[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;s(Co[n]),e.queuedBits-=6}}function v0(t,e,s){const n=$w[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)s(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function uf(t){const e=[],s=a=>{e.push(String.fromCodePoint(a))},n={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},i=a=>{Uw(a,n,s)};for(let a=0;a<t.length;a+=1)v0(t.charCodeAt(a),r,i);return e.join("")}function zw(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Fw(t,e){for(let s=0;s<t.length;s+=1){let n=t.charCodeAt(s);if(n>55295&&n<=56319){const r=(n-55296)*1024&65535;n=(t.charCodeAt(s+1)-56320&65535|r)+65536,s+=1}zw(n,e)}}function Uw(t,e,s){if(e.utf8seq===0){if(t<=127){s(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&s(e.codepoint)}}function Ww(t){const e=[],s={queue:0,queuedBits:0},n=r=>{e.push(r)};for(let r=0;r<t.length;r+=1)v0(t.charCodeAt(r),s,n);return new Uint8Array(e)}function Hw(t){const e=[];return Fw(t,s=>e.push(s)),new Uint8Array(e)}function Vw(t){const e=[],s={queue:0,queuedBits:0},n=r=>{e.push(r)};return t.forEach(r=>df(r,s,n)),df(null,s,n),e.join("")}function qw(t){return Math.round(Date.now()/1e3)+t}function Kw(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Wt=()=>typeof window<"u"&&typeof document<"u",hn={tested:!1,writable:!1},b0=()=>{if(!Wt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(hn.tested)return hn.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),hn.tested=!0,hn.writable=!0}catch{hn.tested=!0,hn.writable=!1}return hn.writable};function Yw(t){const e={},s=new URL(t);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((r,i)=>{e[i]=r})}catch{}return s.searchParams.forEach((n,r)=>{e[r]=n}),e}const w0=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>Xi(async()=>{const{default:n}=await Promise.resolve().then(()=>Mr);return{default:n}},void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)},Gw=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Qn=async(t,e,s)=>{await t.setItem(e,JSON.stringify(s))},fn=async(t,e)=>{const s=await t.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},Ts=async(t,e)=>{await t.removeItem(e)};class ll{constructor(){this.promise=new ll.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}ll.promiseConstructor=Promise;function Kl(t){const e=t.split(".");if(e.length!==3)throw new dd("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!Mw.test(e[n]))throw new dd("JWT not in base64url format");return{header:JSON.parse(uf(e[0])),payload:JSON.parse(uf(e[1])),signature:Ww(e[2]),raw:{header:e[0],payload:e[1]}}}async function Qw(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Xw(t,e){return new Promise((n,r)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await t(i);if(!e(i,null,a)){n(a);return}}catch(a){if(!e(i,a)){r(a);return}}})()})}function Jw(t){return("0"+t.toString(16)).substr(-2)}function Zw(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=s.length;let r="";for(let i=0;i<56;i++)r+=s.charAt(Math.floor(Math.random()*n));return r}return crypto.getRandomValues(e),Array.from(e,Jw).join("")}async function e_(t){const s=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",s),r=new Uint8Array(n);return Array.from(r).map(i=>String.fromCharCode(i)).join("")}async function t_(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const s=await e_(t);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Hn(t,e,s=!1){const n=Zw();let r=n;s&&(r+="/PASSWORD_RECOVERY"),await Qn(t,`${e}-code-verifier`,r);const i=await t_(n);return[i,n===i?"plain":"s256"]}const s_=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function n_(t){const e=t.headers.get(ld);if(!e||!e.match(s_))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function r_(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function i_(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const a_=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Vn(t){if(!a_.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Yl(){const t={};return new Proxy(t,{get:(e,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const n=s.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function hf(t){return JSON.parse(JSON.stringify(t))}var o_=function(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(s[n[r]]=t[n[r]]);return s};const vn=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),l_=[502,503,504];async function ff(t){var e;if(!Gw(t))throw new cd(vn(t),0);if(l_.includes(t.status))throw new cd(vn(t),t.status);let s;try{s=await t.json()}catch(i){throw new y0(vn(i),i)}let n;const r=n_(t);if(r&&r.getTime()>=x0["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?n=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(n=s.error_code),n){if(n==="weak_password")throw new lf(vn(s),t.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Os}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new lf(vn(s),t.status,s.weak_password.reasons);throw new Lw(vn(s),t.status||500,n)}const c_=(t,e,s,n)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(n),Object.assign(Object.assign({},r),s))};async function de(t,e,s,n){var r;const i=Object.assign({},n==null?void 0:n.headers);i[ld]||(i[ld]=x0["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const a=(r=n==null?void 0:n.query)!==null&&r!==void 0?r:{};n!=null&&n.redirectTo&&(a.redirect_to=n.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await d_(t,e,s+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function d_(t,e,s,n,r,i){const a=c_(e,n,r,i);let l;try{l=await t(s,Object.assign({},a))}catch(c){throw console.error(c),new cd(vn(c),0)}if(l.ok||await ff(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await ff(c)}}function cs(t){var e;let s=null;m_(t)&&(s=Object.assign({},t),t.expires_at||(s.expires_at=qw(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:s,user:n},error:null}}function mf(t){const e=cs(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((s,n)=>s&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Bs(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function u_(t){return{data:t,error:null}}function h_(t){const{action_link:e,email_otp:s,hashed_token:n,redirect_to:r,verification_type:i}=t,a=o_(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:s,hashed_token:n,redirect_to:r,verification_type:i},c=Object.assign({},a);return{data:{properties:l,user:c},error:null}}function f_(t){return t}function m_(t){return t.access_token&&t.refresh_token&&t.expires_in}const Gl=["global","local","others"];var p_=function(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(s[n[r]]=t[n[r]]);return s};class g_{constructor({url:e="",headers:s={},fetch:n}){this.url=e,this.headers=s,this.fetch=w0(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,s=Gl[0]){if(Gl.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Gl.join(", ")}`);try{return await de(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(oe(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,s={}){try{return await de(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Bs})}catch(n){if(oe(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:s}=e,n=p_(e,["options"]),r=Object.assign(Object.assign({},n),s);return"newEmail"in n&&(r.new_email=n==null?void 0:n.newEmail,delete r.newEmail),await de(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:h_,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(oe(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await de(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Bs})}catch(s){if(oe(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,n,r,i,a,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await de(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&n!==void 0?n:"",per_page:(i=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:""},xform:f_});if(u.error)throw u.error;const h=await u.json(),f=(a=u.headers.get("x-total-count"))!==null&&a!==void 0?a:0,m=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(p=>{const x=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(p.split(";")[1].split("=")[1]);d[`${b}Page`]=x}),d.total=parseInt(f)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(oe(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){Vn(e);try{return await de(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Bs})}catch(s){if(oe(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){Vn(e);try{return await de(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:Bs})}catch(n){if(oe(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,s=!1){Vn(e);try{return await de(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:Bs})}catch(n){if(oe(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Vn(e.userId);try{const{data:s,error:n}=await de(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:s,error:n}}catch(s){if(oe(s))return{data:null,error:s};throw s}}async _deleteFactor(e){Vn(e.userId),Vn(e.id);try{return{data:await de(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(oe(s))return{data:null,error:s};throw s}}}function pf(t={}){return{getItem:e=>t[e]||null,setItem:(e,s)=>{t[e]=s},removeItem:e=>{delete t[e]}}}function x_(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const qn={debug:!!(globalThis&&b0()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class _0 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class y_ extends _0{}async function v_(t,e,s){qn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),qn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async r=>{if(r){qn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,r.name);try{return await s()}finally{qn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,r.name)}}else{if(e===0)throw qn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new y_(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(qn.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}x_();const b_={url:Tw,storageKey:Aw,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ow,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function gf(t,e,s){return await s()}const Kn={};class zi{constructor(e){var s,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=zi.nextInstanceID,zi.nextInstanceID+=1,this.instanceID>0&&Wt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},b_),e);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new g_({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=w0(r.fetch),this.lock=r.lock||gf,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:Wt()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=v_:this.lock=gf,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(r.storage?this.storage=r.storage:b0()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=pf(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=pf(this.memoryStorage)),Wt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,s;return(s=(e=Kn[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(e){Kn[this.storageKey]=Object.assign(Object.assign({},Kn[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,s;return(s=(e=Kn[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Kn[this.storageKey]=Object.assign(Object.assign({},Kn[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${g0}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const s=Yw(window.location.href);let n="none";if(this._isImplicitGrantCallback(s)?n="implicit":await this._isPKCECallback(s)&&(n="pkce"),Wt()&&this.detectSessionInUrl&&n!=="none"){const{data:r,error:i}=await this._getSessionFromURL(s,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Iw(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:l}=r;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),await this._saveSession(a),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return oe(s)?{error:s}:{error:new y0("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,n,r;try{const i=await de(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:cs}),{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,d=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(oe(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var s,n,r;try{let i;if("email"in e){const{email:u,password:h,options:f}=e;let m=null,p=null;this.flowType==="pkce"&&([m,p]=await Hn(this.storage,this.storageKey)),i=await de(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:h,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:m,code_challenge_method:p},xform:cs})}else if("phone"in e){const{phone:u,password:h,options:f}=e;i=await de(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(r=f==null?void 0:f.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:cs})}else throw new wa("You must provide either an email or phone number and a password");const{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,d=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(oe(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let s;if("email"in e){const{email:i,password:a,options:l}=e;s=await de(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:mf})}else if("phone"in e){const{phone:i,password:a,options:l}=e;s=await de(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:mf})}else throw new wa("You must provide either an email or phone number and a password");const{data:n,error:r}=s;return r?{data:{user:null,session:null},error:r}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new ba}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r})}catch(s){if(oe(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(e){var s,n,r,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:s}=e;if(s==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}async signInWithSolana(e){var s,n,r,i,a,l,c,d,u,h,f,m;let p,x;if("message"in e)p=e.message,x=e.signature;else{const{chain:b,wallet:y,statement:g,options:v}=e;let w;if(Wt())if(typeof y=="object")w=y;else{const j=window;if("solana"in j&&typeof j.solana=="object"&&("signIn"in j.solana&&typeof j.solana.signIn=="function"||"signMessage"in j.solana&&typeof j.solana.signMessage=="function"))w=j.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=y}const _=new URL((s=v==null?void 0:v.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in w&&w.signIn){const j=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),g?{statement:g}:null));let E;if(Array.isArray(j)&&j[0]&&typeof j[0]=="object")E=j[0];else if(j&&typeof j=="object"&&"signedMessage"in j&&"signature"in j)E=j;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)p=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),x=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${_.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(r=(n=v==null?void 0:v.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&r!==void 0?r:new Date().toISOString()}`,...!((i=v==null?void 0:v.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((a=v==null?void 0:v.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((l=v==null?void 0:v.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((c=v==null?void 0:v.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((d=v==null?void 0:v.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((h=(u=v==null?void 0:v.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...v.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const j=await w.signMessage(new TextEncoder().encode(p),"utf8");if(!j||!(j instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=j}}try{const{data:b,error:y}=await de(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:Vw(x)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:cs});if(y)throw y;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new ba}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:y})}catch(b){if(oe(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(e){const s=await fn(this.storage,`${this.storageKey}-code-verifier`),[n,r]=(s??"").split("/");try{const{data:i,error:a}=await de(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:cs});if(await Ts(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new ba}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:r??null}),error:a})}catch(i){if(oe(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:s,provider:n,token:r,access_token:i,nonce:a}=e,l=await de(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:r,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:cs}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new ba}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(s){if(oe(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(e){var s,n,r,i,a;try{if("email"in e){const{email:l,options:c}=e;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await Hn(this.storage,this.storageKey));const{error:h}=await de(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:c}=e,{data:d,error:u}=await de(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new wa("You must provide either an email or phone number.")}catch(l){if(oe(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var s,n;try{let r,i;"options"in e&&(r=(s=e.options)===null||s===void 0?void 0:s.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:a,error:l}=await de(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:r,xform:cs});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,d=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(r){if(oe(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var s,n,r;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await Hn(this.storage,this.storageKey)),await de(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&n!==void 0?n:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:u_})}catch(i){if(oe(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:n}=e;if(n)throw n;if(!s)throw new Os;const{error:r}=await de(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(oe(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const s=`${this.url}/resend`;if("email"in e){const{email:n,type:r,options:i}=e,{error:a}=await de(this.fetch,"POST",s,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:n,type:r,options:i}=e,{data:a,error:l}=await de(this.fetch,"POST",s,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l}}throw new wa("You must provide either an email or phone number and a type")}catch(s){if(oe(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await n,await s()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=s();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await fn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Vl:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const a=await fn(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=Yl()}if(this.storage.isServer&&e.user){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,d,u)=>(!a&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:e},error:null}}const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await de(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Bs}):await this._useSession(async s=>{var n,r,i;const{data:a,error:l}=s;if(l)throw l;return!(!((n=a.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Os}:await de(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0,xform:Bs})})}catch(s){if(oe(s))return Bw(s)&&(await this._removeSession(),await Ts(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async n=>{const{data:r,error:i}=n;if(i)throw i;if(!r.session)throw new Os;const a=r.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await Hn(this.storage,this.storageKey));const{data:d,error:u}=await de(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:Bs});if(u)throw u;return a.user=d.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(n){if(oe(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Os;const s=Date.now()/1e3;let n=s,r=!0,i=null;const{payload:a}=Kl(e.access_token);if(a.exp&&(n=a.exp,r=n<=s),r){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-s,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(s){if(oe(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var n;if(!e){const{data:a,error:l}=s;if(l)throw l;e=(n=a.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Os;const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(oe(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(e,s){try{if(!Wt())throw new _a("No browser detected.");if(e.error||e.error_description||e.error_code)throw new _a(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new of("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new _a("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new of("No code detected.");const{data:g,error:v}=await this._exchangeCodeForSession(e.code);if(v)throw v;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:g.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:i,refresh_token:a,expires_in:l,expires_at:c,token_type:d}=e;if(!i||!l||!a||!d)throw new _a("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(l);let f=u+h;c&&(f=parseInt(c));const m=f-u;m*1e3<=Gn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const p=f-h;u-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,f,u):u-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,f,u);const{data:x,error:b}=await this._getUser(i);if(b)throw b;const y={provider_token:n,provider_refresh_token:r,access_token:i,expires_in:h,expires_at:f,refresh_token:a,token_type:d,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:e.type},error:null}}catch(n){if(oe(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const s=await fn(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var n;const{data:r,error:i}=s;if(i)return{error:i};const a=(n=r.session)===null||n===void 0?void 0:n.access_token;if(a){const{error:l}=await this.admin.signOut(a,e);if(l&&!(Dw(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Ts(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const s=Kw(),n={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async s=>{var n,r;try{const{data:{session:i},error:a}=s;if(a)throw a;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,s={}){let n=null,r=null;this.flowType==="pkce"&&([n,r]=await Hn(this.storage,this.storageKey,!0));try{return await de(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(i){if(oe(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:s,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(s){if(oe(s))return{data:null,error:s};throw s}}async linkIdentity(e){var s;try{const{data:n,error:r}=await this._useSession(async i=>{var a,l,c,d,u;const{data:h,error:f}=i;if(f)throw f;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await de(this.fetch,"GET",m,{headers:this.headers,jwt:(u=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(r)throw r;return Wt()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(oe(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async s=>{var n,r;const{data:i,error:a}=s;if(a)throw a;return await de(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&r!==void 0?r:void 0})})}catch(s){if(oe(s))return{data:null,error:s};throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const n=Date.now();return await Xw(async r=>(r>0&&await Qw(200*Math.pow(2,r-1)),this._debug(s,"refreshing attempt",r),await de(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:cs})),(r,i)=>{const a=200*Math.pow(2,r);return i&&ql(i)&&Date.now()+a-n<Gn})}catch(n){if(this._debug(s,"error",n),oe(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",n),Wt()&&!s.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,s;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await fn(this.storage,this.storageKey);if(r&&this.userStorage){let a=await fn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:r.user},await Qn(this.userStorage,this.storageKey+"-user",a)),r.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:Yl()}else if(r&&!r.user&&!r.user){const a=await fn(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(r.user=a.user,await Ts(this.storage,this.storageKey+"-user"),await Qn(this.storage,this.storageKey,r)):r.user=Yl()}if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const i=((s=r.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<Vl;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Vl}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:a}=await this._callRefreshToken(r.refresh_token);a&&(console.error(a),ql(a)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(r.user&&r.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:l}=await this._getUser(r.access_token);!l&&(a!=null&&a.user)?(r.user=a.user,await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(n,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var s,n;if(!e)throw new Os;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new ll;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new Os;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(r,"error",i),oe(i)){const a={session:null,error:i};return ql(i)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(a),a}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,s,n=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",s,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:s});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,s)}catch(c){i.push(c)}});if(await Promise.all(a),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const s=Object.assign({},e),n=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&s.user&&await Qn(this.userStorage,this.storageKey+"-user",{user:s.user});const r=Object.assign({},s);delete r.user;const i=hf(r);await Qn(this.storage,this.storageKey,i)}else{const r=hf(s);await Qn(this.storage,this.storageKey,r)}}async _removeSession(){this._debug("#_removeSession()"),await Ts(this.storage,this.storageKey),await Ts(this.storage,this.storageKey+"-code-verifier"),await Ts(this.storage,this.storageKey+"-user"),this.userStorage&&await Ts(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Wt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Gn);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:n}}=s;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((n.expires_at*1e3-e)/Gn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${Gn}ms, refresh threshold is ${od} ticks`),r<=od&&await this._callRefreshToken(n.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof _0)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Wt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,n){const r=[`provider=${encodeURIComponent(s)}`];if(n!=null&&n.redirectTo&&r.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&r.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,a]=await Hn(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});r.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);r.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&r.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var n;const{data:r,error:i}=s;return i?{data:null,error:i}:await de(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(oe(s))return{data:null,error:s};throw s}}async _enroll(e){try{return await this._useSession(async s=>{var n,r;const{data:i,error:a}=s;if(a)return{data:null,error:a};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:d}=await de(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((r=c==null?void 0:c.totp)===null||r===void 0)&&r.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(s){if(oe(s))return{data:null,error:s};throw s}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:r,error:i}=s;if(i)return{data:null,error:i};const{data:a,error:l}=await de(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(s){if(oe(s))return{data:null,error:s};throw s}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:r,error:i}=s;return i?{data:null,error:i}:await de(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(oe(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(e){const{data:s,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){const{data:{user:e},error:s}=await this.getUser();if(s)return{data:null,error:s};const n=(e==null?void 0:e.factors)||[],r=n.filter(a=>a.factor_type==="totp"&&a.status==="verified"),i=n.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:n,totp:r,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var s,n;const{data:{session:r},error:i}=e;if(i)return{data:null,error:i};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Kl(r.access_token);let l=null;a.aal&&(l=a.aal);let c=l;((n=(s=r.user.factors)===null||s===void 0?void 0:s.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const u=a.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,s={keys:[]}){let n=s.keys.find(l=>l.kid===e);if(n)return n;const r=Date.now();if(n=this.jwks.keys.find(l=>l.kid===e),n&&this.jwks_cached_at+Rw>r)return n;const{data:i,error:a}=await de(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=r,n=i.keys.find(l=>l.kid===e),!n)?null:n}async getClaims(e,s={}){try{let n=e;if(!n){const{data:m,error:p}=await this.getSession();if(p||!m.session)return{data:null,error:p};n=m.session.access_token}const{header:r,payload:i,signature:a,raw:{header:l,payload:c}}=Kl(n);s!=null&&s.allowExpired||r_(i.exp);const d=!r.alg||r.alg.startsWith("HS")||!r.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(r.kid,s!=null&&s.keys?{keys:s.keys}:s==null?void 0:s.jwks);if(!d){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:i,header:r,signature:a},error:null}}const u=i_(r.alg),h=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,a,Hw(`${l}.${c}`)))throw new dd("Invalid JWT signature");return{data:{claims:i,header:r,signature:a},error:null}}catch(n){if(oe(n))return{data:null,error:n};throw n}}}zi.nextInstanceID=0;const w_=zi;class __ extends w_{constructor(e){super(e)}}var j_=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(a){a(i)})}return new(s||(s=Promise))(function(i,a){function l(u){try{d(n.next(u))}catch(h){a(h)}}function c(u){try{d(n.throw(u))}catch(h){a(h)}}function d(u){u.done?i(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};class k_{constructor(e,s,n){var r,i,a;if(this.supabaseUrl=e,this.supabaseKey=s,!e)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const l=Pw(e),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:bw,realtime:_w,auth:Object.assign(Object.assign({},ww),{storageKey:d}),global:vw},h=Ew(n??{},u);this.storageKey=(r=h.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=h.auth)!==null&&a!==void 0?a:{},this.headers,h.global.fetch),this.fetch=Sw(s,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new Ub(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new gw(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new yb(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,s={},n={}){return this.rest.rpc(e,s,n)}channel(e,s={config:{}}){return this.realtime.channel(e,s)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,s;return j_(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(s=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:s,detectSessionInUrl:n,storage:r,storageKey:i,flowType:a,lock:l,debug:c},d,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new __({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),d),storageKey:i,autoRefreshToken:e,persistSession:s,detectSessionInUrl:n,storage:r,flowType:a,lock:l,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new nw(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,n)=>{this._handleTokenChanged(s,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,s,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const N_=(t,e,s)=>new k_(t,e,s);function S_(){if(typeof window<"u"||typeof process>"u"||process.version===void 0||process.version===null)return!1;const t=process.version.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}S_()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const C_="https://eymxpphofhhfeuvaqfad.supabase.co",P_="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImV5bXhwcGhvZmhoZmV1dmFxZmFkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMzNTAwMTIsImV4cCI6MjA2ODkyNjAxMn0.mR-TxkFP6b48BB_s_W7mD7NFV3oEZIweAQk7EefzssY",V=N_(C_,P_),j0=k.createContext(void 0);function E_({children:t}){const[e,s]=k.useState(null),[n,r]=k.useState(!1);k.useEffect(()=>{(async()=>{r(!0);try{const{data:{session:d}}=await V.auth.getSession();if(d!=null&&d.user){const{data:u}=await V.from("profiles").select("*").eq("id",d.user.id).limit(1);u&&u.length>0&&s({id:u[0].id,username:u[0].username,email:u[0].email||"",role:u[0].role||"user",joinedDate:u[0].created_at})}}catch(d){console.error("Session check error:",d)}finally{r(!1)}})()},[]);const i=async(c,d)=>{try{console.log("🔐 LOGIN ATTEMPT - Username:",c);const{data:u,error:h}=await V.from("profiles").select("*").eq("username",c).limit(1);if(h)return console.error("❌ LOGIN FAILED - Database error:",h),!1;if(!u||u.length===0)return console.error("❌ LOGIN FAILED - No profile found for username:",c),!1;const f=u[0];if(!f.email)return console.error("❌ LOGIN FAILED - Profile has no email:",f),!1;console.log("✅ Profile found - Email:",f.email,"Role:",f.role);const{data:m,error:p}=await V.auth.signInWithPassword({email:f.email,password:d});return p?(console.error("❌ SUPABASE AUTH ERROR:",p.message),!1):(s({id:f.id,username:f.username,email:f.email||"",role:f.role||"user",joinedDate:f.created_at}),!0)}catch(u){return console.error("Login error:",u),!1}},a=async(c,d,u,h)=>{var f,m,p,x;try{console.log("📝 SIGNUP ATTEMPT - Username:",c,"Email:",d);const{data:b,error:y}=await V.auth.signUp({email:d,password:u,options:{data:{username:c}}});if(y)return console.error("❌ SUPABASE SIGNUP ERROR:",y.message,"Code:",y.status),!1;if(console.log("✅ SUPABASE SIGNUP SUCCESS:",{user_id:(f=b.user)==null?void 0:f.id,email:(m=b.user)==null?void 0:m.email,email_confirmed:(p=b.user)==null?void 0:p.email_confirmed_at,user_metadata:(x=b.user)==null?void 0:x.user_metadata}),b.user){const{error:g}=await V.from("profiles").insert({id:b.user.id,username:c,email:d,role:h});g?console.error("❌ PROFILE CREATION ERROR:",g.message):console.log("✅ PROFILE CREATED SUCCESSFULLY")}return!0}catch(b){return console.error("Signup error:",b),!1}},l=async()=>{try{console.log("🚪 LOGOUT: Starting logout process...");const{error:c}=await V.auth.signOut();c?console.error("❌ LOGOUT: Supabase signout error:",c):console.log("✅ LOGOUT: Supabase signout successful"),s(null),console.log("✅ LOGOUT: User state cleared - Back to guest mode"),window.location.reload()}catch(c){console.error("❌ LOGOUT: Unexpected error:",c),s(null),window.location.reload()}};return o.jsx(j0.Provider,{value:{user:e,login:i,signup:a,logout:l,loading:n,setUser:s},children:t})}function zt(){const t=k.useContext(j0);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const k0=k.createContext(void 0);function T_({children:t}){const[e,s]=k.useState({isOpen:!1,title:"",message:"",type:"alert"}),n=(c,d)=>new Promise(u=>{s({isOpen:!0,title:c,message:d,type:"confirm",resolve:u})}),r=(c,d)=>new Promise(u=>{s({isOpen:!0,title:c,message:d,type:"alert",resolve:u})}),i=()=>{e.resolve&&e.resolve(!0),s(c=>({...c,isOpen:!1}))},a=()=>{e.resolve&&(e.type==="confirm"?e.resolve(!1):e.resolve()),s(c=>({...c,isOpen:!1}))},l=()=>{a()};return o.jsxs(k0.Provider,{value:{confirm:n,alert:r},children:[t,e.isOpen&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50",onClick:l}),o.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4 z-50",children:o.jsx("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full mx-4 border border-gray-200",children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mr-4",children:o.jsx("span",{className:"text-blue-600 text-xl",children:e.type==="confirm"?"⚠️":"ℹ️"})}),o.jsx("div",{children:o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e.title})})]}),o.jsx("p",{className:"text-gray-600 mb-6",children:e.message}),o.jsxs("div",{className:"flex justify-end space-x-3",children:[e.type==="confirm"&&o.jsx("button",{onClick:a,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),o.jsx("button",{onClick:i,className:`px-4 py-2 rounded-md transition-colors ${e.type==="confirm"?"bg-red-600 text-white hover:bg-red-700":"bg-blue-600 text-white hover:bg-blue-700"}`,children:e.type==="confirm"?"Confirm":"OK"})]})]})})})]})]})}function cn(){const t=k.useContext(k0);if(t===void 0)throw new Error("useConfirmation must be used within a ConfirmationProvider");return t}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var A_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O_=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ae=(t,e)=>{const s=k.forwardRef(({color:n="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:l="",children:c,...d},u)=>k.createElement("svg",{ref:u,...A_,width:r,height:r,stroke:n,strokeWidth:a?Number(i)*24/Number(r):i,className:["lucide",`lucide-${O_(t)}`,l].join(" "),...d},[...e.map(([h,f])=>k.createElement(h,f)),...Array.isArray(c)?c:[c]]));return s.displayName=`${t}`,s};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Po=ae("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cl=ae("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N0=ae("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eo=ae("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=ae("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M_=ae("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S0=ae("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R_=ae("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _u=ae("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L_=ae("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qa=ae("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D_=ae("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ju=ae("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B_=ae("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xf=ae("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I_=ae("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=ae("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $_=ae("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C0=ae("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z_=ae("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F_=ae("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U_=ae("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W_=ae("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ti=ae("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H_=ae("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=ae("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V_=ae("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yf=ae("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fi=ae("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P0=ae("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q_=ae("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E0=ae("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T0=ae("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xi=ae("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bn=ae("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vf=ae("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K_=ae("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A0=ae("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=ae("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y_=ae("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=ae("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O0=ae("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=ae("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=ae("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M0=ae("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function G_({onBackToLogin:t,onSignupSuccess:e}){const[s,n]=k.useState(""),[r,i]=k.useState(""),[a,l]=k.useState(""),[c,d]=k.useState(""),[u,h]=k.useState(""),[f,m]=k.useState(!1),[p,x]=k.useState(!1),{signup:b}=zt(),y=async g=>{if(g.preventDefault(),m(!0),h(""),x(!1),a!==c){h("Passwords do not match."),m(!1);return}if(a.length<6){h("Password must be at least 6 characters long."),m(!1);return}if(s.trim().length<3){h("Username must be at least 3 characters long."),m(!1);return}if(!/^[a-zA-Z0-9_-]+$/.test(s.trim())){h("Username can only contain letters, numbers, hyphens, and underscores."),m(!1);return}await b(s.trim(),r.trim(),a,"user")?x(!0):h("Failed to create account. Username might already be taken or there was a server error. Please try a different username."),m(!1)};return p?o.jsx("div",{className:"w-full max-w-md bg-white rounded-xl shadow-2xl p-8 mx-auto",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx("span",{className:"text-white text-2xl",children:"✓"})}),o.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Account Created!"}),o.jsx("p",{className:"text-gray-600 mb-6",children:"Your account has been successfully created! You can now sign in to access the system."}),o.jsx("button",{onClick:t,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors",children:"Back to Login"})]})}):o.jsxs("div",{className:"w-full max-w-md bg-white rounded-xl shadow-2xl p-8 mx-auto",children:[o.jsxs("div",{className:"flex items-center mb-6",children:[o.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full transition-colors mr-3",children:o.jsx(cl,{size:20})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Create Account"}),o.jsx("p",{className:"text-gray-600",children:"Join the Beyblade community"})]})]}),o.jsxs("form",{onSubmit:y,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700",children:"Username"}),o.jsx("input",{type:"text",id:"username",value:s,onChange:g=>n(g.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,minLength:3,placeholder:"Choose a unique username"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),o.jsx("input",{type:"email",id:"email",value:r,onChange:g=>i(g.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,placeholder:"your.email@example.com"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),o.jsx("input",{type:"password",id:"password",value:a,onChange:g=>l(g.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,minLength:6,placeholder:"At least 6 characters"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),o.jsx("input",{type:"password",id:"confirmPassword",value:c,onChange:g=>d(g.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,minLength:6,placeholder:"Confirm your password"})]}),u&&o.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-md",children:u}),o.jsx("button",{type:"submit",disabled:f,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50",children:f?"Creating Account...":"Create Account"})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsx("p",{className:"text-xs text-gray-500",children:"By creating an account, you agree to participate in tournaments and follow community guidelines. All new accounts start with basic user permissions."})})]})}function R0({onLoginSuccess:t}){const[e,s]=k.useState(""),[n,r]=k.useState(""),[i,a]=k.useState(""),[l,c]=k.useState(!1),[d,u]=k.useState("login"),{login:h}=zt(),f=async m=>{m.preventDefault(),c(!0),a(""),await h(e,n)?(s(""),r(""),a(""),t==null||t()):a("Invalid username or password. Please check your credentials and try again."),c(!1)};return d==="signup"?o.jsx(G_,{onBackToLogin:()=>u("login"),onSignupSuccess:t}):o.jsxs("div",{className:"w-full max-w-md p-8 mx-auto",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"w-16 h-16 bg-gray-900 rounded-lg flex items-center justify-center mx-auto mb-4",children:o.jsx("span",{className:"text-white text-2xl font-bold font-space-grotesk",children:"B"})}),o.jsx("h2",{className:"text-2xl font-bold text-gray-900 font-space-grotesk",children:"OBC Portal"}),o.jsx("p",{className:"text-gray-600 mt-2 font-inter",children:"Sign in to access your account"})]}),o.jsxs("form",{onSubmit:f,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"username",className:"form-label",children:"Username"}),o.jsx("input",{type:"text",id:"username",value:e,onChange:m=>s(m.target.value),className:"input-field w-full",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"form-label",children:"Password"}),o.jsx("input",{type:"password",id:"password",value:n,onChange:m=>r(m.target.value),className:"input-field w-full",required:!0})]}),i&&o.jsx("div",{className:"text-red-600 text-sm font-inter text-center",children:i}),o.jsx("button",{type:"submit",disabled:l,className:"primary-button w-full disabled:opacity-50 text-center",children:l?"Signing in...":"Sign In"})]}),o.jsxs("div",{className:"mt-6",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-0 flex items-center",children:o.jsx("div",{className:"w-full border-t border-gray-300"})}),o.jsx("div",{className:"relative flex justify-center text-sm",children:o.jsx("span",{className:"px-2 bg-white text-gray-500 font-inter",children:"Or"})})]}),o.jsx("div",{className:"mt-6",children:o.jsx("button",{onClick:()=>u("signup"),className:"secondary-button w-full text-center",children:"Create New Account"})})]}),o.jsx("div",{className:"mt-6 text-center px-4",children:o.jsx("p",{className:"text-xs text-gray-500 font-inter",children:"Create an account to participate in tournaments and access all features."})})]})}const Q_=[{id:"dashboard",label:"Dashboard",icon:o.jsx(I_,{size:20}),roles:["user","technical_officer","admin","developer"]},{id:"tournaments",label:"Tournaments",icon:o.jsx(Yt,{size:20}),roles:["user","technical_officer","admin","developer"]},{id:"analytics",label:"Analytics",icon:o.jsx(Eo,{size:20}),roles:["user","technical_officer","admin","developer"]},{id:"inventory",label:"Inventory & Decks",icon:o.jsx(ti,{size:20}),roles:["user","technical_officer","admin","developer"]},{id:"match-tracker",label:"Match Tracker",icon:o.jsx(Dn,{size:20}),roles:["technical_officer","admin","developer"]},{id:"tournament-manager",label:"Tournament Manager",icon:o.jsx(E0,{size:20}),roles:["admin","developer"]},{id:"user-management",label:"User Management",icon:o.jsx(tn,{size:20}),roles:["admin","developer"]},{id:"database",label:"Database",icon:o.jsx(Qa,{size:20}),roles:["developer"]}];function X_({isOpen:t,currentView:e,onViewChange:s,onToggle:n}){const{user:r,logout:i}=zt(),[a,l]=Ke.useState(!1),c=Q_.filter(u=>r?u.roles.includes(r.role||"user"):!u.requiresAuth&&u.roles.includes("user")),d=async()=>{await i(),n()};return k.useEffect(()=>{const u=h=>{window.innerWidth>768&&(h.clientX<=20&&!t||h.clientX>200&&t)&&n()};return window.addEventListener("mousemove",u),()=>window.removeEventListener("mousemove",u)},[t,n]),k.useEffect(()=>{const u=h=>{if(window.innerWidth<=768&&t){const f=document.getElementById("app-sidebar"),m=document.getElementById("sidebar-toggle-btn");f&&!f.contains(h.target)&&m&&!m.contains(h.target)&&n()}};return t&&document.addEventListener("click",u),()=>document.removeEventListener("click",u)},[t,n]),o.jsxs(o.Fragment,{children:[t&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-30 z-30"}),o.jsxs("aside",{id:"app-sidebar",className:`fixed left-0 top-0 z-50 h-screen flex flex-col 
        transition-transform duration-200 ease-in-out
        ${t?"translate-x-0":"-translate-x-full"} 
        bg-white border-r border-gray-200 w-64`,style:{pointerEvents:"auto"},children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"w-10 h-10 bg-gray-900 rounded-lg flex items-center justify-center font-space-grotesk font-bold text-lg text-white",children:"B"}),t&&o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl font-space-grotesk font-bold text-gray-900",children:"OBC Portal"}),o.jsx("p",{className:"text-xs text-gray-500 font-inter",children:"Beyblade Community"})]})]}),t&&o.jsx("button",{onClick:u=>{u.stopPropagation(),n()},className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:o.jsx(kt,{size:20})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-4 py-6",children:o.jsx("ul",{className:"space-y-2",children:c.map(u=>o.jsx("li",{children:o.jsxs("button",{onClick:()=>s(u.id),className:e===u.id?"sidebar-item-active":"sidebar-item",children:[o.jsx("div",{className:"transition-colors",children:u.icon}),t&&o.jsx("span",{className:"ml-3 font-inter",children:u.label})]})},u.id))})}),o.jsx("div",{className:"px-4 border-t border-gray-200 py-4",children:r&&!r.id.startsWith("guest-")?o.jsxs("button",{onClick:d,className:"sidebar-item w-full text-red-600 hover:text-red-700 hover:bg-red-50",children:[o.jsx("div",{className:"transition-colors",children:o.jsx(C0,{size:20})}),t&&o.jsx("span",{className:"ml-3 font-inter",children:"Logout"})]}):o.jsxs("button",{onClick:()=>l(!0),className:"sidebar-item w-full text-blue-600 hover:text-blue-700 hover:bg-blue-50",children:[o.jsx("div",{className:"transition-colors",children:o.jsx($_,{size:20})}),t&&o.jsx("span",{className:"ml-3 font-inter",children:"Login"})]})}),t&&o.jsx("div",{className:"px-2 pb-4",children:o.jsxs("div",{className:"bg-gray-100 rounded-lg p-4 border border-gray-200",children:[o.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[o.jsx("div",{className:"w-6 h-6 bg-blue-600 rounded flex items-center justify-center",children:o.jsx("span",{className:"text-xs text-white",children:"J"})}),o.jsx("h3",{className:"font-space-grotesk font-semibold text-sm text-gray-900",children:"Created by Jedynsay"})]}),o.jsx("p",{className:"text-xs text-gray-600 font-inter mb-2",children:"Powered by Supabase"})]})})]}),a&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"modal-overlay",style:{zIndex:50},onClick:()=>l(!1)}),o.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4 pointer-events-none z-50",children:o.jsxs("div",{className:"relative pointer-events-auto bg-white rounded-xl shadow-2xl max-w-md w-full mx-4 max-h-[90vh]",children:[o.jsx(R0,{onLoginSuccess:()=>l(!1)}),o.jsx("button",{onClick:()=>l(!1),className:"absolute top-4 right-4 w-8 h-8 bg-gray-100 hover:bg-gray-200 rounded-full flex items-center justify-center text-gray-600 hover:text-gray-800 transition-colors",children:o.jsx(kt,{size:16})})]})})]})]})}function J_({user:t,onViewChange:e,onLoginClick:s,onLogout:n}){const[r,i]=k.useState(!1);return o.jsx("section",{className:"relative overflow-hidden bg-slate-950 border-b border-slate-800",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-16 relative",children:[t&&!t.id.startsWith("guest-")&&o.jsx("div",{className:"absolute top-4 right-4",children:o.jsxs("div",{className:"relative",children:[o.jsxs("button",{onClick:()=>i(!r),className:"flex items-center gap-3 bg-slate-800/90 rounded-lg px-4 py-2 hover:bg-slate-700 transition-colors",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center font-bold",children:t.username.charAt(0).toUpperCase()}),o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold",children:t.username}),o.jsx("p",{className:"text-xs text-slate-400",children:t.role})]})]}),r&&o.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-slate-800 border border-slate-700 rounded-lg shadow-lg",children:[o.jsxs("button",{className:"w-full flex items-center gap-2 px-4 py-2 hover:bg-slate-700",onClick:()=>i(!1),children:[o.jsx(E0,{size:16})," Settings"]}),o.jsxs("button",{className:"w-full flex items-center gap-2 px-4 py-2 hover:bg-slate-700 text-red-400",onClick:()=>{i(!1),n()},children:[o.jsx(C0,{size:16})," Logout"]})]})]})}),!t||t.id.startsWith("guest-")?o.jsx("div",{className:"absolute top-4 right-4",children:o.jsx("button",{onClick:s,className:"bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg font-semibold",children:"Login"})}):null,o.jsxs("div",{className:"max-w-2xl",children:[o.jsxs("h1",{className:"text-5xl font-bold leading-tight",children:["Welcome back, ",o.jsx("span",{className:"text-blue-400",children:t?t.username:"Blader"})]}),o.jsx("p",{className:"mt-4 text-lg text-slate-400",children:"Create decks. Register in tournaments. Dominate the leaderboards. Let it rip."}),o.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row gap-4",children:[o.jsxs("button",{onClick:()=>e==null?void 0:e("tournaments"),className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 px-6 py-3 rounded-lg font-semibold",children:[o.jsx(Yt,{size:20})," Check Tournaments ",o.jsx(N0,{size:16})]}),o.jsxs("button",{onClick:()=>e==null?void 0:e("inventory"),className:"flex items-center gap-2 bg-slate-800 hover:bg-slate-700 px-6 py-3 rounded-lg border border-slate-600",children:[o.jsx(Xs,{size:20})," Deck Builder ",o.jsx(S0,{size:16})]})]})]})]})})}function Z_({stats:t,upcomingTournaments:e,deckPresets:s,onViewChange:n}){return o.jsxs("section",{className:"max-w-7xl mx-auto px-6 py-12 grid gap-6 sm:grid-cols-2 lg:grid-cols-4",children:[o.jsx(ja,{onClick:()=>n==null?void 0:n("tournaments"),icon:o.jsx(Yt,{}),title:"Next Tournament",accent:"blue",children:e.length>0?o.jsxs(o.Fragment,{children:[o.jsx("p",{className:"font-semibold",children:e[0].name}),o.jsx("p",{className:"text-sm text-slate-400",children:new Date(e[0].tournament_date).toLocaleDateString()}),o.jsx("p",{className:"text-sm text-slate-400",children:e[0].location})]}):o.jsx("p",{className:"text-slate-400",children:"No upcoming tournaments"})}),o.jsxs(ja,{onClick:()=>n==null?void 0:n("analytics"),icon:o.jsx(Y_,{}),title:"Meta Analysis",accent:"purple",children:[o.jsx("p",{className:"text-sm text-slate-400",children:"Latest tier rankings"}),o.jsxs("span",{className:"flex items-center gap-1 text-purple-400",children:["View Stats ",o.jsx(N0,{size:14})]})]}),o.jsx(ja,{onClick:()=>alert("News coming soon!"),icon:o.jsx(W_,{}),title:"News & Updates",accent:"green",children:o.jsx("p",{className:"text-sm text-slate-400",children:"Stay informed on events"})}),o.jsx(ja,{onClick:()=>n==null?void 0:n("inventory"),icon:o.jsx(Xs,{}),title:"Your Decks",accent:"orange",children:o.jsxs("p",{className:"text-sm text-slate-400",children:[s.length," saved presets"]})})]})}function ja({onClick:t,icon:e,title:s,children:n,accent:r}){const i={blue:"bg-blue-600",purple:"bg-purple-600",green:"bg-green-600",orange:"bg-orange-600"};return o.jsxs("button",{onClick:t,className:"bg-slate-900 border border-slate-800 rounded-lg p-6 text-left hover:border-blue-500 transition-all",children:[o.jsx("div",{className:`w-10 h-10 ${i[r]} rounded-lg flex items-center justify-center mb-4`,children:e}),o.jsx("h3",{className:"font-bold text-lg mb-2",children:s}),n]})}function e1({topPlayers:t,currentTournamentFilter:e,setTournamentFilter:s,tournaments:n,recentMatches:r}){var l,c,d,u,h;const[i,a]=k.useState(0);return k.useEffect(()=>{if(t.length>1){const f=setInterval(()=>{a(m=>(m+1)%t.length)},5e3);return()=>clearInterval(f)}},[t.length]),o.jsxs("section",{className:"max-w-7xl mx-auto px-6 py-12",children:[o.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Community Champions"}),t.length>0&&o.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-lg p-8 text-center mb-8",children:[o.jsxs("div",{className:"w-20 h-20 bg-yellow-400 text-black rounded-full flex items-center justify-center mx-auto text-2xl font-bold relative",children:[(l=t[i])==null?void 0:l.name.charAt(0),o.jsx(L_,{className:"absolute -top-3 -right-3 text-yellow-400",size:20})]}),o.jsx("h3",{className:"mt-4 text-xl font-semibold",children:(c=t[i])==null?void 0:c.name}),o.jsxs("div",{className:"mt-2 flex justify-center gap-6 text-sm text-slate-400",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-blue-400 font-bold",children:(d=t[i])==null?void 0:d.wins})," Wins"]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-purple-400 font-bold",children:(u=t[i])==null?void 0:u.tournaments})," Tournaments"]}),o.jsxs("div",{children:[o.jsxs("span",{className:"text-green-400 font-bold",children:[(h=t[i])==null?void 0:h.winRate,"%"]})," Win Rate"]})]})]}),o.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-lg p-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsxs("h3",{className:"font-bold flex items-center gap-2",children:[o.jsx(H_,{size:18,className:"text-green-400"})," Live Results"]}),o.jsxs("select",{value:e,onChange:f=>s(f.target.value),className:"bg-slate-800 border border-slate-700 rounded px-2 py-1 text-sm",children:[o.jsx("option",{value:"all",children:"All Tournaments"}),n.map(f=>o.jsx("option",{value:f.id,children:f.name},f.id))]})]}),r.length===0?o.jsx("p",{className:"text-slate-500 text-sm",children:"No matches found."}):o.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:r.slice(0,5).map((f,m)=>{var p;return o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-white",children:f.winner_name}),o.jsx("span",{className:"text-slate-400",children:"defeated"}),o.jsx("span",{className:"text-slate-300",children:f.winner_name===f.player1_name?f.player2_name:f.player1_name}),o.jsx("span",{className:"text-slate-500",children:((p=f.outcome)==null?void 0:p.split(" (")[0])||"Victory"})]},m)})})]})]})}function t1(){return o.jsx("footer",{className:"bg-slate-950 border-t border-slate-800 py-6 mt-12",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-6 flex flex-col sm:flex-row justify-between text-slate-500 text-sm",children:[o.jsx("div",{children:"Created by Jedynsay • Powered by Supabase"}),o.jsx("div",{className:"mt-2 sm:mt-0",children:"System Online"}),o.jsx("div",{children:"OBC Portal beta v0.3"})]})})}function s1({onClose:t}){return o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"relative bg-white rounded-lg p-6 w-full max-w-md",children:[o.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-600 hover:text-black",children:o.jsx(kt,{size:20})}),o.jsx(R0,{onLoginSuccess:t})]})})}function bf({onViewChange:t}){const{user:e,logout:s}=zt(),[n,r]=k.useState(!1),[i,a]=k.useState({totalTournaments:0,activePlayers:0,upcomingEvents:0,completedMatches:0}),[l,c]=k.useState([]),[d,u]=k.useState([]),[h,f]=k.useState([]),[m,p]=k.useState([]),[x,b]=k.useState([]),[y,g]=k.useState(!0),[v,w]=k.useState("all");k.useEffect(()=>{_(),e&&!e.id.startsWith("guest-")&&A()},[e]);const _=async()=>{try{const[S,O,P]=await Promise.all([V.from("tournaments").select("*"),V.from("profiles").select("*",{count:"exact",head:!0}),V.from("match_results").select("*",{count:"exact",head:!0})]),R=S.data||[];b(R);const U=R.filter(K=>K.status==="upcoming").slice(0,3);c(U),a({totalTournaments:R.length,activePlayers:O.count||0,upcomingEvents:R.filter(K=>K.status==="upcoming").length,completedMatches:P.count||0}),await j(),await E()}catch(S){console.error(S)}finally{g(!1)}},j=async()=>{const{data:S}=await V.from("match_results").select("player1_name, player2_name, winner_name");if(!S)return;const O={};S.forEach(R=>{[R.player1_name,R.player2_name].forEach(U=>{U&&(O[U]||(O[U]={wins:0,matches:0}),O[U].matches++,R.winner_name===U&&O[U].wins++)})});const P=Object.entries(O).map(([R,U])=>({name:R,wins:U.wins,tournaments:Math.ceil(U.matches/10),winRate:Math.round(U.wins/U.matches*100)})).sort((R,U)=>U.winRate-R.winRate).slice(0,5);u(P)},E=async()=>{let S=V.from("match_results").select("player1_name, player2_name, player1_beyblade, player2_beyblade, winner_name, outcome, submitted_at, tournament_id").order("submitted_at",{ascending:!1}).limit(10);v!=="all"&&(S=S.eq("tournament_id",v));const{data:O}=await S;p(O||[])},A=async()=>{if(!e||e.id.startsWith("guest-"))return;const{data:S}=await V.from("deck_presets").select("*").eq("user_id",e.id);f(S||[])};return y?o.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center",children:o.jsxs("div",{className:"text-center text-slate-300",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-500 border-t-transparent mx-auto mb-4"}),"Letting it rip..."]})}):o.jsxs("div",{className:"min-h-screen bg-slate-950 text-white",children:[o.jsx(J_,{user:e,onViewChange:t,onLoginClick:()=>r(!0),onLogout:s}),o.jsx(Z_,{stats:i,upcomingTournaments:l,deckPresets:h,onViewChange:t}),o.jsx(e1,{topPlayers:d,currentTournamentFilter:v,setTournamentFilter:w,tournaments:x,recentMatches:m}),o.jsx(t1,{}),n&&o.jsx(s1,{onClose:()=>r(!1)})]})}function n1(t,e){const{user:s}=zt(),{alert:n}=cn(),[r,i]=k.useState(""),[a,l]=k.useState(t.is_free?"free":"cash"),[c,d]=k.useState([{id:"1",bladeLine:"",parts:{}}]),[u,h]=k.useState([]),[f,m]=k.useState(""),[p,x]=k.useState({blades:[],ratchets:[],bits:[],lockchips:[],assistBlades:[]}),[b,y]=k.useState(!1),[g,v]=k.useState(null),w=async()=>{y(!0),v(null);try{const[P,R,U,K,T]=await Promise.all([V.from("beypart_blade").select("*"),V.from("beypart_ratchet").select("*"),V.from("beypart_bit").select("*"),V.from("beypart_lockchip").select("*"),V.from("beypart_assistblade").select("*")]);if(P.error)throw P.error;if(R.error)throw R.error;if(U.error)throw U.error;if(K.error)throw K.error;if(T.error)throw T.error;x({blades:P.data||[],ratchets:R.data||[],bits:U.data||[],lockchips:K.data||[],assistBlades:T.data||[]})}catch(P){console.error(P),v("Failed to load Beyblade parts. Please try again.")}finally{y(!1)}},_=async()=>{if(!(!s||s.id.startsWith("guest-")))try{const{data:P,error:R}=await V.from("deck_presets").select("*").eq("user_id",s.id).order("updated_at",{ascending:!1});if(R)throw R;h(P||[])}catch(P){console.error(P)}},j=P=>{const R=u.find(K=>K.id===P);if(!R)return;const U=R.beyblades.slice(0,t.beyblades_per_player).map((K,T)=>({id:(T+1).toString(),bladeLine:K.blade_line,parts:K.parts}));d(U),m("")},E=async()=>{var P;if(!r.trim()){await n("Missing Information","Please enter your player name.");return}try{const U=(P=(await V.from("tournaments").select("is_free").eq("id",t.id).single()).data)!=null&&P.is_free?"confirmed":"unpaid",{data:K,error:T}=await V.from("tournament_registrations").insert({tournament_id:t.id,player_name:r.trim(),payment_mode:a,status:"confirmed",payment_status:U}).select().single();if(T)throw T;for(const B of c){const H=S(B),{data:W,error:q}=await V.from("tournament_beyblades").insert({registration_id:K.id,beyblade_name:H,blade_line:B.bladeLine}).select().single();if(q)throw q;const X=Object.entries(B.parts).map(([re,M])=>({beyblade_id:W.id,part_type:re,part_name:A(M,re),part_data:M})),{error:Z}=await V.from("tournament_beyblade_parts").insert(X);if(Z)throw Z}await n("Registration Successful",`You have registered ${r} for ${t.name}!`),e()}catch(R){console.error(R),await n("Registration Failed",R.message||"Unknown error occurred.")}},A=(P,R)=>{switch(R){case"Blade":case"Main Blade":return P.Blades;case"Ratchet":return P.Ratchet;case"Bit":return`${P.Bit} (${P.Shortcut})`;case"Lockchip":return P.Lockchip;case"Assist Blade":return`${P["Assist Blade Name"]} (${P["Assist Blade"]})`;default:return""}},S=P=>{if(!O(P.bladeLine).every(U=>P.parts[U]))return"";if(P.bladeLine==="Custom"){const{Lockchip:U,"Main Blade":K,"Assist Blade":T,Ratchet:B,Bit:H}=P.parts;return`${(U==null?void 0:U.Lockchip)||""}${(K==null?void 0:K.Blades)||""} ${(T==null?void 0:T["Assist Blade"])||""}${(B==null?void 0:B.Ratchet)||""}${(H==null?void 0:H.Shortcut)||""}`}else{const{Blade:U,Ratchet:K,Bit:T}=P.parts;return`${(U==null?void 0:U.Blades)||""} ${(K==null?void 0:K.Ratchet)||""}${(T==null?void 0:T.Shortcut)||""}`}},O=P=>{switch(P){case"Basic":case"Unique":case"X-Over":return["Blade","Ratchet","Bit"];case"Custom":return["Lockchip","Main Blade","Assist Blade","Ratchet","Bit"];default:return[]}};return k.useEffect(()=>{w(),_()},[]),{playerName:r,setPlayerName:i,paymentMode:a,setPaymentMode:l,beyblades:c,setBeyblades:d,deckPresets:u,selectedPreset:f,setSelectedPreset:m,loadPreset:j,partsData:p,isLoadingParts:b,partsError:g,fetchPartsData:w,handleSubmit:E}}function r1(t,e,s){const[n,r]=k.useState([]),[i,a]=k.useState({duplicateParts:[],duplicatePlayerName:!1}),l=async()=>{try{const{data:m,error:p}=await V.from("tournament_registrations").select("player_name").eq("tournament_id",s.id).eq("status","confirmed");if(p)throw p;r((m||[]).map(x=>x.player_name.toLowerCase().trim()))}catch(m){console.error("Error fetching player names",m)}},c=m=>{const p=m.toLowerCase().trim(),x=n.includes(p);return a(b=>({...b,duplicatePlayerName:x})),!x},d=()=>{const m=[],p=new Map;return e.forEach((x,b)=>{u(x.bladeLine).forEach(g=>{const v=x.parts[g];if(!v)return;const w=h(v,g),_=`${g}:${w}`;if(p.has(_)){const j=p.get(_);m.push(`${w} (${g}) is used in both Beyblade ${j.beybladeIndex+1} and Beyblade ${b+1}`)}else p.set(_,{beybladeIndex:b,partType:g})})}),a(x=>({...x,duplicateParts:m})),m.length===0},u=m=>{switch(m){case"Basic":case"Unique":case"X-Over":return["Blade","Ratchet","Bit"];case"Custom":return["Lockchip","Main Blade","Assist Blade","Ratchet","Bit"];default:return[]}},h=(m,p)=>{switch(p){case"Blade":case"Main Blade":return m.Blades;case"Ratchet":return m.Ratchet;case"Bit":return`${m.Bit} (${m.Shortcut})`;case"Lockchip":return m.Lockchip;case"Assist Blade":return`${m["Assist Blade Name"]} (${m["Assist Blade"]})`;default:return""}},f=()=>!t.trim()||i.duplicatePlayerName||i.duplicateParts.length>0?!1:e.every(m=>m.bladeLine?u(m.bladeLine).every(x=>m.parts[x]):!1);return k.useEffect(()=>{t.trim()?c(t):a(m=>({...m,duplicatePlayerName:!1}))},[t,n]),k.useEffect(()=>{d()},[e]),k.useEffect(()=>{l()},[s.id]),{validationErrors:i,isFormValid:f,validatePlayerName:c,validateBeybladeConfiguration:d}}function i1({playerName:t,setPlayerName:e,paymentMode:s,setPaymentMode:n,tournament:r,validationErrors:i}){return o.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 sm:p-6",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx(O0,{className:"text-blue-600 mr-2",size:20}),o.jsx("h3",{className:"text-lg font-semibold text-blue-900",children:"Player Information"})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"playerName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Player Name *"}),o.jsx("input",{type:"text",id:"playerName",value:t,onChange:a=>e(a.target.value),placeholder:"Enter your player name",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),i.duplicatePlayerName&&o.jsx("div",{className:"mt-1 text-xs text-red-600",children:"⚠ This player name is already registered"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"paymentMode",className:"block text-sm font-medium text-gray-700 mb-1",children:"Mode of Payment *"}),o.jsxs("select",{id:"paymentMode",value:s,onChange:a=>n(a.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.is_free&&o.jsx("option",{value:"free",children:"Free Entry"}),o.jsx("option",{value:"cash",children:"Cash"}),o.jsx("option",{value:"gcash",children:"GCash"}),o.jsx("option",{value:"bank_transfer",children:"Bank Transfer"})]})]})]})]})}function a1({deckPresets:t,selectedPreset:e,setSelectedPreset:s,loadPreset:n}){var r,i,a;return o.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 sm:p-6",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx(Xs,{className:"text-green-600 mr-2",size:20}),o.jsx("h3",{className:"text-lg font-semibold text-green-900",children:"Quick Setup with Deck Presets"})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Deck Preset"}),o.jsxs("select",{value:e,onChange:l=>s(l.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-green-500",children:[o.jsx("option",{value:"",children:"-- Select a preset --"}),t.map(l=>o.jsxs("option",{value:l.id,children:[l.name," (",l.beyblades.length," Beyblades)"]},l.id))]})]}),o.jsx("div",{className:"flex items-end",children:o.jsx("button",{type:"button",onClick:()=>e&&n(e),disabled:!e,className:"w-full bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors disabled:opacity-50 text-sm",children:"Load Preset"})})]}),e&&o.jsx("div",{className:"mt-4 p-3 bg-white rounded-lg border border-green-200",children:o.jsxs("div",{className:"text-sm text-green-800",children:[o.jsx("strong",{children:"Preview:"}),(r=t.find(l=>l.id===e))==null?void 0:r.beyblades.slice(0,3).map((l,c)=>o.jsxs("div",{className:"font-mono text-xs mt-1",children:["• ",l.name||`Beyblade ${c+1}`]},c)),((i=t.find(l=>l.id===e))==null?void 0:i.beyblades.length)>3&&o.jsxs("div",{className:"text-xs mt-1 text-green-600",children:["+",((a=t.find(l=>l.id===e))==null?void 0:a.beyblades.length)-3," more..."]})]})})]})}function o1({stats:t}){const e=[{key:"attack",label:"Attack",color:"bg-red-500",icon:o.jsx(M0,{size:12,className:"text-red-500"}),max:200},{key:"defense",label:"Defense",color:"bg-blue-500",icon:o.jsx(xi,{size:12,className:"text-blue-500"}),max:200},{key:"stamina",label:"Stamina",color:"bg-green-500",icon:o.jsx(_u,{size:12,className:"text-green-500"}),max:200},{key:"dash",label:"Dash",color:"bg-yellow-500",icon:o.jsx(Po,{size:12,className:"text-yellow-500"}),max:50},{key:"burstRes",label:"Burst Res",color:"bg-purple-500",icon:o.jsx(T0,{size:12,className:"text-purple-500"}),max:80}];return o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mt-4",children:[o.jsxs("h5",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center",children:[o.jsx(Po,{size:16,className:"mr-2"}),"Combined Stats"]}),o.jsx("div",{className:"space-y-2",children:e.map(({key:s,label:n,color:r,icon:i,max:a})=>o.jsxs("div",{className:"flex items-center",children:[o.jsxs("div",{className:"flex items-center w-20 text-xs font-medium text-gray-600",children:[i,o.jsx("span",{className:"ml-1",children:n})]}),o.jsx("div",{className:"flex-1 mx-3",children:o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:o.jsx("div",{className:`h-2 rounded-full ${r}`,style:{width:`${Math.min(t[s]/a*100,100)}%`}})})}),o.jsx("div",{className:"w-8 text-xs font-bold text-gray-700 text-right",children:t[s]})]},s))})]})}function l1({beyblade:t,index:e,beyblades:s,setBeyblades:n,partsData:r,validationErrors:i}){const a=p=>{switch(p){case"Basic":case"Unique":case"X-Over":return["Blade","Ratchet","Bit"];case"Custom":return["Lockchip","Main Blade","Assist Blade","Ratchet","Bit"];default:return[]}},l=(p,x)=>{let b=[];switch(x){case"Blade":b=r.blades.filter(y=>y.Line===p);break;case"Main Blade":b=r.blades.filter(y=>y.Line==="Custom");break;case"Ratchet":b=r.ratchets;break;case"Bit":b=r.bits;break;case"Lockchip":b=r.lockchips;break;case"Assist Blade":b=r.assistBlades;break}return b.sort((y,g)=>c(y,x).localeCompare(c(g,x)))},c=(p,x)=>{switch(x){case"Blade":case"Main Blade":return p.Blades;case"Ratchet":return p.Ratchet;case"Bit":return`${p.Bit} (${p.Shortcut})`;case"Lockchip":return p.Lockchip;case"Assist Blade":return`${p["Assist Blade Name"]} (${p["Assist Blade"]})`;default:return""}},d=(p,x)=>{n(s.map(b=>b.id===t.id?{...b,bladeLine:x,parts:{}}:b))},u=(p,x)=>{n(s.map(b=>b.id===t.id?{...b,parts:{...b.parts,[p]:x}}:b))},h=()=>{s.length>1&&n(s.filter(p=>p.id!==t.id))},f=()=>{if(!a(t.bladeLine).every(x=>t.parts[x]))return"";if(t.bladeLine==="Custom"){const{Lockchip:x,"Main Blade":b,"Assist Blade":y,Ratchet:g,Bit:v}=t.parts;return`${(x==null?void 0:x.Lockchip)||""}${(b==null?void 0:b.Blades)||""} ${(y==null?void 0:y["Assist Blade"])||""}${(g==null?void 0:g.Ratchet)||""}${(v==null?void 0:v.Shortcut)||""}`}else{const{Blade:x,Ratchet:b,Bit:y}=t.parts;return`${(x==null?void 0:x.Blades)||""} ${(b==null?void 0:b.Ratchet)||""}${(y==null?void 0:y.Shortcut)||""}`}},m=()=>Object.values(t.parts).reduce((p,x)=>(x&&(p.attack+=x.Attack||0,p.defense+=x.Defense||0,p.stamina+=x.Stamina||0,p.dash+=x.Dash||0,p.burstRes+=x["Burst Res"]||0),p),{attack:0,defense:0,stamina:0,dash:0,burstRes:0});return o.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 sm:p-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsxs("h3",{className:"text-lg font-semibold",children:["Beyblade #",e+1]}),s.length>1&&o.jsx("button",{onClick:h,className:"p-2 text-red-600 hover:bg-red-50 rounded-full",children:o.jsx(as,{size:16})})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Blade Line *"}),o.jsxs("select",{value:t.bladeLine,onChange:p=>d("bladeLine",p.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.jsx("option",{value:"",children:"Select Blade Line"}),o.jsx("option",{value:"Basic",children:"Basic"}),o.jsx("option",{value:"Unique",children:"Unique"}),o.jsx("option",{value:"Custom",children:"Custom"}),o.jsx("option",{value:"X-Over",children:"X-Over"})]})]}),t.bladeLine&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Generated Name"}),o.jsx("div",{className:"border border-gray-200 rounded-md px-3 py-2 bg-gray-50 text-sm font-mono",children:f()||"Select all parts to generate name"})]})]}),t.bladeLine&&o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:a(t.bladeLine).map(p=>o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium mb-1",children:[p," *"]}),o.jsxs("select",{value:t.parts[p]?JSON.stringify(t.parts[p]):"",onChange:x=>x.target.value&&u(p,JSON.parse(x.target.value)),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.jsxs("option",{value:"",children:["Select ",p]}),l(t.bladeLine,p).map((x,b)=>o.jsx("option",{value:JSON.stringify(x),children:c(x,p)},b))]}),t.parts[p]&&i.duplicateParts.some(x=>x.includes(c(t.parts[p],p)))&&o.jsx("div",{className:"mt-1 text-xs text-red-600",children:"⚠ This part is used in another Beyblade"})]},p))}),t.bladeLine&&Object.keys(t.parts).length>0&&o.jsx(o1,{stats:m()})]})}function c1({tournament:t,onClose:e}){const{user:s}=zt();cn();const{playerName:n,setPlayerName:r,paymentMode:i,setPaymentMode:a,beyblades:l,setBeyblades:c,deckPresets:d,selectedPreset:u,setSelectedPreset:h,loadPreset:f,partsData:m,isLoadingParts:p,partsError:x,fetchPartsData:b,handleSubmit:y}=n1(t,e),{validationErrors:g,isFormValid:v}=r1(n,l,t);return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-2 sm:p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-full sm:max-w-2xl lg:max-w-4xl max-h-[90vh] overflow-y-auto relative",children:[p&&o.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center z-10 rounded-lg",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading Beyblade parts..."})]})}),o.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-4 sm:px-6 py-3 flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Tournament Registration"}),o.jsx("p",{className:"text-gray-600",children:t.name})]}),o.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:o.jsx(kt,{size:20})})]}),o.jsxs("div",{className:"p-4 sm:p-6 space-y-6",children:[x&&o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[o.jsx("p",{className:"text-red-700 text-sm",children:x}),o.jsx("button",{onClick:b,className:"text-sm underline text-red-600",children:"Try Again"})]}),o.jsx(i1,{playerName:n,setPlayerName:r,paymentMode:i,setPaymentMode:a,tournament:t,validationErrors:g}),!(s!=null&&s.id.startsWith("guest-"))&&d.length>0&&o.jsx(a1,{deckPresets:d,selectedPreset:u,setSelectedPreset:h,loadPreset:f}),l.map((w,_)=>o.jsx(l1,{beyblade:w,index:_,beyblades:l,setBeyblades:c,partsData:m,validationErrors:g},w.id)),l.length<t.beyblades_per_player&&o.jsxs("button",{onClick:()=>c([...l,{id:Date.now().toString(),bladeLine:"",parts:{}}]),className:"w-full border-2 border-dashed border-gray-300 rounded-lg p-4 text-gray-600 hover:border-blue-400 hover:text-blue-600 flex items-center justify-center space-x-2",children:[o.jsx(En,{size:20}),o.jsx("span",{children:"Add Another Beyblade"})]}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[o.jsx("button",{onClick:e,className:"px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),o.jsx("button",{onClick:y,disabled:!v()||p,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:o.jsx("span",{children:"Register"})})]})]})]})})}function d1(){zt();const{alert:t}=cn(),[e,s]=k.useState("all"),[n,r]=k.useState(null),[i,a]=k.useState([]),[l,c]=k.useState(!0);Ke.useEffect(()=>{(async()=>{try{const{data:m,error:p}=await V.from("tournaments").select("*").order("tournament_date",{ascending:!0});if(p)throw p;a(m||[])}catch(m){console.error("Error fetching tournaments:",m),a([])}finally{c(!1)}})()},[]);const d=i.filter(f=>e==="all"||f.status===e),u=(f,m)=>{console.log("Tournament registration:",{playerName:f,beyblades:m}),t("Registration Complete",`Successfully registered ${f} with ${m.length} Beyblades for the tournament!`),r(null)},h=f=>{switch(f){case"upcoming":return"tournament-status-upcoming";case"active":return"tournament-status-active";case"completed":return"tournament-status-completed";default:return"tournament-status-completed"}};return o.jsx("div",{className:"page-container",children:o.jsxs("div",{className:"content-wrapper",children:[o.jsxs("div",{className:"page-header",children:[o.jsx("h1",{className:"page-title",children:"Tournaments"}),o.jsx("p",{className:"page-subtitle",children:"Join the ultimate Beyblade battles"})]}),o.jsx("div",{className:"mb-8",children:o.jsx("div",{className:"filter-tabs",children:["all","upcoming","active","completed"].map(f=>o.jsx("button",{onClick:()=>s(f),className:`filter-tab capitalize ${e===f?"filter-tab-active":"filter-tab-inactive"}`,children:f},f))})}),l?o.jsxs("div",{className:"empty-state",children:[o.jsx("div",{className:"loading-spinner h-12 w-12 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading tournaments..."})]}):d.length===0?o.jsxs("div",{className:"empty-state",children:[o.jsx(Yt,{className:"empty-icon"}),o.jsx("h3",{className:"empty-title",children:"No tournaments found"}),o.jsx("p",{className:"empty-description",children:"Check back later for upcoming events"})]}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(f=>o.jsxs("div",{className:"card p-6 hover:shadow-lg transition-all duration-200",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsx("h3",{className:"text-xl font-space-grotesk font-bold text-gray-900",children:f.name}),o.jsx("span",{className:`badge capitalize ${h(f.status)}`,children:f.status})]}),o.jsx("p",{className:"text-gray-600 mb-6 font-inter",children:f.description}),o.jsxs("div",{className:"space-y-3 mb-6",children:[o.jsxs("div",{className:"flex items-center text-gray-600 font-inter",children:[o.jsx(Dn,{size:16,className:"mr-2"}),new Date(f.tournament_date).toLocaleDateString()]}),o.jsxs("div",{className:"flex items-center text-gray-600 font-inter",children:[o.jsx(F_,{size:16,className:"mr-2"}),f.location]}),o.jsxs("div",{className:"flex items-center text-gray-600 font-inter",children:[o.jsx(tn,{size:16,className:"mr-2"}),f.max_participants===999999?`${f.current_participants} participants`:`${f.current_participants}/${f.max_participants} participants`]}),f.prize_pool&&o.jsxs("div",{className:"flex items-center text-gray-600 font-inter",children:[o.jsx(Yt,{size:16,className:"mr-2"}),"Prize Pool: ",f.prize_pool]}),o.jsxs("div",{className:"flex items-center text-gray-600 font-inter",children:[o.jsx(_u,{size:16,className:"mr-2"}),"Registration ends: ",new Date(f.registration_deadline).toLocaleDateString()]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsxs("div",{className:"flex justify-between text-gray-600 font-inter mb-2",children:[o.jsx("span",{children:"Registration Progress"}),o.jsxs("span",{children:[Math.round(f.current_participants/f.max_participants*100),"%"]})]}),o.jsx("div",{className:"progress-bar",children:o.jsx("div",{className:"progress-fill",style:{width:`${f.current_participants/f.max_participants*100}%`}})})]}),f.status==="upcoming"&&o.jsx("button",{onClick:()=>r(f.id),disabled:f.current_participants>=f.max_participants,className:"primary-button w-full disabled:opacity-50 disabled:cursor-not-allowed",children:f.current_participants>=f.max_participants?"Tournament Full":"Register for Tournament"})]},f.id))}),n&&o.jsx(c1,{tournament:d.find(f=>f.id===n),onClose:()=>r(null),onSubmit:u})]})})}function wf(t,e,s=1.96){if(e===0)return 0;const n=t/e,r=1+s*s/e,i=n+s*s/(2*e),a=s*Math.sqrt((n*(1-n)+s*s/(4*e))/e);return(i-a)/r}function u1(t,e,s){console.log(`⚙️ PARSER: Attempting ${e} parsing for: "${t}"`);let n=t;const r=L0(n,s.bits);if(!r)return console.log(`❌ PARSER: ${e} parsing failed - no bit found`),null;n=n.slice(0,n.length-r.bitName.length).trim(),console.log(`⚙️ PARSER: After bit removal: "${n}"`);const i=D0(n,s.ratchets);if(!i)return console.log(`❌ PARSER: ${e} parsing failed - no ratchet found`),null;n=n.slice(0,n.length-i.ratchetName.length).trim(),console.log(`⚙️ PARSER: After ratchet removal: "${n}"`),console.log(`🔍 PARSER: Looking for ${e} blade: "${n}"`);const a=B0(n,s.blades.filter(c=>c.Line===e));if(!a)return console.log(`❌ PARSER: ${e} parsing failed - no ${e} blade found for "${n}"`),null;const l={isCustom:!1,blade:a.bladeName,ratchet:i.ratchetName,bit:r.bitName};return console.log(`✅ PARSER: ${e} parsing successful:`,l),l}function h1(t,e){console.log(`🔧 PARSER: Attempting Custom parsing for: "${t}"`);let s=t;const n=f1(t,e.lockchips);if(!n)return console.log("❌ PARSER: Custom parsing failed - no lockchip found"),null;s=t.slice(n.lockchipName.length),console.log(`🔧 PARSER: After lockchip removal: "${s}"`);const r=L0(s,e.bits);if(!r)return console.log("❌ PARSER: Custom parsing failed - no bit found"),null;s=s.slice(0,s.length-r.bitName.length).trim(),console.log(`🔧 PARSER: After bit removal: "${s}"`);const i=D0(s,e.ratchets);if(!i)return console.log("❌ PARSER: Custom parsing failed - no ratchet found"),null;s=s.slice(0,s.length-i.ratchetName.length).trim(),console.log(`🔧 PARSER: After ratchet removal: "${s}"`);const a=m1(s,e.assistBlades);if(!a)return console.log("❌ PARSER: Custom parsing failed - no assist blade found"),null;s=s.slice(0,s.length-a.assistBladeName.length).trim(),console.log(`🔧 PARSER: After assist blade removal: "${s}"`);const l=B0(s,e.blades.filter(d=>d.Line==="Custom"));if(!l)return console.log(`❌ PARSER: Custom parsing failed - no Custom main blade found for "${s}"`),null;const c={isCustom:!0,lockchip:n.lockchipName,mainBlade:l.bladeName,assistBlade:a.assistBladeName,ratchet:i.ratchetName,bit:r.bitName};return console.log("✅ PARSER: Custom parsing successful:",c),c}function L0(t,e){console.log(`🔍 PARSER: Finding bit in "${t}"`),console.log("🔍 PARSER: Available bits:",e.map(n=>({shortcut:n.Shortcut,full:n.Bit})));const s=[...e].sort((n,r)=>{const i=n.Shortcut||n.Bit||"";return(r.Shortcut||r.Bit||"").length-i.length});for(const n of s){const r=n.Shortcut;if(r&&t.endsWith(r))return console.log(`✅ PARSER: Found bit by shortcut: ${r}`),{bit:n,bitName:r}}for(const n of s){const r=n.Bit;if(r&&t.endsWith(r))return console.log(`✅ PARSER: Found bit by full name: ${r} → ${n.Shortcut||r}`),{bit:n,bitName:n.Shortcut||r}}return console.log(`❌ PARSER: No bit found in "${t}"`),null}function D0(t,e){console.log(`🔍 PARSER: Finding ratchet in "${t}"`);const s=[...e].sort((n,r)=>{const i=n.Ratchet||"";return(r.Ratchet||"").length-i.length});for(const n of s){const r=n.Ratchet;if(r&&t.endsWith(r))return console.log(`✅ PARSER: Found ratchet: ${r}`),{ratchet:n,ratchetName:r}}return console.log(`❌ PARSER: No ratchet found in "${t}"`),null}function B0(t,e){console.log(`🔍 PARSER: Finding blade in "${t}"`),console.log("🔍 PARSER: Available blades:",e.map(s=>({name:s.Blades,line:s.Line})));for(const s of e){const n=s.Blades;if(n&&t===n)return console.log(`✅ PARSER: Found blade: ${n} (${s.Line} line)`),{blade:s,bladeName:n}}return console.log(`❌ PARSER: No blade found for "${t}" in available blades`),null}function f1(t,e){console.log(`🔍 PARSER: Finding lockchip in "${t}"`),console.log("🔍 PARSER: Available lockchips:",e.map(n=>n.Lockchip));const s=[...e].sort((n,r)=>{const i=n.Lockchip||"";return(r.Lockchip||"").length-i.length});for(const n of s){const r=n.Lockchip;if(r&&t.startsWith(r))return console.log(`✅ PARSER: Found lockchip: ${r}`),{lockchip:n,lockchipName:r}}return console.log(`❌ PARSER: No lockchip found in "${t}"`),null}function m1(t,e){console.log(`🔍 PARSER: Finding assist blade in "${t}"`),console.log("🔍 PARSER: Available assist blades:",e.map(n=>n["Assist Blade"]));const s=[...e].sort((n,r)=>{const i=n["Assist Blade"]||"";return(r["Assist Blade"]||"").length-i.length});for(const n of s){const r=n["Assist Blade"];if(r&&t.endsWith(r))return console.log(`✅ PARSER: Found assist blade: ${r}`),{assistBlade:n,assistBladeName:r}}return console.log(`❌ PARSER: No assist blade found in "${t}"`),null}function _f(t,e,s){if(!t||!t.trim())return console.log("❌ PARSER: Empty beyblade name"),{isCustom:!1};console.log(`
🎯 PARSER: Starting to parse "${t}"`);const n=["Basic","Unique","X-Over","Custom"];for(const r of n){if(console.log(`🔍 PARSER: Trying ${r} blade line...`),r==="Custom"){const i=h1(t,s);if(i)return console.log(`🎯 PARSER: Successfully parsed as ${r} Beyblade`),i}else{const i=u1(t,r,s);if(i)return console.log(`🎯 PARSER: Successfully parsed as ${r} Beyblade`),i}console.log(`❌ PARSER: ${r} parsing failed`)}return console.log(`❌ PARSER: All parsing attempts failed for "${t}"`),{isCustom:!1}}function p1({onBack:t}){var re;const[e,s]=k.useState([]),[n,r]=k.useState(""),[i,a]=k.useState(!0),[l,c]=k.useState(!1),[d,u]=k.useState(null),[h,f]=k.useState({blades:[],ratchets:[],bits:[],lockchips:[],assistBlades:[]}),[m,p]=k.useState({blade:{},ratchet:{},bit:{},lockchip:{},mainBlade:{},assistBlade:{}}),[x,b]=k.useState([]),[y,g]=k.useState(""),[v,w]=k.useState(""),[_,j]=k.useState([]),[E,A]=k.useState(null),[S,O]=k.useState([]),[P,R]=k.useState({key:"wilson",direction:"desc"});k.useEffect(()=>{U(),K()},[]),k.useEffect(()=>{n&&Object.keys(h.blades).length>0&&T()},[n,h]),k.useEffect(()=>{y&&v&&x.length>0&&B()},[y,v,x]);const U=async()=>{try{console.log("🏆 META ANALYSIS: Fetching tournaments...");const{data:M,error:J}=await V.from("tournaments").select("id, name, status, tournament_date").order("tournament_date",{ascending:!1});if(J)throw J;s(M||[]),console.log(`✅ META ANALYSIS: Loaded ${(M==null?void 0:M.length)||0} tournaments`);const ee=M==null?void 0:M.find(se=>se.status==="completed");ee&&(r(ee.id),console.log(`🎯 META ANALYSIS: Auto-selected completed tournament: ${ee.name}`))}catch(M){console.error("❌ META ANALYSIS: Error fetching tournaments:",M),u("Failed to load tournaments")}finally{a(!1)}},K=async()=>{try{console.log("🔧 META ANALYSIS: Fetching all parts data...");const[M,J,ee,se,L]=await Promise.all([V.from("beypart_blade").select("*"),V.from("beypart_ratchet").select("*"),V.from("beypart_bit").select("*"),V.from("beypart_lockchip").select("*"),V.from("beypart_assistblade").select("*")]);if(M.error)throw M.error;if(J.error)throw J.error;if(ee.error)throw ee.error;if(se.error)throw se.error;if(L.error)throw L.error;const z={blades:M.data||[],ratchets:J.data||[],bits:ee.data||[],lockchips:se.data||[],assistBlades:L.data||[]};f(z),console.log("✅ META ANALYSIS: Parts data loaded:",{blades:z.blades.length,ratchets:z.ratchets.length,bits:z.bits.length,lockchips:z.lockchips.length,assistBlades:z.assistBlades.length})}catch(M){console.error("❌ META ANALYSIS: Error fetching parts data:",M),u("Failed to load parts data")}},T=async()=>{if(n){c(!0),u(null);try{console.log(`🔄 META ANALYSIS: Processing data for tournament ${n}`);const{data:M,error:J}=await V.from("match_results").select("player1_name, player2_name, player1_beyblade, player2_beyblade, player1_blade_line, player2_blade_line, winner_name, outcome, points_awarded").eq("tournament_id",n);if(J)throw J;if(!M||M.length===0){console.log("⚠️ META ANALYSIS: No matches found for this tournament"),p({blade:{},ratchet:{},bit:{},lockchip:{},mainBlade:{},assistBlade:{}}),b([]),c(!1);return}console.log(`📊 META ANALYSIS: Processing ${M.length} matches`);const ee=[],se={blade:{},ratchet:{},bit:{},lockchip:{},mainBlade:{},assistBlade:{}},L=(z,$)=>{se[z][$]||(se[z][$]={name:$,usage:0,wins:0,losses:0,winRate:0,wilson:0})};M.forEach(z=>{if(!z.winner_name||!z.player1_name||!z.player2_name)return;const $=_f(z.player1_beyblade,z.player1_blade_line,h),ie=_f(z.player2_beyblade,z.player2_blade_line,h),N={player:z.player1_name,opponent:z.player2_name,beyblade:z.player1_beyblade,opponentBeyblade:z.player2_beyblade,isWin:z.winner_name===z.player1_name,outcome:z.outcome||"Unknown",parsedParts:$},C={player:z.player2_name,opponent:z.player1_name,beyblade:z.player2_beyblade,opponentBeyblade:z.player1_beyblade,isWin:z.winner_name===z.player2_name,outcome:z.outcome||"Unknown",parsedParts:ie};ee.push(N,C);const D=(ne,G)=>{Object.entries(ne).forEach(([he,ye])=>{if(he==="isCustom"||!ye)return;L(he,ye);const xe=se[he][ye];xe.usage++,G?xe.wins++:xe.losses++})};D($,N.isWin),D(ie,C.isWin)}),Object.keys(se).forEach(z=>{Object.values(se[z]).forEach($=>{const ie=$.wins+$.losses;$.winRate=ie>0?$.wins/ie*100:0,$.wilson=wf($.wins,ie)})}),p(se),b(ee),console.log("✅ META ANALYSIS: Data processing complete"),console.log("📈 META ANALYSIS: Stats summary:",{totalProcessedMatches:ee.length,uniqueBlades:Object.keys(se.blade).length,uniqueRatchets:Object.keys(se.ratchet).length,uniqueBits:Object.keys(se.bit).length})}catch(M){console.error("❌ META ANALYSIS: Error processing tournament data:",M),u("Failed to process tournament data")}finally{c(!1)}}},B=()=>{console.log(`🔨 META ANALYSIS: Generating builds data for ${y}: ${v}`);const M={};x.forEach(ee=>{if(ee.parsedParts[y]!==v)return;const L=`${ee.beyblade}_${ee.player}`;M[L]||(M[L]={build:ee.beyblade,player:ee.player,wins:0,losses:0,winRate:0,wilson:0}),ee.isWin?M[L].wins++:M[L].losses++});const J=Object.values(M).map(ee=>{const se=ee.wins+ee.losses;return ee.winRate=se>0?ee.wins/se*100:0,ee.wilson=wf(ee.wins,se),ee}).sort((ee,se)=>se.wilson-ee.wilson);j(J),console.log(`✅ META ANALYSIS: Generated ${J.length} builds for ${v}`)},H=(M,J)=>{A({build:M,player:J});const ee=x.filter(se=>se.beyblade===M&&se.player===J);O(ee),console.log(`👁️ META ANALYSIS: Showing ${ee.length} matches for ${M} by ${J}`)},W=M=>{let J="asc";P.key===M&&P.direction==="asc"&&(J="desc"),R({key:M,direction:J})},q=M=>{const J=Object.values(m[M]||{}).filter(ee=>ee.usage>0);return P.key?[...J].sort((ee,se)=>{const L=ee[P.key],z=se[P.key];if(typeof L=="number"&&typeof z=="number")return P.direction==="asc"?L-z:z-L;const $=String(L),ie=String(z);return P.direction==="asc"?$.localeCompare(ie):ie.localeCompare($)}):J.sort((ee,se)=>se.wilson-ee.wilson)},X=M=>{switch(M){case"blade":return"Blades";case"ratchet":return"Ratchets";case"bit":return"Bits";case"lockchip":return"Lockchips";case"mainBlade":return"Main Blades";case"assistBlade":return"Assist Blades";default:return M}},Z=({children:M,sortKey:J})=>o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>W(J),children:o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("span",{children:M}),P.key===J&&(P.direction==="asc"?o.jsx(R_,{size:12}):o.jsx(M_,{size:12}))]})});return i?o.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading tournaments..."})]})}):d?o.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"text-red-500 text-4xl mb-4",children:"⚠️"}),o.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Error"}),o.jsx("p",{className:"text-red-600 mb-4",children:d}),o.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"Reload Page"})]})}):o.jsx("div",{className:"page-container",children:o.jsxs("div",{className:"content-wrapper",children:[o.jsx("div",{className:"page-header",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"page-title",children:"Tournament Analytics"}),o.jsx("p",{className:"page-subtitle",children:"Comprehensive tournament and player statistics"})]}),o.jsxs("div",{className:"filter-tabs",children:[o.jsx("button",{onClick:()=>{t&&t()},className:"filter-tab filter-tab-inactive",children:"Overview"}),o.jsx("button",{className:"filter-tab filter-tab-active",children:"Meta Analysis"}),o.jsx("button",{onClick:()=>{t&&(t(),setTimeout(()=>{const M=new CustomEvent("navigateToPlayerAnalytics");window.dispatchEvent(M)},50))},className:"filter-tab filter-tab-inactive",children:"Player Analytics"})]})]})}),o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Tournament Selection"}),o.jsxs("div",{className:"max-w-md",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Tournament"}),o.jsxs("select",{value:n,onChange:M=>r(M.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.jsx("option",{value:"",children:"-- Select Tournament --"}),e.map(M=>o.jsxs("option",{value:M.id,children:[M.name," (",M.status,")"]},M.id))]})]})]}),n&&o.jsxs(o.Fragment,{children:[l&&o.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-8",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mr-3"}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-blue-800 font-medium",children:"Processing Tournament Data"}),o.jsx("p",{className:"text-blue-700 text-sm mt-1",children:"Parsing Beyblade names and calculating statistics..."})]})]})}),!l&&x.length===0&&o.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 mb-8",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"text-yellow-600 mr-3",children:"⚠️"}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-yellow-800 font-medium",children:"No Match Data Available"}),o.jsxs("p",{className:"text-yellow-700 text-sm mt-1",children:["This tournament has no completed matches yet. Meta analysis requires match results to generate statistics.",((re=e.find(M=>M.id===n))==null?void 0:re.status)==="upcoming"&&" Try selecting a completed tournament instead."]})]})]})}),!l&&x.length>0&&o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[o.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[o.jsx(A0,{className:"mr-2",size:24}),"Builds by Part"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Part Type"}),o.jsxs("select",{value:y,onChange:M=>{g(M.target.value),w(""),j([]),A(null),O([])},className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.jsx("option",{value:"",children:"Select Part Type"}),o.jsx("option",{value:"blade",children:"Blade"}),o.jsx("option",{value:"ratchet",children:"Ratchet"}),o.jsx("option",{value:"bit",children:"Bit"}),o.jsx("option",{value:"lockchip",children:"Lockchip"}),o.jsx("option",{value:"mainBlade",children:"Main Blade"}),o.jsx("option",{value:"assistBlade",children:"Assist Blade"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Part Name"}),o.jsxs("select",{value:v,onChange:M=>w(M.target.value),disabled:!y,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100",children:[o.jsx("option",{value:"",children:"Select Part Name"}),y&&Object.values(m[y]||{}).filter(M=>M.usage>0).sort((M,J)=>J.wilson-M.wilson).map(M=>o.jsx("option",{value:M.name,children:M.name},M.name))]})]})]}),_.length>0&&o.jsxs("div",{className:"mb-6",children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Builds using ",v," (",X(y),")"]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Build"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Wins"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Losses"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Win Rate"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Wilson Score"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:_.map((M,J)=>o.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>H(M.build,M.player),children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-600 hover:text-blue-800",children:M.build}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:M.player}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:M.wins}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:M.losses}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[M.winRate.toFixed(1),"%"]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:M.wilson.toFixed(3)})]},J))})]})})]}),E&&S.length>0&&o.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[o.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Matches for ",o.jsx("strong",{children:E.build})," by ",o.jsx("strong",{children:E.player})]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Result"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Opponent"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Opponent's Bey"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Finish Type"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S.map((M,J)=>o.jsxs("tr",{className:M.isWin?"bg-green-50":"bg-red-50",children:[o.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm font-medium ${M.isWin?"text-green-800":"text-red-800"}`,children:M.isWin?"Win":"Loss"}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:M.opponent}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:M.opponentBeyblade}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:M.outcome})]},J))})]})})]})]}),!l&&x.length>0&&o.jsx("div",{className:"space-y-8",children:["blade","ratchet","bit","lockchip","mainBlade","assistBlade"].map(M=>o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[o.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 capitalize flex items-center",children:[o.jsx(Eo,{className:"mr-2",size:24}),X(M)]}),Object.keys(m[M]||{}).length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx(Eo,{size:48,className:"mx-auto text-gray-400 mb-4"}),o.jsxs("p",{className:"text-gray-500",children:["No ",X(M).toLowerCase()," data available"]}),o.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:["No matches used ",X(M).toLowerCase()," from this category"]})]}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx(Z,{sortKey:"name",children:"Name"}),o.jsx(Z,{sortKey:"usage",children:"Usage"}),o.jsx(Z,{sortKey:"wins",children:"Wins"}),o.jsx(Z,{sortKey:"losses",children:"Losses"}),o.jsx(Z,{sortKey:"winRate",children:"Win Rate"}),o.jsx(Z,{sortKey:"wilson",children:"Wilson Score"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:q(M).map((J,ee)=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:J.name}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:J.usage}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:J.wins}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:J.losses}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[J.winRate.toFixed(1),"%"]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:J.wilson.toFixed(3)})]},ee))})]})})]},M))})]})]})})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function ea(t){return t+.5|0}const zs=(t,e,s)=>Math.max(Math.min(t,s),e);function si(t){return zs(ea(t*2.55),0,255)}function Js(t){return zs(ea(t*255),0,255)}function gs(t){return zs(ea(t/2.55)/100,0,1)}function jf(t){return zs(ea(t*100),0,100)}const Ot={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},ud=[..."0123456789ABCDEF"],g1=t=>ud[t&15],x1=t=>ud[(t&240)>>4]+ud[t&15],ka=t=>(t&240)>>4===(t&15),y1=t=>ka(t.r)&&ka(t.g)&&ka(t.b)&&ka(t.a);function v1(t){var e=t.length,s;return t[0]==="#"&&(e===4||e===5?s={r:255&Ot[t[1]]*17,g:255&Ot[t[2]]*17,b:255&Ot[t[3]]*17,a:e===5?Ot[t[4]]*17:255}:(e===7||e===9)&&(s={r:Ot[t[1]]<<4|Ot[t[2]],g:Ot[t[3]]<<4|Ot[t[4]],b:Ot[t[5]]<<4|Ot[t[6]],a:e===9?Ot[t[7]]<<4|Ot[t[8]]:255})),s}const b1=(t,e)=>t<255?e(t):"";function w1(t){var e=y1(t)?g1:x1;return t?"#"+e(t.r)+e(t.g)+e(t.b)+b1(t.a,e):void 0}const _1=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function I0(t,e,s){const n=e*Math.min(s,1-s),r=(i,a=(i+t/30)%12)=>s-n*Math.max(Math.min(a-3,9-a,1),-1);return[r(0),r(8),r(4)]}function j1(t,e,s){const n=(r,i=(r+t/60)%6)=>s-s*e*Math.max(Math.min(i,4-i,1),0);return[n(5),n(3),n(1)]}function k1(t,e,s){const n=I0(t,1,.5);let r;for(e+s>1&&(r=1/(e+s),e*=r,s*=r),r=0;r<3;r++)n[r]*=1-e-s,n[r]+=e;return n}function N1(t,e,s,n,r){return t===r?(e-s)/n+(e<s?6:0):e===r?(s-t)/n+2:(t-e)/n+4}function ku(t){const s=t.r/255,n=t.g/255,r=t.b/255,i=Math.max(s,n,r),a=Math.min(s,n,r),l=(i+a)/2;let c,d,u;return i!==a&&(u=i-a,d=l>.5?u/(2-i-a):u/(i+a),c=N1(s,n,r,u,i),c=c*60+.5),[c|0,d||0,l]}function Nu(t,e,s,n){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,s,n)).map(Js)}function Su(t,e,s){return Nu(I0,t,e,s)}function S1(t,e,s){return Nu(k1,t,e,s)}function C1(t,e,s){return Nu(j1,t,e,s)}function $0(t){return(t%360+360)%360}function P1(t){const e=_1.exec(t);let s=255,n;if(!e)return;e[5]!==n&&(s=e[6]?si(+e[5]):Js(+e[5]));const r=$0(+e[2]),i=+e[3]/100,a=+e[4]/100;return e[1]==="hwb"?n=S1(r,i,a):e[1]==="hsv"?n=C1(r,i,a):n=Su(r,i,a),{r:n[0],g:n[1],b:n[2],a:s}}function E1(t,e){var s=ku(t);s[0]=$0(s[0]+e),s=Su(s),t.r=s[0],t.g=s[1],t.b=s[2]}function T1(t){if(!t)return;const e=ku(t),s=e[0],n=jf(e[1]),r=jf(e[2]);return t.a<255?`hsla(${s}, ${n}%, ${r}%, ${gs(t.a)})`:`hsl(${s}, ${n}%, ${r}%)`}const kf={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Nf={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function A1(){const t={},e=Object.keys(Nf),s=Object.keys(kf);let n,r,i,a,l;for(n=0;n<e.length;n++){for(a=l=e[n],r=0;r<s.length;r++)i=s[r],l=l.replace(i,kf[i]);i=parseInt(Nf[a],16),t[l]=[i>>16&255,i>>8&255,i&255]}return t}let Na;function O1(t){Na||(Na=A1(),Na.transparent=[0,0,0,0]);const e=Na[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const M1=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function R1(t){const e=M1.exec(t);let s=255,n,r,i;if(e){if(e[7]!==n){const a=+e[7];s=e[8]?si(a):zs(a*255,0,255)}return n=+e[1],r=+e[3],i=+e[5],n=255&(e[2]?si(n):zs(n,0,255)),r=255&(e[4]?si(r):zs(r,0,255)),i=255&(e[6]?si(i):zs(i,0,255)),{r:n,g:r,b:i,a:s}}}function L1(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${gs(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Ql=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Yn=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function D1(t,e,s){const n=Yn(gs(t.r)),r=Yn(gs(t.g)),i=Yn(gs(t.b));return{r:Js(Ql(n+s*(Yn(gs(e.r))-n))),g:Js(Ql(r+s*(Yn(gs(e.g))-r))),b:Js(Ql(i+s*(Yn(gs(e.b))-i))),a:t.a+s*(e.a-t.a)}}function Sa(t,e,s){if(t){let n=ku(t);n[e]=Math.max(0,Math.min(n[e]+n[e]*s,e===0?360:1)),n=Su(n),t.r=n[0],t.g=n[1],t.b=n[2]}}function z0(t,e){return t&&Object.assign(e||{},t)}function Sf(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Js(t[3]))):(e=z0(t,{r:0,g:0,b:0,a:1}),e.a=Js(e.a)),e}function B1(t){return t.charAt(0)==="r"?R1(t):P1(t)}class Ui{constructor(e){if(e instanceof Ui)return e;const s=typeof e;let n;s==="object"?n=Sf(e):s==="string"&&(n=v1(e)||O1(e)||B1(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=z0(this._rgb);return e&&(e.a=gs(e.a)),e}set rgb(e){this._rgb=Sf(e)}rgbString(){return this._valid?L1(this._rgb):void 0}hexString(){return this._valid?w1(this._rgb):void 0}hslString(){return this._valid?T1(this._rgb):void 0}mix(e,s){if(e){const n=this.rgb,r=e.rgb;let i;const a=s===i?.5:s,l=2*a-1,c=n.a-r.a,d=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;i=1-d,n.r=255&d*n.r+i*r.r+.5,n.g=255&d*n.g+i*r.g+.5,n.b=255&d*n.b+i*r.b+.5,n.a=a*n.a+(1-a)*r.a,this.rgb=n}return this}interpolate(e,s){return e&&(this._rgb=D1(this._rgb,e._rgb,s)),this}clone(){return new Ui(this.rgb)}alpha(e){return this._rgb.a=Js(e),this}clearer(e){const s=this._rgb;return s.a*=1-e,this}greyscale(){const e=this._rgb,s=ea(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=s,this}opaquer(e){const s=this._rgb;return s.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Sa(this._rgb,2,e),this}darken(e){return Sa(this._rgb,2,-e),this}saturate(e){return Sa(this._rgb,1,e),this}desaturate(e){return Sa(this._rgb,1,-e),this}rotate(e){return E1(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function ls(){}const I1=(()=>{let t=0;return()=>t++})();function Ce(t){return t==null}function Re(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function pe(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function st(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Zt(t,e){return st(t)?t:e}function me(t,e){return typeof t>"u"?e:t}const $1=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function je(t,e,s){if(t&&typeof t.call=="function")return t.apply(s,e)}function ve(t,e,s,n){let r,i,a;if(Re(t))for(i=t.length,r=0;r<i;r++)e.call(s,t[r],r);else if(pe(t))for(a=Object.keys(t),i=a.length,r=0;r<i;r++)e.call(s,t[a[r]],a[r])}function To(t,e){let s,n,r,i;if(!t||!e||t.length!==e.length)return!1;for(s=0,n=t.length;s<n;++s)if(r=t[s],i=e[s],r.datasetIndex!==i.datasetIndex||r.index!==i.index)return!1;return!0}function Ao(t){if(Re(t))return t.map(Ao);if(pe(t)){const e=Object.create(null),s=Object.keys(t),n=s.length;let r=0;for(;r<n;++r)e[s[r]]=Ao(t[s[r]]);return e}return t}function F0(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function z1(t,e,s,n){if(!F0(t))return;const r=e[t],i=s[t];pe(r)&&pe(i)?Wi(r,i,n):e[t]=Ao(i)}function Wi(t,e,s){const n=Re(e)?e:[e],r=n.length;if(!pe(t))return t;s=s||{};const i=s.merger||z1;let a;for(let l=0;l<r;++l){if(a=n[l],!pe(a))continue;const c=Object.keys(a);for(let d=0,u=c.length;d<u;++d)i(c[d],t,a,s)}return t}function yi(t,e){return Wi(t,e,{merger:F1})}function F1(t,e,s){if(!F0(t))return;const n=e[t],r=s[t];pe(n)&&pe(r)?yi(n,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Ao(r))}const Cf={"":t=>t,x:t=>t.x,y:t=>t.y};function U1(t){const e=t.split("."),s=[];let n="";for(const r of e)n+=r,n.endsWith("\\")?n=n.slice(0,-1)+".":(s.push(n),n="");return s}function W1(t){const e=U1(t);return s=>{for(const n of e){if(n==="")break;s=s&&s[n]}return s}}function Hi(t,e){return(Cf[e]||(Cf[e]=W1(e)))(t)}function Cu(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Oo=t=>typeof t<"u",sn=t=>typeof t=="function",Pf=(t,e)=>{if(t.size!==e.size)return!1;for(const s of t)if(!e.has(s))return!1;return!0};function H1(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Ve=Math.PI,Ct=2*Ve,V1=Ct+Ve,Mo=Number.POSITIVE_INFINITY,q1=Ve/180,Nt=Ve/2,mn=Ve/4,Ef=Ve*2/3,hd=Math.log10,Sr=Math.sign;function vi(t,e,s){return Math.abs(t-e)<s}function Tf(t){const e=Math.round(t);t=vi(t,e,t/1e3)?e:t;const s=Math.pow(10,Math.floor(hd(t))),n=t/s;return(n<=1?1:n<=2?2:n<=5?5:10)*s}function K1(t){const e=[],s=Math.sqrt(t);let n;for(n=1;n<s;n++)t%n===0&&(e.push(n),e.push(t/n));return s===(s|0)&&e.push(s),e.sort((r,i)=>r-i).pop(),e}function Y1(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Ro(t){return!Y1(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function G1(t,e){const s=Math.round(t);return s-e<=t&&s+e>=t}function Q1(t,e,s){let n,r,i;for(n=0,r=t.length;n<r;n++)i=t[n][s],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function Sn(t){return t*(Ve/180)}function Pu(t){return t*(180/Ve)}function Af(t){if(!st(t))return;let e=1,s=0;for(;Math.round(t*e)/e!==t;)e*=10,s++;return s}function X1(t,e){const s=e.x-t.x,n=e.y-t.y,r=Math.sqrt(s*s+n*n);let i=Math.atan2(n,s);return i<-.5*Ve&&(i+=Ct),{angle:i,distance:r}}function fd(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function J1(t,e){return(t-e+V1)%Ct-Ve}function _t(t){return(t%Ct+Ct)%Ct}function U0(t,e,s,n){const r=_t(t),i=_t(e),a=_t(s),l=_t(i-r),c=_t(a-r),d=_t(r-i),u=_t(r-a);return r===i||r===a||n&&i===a||l>c&&d<u}function vs(t,e,s){return Math.max(e,Math.min(s,t))}function Z1(t){return vs(t,-32768,32767)}function cr(t,e,s,n=1e-6){return t>=Math.min(e,s)-n&&t<=Math.max(e,s)+n}function Eu(t,e,s){s=s||(a=>t[a]<e);let n=t.length-1,r=0,i;for(;n-r>1;)i=r+n>>1,s(i)?r=i:n=i;return{lo:r,hi:n}}const md=(t,e,s,n)=>Eu(t,s,n?r=>{const i=t[r][e];return i<s||i===s&&t[r+1][e]===s}:r=>t[r][e]<s),ej=(t,e,s)=>Eu(t,s,n=>t[n][e]>=s);function tj(t,e,s){let n=0,r=t.length;for(;n<r&&t[n]<e;)n++;for(;r>n&&t[r-1]>s;)r--;return n>0||r<t.length?t.slice(n,r):t}const W0=["push","pop","shift","splice","unshift"];function sj(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),W0.forEach(s=>{const n="_onData"+Cu(s),r=t[s];Object.defineProperty(t,s,{configurable:!0,enumerable:!1,value(...i){const a=r.apply(this,i);return t._chartjs.listeners.forEach(l=>{typeof l[n]=="function"&&l[n](...i)}),a}})})}function Of(t,e){const s=t._chartjs;if(!s)return;const n=s.listeners,r=n.indexOf(e);r!==-1&&n.splice(r,1),!(n.length>0)&&(W0.forEach(i=>{delete t[i]}),delete t._chartjs)}function nj(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const H0=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function V0(t,e){let s=[],n=!1;return function(...r){s=r,n||(n=!0,H0.call(window,()=>{n=!1,t.apply(e,s)}))}}function rj(t,e){let s;return function(...n){return e?(clearTimeout(s),s=setTimeout(t,e,n)):t.apply(this,n),e}}const q0=t=>t==="start"?"left":t==="end"?"right":"center",bt=(t,e,s)=>t==="start"?e:t==="end"?s:(e+s)/2,ij=(t,e,s,n)=>t===(n?"left":"right")?s:t==="center"?(e+s)/2:e,Ca=t=>t===0||t===1,Mf=(t,e,s)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Ct/s)),Rf=(t,e,s)=>Math.pow(2,-10*t)*Math.sin((t-e)*Ct/s)+1,bi={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Nt)+1,easeOutSine:t=>Math.sin(t*Nt),easeInOutSine:t=>-.5*(Math.cos(Ve*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Ca(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Ca(t)?t:Mf(t,.075,.3),easeOutElastic:t=>Ca(t)?t:Rf(t,.075,.3),easeInOutElastic(t){return Ca(t)?t:t<.5?.5*Mf(t*2,.1125,.45):.5+.5*Rf(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-bi.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?bi.easeInBounce(t*2)*.5:bi.easeOutBounce(t*2-1)*.5+.5};function Tu(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Lf(t){return Tu(t)?t:new Ui(t)}function Xl(t){return Tu(t)?t:new Ui(t).saturate(.5).darken(.1).hexString()}const aj=["x","y","borderWidth","radius","tension"],oj=["color","borderColor","backgroundColor"];function lj(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:oj},numbers:{type:"number",properties:aj}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function cj(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Df=new Map;function dj(t,e){e=e||{};const s=t+JSON.stringify(e);let n=Df.get(s);return n||(n=new Intl.NumberFormat(t,e),Df.set(s,n)),n}function K0(t,e,s){return dj(e,s).format(t)}const Y0={values(t){return Re(t)?t:""+t},numeric(t,e,s){if(t===0)return"0";const n=this.chart.options.locale;let r,i=t;if(s.length>1){const d=Math.max(Math.abs(s[0].value),Math.abs(s[s.length-1].value));(d<1e-4||d>1e15)&&(r="scientific"),i=uj(t,s)}const a=hd(Math.abs(i)),l=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),c={notation:r,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),K0(t,n,c)},logarithmic(t,e,s){if(t===0)return"0";const n=s[e].significand||t/Math.pow(10,Math.floor(hd(t)));return[1,2,3,5,10,15].includes(n)||e>.8*s.length?Y0.numeric.call(this,t,e,s):""}};function uj(t,e){let s=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(s)>=1&&t!==Math.floor(t)&&(s=t-Math.floor(t)),s}var G0={formatters:Y0};function hj(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,s)=>s.lineWidth,tickColor:(e,s)=>s.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:G0.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const In=Object.create(null),pd=Object.create(null);function wi(t,e){if(!e)return t;const s=e.split(".");for(let n=0,r=s.length;n<r;++n){const i=s[n];t=t[i]||(t[i]=Object.create(null))}return t}function Jl(t,e,s){return typeof e=="string"?Wi(wi(t,e),s):Wi(wi(t,""),e)}class fj{constructor(e,s){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,r)=>Xl(r.backgroundColor),this.hoverBorderColor=(n,r)=>Xl(r.borderColor),this.hoverColor=(n,r)=>Xl(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(s)}set(e,s){return Jl(this,e,s)}get(e){return wi(this,e)}describe(e,s){return Jl(pd,e,s)}override(e,s){return Jl(In,e,s)}route(e,s,n,r){const i=wi(this,e),a=wi(this,n),l="_"+s;Object.defineProperties(i,{[l]:{value:i[s],writable:!0},[s]:{enumerable:!0,get(){const c=this[l],d=a[r];return pe(c)?Object.assign({},d,c):me(c,d)},set(c){this[l]=c}}})}apply(e){e.forEach(s=>s(this))}}var Le=new fj({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[lj,cj,hj]);function mj(t){return!t||Ce(t.size)||Ce(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Lo(t,e,s,n,r){let i=e[r];return i||(i=e[r]=t.measureText(r).width,s.push(r)),i>n&&(n=i),n}function pj(t,e,s,n){n=n||{};let r=n.data=n.data||{},i=n.garbageCollect=n.garbageCollect||[];n.font!==e&&(r=n.data={},i=n.garbageCollect=[],n.font=e),t.save(),t.font=e;let a=0;const l=s.length;let c,d,u,h,f;for(c=0;c<l;c++)if(h=s[c],h!=null&&!Re(h))a=Lo(t,r,i,a,h);else if(Re(h))for(d=0,u=h.length;d<u;d++)f=h[d],f!=null&&!Re(f)&&(a=Lo(t,r,i,a,f));t.restore();const m=i.length/2;if(m>s.length){for(c=0;c<m;c++)delete r[i[c]];i.splice(0,m)}return a}function pn(t,e,s){const n=t.currentDevicePixelRatio,r=s!==0?Math.max(s/2,.5):0;return Math.round((e-r)*n)/n+r}function Bf(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function gd(t,e,s,n){Q0(t,e,s,n,null)}function Q0(t,e,s,n,r){let i,a,l,c,d,u,h,f;const m=e.pointStyle,p=e.rotation,x=e.radius;let b=(p||0)*q1;if(m&&typeof m=="object"&&(i=m.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(s,n),t.rotate(b),t.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),t.restore();return}if(!(isNaN(x)||x<=0)){switch(t.beginPath(),m){default:r?t.ellipse(s,n,r/2,x,0,0,Ct):t.arc(s,n,x,0,Ct),t.closePath();break;case"triangle":u=r?r/2:x,t.moveTo(s+Math.sin(b)*u,n-Math.cos(b)*x),b+=Ef,t.lineTo(s+Math.sin(b)*u,n-Math.cos(b)*x),b+=Ef,t.lineTo(s+Math.sin(b)*u,n-Math.cos(b)*x),t.closePath();break;case"rectRounded":d=x*.516,c=x-d,a=Math.cos(b+mn)*c,h=Math.cos(b+mn)*(r?r/2-d:c),l=Math.sin(b+mn)*c,f=Math.sin(b+mn)*(r?r/2-d:c),t.arc(s-h,n-l,d,b-Ve,b-Nt),t.arc(s+f,n-a,d,b-Nt,b),t.arc(s+h,n+l,d,b,b+Nt),t.arc(s-f,n+a,d,b+Nt,b+Ve),t.closePath();break;case"rect":if(!p){c=Math.SQRT1_2*x,u=r?r/2:c,t.rect(s-u,n-c,2*u,2*c);break}b+=mn;case"rectRot":h=Math.cos(b)*(r?r/2:x),a=Math.cos(b)*x,l=Math.sin(b)*x,f=Math.sin(b)*(r?r/2:x),t.moveTo(s-h,n-l),t.lineTo(s+f,n-a),t.lineTo(s+h,n+l),t.lineTo(s-f,n+a),t.closePath();break;case"crossRot":b+=mn;case"cross":h=Math.cos(b)*(r?r/2:x),a=Math.cos(b)*x,l=Math.sin(b)*x,f=Math.sin(b)*(r?r/2:x),t.moveTo(s-h,n-l),t.lineTo(s+h,n+l),t.moveTo(s+f,n-a),t.lineTo(s-f,n+a);break;case"star":h=Math.cos(b)*(r?r/2:x),a=Math.cos(b)*x,l=Math.sin(b)*x,f=Math.sin(b)*(r?r/2:x),t.moveTo(s-h,n-l),t.lineTo(s+h,n+l),t.moveTo(s+f,n-a),t.lineTo(s-f,n+a),b+=mn,h=Math.cos(b)*(r?r/2:x),a=Math.cos(b)*x,l=Math.sin(b)*x,f=Math.sin(b)*(r?r/2:x),t.moveTo(s-h,n-l),t.lineTo(s+h,n+l),t.moveTo(s+f,n-a),t.lineTo(s-f,n+a);break;case"line":a=r?r/2:Math.cos(b)*x,l=Math.sin(b)*x,t.moveTo(s-a,n-l),t.lineTo(s+a,n+l);break;case"dash":t.moveTo(s,n),t.lineTo(s+Math.cos(b)*(r?r/2:x),n+Math.sin(b)*x);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function bs(t,e,s){return s=s||.5,!e||t&&t.x>e.left-s&&t.x<e.right+s&&t.y>e.top-s&&t.y<e.bottom+s}function dl(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function ul(t){t.restore()}function gj(t,e,s,n,r){if(!e)return t.lineTo(s.x,s.y);if(r==="middle"){const i=(e.x+s.x)/2;t.lineTo(i,e.y),t.lineTo(i,s.y)}else r==="after"!=!!n?t.lineTo(e.x,s.y):t.lineTo(s.x,e.y);t.lineTo(s.x,s.y)}function xj(t,e,s,n){if(!e)return t.lineTo(s.x,s.y);t.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?s.cp2x:s.cp1x,n?s.cp2y:s.cp1y,s.x,s.y)}function yj(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Ce(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function vj(t,e,s,n,r){if(r.strikethrough||r.underline){const i=t.measureText(n),a=e-i.actualBoundingBoxLeft,l=e+i.actualBoundingBoxRight,c=s-i.actualBoundingBoxAscent,d=s+i.actualBoundingBoxDescent,u=r.strikethrough?(c+d)/2:d;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(a,u),t.lineTo(l,u),t.stroke()}}function bj(t,e){const s=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=s}function Cr(t,e,s,n,r,i={}){const a=Re(e)?e:[e],l=i.strokeWidth>0&&i.strokeColor!=="";let c,d;for(t.save(),t.font=r.string,yj(t,i),c=0;c<a.length;++c)d=a[c],i.backdrop&&bj(t,i.backdrop),l&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),Ce(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(d,s,n,i.maxWidth)),t.fillText(d,s,n,i.maxWidth),vj(t,s,n,d,i),n+=Number(r.lineHeight);t.restore()}function Do(t,e){const{x:s,y:n,w:r,h:i,radius:a}=e;t.arc(s+a.topLeft,n+a.topLeft,a.topLeft,1.5*Ve,Ve,!0),t.lineTo(s,n+i-a.bottomLeft),t.arc(s+a.bottomLeft,n+i-a.bottomLeft,a.bottomLeft,Ve,Nt,!0),t.lineTo(s+r-a.bottomRight,n+i),t.arc(s+r-a.bottomRight,n+i-a.bottomRight,a.bottomRight,Nt,0,!0),t.lineTo(s+r,n+a.topRight),t.arc(s+r-a.topRight,n+a.topRight,a.topRight,0,-Nt,!0),t.lineTo(s+a.topLeft,n)}const wj=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,_j=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function jj(t,e){const s=(""+t).match(wj);if(!s||s[1]==="normal")return e*1.2;switch(t=+s[2],s[3]){case"px":return t;case"%":t/=100;break}return e*t}const kj=t=>+t||0;function X0(t,e){const s={},n=pe(e),r=n?Object.keys(e):e,i=pe(t)?n?a=>me(t[a],t[e[a]]):a=>t[a]:()=>t;for(const a of r)s[a]=kj(i(a));return s}function Nj(t){return X0(t,{top:"y",right:"x",bottom:"y",left:"x"})}function gr(t){return X0(t,["topLeft","topRight","bottomLeft","bottomRight"])}function ot(t){const e=Nj(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Ye(t,e){t=t||{},e=e||Le.font;let s=me(t.size,e.size);typeof s=="string"&&(s=parseInt(s,10));let n=me(t.style,e.style);n&&!(""+n).match(_j)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const r={family:me(t.family,e.family),lineHeight:jj(me(t.lineHeight,e.lineHeight),s),size:s,style:n,weight:me(t.weight,e.weight),string:""};return r.string=mj(r),r}function Pa(t,e,s,n){let r,i,a;for(r=0,i=t.length;r<i;++r)if(a=t[r],a!==void 0&&a!==void 0)return a}function Sj(t,e,s){const{min:n,max:r}=t,i=$1(e,(r-n)/2),a=(l,c)=>s&&l===0?0:l+c;return{min:a(n,-Math.abs(i)),max:a(r,i)}}function dn(t,e){return Object.assign(Object.create(t),e)}function Au(t,e=[""],s,n,r=()=>t[0]){const i=s||t;typeof n>"u"&&(n=tx("_fallback",t));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:n,_getTarget:r,override:l=>Au([l,...t],e,i,n)};return new Proxy(a,{deleteProperty(l,c){return delete l[c],delete l._keys,delete t[0][c],!0},get(l,c){return Z0(l,c,()=>Rj(c,e,t,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(l,c){return $f(l).includes(c)},ownKeys(l){return $f(l)},set(l,c,d){const u=l._storage||(l._storage=r());return l[c]=u[c]=d,delete l._keys,!0}})}function Pr(t,e,s,n){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:s,_stack:new Set,_descriptors:J0(t,n),setContext:i=>Pr(t,i,s,n),override:i=>Pr(t.override(i),e,s,n)};return new Proxy(r,{deleteProperty(i,a){return delete i[a],delete t[a],!0},get(i,a,l){return Z0(i,a,()=>Pj(i,a,l))},getOwnPropertyDescriptor(i,a){return i._descriptors.allKeys?Reflect.has(t,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,a)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,a){return Reflect.has(t,a)},ownKeys(){return Reflect.ownKeys(t)},set(i,a,l){return t[a]=l,delete i[a],!0}})}function J0(t,e={scriptable:!0,indexable:!0}){const{_scriptable:s=e.scriptable,_indexable:n=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:s,indexable:n,isScriptable:sn(s)?s:()=>s,isIndexable:sn(n)?n:()=>n}}const Cj=(t,e)=>t?t+Cu(e):e,Ou=(t,e)=>pe(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function Z0(t,e,s){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const n=s();return t[e]=n,n}function Pj(t,e,s){const{_proxy:n,_context:r,_subProxy:i,_descriptors:a}=t;let l=n[e];return sn(l)&&a.isScriptable(e)&&(l=Ej(e,l,t,s)),Re(l)&&l.length&&(l=Tj(e,l,t,a.isIndexable)),Ou(e,l)&&(l=Pr(l,r,i&&i[e],a)),l}function Ej(t,e,s,n){const{_proxy:r,_context:i,_subProxy:a,_stack:l}=s;if(l.has(t))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+t);l.add(t);let c=e(i,a||n);return l.delete(t),Ou(t,c)&&(c=Mu(r._scopes,r,t,c)),c}function Tj(t,e,s,n){const{_proxy:r,_context:i,_subProxy:a,_descriptors:l}=s;if(typeof i.index<"u"&&n(t))return e[i.index%e.length];if(pe(e[0])){const c=e,d=r._scopes.filter(u=>u!==c);e=[];for(const u of c){const h=Mu(d,r,t,u);e.push(Pr(h,i,a&&a[t],l))}}return e}function ex(t,e,s){return sn(t)?t(e,s):t}const Aj=(t,e)=>t===!0?e:typeof t=="string"?Hi(e,t):void 0;function Oj(t,e,s,n,r){for(const i of e){const a=Aj(s,i);if(a){t.add(a);const l=ex(a._fallback,s,r);if(typeof l<"u"&&l!==s&&l!==n)return l}else if(a===!1&&typeof n<"u"&&s!==n)return null}return!1}function Mu(t,e,s,n){const r=e._rootScopes,i=ex(e._fallback,s,n),a=[...t,...r],l=new Set;l.add(n);let c=If(l,a,s,i||s,n);return c===null||typeof i<"u"&&i!==s&&(c=If(l,a,i,c,n),c===null)?!1:Au(Array.from(l),[""],r,i,()=>Mj(e,s,n))}function If(t,e,s,n,r){for(;s;)s=Oj(t,e,s,n,r);return s}function Mj(t,e,s){const n=t._getTarget();e in n||(n[e]={});const r=n[e];return Re(r)&&pe(s)?s:r||{}}function Rj(t,e,s,n){let r;for(const i of e)if(r=tx(Cj(i,t),s),typeof r<"u")return Ou(t,r)?Mu(s,n,t,r):r}function tx(t,e){for(const s of e){if(!s)continue;const n=s[t];if(typeof n<"u")return n}}function $f(t){let e=t._keys;return e||(e=t._keys=Lj(t._scopes)),e}function Lj(t){const e=new Set;for(const s of t)for(const n of Object.keys(s).filter(r=>!r.startsWith("_")))e.add(n);return Array.from(e)}function Dj(t,e,s,n){const{iScale:r}=t,{key:i="r"}=this._parsing,a=new Array(n);let l,c,d,u;for(l=0,c=n;l<c;++l)d=l+s,u=e[d],a[l]={r:r.parse(Hi(u,i),d)};return a}const Bj=Number.EPSILON||1e-14,Er=(t,e)=>e<t.length&&!t[e].skip&&t[e],sx=t=>t==="x"?"y":"x";function Ij(t,e,s,n){const r=t.skip?e:t,i=e,a=s.skip?e:s,l=fd(i,r),c=fd(a,i);let d=l/(l+c),u=c/(l+c);d=isNaN(d)?0:d,u=isNaN(u)?0:u;const h=n*d,f=n*u;return{previous:{x:i.x-h*(a.x-r.x),y:i.y-h*(a.y-r.y)},next:{x:i.x+f*(a.x-r.x),y:i.y+f*(a.y-r.y)}}}function $j(t,e,s){const n=t.length;let r,i,a,l,c,d=Er(t,0);for(let u=0;u<n-1;++u)if(c=d,d=Er(t,u+1),!(!c||!d)){if(vi(e[u],0,Bj)){s[u]=s[u+1]=0;continue}r=s[u]/e[u],i=s[u+1]/e[u],l=Math.pow(r,2)+Math.pow(i,2),!(l<=9)&&(a=3/Math.sqrt(l),s[u]=r*a*e[u],s[u+1]=i*a*e[u])}}function zj(t,e,s="x"){const n=sx(s),r=t.length;let i,a,l,c=Er(t,0);for(let d=0;d<r;++d){if(a=l,l=c,c=Er(t,d+1),!l)continue;const u=l[s],h=l[n];a&&(i=(u-a[s])/3,l[`cp1${s}`]=u-i,l[`cp1${n}`]=h-i*e[d]),c&&(i=(c[s]-u)/3,l[`cp2${s}`]=u+i,l[`cp2${n}`]=h+i*e[d])}}function Fj(t,e="x"){const s=sx(e),n=t.length,r=Array(n).fill(0),i=Array(n);let a,l,c,d=Er(t,0);for(a=0;a<n;++a)if(l=c,c=d,d=Er(t,a+1),!!c){if(d){const u=d[e]-c[e];r[a]=u!==0?(d[s]-c[s])/u:0}i[a]=l?d?Sr(r[a-1])!==Sr(r[a])?0:(r[a-1]+r[a])/2:r[a-1]:r[a]}$j(t,r,i),zj(t,i,e)}function Ea(t,e,s){return Math.max(Math.min(t,s),e)}function Uj(t,e){let s,n,r,i,a,l=bs(t[0],e);for(s=0,n=t.length;s<n;++s)a=i,i=l,l=s<n-1&&bs(t[s+1],e),i&&(r=t[s],a&&(r.cp1x=Ea(r.cp1x,e.left,e.right),r.cp1y=Ea(r.cp1y,e.top,e.bottom)),l&&(r.cp2x=Ea(r.cp2x,e.left,e.right),r.cp2y=Ea(r.cp2y,e.top,e.bottom)))}function Wj(t,e,s,n,r){let i,a,l,c;if(e.spanGaps&&(t=t.filter(d=>!d.skip)),e.cubicInterpolationMode==="monotone")Fj(t,r);else{let d=n?t[t.length-1]:t[0];for(i=0,a=t.length;i<a;++i)l=t[i],c=Ij(d,l,t[Math.min(i+1,a-(n?0:1))%a],e.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,d=l}e.capBezierPoints&&Uj(t,s)}function Ru(){return typeof window<"u"&&typeof document<"u"}function Lu(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Bo(t,e,s){let n;return typeof t=="string"?(n=parseInt(t,10),t.indexOf("%")!==-1&&(n=n/100*e.parentNode[s])):n=t,n}const hl=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function Hj(t,e){return hl(t).getPropertyValue(e)}const Vj=["top","right","bottom","left"];function Tn(t,e,s){const n={};s=s?"-"+s:"";for(let r=0;r<4;r++){const i=Vj[r];n[i]=parseFloat(t[e+"-"+i+s])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const qj=(t,e,s)=>(t>0||e>0)&&(!s||!s.shadowRoot);function Kj(t,e){const s=t.touches,n=s&&s.length?s[0]:t,{offsetX:r,offsetY:i}=n;let a=!1,l,c;if(qj(r,i,t.target))l=r,c=i;else{const d=e.getBoundingClientRect();l=n.clientX-d.left,c=n.clientY-d.top,a=!0}return{x:l,y:c,box:a}}function bn(t,e){if("native"in t)return t;const{canvas:s,currentDevicePixelRatio:n}=e,r=hl(s),i=r.boxSizing==="border-box",a=Tn(r,"padding"),l=Tn(r,"border","width"),{x:c,y:d,box:u}=Kj(t,s),h=a.left+(u&&l.left),f=a.top+(u&&l.top);let{width:m,height:p}=e;return i&&(m-=a.width+l.width,p-=a.height+l.height),{x:Math.round((c-h)/m*s.width/n),y:Math.round((d-f)/p*s.height/n)}}function Yj(t,e,s){let n,r;if(e===void 0||s===void 0){const i=t&&Lu(t);if(!i)e=t.clientWidth,s=t.clientHeight;else{const a=i.getBoundingClientRect(),l=hl(i),c=Tn(l,"border","width"),d=Tn(l,"padding");e=a.width-d.width-c.width,s=a.height-d.height-c.height,n=Bo(l.maxWidth,i,"clientWidth"),r=Bo(l.maxHeight,i,"clientHeight")}}return{width:e,height:s,maxWidth:n||Mo,maxHeight:r||Mo}}const Ta=t=>Math.round(t*10)/10;function Gj(t,e,s,n){const r=hl(t),i=Tn(r,"margin"),a=Bo(r.maxWidth,t,"clientWidth")||Mo,l=Bo(r.maxHeight,t,"clientHeight")||Mo,c=Yj(t,e,s);let{width:d,height:u}=c;if(r.boxSizing==="content-box"){const f=Tn(r,"border","width"),m=Tn(r,"padding");d-=m.width+f.width,u-=m.height+f.height}return d=Math.max(0,d-i.width),u=Math.max(0,n?d/n:u-i.height),d=Ta(Math.min(d,a,c.maxWidth)),u=Ta(Math.min(u,l,c.maxHeight)),d&&!u&&(u=Ta(d/2)),(e!==void 0||s!==void 0)&&n&&c.height&&u>c.height&&(u=c.height,d=Ta(Math.floor(u*n))),{width:d,height:u}}function zf(t,e,s){const n=e||1,r=Math.floor(t.height*n),i=Math.floor(t.width*n);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const a=t.canvas;return a.style&&(s||!a.style.height&&!a.style.width)&&(a.style.height=`${t.height}px`,a.style.width=`${t.width}px`),t.currentDevicePixelRatio!==n||a.height!==r||a.width!==i?(t.currentDevicePixelRatio=n,a.height=r,a.width=i,t.ctx.setTransform(n,0,0,n,0,0),!0):!1}const Qj=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Ru()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function Ff(t,e){const s=Hj(t,e),n=s&&s.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function wn(t,e,s,n){return{x:t.x+s*(e.x-t.x),y:t.y+s*(e.y-t.y)}}function Xj(t,e,s,n){return{x:t.x+s*(e.x-t.x),y:n==="middle"?s<.5?t.y:e.y:n==="after"?s<1?t.y:e.y:s>0?e.y:t.y}}function Jj(t,e,s,n){const r={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},a=wn(t,r,s),l=wn(r,i,s),c=wn(i,e,s),d=wn(a,l,s),u=wn(l,c,s);return wn(d,u,s)}const Zj=function(t,e){return{x(s){return t+t+e-s},setWidth(s){e=s},textAlign(s){return s==="center"?s:s==="right"?"left":"right"},xPlus(s,n){return s-n},leftForLtr(s,n){return s-n}}},ek=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function xr(t,e,s){return t?Zj(e,s):ek()}function nx(t,e){let s,n;(e==="ltr"||e==="rtl")&&(s=t.canvas.style,n=[s.getPropertyValue("direction"),s.getPropertyPriority("direction")],s.setProperty("direction",e,"important"),t.prevTextDirection=n)}function rx(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function ix(t){return t==="angle"?{between:U0,compare:J1,normalize:_t}:{between:cr,compare:(e,s)=>e-s,normalize:e=>e}}function Uf({start:t,end:e,count:s,loop:n,style:r}){return{start:t%s,end:e%s,loop:n&&(e-t+1)%s===0,style:r}}function tk(t,e,s){const{property:n,start:r,end:i}=s,{between:a,normalize:l}=ix(n),c=e.length;let{start:d,end:u,loop:h}=t,f,m;if(h){for(d+=c,u+=c,f=0,m=c;f<m&&a(l(e[d%c][n]),r,i);++f)d--,u--;d%=c,u%=c}return u<d&&(u+=c),{start:d,end:u,loop:h,style:t.style}}function ax(t,e,s){if(!s)return[t];const{property:n,start:r,end:i}=s,a=e.length,{compare:l,between:c,normalize:d}=ix(n),{start:u,end:h,loop:f,style:m}=tk(t,e,s),p=[];let x=!1,b=null,y,g,v;const w=()=>c(r,v,y)&&l(r,v)!==0,_=()=>l(i,y)===0||c(i,v,y),j=()=>x||w(),E=()=>!x||_();for(let A=u,S=u;A<=h;++A)g=e[A%a],!g.skip&&(y=d(g[n]),y!==v&&(x=c(y,r,i),b===null&&j()&&(b=l(y,r)===0?A:S),b!==null&&E()&&(p.push(Uf({start:b,end:A,loop:f,count:a,style:m})),b=null),S=A,v=y));return b!==null&&p.push(Uf({start:b,end:h,loop:f,count:a,style:m})),p}function ox(t,e){const s=[],n=t.segments;for(let r=0;r<n.length;r++){const i=ax(n[r],t.points,e);i.length&&s.push(...i)}return s}function sk(t,e,s,n){let r=0,i=e-1;if(s&&!n)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,s&&(i+=r);i>r&&t[i%e].skip;)i--;return i%=e,{start:r,end:i}}function nk(t,e,s,n){const r=t.length,i=[];let a=e,l=t[e],c;for(c=e+1;c<=s;++c){const d=t[c%r];d.skip||d.stop?l.skip||(n=!1,i.push({start:e%r,end:(c-1)%r,loop:n}),e=a=d.stop?c:null):(a=c,l.skip&&(e=c)),l=d}return a!==null&&i.push({start:e%r,end:a%r,loop:n}),i}function rk(t,e){const s=t.points,n=t.options.spanGaps,r=s.length;if(!r)return[];const i=!!t._loop,{start:a,end:l}=sk(s,r,i,n);if(n===!0)return Wf(t,[{start:a,end:l,loop:i}],s,e);const c=l<a?l+r:l,d=!!t._fullLoop&&a===0&&l===r-1;return Wf(t,nk(s,a,c,d),s,e)}function Wf(t,e,s,n){return!n||!n.setContext||!s?e:ik(t,e,s,n)}function ik(t,e,s,n){const r=t._chart.getContext(),i=Hf(t.options),{_datasetIndex:a,options:{spanGaps:l}}=t,c=s.length,d=[];let u=i,h=e[0].start,f=h;function m(p,x,b,y){const g=l?-1:1;if(p!==x){for(p+=c;s[p%c].skip;)p-=g;for(;s[x%c].skip;)x+=g;p%c!==x%c&&(d.push({start:p%c,end:x%c,loop:b,style:y}),u=y,h=x%c)}}for(const p of e){h=l?h:p.start;let x=s[h%c],b;for(f=h+1;f<=p.end;f++){const y=s[f%c];b=Hf(n.setContext(dn(r,{type:"segment",p0:x,p1:y,p0DataIndex:(f-1)%c,p1DataIndex:f%c,datasetIndex:a}))),ak(b,u)&&m(h,f-1,p.loop,u),x=y,u=b}h<f-1&&m(h,f-1,p.loop,u)}return d}function Hf(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function ak(t,e){if(!e)return!1;const s=[],n=function(r,i){return Tu(i)?(s.includes(i)||s.push(i),s.indexOf(i)):i};return JSON.stringify(t,n)!==JSON.stringify(e,n)}function Aa(t,e,s){return t.options.clip?t[s]:e[s]}function ok(t,e){const{xScale:s,yScale:n}=t;return s&&n?{left:Aa(s,e,"left"),right:Aa(s,e,"right"),top:Aa(n,e,"top"),bottom:Aa(n,e,"bottom")}:e}function lx(t,e){const s=e._clip;if(s.disabled)return!1;const n=ok(e,t.chartArea);return{left:s.left===!1?0:n.left-(s.left===!0?0:s.left),right:s.right===!1?t.width:n.right+(s.right===!0?0:s.right),top:s.top===!1?0:n.top-(s.top===!0?0:s.top),bottom:s.bottom===!1?t.height:n.bottom+(s.bottom===!0?0:s.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class lk{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,s,n,r){const i=s.listeners[r],a=s.duration;i.forEach(l=>l({chart:e,initial:s.initial,numSteps:a,currentStep:Math.min(n-s.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=H0.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let s=0;this._charts.forEach((n,r)=>{if(!n.running||!n.items.length)return;const i=n.items;let a=i.length-1,l=!1,c;for(;a>=0;--a)c=i[a],c._active?(c._total>n.duration&&(n.duration=c._total),c.tick(e),l=!0):(i[a]=i[i.length-1],i.pop());l&&(r.draw(),this._notify(r,n,e,"progress")),i.length||(n.running=!1,this._notify(r,n,e,"complete"),n.initial=!1),s+=i.length}),this._lastDate=e,s===0&&(this._running=!1)}_getAnims(e){const s=this._charts;let n=s.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},s.set(e,n)),n}listen(e,s,n){this._getAnims(e).listeners[s].push(n)}add(e,s){!s||!s.length||this._getAnims(e).items.push(...s)}has(e){return this._getAnims(e).items.length>0}start(e){const s=this._charts.get(e);s&&(s.running=!0,s.start=Date.now(),s.duration=s.items.reduce((n,r)=>Math.max(n,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const s=this._charts.get(e);return!(!s||!s.running||!s.items.length)}stop(e){const s=this._charts.get(e);if(!s||!s.items.length)return;const n=s.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();s.items=[],this._notify(e,s,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var ds=new lk;const Vf="transparent",ck={boolean(t,e,s){return s>.5?e:t},color(t,e,s){const n=Lf(t||Vf),r=n.valid&&Lf(e||Vf);return r&&r.valid?r.mix(n,s).hexString():e},number(t,e,s){return t+(e-t)*s}};class dk{constructor(e,s,n,r){const i=s[n];r=Pa([e.to,r,i,e.from]);const a=Pa([e.from,i,r]);this._active=!0,this._fn=e.fn||ck[e.type||typeof a],this._easing=bi[e.easing]||bi.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=s,this._prop=n,this._from=a,this._to=r,this._promises=void 0}active(){return this._active}update(e,s,n){if(this._active){this._notify(!1);const r=this._target[this._prop],i=n-this._start,a=this._duration-i;this._start=n,this._duration=Math.floor(Math.max(a,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=Pa([e.to,s,r,e.from]),this._from=Pa([e.from,r,s])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const s=e-this._start,n=this._duration,r=this._prop,i=this._from,a=this._loop,l=this._to;let c;if(this._active=i!==l&&(a||s<n),!this._active){this._target[r]=l,this._notify(!0);return}if(s<0){this._target[r]=i;return}c=s/n%2,c=a&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[r]=this._fn(i,l,c)}wait(){const e=this._promises||(this._promises=[]);return new Promise((s,n)=>{e.push({res:s,rej:n})})}_notify(e){const s=e?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][s]()}}class cx{constructor(e,s){this._chart=e,this._properties=new Map,this.configure(s)}configure(e){if(!pe(e))return;const s=Object.keys(Le.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const i=e[r];if(!pe(i))return;const a={};for(const l of s)a[l]=i[l];(Re(i.properties)&&i.properties||[r]).forEach(l=>{(l===r||!n.has(l))&&n.set(l,a)})})}_animateOptions(e,s){const n=s.options,r=hk(e,n);if(!r)return[];const i=this._createAnimations(r,n);return n.$shared&&uk(e.options.$animations,n).then(()=>{e.options=n},()=>{}),i}_createAnimations(e,s){const n=this._properties,r=[],i=e.$animations||(e.$animations={}),a=Object.keys(s),l=Date.now();let c;for(c=a.length-1;c>=0;--c){const d=a[c];if(d.charAt(0)==="$")continue;if(d==="options"){r.push(...this._animateOptions(e,s));continue}const u=s[d];let h=i[d];const f=n.get(d);if(h)if(f&&h.active()){h.update(f,u,l);continue}else h.cancel();if(!f||!f.duration){e[d]=u;continue}i[d]=h=new dk(f,e,d,u),r.push(h)}return r}update(e,s){if(this._properties.size===0){Object.assign(e,s);return}const n=this._createAnimations(e,s);if(n.length)return ds.add(this._chart,n),!0}}function uk(t,e){const s=[],n=Object.keys(e);for(let r=0;r<n.length;r++){const i=t[n[r]];i&&i.active()&&s.push(i.wait())}return Promise.all(s)}function hk(t,e){if(!e)return;let s=t.options;if(!s){t.options=e;return}return s.$shared&&(t.options=s=Object.assign({},s,{$shared:!1,$animations:{}})),s}function qf(t,e){const s=t&&t.options||{},n=s.reverse,r=s.min===void 0?e:0,i=s.max===void 0?e:0;return{start:n?i:r,end:n?r:i}}function fk(t,e,s){if(s===!1)return!1;const n=qf(t,s),r=qf(e,s);return{top:r.end,right:n.end,bottom:r.start,left:n.start}}function mk(t){let e,s,n,r;return pe(t)?(e=t.top,s=t.right,n=t.bottom,r=t.left):e=s=n=r=t,{top:e,right:s,bottom:n,left:r,disabled:t===!1}}function dx(t,e){const s=[],n=t._getSortedDatasetMetas(e);let r,i;for(r=0,i=n.length;r<i;++r)s.push(n[r].index);return s}function Kf(t,e,s,n={}){const r=t.keys,i=n.mode==="single";let a,l,c,d;if(e===null)return;let u=!1;for(a=0,l=r.length;a<l;++a){if(c=+r[a],c===s){if(u=!0,n.all)continue;break}d=t.values[c],st(d)&&(i||e===0||Sr(e)===Sr(d))&&(e+=d)}return!u&&!n.all?0:e}function pk(t,e){const{iScale:s,vScale:n}=e,r=s.axis==="x"?"x":"y",i=n.axis==="x"?"x":"y",a=Object.keys(t),l=new Array(a.length);let c,d,u;for(c=0,d=a.length;c<d;++c)u=a[c],l[c]={[r]:u,[i]:t[u]};return l}function Zl(t,e){const s=t&&t.options.stacked;return s||s===void 0&&e.stack!==void 0}function gk(t,e,s){return`${t.id}.${e.id}.${s.stack||s.type}`}function xk(t){const{min:e,max:s,minDefined:n,maxDefined:r}=t.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:r?s:Number.POSITIVE_INFINITY}}function yk(t,e,s){const n=t[e]||(t[e]={});return n[s]||(n[s]={})}function Yf(t,e,s,n){for(const r of e.getMatchingVisibleMetas(n).reverse()){const i=t[r.index];if(s&&i>0||!s&&i<0)return r.index}return null}function Gf(t,e){const{chart:s,_cachedMeta:n}=t,r=s._stacks||(s._stacks={}),{iScale:i,vScale:a,index:l}=n,c=i.axis,d=a.axis,u=gk(i,a,n),h=e.length;let f;for(let m=0;m<h;++m){const p=e[m],{[c]:x,[d]:b}=p,y=p._stacks||(p._stacks={});f=y[d]=yk(r,u,x),f[l]=b,f._top=Yf(f,a,!0,n.type),f._bottom=Yf(f,a,!1,n.type);const g=f._visualValues||(f._visualValues={});g[l]=b}}function ec(t,e){const s=t.scales;return Object.keys(s).filter(n=>s[n].axis===e).shift()}function vk(t,e){return dn(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function bk(t,e,s){return dn(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:s,index:e,mode:"default",type:"data"})}function Vr(t,e){const s=t.controller.index,n=t.vScale&&t.vScale.axis;if(n){e=e||t._parsed;for(const r of e){const i=r._stacks;if(!i||i[n]===void 0||i[n][s]===void 0)return;delete i[n][s],i[n]._visualValues!==void 0&&i[n]._visualValues[s]!==void 0&&delete i[n]._visualValues[s]}}}const tc=t=>t==="reset"||t==="none",Qf=(t,e)=>e?t:Object.assign({},t),wk=(t,e,s)=>t&&!e.hidden&&e._stacked&&{keys:dx(s,!0),values:null};class _i{constructor(e,s){this.chart=e,this._ctx=e.ctx,this.index=s,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Zl(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Vr(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,s=this._cachedMeta,n=this.getDataset(),r=(h,f,m,p)=>h==="x"?f:h==="r"?p:m,i=s.xAxisID=me(n.xAxisID,ec(e,"x")),a=s.yAxisID=me(n.yAxisID,ec(e,"y")),l=s.rAxisID=me(n.rAxisID,ec(e,"r")),c=s.indexAxis,d=s.iAxisID=r(c,i,a,l),u=s.vAxisID=r(c,a,i,l);s.xScale=this.getScaleForId(i),s.yScale=this.getScaleForId(a),s.rScale=this.getScaleForId(l),s.iScale=this.getScaleForId(d),s.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const s=this._cachedMeta;return e===s.iScale?s.vScale:s.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Of(this._data,this),e._stacked&&Vr(e)}_dataCheck(){const e=this.getDataset(),s=e.data||(e.data=[]),n=this._data;if(pe(s)){const r=this._cachedMeta;this._data=pk(s,r)}else if(n!==s){if(n){Of(n,this);const r=this._cachedMeta;Vr(r),r._parsed=[]}s&&Object.isExtensible(s)&&sj(s,this),this._syncList=[],this._data=s}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const s=this._cachedMeta,n=this.getDataset();let r=!1;this._dataCheck();const i=s._stacked;s._stacked=Zl(s.vScale,s),s.stack!==n.stack&&(r=!0,Vr(s),s.stack=n.stack),this._resyncElements(e),(r||i!==s._stacked)&&(Gf(this,s._parsed),s._stacked=Zl(s.vScale,s))}configure(){const e=this.chart.config,s=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),s,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,s){const{_cachedMeta:n,_data:r}=this,{iScale:i,_stacked:a}=n,l=i.axis;let c=e===0&&s===r.length?!0:n._sorted,d=e>0&&n._parsed[e-1],u,h,f;if(this._parsing===!1)n._parsed=r,n._sorted=!0,f=r;else{Re(r[e])?f=this.parseArrayData(n,r,e,s):pe(r[e])?f=this.parseObjectData(n,r,e,s):f=this.parsePrimitiveData(n,r,e,s);const m=()=>h[l]===null||d&&h[l]<d[l];for(u=0;u<s;++u)n._parsed[u+e]=h=f[u],c&&(m()&&(c=!1),d=h);n._sorted=c}a&&Gf(this,f)}parsePrimitiveData(e,s,n,r){const{iScale:i,vScale:a}=e,l=i.axis,c=a.axis,d=i.getLabels(),u=i===a,h=new Array(r);let f,m,p;for(f=0,m=r;f<m;++f)p=f+n,h[f]={[l]:u||i.parse(d[p],p),[c]:a.parse(s[p],p)};return h}parseArrayData(e,s,n,r){const{xScale:i,yScale:a}=e,l=new Array(r);let c,d,u,h;for(c=0,d=r;c<d;++c)u=c+n,h=s[u],l[c]={x:i.parse(h[0],u),y:a.parse(h[1],u)};return l}parseObjectData(e,s,n,r){const{xScale:i,yScale:a}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=new Array(r);let u,h,f,m;for(u=0,h=r;u<h;++u)f=u+n,m=s[f],d[u]={x:i.parse(Hi(m,l),f),y:a.parse(Hi(m,c),f)};return d}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,s,n){const r=this.chart,i=this._cachedMeta,a=s[e.axis],l={keys:dx(r,!0),values:s._stacks[e.axis]._visualValues};return Kf(l,a,i.index,{mode:n})}updateRangeFromParsed(e,s,n,r){const i=n[s.axis];let a=i===null?NaN:i;const l=r&&n._stacks[s.axis];r&&l&&(r.values=l,a=Kf(r,i,this._cachedMeta.index)),e.min=Math.min(e.min,a),e.max=Math.max(e.max,a)}getMinMax(e,s){const n=this._cachedMeta,r=n._parsed,i=n._sorted&&e===n.iScale,a=r.length,l=this._getOtherScale(e),c=wk(s,n,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=xk(l);let f,m;function p(){m=r[f];const x=m[l.axis];return!st(m[e.axis])||u>x||h<x}for(f=0;f<a&&!(!p()&&(this.updateRangeFromParsed(d,e,m,c),i));++f);if(i){for(f=a-1;f>=0;--f)if(!p()){this.updateRangeFromParsed(d,e,m,c);break}}return d}getAllParsedValues(e){const s=this._cachedMeta._parsed,n=[];let r,i,a;for(r=0,i=s.length;r<i;++r)a=s[r][e.axis],st(a)&&n.push(a);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const s=this._cachedMeta,n=s.iScale,r=s.vScale,i=this.getParsed(e);return{label:n?""+n.getLabelForValue(i[n.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(e){const s=this._cachedMeta;this.update(e||"default"),s._clip=mk(me(this.options.clip,fk(s.xScale,s.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,s=this.chart,n=this._cachedMeta,r=n.data||[],i=s.chartArea,a=[],l=this._drawStart||0,c=this._drawCount||r.length-l,d=this.options.drawActiveElementsOnTop;let u;for(n.dataset&&n.dataset.draw(e,i,l,c),u=l;u<l+c;++u){const h=r[u];h.hidden||(h.active&&d?a.push(h):h.draw(e,i))}for(u=0;u<a.length;++u)a[u].draw(e,i)}getStyle(e,s){const n=s?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,s,n){const r=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const a=this._cachedMeta.data[e];i=a.$context||(a.$context=bk(this.getContext(),e,a)),i.parsed=this.getParsed(e),i.raw=r.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=vk(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!s,i.mode=n,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,s){return this._resolveElementOptions(this.dataElementType.id,s,e)}_resolveElementOptions(e,s="default",n){const r=s==="active",i=this._cachedDataOpts,a=e+"-"+s,l=i[a],c=this.enableOptionSharing&&Oo(n);if(l)return Qf(l,c);const d=this.chart.config,u=d.datasetElementScopeKeys(this._type,e),h=r?[`${e}Hover`,"hover",e,""]:[e,""],f=d.getOptionScopes(this.getDataset(),u),m=Object.keys(Le.elements[e]),p=()=>this.getContext(n,r,s),x=d.resolveNamedOptions(f,m,p,h);return x.$shared&&(x.$shared=c,i[a]=Object.freeze(Qf(x,c))),x}_resolveAnimations(e,s,n){const r=this.chart,i=this._cachedDataOpts,a=`animation-${s}`,l=i[a];if(l)return l;let c;if(r.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,s),f=u.getOptionScopes(this.getDataset(),h);c=u.createResolver(f,this.getContext(e,n,s))}const d=new cx(r,c&&c.animations);return c&&c._cacheable&&(i[a]=Object.freeze(d)),d}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,s){return!s||tc(e)||this.chart._animationsDisabled}_getSharedOptions(e,s){const n=this.resolveDataElementOptions(e,s),r=this._sharedOptions,i=this.getSharedOptions(n),a=this.includeOptions(s,i)||i!==r;return this.updateSharedOptions(i,s,n),{sharedOptions:i,includeOptions:a}}updateElement(e,s,n,r){tc(r)?Object.assign(e,n):this._resolveAnimations(s,r).update(e,n)}updateSharedOptions(e,s,n){e&&!tc(s)&&this._resolveAnimations(void 0,s).update(e,n)}_setStyle(e,s,n,r){e.active=r;const i=this.getStyle(s,r);this._resolveAnimations(s,n,r).update(e,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(e,s,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,s,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const s=this._data,n=this._cachedMeta.data;for(const[l,c,d]of this._syncList)this[l](c,d);this._syncList=[];const r=n.length,i=s.length,a=Math.min(i,r);a&&this.parse(0,a),i>r?this._insertElements(r,i-r,e):i<r&&this._removeElements(i,r-i)}_insertElements(e,s,n=!0){const r=this._cachedMeta,i=r.data,a=e+s;let l;const c=d=>{for(d.length+=s,l=d.length-1;l>=a;l--)d[l]=d[l-s]};for(c(i),l=e;l<a;++l)i[l]=new this.dataElementType;this._parsing&&c(r._parsed),this.parse(e,s),n&&this.updateElements(i,e,s,"reset")}updateElements(e,s,n,r){}_removeElements(e,s){const n=this._cachedMeta;if(this._parsing){const r=n._parsed.splice(e,s);n._stacked&&Vr(n,r)}n.data.splice(e,s)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[s,n,r]=e;this[s](n,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,s){s&&this._sync(["_removeElements",e,s]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ce(_i,"defaults",{}),ce(_i,"datasetElementType",null),ce(_i,"dataElementType",null);class Xa extends _i{getLabelAndValue(e){const s=this._cachedMeta.vScale,n=this.getParsed(e);return{label:s.getLabels()[e],value:""+s.getLabelForValue(n[s.axis])}}parseObjectData(e,s,n,r){return Dj.bind(this)(e,s,n,r)}update(e){const s=this._cachedMeta,n=s.dataset,r=s.data||[],i=s.iScale.getLabels();if(n.points=r,e!=="resize"){const a=this.resolveDatasetElementOptions(e);this.options.showLine||(a.borderWidth=0);const l={_loop:!0,_fullLoop:i.length===r.length,options:a};this.updateElement(n,void 0,l,e)}this.updateElements(r,0,r.length,e)}updateElements(e,s,n,r){const i=this._cachedMeta.rScale,a=r==="reset";for(let l=s;l<s+n;l++){const c=e[l],d=this.resolveDataElementOptions(l,c.active?"active":r),u=i.getPointPositionForValue(l,this.getParsed(l).r),h=a?i.xCenter:u.x,f=a?i.yCenter:u.y,m={x:h,y:f,angle:u.angle,skip:isNaN(h)||isNaN(f),options:d};this.updateElement(c,l,m,r)}}}ce(Xa,"id","radar"),ce(Xa,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),ce(Xa,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});function gn(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Du{constructor(e){ce(this,"options");this.options=e||{}}static override(e){Object.assign(Du.prototype,e)}init(){}formats(){return gn()}parse(){return gn()}format(){return gn()}add(){return gn()}diff(){return gn()}startOf(){return gn()}endOf(){return gn()}}var _k={_date:Du};function jk(t,e,s,n){const{controller:r,data:i,_sorted:a}=t,l=r._cachedMeta.iScale,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(l&&e===l.axis&&e!=="r"&&a&&i.length){const d=l._reversePixels?ej:md;if(n){if(r._sharedOptions){const u=i[0],h=typeof u.getRange=="function"&&u.getRange(e);if(h){const f=d(i,e,s-h),m=d(i,e,s+h);return{lo:f.lo,hi:m.hi}}}}else{const u=d(i,e,s);if(c){const{vScale:h}=r._cachedMeta,{_parsed:f}=t,m=f.slice(0,u.lo+1).reverse().findIndex(x=>!Ce(x[h.axis]));u.lo-=Math.max(0,m);const p=f.slice(u.hi).findIndex(x=>!Ce(x[h.axis]));u.hi+=Math.max(0,p)}return u}}return{lo:0,hi:i.length-1}}function ta(t,e,s,n,r){const i=t.getSortedVisibleDatasetMetas(),a=s[e];for(let l=0,c=i.length;l<c;++l){const{index:d,data:u}=i[l],{lo:h,hi:f}=jk(i[l],e,a,r);for(let m=h;m<=f;++m){const p=u[m];p.skip||n(p,d,m)}}}function kk(t){const e=t.indexOf("x")!==-1,s=t.indexOf("y")!==-1;return function(n,r){const i=e?Math.abs(n.x-r.x):0,a=s?Math.abs(n.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(a,2))}}function sc(t,e,s,n,r){const i=[];return!r&&!t.isPointInArea(e)||ta(t,s,e,function(l,c,d){!r&&!bs(l,t.chartArea,0)||l.inRange(e.x,e.y,n)&&i.push({element:l,datasetIndex:c,index:d})},!0),i}function Nk(t,e,s,n){let r=[];function i(a,l,c){const{startAngle:d,endAngle:u}=a.getProps(["startAngle","endAngle"],n),{angle:h}=X1(a,{x:e.x,y:e.y});U0(h,d,u)&&r.push({element:a,datasetIndex:l,index:c})}return ta(t,s,e,i),r}function Sk(t,e,s,n,r,i){let a=[];const l=kk(s);let c=Number.POSITIVE_INFINITY;function d(u,h,f){const m=u.inRange(e.x,e.y,r);if(n&&!m)return;const p=u.getCenterPoint(r);if(!(!!i||t.isPointInArea(p))&&!m)return;const b=l(e,p);b<c?(a=[{element:u,datasetIndex:h,index:f}],c=b):b===c&&a.push({element:u,datasetIndex:h,index:f})}return ta(t,s,e,d),a}function nc(t,e,s,n,r,i){return!i&&!t.isPointInArea(e)?[]:s==="r"&&!n?Nk(t,e,s,r):Sk(t,e,s,n,r,i)}function Xf(t,e,s,n,r){const i=[],a=s==="x"?"inXRange":"inYRange";let l=!1;return ta(t,s,e,(c,d,u)=>{c[a]&&c[a](e[s],r)&&(i.push({element:c,datasetIndex:d,index:u}),l=l||c.inRange(e.x,e.y,r))}),n&&!l?[]:i}var Ck={evaluateInteractionItems:ta,modes:{index(t,e,s,n){const r=bn(e,t),i=s.axis||"x",a=s.includeInvisible||!1,l=s.intersect?sc(t,r,i,n,a):nc(t,r,i,!1,n,a),c=[];return l.length?(t.getSortedVisibleDatasetMetas().forEach(d=>{const u=l[0].index,h=d.data[u];h&&!h.skip&&c.push({element:h,datasetIndex:d.index,index:u})}),c):[]},dataset(t,e,s,n){const r=bn(e,t),i=s.axis||"xy",a=s.includeInvisible||!1;let l=s.intersect?sc(t,r,i,n,a):nc(t,r,i,!1,n,a);if(l.length>0){const c=l[0].datasetIndex,d=t.getDatasetMeta(c).data;l=[];for(let u=0;u<d.length;++u)l.push({element:d[u],datasetIndex:c,index:u})}return l},point(t,e,s,n){const r=bn(e,t),i=s.axis||"xy",a=s.includeInvisible||!1;return sc(t,r,i,n,a)},nearest(t,e,s,n){const r=bn(e,t),i=s.axis||"xy",a=s.includeInvisible||!1;return nc(t,r,i,s.intersect,n,a)},x(t,e,s,n){const r=bn(e,t);return Xf(t,r,"x",s.intersect,n)},y(t,e,s,n){const r=bn(e,t);return Xf(t,r,"y",s.intersect,n)}}};const ux=["left","top","right","bottom"];function qr(t,e){return t.filter(s=>s.pos===e)}function Jf(t,e){return t.filter(s=>ux.indexOf(s.pos)===-1&&s.box.axis===e)}function Kr(t,e){return t.sort((s,n)=>{const r=e?n:s,i=e?s:n;return r.weight===i.weight?r.index-i.index:r.weight-i.weight})}function Pk(t){const e=[];let s,n,r,i,a,l;for(s=0,n=(t||[]).length;s<n;++s)r=t[s],{position:i,options:{stack:a,stackWeight:l=1}}=r,e.push({index:s,box:r,pos:i,horizontal:r.isHorizontal(),weight:r.weight,stack:a&&i+a,stackWeight:l});return e}function Ek(t){const e={};for(const s of t){const{stack:n,pos:r,stackWeight:i}=s;if(!n||!ux.includes(r))continue;const a=e[n]||(e[n]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=i}return e}function Tk(t,e){const s=Ek(t),{vBoxMaxWidth:n,hBoxMaxHeight:r}=e;let i,a,l;for(i=0,a=t.length;i<a;++i){l=t[i];const{fullSize:c}=l.box,d=s[l.stack],u=d&&l.stackWeight/d.weight;l.horizontal?(l.width=u?u*n:c&&e.availableWidth,l.height=r):(l.width=n,l.height=u?u*r:c&&e.availableHeight)}return s}function Ak(t){const e=Pk(t),s=Kr(e.filter(d=>d.box.fullSize),!0),n=Kr(qr(e,"left"),!0),r=Kr(qr(e,"right")),i=Kr(qr(e,"top"),!0),a=Kr(qr(e,"bottom")),l=Jf(e,"x"),c=Jf(e,"y");return{fullSize:s,leftAndTop:n.concat(i),rightAndBottom:r.concat(c).concat(a).concat(l),chartArea:qr(e,"chartArea"),vertical:n.concat(r).concat(c),horizontal:i.concat(a).concat(l)}}function Zf(t,e,s,n){return Math.max(t[s],e[s])+Math.max(t[n],e[n])}function hx(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Ok(t,e,s,n){const{pos:r,box:i}=s,a=t.maxPadding;if(!pe(r)){s.size&&(t[r]-=s.size);const h=n[s.stack]||{size:0,count:1};h.size=Math.max(h.size,s.horizontal?i.height:i.width),s.size=h.size/h.count,t[r]+=s.size}i.getPadding&&hx(a,i.getPadding());const l=Math.max(0,e.outerWidth-Zf(a,t,"left","right")),c=Math.max(0,e.outerHeight-Zf(a,t,"top","bottom")),d=l!==t.w,u=c!==t.h;return t.w=l,t.h=c,s.horizontal?{same:d,other:u}:{same:u,other:d}}function Mk(t){const e=t.maxPadding;function s(n){const r=Math.max(e[n]-t[n],0);return t[n]+=r,r}t.y+=s("top"),t.x+=s("left"),s("right"),s("bottom")}function Rk(t,e){const s=e.maxPadding;function n(r){const i={left:0,top:0,right:0,bottom:0};return r.forEach(a=>{i[a]=Math.max(e[a],s[a])}),i}return n(t?["left","right"]:["top","bottom"])}function ni(t,e,s,n){const r=[];let i,a,l,c,d,u;for(i=0,a=t.length,d=0;i<a;++i){l=t[i],c=l.box,c.update(l.width||e.w,l.height||e.h,Rk(l.horizontal,e));const{same:h,other:f}=Ok(e,s,l,n);d|=h&&r.length,u=u||f,c.fullSize||r.push(l)}return d&&ni(r,e,s,n)||u}function Oa(t,e,s,n,r){t.top=s,t.left=e,t.right=e+n,t.bottom=s+r,t.width=n,t.height=r}function em(t,e,s,n){const r=s.padding;let{x:i,y:a}=e;for(const l of t){const c=l.box,d=n[l.stack]||{count:1,placed:0,weight:1},u=l.stackWeight/d.weight||1;if(l.horizontal){const h=e.w*u,f=d.size||c.height;Oo(d.start)&&(a=d.start),c.fullSize?Oa(c,r.left,a,s.outerWidth-r.right-r.left,f):Oa(c,e.left+d.placed,a,h,f),d.start=a,d.placed+=h,a=c.bottom}else{const h=e.h*u,f=d.size||c.width;Oo(d.start)&&(i=d.start),c.fullSize?Oa(c,i,r.top,f,s.outerHeight-r.bottom-r.top):Oa(c,i,e.top+d.placed,f,h),d.start=i,d.placed+=h,i=c.right}}e.x=i,e.y=a}var Fs={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(s){e.draw(s)}}]},t.boxes.push(e)},removeBox(t,e){const s=t.boxes?t.boxes.indexOf(e):-1;s!==-1&&t.boxes.splice(s,1)},configure(t,e,s){e.fullSize=s.fullSize,e.position=s.position,e.weight=s.weight},update(t,e,s,n){if(!t)return;const r=ot(t.options.layout.padding),i=Math.max(e-r.width,0),a=Math.max(s-r.height,0),l=Ak(t.boxes),c=l.vertical,d=l.horizontal;ve(t.boxes,x=>{typeof x.beforeLayout=="function"&&x.beforeLayout()});const u=c.reduce((x,b)=>b.box.options&&b.box.options.display===!1?x:x+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:s,padding:r,availableWidth:i,availableHeight:a,vBoxMaxWidth:i/2/u,hBoxMaxHeight:a/2}),f=Object.assign({},r);hx(f,ot(n));const m=Object.assign({maxPadding:f,w:i,h:a,x:r.left,y:r.top},r),p=Tk(c.concat(d),h);ni(l.fullSize,m,h,p),ni(c,m,h,p),ni(d,m,h,p)&&ni(c,m,h,p),Mk(m),em(l.leftAndTop,m,h,p),m.x+=m.w,m.y+=m.h,em(l.rightAndBottom,m,h,p),t.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},ve(l.chartArea,x=>{const b=x.box;Object.assign(b,t.chartArea),b.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class fx{acquireContext(e,s){}releaseContext(e){return!1}addEventListener(e,s,n){}removeEventListener(e,s,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,s,n,r){return s=Math.max(0,s||e.width),n=n||e.height,{width:s,height:Math.max(0,r?Math.floor(s/r):n)}}isAttached(e){return!0}updateConfig(e){}}class Lk extends fx{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Ja="$chartjs",Dk={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},tm=t=>t===null||t==="";function Bk(t,e){const s=t.style,n=t.getAttribute("height"),r=t.getAttribute("width");if(t[Ja]={initial:{height:n,width:r,style:{display:s.display,height:s.height,width:s.width}}},s.display=s.display||"block",s.boxSizing=s.boxSizing||"border-box",tm(r)){const i=Ff(t,"width");i!==void 0&&(t.width=i)}if(tm(n))if(t.style.height==="")t.height=t.width/(e||2);else{const i=Ff(t,"height");i!==void 0&&(t.height=i)}return t}const mx=Qj?{passive:!0}:!1;function Ik(t,e,s){t&&t.addEventListener(e,s,mx)}function $k(t,e,s){t&&t.canvas&&t.canvas.removeEventListener(e,s,mx)}function zk(t,e){const s=Dk[t.type]||t.type,{x:n,y:r}=bn(t,e);return{type:s,chart:e,native:t,x:n!==void 0?n:null,y:r!==void 0?r:null}}function Io(t,e){for(const s of t)if(s===e||s.contains(e))return!0}function Fk(t,e,s){const n=t.canvas,r=new MutationObserver(i=>{let a=!1;for(const l of i)a=a||Io(l.addedNodes,n),a=a&&!Io(l.removedNodes,n);a&&s()});return r.observe(document,{childList:!0,subtree:!0}),r}function Uk(t,e,s){const n=t.canvas,r=new MutationObserver(i=>{let a=!1;for(const l of i)a=a||Io(l.removedNodes,n),a=a&&!Io(l.addedNodes,n);a&&s()});return r.observe(document,{childList:!0,subtree:!0}),r}const Vi=new Map;let sm=0;function px(){const t=window.devicePixelRatio;t!==sm&&(sm=t,Vi.forEach((e,s)=>{s.currentDevicePixelRatio!==t&&e()}))}function Wk(t,e){Vi.size||window.addEventListener("resize",px),Vi.set(t,e)}function Hk(t){Vi.delete(t),Vi.size||window.removeEventListener("resize",px)}function Vk(t,e,s){const n=t.canvas,r=n&&Lu(n);if(!r)return;const i=V0((l,c)=>{const d=r.clientWidth;s(l,c),d<r.clientWidth&&s()},window),a=new ResizeObserver(l=>{const c=l[0],d=c.contentRect.width,u=c.contentRect.height;d===0&&u===0||i(d,u)});return a.observe(r),Wk(t,i),a}function rc(t,e,s){s&&s.disconnect(),e==="resize"&&Hk(t)}function qk(t,e,s){const n=t.canvas,r=V0(i=>{t.ctx!==null&&s(zk(i,t))},t);return Ik(n,e,r),r}class Kk extends fx{acquireContext(e,s){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(Bk(e,s),n):null}releaseContext(e){const s=e.canvas;if(!s[Ja])return!1;const n=s[Ja].initial;["height","width"].forEach(i=>{const a=n[i];Ce(a)?s.removeAttribute(i):s.setAttribute(i,a)});const r=n.style||{};return Object.keys(r).forEach(i=>{s.style[i]=r[i]}),s.width=s.width,delete s[Ja],!0}addEventListener(e,s,n){this.removeEventListener(e,s);const r=e.$proxies||(e.$proxies={}),a={attach:Fk,detach:Uk,resize:Vk}[s]||qk;r[s]=a(e,s,n)}removeEventListener(e,s){const n=e.$proxies||(e.$proxies={}),r=n[s];if(!r)return;({attach:rc,detach:rc,resize:rc}[s]||$k)(e,s,r),n[s]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,s,n,r){return Gj(e,s,n,r)}isAttached(e){const s=e&&Lu(e);return!!(s&&s.isConnected)}}function Yk(t){return!Ru()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?Lk:Kk}class nn{constructor(){ce(this,"x");ce(this,"y");ce(this,"active",!1);ce(this,"options");ce(this,"$animations")}tooltipPosition(e){const{x:s,y:n}=this.getProps(["x","y"],e);return{x:s,y:n}}hasValue(){return Ro(this.x)&&Ro(this.y)}getProps(e,s){const n=this.$animations;if(!s||!n)return this;const r={};return e.forEach(i=>{r[i]=n[i]&&n[i].active()?n[i]._to:this[i]}),r}}ce(nn,"defaults",{}),ce(nn,"defaultRoutes");function Gk(t,e){const s=t.options.ticks,n=Qk(t),r=Math.min(s.maxTicksLimit||n,n),i=s.major.enabled?Jk(e):[],a=i.length,l=i[0],c=i[a-1],d=[];if(a>r)return Zk(e,d,i,a/r),d;const u=Xk(i,e,r);if(a>0){let h,f;const m=a>1?Math.round((c-l)/(a-1)):null;for(Ma(e,d,u,Ce(m)?0:l-m,l),h=0,f=a-1;h<f;h++)Ma(e,d,u,i[h],i[h+1]);return Ma(e,d,u,c,Ce(m)?e.length:c+m),d}return Ma(e,d,u),d}function Qk(t){const e=t.options.offset,s=t._tickSize(),n=t._length/s+(e?0:1),r=t._maxLength/s;return Math.floor(Math.min(n,r))}function Xk(t,e,s){const n=e2(t),r=e.length/s;if(!n)return Math.max(r,1);const i=K1(n);for(let a=0,l=i.length-1;a<l;a++){const c=i[a];if(c>r)return c}return Math.max(r,1)}function Jk(t){const e=[];let s,n;for(s=0,n=t.length;s<n;s++)t[s].major&&e.push(s);return e}function Zk(t,e,s,n){let r=0,i=s[0],a;for(n=Math.ceil(n),a=0;a<t.length;a++)a===i&&(e.push(t[a]),r++,i=s[r*n])}function Ma(t,e,s,n,r){const i=me(n,0),a=Math.min(me(r,t.length),t.length);let l=0,c,d,u;for(s=Math.ceil(s),r&&(c=r-n,s=c/Math.floor(c/s)),u=i;u<0;)l++,u=Math.round(i+l*s);for(d=Math.max(i,0);d<a;d++)d===u&&(e.push(t[d]),l++,u=Math.round(i+l*s))}function e2(t){const e=t.length;let s,n;if(e<2)return!1;for(n=t[0],s=1;s<e;++s)if(t[s]-t[s-1]!==n)return!1;return n}const t2=t=>t==="left"?"right":t==="right"?"left":t,nm=(t,e,s)=>e==="top"||e==="left"?t[e]+s:t[e]-s,rm=(t,e)=>Math.min(e||t,t);function im(t,e){const s=[],n=t.length/e,r=t.length;let i=0;for(;i<r;i+=n)s.push(t[Math.floor(i)]);return s}function s2(t,e,s){const n=t.ticks.length,r=Math.min(e,n-1),i=t._startPixel,a=t._endPixel,l=1e-6;let c=t.getPixelForTick(r),d;if(!(s&&(n===1?d=Math.max(c-i,a-c):e===0?d=(t.getPixelForTick(1)-c)/2:d=(c-t.getPixelForTick(r-1))/2,c+=r<e?d:-d,c<i-l||c>a+l)))return c}function n2(t,e){ve(t,s=>{const n=s.gc,r=n.length/2;let i;if(r>e){for(i=0;i<r;++i)delete s.data[n[i]];n.splice(0,r)}})}function Yr(t){return t.drawTicks?t.tickLength:0}function am(t,e){if(!t.display)return 0;const s=Ye(t.font,e),n=ot(t.padding);return(Re(t.text)?t.text.length:1)*s.lineHeight+n.height}function r2(t,e){return dn(t,{scale:e,type:"scale"})}function i2(t,e,s){return dn(t,{tick:s,index:e,type:"tick"})}function a2(t,e,s){let n=q0(t);return(s&&e!=="right"||!s&&e==="right")&&(n=t2(n)),n}function o2(t,e,s,n){const{top:r,left:i,bottom:a,right:l,chart:c}=t,{chartArea:d,scales:u}=c;let h=0,f,m,p;const x=a-r,b=l-i;if(t.isHorizontal()){if(m=bt(n,i,l),pe(s)){const y=Object.keys(s)[0],g=s[y];p=u[y].getPixelForValue(g)+x-e}else s==="center"?p=(d.bottom+d.top)/2+x-e:p=nm(t,s,e);f=l-i}else{if(pe(s)){const y=Object.keys(s)[0],g=s[y];m=u[y].getPixelForValue(g)-b+e}else s==="center"?m=(d.left+d.right)/2-b+e:m=nm(t,s,e);p=bt(n,a,r),h=s==="left"?-Nt:Nt}return{titleX:m,titleY:p,maxWidth:f,rotation:h}}class sa extends nn{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,s){return e}getUserBounds(){let{_userMin:e,_userMax:s,_suggestedMin:n,_suggestedMax:r}=this;return e=Zt(e,Number.POSITIVE_INFINITY),s=Zt(s,Number.NEGATIVE_INFINITY),n=Zt(n,Number.POSITIVE_INFINITY),r=Zt(r,Number.NEGATIVE_INFINITY),{min:Zt(e,n),max:Zt(s,r),minDefined:st(e),maxDefined:st(s)}}getMinMax(e){let{min:s,max:n,minDefined:r,maxDefined:i}=this.getUserBounds(),a;if(r&&i)return{min:s,max:n};const l=this.getMatchingVisibleMetas();for(let c=0,d=l.length;c<d;++c)a=l[c].controller.getMinMax(this,e),r||(s=Math.min(s,a.min)),i||(n=Math.max(n,a.max));return s=i&&s>n?n:s,n=r&&s>n?s:n,{min:Zt(s,Zt(n,s)),max:Zt(n,Zt(s,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){je(this.options.beforeUpdate,[this])}update(e,s,n){const{beginAtZero:r,grace:i,ticks:a}=this.options,l=a.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=s,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Sj(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?im(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=Gk(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,s,n;this.isHorizontal()?(s=this.left,n=this.right):(s=this.top,n=this.bottom,e=!e),this._startPixel=s,this._endPixel=n,this._reversePixels=e,this._length=n-s,this._alignToPixels=this.options.alignToPixels}afterUpdate(){je(this.options.afterUpdate,[this])}beforeSetDimensions(){je(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){je(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),je(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){je(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const s=this.options.ticks;let n,r,i;for(n=0,r=e.length;n<r;n++)i=e[n],i.label=je(s.callback,[i.value,n,e],this)}afterTickToLabelConversion(){je(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){je(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,s=e.ticks,n=rm(this.ticks.length,e.ticks.maxTicksLimit),r=s.minRotation||0,i=s.maxRotation;let a=r,l,c,d;if(!this._isVisible()||!s.display||r>=i||n<=1||!this.isHorizontal()){this.labelRotation=r;return}const u=this._getLabelSizes(),h=u.widest.width,f=u.highest.height,m=vs(this.chart.width-h,0,this.maxWidth);l=e.offset?this.maxWidth/n:m/(n-1),h+6>l&&(l=m/(n-(e.offset?.5:1)),c=this.maxHeight-Yr(e.grid)-s.padding-am(e.title,this.chart.options.font),d=Math.sqrt(h*h+f*f),a=Pu(Math.min(Math.asin(vs((u.highest.height+6)/l,-1,1)),Math.asin(vs(c/d,-1,1))-Math.asin(vs(f/d,-1,1)))),a=Math.max(r,Math.min(i,a))),this.labelRotation=a}afterCalculateLabelRotation(){je(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){je(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:s,options:{ticks:n,title:r,grid:i}}=this,a=this._isVisible(),l=this.isHorizontal();if(a){const c=am(r,s.options.font);if(l?(e.width=this.maxWidth,e.height=Yr(i)+c):(e.height=this.maxHeight,e.width=Yr(i)+c),n.display&&this.ticks.length){const{first:d,last:u,widest:h,highest:f}=this._getLabelSizes(),m=n.padding*2,p=Sn(this.labelRotation),x=Math.cos(p),b=Math.sin(p);if(l){const y=n.mirror?0:b*h.width+x*f.height;e.height=Math.min(this.maxHeight,e.height+y+m)}else{const y=n.mirror?0:x*h.width+b*f.height;e.width=Math.min(this.maxWidth,e.width+y+m)}this._calculatePadding(d,u,b,x)}}this._handleMargins(),l?(this.width=this._length=s.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=s.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,s,n,r){const{ticks:{align:i,padding:a},position:l}=this.options,c=this.labelRotation!==0,d=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,m=0;c?d?(f=r*e.width,m=n*s.height):(f=n*e.height,m=r*s.width):i==="start"?m=s.width:i==="end"?f=e.width:i!=="inner"&&(f=e.width/2,m=s.width/2),this.paddingLeft=Math.max((f-u+a)*this.width/(this.width-u),0),this.paddingRight=Math.max((m-h+a)*this.width/(this.width-h),0)}else{let u=s.height/2,h=e.height/2;i==="start"?(u=0,h=e.height):i==="end"&&(u=s.height,h=0),this.paddingTop=u+a,this.paddingBottom=h+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){je(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:s}=this.options;return s==="top"||s==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let s,n;for(s=0,n=e.length;s<n;s++)Ce(e[s].label)&&(e.splice(s,1),n--,s--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const s=this.options.ticks.sampleSize;let n=this.ticks;s<n.length&&(n=im(n,s)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,s,n){const{ctx:r,_longestTextCache:i}=this,a=[],l=[],c=Math.floor(s/rm(s,n));let d=0,u=0,h,f,m,p,x,b,y,g,v,w,_;for(h=0;h<s;h+=c){if(p=e[h].label,x=this._resolveTickFontOptions(h),r.font=b=x.string,y=i[b]=i[b]||{data:{},gc:[]},g=x.lineHeight,v=w=0,!Ce(p)&&!Re(p))v=Lo(r,y.data,y.gc,v,p),w=g;else if(Re(p))for(f=0,m=p.length;f<m;++f)_=p[f],!Ce(_)&&!Re(_)&&(v=Lo(r,y.data,y.gc,v,_),w+=g);a.push(v),l.push(w),d=Math.max(v,d),u=Math.max(w,u)}n2(i,s);const j=a.indexOf(d),E=l.indexOf(u),A=S=>({width:a[S]||0,height:l[S]||0});return{first:A(0),last:A(s-1),widest:A(j),highest:A(E),widths:a,heights:l}}getLabelForValue(e){return e}getPixelForValue(e,s){return NaN}getValueForPixel(e){}getPixelForTick(e){const s=this.ticks;return e<0||e>s.length-1?null:this.getPixelForValue(s[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const s=this._startPixel+e*this._length;return Z1(this._alignToPixels?pn(this.chart,s,0):s)}getDecimalForPixel(e){const s=(e-this._startPixel)/this._length;return this._reversePixels?1-s:s}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:s}=this;return e<0&&s<0?s:e>0&&s>0?e:0}getContext(e){const s=this.ticks||[];if(e>=0&&e<s.length){const n=s[e];return n.$context||(n.$context=i2(this.getContext(),e,n))}return this.$context||(this.$context=r2(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,s=Sn(this.labelRotation),n=Math.abs(Math.cos(s)),r=Math.abs(Math.sin(s)),i=this._getLabelSizes(),a=e.autoSkipPadding||0,l=i?i.widest.width+a:0,c=i?i.highest.height+a:0;return this.isHorizontal()?c*n>l*r?l/n:c/r:c*r<l*n?c/n:l/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const s=this.axis,n=this.chart,r=this.options,{grid:i,position:a,border:l}=r,c=i.offset,d=this.isHorizontal(),h=this.ticks.length+(c?1:0),f=Yr(i),m=[],p=l.setContext(this.getContext()),x=p.display?p.width:0,b=x/2,y=function(B){return pn(n,B,x)};let g,v,w,_,j,E,A,S,O,P,R,U;if(a==="top")g=y(this.bottom),E=this.bottom-f,S=g-b,P=y(e.top)+b,U=e.bottom;else if(a==="bottom")g=y(this.top),P=e.top,U=y(e.bottom)-b,E=g+b,S=this.top+f;else if(a==="left")g=y(this.right),j=this.right-f,A=g-b,O=y(e.left)+b,R=e.right;else if(a==="right")g=y(this.left),O=e.left,R=y(e.right)-b,j=g+b,A=this.left+f;else if(s==="x"){if(a==="center")g=y((e.top+e.bottom)/2+.5);else if(pe(a)){const B=Object.keys(a)[0],H=a[B];g=y(this.chart.scales[B].getPixelForValue(H))}P=e.top,U=e.bottom,E=g+b,S=E+f}else if(s==="y"){if(a==="center")g=y((e.left+e.right)/2);else if(pe(a)){const B=Object.keys(a)[0],H=a[B];g=y(this.chart.scales[B].getPixelForValue(H))}j=g-b,A=j-f,O=e.left,R=e.right}const K=me(r.ticks.maxTicksLimit,h),T=Math.max(1,Math.ceil(h/K));for(v=0;v<h;v+=T){const B=this.getContext(v),H=i.setContext(B),W=l.setContext(B),q=H.lineWidth,X=H.color,Z=W.dash||[],re=W.dashOffset,M=H.tickWidth,J=H.tickColor,ee=H.tickBorderDash||[],se=H.tickBorderDashOffset;w=s2(this,v,c),w!==void 0&&(_=pn(n,w,q),d?j=A=O=R=_:E=S=P=U=_,m.push({tx1:j,ty1:E,tx2:A,ty2:S,x1:O,y1:P,x2:R,y2:U,width:q,color:X,borderDash:Z,borderDashOffset:re,tickWidth:M,tickColor:J,tickBorderDash:ee,tickBorderDashOffset:se}))}return this._ticksLength=h,this._borderValue=g,m}_computeLabelItems(e){const s=this.axis,n=this.options,{position:r,ticks:i}=n,a=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:d,padding:u,mirror:h}=i,f=Yr(n.grid),m=f+u,p=h?-u:m,x=-Sn(this.labelRotation),b=[];let y,g,v,w,_,j,E,A,S,O,P,R,U="middle";if(r==="top")j=this.bottom-p,E=this._getXAxisLabelAlignment();else if(r==="bottom")j=this.top+p,E=this._getXAxisLabelAlignment();else if(r==="left"){const T=this._getYAxisLabelAlignment(f);E=T.textAlign,_=T.x}else if(r==="right"){const T=this._getYAxisLabelAlignment(f);E=T.textAlign,_=T.x}else if(s==="x"){if(r==="center")j=(e.top+e.bottom)/2+m;else if(pe(r)){const T=Object.keys(r)[0],B=r[T];j=this.chart.scales[T].getPixelForValue(B)+m}E=this._getXAxisLabelAlignment()}else if(s==="y"){if(r==="center")_=(e.left+e.right)/2-m;else if(pe(r)){const T=Object.keys(r)[0],B=r[T];_=this.chart.scales[T].getPixelForValue(B)}E=this._getYAxisLabelAlignment(f).textAlign}s==="y"&&(c==="start"?U="top":c==="end"&&(U="bottom"));const K=this._getLabelSizes();for(y=0,g=l.length;y<g;++y){v=l[y],w=v.label;const T=i.setContext(this.getContext(y));A=this.getPixelForTick(y)+i.labelOffset,S=this._resolveTickFontOptions(y),O=S.lineHeight,P=Re(w)?w.length:1;const B=P/2,H=T.color,W=T.textStrokeColor,q=T.textStrokeWidth;let X=E;a?(_=A,E==="inner"&&(y===g-1?X=this.options.reverse?"left":"right":y===0?X=this.options.reverse?"right":"left":X="center"),r==="top"?d==="near"||x!==0?R=-P*O+O/2:d==="center"?R=-K.highest.height/2-B*O+O:R=-K.highest.height+O/2:d==="near"||x!==0?R=O/2:d==="center"?R=K.highest.height/2-B*O:R=K.highest.height-P*O,h&&(R*=-1),x!==0&&!T.showLabelBackdrop&&(_+=O/2*Math.sin(x))):(j=A,R=(1-P)*O/2);let Z;if(T.showLabelBackdrop){const re=ot(T.backdropPadding),M=K.heights[y],J=K.widths[y];let ee=R-re.top,se=0-re.left;switch(U){case"middle":ee-=M/2;break;case"bottom":ee-=M;break}switch(E){case"center":se-=J/2;break;case"right":se-=J;break;case"inner":y===g-1?se-=J:y>0&&(se-=J/2);break}Z={left:se,top:ee,width:J+re.width,height:M+re.height,color:T.backdropColor}}b.push({label:w,font:S,textOffset:R,options:{rotation:x,color:H,strokeColor:W,strokeWidth:q,textAlign:X,textBaseline:U,translation:[_,j],backdrop:Z}})}return b}_getXAxisLabelAlignment(){const{position:e,ticks:s}=this.options;if(-Sn(this.labelRotation))return e==="top"?"left":"right";let r="center";return s.align==="start"?r="left":s.align==="end"?r="right":s.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:s,ticks:{crossAlign:n,mirror:r,padding:i}}=this.options,a=this._getLabelSizes(),l=e+i,c=a.widest.width;let d,u;return s==="left"?r?(u=this.right+i,n==="near"?d="left":n==="center"?(d="center",u+=c/2):(d="right",u+=c)):(u=this.right-l,n==="near"?d="right":n==="center"?(d="center",u-=c/2):(d="left",u=this.left)):s==="right"?r?(u=this.left+i,n==="near"?d="right":n==="center"?(d="center",u-=c/2):(d="left",u-=c)):(u=this.left+l,n==="near"?d="left":n==="center"?(d="center",u+=c/2):(d="right",u=this.right)):d="right",{textAlign:d,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,s=this.options.position;if(s==="left"||s==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(s==="top"||s==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:s},left:n,top:r,width:i,height:a}=this;s&&(e.save(),e.fillStyle=s,e.fillRect(n,r,i,a),e.restore())}getLineWidthForValue(e){const s=this.options.grid;if(!this._isVisible()||!s.display)return 0;const r=this.ticks.findIndex(i=>i.value===e);return r>=0?s.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const s=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,a;const l=(c,d,u)=>{!u.width||!u.color||(n.save(),n.lineWidth=u.width,n.strokeStyle=u.color,n.setLineDash(u.borderDash||[]),n.lineDashOffset=u.borderDashOffset,n.beginPath(),n.moveTo(c.x,c.y),n.lineTo(d.x,d.y),n.stroke(),n.restore())};if(s.display)for(i=0,a=r.length;i<a;++i){const c=r[i];s.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),s.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:s,options:{border:n,grid:r}}=this,i=n.setContext(this.getContext()),a=n.display?i.width:0;if(!a)return;const l=r.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let d,u,h,f;this.isHorizontal()?(d=pn(e,this.left,a)-a/2,u=pn(e,this.right,l)+l/2,h=f=c):(h=pn(e,this.top,a)-a/2,f=pn(e,this.bottom,l)+l/2,d=u=c),s.save(),s.lineWidth=i.width,s.strokeStyle=i.color,s.beginPath(),s.moveTo(d,h),s.lineTo(u,f),s.stroke(),s.restore()}drawLabels(e){if(!this.options.ticks.display)return;const n=this.ctx,r=this._computeLabelArea();r&&dl(n,r);const i=this.getLabelItems(e);for(const a of i){const l=a.options,c=a.font,d=a.label,u=a.textOffset;Cr(n,d,0,u,c,l)}r&&ul(n)}drawTitle(){const{ctx:e,options:{position:s,title:n,reverse:r}}=this;if(!n.display)return;const i=Ye(n.font),a=ot(n.padding),l=n.align;let c=i.lineHeight/2;s==="bottom"||s==="center"||pe(s)?(c+=a.bottom,Re(n.text)&&(c+=i.lineHeight*(n.text.length-1))):c+=a.top;const{titleX:d,titleY:u,maxWidth:h,rotation:f}=o2(this,c,s,l);Cr(e,n.text,0,0,i,{color:n.color,maxWidth:h,rotation:f,textAlign:a2(l,s,r),textBaseline:"middle",translation:[d,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,s=e.ticks&&e.ticks.z||0,n=me(e.grid&&e.grid.z,-1),r=me(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==sa.prototype.draw?[{z:s,draw:i=>{this.draw(i)}}]:[{z:n,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:s,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const s=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let i,a;for(i=0,a=s.length;i<a;++i){const l=s[i];l[n]===this.id&&(!e||l.type===e)&&r.push(l)}return r}_resolveTickFontOptions(e){const s=this.options.ticks.setContext(this.getContext(e));return Ye(s.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Ra{constructor(e,s,n){this.type=e,this.scope=s,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const s=Object.getPrototypeOf(e);let n;d2(s)&&(n=this.register(s));const r=this.items,i=e.id,a=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in r||(r[i]=e,l2(e,a,n),this.override&&Le.override(e.id,e.overrides)),a}get(e){return this.items[e]}unregister(e){const s=this.items,n=e.id,r=this.scope;n in s&&delete s[n],r&&n in Le[r]&&(delete Le[r][n],this.override&&delete In[n])}}function l2(t,e,s){const n=Wi(Object.create(null),[s?Le.get(s):{},Le.get(e),t.defaults]);Le.set(e,n),t.defaultRoutes&&c2(e,t.defaultRoutes),t.descriptors&&Le.describe(e,t.descriptors)}function c2(t,e){Object.keys(e).forEach(s=>{const n=s.split("."),r=n.pop(),i=[t].concat(n).join("."),a=e[s].split("."),l=a.pop(),c=a.join(".");Le.route(i,r,c,l)})}function d2(t){return"id"in t&&"defaults"in t}class u2{constructor(){this.controllers=new Ra(_i,"datasets",!0),this.elements=new Ra(nn,"elements"),this.plugins=new Ra(Object,"plugins"),this.scales=new Ra(sa,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,s,n){[...s].forEach(r=>{const i=n||this._getRegistryForType(r);n||i.isForType(r)||i===this.plugins&&r.id?this._exec(e,i,r):ve(r,a=>{const l=n||this._getRegistryForType(a);this._exec(e,l,a)})})}_exec(e,s,n){const r=Cu(e);je(n["before"+r],[],n),s[e](n),je(n["after"+r],[],n)}_getRegistryForType(e){for(let s=0;s<this._typedRegistries.length;s++){const n=this._typedRegistries[s];if(n.isForType(e))return n}return this.plugins}_get(e,s,n){const r=s.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+n+".");return r}}var ss=new u2;class h2{constructor(){this._init=[]}notify(e,s,n,r){s==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=r?this._descriptors(e).filter(r):this._descriptors(e),a=this._notify(i,e,s,n);return s==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),a}_notify(e,s,n,r){r=r||{};for(const i of e){const a=i.plugin,l=a[n],c=[s,r,i.options];if(je(l,c,a)===!1&&r.cancelable)return!1}return!0}invalidate(){Ce(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const s=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),s}_createDescriptors(e,s){const n=e&&e.config,r=me(n.options&&n.options.plugins,{}),i=f2(n);return r===!1&&!s?[]:p2(e,i,r,s)}_notifyStateChanges(e){const s=this._oldCache||[],n=this._cache,r=(i,a)=>i.filter(l=>!a.some(c=>l.plugin.id===c.plugin.id));this._notify(r(s,n),e,"stop"),this._notify(r(n,s),e,"start")}}function f2(t){const e={},s=[],n=Object.keys(ss.plugins.items);for(let i=0;i<n.length;i++)s.push(ss.getPlugin(n[i]));const r=t.plugins||[];for(let i=0;i<r.length;i++){const a=r[i];s.indexOf(a)===-1&&(s.push(a),e[a.id]=!0)}return{plugins:s,localIds:e}}function m2(t,e){return!e&&t===!1?null:t===!0?{}:t}function p2(t,{plugins:e,localIds:s},n,r){const i=[],a=t.getContext();for(const l of e){const c=l.id,d=m2(n[c],r);d!==null&&i.push({plugin:l,options:g2(t.config,{plugin:l,local:s[c]},d,a)})}return i}function g2(t,{plugin:e,local:s},n,r){const i=t.pluginScopeKeys(e),a=t.getOptionScopes(n,i);return s&&e.defaults&&a.push(e.defaults),t.createResolver(a,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function xd(t,e){const s=Le.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||s.indexAxis||"x"}function x2(t,e){let s=t;return t==="_index_"?s=e:t==="_value_"&&(s=e==="x"?"y":"x"),s}function y2(t,e){return t===e?"_index_":"_value_"}function om(t){if(t==="x"||t==="y"||t==="r")return t}function v2(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function yd(t,...e){if(om(t))return t;for(const s of e){const n=s.axis||v2(s.position)||t.length>1&&om(t[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function lm(t,e,s){if(s[e+"AxisID"]===t)return{axis:e}}function b2(t,e){if(e.data&&e.data.datasets){const s=e.data.datasets.filter(n=>n.xAxisID===t||n.yAxisID===t);if(s.length)return lm(t,"x",s[0])||lm(t,"y",s[0])}return{}}function w2(t,e){const s=In[t.type]||{scales:{}},n=e.scales||{},r=xd(t.type,e),i=Object.create(null);return Object.keys(n).forEach(a=>{const l=n[a];if(!pe(l))return console.error(`Invalid scale configuration for scale: ${a}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const c=yd(a,l,b2(a,t),Le.scales[l.type]),d=y2(c,r),u=s.scales||{};i[a]=yi(Object.create(null),[{axis:c},l,u[c],u[d]])}),t.data.datasets.forEach(a=>{const l=a.type||t.type,c=a.indexAxis||xd(l,e),u=(In[l]||{}).scales||{};Object.keys(u).forEach(h=>{const f=x2(h,c),m=a[f+"AxisID"]||f;i[m]=i[m]||Object.create(null),yi(i[m],[{axis:f},n[m],u[h]])})}),Object.keys(i).forEach(a=>{const l=i[a];yi(l,[Le.scales[l.type],Le.scale])}),i}function gx(t){const e=t.options||(t.options={});e.plugins=me(e.plugins,{}),e.scales=w2(t,e)}function xx(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function _2(t){return t=t||{},t.data=xx(t.data),gx(t),t}const cm=new Map,yx=new Set;function La(t,e){let s=cm.get(t);return s||(s=e(),cm.set(t,s),yx.add(s)),s}const Gr=(t,e,s)=>{const n=Hi(e,s);n!==void 0&&t.add(n)};class j2{constructor(e){this._config=_2(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=xx(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),gx(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return La(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,s){return La(`${e}.transition.${s}`,()=>[[`datasets.${e}.transitions.${s}`,`transitions.${s}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,s){return La(`${e}-${s}`,()=>[[`datasets.${e}.elements.${s}`,`datasets.${e}`,`elements.${s}`,""]])}pluginScopeKeys(e){const s=e.id,n=this.type;return La(`${n}-plugin-${s}`,()=>[[`plugins.${s}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,s){const n=this._scopeCache;let r=n.get(e);return(!r||s)&&(r=new Map,n.set(e,r)),r}getOptionScopes(e,s,n){const{options:r,type:i}=this,a=this._cachedScopes(e,n),l=a.get(s);if(l)return l;const c=new Set;s.forEach(u=>{e&&(c.add(e),u.forEach(h=>Gr(c,e,h))),u.forEach(h=>Gr(c,r,h)),u.forEach(h=>Gr(c,In[i]||{},h)),u.forEach(h=>Gr(c,Le,h)),u.forEach(h=>Gr(c,pd,h))});const d=Array.from(c);return d.length===0&&d.push(Object.create(null)),yx.has(s)&&a.set(s,d),d}chartOptionScopes(){const{options:e,type:s}=this;return[e,In[s]||{},Le.datasets[s]||{},{type:s},Le,pd]}resolveNamedOptions(e,s,n,r=[""]){const i={$shared:!0},{resolver:a,subPrefixes:l}=dm(this._resolverCache,e,r);let c=a;if(N2(a,s)){i.$shared=!1,n=sn(n)?n():n;const d=this.createResolver(e,n,l);c=Pr(a,n,d)}for(const d of s)i[d]=c[d];return i}createResolver(e,s,n=[""],r){const{resolver:i}=dm(this._resolverCache,e,n);return pe(s)?Pr(i,s,void 0,r):i}}function dm(t,e,s){let n=t.get(e);n||(n=new Map,t.set(e,n));const r=s.join();let i=n.get(r);return i||(i={resolver:Au(e,s),subPrefixes:s.filter(l=>!l.toLowerCase().includes("hover"))},n.set(r,i)),i}const k2=t=>pe(t)&&Object.getOwnPropertyNames(t).some(e=>sn(t[e]));function N2(t,e){const{isScriptable:s,isIndexable:n}=J0(t);for(const r of e){const i=s(r),a=n(r),l=(a||i)&&t[r];if(i&&(sn(l)||k2(l))||a&&Re(l))return!0}return!1}var S2="4.5.0";const C2=["top","bottom","left","right","chartArea"];function um(t,e){return t==="top"||t==="bottom"||C2.indexOf(t)===-1&&e==="x"}function hm(t,e){return function(s,n){return s[t]===n[t]?s[e]-n[e]:s[t]-n[t]}}function fm(t){const e=t.chart,s=e.options.animation;e.notifyPlugins("afterRender"),je(s&&s.onComplete,[t],e)}function P2(t){const e=t.chart,s=e.options.animation;je(s&&s.onProgress,[t],e)}function vx(t){return Ru()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Za={},mm=t=>{const e=vx(t);return Object.values(Za).filter(s=>s.canvas===e).pop()};function E2(t,e,s){const n=Object.keys(t);for(const r of n){const i=+r;if(i>=e){const a=t[r];delete t[r],(s>0||i>e)&&(t[i+s]=a)}}}function T2(t,e,s,n){return!s||t.type==="mouseout"?null:n?e:t}var As;let fl=(As=class{static register(...e){ss.add(...e),pm()}static unregister(...e){ss.remove(...e),pm()}constructor(e,s){const n=this.config=new j2(s),r=vx(e),i=mm(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const a=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||Yk(r)),this.platform.updateConfig(n);const l=this.platform.acquireContext(r,a.aspectRatio),c=l&&l.canvas,d=c&&c.height,u=c&&c.width;if(this.id=I1(),this.ctx=l,this.canvas=c,this.width=u,this.height=d,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new h2,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=rj(h=>this.update(h),a.resizeDelay||0),this._dataChanges=[],Za[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}ds.listen(this,"complete",fm),ds.listen(this,"progress",P2),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:s},width:n,height:r,_aspectRatio:i}=this;return Ce(e)?s&&i?i:r?n/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return ss}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():zf(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Bf(this.canvas,this.ctx),this}stop(){return ds.stop(this),this}resize(e,s){ds.running(this)?this._resizeBeforeDraw={width:e,height:s}:this._resize(e,s)}_resize(e,s){const n=this.options,r=this.canvas,i=n.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(r,e,s,i),l=n.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,zf(this,l,!0)&&(this.notifyPlugins("resize",{size:a}),je(n.onResize,[this,a],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const s=this.options.scales||{};ve(s,(n,r)=>{n.id=r})}buildOrUpdateScales(){const e=this.options,s=e.scales,n=this.scales,r=Object.keys(n).reduce((a,l)=>(a[l]=!1,a),{});let i=[];s&&(i=i.concat(Object.keys(s).map(a=>{const l=s[a],c=yd(a,l),d=c==="r",u=c==="x";return{options:l,dposition:d?"chartArea":u?"bottom":"left",dtype:d?"radialLinear":u?"category":"linear"}}))),ve(i,a=>{const l=a.options,c=l.id,d=yd(c,l),u=me(l.type,a.dtype);(l.position===void 0||um(l.position,d)!==um(a.dposition))&&(l.position=a.dposition),r[c]=!0;let h=null;if(c in n&&n[c].type===u)h=n[c];else{const f=ss.getScale(u);h=new f({id:c,type:u,ctx:this.ctx,chart:this}),n[h.id]=h}h.init(l,e)}),ve(r,(a,l)=>{a||delete n[l]}),ve(n,a=>{Fs.configure(this,a,a.options),Fs.addBox(this,a)})}_updateMetasets(){const e=this._metasets,s=this.data.datasets.length,n=e.length;if(e.sort((r,i)=>r.index-i.index),n>s){for(let r=s;r<n;++r)this._destroyDatasetMeta(r);e.splice(s,n-s)}this._sortedMetasets=e.slice(0).sort(hm("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:s}}=this;e.length>s.length&&delete this._stacks,e.forEach((n,r)=>{s.filter(i=>i===n._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],s=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=s.length;n<r;n++){const i=s[n];let a=this.getDatasetMeta(n);const l=i.type||this.config.type;if(a.type&&a.type!==l&&(this._destroyDatasetMeta(n),a=this.getDatasetMeta(n)),a.type=l,a.indexAxis=i.indexAxis||xd(l,this.options),a.order=i.order||0,a.index=n,a.label=""+i.label,a.visible=this.isDatasetVisible(n),a.controller)a.controller.updateIndex(n),a.controller.linkScales();else{const c=ss.getController(l),{datasetElementType:d,dataElementType:u}=Le.datasets[l];Object.assign(c,{dataElementType:ss.getElement(u),datasetElementType:d&&ss.getElement(d)}),a.controller=new c(this,n),e.push(a.controller)}}return this._updateMetasets(),e}_resetElements(){ve(this.data.datasets,(e,s)=>{this.getDatasetMeta(s).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const s=this.config;s.update();const n=this._options=s.createResolver(s.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let d=0,u=this.data.datasets.length;d<u;d++){const{controller:h}=this.getDatasetMeta(d),f=!r&&i.indexOf(h)===-1;h.buildOrUpdateElements(f),a=Math.max(+h.getMaxOverflow(),a)}a=this._minPadding=n.layout.autoPadding?a:0,this._updateLayout(a),r||ve(i,d=>{d.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(hm("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){ve(this.scales,e=>{Fs.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,s=new Set(Object.keys(this._listeners)),n=new Set(e.events);(!Pf(s,n)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,s=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:i}of s){const a=n==="_removeElements"?-i:i;E2(e,r,a)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const s=this.data.datasets.length,n=i=>new Set(e.filter(a=>a[0]===i).map((a,l)=>l+","+a.splice(1).join(","))),r=n(0);for(let i=1;i<s;i++)if(!Pf(r,n(i)))return;return Array.from(r).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Fs.update(this,this.width,this.height,e);const s=this.chartArea,n=s.width<=0||s.height<=0;this._layers=[],ve(this.boxes,r=>{n&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,i)=>{r._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let s=0,n=this.data.datasets.length;s<n;++s)this.getDatasetMeta(s).controller.configure();for(let s=0,n=this.data.datasets.length;s<n;++s)this._updateDataset(s,sn(e)?e({datasetIndex:s}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,s){const n=this.getDatasetMeta(e),r={meta:n,index:e,mode:s,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(n.controller._update(s),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ds.has(this)?this.attached&&!ds.running(this)&&ds.start(this):(this.draw(),fm({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:n,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const s=this._layers;for(e=0;e<s.length&&s[e].z<=0;++e)s[e].draw(this.chartArea);for(this._drawDatasets();e<s.length;++e)s[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const s=this._sortedMetasets,n=[];let r,i;for(r=0,i=s.length;r<i;++r){const a=s[r];(!e||a.visible)&&n.push(a)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let s=e.length-1;s>=0;--s)this._drawDataset(e[s]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const s=this.ctx,n={meta:e,index:e.index,cancelable:!0},r=lx(this,e);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(r&&dl(s,r),e.controller.draw(),r&&ul(s),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return bs(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,s,n,r){const i=Ck.modes[s];return typeof i=="function"?i(this,e,n,r):[]}getDatasetMeta(e){const s=this.data.datasets[e],n=this._metasets;let r=n.filter(i=>i&&i._dataset===s).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:s&&s.order||0,index:e,_dataset:s,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=dn(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const s=this.data.datasets[e];if(!s)return!1;const n=this.getDatasetMeta(e);return typeof n.hidden=="boolean"?!n.hidden:!s.hidden}setDatasetVisibility(e,s){const n=this.getDatasetMeta(e);n.hidden=!s}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,s,n){const r=n?"show":"hide",i=this.getDatasetMeta(e),a=i.controller._resolveAnimations(void 0,r);Oo(s)?(i.data[s].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),a.update(i,{visible:n}),this.update(l=>l.datasetIndex===e?r:void 0))}hide(e,s){this._updateVisibility(e,s,!1)}show(e,s){this._updateVisibility(e,s,!0)}_destroyDatasetMeta(e){const s=this._metasets[e];s&&s.controller&&s.controller._destroy(),delete this._metasets[e]}_stop(){let e,s;for(this.stop(),ds.remove(this),e=0,s=this.data.datasets.length;e<s;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:s}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Bf(e,s),this.platform.releaseContext(s),this.canvas=null,this.ctx=null),delete Za[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,s=this.platform,n=(i,a)=>{s.addEventListener(this,i,a),e[i]=a},r=(i,a,l)=>{i.offsetX=a,i.offsetY=l,this._eventHandler(i)};ve(this.options.events,i=>n(i,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,s=this.platform,n=(c,d)=>{s.addEventListener(this,c,d),e[c]=d},r=(c,d)=>{e[c]&&(s.removeEventListener(this,c,d),delete e[c])},i=(c,d)=>{this.canvas&&this.resize(c,d)};let a;const l=()=>{r("attach",l),this.attached=!0,this.resize(),n("resize",i),n("detach",a)};a=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),n("attach",l)},s.isAttached(this.canvas)?l():a()}unbindEvents(){ve(this._listeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._listeners={},ve(this._responsiveListeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,s,n){const r=n?"set":"remove";let i,a,l,c;for(s==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),l=0,c=e.length;l<c;++l){a=e[l];const d=a&&this.getDatasetMeta(a.datasetIndex).controller;d&&d[r+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const s=this._active||[],n=e.map(({datasetIndex:i,index:a})=>{const l=this.getDatasetMeta(i);if(!l)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:l.data[a],index:a}});!To(n,s)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,s))}notifyPlugins(e,s,n){return this._plugins.notify(this,e,s,n)}isPluginEnabled(e){return this._plugins._cache.filter(s=>s.plugin.id===e).length===1}_updateHoverStyles(e,s,n){const r=this.options.hover,i=(c,d)=>c.filter(u=>!d.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),a=i(s,e),l=n?e:i(e,s);a.length&&this.updateHoverStyle(a,r.mode,!1),l.length&&r.mode&&this.updateHoverStyle(l,r.mode,!0)}_eventHandler(e,s){const n={event:e,replay:s,cancelable:!0,inChartArea:this.isPointInArea(e)},r=a=>(a.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",n,r)===!1)return;const i=this._handleEvent(e,s,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(i||n.changed)&&this.render(),this}_handleEvent(e,s,n){const{_active:r=[],options:i}=this,a=s,l=this._getActiveElements(e,r,n,a),c=H1(e),d=T2(e,this._lastEvent,n,c);n&&(this._lastEvent=null,je(i.onHover,[e,l,this],this),c&&je(i.onClick,[e,l,this],this));const u=!To(l,r);return(u||s)&&(this._active=l,this._updateHoverStyles(l,r,s)),this._lastEvent=d,u}_getActiveElements(e,s,n,r){if(e.type==="mouseout")return[];if(!n)return s;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,r)}},ce(As,"defaults",Le),ce(As,"instances",Za),ce(As,"overrides",In),ce(As,"registry",ss),ce(As,"version",S2),ce(As,"getChart",mm),As);function pm(){return ve(fl.instances,t=>t._plugins.invalidate())}function bx(t,e,s=e){t.lineCap=me(s.borderCapStyle,e.borderCapStyle),t.setLineDash(me(s.borderDash,e.borderDash)),t.lineDashOffset=me(s.borderDashOffset,e.borderDashOffset),t.lineJoin=me(s.borderJoinStyle,e.borderJoinStyle),t.lineWidth=me(s.borderWidth,e.borderWidth),t.strokeStyle=me(s.borderColor,e.borderColor)}function A2(t,e,s){t.lineTo(s.x,s.y)}function O2(t){return t.stepped?gj:t.tension||t.cubicInterpolationMode==="monotone"?xj:A2}function wx(t,e,s={}){const n=t.length,{start:r=0,end:i=n-1}=s,{start:a,end:l}=e,c=Math.max(r,a),d=Math.min(i,l),u=r<a&&i<a||r>l&&i>l;return{count:n,start:c,loop:e.loop,ilen:d<c&&!u?n+d-c:d-c}}function M2(t,e,s,n){const{points:r,options:i}=e,{count:a,start:l,loop:c,ilen:d}=wx(r,s,n),u=O2(i);let{move:h=!0,reverse:f}=n||{},m,p,x;for(m=0;m<=d;++m)p=r[(l+(f?d-m:m))%a],!p.skip&&(h?(t.moveTo(p.x,p.y),h=!1):u(t,x,p,f,i.stepped),x=p);return c&&(p=r[(l+(f?d:0))%a],u(t,x,p,f,i.stepped)),!!c}function R2(t,e,s,n){const r=e.points,{count:i,start:a,ilen:l}=wx(r,s,n),{move:c=!0,reverse:d}=n||{};let u=0,h=0,f,m,p,x,b,y;const g=w=>(a+(d?l-w:w))%i,v=()=>{x!==b&&(t.lineTo(u,b),t.lineTo(u,x),t.lineTo(u,y))};for(c&&(m=r[g(0)],t.moveTo(m.x,m.y)),f=0;f<=l;++f){if(m=r[g(f)],m.skip)continue;const w=m.x,_=m.y,j=w|0;j===p?(_<x?x=_:_>b&&(b=_),u=(h*u+w)/++h):(v(),t.lineTo(w,_),p=j,h=0,x=b=_),y=_}v()}function vd(t){const e=t.options,s=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!s?R2:M2}function L2(t){return t.stepped?Xj:t.tension||t.cubicInterpolationMode==="monotone"?Jj:wn}function D2(t,e,s,n){let r=e._path;r||(r=e._path=new Path2D,e.path(r,s,n)&&r.closePath()),bx(t,e.options),t.stroke(r)}function B2(t,e,s,n){const{segments:r,options:i}=e,a=vd(e);for(const l of r)bx(t,i,l.style),t.beginPath(),a(t,e,l,{start:s,end:s+n-1})&&t.closePath(),t.stroke()}const I2=typeof Path2D=="function";function $2(t,e,s,n){I2&&!e.options.segment?D2(t,e,s,n):B2(t,e,s,n)}class Us extends nn{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,s){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const r=n.spanGaps?this._loop:this._fullLoop;Wj(this._points,n,e,r,s),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=rk(this,this.options.segment))}first(){const e=this.segments,s=this.points;return e.length&&s[e[0].start]}last(){const e=this.segments,s=this.points,n=e.length;return n&&s[e[n-1].end]}interpolate(e,s){const n=this.options,r=e[s],i=this.points,a=ox(this,{property:s,start:r,end:r});if(!a.length)return;const l=[],c=L2(n);let d,u;for(d=0,u=a.length;d<u;++d){const{start:h,end:f}=a[d],m=i[h],p=i[f];if(m===p){l.push(m);continue}const x=Math.abs((r-m[s])/(p[s]-m[s])),b=c(m,p,x,n.stepped);b[s]=e[s],l.push(b)}return l.length===1?l[0]:l}pathSegment(e,s,n){return vd(this)(e,this,s,n)}path(e,s,n){const r=this.segments,i=vd(this);let a=this._loop;s=s||0,n=n||this.points.length-s;for(const l of r)a&=i(e,this,l,{start:s,end:s+n-1});return!!a}draw(e,s,n,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),$2(e,this,n,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ce(Us,"id","line"),ce(Us,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ce(Us,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ce(Us,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function gm(t,e,s,n){const r=t.options,{[s]:i}=t.getProps([s],n);return Math.abs(e-i)<r.radius+r.hitRadius}class eo extends nn{constructor(s){super();ce(this,"parsed");ce(this,"skip");ce(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,s&&Object.assign(this,s)}inRange(s,n,r){const i=this.options,{x:a,y:l}=this.getProps(["x","y"],r);return Math.pow(s-a,2)+Math.pow(n-l,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(s,n){return gm(this,s,"x",n)}inYRange(s,n){return gm(this,s,"y",n)}getCenterPoint(s){const{x:n,y:r}=this.getProps(["x","y"],s);return{x:n,y:r}}size(s){s=s||this.options||{};let n=s.radius||0;n=Math.max(n,n&&s.hoverRadius||0);const r=n&&s.borderWidth||0;return(n+r)*2}draw(s,n){const r=this.options;this.skip||r.radius<.1||!bs(this,n,this.size(r)/2)||(s.strokeStyle=r.borderColor,s.lineWidth=r.borderWidth,s.fillStyle=r.backgroundColor,gd(s,r,this.x,this.y))}getRange(){const s=this.options||{};return s.radius+s.hitRadius}}ce(eo,"id","point"),ce(eo,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ce(eo,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function z2(t,e,s){const n=t.segments,r=t.points,i=e.points,a=[];for(const l of n){let{start:c,end:d}=l;d=ml(c,d,r);const u=bd(s,r[c],r[d],l.loop);if(!e.segments){a.push({source:l,target:u,start:r[c],end:r[d]});continue}const h=ox(e,u);for(const f of h){const m=bd(s,i[f.start],i[f.end],f.loop),p=ax(l,r,m);for(const x of p)a.push({source:x,target:f,start:{[s]:xm(u,m,"start",Math.max)},end:{[s]:xm(u,m,"end",Math.min)}})}}return a}function bd(t,e,s,n){if(n)return;let r=e[t],i=s[t];return t==="angle"&&(r=_t(r),i=_t(i)),{property:t,start:r,end:i}}function F2(t,e){const{x:s=null,y:n=null}=t||{},r=e.points,i=[];return e.segments.forEach(({start:a,end:l})=>{l=ml(a,l,r);const c=r[a],d=r[l];n!==null?(i.push({x:c.x,y:n}),i.push({x:d.x,y:n})):s!==null&&(i.push({x:s,y:c.y}),i.push({x:s,y:d.y}))}),i}function ml(t,e,s){for(;e>t;e--){const n=s[e];if(!isNaN(n.x)&&!isNaN(n.y))break}return e}function xm(t,e,s,n){return t&&e?n(t[s],e[s]):t?t[s]:e?e[s]:0}function _x(t,e){let s=[],n=!1;return Re(t)?(n=!0,s=t):s=F2(t,e),s.length?new Us({points:s,options:{tension:0},_loop:n,_fullLoop:n}):null}function ym(t){return t&&t.fill!==!1}function U2(t,e,s){let r=t[e].fill;const i=[e];let a;if(!s)return r;for(;r!==!1&&i.indexOf(r)===-1;){if(!st(r))return r;if(a=t[r],!a)return!1;if(a.visible)return r;i.push(r),r=a.fill}return!1}function W2(t,e,s){const n=K2(t);if(pe(n))return isNaN(n.value)?!1:n;let r=parseFloat(n);return st(r)&&Math.floor(r)===r?H2(n[0],e,r,s):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function H2(t,e,s,n){return(t==="-"||t==="+")&&(s=e+s),s===e||s<0||s>=n?!1:s}function V2(t,e){let s=null;return t==="start"?s=e.bottom:t==="end"?s=e.top:pe(t)?s=e.getPixelForValue(t.value):e.getBasePixel&&(s=e.getBasePixel()),s}function q2(t,e,s){let n;return t==="start"?n=s:t==="end"?n=e.options.reverse?e.min:e.max:pe(t)?n=t.value:n=e.getBaseValue(),n}function K2(t){const e=t.options,s=e.fill;let n=me(s&&s.target,s);return n===void 0&&(n=!!e.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function Y2(t){const{scale:e,index:s,line:n}=t,r=[],i=n.segments,a=n.points,l=G2(e,s);l.push(_x({x:null,y:e.bottom},n));for(let c=0;c<i.length;c++){const d=i[c];for(let u=d.start;u<=d.end;u++)Q2(r,a[u],l)}return new Us({points:r,options:{}})}function G2(t,e){const s=[],n=t.getMatchingVisibleMetas("line");for(let r=0;r<n.length;r++){const i=n[r];if(i.index===e)break;i.hidden||s.unshift(i.dataset)}return s}function Q2(t,e,s){const n=[];for(let r=0;r<s.length;r++){const i=s[r],{first:a,last:l,point:c}=X2(i,e,"x");if(!(!c||a&&l)){if(a)n.unshift(c);else if(t.push(c),!l)break}}t.push(...n)}function X2(t,e,s){const n=t.interpolate(e,s);if(!n)return{};const r=n[s],i=t.segments,a=t.points;let l=!1,c=!1;for(let d=0;d<i.length;d++){const u=i[d],h=a[u.start][s],f=a[u.end][s];if(cr(r,h,f)){l=r===h,c=r===f;break}}return{first:l,last:c,point:n}}class jx{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,s,n){const{x:r,y:i,radius:a}=this;return s=s||{start:0,end:Ct},e.arc(r,i,a,s.end,s.start,!0),!n.bounds}interpolate(e){const{x:s,y:n,radius:r}=this,i=e.angle;return{x:s+Math.cos(i)*r,y:n+Math.sin(i)*r,angle:i}}}function J2(t){const{chart:e,fill:s,line:n}=t;if(st(s))return Z2(e,s);if(s==="stack")return Y2(t);if(s==="shape")return!0;const r=eN(t);return r instanceof jx?r:_x(r,n)}function Z2(t,e){const s=t.getDatasetMeta(e);return s&&t.isDatasetVisible(e)?s.dataset:null}function eN(t){return(t.scale||{}).getPointPositionForValue?sN(t):tN(t)}function tN(t){const{scale:e={},fill:s}=t,n=V2(s,e);if(st(n)){const r=e.isHorizontal();return{x:r?n:null,y:r?null:n}}return null}function sN(t){const{scale:e,fill:s}=t,n=e.options,r=e.getLabels().length,i=n.reverse?e.max:e.min,a=q2(s,e,i),l=[];if(n.grid.circular){const c=e.getPointPositionForValue(0,i);return new jx({x:c.x,y:c.y,radius:e.getDistanceFromCenterForValue(a)})}for(let c=0;c<r;++c)l.push(e.getPointPositionForValue(c,a));return l}function ic(t,e,s){const n=J2(e),{chart:r,index:i,line:a,scale:l,axis:c}=e,d=a.options,u=d.fill,h=d.backgroundColor,{above:f=h,below:m=h}=u||{},p=r.getDatasetMeta(i),x=lx(r,p);n&&a.points.length&&(dl(t,s),nN(t,{line:a,target:n,above:f,below:m,area:s,scale:l,axis:c,clip:x}),ul(t))}function nN(t,e){const{line:s,target:n,above:r,below:i,area:a,scale:l,clip:c}=e,d=s._loop?"angle":e.axis;t.save();let u=i;i!==r&&(d==="x"?(vm(t,n,a.top),ac(t,{line:s,target:n,color:r,scale:l,property:d,clip:c}),t.restore(),t.save(),vm(t,n,a.bottom)):d==="y"&&(bm(t,n,a.left),ac(t,{line:s,target:n,color:i,scale:l,property:d,clip:c}),t.restore(),t.save(),bm(t,n,a.right),u=r)),ac(t,{line:s,target:n,color:u,scale:l,property:d,clip:c}),t.restore()}function vm(t,e,s){const{segments:n,points:r}=e;let i=!0,a=!1;t.beginPath();for(const l of n){const{start:c,end:d}=l,u=r[c],h=r[ml(c,d,r)];i?(t.moveTo(u.x,u.y),i=!1):(t.lineTo(u.x,s),t.lineTo(u.x,u.y)),a=!!e.pathSegment(t,l,{move:a}),a?t.closePath():t.lineTo(h.x,s)}t.lineTo(e.first().x,s),t.closePath(),t.clip()}function bm(t,e,s){const{segments:n,points:r}=e;let i=!0,a=!1;t.beginPath();for(const l of n){const{start:c,end:d}=l,u=r[c],h=r[ml(c,d,r)];i?(t.moveTo(u.x,u.y),i=!1):(t.lineTo(s,u.y),t.lineTo(u.x,u.y)),a=!!e.pathSegment(t,l,{move:a}),a?t.closePath():t.lineTo(s,h.y)}t.lineTo(s,e.first().y),t.closePath(),t.clip()}function ac(t,e){const{line:s,target:n,property:r,color:i,scale:a,clip:l}=e,c=z2(s,n,r);for(const{source:d,target:u,start:h,end:f}of c){const{style:{backgroundColor:m=i}={}}=d,p=n!==!0;t.save(),t.fillStyle=m,rN(t,a,l,p&&bd(r,h,f)),t.beginPath();const x=!!s.pathSegment(t,d);let b;if(p){x?t.closePath():wm(t,n,f,r);const y=!!n.pathSegment(t,u,{move:x,reverse:!0});b=x&&y,b||wm(t,n,h,r)}t.closePath(),t.fill(b?"evenodd":"nonzero"),t.restore()}}function rN(t,e,s,n){const r=e.chart.chartArea,{property:i,start:a,end:l}=n||{};if(i==="x"||i==="y"){let c,d,u,h;i==="x"?(c=a,d=r.top,u=l,h=r.bottom):(c=r.left,d=a,u=r.right,h=l),t.beginPath(),s&&(c=Math.max(c,s.left),u=Math.min(u,s.right),d=Math.max(d,s.top),h=Math.min(h,s.bottom)),t.rect(c,d,u-c,h-d),t.clip()}}function wm(t,e,s,n){const r=e.interpolate(s,n);r&&t.lineTo(r.x,r.y)}var iN={id:"filler",afterDatasetsUpdate(t,e,s){const n=(t.data.datasets||[]).length,r=[];let i,a,l,c;for(a=0;a<n;++a)i=t.getDatasetMeta(a),l=i.dataset,c=null,l&&l.options&&l instanceof Us&&(c={visible:t.isDatasetVisible(a),index:a,fill:W2(l,a,n),chart:t,axis:i.controller.options.indexAxis,scale:i.vScale,line:l}),i.$filler=c,r.push(c);for(a=0;a<n;++a)c=r[a],!(!c||c.fill===!1)&&(c.fill=U2(r,a,s.propagate))},beforeDraw(t,e,s){const n=s.drawTime==="beforeDraw",r=t.getSortedVisibleDatasetMetas(),i=t.chartArea;for(let a=r.length-1;a>=0;--a){const l=r[a].$filler;l&&(l.line.updateControlPoints(i,l.axis),n&&l.fill&&ic(t.ctx,l,i))}},beforeDatasetsDraw(t,e,s){if(s.drawTime!=="beforeDatasetsDraw")return;const n=t.getSortedVisibleDatasetMetas();for(let r=n.length-1;r>=0;--r){const i=n[r].$filler;ym(i)&&ic(t.ctx,i,t.chartArea)}},beforeDatasetDraw(t,e,s){const n=e.meta.$filler;!ym(n)||s.drawTime!=="beforeDatasetDraw"||ic(t.ctx,n,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const _m=(t,e)=>{let{boxHeight:s=e,boxWidth:n=e}=t;return t.usePointStyle&&(s=Math.min(s,e),n=t.pointStyleWidth||Math.min(n,e)),{boxWidth:n,boxHeight:s,itemHeight:Math.max(e,s)}},aN=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class jm extends nn{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,s,n){this.maxWidth=e,this.maxHeight=s,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let s=je(e.generateLabels,[this.chart],this)||[];e.filter&&(s=s.filter(n=>e.filter(n,this.chart.data))),e.sort&&(s=s.sort((n,r)=>e.sort(n,r,this.chart.data))),this.options.reverse&&s.reverse(),this.legendItems=s}fit(){const{options:e,ctx:s}=this;if(!e.display){this.width=this.height=0;return}const n=e.labels,r=Ye(n.font),i=r.size,a=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=_m(n,i);let d,u;s.font=r.string,this.isHorizontal()?(d=this.maxWidth,u=this._fitRows(a,i,l,c)+10):(u=this.maxHeight,d=this._fitCols(a,r,l,c)+10),this.width=Math.min(d,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,s,n,r){const{ctx:i,maxWidth:a,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],d=this.lineWidths=[0],u=r+l;let h=e;i.textAlign="left",i.textBaseline="middle";let f=-1,m=-u;return this.legendItems.forEach((p,x)=>{const b=n+s/2+i.measureText(p.text).width;(x===0||d[d.length-1]+b+2*l>a)&&(h+=u,d[d.length-(x>0?0:1)]=0,m+=u,f++),c[x]={left:0,top:m,row:f,width:b,height:r},d[d.length-1]+=b+l}),h}_fitCols(e,s,n,r){const{ctx:i,maxHeight:a,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],d=this.columnSizes=[],u=a-e;let h=l,f=0,m=0,p=0,x=0;return this.legendItems.forEach((b,y)=>{const{itemWidth:g,itemHeight:v}=oN(n,s,i,b,r);y>0&&m+v+2*l>u&&(h+=f+l,d.push({width:f,height:m}),p+=f+l,x++,f=m=0),c[y]={left:p,top:m,col:x,width:g,height:v},f=Math.max(f,g),m+=v+l}),h+=f,d.push({width:f,height:m}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:s,options:{align:n,labels:{padding:r},rtl:i}}=this,a=xr(i,this.left,this.width);if(this.isHorizontal()){let l=0,c=bt(n,this.left+r,this.right-this.lineWidths[l]);for(const d of s)l!==d.row&&(l=d.row,c=bt(n,this.left+r,this.right-this.lineWidths[l])),d.top+=this.top+e+r,d.left=a.leftForLtr(a.x(c),d.width),c+=d.width+r}else{let l=0,c=bt(n,this.top+e+r,this.bottom-this.columnSizes[l].height);for(const d of s)d.col!==l&&(l=d.col,c=bt(n,this.top+e+r,this.bottom-this.columnSizes[l].height)),d.top=c,d.left+=this.left+r,d.left=a.leftForLtr(a.x(d.left),d.width),c+=d.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;dl(e,this),this._draw(),ul(e)}}_draw(){const{options:e,columnSizes:s,lineWidths:n,ctx:r}=this,{align:i,labels:a}=e,l=Le.color,c=xr(e.rtl,this.left,this.width),d=Ye(a.font),{padding:u}=a,h=d.size,f=h/2;let m;this.drawTitle(),r.textAlign=c.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=d.string;const{boxWidth:p,boxHeight:x,itemHeight:b}=_m(a,h),y=function(j,E,A){if(isNaN(p)||p<=0||isNaN(x)||x<0)return;r.save();const S=me(A.lineWidth,1);if(r.fillStyle=me(A.fillStyle,l),r.lineCap=me(A.lineCap,"butt"),r.lineDashOffset=me(A.lineDashOffset,0),r.lineJoin=me(A.lineJoin,"miter"),r.lineWidth=S,r.strokeStyle=me(A.strokeStyle,l),r.setLineDash(me(A.lineDash,[])),a.usePointStyle){const O={radius:x*Math.SQRT2/2,pointStyle:A.pointStyle,rotation:A.rotation,borderWidth:S},P=c.xPlus(j,p/2),R=E+f;Q0(r,O,P,R,a.pointStyleWidth&&p)}else{const O=E+Math.max((h-x)/2,0),P=c.leftForLtr(j,p),R=gr(A.borderRadius);r.beginPath(),Object.values(R).some(U=>U!==0)?Do(r,{x:P,y:O,w:p,h:x,radius:R}):r.rect(P,O,p,x),r.fill(),S!==0&&r.stroke()}r.restore()},g=function(j,E,A){Cr(r,A.text,j,E+b/2,d,{strikethrough:A.hidden,textAlign:c.textAlign(A.textAlign)})},v=this.isHorizontal(),w=this._computeTitleHeight();v?m={x:bt(i,this.left+u,this.right-n[0]),y:this.top+u+w,line:0}:m={x:this.left+u,y:bt(i,this.top+w+u,this.bottom-s[0].height),line:0},nx(this.ctx,e.textDirection);const _=b+u;this.legendItems.forEach((j,E)=>{r.strokeStyle=j.fontColor,r.fillStyle=j.fontColor;const A=r.measureText(j.text).width,S=c.textAlign(j.textAlign||(j.textAlign=a.textAlign)),O=p+f+A;let P=m.x,R=m.y;c.setWidth(this.width),v?E>0&&P+O+u>this.right&&(R=m.y+=_,m.line++,P=m.x=bt(i,this.left+u,this.right-n[m.line])):E>0&&R+_>this.bottom&&(P=m.x=P+s[m.line].width+u,m.line++,R=m.y=bt(i,this.top+w+u,this.bottom-s[m.line].height));const U=c.x(P);if(y(U,R,j),P=ij(S,P+p+f,v?P+O:this.right,e.rtl),g(c.x(P),R,j),v)m.x+=O+u;else if(typeof j.text!="string"){const K=d.lineHeight;m.y+=kx(j,K)+u}else m.y+=_}),rx(this.ctx,e.textDirection)}drawTitle(){const e=this.options,s=e.title,n=Ye(s.font),r=ot(s.padding);if(!s.display)return;const i=xr(e.rtl,this.left,this.width),a=this.ctx,l=s.position,c=n.size/2,d=r.top+c;let u,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+d,h=bt(e.align,h,this.right-f);else{const p=this.columnSizes.reduce((x,b)=>Math.max(x,b.height),0);u=d+bt(e.align,this.top,this.bottom-p-e.labels.padding-this._computeTitleHeight())}const m=bt(l,h,h+f);a.textAlign=i.textAlign(q0(l)),a.textBaseline="middle",a.strokeStyle=s.color,a.fillStyle=s.color,a.font=n.string,Cr(a,s.text,m,u,n)}_computeTitleHeight(){const e=this.options.title,s=Ye(e.font),n=ot(e.padding);return e.display?s.lineHeight+n.height:0}_getLegendItemAt(e,s){let n,r,i;if(cr(e,this.left,this.right)&&cr(s,this.top,this.bottom)){for(i=this.legendHitBoxes,n=0;n<i.length;++n)if(r=i[n],cr(e,r.left,r.left+r.width)&&cr(s,r.top,r.top+r.height))return this.legendItems[n]}return null}handleEvent(e){const s=this.options;if(!dN(e.type,s))return;const n=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,i=aN(r,n);r&&!i&&je(s.onLeave,[e,r,this],this),this._hoveredItem=n,n&&!i&&je(s.onHover,[e,n,this],this)}else n&&je(s.onClick,[e,n,this],this)}}function oN(t,e,s,n,r){const i=lN(n,t,e,s),a=cN(r,n,e.lineHeight);return{itemWidth:i,itemHeight:a}}function lN(t,e,s,n){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((i,a)=>i.length>a.length?i:a)),e+s.size/2+n.measureText(r).width}function cN(t,e,s){let n=t;return typeof e.text!="string"&&(n=kx(e,s)),n}function kx(t,e){const s=t.text?t.text.length:0;return e*s}function dN(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var uN={id:"legend",_element:jm,start(t,e,s){const n=t.legend=new jm({ctx:t.ctx,options:s,chart:t});Fs.configure(t,n,s),Fs.addBox(t,n)},stop(t){Fs.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,s){const n=t.legend;Fs.configure(t,n,s),n.options=s},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,s){const n=e.datasetIndex,r=s.chart;r.isDatasetVisible(n)?(r.hide(n),e.hidden=!0):(r.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:s,pointStyle:n,textAlign:r,color:i,useBorderRadius:a,borderRadius:l}}=t.legend.options;return t._getSortedDatasetMetas().map(c=>{const d=c.controller.getStyle(s?0:void 0),u=ot(d.borderWidth);return{text:e[c.index].label,fillStyle:d.backgroundColor,fontColor:i,hidden:!c.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:d.borderColor,pointStyle:n||d.pointStyle,rotation:d.rotation,textAlign:r||d.textAlign,borderRadius:a&&(l||d.borderRadius),datasetIndex:c.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};const ri={average(t){if(!t.length)return!1;let e,s,n=new Set,r=0,i=0;for(e=0,s=t.length;e<s;++e){const l=t[e].element;if(l&&l.hasValue()){const c=l.tooltipPosition();n.add(c.x),r+=c.y,++i}}return i===0||n.size===0?!1:{x:[...n].reduce((l,c)=>l+c)/n.size,y:r/i}},nearest(t,e){if(!t.length)return!1;let s=e.x,n=e.y,r=Number.POSITIVE_INFINITY,i,a,l;for(i=0,a=t.length;i<a;++i){const c=t[i].element;if(c&&c.hasValue()){const d=c.getCenterPoint(),u=fd(e,d);u<r&&(r=u,l=c)}}if(l){const c=l.tooltipPosition();s=c.x,n=c.y}return{x:s,y:n}}};function es(t,e){return e&&(Re(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function us(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function hN(t,e){const{element:s,datasetIndex:n,index:r}=e,i=t.getDatasetMeta(n).controller,{label:a,value:l}=i.getLabelAndValue(r);return{chart:t,label:a,parsed:i.getParsed(r),raw:t.data.datasets[n].data[r],formattedValue:l,dataset:i.getDataset(),dataIndex:r,datasetIndex:n,element:s}}function km(t,e){const s=t.chart.ctx,{body:n,footer:r,title:i}=t,{boxWidth:a,boxHeight:l}=e,c=Ye(e.bodyFont),d=Ye(e.titleFont),u=Ye(e.footerFont),h=i.length,f=r.length,m=n.length,p=ot(e.padding);let x=p.height,b=0,y=n.reduce((w,_)=>w+_.before.length+_.lines.length+_.after.length,0);if(y+=t.beforeBody.length+t.afterBody.length,h&&(x+=h*d.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),y){const w=e.displayColors?Math.max(l,c.lineHeight):c.lineHeight;x+=m*w+(y-m)*c.lineHeight+(y-1)*e.bodySpacing}f&&(x+=e.footerMarginTop+f*u.lineHeight+(f-1)*e.footerSpacing);let g=0;const v=function(w){b=Math.max(b,s.measureText(w).width+g)};return s.save(),s.font=d.string,ve(t.title,v),s.font=c.string,ve(t.beforeBody.concat(t.afterBody),v),g=e.displayColors?a+2+e.boxPadding:0,ve(n,w=>{ve(w.before,v),ve(w.lines,v),ve(w.after,v)}),g=0,s.font=u.string,ve(t.footer,v),s.restore(),b+=p.width,{width:b,height:x}}function fN(t,e){const{y:s,height:n}=e;return s<n/2?"top":s>t.height-n/2?"bottom":"center"}function mN(t,e,s,n){const{x:r,width:i}=n,a=s.caretSize+s.caretPadding;if(t==="left"&&r+i+a>e.width||t==="right"&&r-i-a<0)return!0}function pN(t,e,s,n){const{x:r,width:i}=s,{width:a,chartArea:{left:l,right:c}}=t;let d="center";return n==="center"?d=r<=(l+c)/2?"left":"right":r<=i/2?d="left":r>=a-i/2&&(d="right"),mN(d,t,e,s)&&(d="center"),d}function Nm(t,e,s){const n=s.yAlign||e.yAlign||fN(t,s);return{xAlign:s.xAlign||e.xAlign||pN(t,e,s,n),yAlign:n}}function gN(t,e){let{x:s,width:n}=t;return e==="right"?s-=n:e==="center"&&(s-=n/2),s}function xN(t,e,s){let{y:n,height:r}=t;return e==="top"?n+=s:e==="bottom"?n-=r+s:n-=r/2,n}function Sm(t,e,s,n){const{caretSize:r,caretPadding:i,cornerRadius:a}=t,{xAlign:l,yAlign:c}=s,d=r+i,{topLeft:u,topRight:h,bottomLeft:f,bottomRight:m}=gr(a);let p=gN(e,l);const x=xN(e,c,d);return c==="center"?l==="left"?p+=d:l==="right"&&(p-=d):l==="left"?p-=Math.max(u,f)+r:l==="right"&&(p+=Math.max(h,m)+r),{x:vs(p,0,n.width-e.width),y:vs(x,0,n.height-e.height)}}function Da(t,e,s){const n=ot(s.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-n.right:t.x+n.left}function Cm(t){return es([],us(t))}function yN(t,e,s){return dn(t,{tooltip:e,tooltipItems:s,type:"tooltip"})}function Pm(t,e){const s=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return s?t.override(s):t}const Nx={beforeTitle:ls,title(t){if(t.length>0){const e=t[0],s=e.chart.data.labels,n=s?s.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return s[e.dataIndex]}return""},afterTitle:ls,beforeBody:ls,beforeLabel:ls,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const s=t.formattedValue;return Ce(s)||(e+=s),e},labelColor(t){const s=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:s.borderColor,backgroundColor:s.backgroundColor,borderWidth:s.borderWidth,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const s=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:s.pointStyle,rotation:s.rotation}},afterLabel:ls,afterBody:ls,beforeFooter:ls,footer:ls,afterFooter:ls};function ht(t,e,s,n){const r=t[e].call(s,n);return typeof r>"u"?Nx[e].call(s,n):r}class wd extends nn{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const s=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&s.options.animation&&n.animations,i=new cx(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=yN(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,s){const{callbacks:n}=s,r=ht(n,"beforeTitle",this,e),i=ht(n,"title",this,e),a=ht(n,"afterTitle",this,e);let l=[];return l=es(l,us(r)),l=es(l,us(i)),l=es(l,us(a)),l}getBeforeBody(e,s){return Cm(ht(s.callbacks,"beforeBody",this,e))}getBody(e,s){const{callbacks:n}=s,r=[];return ve(e,i=>{const a={before:[],lines:[],after:[]},l=Pm(n,i);es(a.before,us(ht(l,"beforeLabel",this,i))),es(a.lines,ht(l,"label",this,i)),es(a.after,us(ht(l,"afterLabel",this,i))),r.push(a)}),r}getAfterBody(e,s){return Cm(ht(s.callbacks,"afterBody",this,e))}getFooter(e,s){const{callbacks:n}=s,r=ht(n,"beforeFooter",this,e),i=ht(n,"footer",this,e),a=ht(n,"afterFooter",this,e);let l=[];return l=es(l,us(r)),l=es(l,us(i)),l=es(l,us(a)),l}_createItems(e){const s=this._active,n=this.chart.data,r=[],i=[],a=[];let l=[],c,d;for(c=0,d=s.length;c<d;++c)l.push(hN(this.chart,s[c]));return e.filter&&(l=l.filter((u,h,f)=>e.filter(u,h,f,n))),e.itemSort&&(l=l.sort((u,h)=>e.itemSort(u,h,n))),ve(l,u=>{const h=Pm(e.callbacks,u);r.push(ht(h,"labelColor",this,u)),i.push(ht(h,"labelPointStyle",this,u)),a.push(ht(h,"labelTextColor",this,u))}),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=a,this.dataPoints=l,l}update(e,s){const n=this.options.setContext(this.getContext()),r=this._active;let i,a=[];if(!r.length)this.opacity!==0&&(i={opacity:0});else{const l=ri[n.position].call(this,r,this._eventPosition);a=this._createItems(n),this.title=this.getTitle(a,n),this.beforeBody=this.getBeforeBody(a,n),this.body=this.getBody(a,n),this.afterBody=this.getAfterBody(a,n),this.footer=this.getFooter(a,n);const c=this._size=km(this,n),d=Object.assign({},l,c),u=Nm(this.chart,n,d),h=Sm(n,d,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,i={opacity:1,x:h.x,y:h.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=a,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:s})}drawCaret(e,s,n,r){const i=this.getCaretPosition(e,n,r);s.lineTo(i.x1,i.y1),s.lineTo(i.x2,i.y2),s.lineTo(i.x3,i.y3)}getCaretPosition(e,s,n){const{xAlign:r,yAlign:i}=this,{caretSize:a,cornerRadius:l}=n,{topLeft:c,topRight:d,bottomLeft:u,bottomRight:h}=gr(l),{x:f,y:m}=e,{width:p,height:x}=s;let b,y,g,v,w,_;return i==="center"?(w=m+x/2,r==="left"?(b=f,y=b-a,v=w+a,_=w-a):(b=f+p,y=b+a,v=w-a,_=w+a),g=b):(r==="left"?y=f+Math.max(c,u)+a:r==="right"?y=f+p-Math.max(d,h)-a:y=this.caretX,i==="top"?(v=m,w=v-a,b=y-a,g=y+a):(v=m+x,w=v+a,b=y+a,g=y-a),_=v),{x1:b,x2:y,x3:g,y1:v,y2:w,y3:_}}drawTitle(e,s,n){const r=this.title,i=r.length;let a,l,c;if(i){const d=xr(n.rtl,this.x,this.width);for(e.x=Da(this,n.titleAlign,n),s.textAlign=d.textAlign(n.titleAlign),s.textBaseline="middle",a=Ye(n.titleFont),l=n.titleSpacing,s.fillStyle=n.titleColor,s.font=a.string,c=0;c<i;++c)s.fillText(r[c],d.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+l,c+1===i&&(e.y+=n.titleMarginBottom-l)}}_drawColorBox(e,s,n,r,i){const a=this.labelColors[n],l=this.labelPointStyles[n],{boxHeight:c,boxWidth:d}=i,u=Ye(i.bodyFont),h=Da(this,"left",i),f=r.x(h),m=c<u.lineHeight?(u.lineHeight-c)/2:0,p=s.y+m;if(i.usePointStyle){const x={radius:Math.min(d,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},b=r.leftForLtr(f,d)+d/2,y=p+c/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,gd(e,x,b,y),e.strokeStyle=a.borderColor,e.fillStyle=a.backgroundColor,gd(e,x,b,y)}else{e.lineWidth=pe(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,e.strokeStyle=a.borderColor,e.setLineDash(a.borderDash||[]),e.lineDashOffset=a.borderDashOffset||0;const x=r.leftForLtr(f,d),b=r.leftForLtr(r.xPlus(f,1),d-2),y=gr(a.borderRadius);Object.values(y).some(g=>g!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,Do(e,{x,y:p,w:d,h:c,radius:y}),e.fill(),e.stroke(),e.fillStyle=a.backgroundColor,e.beginPath(),Do(e,{x:b,y:p+1,w:d-2,h:c-2,radius:y}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(x,p,d,c),e.strokeRect(x,p,d,c),e.fillStyle=a.backgroundColor,e.fillRect(b,p+1,d-2,c-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,s,n){const{body:r}=this,{bodySpacing:i,bodyAlign:a,displayColors:l,boxHeight:c,boxWidth:d,boxPadding:u}=n,h=Ye(n.bodyFont);let f=h.lineHeight,m=0;const p=xr(n.rtl,this.x,this.width),x=function(A){s.fillText(A,p.x(e.x+m),e.y+f/2),e.y+=f+i},b=p.textAlign(a);let y,g,v,w,_,j,E;for(s.textAlign=a,s.textBaseline="middle",s.font=h.string,e.x=Da(this,b,n),s.fillStyle=n.bodyColor,ve(this.beforeBody,x),m=l&&b!=="right"?a==="center"?d/2+u:d+2+u:0,w=0,j=r.length;w<j;++w){for(y=r[w],g=this.labelTextColors[w],s.fillStyle=g,ve(y.before,x),v=y.lines,l&&v.length&&(this._drawColorBox(s,e,w,p,n),f=Math.max(h.lineHeight,c)),_=0,E=v.length;_<E;++_)x(v[_]),f=h.lineHeight;ve(y.after,x)}m=0,f=h.lineHeight,ve(this.afterBody,x),e.y-=i}drawFooter(e,s,n){const r=this.footer,i=r.length;let a,l;if(i){const c=xr(n.rtl,this.x,this.width);for(e.x=Da(this,n.footerAlign,n),e.y+=n.footerMarginTop,s.textAlign=c.textAlign(n.footerAlign),s.textBaseline="middle",a=Ye(n.footerFont),s.fillStyle=n.footerColor,s.font=a.string,l=0;l<i;++l)s.fillText(r[l],c.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+n.footerSpacing}}drawBackground(e,s,n,r){const{xAlign:i,yAlign:a}=this,{x:l,y:c}=e,{width:d,height:u}=n,{topLeft:h,topRight:f,bottomLeft:m,bottomRight:p}=gr(r.cornerRadius);s.fillStyle=r.backgroundColor,s.strokeStyle=r.borderColor,s.lineWidth=r.borderWidth,s.beginPath(),s.moveTo(l+h,c),a==="top"&&this.drawCaret(e,s,n,r),s.lineTo(l+d-f,c),s.quadraticCurveTo(l+d,c,l+d,c+f),a==="center"&&i==="right"&&this.drawCaret(e,s,n,r),s.lineTo(l+d,c+u-p),s.quadraticCurveTo(l+d,c+u,l+d-p,c+u),a==="bottom"&&this.drawCaret(e,s,n,r),s.lineTo(l+m,c+u),s.quadraticCurveTo(l,c+u,l,c+u-m),a==="center"&&i==="left"&&this.drawCaret(e,s,n,r),s.lineTo(l,c+h),s.quadraticCurveTo(l,c,l+h,c),s.closePath(),s.fill(),r.borderWidth>0&&s.stroke()}_updateAnimationTarget(e){const s=this.chart,n=this.$animations,r=n&&n.x,i=n&&n.y;if(r||i){const a=ri[e.position].call(this,this._active,this._eventPosition);if(!a)return;const l=this._size=km(this,e),c=Object.assign({},a,this._size),d=Nm(s,e,c),u=Sm(e,c,d,s);(r._to!==u.x||i._to!==u.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=l.width,this.height=l.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const s=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(s);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const a=ot(s.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;s.enabled&&l&&(e.save(),e.globalAlpha=n,this.drawBackground(i,e,r,s),nx(e,s.textDirection),i.y+=a.top,this.drawTitle(i,e,s),this.drawBody(i,e,s),this.drawFooter(i,e,s),rx(e,s.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,s){const n=this._active,r=e.map(({datasetIndex:l,index:c})=>{const d=this.chart.getDatasetMeta(l);if(!d)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:d.data[c],index:c}}),i=!To(n,r),a=this._positionChanged(r,s);(i||a)&&(this._active=r,this._eventPosition=s,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,s,n=!0){if(s&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],a=this._getActiveElements(e,i,s,n),l=this._positionChanged(a,e),c=s||!To(a,i)||l;return c&&(this._active=a,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,s))),c}_getActiveElements(e,s,n,r){const i=this.options;if(e.type==="mouseout")return[];if(!r)return s.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const a=this.chart.getElementsAtEventForMode(e,i.mode,i,n);return i.reverse&&a.reverse(),a}_positionChanged(e,s){const{caretX:n,caretY:r,options:i}=this,a=ri[i.position].call(this,e,s);return a!==!1&&(n!==a.x||r!==a.y)}}ce(wd,"positioners",ri);var vN={id:"tooltip",_element:wd,positioners:ri,afterInit(t,e,s){s&&(t.tooltip=new wd({chart:t,options:s}))},beforeUpdate(t,e,s){t.tooltip&&t.tooltip.initialize(s)},reset(t,e,s){t.tooltip&&t.tooltip.initialize(s)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const s={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...s,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",s)}},afterEvent(t,e){if(t.tooltip){const s=e.replay;t.tooltip.handleEvent(e.event,s,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Nx},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function bN(t,e){const s=[],{bounds:r,step:i,min:a,max:l,precision:c,count:d,maxTicks:u,maxDigits:h,includeBounds:f}=t,m=i||1,p=u-1,{min:x,max:b}=e,y=!Ce(a),g=!Ce(l),v=!Ce(d),w=(b-x)/(h+1);let _=Tf((b-x)/p/m)*m,j,E,A,S;if(_<1e-14&&!y&&!g)return[{value:x},{value:b}];S=Math.ceil(b/_)-Math.floor(x/_),S>p&&(_=Tf(S*_/p/m)*m),Ce(c)||(j=Math.pow(10,c),_=Math.ceil(_*j)/j),r==="ticks"?(E=Math.floor(x/_)*_,A=Math.ceil(b/_)*_):(E=x,A=b),y&&g&&i&&G1((l-a)/i,_/1e3)?(S=Math.round(Math.min((l-a)/_,u)),_=(l-a)/S,E=a,A=l):v?(E=y?a:E,A=g?l:A,S=d-1,_=(A-E)/S):(S=(A-E)/_,vi(S,Math.round(S),_/1e3)?S=Math.round(S):S=Math.ceil(S));const O=Math.max(Af(_),Af(E));j=Math.pow(10,Ce(c)?O:c),E=Math.round(E*j)/j,A=Math.round(A*j)/j;let P=0;for(y&&(f&&E!==a?(s.push({value:a}),E<a&&P++,vi(Math.round((E+P*_)*j)/j,a,Em(a,w,t))&&P++):E<a&&P++);P<S;++P){const R=Math.round((E+P*_)*j)/j;if(g&&R>l)break;s.push({value:R})}return g&&f&&A!==l?s.length&&vi(s[s.length-1].value,l,Em(l,w,t))?s[s.length-1].value=l:s.push({value:l}):(!g||A===l)&&s.push({value:A}),s}function Em(t,e,{horizontal:s,minRotation:n}){const r=Sn(n),i=(s?Math.sin(r):Math.cos(r))||.001,a=.75*e*(""+t).length;return Math.min(e/i,a)}class Tm extends sa{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,s){return Ce(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:s,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this;const a=c=>r=s?r:c,l=c=>i=n?i:c;if(e){const c=Sr(r),d=Sr(i);c<0&&d<0?l(0):c>0&&d>0&&a(0)}if(r===i){let c=i===0?1:Math.abs(i*.05);l(i+c),e||a(r-c)}this.min=r,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:s,stepSize:n}=e,r;return n?(r=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),s=s||11),s&&(r=Math.min(s,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,s=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const r={maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:s.precision,step:s.stepSize,count:s.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:s.minRotation||0,includeBounds:s.includeBounds!==!1},i=this._range||this,a=bN(r,i);return e.bounds==="ticks"&&Q1(a,this,"value"),e.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){const e=this.ticks;let s=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const r=(n-s)/Math.max(e.length-1,1)/2;s-=r,n+=r}this._startValue=s,this._endValue=n,this._valueRange=n-s}getLabelForValue(e){return K0(e,this.chart.options.locale,this.options.ticks.format)}}function _d(t){const e=t.ticks;if(e.display&&t.display){const s=ot(e.backdropPadding);return me(e.font&&e.font.size,Le.font.size)+s.height}return 0}function wN(t,e,s){return s=Re(s)?s:[s],{w:pj(t,e.string,s),h:s.length*e.lineHeight}}function Am(t,e,s,n,r){return t===n||t===r?{start:e-s/2,end:e+s/2}:t<n||t>r?{start:e-s,end:e}:{start:e,end:e+s}}function _N(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},s=Object.assign({},e),n=[],r=[],i=t._pointLabels.length,a=t.options.pointLabels,l=a.centerPointLabels?Ve/i:0;for(let c=0;c<i;c++){const d=a.setContext(t.getPointLabelContext(c));r[c]=d.padding;const u=t.getPointPosition(c,t.drawingArea+r[c],l),h=Ye(d.font),f=wN(t.ctx,h,t._pointLabels[c]);n[c]=f;const m=_t(t.getIndexAngle(c)+l),p=Math.round(Pu(m)),x=Am(p,u.x,f.w,0,180),b=Am(p,u.y,f.h,90,270);jN(s,e,m,x,b)}t.setCenterPoint(e.l-s.l,s.r-e.r,e.t-s.t,s.b-e.b),t._pointLabelItems=SN(t,n,r)}function jN(t,e,s,n,r){const i=Math.abs(Math.sin(s)),a=Math.abs(Math.cos(s));let l=0,c=0;n.start<e.l?(l=(e.l-n.start)/i,t.l=Math.min(t.l,e.l-l)):n.end>e.r&&(l=(n.end-e.r)/i,t.r=Math.max(t.r,e.r+l)),r.start<e.t?(c=(e.t-r.start)/a,t.t=Math.min(t.t,e.t-c)):r.end>e.b&&(c=(r.end-e.b)/a,t.b=Math.max(t.b,e.b+c))}function kN(t,e,s){const n=t.drawingArea,{extra:r,additionalAngle:i,padding:a,size:l}=s,c=t.getPointPosition(e,n+r+a,i),d=Math.round(Pu(_t(c.angle+Nt))),u=EN(c.y,l.h,d),h=CN(d),f=PN(c.x,l.w,h);return{visible:!0,x:c.x,y:u,textAlign:h,left:f,top:u,right:f+l.w,bottom:u+l.h}}function NN(t,e){if(!e)return!0;const{left:s,top:n,right:r,bottom:i}=t;return!(bs({x:s,y:n},e)||bs({x:s,y:i},e)||bs({x:r,y:n},e)||bs({x:r,y:i},e))}function SN(t,e,s){const n=[],r=t._pointLabels.length,i=t.options,{centerPointLabels:a,display:l}=i.pointLabels,c={extra:_d(i)/2,additionalAngle:a?Ve/r:0};let d;for(let u=0;u<r;u++){c.padding=s[u],c.size=e[u];const h=kN(t,u,c);n.push(h),l==="auto"&&(h.visible=NN(h,d),h.visible&&(d=h))}return n}function CN(t){return t===0||t===180?"center":t<180?"left":"right"}function PN(t,e,s){return s==="right"?t-=e:s==="center"&&(t-=e/2),t}function EN(t,e,s){return s===90||s===270?t-=e/2:(s>270||s<90)&&(t-=e),t}function TN(t,e,s){const{left:n,top:r,right:i,bottom:a}=s,{backdropColor:l}=e;if(!Ce(l)){const c=gr(e.borderRadius),d=ot(e.backdropPadding);t.fillStyle=l;const u=n-d.left,h=r-d.top,f=i-n+d.width,m=a-r+d.height;Object.values(c).some(p=>p!==0)?(t.beginPath(),Do(t,{x:u,y:h,w:f,h:m,radius:c}),t.fill()):t.fillRect(u,h,f,m)}}function AN(t,e){const{ctx:s,options:{pointLabels:n}}=t;for(let r=e-1;r>=0;r--){const i=t._pointLabelItems[r];if(!i.visible)continue;const a=n.setContext(t.getPointLabelContext(r));TN(s,a,i);const l=Ye(a.font),{x:c,y:d,textAlign:u}=i;Cr(s,t._pointLabels[r],c,d+l.lineHeight/2,l,{color:a.color,textAlign:u,textBaseline:"middle"})}}function Sx(t,e,s,n){const{ctx:r}=t;if(s)r.arc(t.xCenter,t.yCenter,e,0,Ct);else{let i=t.getPointPosition(0,e);r.moveTo(i.x,i.y);for(let a=1;a<n;a++)i=t.getPointPosition(a,e),r.lineTo(i.x,i.y)}}function ON(t,e,s,n,r){const i=t.ctx,a=e.circular,{color:l,lineWidth:c}=e;!a&&!n||!l||!c||s<0||(i.save(),i.strokeStyle=l,i.lineWidth=c,i.setLineDash(r.dash||[]),i.lineDashOffset=r.dashOffset,i.beginPath(),Sx(t,s,a,n),i.closePath(),i.stroke(),i.restore())}function MN(t,e,s){return dn(t,{label:s,index:e,type:"pointLabel"})}class ii extends Tm{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=ot(_d(this.options)/2),s=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+s/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(s,n)/2)}determineDataLimits(){const{min:e,max:s}=this.getMinMax(!1);this.min=st(e)&&!isNaN(e)?e:0,this.max=st(s)&&!isNaN(s)?s:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/_d(this.options))}generateTickLabels(e){Tm.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((s,n)=>{const r=je(this.options.pointLabels.callback,[s,n],this);return r||r===0?r:""}).filter((s,n)=>this.chart.getDataVisibility(n))}fit(){const e=this.options;e.display&&e.pointLabels.display?_N(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,s,n,r){this.xCenter+=Math.floor((e-s)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,s,n,r))}getIndexAngle(e){const s=Ct/(this._pointLabels.length||1),n=this.options.startAngle||0;return _t(e*s+Sn(n))}getDistanceFromCenterForValue(e){if(Ce(e))return NaN;const s=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*s:(e-this.min)*s}getValueForDistanceFromCenter(e){if(Ce(e))return NaN;const s=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-s:this.min+s}getPointLabelContext(e){const s=this._pointLabels||[];if(e>=0&&e<s.length){const n=s[e];return MN(this.getContext(),e,n)}}getPointPosition(e,s,n=0){const r=this.getIndexAngle(e)-Nt+n;return{x:Math.cos(r)*s+this.xCenter,y:Math.sin(r)*s+this.yCenter,angle:r}}getPointPositionForValue(e,s){return this.getPointPosition(e,this.getDistanceFromCenterForValue(s))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:s,top:n,right:r,bottom:i}=this._pointLabelItems[e];return{left:s,top:n,right:r,bottom:i}}drawBackground(){const{backgroundColor:e,grid:{circular:s}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),Sx(this,this.getDistanceFromCenterForValue(this._endValue),s,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,s=this.options,{angleLines:n,grid:r,border:i}=s,a=this._pointLabels.length;let l,c,d;if(s.pointLabels.display&&AN(this,a),r.display&&this.ticks.forEach((u,h)=>{if(h!==0||h===0&&this.min<0){c=this.getDistanceFromCenterForValue(u.value);const f=this.getContext(h),m=r.setContext(f),p=i.setContext(f);ON(this,m,c,a,p)}}),n.display){for(e.save(),l=a-1;l>=0;l--){const u=n.setContext(this.getPointLabelContext(l)),{color:h,lineWidth:f}=u;!f||!h||(e.lineWidth=f,e.strokeStyle=h,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,c=this.getDistanceFromCenterForValue(s.reverse?this.min:this.max),d=this.getPointPosition(l,c),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(d.x,d.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,s=this.options,n=s.ticks;if(!n.display)return;const r=this.getIndexAngle(0);let i,a;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((l,c)=>{if(c===0&&this.min>=0&&!s.reverse)return;const d=n.setContext(this.getContext(c)),u=Ye(d.font);if(i=this.getDistanceFromCenterForValue(this.ticks[c].value),d.showLabelBackdrop){e.font=u.string,a=e.measureText(l.label).width,e.fillStyle=d.backdropColor;const h=ot(d.backdropPadding);e.fillRect(-a/2-h.left,-i-u.size/2-h.top,a+h.width,u.size+h.height)}Cr(e,l.label,0,-i,u,{color:d.color,strokeColor:d.textStrokeColor,strokeWidth:d.textStrokeWidth})}),e.restore()}drawTitle(){}}ce(ii,"id","radialLinear"),ce(ii,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:G0.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),ce(ii,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),ce(ii,"descriptors",{angleLines:{_fallback:"grid"}});const pl={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},pt=Object.keys(pl);function Om(t,e){return t-e}function Mm(t,e){if(Ce(e))return null;const s=t._adapter,{parser:n,round:r,isoWeekday:i}=t._parseOpts;let a=e;return typeof n=="function"&&(a=n(a)),st(a)||(a=typeof n=="string"?s.parse(a,n):s.parse(a)),a===null?null:(r&&(a=r==="week"&&(Ro(i)||i===!0)?s.startOf(a,"isoWeek",i):s.startOf(a,r)),+a)}function Rm(t,e,s,n){const r=pt.length;for(let i=pt.indexOf(t);i<r-1;++i){const a=pl[pt[i]],l=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((s-e)/(l*a.size))<=n)return pt[i]}return pt[r-1]}function RN(t,e,s,n,r){for(let i=pt.length-1;i>=pt.indexOf(s);i--){const a=pt[i];if(pl[a].common&&t._adapter.diff(r,n,a)>=e-1)return a}return pt[s?pt.indexOf(s):0]}function LN(t){for(let e=pt.indexOf(t)+1,s=pt.length;e<s;++e)if(pl[pt[e]].common)return pt[e]}function Lm(t,e,s){if(!s)t[e]=!0;else if(s.length){const{lo:n,hi:r}=Eu(s,e),i=s[n]>=e?s[n]:s[r];t[i]=!0}}function DN(t,e,s,n){const r=t._adapter,i=+r.startOf(e[0].value,n),a=e[e.length-1].value;let l,c;for(l=i;l<=a;l=+r.add(l,1,n))c=s[l],c>=0&&(e[c].major=!0);return e}function Dm(t,e,s){const n=[],r={},i=e.length;let a,l;for(a=0;a<i;++a)l=e[a],r[l]=a,n.push({value:l,major:!1});return i===0||!s?n:DN(t,n,r,s)}class $o extends sa{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,s={}){const n=e.time||(e.time={}),r=this._adapter=new _k._date(e.adapters.date);r.init(s),yi(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=s.normalized}parse(e,s){return e===void 0?null:Mm(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,s=this._adapter,n=e.time.unit||"day";let{min:r,max:i,minDefined:a,maxDefined:l}=this.getUserBounds();function c(d){!a&&!isNaN(d.min)&&(r=Math.min(r,d.min)),!l&&!isNaN(d.max)&&(i=Math.max(i,d.max))}(!a||!l)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),r=st(r)&&!isNaN(r)?r:+s.startOf(Date.now(),n),i=st(i)&&!isNaN(i)?i:+s.endOf(Date.now(),n)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let s=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(s=e[0],n=e[e.length-1]),{min:s,max:n}}buildTicks(){const e=this.options,s=e.time,n=e.ticks,r=n.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,a=this.max,l=tj(r,i,a);return this._unit=s.unit||(n.autoSkip?Rm(s.minUnit,this.min,this.max,this._getLabelCapacity(i)):RN(this,l.length,s.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:LN(this._unit),this.initOffsets(r),e.reverse&&l.reverse(),Dm(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let s=0,n=0,r,i;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?s=1-r:s=(this.getDecimalForValue(e[1])-r)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?n=i:n=(i-this.getDecimalForValue(e[e.length-2]))/2);const a=e.length<3?.5:.25;s=vs(s,0,a),n=vs(n,0,a),this._offsets={start:s,end:n,factor:1/(s+1+n)}}_generate(){const e=this._adapter,s=this.min,n=this.max,r=this.options,i=r.time,a=i.unit||Rm(i.minUnit,s,n,this._getLabelCapacity(s)),l=me(r.ticks.stepSize,1),c=a==="week"?i.isoWeekday:!1,d=Ro(c)||c===!0,u={};let h=s,f,m;if(d&&(h=+e.startOf(h,"isoWeek",c)),h=+e.startOf(h,d?"day":a),e.diff(n,s,a)>1e5*l)throw new Error(s+" and "+n+" are too far apart with stepSize of "+l+" "+a);const p=r.ticks.source==="data"&&this.getDataTimestamps();for(f=h,m=0;f<n;f=+e.add(f,l,a),m++)Lm(u,f,p);return(f===n||r.bounds==="ticks"||m===1)&&Lm(u,f,p),Object.keys(u).sort(Om).map(x=>+x)}getLabelForValue(e){const s=this._adapter,n=this.options.time;return n.tooltipFormat?s.format(e,n.tooltipFormat):s.format(e,n.displayFormats.datetime)}format(e,s){const r=this.options.time.displayFormats,i=this._unit,a=s||r[i];return this._adapter.format(e,a)}_tickFormatFunction(e,s,n,r){const i=this.options,a=i.ticks.callback;if(a)return je(a,[e,s,n],this);const l=i.time.displayFormats,c=this._unit,d=this._majorUnit,u=c&&l[c],h=d&&l[d],f=n[s],m=d&&h&&f&&f.major;return this._adapter.format(e,r||(m?h:u))}generateTickLabels(e){let s,n,r;for(s=0,n=e.length;s<n;++s)r=e[s],r.label=this._tickFormatFunction(r.value,s,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const s=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((s.start+n)*s.factor)}getValueForPixel(e){const s=this._offsets,n=this.getDecimalForPixel(e)/s.factor-s.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const s=this.options.ticks,n=this.ctx.measureText(e).width,r=Sn(this.isHorizontal()?s.maxRotation:s.minRotation),i=Math.cos(r),a=Math.sin(r),l=this._resolveTickFontOptions(0).size;return{w:n*i+l*a,h:n*a+l*i}}_getLabelCapacity(e){const s=this.options.time,n=s.displayFormats,r=n[s.unit]||n.millisecond,i=this._tickFormatFunction(e,0,Dm(this,[e],this._majorUnit),r),a=this._getLabelSize(i),l=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return l>0?l:1}getDataTimestamps(){let e=this._cache.data||[],s,n;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(s=0,n=r.length;s<n;++s)e=e.concat(r[s].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let s,n;if(e.length)return e;const r=this.getLabels();for(s=0,n=r.length;s<n;++s)e.push(Mm(this,r[s]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return nj(e.sort(Om))}}ce($o,"id","time"),ce($o,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Ba(t,e,s){let n=0,r=t.length-1,i,a,l,c;s?(e>=t[n].pos&&e<=t[r].pos&&({lo:n,hi:r}=md(t,"pos",e)),{pos:i,time:l}=t[n],{pos:a,time:c}=t[r]):(e>=t[n].time&&e<=t[r].time&&({lo:n,hi:r}=md(t,"time",e)),{time:i,pos:l}=t[n],{time:a,pos:c}=t[r]);const d=a-i;return d?l+(c-l)*(e-i)/d:l}class Bm extends $o{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),s=this._table=this.buildLookupTable(e);this._minPos=Ba(s,this.min),this._tableRange=Ba(s,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:s,max:n}=this,r=[],i=[];let a,l,c,d,u;for(a=0,l=e.length;a<l;++a)d=e[a],d>=s&&d<=n&&r.push(d);if(r.length<2)return[{time:s,pos:0},{time:n,pos:1}];for(a=0,l=r.length;a<l;++a)u=r[a+1],c=r[a-1],d=r[a],Math.round((u+c)/2)!==d&&i.push({time:d,pos:a/(l-1)});return i}_generate(){const e=this.min,s=this.max;let n=super.getDataTimestamps();return(!n.includes(e)||!n.length)&&n.splice(0,0,e),(!n.includes(s)||n.length===1)&&n.push(s),n.sort((r,i)=>r-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const s=this.getDataTimestamps(),n=this.getLabelTimestamps();return s.length&&n.length?e=this.normalize(s.concat(n)):e=s.length?s:n,e=this._cache.all=e,e}getDecimalForValue(e){return(Ba(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const s=this._offsets,n=this.getDecimalForPixel(e)/s.factor-s.end;return Ba(this._table,n*this._tableRange+this._minPos,!0)}}ce(Bm,"id","timeseries"),ce(Bm,"defaults",$o.defaults);const Cx="label";function Im(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function BN(t,e){const s=t.options;s&&e&&Object.assign(s,e)}function Px(t,e){t.labels=e}function Ex(t,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Cx;const n=[];t.datasets=e.map(r=>{const i=t.datasets.find(a=>a[s]===r[s]);return!i||!r.data||n.includes(i)?{...r}:(n.push(i),Object.assign(i,r),i)})}function IN(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Cx;const s={labels:[],datasets:[]};return Px(s,t.labels),Ex(s,t.datasets,e),s}function $N(t,e){const{height:s=150,width:n=300,redraw:r=!1,datasetIdKey:i,type:a,data:l,options:c,plugins:d=[],fallbackContent:u,updateMode:h,...f}=t,m=k.useRef(null),p=k.useRef(null),x=()=>{m.current&&(p.current=new fl(m.current,{type:a,data:IN(l,i),options:c&&{...c},plugins:d}),Im(e,p.current))},b=()=>{Im(e,null),p.current&&(p.current.destroy(),p.current=null)};return k.useEffect(()=>{!r&&p.current&&c&&BN(p.current,c)},[r,c]),k.useEffect(()=>{!r&&p.current&&Px(p.current.config.data,l.labels)},[r,l.labels]),k.useEffect(()=>{!r&&p.current&&l.datasets&&Ex(p.current.config.data,l.datasets,i)},[r,l.datasets]),k.useEffect(()=>{p.current&&(r?(b(),setTimeout(x)):p.current.update(h))},[r,c,l.labels,l.datasets,h]),k.useEffect(()=>{p.current&&(b(),setTimeout(x))},[a]),k.useEffect(()=>(x(),()=>b()),[]),Ke.createElement("canvas",{ref:m,role:"img",height:s,width:n,...f},u)}const zN=k.forwardRef($N);function FN(t,e){return fl.register(e),k.forwardRef((s,n)=>Ke.createElement(zN,{...s,ref:n,type:t}))}const UN=FN("radar",Xa);fl.register(ii,eo,Us,iN,vN,uN);const $m=["Spin Finish","Burst Finish","Over Finish","Extreme Finish"],oc={"Spin Finish":1,"Burst Finish":2,"Over Finish":2,"Extreme Finish":3};function WN({onBack:t}){const[e,s]=k.useState([]),[n,r]=k.useState(""),[i,a]=k.useState({}),[l,c]=k.useState(""),[d,u]=k.useState(!0),[h,f]=k.useState(!1),[m,p]=k.useState(!1),[x,b]=k.useState("player");k.useEffect(()=>{y()},[]),k.useEffect(()=>{n&&g()},[n]);const y=async()=>{try{const{data:S,error:O}=await V.from("tournaments").select("id, name, status, tournament_date").order("tournament_date",{ascending:!1});if(O)throw O;s(S||[]);const P=S==null?void 0:S.find(R=>R.status==="completed");P&&r(P.id)}catch(S){console.error("Error fetching tournaments:",S)}finally{u(!1)}},g=async()=>{f(!0),a({}),c("");try{const{data:S,error:O}=await V.from("match_results").select(`
          player1_name,
          player2_name,
          player1_beyblade,
          player2_beyblade,
          winner_name,
          outcome,
          points_awarded
        `).eq("tournament_id",n);if(O)throw O;if(!S||S.length===0){a({});return}const P={};S.forEach(R=>{const U=R.player1_name,K=R.player2_name,T=R.player1_beyblade,B=R.player2_beyblade,H=R.winner_name,q=(R.outcome||"").split(" (")[0].trim()||"Unknown",X=R.points_awarded||oc[q]||0;if(P[U]||(P[U]={name:U,beys:[],matches:[],winFinishes:{},loseFinishes:{},beyStats:{},wins:0,losses:0,points:0}),P[K]||(P[K]={name:K,beys:[],matches:[],winFinishes:{},loseFinishes:{},beyStats:{},wins:0,losses:0,points:0}),T&&!P[U].beys.includes(T)&&P[U].beys.push(T),B&&!P[K].beys.includes(B)&&P[K].beys.push(B),!H||!U||!K)return;const Z=H===U?K:U,re=H===U?T:B,M=H===U?B:T;P[H].wins++,P[H].points+=X,P[H].winFinishes[q]=(P[H].winFinishes[q]||0)+1,P[H].matches.push({result:"win",bey:re,outcome:q,opponent:Z,opponentBey:M}),P[Z].losses++,P[Z].loseFinishes[q]=(P[Z].loseFinishes[q]||0)+1,P[Z].matches.push({result:"loss",bey:M,outcome:q,opponent:H,opponentBey:re}),!(!re||!M)&&(P[H].beyStats[re]||(P[H].beyStats[re]={win:0,loss:0,finishes:{},lossFinishes:{},points:0}),P[Z].beyStats[M]||(P[Z].beyStats[M]={win:0,loss:0,finishes:{},lossFinishes:{},points:0}),P[H].beyStats[re].win++,P[H].beyStats[re].points+=X,P[H].beyStats[re].finishes[q]=(P[H].beyStats[re].finishes[q]||0)+1,P[Z].beyStats[M].loss++,P[Z].beyStats[M].lossFinishes[q]=(P[Z].beyStats[M].lossFinishes[q]||0)+1)}),a(P)}catch(S){console.error("Error fetching tournament data:",S),a({})}finally{f(!1)}},v=S=>Object.entries(S).reduce((O,[P,R])=>R>O[1]?[P,R]:O,["",-1])[0]||"N/A",w=S=>{let O="",P=-1;for(const K of S.beys){const T=S.beyStats[K]||{points:0,win:0};T.points>P&&(P=T.points,O=K)}const R=S.beyStats[O],U=R?`${R.win} wins, ${R.points} pts`:"No matches";return{bey:O||"N/A",reason:U}},_=S=>({labels:$m,datasets:[{label:"Point Contribution",data:$m.map(O=>{const P=S[O]||0,R=oc[O]||0;return P*R}),backgroundColor:"rgba(33, 150, 243, 0.2)",borderColor:"#2196f3",pointBackgroundColor:"#2196f3",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"#2196f3"}]}),j={responsive:!0,maintainAspectRatio:!1,scales:{r:{suggestedMin:0,ticks:{stepSize:2},title:{display:!0,text:"Points"}}},plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(S){const O=S.label,P=S.raw,R=winFinishes[O]||0,U=oc[O]||0;return`${O}: ${P} pts (${R} × ${U})`}}}}},E=()=>{if(!l||!i[l])return null;const S=i[l],{bey:O,reason:P}=w(S),R=S.wins+S.losses,U=R?(S.wins/R*100).toFixed(1):"0.0",K=R?(S.points/R).toFixed(2):"0.00";return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[o.jsxs("div",{className:"flex items-center mb-6",children:[o.jsx("div",{className:"w-16 h-16 bg-blue-500 rounded-full flex items-center justify-center text-white text-2xl font-bold mr-4",children:S.name.charAt(0).toUpperCase()}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:S.name}),o.jsx("p",{className:"text-gray-600",children:"Tournament Player"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Most Valuable Bey"}),o.jsx("p",{className:"text-lg font-semibold text-gray-900",children:O}),o.jsx("p",{className:"text-sm text-gray-500",children:P})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Most Common Finish (Win)"}),o.jsx("p",{className:"text-lg font-semibold text-green-600",children:v(S.winFinishes)})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Most Common Finish (Loss)"}),o.jsx("p",{className:"text-lg font-semibold text-red-600",children:v(S.loseFinishes)})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Win Rate"}),o.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[U,"% (",S.wins," of ",R,") — ",K," pts/match"]})]})]}),o.jsx("div",{className:"flex justify-center",children:o.jsx("div",{style:{width:"300px",height:"300px"},children:o.jsx(UN,{data:_(S.winFinishes),options:j})})})]}),o.jsxs("div",{className:"flex justify-center space-x-4 mt-6",children:[o.jsx("button",{onClick:()=>p(!m),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:m?"Hide Advanced":"Show Advanced"}),o.jsxs("button",{onClick:()=>b("matches"),className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors flex items-center space-x-2",children:[o.jsx(ju,{size:16}),o.jsx("span",{children:"Show All Matches"})]})]})]}),m&&o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[o.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"Advanced Statistics"}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Win by Finish"}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Beyblade"}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Spin"}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Burst"}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Over"}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Extreme"}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Wins"}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Points"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S.beys.map(T=>{const B=S.beyStats[T]||{finishes:{},win:0,points:0};return o.jsxs("tr",{className:"bg-green-50",children:[o.jsx("td",{className:"px-4 py-2 text-sm font-medium text-gray-900",children:T}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:B.finishes["Spin Finish"]||0}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:B.finishes["Burst Finish"]||0}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:B.finishes["Over Finish"]||0}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:B.finishes["Extreme Finish"]||0}),o.jsx("td",{className:"px-4 py-2 text-sm font-semibold text-gray-900",children:B.win}),o.jsx("td",{className:"px-4 py-2 text-sm font-semibold text-gray-900",children:B.points})]},T)})})]})})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Loss by Finish"}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Beyblade"}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Spin"}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Burst"}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Over"}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Extreme"}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Losses"}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Points Given"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S.beys.map(T=>{const B=S.beyStats[T]||{lossFinishes:{},loss:0},H=B.lossFinishes||{},W=(H["Spin Finish"]||0)*1+(H["Burst Finish"]||0)*2+(H["Over Finish"]||0)*2+(H["Extreme Finish"]||0)*3;return o.jsxs("tr",{className:"bg-red-50",children:[o.jsx("td",{className:"px-4 py-2 text-sm font-medium text-gray-900",children:T}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:H["Spin Finish"]||0}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:H["Burst Finish"]||0}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:H["Over Finish"]||0}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:H["Extreme Finish"]||0}),o.jsx("td",{className:"px-4 py-2 text-sm font-semibold text-gray-900",children:B.loss}),o.jsx("td",{className:"px-4 py-2 text-sm font-semibold text-gray-900",children:W})]},T)})})]})})]})]})]})]})},A=()=>{if(!l||!i[l])return null;const S=i[l];return o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:["All Matches for ",o.jsx("strong",{children:S.name})]}),o.jsxs("button",{onClick:()=>b("player"),className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700 transition-colors flex items-center space-x-2",children:[o.jsx(cl,{size:16}),o.jsx("span",{children:"Back to Player Stats"})]})]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Result"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Your Bey"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Opponent"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Opponent's Bey"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Finish"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S.matches.map((O,P)=>o.jsxs("tr",{className:O.result==="win"?"bg-green-50":"bg-red-50",children:[o.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm font-medium ${O.result==="win"?"text-green-800":"text-red-800"}`,children:O.result==="win"?"Win":"Loss"}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:O.bey}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:O.opponent}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:O.opponentBey||"-"}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:O.outcome})]},P))})]})})]})};return d?o.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading tournaments..."})]})}):h?o.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Player Performance Analysis"}),o.jsx("p",{className:"text-gray-600",children:"Analyze individual player statistics and performance"})]}),o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading player data..."})]})]}):o.jsx("div",{className:"page-container",children:o.jsxs("div",{className:"content-wrapper",children:[o.jsx("div",{className:"page-header",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"page-title",children:"Tournament Analytics"}),o.jsx("p",{className:"page-subtitle",children:"Comprehensive tournament and player statistics"})]}),o.jsxs("div",{className:"filter-tabs",children:[o.jsx("button",{onClick:()=>{t&&t()},className:"filter-tab filter-tab-inactive",children:"Overview"}),o.jsx("button",{onClick:()=>{t&&(t(),setTimeout(()=>{const S=new CustomEvent("navigateToMetaAnalysis");window.dispatchEvent(S)},50))},className:"filter-tab filter-tab-inactive",children:"Meta Analysis"}),o.jsx("button",{className:"filter-tab filter-tab-active",children:"Player Analytics"})]})]})}),o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Tournament Selection"}),o.jsxs("div",{className:"max-w-md",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Tournament"}),o.jsxs("select",{value:n,onChange:S=>r(S.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.jsx("option",{value:"",children:"-- Select Tournament --"}),e.map(S=>o.jsxs("option",{value:S.id,children:[S.name," (",S.status,")"]},S.id))]})]})]}),n&&o.jsxs(o.Fragment,{children:[Object.keys(i).length===0&&o.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 mb-8",children:o.jsx("p",{className:"text-yellow-800",children:"No player data found for this tournament. Make sure there are completed matches with valid player names and Beyblade information."})}),Object.keys(i).length>0&&o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[o.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[o.jsx(O0,{className:"mr-2",size:24}),"Player Selection"]}),o.jsxs("div",{className:"max-w-md",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Player"}),o.jsxs("select",{value:l,onChange:S=>{c(S.target.value),b("player"),p(!1)},className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.jsx("option",{value:"",children:"-- Select Player --"}),Object.keys(i).sort().map(S=>o.jsx("option",{value:S,children:S},S))]})]})]}),l&&(x==="player"?E():A())]})]})})}function HN(){const[t,e]=Ke.useState("overview"),[s,n]=Ke.useState(!1);Ke.useEffect(()=>{const h=()=>{n(!0),e("meta"),setTimeout(()=>n(!1),50)},f=()=>{n(!0),e("player"),setTimeout(()=>n(!1),50)};return window.addEventListener("navigateToMetaAnalysis",h),window.addEventListener("navigateToPlayerAnalytics",f),()=>{window.removeEventListener("navigateToMetaAnalysis",h),window.removeEventListener("navigateToPlayerAnalytics",f)}},[]);const[r,i]=Ke.useState({totalTournaments:0,activePlayers:0,completedMatches:0,upcomingEvents:0,completedTournaments:[],activeTournaments:0,upcomingTournaments:0}),[a,l]=Ke.useState(!0);Ke.useEffect(()=>{(async()=>{try{const[f,m,p,x]=await Promise.all([V.from("tournaments").select("*"),V.from("profiles").select("*",{count:"exact",head:!0}),V.from("match_results").select("*"),V.from("tournament_registrations").select("*",{count:"exact",head:!0})]),b=f.data||[],y=p.data||[],g=b.filter(j=>j.status==="completed"),v=b.filter(j=>j.status==="active").length,w=b.filter(j=>j.status==="upcoming").length,_=y.length;i({totalTournaments:b.length,activePlayers:m.count||0,completedMatches:_,upcomingEvents:w,completedTournaments:g,activeTournaments:v,upcomingTournaments:w})}catch(f){console.error("Error fetching analytics:",f),i({totalTournaments:0,activePlayers:0,completedMatches:0,upcomingEvents:0,completedTournaments:[],activeTournaments:0,upcomingTournaments:0})}finally{l(!1)}})()},[]);const[c,d]=Ke.useState([]);Ke.useEffect(()=>{(async()=>{try{const{data:f}=await V.from("match_results").select("player1_name, player2_name, winner_name");if(!f)return;const m={};f.forEach(x=>{!x.player1_name||!x.player2_name||!x.winner_name||[x.player1_name,x.player2_name].forEach(b=>{m[b]||(m[b]={wins:0,matches:0}),m[b].matches++,x.winner_name===b&&m[b].wins++})});const p=Object.entries(m).map(([x,b])=>({player:x,wins:b.wins,matches:b.matches,winRate:Math.round(b.wins/b.matches*100)})).sort((x,b)=>b.winRate-x.winRate).slice(0,4);d(p)}catch(f){console.error("Error calculating win rates:",f),d([])}})()},[]);const u=[{icon:Yt,label:"Total Tournaments",value:r.totalTournaments,color:"text-blue-600",bgColor:"bg-blue-100"},{icon:tn,label:"Active Players",value:r.activePlayers,color:"text-green-600",bgColor:"bg-green-100"},{icon:A0,label:"Completed Matches",value:r.completedMatches,color:"text-purple-600",bgColor:"bg-purple-100"},{icon:Dn,label:"Upcoming Events",value:r.upcomingEvents,color:"text-orange-600",bgColor:"bg-orange-100"}];return a?o.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading analytics..."})]})}):t==="meta"?o.jsx(p1,{onBack:()=>{n(!0),e("overview"),setTimeout(()=>n(!1),50)}}):t==="player"?o.jsx(WN,{onBack:()=>{n(!0),e("overview"),setTimeout(()=>n(!1),50)}}):s?o.jsx("div",{className:"page-container",children:o.jsx("div",{className:"content-wrapper",children:o.jsx("div",{className:"text-center py-12",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"})})})}):o.jsx("div",{className:"page-container",children:o.jsxs("div",{className:"content-wrapper",children:[o.jsx("div",{className:"page-header",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"page-title",children:"Tournament Analytics"}),o.jsx("p",{className:"page-subtitle",children:"Comprehensive tournament and player statistics"})]}),o.jsxs("div",{className:"filter-tabs",children:[o.jsx("button",{onClick:()=>e("overview"),className:`filter-tab ${t==="overview"?"filter-tab-active":"filter-tab-inactive"}`,children:"Overview"}),o.jsx("button",{onClick:()=>e("meta"),className:`filter-tab ${t==="meta"?"filter-tab-active":"filter-tab-inactive"}`,children:"Meta Analysis"}),o.jsx("button",{onClick:()=>e("player"),className:`filter-tab ${t==="player"?"filter-tab-active":"filter-tab-inactive"}`,children:"Player Analytics"})]})]})}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:u.map((h,f)=>o.jsx("div",{className:"metric-card",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"metric-label",children:h.label}),o.jsx("p",{className:"metric-value",children:h.value})]}),o.jsx("div",{className:`p-3 rounded-lg ${h.bgColor} ${h.color}`,children:o.jsx(h.icon,{size:24})})]})},f))}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[o.jsxs("div",{className:"chart-container",children:[o.jsx("h2",{className:"chart-title",children:"Tournament Status"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-gray-700 font-inter font-medium",children:"Completed"}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"w-40 bg-gray-200 rounded-full h-3",children:o.jsx("div",{className:"bg-green-500 h-3 rounded-full",style:{width:`${r.totalTournaments>0?r.completedTournaments.length/r.totalTournaments*100:0}%`}})}),o.jsx("span",{className:"text-lg font-space-grotesk font-bold text-gray-900",children:r.completedTournaments.length})]})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-gray-700 font-inter font-medium",children:"Active"}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"w-40 bg-gray-200 rounded-full h-3",children:o.jsx("div",{className:"bg-blue-500 h-3 rounded-full",style:{width:`${r.totalTournaments>0?r.activeTournaments/r.totalTournaments*100:0}%`}})}),o.jsx("span",{className:"text-lg font-space-grotesk font-bold text-gray-900",children:r.activeTournaments})]})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-gray-700 font-inter font-medium",children:"Upcoming"}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"w-40 bg-gray-200 rounded-full h-3",children:o.jsx("div",{className:"bg-orange-500 h-3 rounded-full",style:{width:`${r.totalTournaments>0?r.upcomingTournaments/r.totalTournaments*100:0}%`}})}),o.jsx("span",{className:"text-lg font-space-grotesk font-bold text-gray-900",children:r.upcomingTournaments})]})]})]})]}),o.jsxs("div",{className:"chart-container",children:[o.jsx("h2",{className:"chart-title",children:"Top Player Win Rates"}),o.jsx("div",{className:"space-y-4",children:c.map((h,f)=>o.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 bg-gray-900 rounded-full flex items-center justify-center text-white font-space-grotesk font-bold",children:f+1}),o.jsxs("div",{children:[o.jsx("p",{className:"font-space-grotesk font-bold text-gray-900",children:h.player}),o.jsxs("p",{className:"text-gray-600 font-inter",children:[h.wins,"/",h.matches," matches"]})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("p",{className:"font-space-grotesk font-bold text-xl text-gray-900",children:[h.winRate,"%"]}),o.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-3",children:o.jsx("div",{className:"bg-green-500 h-3 rounded-full",style:{width:`${h.winRate}%`}})})]})]},h.player))})]})]}),o.jsxs("div",{className:"chart-container mt-8",children:[o.jsx("h2",{className:"chart-title",children:"Match Statistics"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"metric-value text-blue-600",children:r.completedMatches}),o.jsx("p",{className:"metric-label",children:"Completed Matches"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"metric-value text-orange-600",children:"0"}),o.jsx("p",{className:"metric-label",children:"Ongoing Matches"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"metric-value text-green-600",children:"0"}),o.jsx("p",{className:"metric-label",children:"Scheduled Matches"})]})]})]})]})})}const lc={"Over Finish (2 pts)":2,"Burst Finish (2 pts)":2,"Spin Finish (1 pt)":1,"Extreme Finish (3 pts)":3},VN=()=>{const{confirm:t,alert:e}=cn(),[s,n]=k.useState([]),[r,i]=k.useState(""),[a,l]=k.useState(""),[c,d]=k.useState(!1),[u,h]=k.useState(""),[f,m]=k.useState({}),[p,x]=k.useState({}),[b,y]=k.useState(!0),[g,v]=k.useState(!1),[w,_]=k.useState(""),[j,E]=k.useState(""),[A,S]=k.useState(1),[O,P]=k.useState(""),[R,U]=k.useState({}),[K,T]=k.useState(0),[B,H]=k.useState(0),[W,q]=k.useState(2),[X,Z]=k.useState(!1),[re,M]=k.useState(!1),[J,ee]=k.useState(!1),[se,L]=k.useState(""),[z,$]=k.useState({}),[ie,N]=k.useState(null);k.useEffect(()=>{C()},[]),k.useEffect(()=>{if(r){d(!1),l(""),h("");const I=s.find(Y=>Y.id===r);I!=null&&I.password||(d(!0),ne(r))}},[r]);const C=async()=>{try{const{data:I,error:Y}=await V.from("tournaments").select("id, name, status, tournament_date, location, beyblades_per_player, password").order("tournament_date",{ascending:!1});if(Y)throw Y;n(I||[]);const te=I==null?void 0:I.find(le=>le.status==="active");te&&i(te.id)}catch(I){console.error("Error fetching tournaments:",I)}finally{y(!1)}},D=()=>{const I=s.find(Y=>Y.id===r);if(!(I!=null&&I.password)){d(!0),ne(r);return}a===I.password?(d(!0),h(""),ne(r)):h("Incorrect password. Please try again.")},ne=async I=>{v(!0);try{const{data:Y,error:te}=await V.from("tournament_registrations").select(`
          player_name,
          tournament_beyblades(
            beyblade_name,
            blade_line
          )
        `).eq("tournament_id",I).eq("status","confirmed").order("player_name",{ascending:!0});if(te)throw te;const le={},De={};Y==null||Y.forEach(Ne=>{const we=Ne.player_name,nt=Ne.tournament_beyblades.map(At=>At.beyblade_name),Ie=Ne.tournament_beyblades.map(At=>({name:At.beyblade_name,blade_line:At.blade_line}));nt.length>0&&(le[we]=nt,De[we]=Ie)}),m(le),x(De),G()}catch(Y){console.error("Error fetching player data:",Y),m({})}finally{v(!1)}},G=()=>{_(""),E(""),S(1),P(""),U({}),T(0),H(0),q(2),Z(!1),$({}),x({}),L("")},he=(I,Y)=>{I===1?(_(Y),Y===j&&E("")):(E(Y),Y===w&&_("")),Y&&(U({}),T(0),H(0),q(2),Z(!1),$({}))},ye=(I,Y)=>{var we,nt,Ie;const te=(fe==null?void 0:fe.beyblades_per_player)||3,le=Math.floor(Y/te)+1,De=Y%te;if(le===1)return((we=f[I])==null?void 0:we[De])||"";const Ne=(nt=z[le])==null?void 0:nt[I];return Ne?Ne[De]||"":((Ie=f[I])==null?void 0:Ie[De])||""},xe=(I,Y)=>{var we,nt,Ie,At,un,rt;const te=(fe==null?void 0:fe.beyblades_per_player)||3,le=Math.floor(Y/te)+1,De=Y%te;if(le===1)return((nt=(we=p[I])==null?void 0:we[De])==null?void 0:nt.blade_line)||"";const Ne=(Ie=z[le])==null?void 0:Ie[I];if(Ne){const os=Ne[De],Ft=(At=p[I])==null?void 0:At.find(Dx=>Dx.name===os);return(Ft==null?void 0:Ft.blade_line)||""}return((rt=(un=p[I])==null?void 0:un[De])==null?void 0:rt.blade_line)||""},dt=()=>{if(X){e("Phase Required",`Click Shuffle before adding the next match (after every ${(fe==null?void 0:fe.beyblades_per_player)||3} matches).`);return}if(!w||!j){e("Missing Players","Please select both players first.");return}let I=0;for(;R[I]!==void 0;)I++;const Y={...R,[I]:{outcome:null,winner:null,points:0}};U(Y);const te=(fe==null?void 0:fe.beyblades_per_player)||3,le=Object.keys(Y).length;le>0&&le%te===0&&Z(!0)},Cs=(I,Y)=>{const te={...R};if(te[I]){te[I].outcome=Y;const le=Y&&te[I].winner&&lc[Y]||0;te[I].points=le}U(te),Lr(te)},Ps=(I,Y)=>{const te={...R};if(te[I]){te[I].winner=Y;const le=te[I].outcome&&Y&&lc[te[I].outcome]||0;te[I].points=le}U(te),Lr(te)},Lr=I=>{let Y=0,te=0;Object.values(I).forEach(le=>{le.winner&&le.outcome&&le.points>0&&(le.winner===w?Y+=le.points:le.winner===j&&(te+=le.points))}),T(Y),H(te)},gl=I=>{const Y={...R};delete Y[I],U(Y),Lr(Y),Z(!1)},Tx=()=>{const I=W,Y={...z};Y[I]||(Y[I]={[w]:[...f[w]||[]],[j]:[...f[j]||[]]}),$(Y),q(te=>te+1),Z(!1)},Ax=(I,Y,te)=>{$(le=>({...le,[I]:{...le[I],[Y]:te}}))},Bu=(I,Y)=>{N(Y),I.dataTransfer.effectAllowed="move"},Iu=I=>{I.preventDefault(),I.dataTransfer.dropEffect="move"},$u=(I,Y,te,le)=>{var nt;if(I.preventDefault(),!ie)return;const De=((nt=z[Y])==null?void 0:nt[te])||[],Ne=De.indexOf(ie);if(Ne===-1)return;const we=[...De];we.splice(Ne,1),we.splice(le,0,ie),Ax(Y,te,we),N(null)},zu=()=>{N(null)},Ox=async()=>{if(!O.trim()){e("Please enter the Tournament Officer name before submitting.");return}const I=Object.entries(R).filter(([Y,te])=>te.outcome&&te.winner);if(I.length===0){e("No complete matches to submit.");return}ee(!0),L("Submitting matches...");try{const Y=I.map(([De,Ne])=>{const we=parseInt(De);return{tournament_id:r,round_number:A,player1_name:w,player2_name:j,player1_beyblade:ye(w,we),player2_beyblade:ye(j,we),player1_blade_line:xe(w,we),player2_blade_line:xe(j,we),outcome:Ne.outcome,winner_name:Ne.winner,points_awarded:Ne.points,match_number:we+1,phase_number:Math.floor(we/3)+1,tournament_officer:O}}),{error:te}=await V.from("match_results").insert(Y);if(te)throw te;const{error:le}=await V.from("match_sessions").insert({tournament_id:r,round_number:A,player1_name:w,player2_name:j,player1_final_score:K,player2_final_score:B,winner_name:K>B?w:j,total_matches:I.length,tournament_officer:O,match_summary:I.map(([De,Ne])=>{const we=parseInt(De),nt=ye(Ne.winner,we),Ie=(fe==null?void 0:fe.beyblades_per_player)||3,At=Math.floor(we/Ie)+1,un=we%Ie+1;return`Phase ${At}, Match ${un}: ${Ne.outcome} by ${Ne.winner} using ${nt}`}).join("; "),phases:Object.keys(z).length+1,deck_orders:z});if(le)throw le;L("✅ Matches submitted successfully!"),M(!1),setTimeout(()=>{G(),L("")},2e3)}catch(Y){console.error("Error submitting matches:",Y),L("❌ Failed to submit matches. Please try again.")}finally{ee(!1)}},Mx=()=>Object.entries(R).filter(([Y,te])=>te.outcome&&te.winner).map(([Y,te])=>{const le=parseInt(Y),De=ye(te.winner,le);return`Match ${le+1}: ${te.outcome} by ${te.winner} using ${De}`}),fe=s.find(I=>I.id===r),Fu=Object.keys(f),Rx=Fu.filter(I=>I!==j),Lx=Fu.filter(I=>I!==w);return b?o.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading tournaments..."})]})}):o.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"OBC Match Tracker"}),o.jsx("p",{className:"text-gray-600",children:"Track tournament matches in real-time"})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Tournament Selection"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Tournament"}),o.jsxs("select",{value:r,onChange:I=>i(I.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.jsx("option",{value:"",children:"-- Select Tournament --"}),s.map(I=>o.jsxs("option",{value:I.id,children:[I.name," (",I.status,")"]},I.id))]})]}),fe&&o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[o.jsx("h3",{className:"font-semibold text-gray-900",children:fe.name}),o.jsxs("p",{className:"text-sm text-gray-600",children:["Status: ",o.jsx("span",{className:`capitalize ${fe.status==="active"?"text-green-600":fe.status==="upcoming"?"text-blue-600":"text-gray-600"}`,children:fe.status})]}),o.jsxs("p",{className:"text-sm text-gray-600",children:["Date: ",new Date(fe.tournament_date).toLocaleDateString()]}),o.jsxs("p",{className:"text-sm text-gray-600",children:["Location: ",fe.location]}),fe.password&&o.jsx("p",{className:"text-sm text-orange-600 font-medium",children:"🔒 Password protected"})]})]})]}),r&&(fe==null?void 0:fe.password)&&!c&&o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:"🔒 Tournament Access"}),o.jsx("p",{className:"text-gray-600 mb-4",children:"This tournament requires a password to access match tracking features."}),o.jsxs("div",{className:"max-w-md",children:[o.jsxs("div",{className:"flex space-x-3",children:[o.jsx("input",{type:"password",placeholder:"Enter tournament password",value:a,onChange:I=>{l(I.target.value),h("")},onKeyPress:I=>I.key==="Enter"&&D(),className:"flex-1 border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"}),o.jsx("button",{onClick:D,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"Verify"})]}),u&&o.jsx("p",{className:"text-red-600 text-sm mt-2",children:u})]})]}),r&&c&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Match Setup"}),g?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading player data..."})]}):Object.keys(f).length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx(tn,{size:48,className:"mx-auto text-gray-400 mb-4"}),o.jsx("p",{className:"text-gray-500",children:"No confirmed registrations found for this tournament"})]}):o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Round #"}),o.jsx("input",{type:"number",min:"1",value:A,onChange:I=>S(parseInt(I.target.value)||1),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Player 1"}),o.jsxs("select",{value:w,onChange:I=>he(1,I.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.jsx("option",{value:"",children:"-- Select Player 1 --"}),Rx.map(I=>o.jsx("option",{value:I,children:I},I))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Player 2"}),o.jsxs("select",{value:j,onChange:I=>he(2,I.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.jsx("option",{value:"",children:"-- Select Player 2 --"}),Lx.map(I=>o.jsx("option",{value:I,children:I},I))]})]})]})]}),w&&j&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"bg-white border border-gray-200 rounded-lg shadow-md p-4 mb-6",children:o.jsxs("div",{className:"max-w-7xl mx-auto flex justify-between items-center",children:[o.jsx("div",{children:o.jsx("input",{type:"text",placeholder:"Tournament Officer",value:O,onChange:I=>P(I.target.value),className:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})}),o.jsxs("div",{className:"text-lg font-bold",children:[o.jsxs("span",{className:`${K>B?"text-green-600":K<B?"text-red-600":"text-gray-600"}`,children:[w,": ",K]}),o.jsx("span",{className:"mx-4 text-gray-400",children:"|"}),o.jsxs("span",{className:`${B>K?"text-green-600":B<K?"text-red-600":"text-gray-600"}`,children:[j,": ",B]})]})]})}),o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[o.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:["Phase 1 Decks (",(fe==null?void 0:fe.beyblades_per_player)||3," Beyblades)"]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b",children:[o.jsx("th",{className:"text-left py-2"}),o.jsx("th",{className:"text-left py-2 font-semibold",children:w}),o.jsx("th",{className:"text-left py-2 font-semibold",children:j})]})}),o.jsx("tbody",{children:Array.from({length:(fe==null?void 0:fe.beyblades_per_player)||3},(I,Y)=>{var te,le;return o.jsxs("tr",{className:"border-b",children:[o.jsxs("td",{className:"py-2 font-medium",children:["Bey ",Y+1]}),o.jsx("td",{className:"py-2",children:((te=f[w])==null?void 0:te[Y])||""}),o.jsx("td",{className:"py-2",children:((le=f[j])==null?void 0:le[Y])||""})]},Y)})})]})})]}),o.jsx("div",{className:"space-y-4 mb-6",children:Object.entries(R).map(([I,Y])=>{var At,un;const te=parseInt(I),le=ye(w,te),De=ye(j,te),Ne=te+1,we=(fe==null?void 0:fe.beyblades_per_player)||3,nt=Ne%we===0&&Ne>0,Ie=Math.floor(Ne/we)+1;return o.jsxs("div",{children:[o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Match ",Ne,": ",le," vs ",De]}),o.jsx("button",{onClick:()=>gl(te),className:"text-red-600 hover:bg-red-50 p-1 rounded",children:o.jsx(as,{size:16})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold mb-2",children:"Outcome:"}),o.jsx("div",{className:"space-y-2",children:Object.keys(lc).map(rt=>o.jsx("button",{onClick:()=>Cs(te,rt),className:`w-full text-left px-3 py-2 rounded border transition-colors ${Y.outcome===rt?"bg-blue-100 border-blue-300 text-blue-700":"bg-gray-50 border-gray-200 hover:bg-gray-100"}`,children:rt},rt))})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold mb-2",children:"Winner:"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("button",{onClick:()=>Ps(te,w),className:`w-full text-left px-3 py-2 rounded border transition-colors ${Y.winner===w?"bg-green-100 border-green-300 text-green-700":"bg-gray-50 border-gray-200 hover:bg-gray-100"}`,children:w}),o.jsx("button",{onClick:()=>Ps(te,j),className:`w-full text-left px-3 py-2 rounded border transition-colors ${Y.winner===j?"bg-green-100 border-green-300 text-green-700":"bg-gray-50 border-gray-200 hover:bg-gray-100"}`,children:j})]})]})]})]}),nt&&Ie>1&&z[Ie]&&o.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg shadow-md p-6 mt-4 border-2 border-purple-200",children:[o.jsxs("h3",{className:"text-lg font-bold text-purple-900 mb-4 flex items-center",children:[o.jsx(yf,{className:"mr-2",size:20}),"Phase ",Ie," Decks - Drag to Reorder"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold mb-3 text-purple-800",children:w}),o.jsx("div",{className:"space-y-2",children:(At=z[Ie][w])==null?void 0:At.map((rt,os)=>o.jsxs("div",{draggable:!0,onDragStart:Ft=>Bu(Ft,rt),onDragOver:Iu,onDrop:Ft=>$u(Ft,Ie,w,os),onDragEnd:zu,className:`bg-white p-3 rounded border-2 cursor-move transition-all duration-200 flex items-center ${ie===rt?"border-purple-400 shadow-lg opacity-50":"border-gray-200 hover:border-purple-300 hover:shadow-md"}`,children:[o.jsx(xf,{size:16,className:"text-gray-400 mr-2"}),o.jsxs("span",{className:"font-medium text-gray-700",children:[os+1,"."]}),o.jsx("span",{className:"ml-2",children:rt})]},`${Ie}-${w}-${os}`))})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold mb-3 text-purple-800",children:j}),o.jsx("div",{className:"space-y-2",children:(un=z[Ie][j])==null?void 0:un.map((rt,os)=>o.jsxs("div",{draggable:!0,onDragStart:Ft=>Bu(Ft,rt),onDragOver:Iu,onDrop:Ft=>$u(Ft,Ie,j,os),onDragEnd:zu,className:`bg-white p-3 rounded border-2 cursor-move transition-all duration-200 flex items-center ${ie===rt?"border-purple-400 shadow-lg opacity-50":"border-gray-200 hover:border-purple-300 hover:shadow-md"}`,children:[o.jsx(xf,{size:16,className:"text-gray-400 mr-2"}),o.jsxs("span",{className:"font-medium text-gray-700",children:[os+1,"."]}),o.jsx("span",{className:"ml-2",children:rt})]},`${Ie}-${j}-${os}`))})]})]})]})]},I)})}),o.jsxs("div",{className:"flex justify-center space-x-4 mb-6",children:[o.jsxs("button",{onClick:X?Tx:dt,className:"bg-blue-600 text-white px-6 py-3 rounded-md hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[o.jsx(En,{size:20}),o.jsx("span",{children:X?"Shuffle":"Add Match"})]}),o.jsxs("button",{onClick:()=>M(!0),disabled:Object.values(R).every(I=>!I.outcome||!I.winner),className:"bg-green-600 text-white px-6 py-3 rounded-md hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[o.jsx(q_,{size:20}),o.jsx("span",{children:"Submit Scores"})]}),o.jsxs("button",{onClick:G,className:"bg-gray-600 text-white px-6 py-3 rounded-md hover:bg-gray-700 transition-colors flex items-center space-x-2",children:[o.jsx(yf,{size:20}),o.jsx("span",{children:"Refresh"})]})]}),se&&o.jsx("div",{className:"text-center py-4",children:o.jsx("p",{className:`font-semibold ${se.includes("✅")?"text-green-600":se.includes("❌")?"text-red-600":"text-blue-600"}`,children:se})})]})]}),re&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Match Summary"}),o.jsx("button",{onClick:()=>M(!1),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:o.jsx(kt,{size:24})})]}),o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Final Scores"}),o.jsxs("p",{className:"text-xl",children:[o.jsxs("strong",{children:[w,":"]})," ",K," pts | ",o.jsxs("strong",{children:[j,":"]})," ",B," pts"]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Match Results"}),o.jsx("div",{className:"space-y-2",children:Mx().map((I,Y)=>o.jsx("p",{className:"text-gray-700",dangerouslySetInnerHTML:{__html:I}},Y))})]}),o.jsxs("div",{className:"flex justify-end space-x-3",children:[o.jsx("button",{onClick:()=>M(!1),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),o.jsxs("button",{onClick:Ox,disabled:J,className:"px-6 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors disabled:opacity-50 flex items-center space-x-2",children:[J&&o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),o.jsx("span",{children:"Confirm Submit"})]})]})]})]})})]})};function qN(){var $,ie;const{user:t}=zt(),[e,s]=k.useState([]),[n,r]=k.useState(!1),[i,a]=k.useState(null),[l,c]=k.useState({}),[d,u]=k.useState(null),[h,f]=k.useState([]),[m,p]=k.useState(!1),[x,b]=k.useState(!0),[y,g]=k.useState(null),[v,w]=k.useState([]),[_,j]=k.useState(!1),[E,A]=k.useState(null),[S,O]=k.useState({});k.useState(!1),k.useState([]),k.useState(!1);const P=(t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="developer";Ke.useEffect(()=>{T()},[]);const R=async N=>{p(!0);try{const{data:C,error:D}=await V.from("tournament_registration_details").select("*").eq("tournament_id",N).order("registered_at",{ascending:!1});if(D)throw D;const ne={};C==null||C.forEach(G=>{ne[G.registration_id]||(ne[G.registration_id]={registration_id:G.registration_id,tournament_id:G.tournament_id,player_name:G.player_name,payment_mode:G.payment_mode,registered_at:G.registered_at,status:G.status,payment_status:G.payment_status,beyblades:[]}),G.beyblade_id&&(ne[G.registration_id].beyblades.find(ye=>ye.beyblade_id===G.beyblade_id)||ne[G.registration_id].beyblades.push({beyblade_id:G.beyblade_id,beyblade_name:G.beyblade_name,blade_line:G.blade_line,parts:G.beyblade_parts||[]}))}),f(Object.values(ne))}catch(C){console.error("Error fetching registrations:",C),f([])}finally{p(!1)}},U=async(N,C)=>{try{console.log("Updating payment status:",{registrationId:N,newStatus:C});const{error:D}=await V.from("tournament_registrations").update({payment_status:C}).eq("id",N);if(D)throw console.error("Payment status update error:",D),D.code==="42501"||D.message.includes("RLS")?alert("Permission denied. You need admin or developer role to update payment status."):alert(`Failed to update payment status: ${D.message}`),D;console.log("Payment status updated successfully"),await T(),alert("Payment status updated successfully!")}catch(D){console.error("Error updating payment status:",D)}},K=(N,C)=>C==="Custom"?["Lockchip","Main Blade","Assist Blade","Ratchet","Bit"].map(ne=>N.find(G=>G.part_type===ne)).filter(Boolean):["Blade","Ratchet","Bit"].map(ne=>N.find(G=>G.part_type===ne)).filter(Boolean),T=async()=>{try{const{data:N,error:C}=await V.from("tournaments").select("*").order("tournament_date",{ascending:!1});if(C)throw C;const D=await Promise.all((N||[]).map(async ne=>{const{count:G}=await V.from("tournament_registrations").select("*",{count:"exact",head:!0}).eq("tournament_id",ne.id).eq("status","confirmed");return{...ne,current_participants:G||0}}));s(D)}catch(N){console.error("Error fetching tournaments:",N)}finally{b(!1)}},B=()=>{r(!0),c({name:"",description:"",tournament_date:"",location:"",max_participants:16,has_participant_limit:!0,status:"upcoming",registration_deadline:"",prize_pool:"",beyblades_per_player:3,players_per_team:1,is_free:!0,entry_fee:0,tournament_type:"casual"})},H=N=>{a(N.id),c(N)},W=async()=>{try{if(n){const{error:N}=await V.from("tournaments").insert([l]);if(N){console.error("Insert error:",N),N.code==="42501"||N.message.includes("RLS")?alert("Permission denied. You need admin or developer role to create tournaments."):alert(`Failed to create tournament: ${N.message}`);return}}else if(i){const{error:N}=await V.from("tournaments").update(l).eq("id",i);if(N){console.error("Update error:",N),N.code==="42501"||N.message.includes("RLS")||N.code==="42883"?alert("Permission denied. You need admin or developer role to edit tournaments."):alert(`Failed to update tournament: ${N.message}`);return}}await T(),r(!1),a(null),c({})}catch(N){console.error("Error saving tournament:",N),alert(`Failed to save tournament: ${N instanceof Error?N.message:"Unknown error"}. Please try again.`)}},q=()=>{r(!1),a(null),c({})},X=async N=>{if(confirm("Are you sure you want to delete this tournament? This will permanently delete ALL related data including registrations, beyblades, parts, matches, and sessions. This action cannot be undone."))try{const{error:C}=await V.from("tournaments").delete().eq("id",N);if(C){console.error("Delete error:",C),C.code==="42501"||C.message.includes("RLS")||C.message.includes("permission")?alert("Permission denied. You need admin or developer role to delete tournaments."):alert(`Failed to delete tournament: ${C.message}`);return}alert("Tournament deleted successfully!"),await T()}catch(C){console.error("Error deleting tournament:",C),alert(`Failed to delete tournament: ${C instanceof Error?C.message:"Unknown error"}. Please try again.`)}},Z=async N=>{j(!0),g(N);try{const{data:C,error:D}=await V.from("match_results").select("*").eq("tournament_id",N).order("submitted_at",{ascending:!1});if(D)throw D;w(C||[])}catch(C){console.error("Error fetching matches:",C),alert("Failed to load matches. Please try again.")}finally{j(!1)}},re=N=>{A(N.id),O({...N})},M=async()=>{if(!(!E||!P))try{const{error:N}=await V.from("match_results").update(S).eq("id",E);if(N){console.error("Update error:",N),alert(`Failed to update match: ${N.message}`);return}A(null),O({}),await Z(y),alert("Match updated successfully!")}catch(N){console.error("Error updating match:",N),alert(`Failed to update match: ${N instanceof Error?N.message:"Unknown error"}`)}},J=()=>{A(null),O({})},ee=async N=>{if(confirm("Are you sure you want to delete this match? This action cannot be undone."))try{const{error:C}=await V.from("match_results").delete().eq("id",N);if(C){console.error("Delete error:",C),alert(`Failed to delete match: ${C.message}`);return}alert("Match deleted successfully!"),await Z(y)}catch(C){console.error("Error deleting match:",C),alert(`Failed to delete match: ${C instanceof Error?C.message:"Unknown error"}`)}},se=N=>{switch(N){case"upcoming":return"bg-blue-100 text-blue-800";case"active":return"bg-green-100 text-green-800";case"completed":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},L=N=>{u(N),R(N)},z=()=>{u(null),f([])};if(x)return o.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading tournaments..."})]})});if(d){const N=e.find(C=>C.id===d);return o.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[o.jsxs("div",{className:"mb-8",children:[o.jsxs("button",{onClick:z,className:"flex items-center space-x-2 text-blue-600 hover:text-blue-800 font-medium transition-colors mb-4",children:[o.jsx(cl,{size:20}),o.jsx("span",{children:"Back to Tournament Manager"})]}),o.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:[N==null?void 0:N.name," - Registrations"]}),o.jsx("p",{className:"text-gray-600",children:"Manage tournament registrations and payment status"})]}),m?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading registrations..."})]}):h.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx(tn,{size:48,className:"mx-auto text-gray-400 mb-4"}),o.jsx("p",{className:"text-gray-500",children:"No registrations found for this tournament"})]}):o.jsx("div",{className:"space-y-6",children:h.map(C=>o.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white font-bold",children:C.player_name.charAt(0).toUpperCase()}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-lg text-gray-900",children:C.player_name}),o.jsxs("p",{className:"text-sm text-gray-600",children:["Registered: ",new Date(C.registered_at).toLocaleDateString()]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Payment Mode:"}),o.jsx("p",{className:"font-medium capitalize",children:C.payment_mode==="free"?"Free":C.payment_mode.replace("_"," ").replace(/\b\w/g,D=>D.toUpperCase())||"N/A"})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Status:"}),o.jsx("p",{className:"font-medium capitalize",children:C.status})]})]})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Payment Status"}),o.jsxs("select",{value:C.payment_status||"unpaid",onChange:D=>U(C.registration_id,D.target.value),className:"text-xs border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-1 focus:ring-blue-500 bg-white",children:[o.jsx("option",{value:"unpaid",children:"Unpaid"}),o.jsx("option",{value:"paid",children:"Paid"}),o.jsx("option",{value:"confirmed",children:"Confirmed"})]})]}),o.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${C.payment_status==="confirmed"?"bg-green-100 text-green-800":C.payment_status==="paid"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:C.payment_status||"unpaid"})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("h4",{className:"font-semibold text-gray-900 flex items-center",children:[o.jsx(Yt,{size:16,className:"mr-2 text-yellow-500"}),"Registered Beyblades (",C.beyblades.length,")"]}),C.beyblades.length===0?o.jsx("p",{className:"text-gray-500 text-sm italic",children:"No Beyblades registered"}):o.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:C.beyblades.map((D,ne)=>o.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[o.jsxs("div",{className:"flex justify-between items-center mb-3",children:[o.jsx("h5",{className:"font-semibold text-gray-900",children:D.beyblade_name}),o.jsxs("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:[D.blade_line," Line"]})]}),D.parts&&D.parts.length>0?o.jsx("div",{className:"grid grid-cols-2 gap-2",children:K(D.parts,D.blade_line).map((G,he)=>o.jsxs("div",{className:"bg-white border border-gray-300 p-2 rounded text-xs",children:[o.jsx("div",{className:"font-medium text-gray-700",children:G.part_type}),o.jsx("div",{className:"text-gray-600",children:G.part_name})]},he))}):o.jsx("p",{className:"text-gray-500 text-xs",children:"No parts configured"})]},D.beyblade_id))})]})]},C.registration_id))})]})}return o.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[o.jsxs("div",{className:"flex justify-between items-center mb-8",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Tournament Manager"}),o.jsx("p",{className:"text-gray-600",children:"Create and manage tournaments"})]}),o.jsx("div",{className:"flex space-x-3",children:P&&o.jsxs("button",{onClick:B,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[o.jsx(En,{size:20}),o.jsx("span",{children:"Create Tournament"})]})})]}),(n||i)&&o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:n?"Create New Tournament":"Edit Tournament"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tournament Name"}),o.jsx("input",{type:"text",value:l.name||"",onChange:N=>c({...l,name:N.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),o.jsx("input",{type:"text",value:l.location||"",onChange:N=>c({...l,location:N.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tournament Date"}),o.jsx("input",{type:"date",value:l.tournament_date||"",onChange:N=>c({...l,tournament_date:N.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Registration Deadline"}),o.jsx("input",{type:"date",value:l.registration_deadline||"",onChange:N=>c({...l,registration_deadline:N.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Participant Limit"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs("label",{className:"flex items-center",children:[o.jsx("input",{type:"radio",checked:l.has_participant_limit,onChange:()=>c({...l,has_participant_limit:!0}),className:"mr-2"}),o.jsx("span",{className:"text-sm text-gray-700",children:"Set participant limit"})]}),o.jsxs("label",{className:"flex items-center",children:[o.jsx("input",{type:"radio",checked:!l.has_participant_limit,onChange:()=>c({...l,has_participant_limit:!1}),className:"mr-2"}),o.jsx("span",{className:"text-sm text-gray-700",children:"No limit"})]})]}),l.has_participant_limit&&o.jsx("input",{type:"number",min:"1",value:l.max_participants,onChange:N=>c({...l,max_participants:parseInt(N.target.value)||1}),placeholder:"Maximum participants",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prize Pool"}),o.jsx("input",{type:"text",value:l.prize_pool||"",onChange:N=>c({...l,prize_pool:N.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., $500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tournament Type"}),o.jsxs("select",{value:l.tournament_type||"casual",onChange:N=>c({...l,tournament_type:N.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.jsx("option",{value:"casual",children:"Casual"}),o.jsx("option",{value:"ranked",children:"Ranked"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Entry Type"}),o.jsxs("select",{value:l.is_free?"free":"paid",onChange:N=>{const C=N.target.value==="free";c({...l,is_free:C,entry_fee:C?0:l.entry_fee||50})},className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.jsx("option",{value:"free",children:"Free Entry"}),o.jsx("option",{value:"paid",children:"Paid Entry"})]})]}),!l.is_free&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Entry Fee"}),o.jsx("input",{type:"number",step:"0.01",min:"0",value:l.entry_fee||"",onChange:N=>c({...l,entry_fee:parseFloat(N.target.value)||0}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Beyblades per Player"}),o.jsx("input",{type:"number",min:"1",max:"5",value:l.beyblades_per_player||3,onChange:N=>c({...l,beyblades_per_player:parseInt(N.target.value)}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Players per Team"}),o.jsx("input",{type:"number",min:"1",max:"4",value:l.players_per_team||1,onChange:N=>c({...l,players_per_team:parseInt(N.target.value)}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),o.jsx("textarea",{value:l.description||"",onChange:N=>c({...l,description:N.target.value}),rows:3,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),!n&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),o.jsxs("select",{value:l.status||"",onChange:N=>c({...l,status:N.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.jsx("option",{value:"upcoming",children:"Upcoming"}),o.jsx("option",{value:"active",children:"Active"}),o.jsx("option",{value:"completed",children:"Completed"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tournament Type"}),o.jsxs("select",{value:l.tournament_type||"casual",onChange:N=>c({...l,tournament_type:N.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.jsx("option",{value:"casual",children:"Casual"}),o.jsx("option",{value:"ranked",children:"Ranked"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Entry Type"}),o.jsxs("select",{value:l.is_free?"free":"paid",onChange:N=>{const C=N.target.value==="free";c({...l,is_free:C,entry_fee:C?0:l.entry_fee||50})},className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.jsx("option",{value:"free",children:"Free Entry"}),o.jsx("option",{value:"paid",children:"Paid Entry"})]})]}),!l.is_free&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Entry Fee (₱)"}),o.jsx("input",{type:"number",step:"0.01",min:"0",value:l.entry_fee||"",onChange:N=>c({...l,entry_fee:parseFloat(N.target.value)||0}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"50.00"})]})]})]}),o.jsxs("div",{className:"flex space-x-3 mt-6",children:[o.jsxs("button",{onClick:W,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[o.jsx(Fi,{size:16}),o.jsx("span",{children:"Save"})]}),o.jsxs("button",{onClick:q,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors flex items-center space-x-2",children:[o.jsx(kt,{size:16}),o.jsx("span",{children:"Cancel"})]})]})]}),o.jsx("div",{className:"space-y-4",children:e.map(N=>o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[o.jsx("h3",{className:"text-xl font-bold text-gray-900",children:N.name}),o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium capitalize ${se(N.status)}`,children:N.status})]}),o.jsx("p",{className:"text-gray-600 mb-2",children:N.description}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-gray-600",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",children:"Date:"})," ",new Date(N.tournament_date).toLocaleDateString()]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",children:"Location:"})," ",N.location]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",children:"Participants:"})," ",N.current_participants,"/",N.max_participants===999999?"∞":N.max_participants]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",children:"Prize Pool:"})," ",N.prize_pool]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",children:"Type:"}),o.jsx("span",{className:`ml-1 capitalize ${N.tournament_type==="ranked"?"text-orange-600 font-semibold":"text-gray-600"}`,children:N.tournament_type})]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",children:"Entry:"}),o.jsx("span",{className:`ml-1 ${N.is_free?"text-green-600":"text-blue-600"} font-semibold`,children:N.is_free?"Free":`₱${N.entry_fee}`})]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",children:"Beyblades/Player:"})," ",N.beyblades_per_player]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",children:"Players/Team:"})," ",N.players_per_team]})]})]}),o.jsxs("div",{className:"flex space-x-2",children:[P&&o.jsx("button",{onClick:()=>H(N),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-md transition-colors",title:"Edit Tournament",children:o.jsx(Bn,{size:16})}),o.jsx("button",{onClick:()=>L(N.id),className:"p-2 text-green-600 hover:bg-green-50 rounded-md transition-colors",title:"View Registrations",children:o.jsx(ju,{size:16})}),o.jsx("button",{onClick:()=>Z(N.id),className:"p-2 text-purple-600 hover:bg-purple-50 rounded-md transition-colors",title:"View Matches",children:o.jsx(vf,{size:16})}),P&&o.jsx("button",{onClick:()=>X(N.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-md transition-colors",title:"Delete Tournament",children:o.jsx(as,{size:16})})]})]}),o.jsx("div",{className:"border-t pt-4",children:o.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[o.jsxs("span",{children:["Registration Deadline: ",new Date(N.registration_deadline).toLocaleDateString()]}),o.jsxs("span",{children:["Tournament ID: ",N.id]})]})})]},N.id))}),d&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Tournament Registrations"}),o.jsx("p",{className:"text-gray-600",children:($=e.find(N=>N.id===d))==null?void 0:$.name})]}),o.jsx("button",{onClick:()=>u(null),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:o.jsx(kt,{size:24})})]}),o.jsx("div",{className:"p-6",children:m?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading registrations..."})]}):h.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx(tn,{size:48,className:"mx-auto text-gray-400 mb-4"}),o.jsx("p",{className:"text-gray-500",children:"No registrations yet for this tournament"})]}):o.jsx("div",{className:"space-y-6",children:h.map(N=>o.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg p-6 shadow-sm",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-gray-900",children:N.player_name}),o.jsxs("p",{className:"text-sm text-gray-600",children:["Registered: ",new Date(N.registered_at).toLocaleString()]}),o.jsxs("p",{className:"text-sm text-gray-600",children:["Payment: ",o.jsx("span",{className:"capitalize",children:N.payment_mode.replace("_"," ")})]})]}),o.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${N.status==="confirmed"?"bg-green-100 text-green-800":N.status==="cancelled"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:N.status})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h4",{className:"font-semibold text-gray-900",children:"Registered Beyblades:"}),N.beyblades.map(C=>o.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsx("h5",{className:"font-medium text-gray-900",children:C.beyblade_name}),o.jsxs("span",{className:"text-sm text-gray-600 bg-white px-2 py-1 rounded",children:[C.blade_line," Line"]})]}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-2 text-sm",children:C.parts.map((D,ne)=>o.jsxs("div",{className:"bg-white border border-gray-300 p-2 rounded",children:[o.jsx("div",{className:"font-medium text-gray-700",children:D.part_type}),o.jsx("div",{className:"text-gray-600",children:D.part_name})]},ne))})]},C.beyblade_id))]})]},N.registration_id))})})]})}),y&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-7xl w-full max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Tournament Matches"}),o.jsx("p",{className:"text-gray-600",children:(ie=e.find(N=>N.id===y))==null?void 0:ie.name})]}),o.jsx("button",{onClick:()=>{g(null),A(null),O({})},className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:o.jsx(kt,{size:24})})]}),o.jsx("div",{className:"p-6",children:_?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading matches..."})]}):v.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx(vf,{size:48,className:"mx-auto text-gray-400 mb-4"}),o.jsx("p",{className:"text-gray-500",children:"No matches found for this tournament"})]}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Round"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Match #"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Player 1"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Player 1 Bey"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Player 2"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Player 2 Bey"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Winner"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Outcome"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Points"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Officer"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),P&&o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:v.map(N=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:E===N.id?o.jsx("input",{type:"number",value:S.round_number||"",onChange:C=>O({...S,round_number:parseInt(C.target.value)}),className:"w-16 border border-gray-300 rounded px-2 py-1 text-sm"}):N.round_number}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:E===N.id?o.jsx("input",{type:"number",value:S.match_number||"",onChange:C=>O({...S,match_number:parseInt(C.target.value)}),className:"w-16 border border-gray-300 rounded px-2 py-1 text-sm"}):N.match_number}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:E===N.id?o.jsx("input",{type:"text",value:S.player1_name||"",onChange:C=>O({...S,player1_name:C.target.value}),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm"}):N.player1_name}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:E===N.id?o.jsx("input",{type:"text",value:S.player1_beyblade||"",onChange:C=>O({...S,player1_beyblade:C.target.value}),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm"}):N.player1_beyblade}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:E===N.id?o.jsx("input",{type:"text",value:S.player2_name||"",onChange:C=>O({...S,player2_name:C.target.value}),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm"}):N.player2_name}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:E===N.id?o.jsx("input",{type:"text",value:S.player2_beyblade||"",onChange:C=>O({...S,player2_beyblade:C.target.value}),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm"}):N.player2_beyblade}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:E===N.id?o.jsxs("select",{value:S.winner_name||"",onChange:C=>O({...S,winner_name:C.target.value}),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm",children:[o.jsx("option",{value:"",children:"Select Winner"}),o.jsx("option",{value:S.player1_name,children:S.player1_name}),o.jsx("option",{value:S.player2_name,children:S.player2_name})]}):o.jsx("span",{className:`font-medium ${N.winner_name===N.player1_name?"text-green-600":"text-blue-600"}`,children:N.winner_name})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:E===N.id?o.jsxs("select",{value:S.outcome||"",onChange:C=>O({...S,outcome:C.target.value}),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm",children:[o.jsx("option",{value:"",children:"Select Outcome"}),o.jsx("option",{value:"Spin Finish (1 pt)",children:"Spin Finish (1 pt)"}),o.jsx("option",{value:"Burst Finish (2 pts)",children:"Burst Finish (2 pts)"}),o.jsx("option",{value:"Over Finish (2 pts)",children:"Over Finish (2 pts)"}),o.jsx("option",{value:"Extreme Finish (3 pts)",children:"Extreme Finish (3 pts)"})]}):N.outcome}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:E===N.id?o.jsx("input",{type:"number",value:S.points_awarded||"",onChange:C=>O({...S,points_awarded:parseInt(C.target.value)}),className:"w-16 border border-gray-300 rounded px-2 py-1 text-sm"}):N.points_awarded}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:E===N.id?o.jsx("input",{type:"text",value:S.tournament_officer||"",onChange:C=>O({...S,tournament_officer:C.target.value}),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm"}):N.tournament_officer}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(Dn,{size:12,className:"mr-1"}),new Date(N.created_at).toLocaleDateString()]})}),P&&o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:o.jsx("div",{className:"flex space-x-2",children:E===N.id?o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:M,className:"text-green-600 hover:text-green-900 p-1 rounded hover:bg-green-50",title:"Save Changes",children:o.jsx(Fi,{size:16})}),o.jsx("button",{onClick:J,className:"text-gray-600 hover:text-gray-900 p-1 rounded hover:bg-gray-50",title:"Cancel",children:o.jsx(kt,{size:16})})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>re(N),className:"text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-50",title:"Edit Match",children:o.jsx(Bn,{size:16})}),o.jsx("button",{onClick:()=>ee(N.id),className:"text-red-600 hover:text-red-900 p-1 rounded hover:bg-red-50",title:"Delete Match",children:o.jsx(as,{size:16})})]})})})]},N.id))})]})})})]})})]})}function KN(){const{user:t}=zt(),{confirm:e,alert:s}=cn(),[n,r]=k.useState([]),[i,a]=k.useState("all"),[l,c]=k.useState("all"),[d,u]=k.useState(!0),h=(t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="developer";Ke.useEffect(()=>{f()},[]);const f=async()=>{try{console.log("🔍 USER MANAGEMENT: Fetching profiles...");const{data:g,error:v}=await V.from("profiles").select("*").order("created_at",{ascending:!1});if(v)throw console.error("❌ USER MANAGEMENT: Error fetching profiles:",v),v;console.log("📊 USER MANAGEMENT: Raw profiles data:",{count:(g==null?void 0:g.length)||0,sample:(g==null?void 0:g.slice(0,3))||[],allProfiles:g||[]});const w=(g||[]).map(_=>({id:_.id,username:_.username,email:_.email||"",role:_.role,joinedDate:_.created_at,status:"active",lastLogin:null}));console.log("🔄 USER MANAGEMENT: Formatted profiles as users:",{count:w.length,sample:w.slice(0,3),roles:w.map(_=>_.role),statuses:w.map(_=>_.status)}),r(w),console.log("✅ USER MANAGEMENT: Profiles loaded successfully as users")}catch(g){console.error("Error fetching profiles:",g)}finally{u(!1)}},m=n.filter(g=>{const v=i==="all"||g.status===i,w=l==="all"||g.role===l;return v&&w}),p=async(g,v)=>{try{const{error:w}=await V.from("profiles").update(v).eq("id",g);if(w){const _=w.code==="42501"||w.message.includes("RLS")?"Permission denied. You need admin or developer role to update users.":`Failed to update user: ${w.message}`;await s("Update Failed",_);return}await f()}catch(w){console.error("Error updating user:",w),await s("Update Failed",`Failed to update user: ${w instanceof Error?w.message:"Unknown error"}`)}},x=async g=>{if(await e("Delete User","Are you sure you want to delete this user? This will also delete all their registrations and data. This action cannot be undone."))try{const{data:w,error:_}=await V.rpc("delete_user_completely",{user_id_to_delete:g});if(_){console.error("Delete error:",_),_.code==="42501"||_.message.includes("RLS")?await s("Permission Denied","You need admin or developer role to delete users."):_.message.includes("cannot delete themselves")?await s("Cannot Delete","You cannot delete your own account."):await s("Delete Failed",`Failed to delete user: ${_.message}`);return}await s("Success","User deleted successfully!"),await f()}catch(w){console.error("Error deleting user:",w),await s("Delete Failed",`Failed to delete user: ${w instanceof Error?w.message:"Unknown error"}. Please try again.`)}},b=g=>{switch(g){case"active":return"bg-green-100 text-green-800";case"suspended":return"bg-red-100 text-red-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},y=g=>{switch(g){case"admin":return"bg-red-100 text-red-800";case"developer":return"bg-purple-100 text-purple-800";case"technical_officer":return"bg-blue-100 text-blue-800";case"user":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return d?o.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading users..."})]})}):o.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"User Management"}),o.jsx("p",{className:"text-gray-600",children:"Manage user accounts and permissions"})]}),o.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Status"}),o.jsxs("select",{value:i,onChange:g=>a(g.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.jsx("option",{value:"all",children:"All Status"}),o.jsx("option",{value:"active",children:"Active"}),o.jsx("option",{value:"suspended",children:"Suspended"}),o.jsx("option",{value:"pending",children:"Pending"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Role"}),o.jsxs("select",{value:l,onChange:g=>c(g.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.jsx("option",{value:"all",children:"All Roles"}),o.jsx("option",{value:"user",children:"User"}),o.jsx("option",{value:"technical_officer",children:"Technical Officer"}),o.jsx("option",{value:"admin",children:"Admin"}),o.jsx("option",{value:"developer",children:"Developer"})]})]})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[o.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-3 rounded-lg bg-blue-100 text-blue-600",children:o.jsx(tn,{size:24})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),o.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.length})]})]})}),o.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-3 rounded-lg bg-green-100 text-green-600",children:o.jsx(xi,{size:24})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Users"}),o.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.length})]})]})}),o.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-3 rounded-lg bg-red-100 text-red-600",children:o.jsx(xi,{size:24})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Suspended"}),o.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"0"})]})]})}),o.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-3 rounded-lg bg-purple-100 text-purple-600",children:o.jsx(xi,{size:24})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Admins"}),o.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.filter(g=>g.role==="admin"||g.role==="developer").length})]})]})})]}),o.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Joined"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Login"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m.map(g=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold",children:g.username.charAt(0).toUpperCase()}),o.jsxs("div",{className:"ml-4",children:[o.jsx("div",{className:"text-sm font-medium text-gray-900",children:g.username}),o.jsxs("div",{className:"text-sm text-gray-500 flex items-center",children:[o.jsx(z_,{size:12,className:"mr-1"}),g.email]})]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("select",{value:g.role,onChange:v=>p(g.id,{role:v.target.value}),disabled:!h,className:`text-xs font-medium px-2 py-1 rounded-full border-0 ${y(g.role)}`,children:[o.jsx("option",{value:"user",children:"User"}),o.jsx("option",{value:"technical_officer",children:"Technical Officer"}),o.jsx("option",{value:"admin",children:"Admin"}),o.jsx("option",{value:"developer",children:"Developer"})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("select",{value:"active",disabled:!h,className:`text-xs font-medium px-2 py-1 rounded-full border-0 ${b("active")}`,children:o.jsx("option",{value:"active",children:"Active"})})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(Dn,{size:12,className:"mr-1"}),new Date(g.joinedDate).toLocaleDateString()]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:"Never"}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:o.jsx("div",{className:"flex space-x-2",children:h&&o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-50",children:o.jsx(Bn,{size:16})}),o.jsx("button",{onClick:()=>x(g.id),className:"text-red-600 hover:text-red-900 p-1 rounded hover:bg-red-50",children:o.jsx(as,{size:16})})]})})})]},g.id))})]})})})]})}function YN(){var $,ie,N;const{user:t}=zt(),{confirm:e,alert:s}=cn(),[n,r]=k.useState("tournaments"),[i,a]=k.useState(null),[l,c]=k.useState(!1),[d,u]=k.useState([]),[h,f]=k.useState(!1),[m,p]=k.useState(null),[x,b]=k.useState([]),[y,g]=k.useState(null),[v,w]=k.useState({}),[_,j]=k.useState(null),[E,A]=k.useState([]),[S,O]=k.useState(""),[P,R]=k.useState(1),[U]=k.useState(10);Ke.useEffect(()=>{a(null),j(null),g(null),w({}),O(""),R(1)},[n]);const K=(t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="developer",T=async()=>{try{console.log("🔍 DATABASE: Fetching table counts...");const[C,D,ne,G]=await Promise.all([V.from("profiles").select("*",{count:"exact",head:!0}),V.from("tournaments").select("*",{count:"exact",head:!0}),V.from("match_results").select("*",{count:"exact",head:!0}),V.from("tournament_registrations").select("*",{count:"exact",head:!0})]);b([{name:"users",records:C.count||0,icon:o.jsx(tn,{size:20}),description:"User accounts and profiles",color:"from-blue-500 to-blue-600"},{name:"tournaments",records:D.count||0,icon:o.jsx(Yt,{size:20}),description:"Tournament information",color:"from-yellow-500 to-orange-500"},{name:"matches",records:ne.count||0,icon:o.jsx(Dn,{size:20}),description:"Match results and schedules",color:"from-green-500 to-emerald-500"},{name:"registrations",records:G.count||0,icon:o.jsx(K_,{size:20}),description:"Tournament registrations with Beyblades",color:"from-purple-500 to-violet-500"}]);const{data:he}=await V.from("tournaments").select("id, name").order("name");A(he||[]),console.log("✅ DATABASE: Table counts loaded successfully")}catch(C){console.error("Error fetching table counts:",C)}},B=async(C,D)=>{f(!0),p(null),console.log("🔍 DATABASE: Fetching table data for:",{tableName:C,tournamentId:D});try{let ne=[];if(C==="registrations"&&D){const{data:G,error:he}=await V.from("tournament_registration_details").select("*").eq("tournament_id",D).order("registered_at",{ascending:!1});if(he)throw he;const ye={};G==null||G.forEach(xe=>{var dt;ye[xe.registration_id]||(ye[xe.registration_id]={registration_id:xe.registration_id,tournament_id:xe.tournament_id,tournament_name:((dt=E.find(Cs=>Cs.id===xe.tournament_id))==null?void 0:dt.name)||"Unknown Tournament",player_name:xe.player_name,payment_mode:xe.payment_mode,registered_at:xe.registered_at,status:xe.status,beyblades:[]}),xe.beyblade_id&&(ye[xe.registration_id].beyblades.find(Ps=>Ps.beyblade_id===xe.beyblade_id)||ye[xe.registration_id].beyblades.push({beyblade_id:xe.beyblade_id,beyblade_name:xe.beyblade_name,blade_line:xe.blade_line,parts:xe.beyblade_parts||[]}))}),ne=Object.values(ye)}else if(C==="registrations"&&!D)ne=E;else{let G=C;C==="registrations"?G="tournament_registrations":C==="users"?G="profiles":C==="matches"&&(G="match_results");const{data:he,error:ye}=await V.from(G).select("*").order(C==="tournaments"?"tournament_date":C==="matches"?"submitted_at":"created_at",{ascending:!1});if(ye)throw console.error(`❌ DATABASE: Error fetching ${C}:`,ye),ye;ne=he||[]}(C!=="registrations"||D)&&ne.sort((G,he)=>{const ye=Object.values(G).find(dt=>typeof dt=="string")||"",xe=Object.values(he).find(dt=>typeof dt=="string")||"";return ye.localeCompare(xe)}),u(ne),console.log(`✅ DATABASE: Table data loaded for ${C}:`,{finalCount:ne.length,hasData:ne.length>0})}catch(ne){console.error("Error fetching table data:",ne),p(`Failed to load ${C} data. Please try again.`)}finally{f(!1)}},H=async()=>{c(!0),await Promise.all([T(),B(n,i||void 0)]),c(!1)},W=C=>{const D=JSON.stringify(d,null,2),ne=new Blob([D],{type:"application/json"}),G=URL.createObjectURL(ne),he=document.createElement("a");he.href=G,he.download=`${C}_export_${new Date().toISOString().split("T")[0]}.json`,he.click(),URL.revokeObjectURL(G)},q=C=>{g(C.id||C.registration_id||C.tournament_id),w({...C})},X=async()=>{if(!(!y||!K))try{let C=n;n==="registrations"?C="tournament_registrations":n==="users"?C="profiles":n==="matches"&&(C="match_results");const{error:D}=await V.from(C).update(v).eq("id",y);if(D){console.error("Update error:",D),D.code==="42501"||D.message.includes("RLS")?await s("Permission Denied","You need admin or developer role to edit records."):await s("Update Failed",`Failed to update record: ${D.message}`);return}g(null),w({}),await B(n)}catch(C){console.error("Error updating row:",C),await s("Update Failed",`Failed to update record: ${C instanceof Error?C.message:"Unknown error"}. Please try again.`)}},Z=async C=>{if(await e("Delete Record","Are you sure you want to delete this record? This action cannot be undone."))try{let ne=n;n==="registrations"?ne="tournament_registrations":n==="users"?ne="profiles":n==="matches"&&(ne="match_results");const{error:G}=await V.from(ne).delete().eq("id",C);if(G){console.error("Delete error:",G),G.code==="42501"||G.message.includes("RLS")?s("Permission denied. You need admin or developer role to delete records."):s(`Failed to delete record: ${G.message}`);return}await Promise.all([T(),B(n,i||void 0)])}catch(ne){console.error("Error deleting row:",ne),await s("Delete Failed",`Failed to delete record: ${ne instanceof Error?ne.message:"Unknown error"}. Please try again.`)}},re=C=>{a(C),B("registrations",C)},M=()=>{a(null),B("registrations")},J=C=>{j(C)};k.useEffect(()=>{T()},[]),k.useEffect(()=>{n==="registrations"&&a(null),B(n)},[n]);const ee=d.filter(C=>S?Object.values(C).filter(ne=>typeof ne=="string").join(" ").toLowerCase().includes(S.toLowerCase()):!0),se=Math.ceil(ee.length/U),L=ee.slice((P-1)*U,P*U),z=()=>{var C;return h?o.jsx("div",{className:"flex items-center justify-center py-16",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-500 border-t-transparent mx-auto mb-4"}),o.jsxs("p",{className:"text-gray-600 font-medium",children:["Loading ",n==="registrations"&&i?"registration":n," data..."]})]})}):m?o.jsx("div",{className:"flex items-center justify-center py-16",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx("span",{className:"text-red-500 text-2xl",children:"⚠️"})}),o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Error Loading Data"}),o.jsx("p",{className:"text-red-600 mb-4",children:m}),o.jsx("button",{onClick:()=>B(n,i||void 0),className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"Try Again"})]})}):d.length===0?o.jsx("div",{className:"flex items-center justify-center py-16",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(Qa,{size:32,className:"text-gray-400"})}),o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Data Available"}),o.jsxs("p",{className:"text-gray-500",children:["No data available for ",n==="registrations"&&i?"this tournament":n]})]})}):n==="registrations"&&!i?o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-500 to-violet-500 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(Yt,{size:32,className:"text-white"})}),o.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Select Tournament"}),o.jsx("p",{className:"text-gray-600",children:"Choose a tournament to view its registrations and participant details"})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.map(D=>o.jsxs("button",{onClick:()=>re(D.id),className:"group text-left p-6 bg-white border-2 border-gray-200 rounded-xl hover:border-purple-300 hover:shadow-lg transition-all duration-200 transform hover:-translate-y-1",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h4",{className:"font-semibold text-gray-900 group-hover:text-purple-700 transition-colors",children:D.name}),o.jsx(S0,{size:20,className:"text-gray-400 group-hover:text-purple-500 transition-colors"})]}),o.jsx("p",{className:"text-sm text-gray-600 mb-2",children:D.location}),o.jsx("p",{className:"text-sm text-gray-500",children:new Date(D.tournament_date).toLocaleDateString()}),o.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:o.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${D.status==="upcoming"?"bg-blue-100 text-blue-800":D.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:D.status})})]},D.id))})]}):n==="registrations"&&i?o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("button",{onClick:M,className:"flex items-center space-x-2 text-purple-600 hover:text-purple-800 font-medium transition-colors",children:[o.jsx(cl,{size:20}),o.jsx("span",{children:"Back to Tournaments"})]}),o.jsxs("h3",{className:"text-xl font-semibold text-gray-900",children:[((C=E.find(D=>D.id===i))==null?void 0:C.name)||"Tournament"," Registrations"]})]}),o.jsx("div",{className:"space-y-4",children:d.map(D=>{var ne;return o.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 hover:shadow-md transition-all duration-200",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white font-bold",children:D.player_name.charAt(0).toUpperCase()}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-lg text-gray-900",children:D.player_name}),o.jsx("p",{className:"text-sm text-gray-600",children:D.tournament_name})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Registered:"}),o.jsx("p",{className:"font-medium",children:new Date(D.registered_at).toLocaleDateString()})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Payment:"}),o.jsx("p",{className:"font-medium capitalize",children:((ne=D.payment_mode)==null?void 0:ne.replace("_"," "))||"N/A"})]})]})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${D.status==="confirmed"?"bg-green-100 text-green-800":D.status==="cancelled"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:D.status}),o.jsxs("div",{className:"flex space-x-1",children:[o.jsx("button",{onClick:()=>J(D),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"View Details",children:o.jsx(ju,{size:16})}),K&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>q(D),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Edit",children:o.jsx(Bn,{size:16})}),o.jsx("button",{onClick:()=>Z(D.registration_id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:o.jsx(as,{size:16})})]})]})]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Beyblades:"}),o.jsxs("span",{className:"text-sm text-gray-600",children:[D.beyblades.length," registered"]})]}),o.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:D.beyblades.length>0?D.beyblades.map((G,he)=>o.jsx("span",{className:"inline-block bg-white px-3 py-1 rounded-full text-xs font-medium text-gray-700 border",children:G.beyblade_name},he)):o.jsx("span",{className:"text-sm text-gray-500 italic",children:"No Beyblades registered"})})]})]},D.registration_id)})})]}):o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-6 space-y-4 sm:space-y-0",children:[o.jsxs("div",{className:"relative",children:[o.jsx(P0,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),o.jsx("input",{type:"text",placeholder:`Search ${n}...`,value:S,onChange:D=>{O(D.target.value),R(1)},className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 w-64"})]}),o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs("span",{className:"text-sm text-gray-600",children:["Showing ",L.length," of ",ee.length," records"]}),se>1&&o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("button",{onClick:()=>R(Math.max(1,P-1)),disabled:P===1,className:"px-3 py-1 border border-gray-300 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors",children:"Previous"}),o.jsxs("span",{className:"text-sm text-gray-600",children:["Page ",P," of ",se]}),o.jsx("button",{onClick:()=>R(Math.min(se,P+1)),disabled:P===se,className:"px-3 py-1 border border-gray-300 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors",children:"Next"})]})]})]}),o.jsx("div",{className:"bg-white border border-gray-200 rounded-xl overflow-hidden",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[L.length>0&&L[0]&&Object.keys(L[0]).map(D=>o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:D.replace(/_/g," ")},D)),K&&o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:L.map((D,ne)=>o.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[Object.entries(D).map(([G,he],ye)=>o.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:y===(D.id||D.registration_id||D.tournament_id)&&K?o.jsx("input",{type:"text",value:v[G]||"",onChange:xe=>w({...v,[G]:xe.target.value}),className:"w-full border border-gray-300 rounded-md px-2 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}):o.jsx("div",{className:"max-w-xs",children:typeof he=="object"&&he!==null?o.jsx("div",{className:"bg-gray-100 rounded-md px-2 py-1 text-xs font-mono",children:JSON.stringify(he).length>50?JSON.stringify(he).substring(0,50)+"...":JSON.stringify(he)}):he instanceof Date?he.toLocaleString():o.jsx("span",{className:G.includes("email")?"font-mono text-blue-600":"",children:String(he||"")})})},ye)),K&&o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"flex items-center space-x-2",children:y===(D.id||D.registration_id||D.tournament_id)?o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:X,className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Save Changes",children:o.jsx(Fi,{size:16})}),o.jsx("button",{onClick:()=>{g(null),w({})},className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",title:"Cancel",children:o.jsx(kt,{size:16})})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>q(D),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit Record",children:o.jsx(Bn,{size:16})}),o.jsx("button",{onClick:()=>Z(D.id||D.registration_id||D.tournament_id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete Record",children:o.jsx(as,{size:16})})]})})})]},D.id||ne))})]})})})]})};return o.jsx("div",{className:"page-container",children:o.jsxs("div",{className:"content-wrapper",children:[o.jsx("div",{className:"page-header",children:o.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center space-y-4 lg:space-y-0",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"page-title flex items-center",children:[o.jsx(Qa,{size:32,className:"mr-3 text-blue-600"}),"Database Management"]}),o.jsx("p",{className:"page-subtitle",children:"Monitor and manage application data from Supabase"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs("button",{onClick:H,disabled:l,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2 disabled:opacity-50",children:[o.jsx(V_,{size:16,className:l?"animate-spin":""}),o.jsx("span",{children:"Refresh"})]}),o.jsxs("button",{onClick:()=>W(n),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2",children:[o.jsx(D_,{size:16}),o.jsx("span",{children:"Export"})]})]})]})}),o.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-4 gap-8",children:[o.jsxs("div",{className:"xl:col-span-1",children:[o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[o.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 px-6 py-4 border-b border-gray-200",children:o.jsxs("h2",{className:"text-lg font-bold text-gray-900 flex items-center",children:[o.jsx(Qa,{size:20,className:"mr-2 text-gray-700"}),"Database Tables"]})}),o.jsx("div",{className:"p-4 space-y-2",children:x.map(C=>o.jsxs("button",{onClick:()=>r(C.name),className:`w-full text-left p-4 rounded-xl transition-all duration-200 group ${n===C.name?"bg-gradient-to-r "+C.color+" text-white shadow-lg transform scale-105":"hover:bg-gray-50 border border-gray-200"}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:`p-2 rounded-lg ${n===C.name?"bg-white/20":"bg-gray-100 group-hover:bg-gray-200"} transition-colors`,children:Ke.cloneElement(C.icon,{className:n===C.name?"text-white":"text-gray-600"})}),o.jsx("span",{className:`font-semibold capitalize ${n===C.name?"text-white":"text-gray-900"}`,children:C.name})]}),o.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-bold ${n===C.name?"bg-white/20 text-white":"bg-gray-100 text-gray-600"}`,children:C.records})]}),o.jsx("p",{className:`text-xs ${n===C.name?"text-white/80":"text-gray-600"}`,children:C.description})]},C.name))})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 mt-6 overflow-hidden",children:[o.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 px-6 py-4 border-b border-gray-200",children:o.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center",children:[o.jsx(Eo,{size:20,className:"mr-2 text-gray-700"}),"Database Stats"]})}),o.jsxs("div",{className:"p-6 space-y-4",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-gray-600 font-medium",children:"Total Records"}),o.jsx("span",{className:"text-2xl font-bold text-gray-900",children:x.reduce((C,D)=>C+D.records,0)})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-gray-600 font-medium",children:"Active Tables"}),o.jsx("span",{className:"text-2xl font-bold text-gray-900",children:x.length})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-gray-600 font-medium",children:"Database"}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),o.jsx("span",{className:"text-green-600 font-bold",children:"Supabase"})]})]}),o.jsx("div",{className:"pt-4 border-t border-gray-100",children:o.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["Last updated: ",new Date().toLocaleTimeString()]})})]})]})]}),o.jsx("div",{className:"xl:col-span-3",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[o.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 px-6 py-4 border-b border-gray-200",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsxs("h2",{className:"text-xl font-bold text-gray-900 capitalize flex items-center",children:[(($=x.find(C=>C.name===n))==null?void 0:$.icon)&&Ke.cloneElement(x.find(C=>C.name===n).icon,{className:"mr-2 text-gray-700",size:24}),n==="registrations"&&i?`${((ie=E.find(C=>C.id===i))==null?void 0:ie.name)||"Tournament"} Registrations`:n==="registrations"?"Tournament Selection":`${n} Management`]}),o.jsx("p",{className:"text-gray-600 mt-1",children:(N=x.find(C=>C.name===n))==null?void 0:N.description})]}),o.jsx("div",{className:"flex items-center space-x-2",children:o.jsx("span",{className:"text-sm text-gray-500 bg-gray-100 px-3 py-1 rounded-full",children:n==="registrations"&&!i?`${E.length} tournaments`:`${ee.length} records`})})]})}),z()]})})]}),_&&o.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-5xl w-full max-h-[90vh] overflow-hidden",children:[o.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-violet-500 px-6 py-4 text-white",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Registration Details"}),o.jsx("p",{className:"text-purple-100",children:_.player_name})]}),o.jsx("button",{onClick:()=>j(null),className:"p-2 hover:bg-white/20 rounded-full transition-colors",children:o.jsx(kt,{size:24})})]})}),o.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-80px)]",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Player Name"}),o.jsx("p",{className:"text-xl font-bold text-gray-900",children:_.player_name})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Tournament"}),o.jsx("p",{className:"text-lg text-gray-900",children:_.tournament_name})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Payment Mode"}),o.jsx("span",{className:"inline-block bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium capitalize",children:_.payment_mode.replace("_"," ")})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Status"}),o.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-sm font-medium ${_.status==="confirmed"?"bg-green-100 text-green-800":_.status==="cancelled"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:_.status})]})]})]}),o.jsx("div",{className:"bg-gray-50 rounded-xl p-4 mb-8",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Dn,{size:16,className:"text-gray-600"}),o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Registered on:"}),o.jsx("span",{className:"text-sm text-gray-900 font-semibold",children:new Date(_.registered_at).toLocaleString()})]})}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("h3",{className:"text-xl font-bold text-gray-900 flex items-center",children:[o.jsx(Yt,{size:24,className:"mr-2 text-yellow-500"}),"Registered Beyblades"]}),o.jsxs("span",{className:"bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm font-medium",children:[_.beyblades.length," Beyblades"]})]}),_.beyblades.length===0?o.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-xl",children:[o.jsx(Yt,{size:48,className:"mx-auto text-gray-400 mb-4"}),o.jsx("p",{className:"text-gray-500 font-medium",children:"No Beyblades registered"})]}):o.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:_.beyblades.map((C,D)=>o.jsxs("div",{className:"border-2 border-gray-200 rounded-xl p-6 hover:border-purple-300 transition-colors",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-lg text-gray-900",children:C.beyblade_name}),o.jsxs("span",{className:"inline-block bg-gradient-to-r from-blue-500 to-purple-500 text-white px-3 py-1 rounded-full text-sm font-medium mt-2",children:[C.blade_line," Line"]})]}),o.jsx("div",{className:"text-right",children:o.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full flex items-center justify-center text-white font-bold text-lg",children:D+1})})]}),C.parts.length>0?o.jsxs("div",{className:"space-y-3",children:[o.jsx("h5",{className:"font-semibold text-gray-700 text-sm uppercase tracking-wide",children:"Parts Configuration"}),o.jsx("div",{className:"grid grid-cols-1 gap-2",children:C.parts.map((ne,G)=>o.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3 flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold text-gray-900 text-sm",children:ne.part_type}),o.jsx("div",{className:"text-gray-600 text-xs",children:ne.part_name})]}),o.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-blue-600 text-xs font-bold",children:G+1})})]},G))})]}):o.jsx("div",{className:"text-center py-4 bg-gray-50 rounded-lg",children:o.jsx("p",{className:"text-gray-500 text-sm",children:"No parts configured"})})]},C.beyblade_id))})]})]})]})})]})})}function GN({showHeader:t=!0}){const{user:e}=zt(),{confirm:s,alert:n}=cn();if(!e||e.id.startsWith("guest-"))return o.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Deck Builder"}),o.jsx("p",{className:"text-gray-600",children:"Create and save Beyblade deck presets"})]}),o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Xs,{size:64,className:"mx-auto text-gray-400 mb-6"}),o.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Advanced Deck Builder"}),o.jsx("p",{className:"text-gray-600 mb-8 max-w-2xl mx-auto",children:"Create powerful Beyblade combinations from your inventory. Build multiple deck presets, analyze stats, and save your favorite combinations for quick tournament registration."}),o.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-xl p-8 max-w-md mx-auto mb-8",children:[o.jsx("div",{className:"flex items-center justify-center mb-6",children:o.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-600 rounded-full flex items-center justify-center text-white text-2xl font-bold shadow-lg",children:"🏗️"})}),o.jsx("h3",{className:"text-xl font-bold text-purple-900 mb-3",children:"Login to Start Building"}),o.jsx("p",{className:"text-purple-800 text-sm mb-6",children:"Create a free account to access the advanced deck builder and save your custom combinations!"}),o.jsxs("div",{className:"space-y-2 text-sm text-purple-700",children:[o.jsxs("div",{className:"flex items-center justify-center",children:[o.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full mr-2"}),"Build from your inventory"]}),o.jsxs("div",{className:"flex items-center justify-center",children:[o.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full mr-2"}),"Save unlimited deck presets"]}),o.jsxs("div",{className:"flex items-center justify-center",children:[o.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full mr-2"}),"Analyze combined stats"]})]})]}),o.jsx("div",{className:"bg-gray-50 rounded-lg p-6 max-w-lg mx-auto",children:o.jsxs("p",{className:"text-gray-600 text-sm",children:[o.jsx("strong",{children:"Ready to build?"}),' Click the "Login" button in the top right corner to create your account and start building powerful deck combinations.']})})]})]});const[r,i]=k.useState([]),[a,l]=k.useState([]),[c,d]=k.useState(!0),[u,h]=k.useState(!1),[f,m]=k.useState(null),[p,x]=k.useState(!0),[b,y]=k.useState({blades:[],ratchets:[],bits:[],lockchips:[],assistBlades:[]}),[g,v]=k.useState(""),[w,_]=k.useState(""),[j,E]=k.useState(3),[A,S]=k.useState([{id:"1",name:"",blade_line:"Basic",parts:{}}]);k.useEffect(()=>{O(),p&&R(),P()},[e]);const O=async()=>{try{const{data:L,error:z}=await V.from("deck_presets").select("*").eq("user_id",e.id).order("updated_at",{ascending:!1});if(z)throw z;i(L||[])}catch(L){console.error("Error fetching presets:",L)}finally{d(!1)}};k.useEffect(()=>{p||P()},[p]);const P=async()=>{try{const[L,z,$,ie,N]=await Promise.all([V.from("beypart_blade").select("*"),V.from("beypart_ratchet").select("*"),V.from("beypart_bit").select("*"),V.from("beypart_lockchip").select("*"),V.from("beypart_assistblade").select("*")]);y({blades:L.data||[],ratchets:z.data||[],bits:$.data||[],lockchips:ie.data||[],assistBlades:N.data||[]})}catch(L){console.error("Error fetching parts data:",L)}},R=async()=>{try{const{data:L,error:z}=await V.from("user_inventory").select("*").eq("user_id",e.id).gt("quantity",0);if(z)throw z;l(L||[])}catch(L){console.error("Error fetching inventory:",L)}},U=L=>{switch(L){case"Basic":case"Unique":case"X-Over":return["Blade","Ratchet","Bit"];case"Custom":return["Lockchip","Main Blade","Assist Blade","Ratchet","Bit"];default:return[]}},K=L=>{if(!p)switch(L==="Main Blade"?"Blade":L){case"Blade":return b.blades.map($=>({id:`db-${$.Blades}`,part_type:"Blade",part_name:$.Blades,part_data:$,quantity:999}));case"Ratchet":return b.ratchets.map($=>({id:`db-${$.Ratchet}`,part_type:"Ratchet",part_name:$.Ratchet,part_data:$,quantity:999}));case"Bit":return b.bits.map($=>({id:`db-${$.Bit}`,part_type:"Bit",part_name:`${$.Bit} (${$.Shortcut})`,part_data:$,quantity:999}));case"Lockchip":return b.lockchips.map($=>({id:`db-${$.Lockchip}`,part_type:"Lockchip",part_name:$.Lockchip,part_data:$,quantity:999}));case"Assist Blade":return b.assistBlades.map($=>({id:`db-${$["Assist Blade"]}`,part_type:"Assist Blade",part_name:`${$["Assist Blade Name"]} (${$["Assist Blade"]})`,part_data:$,quantity:999}));default:return[]}return L==="Blade"||L==="Main Blade"?a.filter($=>$.part_type.startsWith("Blade (")&&$.part_type===`Blade (${L==="Main Blade"?"Custom":"Basic"})`):a.filter($=>$.part_type===L)},T=(L,z)=>{var N,C,D,ne,G,he,ye,xe;if(!L||!U(L).every(dt=>z[dt]))return"";if(L==="Custom"){const dt=((N=z.Lockchip)==null?void 0:N.Lockchip)||"",Cs=((C=z["Main Blade"])==null?void 0:C.Blades)||"",Ps=((D=z["Assist Blade"])==null?void 0:D["Assist Blade"])||"",Lr=((ne=z.Ratchet)==null?void 0:ne.Ratchet)||"",gl=((G=z.Bit)==null?void 0:G.Shortcut)||"";return`${dt}${Cs} ${Ps}${Lr}${gl}`}else{const dt=((he=z.Blade)==null?void 0:he.Blades)||"",Cs=((ye=z.Ratchet)==null?void 0:ye.Ratchet)||"",Ps=((xe=z.Bit)==null?void 0:xe.Shortcut)||"";return`${dt} ${Cs}${Ps}`}},B=L=>{let z={attack:0,defense:0,stamina:0,dash:0,burstRes:0};return Object.values(L).forEach($=>{$&&(z.attack+=$.Attack||0,z.defense+=$.Defense||0,z.stamina+=$.Stamina||0,z.dash+=$.Dash||0,z.burstRes+=$["Burst Res"]||0)}),z},H=()=>{h(!0),v(""),_(""),E(3),S([{id:"1",name:"",blade_line:"Basic",parts:{}}])},W=L=>{m(L.id),v(L.name),_(L.description||""),E(L.beyblades.length),S(L.beyblades)},q=()=>{A.length<j&&S([...A,{id:Date.now().toString(),name:"",blade_line:"Basic",parts:{}}])},X=L=>{A.length>1&&S(A.filter(z=>z.id!==L))},Z=(L,z,$)=>{S(A.map(ie=>{if(ie.id===L){const N={...ie,[z]:$,parts:{}};return N.name=T($,{}),N}return ie}))},re=(L,z,$)=>{S(A.map(ie=>{if(ie.id===L){const N={...ie.parts,[z]:$},C=T(ie.blade_line,N);return{...ie,parts:N,name:C}}return ie}))},M=async()=>{if(!g.trim()){await n("Missing Information","Please enter a deck name.");return}const L=A.filter(z=>{const $=U(z.blade_line);return z.blade_line&&$.every(ie=>z.parts[ie])});if(L.length===0){await n("Missing Information","Please configure at least one complete Beyblade.");return}try{const z={user_id:e.id,name:g.trim(),description:w.trim()||null,beyblades:L};if(u){const{error:$}=await V.from("deck_presets").insert([z]);if($)throw $}else if(f){const{error:$}=await V.from("deck_presets").update({...z,updated_at:new Date().toISOString()}).eq("id",f);if($)throw $}await O(),ee(),await n("Success","Deck preset saved successfully!")}catch(z){console.error("Error saving preset:",z),await n("Error","Failed to save deck preset. Please try again.")}},J=async L=>{if(await s("Delete Deck Preset","Are you sure you want to delete this deck preset?"))try{const{error:$}=await V.from("deck_presets").delete().eq("id",L);if($)throw $;await O()}catch($){console.error("Error deleting preset:",$),await n("Error","Failed to delete deck preset. Please try again.")}},ee=()=>{h(!1),m(null),v(""),_(""),E(3),S([{id:"1",name:"",blade_line:"Basic",parts:{}}])},se=L=>{switch(L){case"attack":return o.jsx(M0,{size:12,className:"text-red-500"});case"defense":return o.jsx(xi,{size:12,className:"text-blue-500"});case"stamina":return o.jsx(_u,{size:12,className:"text-green-500"});case"dash":return o.jsx(Po,{size:12,className:"text-yellow-500"});case"burstRes":return o.jsx(T0,{size:12,className:"text-purple-500"});default:return null}};return c?o.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading deck builder..."})]})}):o.jsxs("div",{className:t?"p-6 max-w-7xl mx-auto":"",children:[t&&o.jsxs("div",{className:"flex justify-between items-center mb-8",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Deck Builder"}),o.jsx("p",{className:"text-gray-600",children:"Create and save Beyblade deck presets from your inventory"})]}),o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Build Mode:"}),o.jsxs("div",{className:"flex items-center space-x-2 bg-gray-100 rounded-lg p-1",children:[o.jsx("button",{onClick:()=>x(!0),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors ${p?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Use Inventory"}),o.jsx("button",{onClick:()=>x(!1),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors ${p?"text-gray-600 hover:text-gray-900":"bg-white text-gray-900 shadow-sm"}`,children:"Free Build"})]})]}),o.jsxs("button",{onClick:H,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[o.jsx(En,{size:20}),o.jsx("span",{children:"New Deck"})]})]})]}),!t&&o.jsxs("div",{className:"flex justify-between items-center mb-8",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Build Mode:"}),o.jsxs("div",{className:"flex items-center space-x-2 bg-gray-100 rounded-lg p-1",children:[o.jsx("button",{onClick:()=>x(!0),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors ${p?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Use Inventory"}),o.jsx("button",{onClick:()=>x(!1),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors ${p?"text-gray-600 hover:text-gray-900":"bg-white text-gray-900 shadow-sm"}`,children:"Free Build"})]})]}),o.jsxs("button",{onClick:H,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[o.jsx(En,{size:20}),o.jsx("span",{children:"New Deck"})]})]}),(u||f)&&o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:u?"Create New Deck":"Edit Deck"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Deck Name"}),o.jsx("input",{type:"text",value:g,onChange:L=>v(L.target.value),placeholder:"Enter deck name",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description (Optional)"}),o.jsx("input",{type:"text",value:w,onChange:L=>_(L.target.value),placeholder:"Deck strategy or notes",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),o.jsx("div",{className:"space-y-6",children:A.map((L,z)=>o.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Beyblade #",z+1]}),A.length>1&&o.jsx("button",{onClick:()=>X(L.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-full transition-colors",children:o.jsx(as,{size:16})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Blade Line"}),o.jsxs("select",{value:L.blade_line,onChange:$=>Z(L.id,"blade_line",$.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.jsx("option",{value:"Basic",children:"Basic"}),o.jsx("option",{value:"Unique",children:"Unique"}),o.jsx("option",{value:"Custom",children:"Custom"}),o.jsx("option",{value:"X-Over",children:"X-Over"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Generated Name"}),o.jsx("div",{className:"w-full border border-gray-200 rounded-md px-3 py-2 bg-gray-50 text-gray-700 font-mono",children:L.name||"Select all parts to generate name"})]})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4",children:U(L.blade_line).map($=>o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:$}),o.jsxs("select",{value:L.parts[$]?JSON.stringify(L.parts[$]):"",onChange:ie=>{if(ie.target.value){const N=JSON.parse(ie.target.value);re(L.id,$,N)}},className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.jsxs("option",{value:"",children:["Select ",$]}),K($).filter(ie=>{var N;return!p&&($==="Blade"||$==="Main Blade")&&((N=ie.part_data)!=null&&N.Line)?ie.part_data.Line===($==="Main Blade"?"Custom":L.blade_line):!0}).map(ie=>o.jsxs("option",{value:JSON.stringify(ie.part_data),children:[ie.part_name," ",p?`(Qty: ${ie.quantity})`:""]},ie.id))]})]},$))}),Object.keys(L.parts).length>0&&o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[o.jsxs("h5",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center",children:[o.jsx(Po,{size:16,className:"mr-2"}),"Combined Stats"]}),o.jsx("div",{className:"grid grid-cols-5 gap-4",children:Object.entries(B(L.parts)).map(([$,ie])=>o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"flex items-center justify-center mb-1",children:se($)}),o.jsx("div",{className:"text-xs font-medium text-gray-600 capitalize",children:$==="burstRes"?"Burst Res":$}),o.jsx("div",{className:"text-lg font-bold text-gray-900",children:ie})]},$))})]})]},L.id))}),A.length<5&&o.jsxs("button",{onClick:q,className:"mt-4 w-full border-2 border-dashed border-gray-300 rounded-lg p-4 text-gray-600 hover:border-blue-400 hover:text-blue-600 transition-colors flex items-center justify-center space-x-2",children:[o.jsx(En,{size:20}),o.jsxs("span",{children:["Add Another Beyblade (",A.length,"/5)"]})]}),o.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[o.jsxs("button",{onClick:ee,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors flex items-center space-x-2",children:[o.jsx(kt,{size:16}),o.jsx("span",{children:"Cancel"})]}),o.jsxs("button",{onClick:M,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[o.jsx(Fi,{size:16}),o.jsx("span",{children:"Save Preset"})]})]})]}),r.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Xs,{size:48,className:"mx-auto text-gray-400 mb-4"}),o.jsx("p",{className:"text-gray-500",children:"No deck presets yet"}),o.jsx("button",{onClick:H,className:"mt-4 text-blue-600 hover:text-blue-800 underline",children:"Create your first deck preset"})]}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(L=>o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:L.name}),L.description&&o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:L.description})]}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("button",{onClick:()=>W(L),className:"p-1 text-blue-600 hover:bg-blue-50 rounded",children:o.jsx(Bn,{size:16})}),o.jsx("button",{onClick:()=>J(L.id),className:"p-1 text-red-600 hover:bg-red-50 rounded",children:o.jsx(as,{size:16})})]})]}),o.jsxs("div",{className:"space-y-2 mb-4",children:[o.jsxs("div",{className:"text-sm text-gray-600",children:[o.jsx("span",{className:"font-medium",children:L.beyblades.length})," Beyblades configured"]}),o.jsxs("div",{className:"space-y-1",children:[L.beyblades.slice(0,3).map((z,$)=>o.jsx("div",{className:"text-xs text-gray-500 font-mono",children:z.name||`Beyblade ${$+1}`},$)),L.beyblades.length>3&&o.jsxs("div",{className:"text-xs text-gray-400",children:["+",L.beyblades.length-3," more..."]})]})]}),o.jsxs("div",{className:"text-xs text-gray-500 pt-2 border-t",children:["Updated: ",new Date(L.updated_at).toLocaleDateString()]})]},L.id))})]})}function QN(){const{user:t}=zt(),{confirm:e,alert:s}=cn(),[n,r]=k.useState("inventory");if(!t||t.id.startsWith("guest-"))return o.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Inventory & Deck Builder"}),o.jsx("p",{className:"text-gray-600",children:"Track your parts and build custom decks"})]}),o.jsxs("div",{className:"text-center py-12",children:[o.jsxs("div",{className:"flex justify-center space-x-4 mb-6",children:[o.jsx(ti,{size:64,className:"text-gray-400"}),o.jsx(Xs,{size:64,className:"text-gray-400"})]}),o.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Inventory & Deck Builder"}),o.jsx("p",{className:"text-gray-600 mb-8 max-w-2xl mx-auto",children:"Track your Beyblade parts collection and build powerful custom decks. Save deck presets for quick tournament registration."}),o.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-xl p-8 max-w-md mx-auto mb-8",children:[o.jsx("div",{className:"flex items-center justify-center mb-6",children:o.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white text-2xl font-bold shadow-lg",children:"🎯"})}),o.jsx("h3",{className:"text-xl font-bold text-blue-900 mb-3",children:"Login to Access Tools"}),o.jsx("p",{className:"text-blue-800 text-sm mb-6",children:"Create a free account to access inventory tracking and deck building tools!"}),o.jsxs("div",{className:"space-y-2 text-sm text-blue-700",children:[o.jsxs("div",{className:"flex items-center justify-center",children:[o.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full mr-2"}),"Track unlimited Beyblade parts"]}),o.jsxs("div",{className:"flex items-center justify-center",children:[o.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full mr-2"}),"Build and save custom decks"]}),o.jsxs("div",{className:"flex items-center justify-center",children:[o.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full mr-2"}),"Quick tournament registration"]})]})]}),o.jsx("div",{className:"bg-gray-50 rounded-lg p-6 max-w-lg mx-auto",children:o.jsxs("p",{className:"text-gray-600 text-sm",children:[o.jsx("strong",{children:"Ready to start?"}),' Click the "Login" button to create your account and unlock inventory & deck building features.']})})]})]});const[i,a]=k.useState([]),[l,c]=k.useState(!0),[d,u]=k.useState(!1),[h,f]=k.useState(null),[m,p]=k.useState(""),[x,b]=k.useState("all"),[y,g]=k.useState({part_type:"Blade (Basic)",part_name:"",part_data:null,quantity:1,notes:""}),[v,w]=k.useState({blades:[],ratchets:[],bits:[],lockchips:[],assistBlades:[]});k.useEffect(()=>{_(),j()},[t]);const _=async()=>{try{const{data:T,error:B}=await V.from("user_inventory").select("*").eq("user_id",t.id).order("created_at",{ascending:!1});if(B)throw B;a(T||[])}catch(T){console.error("Error fetching inventory:",T)}finally{c(!1)}},j=async()=>{try{const[T,B,H,W,q]=await Promise.all([V.from("beypart_blade").select("*"),V.from("beypart_ratchet").select("*"),V.from("beypart_bit").select("*"),V.from("beypart_lockchip").select("*"),V.from("beypart_assistblade").select("*")]);w({blades:T.data||[],ratchets:B.data||[],bits:H.data||[],lockchips:W.data||[],assistBlades:q.data||[]})}catch(T){console.error("Error fetching parts data:",T)}},E=T=>{let B=[];if(T.startsWith("Blade (")){const H=T.replace("Blade (","").replace(")","");B=v.blades.filter(W=>W.Line===H)}else T==="Ratchet"?B=v.ratchets:T==="Bit"?B=v.bits:T==="Lockchip"?B=v.lockchips:T==="Assist Blade"&&(B=v.assistBlades);return T==="Blade"?B=v.blades.filter(H=>H.Line!=="Custom"):T==="Blade (Custom)"?B=v.blades.filter(H=>H.Line==="Custom"):T==="Ratchet"?B=v.ratchets:T==="Bit"?B=v.bits:T==="Lockchip"?B=v.lockchips:T==="Assist Blade"&&(B=v.assistBlades),B},A=(T,B)=>{if(B.startsWith("Blade ("))return T.Blades;switch(B){case"Ratchet":return T.Ratchet;case"Bit":return`${T.Bit} (${T.Shortcut})`;case"Lockchip":return T.Lockchip;case"Assist Blade":return`${T["Assist Blade Name"]} (${T["Assist Blade"]})`;default:return""}},S=()=>{u(!0),g({part_type:"Blade (Basic)",part_name:"",part_data:null,quantity:1,notes:""})},O=T=>{f(T.id),g({part_type:T.part_type,part_name:T.part_name,part_data:T.part_data,quantity:T.quantity,notes:T.notes||""})},P=async()=>{if(!y.part_name||!y.part_data){await s("Missing Information","Please select a part before saving.");return}try{const T={user_id:t.id,part_type:y.part_type,part_name:y.part_name,part_data:y.part_data,quantity:y.quantity,notes:y.notes||null};if(d){const{error:B}=await V.from("user_inventory").insert([T]);if(B)throw B}else if(h){const{error:B}=await V.from("user_inventory").update(T).eq("id",h);if(B)throw B}await _()}catch(T){console.error("Error saving inventory item:",T),await s("Error","Failed to save inventory item. Please try again.")}},R=async T=>{if(await e("Delete Inventory Item","Are you sure you want to delete this inventory item? This action cannot be undone."))try{const{error:H}=await V.from("user_inventory").delete().eq("id",T);if(H)throw H;await _()}catch(H){console.error("Error deleting inventory item:",H),await s("Error","Failed to delete inventory item. Please try again.")}},U=()=>{u(!1),f(null),g({part_type:"Blade (Basic)",part_name:"",part_data:null,quantity:1,notes:""})},K=i.filter(T=>{var W;const B=T.part_name.toLowerCase().includes(m.toLowerCase())||T.notes&&T.notes.toLowerCase().includes(m.toLowerCase());let H=!1;if(x==="all")H=!0;else if(x.startsWith("Blade (")){const q=x.replace("Blade (","").replace(")","");H=T.part_type==="Blade"&&((W=T.part_data)==null?void 0:W.Line)===q}else H=T.part_type===x;return B&&H});return l?o.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading inventory..."})]})}):n==="deck-builder"?o.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[o.jsx("div",{className:"mb-8",children:o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Inventory & Deck Builder"}),o.jsx("p",{className:"text-gray-600",children:"Track your parts and build custom decks"})]}),o.jsxs("div",{className:"filter-tabs",children:[o.jsxs("button",{onClick:()=>r("inventory"),className:`filter-tab ${n==="inventory"?"filter-tab-active":"filter-tab-inactive"}`,children:[o.jsx(ti,{size:16,className:"mr-2"}),"Inventory"]}),o.jsxs("button",{onClick:()=>r("deck-builder"),className:`filter-tab ${n==="deck-builder"?"filter-tab-active":"filter-tab-inactive"}`,children:[o.jsx(Xs,{size:16,className:"mr-2"}),"Deck Builder"]})]})]})}),o.jsx(GN,{})]}):o.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("div",{children:o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Inventory & Deck Builder"}),o.jsx("p",{className:"text-gray-600",children:"Track your parts and build custom decks"})]}),o.jsxs("div",{className:"filter-tabs",children:[o.jsxs("button",{onClick:()=>r("inventory"),className:`filter-tab ${n==="inventory"?"filter-tab-active":"filter-tab-inactive"}`,children:[o.jsx(ti,{size:16,className:"mr-2"}),"Inventory"]}),o.jsxs("button",{onClick:()=>r("deck-builder"),className:`filter-tab ${n==="deck-builder"?"filter-tab-active":"filter-tab-inactive"}`,children:[o.jsx(Xs,{size:16,className:"mr-2"}),"Deck Builder"]})]})]})}),o.jsx("div",{className:"flex justify-end",children:o.jsxs("button",{onClick:S,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[o.jsx(En,{size:20}),o.jsx("span",{children:"Add Part"})]})})]}),o.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx(P0,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),o.jsx("input",{type:"text",placeholder:"Search parts or notes...",value:m,onChange:T=>p(T.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),o.jsxs("div",{className:"relative",children:[o.jsx(B_,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),o.jsxs("select",{value:x,onChange:T=>b(T.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.jsx("option",{value:"all",children:"All Parts"}),o.jsx("option",{value:"Blade (Basic)",children:"Blades (Basic)"}),o.jsx("option",{value:"Blade (Unique)",children:"Blades (Unique)"}),o.jsx("option",{value:"Blade (X-Over)",children:"Blades (X-Over)"}),o.jsx("option",{value:"Blade (Custom)",children:"Blades (Custom)"}),o.jsx("option",{value:"Ratchet",children:"Ratchets"}),o.jsx("option",{value:"Bit",children:"Bits"}),o.jsx("option",{value:"Blade (Basic)",children:"Blade (Basic)"}),o.jsx("option",{value:"Blade (Unique)",children:"Blade (Unique)"}),o.jsx("option",{value:"Blade (X-Over)",children:"Blade (X-Over)"}),o.jsx("option",{value:"Blade (Custom)",children:"Blade (Custom)"}),o.jsx("option",{value:"Assist Blade",children:"Assist Blades"})]})]})]})}),(d||h)&&o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:d?"Add New Part":"Edit Part"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Part Type"}),o.jsxs("select",{value:y.part_type,onChange:T=>g({...y,part_type:T.target.value,part_name:"",part_data:null}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.jsx("option",{value:"Blade (Basic)",children:"Blade (Basic)"}),o.jsx("option",{value:"Blade (Unique)",children:"Blade (Unique)"}),o.jsx("option",{value:"Blade (X-Over)",children:"Blade (X-Over)"}),o.jsx("option",{value:"Blade (Custom)",children:"Blade (Custom)"}),o.jsx("option",{value:"Ratchet",children:"Ratchet"}),o.jsx("option",{value:"Bit",children:"Bit"}),o.jsx("option",{value:"Lockchip",children:"Lockchip"}),o.jsx("option",{value:"Assist Blade",children:"Assist Blade"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Part"}),o.jsxs("select",{value:y.part_data?JSON.stringify(y.part_data):"",onChange:T=>{if(T.target.value){const B=JSON.parse(T.target.value);g({...y,part_name:A(B,y.part_type),part_data:B})}},className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.jsx("option",{value:"",children:"Select Part"}),E(y.part_type).map((T,B)=>o.jsx("option",{value:JSON.stringify(T),children:A(T,y.part_type)},B))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantity"}),o.jsx("input",{type:"number",min:"1",value:y.quantity,onChange:T=>g({...y,quantity:parseInt(T.target.value)||1}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes (Optional)"}),o.jsx("input",{type:"text",value:y.notes,onChange:T=>g({...y,notes:T.target.value}),placeholder:"e.g., condition, source, etc.",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),o.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[o.jsxs("button",{onClick:U,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors flex items-center space-x-2",children:[o.jsx(kt,{size:16}),o.jsx("span",{children:"Cancel"})]}),o.jsxs("button",{onClick:P,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[o.jsx(Fi,{size:16}),o.jsx("span",{children:"Save"})]})]})]}),K.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx(ti,{size:48,className:"mx-auto text-gray-400 mb-4"}),o.jsx("p",{className:"text-gray-500",children:i.length===0?"No parts in your inventory yet":"No parts match your search"}),i.length===0&&o.jsx("button",{onClick:S,className:"mt-4 text-blue-600 hover:text-blue-800 underline",children:"Add your first part"})]}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:K.map(T=>o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsxs("div",{children:[o.jsx("span",{className:"inline-block px-2 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded-full mb-2",children:T.part_type}),o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:T.part_name})]}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("button",{onClick:()=>O(T),className:"p-1 text-blue-600 hover:bg-blue-50 rounded",children:o.jsx(Bn,{size:16})}),o.jsx("button",{onClick:()=>R(T.id),className:"p-1 text-red-600 hover:bg-red-50 rounded",children:o.jsx(as,{size:16})})]})]}),o.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Quantity:"}),o.jsx("span",{className:"font-medium",children:T.quantity})]}),T.notes&&o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",children:"Notes:"}),o.jsx("p",{className:"text-gray-700 mt-1",children:T.notes})]}),o.jsxs("div",{className:"text-xs text-gray-500 pt-2 border-t",children:["Added: ",new Date(T.created_at).toLocaleDateString()]})]}),T.part_data&&o.jsx("div",{className:"mt-4 pt-4 border-t",children:o.jsx("div",{className:"grid grid-cols-2 gap-2 text-xs",children:Object.entries(T.part_data).map(([B,H])=>typeof H=="number"&&H>0&&["Attack","Defense","Stamina","Dash","Burst Res"].includes(B)?o.jsxs("div",{className:"flex justify-between",children:[o.jsxs("span",{className:"text-gray-600",children:[B,":"]}),o.jsx("span",{className:"font-medium",children:H})]},B):null)})})]},T.id))})]})}function XN(){const[t,e]=k.useState("dashboard"),[s,n]=k.useState(!1),r=()=>{n(!s)},i=()=>{switch(t){case"dashboard":return o.jsx(bf,{onViewChange:e});case"tournaments":return o.jsx(d1,{});case"inventory":return o.jsx(QN,{});case"analytics":return o.jsx(HN,{});case"match-tracker":return o.jsx(VN,{});case"tournament-manager":return o.jsx(qN,{});case"user-management":return o.jsx(KN,{});case"database":return o.jsx(YN,{});default:return o.jsx(bf,{})}};return o.jsxs("div",{className:"min-h-screen bg-gray-50",children:[!s&&o.jsx("button",{onClick:r,className:`fixed top-6 left-0 z-50 p-3 rounded-r-xl shadow-lg backdrop-blur-sm transition-all duration-300 hover:scale-105 ${t==="dashboard"?"bg-slate-800/90 hover:bg-slate-700/90 text-white":"bg-white/90 hover:bg-white text-gray-800 border border-gray-200"}`,children:o.jsx(U_,{size:24})}),o.jsx(X_,{isOpen:s,currentView:t,onViewChange:e,onToggle:r}),o.jsx("div",{className:"w-full",children:o.jsx("main",{className:"flex-1",children:i()})})]})}function JN(){return o.jsx(E_,{children:o.jsx(T_,{children:o.jsx(XN,{})})})}Jg(document.getElementById("root")).render(o.jsx(k.StrictMode,{children:o.jsx(JN,{})}));
