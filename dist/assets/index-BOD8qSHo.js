var Ex=Object.defineProperty;var Tx=(t,e,s)=>e in t?Ex(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var me=(t,e,s)=>Tx(t,typeof e!="symbol"?e+"":e,s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=s(r);fetch(r.href,i)}})();var Ft=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ax(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Ox(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var s=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(s,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}),s}var $m={exports:{}},Vo={},Fm={exports:{}},xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xi=Symbol.for("react.element"),Rx=Symbol.for("react.portal"),Mx=Symbol.for("react.fragment"),Lx=Symbol.for("react.strict_mode"),Dx=Symbol.for("react.profiler"),Bx=Symbol.for("react.provider"),Ix=Symbol.for("react.context"),zx=Symbol.for("react.forward_ref"),$x=Symbol.for("react.suspense"),Fx=Symbol.for("react.memo"),Ux=Symbol.for("react.lazy"),Uu=Symbol.iterator;function Wx(t){return t===null||typeof t!="object"?null:(t=Uu&&t[Uu]||t["@@iterator"],typeof t=="function"?t:null)}var Um={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Wm=Object.assign,Hm={};function Br(t,e,s){this.props=t,this.context=e,this.refs=Hm,this.updater=s||Um}Br.prototype.isReactComponent={};Br.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Br.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Vm(){}Vm.prototype=Br.prototype;function Cd(t,e,s){this.props=t,this.context=e,this.refs=Hm,this.updater=s||Um}var Pd=Cd.prototype=new Vm;Pd.constructor=Cd;Wm(Pd,Br.prototype);Pd.isPureReactComponent=!0;var Wu=Array.isArray,qm=Object.prototype.hasOwnProperty,Ed={current:null},Km={key:!0,ref:!0,__self:!0,__source:!0};function Ym(t,e,s){var n,r={},i=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)qm.call(e,n)&&!Km.hasOwnProperty(n)&&(r[n]=e[n]);var l=arguments.length-2;if(l===1)r.children=s;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];r.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)r[n]===void 0&&(r[n]=l[n]);return{$$typeof:Xi,type:t,key:i,ref:o,props:r,_owner:Ed.current}}function Hx(t,e){return{$$typeof:Xi,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Td(t){return typeof t=="object"&&t!==null&&t.$$typeof===Xi}function Vx(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(s){return e[s]})}var Hu=/\/+/g;function wl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Vx(""+t.key):e.toString(36)}function Wa(t,e,s,n,r){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Xi:case Rx:o=!0}}if(o)return o=t,r=r(o),t=n===""?"."+wl(o,0):n,Wu(r)?(s="",t!=null&&(s=t.replace(Hu,"$&/")+"/"),Wa(r,e,s,"",function(d){return d})):r!=null&&(Td(r)&&(r=Hx(r,s+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(Hu,"$&/")+"/")+t)),e.push(r)),1;if(o=0,n=n===""?".":n+":",Wu(t))for(var l=0;l<t.length;l++){i=t[l];var c=n+wl(i,l);o+=Wa(i,e,s,c,r)}else if(c=Wx(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=n+wl(i,l++),o+=Wa(i,e,s,c,r);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ca(t,e,s){if(t==null)return t;var n=[],r=0;return Wa(t,n,"","",function(i){return e.call(s,i,r++)}),n}function qx(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(s){(t._status===0||t._status===-1)&&(t._status=1,t._result=s)},function(s){(t._status===0||t._status===-1)&&(t._status=2,t._result=s)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ft={current:null},Ha={transition:null},Kx={ReactCurrentDispatcher:ft,ReactCurrentBatchConfig:Ha,ReactCurrentOwner:Ed};function Gm(){throw Error("act(...) is not supported in production builds of React.")}xe.Children={map:ca,forEach:function(t,e,s){ca(t,function(){e.apply(this,arguments)},s)},count:function(t){var e=0;return ca(t,function(){e++}),e},toArray:function(t){return ca(t,function(e){return e})||[]},only:function(t){if(!Td(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};xe.Component=Br;xe.Fragment=Mx;xe.Profiler=Dx;xe.PureComponent=Cd;xe.StrictMode=Lx;xe.Suspense=$x;xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Kx;xe.act=Gm;xe.cloneElement=function(t,e,s){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Wm({},t.props),r=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Ed.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)qm.call(e,c)&&!Km.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=s;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:Xi,type:t.type,key:r,ref:i,props:n,_owner:o}};xe.createContext=function(t){return t={$$typeof:Ix,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Bx,_context:t},t.Consumer=t};xe.createElement=Ym;xe.createFactory=function(t){var e=Ym.bind(null,t);return e.type=t,e};xe.createRef=function(){return{current:null}};xe.forwardRef=function(t){return{$$typeof:zx,render:t}};xe.isValidElement=Td;xe.lazy=function(t){return{$$typeof:Ux,_payload:{_status:-1,_result:t},_init:qx}};xe.memo=function(t,e){return{$$typeof:Fx,type:t,compare:e===void 0?null:e}};xe.startTransition=function(t){var e=Ha.transition;Ha.transition={};try{t()}finally{Ha.transition=e}};xe.unstable_act=Gm;xe.useCallback=function(t,e){return ft.current.useCallback(t,e)};xe.useContext=function(t){return ft.current.useContext(t)};xe.useDebugValue=function(){};xe.useDeferredValue=function(t){return ft.current.useDeferredValue(t)};xe.useEffect=function(t,e){return ft.current.useEffect(t,e)};xe.useId=function(){return ft.current.useId()};xe.useImperativeHandle=function(t,e,s){return ft.current.useImperativeHandle(t,e,s)};xe.useInsertionEffect=function(t,e){return ft.current.useInsertionEffect(t,e)};xe.useLayoutEffect=function(t,e){return ft.current.useLayoutEffect(t,e)};xe.useMemo=function(t,e){return ft.current.useMemo(t,e)};xe.useReducer=function(t,e,s){return ft.current.useReducer(t,e,s)};xe.useRef=function(t){return ft.current.useRef(t)};xe.useState=function(t){return ft.current.useState(t)};xe.useSyncExternalStore=function(t,e,s){return ft.current.useSyncExternalStore(t,e,s)};xe.useTransition=function(){return ft.current.useTransition()};xe.version="18.3.1";Fm.exports=xe;var k=Fm.exports;const He=Ax(k);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yx=k,Gx=Symbol.for("react.element"),Qx=Symbol.for("react.fragment"),Jx=Object.prototype.hasOwnProperty,Xx=Yx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Zx={key:!0,ref:!0,__self:!0,__source:!0};function Qm(t,e,s){var n,r={},i=null,o=null;s!==void 0&&(i=""+s),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)Jx.call(e,n)&&!Zx.hasOwnProperty(n)&&(r[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)r[n]===void 0&&(r[n]=e[n]);return{$$typeof:Gx,type:t,key:i,ref:o,props:r,_owner:Xx.current}}Vo.Fragment=Qx;Vo.jsx=Qm;Vo.jsxs=Qm;$m.exports=Vo;var a=$m.exports,Jm={exports:{}},Rt={},Xm={exports:{}},Zm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,L){var H=U.length;U.push(L);e:for(;0<H;){var te=H-1>>>1,Q=U[te];if(0<r(Q,L))U[te]=L,U[H]=Q,H=te;else break e}}function s(U){return U.length===0?null:U[0]}function n(U){if(U.length===0)return null;var L=U[0],H=U.pop();if(H!==L){U[0]=H;e:for(var te=0,Q=U.length,O=Q>>>1;te<O;){var X=2*(te+1)-1,ne=U[X],ae=X+1,B=U[ae];if(0>r(ne,H))ae<Q&&0>r(B,ne)?(U[te]=B,U[ae]=H,te=ae):(U[te]=ne,U[X]=H,te=X);else if(ae<Q&&0>r(B,H))U[te]=B,U[ae]=H,te=ae;else break e}}return L}function r(U,L){var H=U.sortIndex-L.sortIndex;return H!==0?H:U.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,f=3,m=!1,p=!1,v=!1,b=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(U){for(var L=s(d);L!==null;){if(L.callback===null)n(d);else if(L.startTime<=U)n(d),L.sortIndex=L.expirationTime,e(c,L);else break;L=s(d)}}function w(U){if(v=!1,y(U),!p)if(s(c)!==null)p=!0,$(_);else{var L=s(d);L!==null&&q(w,L.startTime-U)}}function _(U,L){p=!1,v&&(v=!1,x(E),E=-1),m=!0;var H=f;try{for(y(L),h=s(c);h!==null&&(!(h.expirationTime>L)||U&&!M());){var te=h.callback;if(typeof te=="function"){h.callback=null,f=h.priorityLevel;var Q=te(h.expirationTime<=L);L=t.unstable_now(),typeof Q=="function"?h.callback=Q:h===s(c)&&n(c),y(L)}else n(c);h=s(c)}if(h!==null)var O=!0;else{var X=s(d);X!==null&&q(w,X.startTime-L),O=!1}return O}finally{h=null,f=H,m=!1}}var N=!1,P=null,E=-1,C=5,R=-1;function M(){return!(t.unstable_now()-R<C)}function V(){if(P!==null){var U=t.unstable_now();R=U;var L=!0;try{L=P(!0,U)}finally{L?ie():(N=!1,P=null)}}else N=!1}var ie;if(typeof g=="function")ie=function(){g(V)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,T=ce.port2;ce.port1.onmessage=V,ie=function(){T.postMessage(null)}}else ie=function(){b(V,0)};function $(U){P=U,N||(N=!0,ie())}function q(U,L){E=b(function(){U(t.unstable_now())},L)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){p||m||(p=!0,$(_))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return s(c)},t.unstable_next=function(U){switch(f){case 1:case 2:case 3:var L=3;break;default:L=f}var H=f;f=L;try{return U()}finally{f=H}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,L){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var H=f;f=U;try{return L()}finally{f=H}},t.unstable_scheduleCallback=function(U,L,H){var te=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?te+H:te):H=te,U){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=H+Q,U={id:u++,callback:L,priorityLevel:U,startTime:H,expirationTime:Q,sortIndex:-1},H>te?(U.sortIndex=H,e(d,U),s(c)===null&&U===s(d)&&(v?(x(E),E=-1):v=!0,q(w,H-te))):(U.sortIndex=Q,e(c,U),p||m||(p=!0,$(_))),U},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(U){var L=f;return function(){var H=f;f=L;try{return U.apply(this,arguments)}finally{f=H}}}})(Zm);Xm.exports=Zm;var ey=Xm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ty=k,Ot=ey;function W(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)e+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ep=new Set,Ti={};function Hn(t,e){kr(t,e),kr(t+"Capture",e)}function kr(t,e){for(Ti[t]=e,t=0;t<e.length;t++)ep.add(e[t])}var Ps=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fc=Object.prototype.hasOwnProperty,sy=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Vu={},qu={};function ny(t){return fc.call(qu,t)?!0:fc.call(Vu,t)?!1:sy.test(t)?qu[t]=!0:(Vu[t]=!0,!1)}function ry(t,e,s,n){if(s!==null&&s.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:s!==null?!s.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function iy(t,e,s,n){if(e===null||typeof e>"u"||ry(t,e,s,n))return!0;if(n)return!1;if(s!==null)switch(s.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function mt(t,e,s,n,r,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=r,this.mustUseProperty=s,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var tt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){tt[t]=new mt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];tt[e]=new mt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){tt[t]=new mt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){tt[t]=new mt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){tt[t]=new mt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){tt[t]=new mt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){tt[t]=new mt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){tt[t]=new mt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){tt[t]=new mt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ad=/[\-:]([a-z])/g;function Od(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ad,Od);tt[e]=new mt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ad,Od);tt[e]=new mt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ad,Od);tt[e]=new mt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){tt[t]=new mt(t,1,!1,t.toLowerCase(),null,!1,!1)});tt.xlinkHref=new mt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){tt[t]=new mt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Rd(t,e,s,n){var r=tt.hasOwnProperty(e)?tt[e]:null;(r!==null?r.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(iy(e,s,r,n)&&(s=null),n||r===null?ny(e)&&(s===null?t.removeAttribute(e):t.setAttribute(e,""+s)):r.mustUseProperty?t[r.propertyName]=s===null?r.type===3?!1:"":s:(e=r.attributeName,n=r.attributeNamespace,s===null?t.removeAttribute(e):(r=r.type,s=r===3||r===4&&s===!0?"":""+s,n?t.setAttributeNS(n,e,s):t.setAttribute(e,s))))}var Os=ty.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,da=Symbol.for("react.element"),nr=Symbol.for("react.portal"),rr=Symbol.for("react.fragment"),Md=Symbol.for("react.strict_mode"),mc=Symbol.for("react.profiler"),tp=Symbol.for("react.provider"),sp=Symbol.for("react.context"),Ld=Symbol.for("react.forward_ref"),pc=Symbol.for("react.suspense"),gc=Symbol.for("react.suspense_list"),Dd=Symbol.for("react.memo"),Is=Symbol.for("react.lazy"),np=Symbol.for("react.offscreen"),Ku=Symbol.iterator;function Ur(t){return t===null||typeof t!="object"?null:(t=Ku&&t[Ku]||t["@@iterator"],typeof t=="function"?t:null)}var Be=Object.assign,_l;function ni(t){if(_l===void 0)try{throw Error()}catch(s){var e=s.stack.trim().match(/\n( *(at )?)/);_l=e&&e[1]||""}return`
`+_l+t}var jl=!1;function kl(t,e){if(!t||jl)return"";jl=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var n=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){n=d}t.call(e.prototype)}else{try{throw Error()}catch(d){n=d}t()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var r=d.stack.split(`
`),i=n.stack.split(`
`),o=r.length-1,l=i.length-1;1<=o&&0<=l&&r[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(r[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||r[o]!==i[l]){var c=`
`+r[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{jl=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?ni(t):""}function ay(t){switch(t.tag){case 5:return ni(t.type);case 16:return ni("Lazy");case 13:return ni("Suspense");case 19:return ni("SuspenseList");case 0:case 2:case 15:return t=kl(t.type,!1),t;case 11:return t=kl(t.type.render,!1),t;case 1:return t=kl(t.type,!0),t;default:return""}}function xc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case rr:return"Fragment";case nr:return"Portal";case mc:return"Profiler";case Md:return"StrictMode";case pc:return"Suspense";case gc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case sp:return(t.displayName||"Context")+".Consumer";case tp:return(t._context.displayName||"Context")+".Provider";case Ld:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Dd:return e=t.displayName||null,e!==null?e:xc(t.type)||"Memo";case Is:e=t._payload,t=t._init;try{return xc(t(e))}catch{}}return null}function oy(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xc(e);case 8:return e===Md?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function rn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function rp(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ly(t){var e=rp(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var r=s.get,i=s.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ua(t){t._valueTracker||(t._valueTracker=ly(t))}function ip(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var s=e.getValue(),n="";return t&&(n=rp(t)?t.checked?"true":"false":t.value),t=n,t!==s?(e.setValue(t),!0):!1}function ao(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function yc(t,e){var s=e.checked;return Be({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??t._wrapperState.initialChecked})}function Yu(t,e){var s=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;s=rn(e.value!=null?e.value:s),t._wrapperState={initialChecked:n,initialValue:s,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ap(t,e){e=e.checked,e!=null&&Rd(t,"checked",e,!1)}function vc(t,e){ap(t,e);var s=rn(e.value),n=e.type;if(s!=null)n==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+s):t.value!==""+s&&(t.value=""+s);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?bc(t,e.type,s):e.hasOwnProperty("defaultValue")&&bc(t,e.type,rn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Gu(t,e,s){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,s||e===t.value||(t.value=e),t.defaultValue=e}s=t.name,s!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,s!==""&&(t.name=s)}function bc(t,e,s){(e!=="number"||ao(t.ownerDocument)!==t)&&(s==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+s&&(t.defaultValue=""+s))}var ri=Array.isArray;function gr(t,e,s,n){if(t=t.options,e){e={};for(var r=0;r<s.length;r++)e["$"+s[r]]=!0;for(s=0;s<t.length;s++)r=e.hasOwnProperty("$"+t[s].value),t[s].selected!==r&&(t[s].selected=r),r&&n&&(t[s].defaultSelected=!0)}else{for(s=""+rn(s),e=null,r=0;r<t.length;r++){if(t[r].value===s){t[r].selected=!0,n&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function wc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return Be({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Qu(t,e){var s=e.value;if(s==null){if(s=e.children,e=e.defaultValue,s!=null){if(e!=null)throw Error(W(92));if(ri(s)){if(1<s.length)throw Error(W(93));s=s[0]}e=s}e==null&&(e=""),s=e}t._wrapperState={initialValue:rn(s)}}function op(t,e){var s=rn(e.value),n=rn(e.defaultValue);s!=null&&(s=""+s,s!==t.value&&(t.value=s),e.defaultValue==null&&t.defaultValue!==s&&(t.defaultValue=s)),n!=null&&(t.defaultValue=""+n)}function Ju(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function lp(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _c(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?lp(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ha,cp=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,s,n,r){MSApp.execUnsafeLocalFunction(function(){return t(e,s,n,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ha=ha||document.createElement("div"),ha.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ha.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ai(t,e){if(e){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=e;return}}t.textContent=e}var fi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cy=["Webkit","ms","Moz","O"];Object.keys(fi).forEach(function(t){cy.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),fi[e]=fi[t]})});function dp(t,e,s){return e==null||typeof e=="boolean"||e===""?"":s||typeof e!="number"||e===0||fi.hasOwnProperty(t)&&fi[t]?(""+e).trim():e+"px"}function up(t,e){t=t.style;for(var s in e)if(e.hasOwnProperty(s)){var n=s.indexOf("--")===0,r=dp(s,e[s],n);s==="float"&&(s="cssFloat"),n?t.setProperty(s,r):t[s]=r}}var dy=Be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jc(t,e){if(e){if(dy[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function kc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nc=null;function Bd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Sc=null,xr=null,yr=null;function Xu(t){if(t=ta(t)){if(typeof Sc!="function")throw Error(W(280));var e=t.stateNode;e&&(e=Qo(e),Sc(t.stateNode,t.type,e))}}function hp(t){xr?yr?yr.push(t):yr=[t]:xr=t}function fp(){if(xr){var t=xr,e=yr;if(yr=xr=null,Xu(t),e)for(t=0;t<e.length;t++)Xu(e[t])}}function mp(t,e){return t(e)}function pp(){}var Nl=!1;function gp(t,e,s){if(Nl)return t(e,s);Nl=!0;try{return mp(t,e,s)}finally{Nl=!1,(xr!==null||yr!==null)&&(pp(),fp())}}function Oi(t,e){var s=t.stateNode;if(s===null)return null;var n=Qo(s);if(n===null)return null;s=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(W(231,e,typeof s));return s}var Cc=!1;if(Ps)try{var Wr={};Object.defineProperty(Wr,"passive",{get:function(){Cc=!0}}),window.addEventListener("test",Wr,Wr),window.removeEventListener("test",Wr,Wr)}catch{Cc=!1}function uy(t,e,s,n,r,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(s,d)}catch(u){this.onError(u)}}var mi=!1,oo=null,lo=!1,Pc=null,hy={onError:function(t){mi=!0,oo=t}};function fy(t,e,s,n,r,i,o,l,c){mi=!1,oo=null,uy.apply(hy,arguments)}function my(t,e,s,n,r,i,o,l,c){if(fy.apply(this,arguments),mi){if(mi){var d=oo;mi=!1,oo=null}else throw Error(W(198));lo||(lo=!0,Pc=d)}}function Vn(t){var e=t,s=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(s=e.return),t=e.return;while(t)}return e.tag===3?s:null}function xp(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Zu(t){if(Vn(t)!==t)throw Error(W(188))}function py(t){var e=t.alternate;if(!e){if(e=Vn(t),e===null)throw Error(W(188));return e!==t?null:t}for(var s=t,n=e;;){var r=s.return;if(r===null)break;var i=r.alternate;if(i===null){if(n=r.return,n!==null){s=n;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===s)return Zu(r),t;if(i===n)return Zu(r),e;i=i.sibling}throw Error(W(188))}if(s.return!==n.return)s=r,n=i;else{for(var o=!1,l=r.child;l;){if(l===s){o=!0,s=r,n=i;break}if(l===n){o=!0,n=r,s=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===s){o=!0,s=i,n=r;break}if(l===n){o=!0,n=i,s=r;break}l=l.sibling}if(!o)throw Error(W(189))}}if(s.alternate!==n)throw Error(W(190))}if(s.tag!==3)throw Error(W(188));return s.stateNode.current===s?t:e}function yp(t){return t=py(t),t!==null?vp(t):null}function vp(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=vp(t);if(e!==null)return e;t=t.sibling}return null}var bp=Ot.unstable_scheduleCallback,eh=Ot.unstable_cancelCallback,gy=Ot.unstable_shouldYield,xy=Ot.unstable_requestPaint,Fe=Ot.unstable_now,yy=Ot.unstable_getCurrentPriorityLevel,Id=Ot.unstable_ImmediatePriority,wp=Ot.unstable_UserBlockingPriority,co=Ot.unstable_NormalPriority,vy=Ot.unstable_LowPriority,_p=Ot.unstable_IdlePriority,qo=null,ds=null;function by(t){if(ds&&typeof ds.onCommitFiberRoot=="function")try{ds.onCommitFiberRoot(qo,t,void 0,(t.current.flags&128)===128)}catch{}}var es=Math.clz32?Math.clz32:jy,wy=Math.log,_y=Math.LN2;function jy(t){return t>>>=0,t===0?32:31-(wy(t)/_y|0)|0}var fa=64,ma=4194304;function ii(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function uo(t,e){var s=t.pendingLanes;if(s===0)return 0;var n=0,r=t.suspendedLanes,i=t.pingedLanes,o=s&268435455;if(o!==0){var l=o&~r;l!==0?n=ii(l):(i&=o,i!==0&&(n=ii(i)))}else o=s&~r,o!==0?n=ii(o):i!==0&&(n=ii(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&r)&&(r=n&-n,i=e&-e,r>=i||r===16&&(i&4194240)!==0))return e;if(n&4&&(n|=s&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)s=31-es(e),r=1<<s,n|=t[s],e&=~r;return n}function ky(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ny(t,e){for(var s=t.suspendedLanes,n=t.pingedLanes,r=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-es(i),l=1<<o,c=r[o];c===-1?(!(l&s)||l&n)&&(r[o]=ky(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function Ec(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function jp(){var t=fa;return fa<<=1,!(fa&4194240)&&(fa=64),t}function Sl(t){for(var e=[],s=0;31>s;s++)e.push(t);return e}function Zi(t,e,s){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-es(e),t[e]=s}function Sy(t,e){var s=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<s;){var r=31-es(s),i=1<<r;e[r]=0,n[r]=-1,t[r]=-1,s&=~i}}function zd(t,e){var s=t.entangledLanes|=e;for(t=t.entanglements;s;){var n=31-es(s),r=1<<n;r&e|t[n]&e&&(t[n]|=e),s&=~r}}var je=0;function kp(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Np,$d,Sp,Cp,Pp,Tc=!1,pa=[],Ys=null,Gs=null,Qs=null,Ri=new Map,Mi=new Map,$s=[],Cy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function th(t,e){switch(t){case"focusin":case"focusout":Ys=null;break;case"dragenter":case"dragleave":Gs=null;break;case"mouseover":case"mouseout":Qs=null;break;case"pointerover":case"pointerout":Ri.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mi.delete(e.pointerId)}}function Hr(t,e,s,n,r,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:s,eventSystemFlags:n,nativeEvent:i,targetContainers:[r]},e!==null&&(e=ta(e),e!==null&&$d(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function Py(t,e,s,n,r){switch(e){case"focusin":return Ys=Hr(Ys,t,e,s,n,r),!0;case"dragenter":return Gs=Hr(Gs,t,e,s,n,r),!0;case"mouseover":return Qs=Hr(Qs,t,e,s,n,r),!0;case"pointerover":var i=r.pointerId;return Ri.set(i,Hr(Ri.get(i)||null,t,e,s,n,r)),!0;case"gotpointercapture":return i=r.pointerId,Mi.set(i,Hr(Mi.get(i)||null,t,e,s,n,r)),!0}return!1}function Ep(t){var e=Pn(t.target);if(e!==null){var s=Vn(e);if(s!==null){if(e=s.tag,e===13){if(e=xp(s),e!==null){t.blockedOn=e,Pp(t.priority,function(){Sp(s)});return}}else if(e===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Va(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var s=Ac(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(s===null){s=t.nativeEvent;var n=new s.constructor(s.type,s);Nc=n,s.target.dispatchEvent(n),Nc=null}else return e=ta(s),e!==null&&$d(e),t.blockedOn=s,!1;e.shift()}return!0}function sh(t,e,s){Va(t)&&s.delete(e)}function Ey(){Tc=!1,Ys!==null&&Va(Ys)&&(Ys=null),Gs!==null&&Va(Gs)&&(Gs=null),Qs!==null&&Va(Qs)&&(Qs=null),Ri.forEach(sh),Mi.forEach(sh)}function Vr(t,e){t.blockedOn===e&&(t.blockedOn=null,Tc||(Tc=!0,Ot.unstable_scheduleCallback(Ot.unstable_NormalPriority,Ey)))}function Li(t){function e(r){return Vr(r,t)}if(0<pa.length){Vr(pa[0],t);for(var s=1;s<pa.length;s++){var n=pa[s];n.blockedOn===t&&(n.blockedOn=null)}}for(Ys!==null&&Vr(Ys,t),Gs!==null&&Vr(Gs,t),Qs!==null&&Vr(Qs,t),Ri.forEach(e),Mi.forEach(e),s=0;s<$s.length;s++)n=$s[s],n.blockedOn===t&&(n.blockedOn=null);for(;0<$s.length&&(s=$s[0],s.blockedOn===null);)Ep(s),s.blockedOn===null&&$s.shift()}var vr=Os.ReactCurrentBatchConfig,ho=!0;function Ty(t,e,s,n){var r=je,i=vr.transition;vr.transition=null;try{je=1,Fd(t,e,s,n)}finally{je=r,vr.transition=i}}function Ay(t,e,s,n){var r=je,i=vr.transition;vr.transition=null;try{je=4,Fd(t,e,s,n)}finally{je=r,vr.transition=i}}function Fd(t,e,s,n){if(ho){var r=Ac(t,e,s,n);if(r===null)Dl(t,e,n,fo,s),th(t,n);else if(Py(r,t,e,s,n))n.stopPropagation();else if(th(t,n),e&4&&-1<Cy.indexOf(t)){for(;r!==null;){var i=ta(r);if(i!==null&&Np(i),i=Ac(t,e,s,n),i===null&&Dl(t,e,n,fo,s),i===r)break;r=i}r!==null&&n.stopPropagation()}else Dl(t,e,n,null,s)}}var fo=null;function Ac(t,e,s,n){if(fo=null,t=Bd(n),t=Pn(t),t!==null)if(e=Vn(t),e===null)t=null;else if(s=e.tag,s===13){if(t=xp(e),t!==null)return t;t=null}else if(s===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return fo=t,null}function Tp(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yy()){case Id:return 1;case wp:return 4;case co:case vy:return 16;case _p:return 536870912;default:return 16}default:return 16}}var Ws=null,Ud=null,qa=null;function Ap(){if(qa)return qa;var t,e=Ud,s=e.length,n,r="value"in Ws?Ws.value:Ws.textContent,i=r.length;for(t=0;t<s&&e[t]===r[t];t++);var o=s-t;for(n=1;n<=o&&e[s-n]===r[i-n];n++);return qa=r.slice(t,1<n?1-n:void 0)}function Ka(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ga(){return!0}function nh(){return!1}function Mt(t){function e(s,n,r,i,o){this._reactName=s,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(s=t[l],this[l]=s?s(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ga:nh,this.isPropagationStopped=nh,this}return Be(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=ga)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=ga)},persist:function(){},isPersistent:ga}),e}var Ir={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wd=Mt(Ir),ea=Be({},Ir,{view:0,detail:0}),Oy=Mt(ea),Cl,Pl,qr,Ko=Be({},ea,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==qr&&(qr&&t.type==="mousemove"?(Cl=t.screenX-qr.screenX,Pl=t.screenY-qr.screenY):Pl=Cl=0,qr=t),Cl)},movementY:function(t){return"movementY"in t?t.movementY:Pl}}),rh=Mt(Ko),Ry=Be({},Ko,{dataTransfer:0}),My=Mt(Ry),Ly=Be({},ea,{relatedTarget:0}),El=Mt(Ly),Dy=Be({},Ir,{animationName:0,elapsedTime:0,pseudoElement:0}),By=Mt(Dy),Iy=Be({},Ir,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),zy=Mt(Iy),$y=Be({},Ir,{data:0}),ih=Mt($y),Fy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Uy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hy(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Wy[t])?!!e[t]:!1}function Hd(){return Hy}var Vy=Be({},ea,{key:function(t){if(t.key){var e=Fy[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ka(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Uy[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hd,charCode:function(t){return t.type==="keypress"?Ka(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ka(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),qy=Mt(Vy),Ky=Be({},Ko,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ah=Mt(Ky),Yy=Be({},ea,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hd}),Gy=Mt(Yy),Qy=Be({},Ir,{propertyName:0,elapsedTime:0,pseudoElement:0}),Jy=Mt(Qy),Xy=Be({},Ko,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Zy=Mt(Xy),ev=[9,13,27,32],Vd=Ps&&"CompositionEvent"in window,pi=null;Ps&&"documentMode"in document&&(pi=document.documentMode);var tv=Ps&&"TextEvent"in window&&!pi,Op=Ps&&(!Vd||pi&&8<pi&&11>=pi),oh=" ",lh=!1;function Rp(t,e){switch(t){case"keyup":return ev.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mp(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ir=!1;function sv(t,e){switch(t){case"compositionend":return Mp(e);case"keypress":return e.which!==32?null:(lh=!0,oh);case"textInput":return t=e.data,t===oh&&lh?null:t;default:return null}}function nv(t,e){if(ir)return t==="compositionend"||!Vd&&Rp(t,e)?(t=Ap(),qa=Ud=Ws=null,ir=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Op&&e.locale!=="ko"?null:e.data;default:return null}}var rv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ch(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!rv[t.type]:e==="textarea"}function Lp(t,e,s,n){hp(n),e=mo(e,"onChange"),0<e.length&&(s=new Wd("onChange","change",null,s,n),t.push({event:s,listeners:e}))}var gi=null,Di=null;function iv(t){qp(t,0)}function Yo(t){var e=lr(t);if(ip(e))return t}function av(t,e){if(t==="change")return e}var Dp=!1;if(Ps){var Tl;if(Ps){var Al="oninput"in document;if(!Al){var dh=document.createElement("div");dh.setAttribute("oninput","return;"),Al=typeof dh.oninput=="function"}Tl=Al}else Tl=!1;Dp=Tl&&(!document.documentMode||9<document.documentMode)}function uh(){gi&&(gi.detachEvent("onpropertychange",Bp),Di=gi=null)}function Bp(t){if(t.propertyName==="value"&&Yo(Di)){var e=[];Lp(e,Di,t,Bd(t)),gp(iv,e)}}function ov(t,e,s){t==="focusin"?(uh(),gi=e,Di=s,gi.attachEvent("onpropertychange",Bp)):t==="focusout"&&uh()}function lv(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Yo(Di)}function cv(t,e){if(t==="click")return Yo(e)}function dv(t,e){if(t==="input"||t==="change")return Yo(e)}function uv(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ss=typeof Object.is=="function"?Object.is:uv;function Bi(t,e){if(ss(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var s=Object.keys(t),n=Object.keys(e);if(s.length!==n.length)return!1;for(n=0;n<s.length;n++){var r=s[n];if(!fc.call(e,r)||!ss(t[r],e[r]))return!1}return!0}function hh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function fh(t,e){var s=hh(t);t=0;for(var n;s;){if(s.nodeType===3){if(n=t+s.textContent.length,t<=e&&n>=e)return{node:s,offset:e-t};t=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=hh(s)}}function Ip(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Ip(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function zp(){for(var t=window,e=ao();e instanceof t.HTMLIFrameElement;){try{var s=typeof e.contentWindow.location.href=="string"}catch{s=!1}if(s)t=e.contentWindow;else break;e=ao(t.document)}return e}function qd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function hv(t){var e=zp(),s=t.focusedElem,n=t.selectionRange;if(e!==s&&s&&s.ownerDocument&&Ip(s.ownerDocument.documentElement,s)){if(n!==null&&qd(s)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in s)s.selectionStart=e,s.selectionEnd=Math.min(t,s.value.length);else if(t=(e=s.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=s.textContent.length,i=Math.min(n.start,r);n=n.end===void 0?i:Math.min(n.end,r),!t.extend&&i>n&&(r=n,n=i,i=r),r=fh(s,i);var o=fh(s,n);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=s;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<e.length;s++)t=e[s],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var fv=Ps&&"documentMode"in document&&11>=document.documentMode,ar=null,Oc=null,xi=null,Rc=!1;function mh(t,e,s){var n=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Rc||ar==null||ar!==ao(n)||(n=ar,"selectionStart"in n&&qd(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),xi&&Bi(xi,n)||(xi=n,n=mo(Oc,"onSelect"),0<n.length&&(e=new Wd("onSelect","select",null,e,s),t.push({event:e,listeners:n}),e.target=ar)))}function xa(t,e){var s={};return s[t.toLowerCase()]=e.toLowerCase(),s["Webkit"+t]="webkit"+e,s["Moz"+t]="moz"+e,s}var or={animationend:xa("Animation","AnimationEnd"),animationiteration:xa("Animation","AnimationIteration"),animationstart:xa("Animation","AnimationStart"),transitionend:xa("Transition","TransitionEnd")},Ol={},$p={};Ps&&($p=document.createElement("div").style,"AnimationEvent"in window||(delete or.animationend.animation,delete or.animationiteration.animation,delete or.animationstart.animation),"TransitionEvent"in window||delete or.transitionend.transition);function Go(t){if(Ol[t])return Ol[t];if(!or[t])return t;var e=or[t],s;for(s in e)if(e.hasOwnProperty(s)&&s in $p)return Ol[t]=e[s];return t}var Fp=Go("animationend"),Up=Go("animationiteration"),Wp=Go("animationstart"),Hp=Go("transitionend"),Vp=new Map,ph="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function dn(t,e){Vp.set(t,e),Hn(e,[t])}for(var Rl=0;Rl<ph.length;Rl++){var Ml=ph[Rl],mv=Ml.toLowerCase(),pv=Ml[0].toUpperCase()+Ml.slice(1);dn(mv,"on"+pv)}dn(Fp,"onAnimationEnd");dn(Up,"onAnimationIteration");dn(Wp,"onAnimationStart");dn("dblclick","onDoubleClick");dn("focusin","onFocus");dn("focusout","onBlur");dn(Hp,"onTransitionEnd");kr("onMouseEnter",["mouseout","mouseover"]);kr("onMouseLeave",["mouseout","mouseover"]);kr("onPointerEnter",["pointerout","pointerover"]);kr("onPointerLeave",["pointerout","pointerover"]);Hn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Hn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Hn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Hn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Hn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Hn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ai="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gv=new Set("cancel close invalid load scroll toggle".split(" ").concat(ai));function gh(t,e,s){var n=t.type||"unknown-event";t.currentTarget=s,my(n,e,void 0,t),t.currentTarget=null}function qp(t,e){e=(e&4)!==0;for(var s=0;s<t.length;s++){var n=t[s],r=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&r.isPropagationStopped())break e;gh(r,l,d),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&r.isPropagationStopped())break e;gh(r,l,d),i=c}}}if(lo)throw t=Pc,lo=!1,Pc=null,t}function Te(t,e){var s=e[Ic];s===void 0&&(s=e[Ic]=new Set);var n=t+"__bubble";s.has(n)||(Kp(e,t,2,!1),s.add(n))}function Ll(t,e,s){var n=0;e&&(n|=4),Kp(s,t,n,e)}var ya="_reactListening"+Math.random().toString(36).slice(2);function Ii(t){if(!t[ya]){t[ya]=!0,ep.forEach(function(s){s!=="selectionchange"&&(gv.has(s)||Ll(s,!1,t),Ll(s,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ya]||(e[ya]=!0,Ll("selectionchange",!1,e))}}function Kp(t,e,s,n){switch(Tp(e)){case 1:var r=Ty;break;case 4:r=Ay;break;default:r=Fd}s=r.bind(null,e,s,t),r=void 0,!Cc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),n?r!==void 0?t.addEventListener(e,s,{capture:!0,passive:r}):t.addEventListener(e,s,!0):r!==void 0?t.addEventListener(e,s,{passive:r}):t.addEventListener(e,s,!1)}function Dl(t,e,s,n,r){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;o=o.return}for(;l!==null;){if(o=Pn(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}gp(function(){var d=i,u=Bd(s),h=[];e:{var f=Vp.get(t);if(f!==void 0){var m=Wd,p=t;switch(t){case"keypress":if(Ka(s)===0)break e;case"keydown":case"keyup":m=qy;break;case"focusin":p="focus",m=El;break;case"focusout":p="blur",m=El;break;case"beforeblur":case"afterblur":m=El;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=rh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=My;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Gy;break;case Fp:case Up:case Wp:m=By;break;case Hp:m=Jy;break;case"scroll":m=Oy;break;case"wheel":m=Zy;break;case"copy":case"cut":case"paste":m=zy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=ah}var v=(e&4)!==0,b=!v&&t==="scroll",x=v?f!==null?f+"Capture":null:f;v=[];for(var g=d,y;g!==null;){y=g;var w=y.stateNode;if(y.tag===5&&w!==null&&(y=w,x!==null&&(w=Oi(g,x),w!=null&&v.push(zi(g,w,y)))),b)break;g=g.return}0<v.length&&(f=new m(f,p,null,s,u),h.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&s!==Nc&&(p=s.relatedTarget||s.fromElement)&&(Pn(p)||p[Es]))break e;if((m||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,m?(p=s.relatedTarget||s.toElement,m=d,p=p?Pn(p):null,p!==null&&(b=Vn(p),p!==b||p.tag!==5&&p.tag!==6)&&(p=null)):(m=null,p=d),m!==p)){if(v=rh,w="onMouseLeave",x="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(v=ah,w="onPointerLeave",x="onPointerEnter",g="pointer"),b=m==null?f:lr(m),y=p==null?f:lr(p),f=new v(w,g+"leave",m,s,u),f.target=b,f.relatedTarget=y,w=null,Pn(u)===d&&(v=new v(x,g+"enter",p,s,u),v.target=y,v.relatedTarget=b,w=v),b=w,m&&p)t:{for(v=m,x=p,g=0,y=v;y;y=Yn(y))g++;for(y=0,w=x;w;w=Yn(w))y++;for(;0<g-y;)v=Yn(v),g--;for(;0<y-g;)x=Yn(x),y--;for(;g--;){if(v===x||x!==null&&v===x.alternate)break t;v=Yn(v),x=Yn(x)}v=null}else v=null;m!==null&&xh(h,f,m,v,!1),p!==null&&b!==null&&xh(h,b,p,v,!0)}}e:{if(f=d?lr(d):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var _=av;else if(ch(f))if(Dp)_=dv;else{_=lv;var N=ov}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=cv);if(_&&(_=_(t,d))){Lp(h,_,s,u);break e}N&&N(t,f,d),t==="focusout"&&(N=f._wrapperState)&&N.controlled&&f.type==="number"&&bc(f,"number",f.value)}switch(N=d?lr(d):window,t){case"focusin":(ch(N)||N.contentEditable==="true")&&(ar=N,Oc=d,xi=null);break;case"focusout":xi=Oc=ar=null;break;case"mousedown":Rc=!0;break;case"contextmenu":case"mouseup":case"dragend":Rc=!1,mh(h,s,u);break;case"selectionchange":if(fv)break;case"keydown":case"keyup":mh(h,s,u)}var P;if(Vd)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else ir?Rp(t,s)&&(E="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(E="onCompositionStart");E&&(Op&&s.locale!=="ko"&&(ir||E!=="onCompositionStart"?E==="onCompositionEnd"&&ir&&(P=Ap()):(Ws=u,Ud="value"in Ws?Ws.value:Ws.textContent,ir=!0)),N=mo(d,E),0<N.length&&(E=new ih(E,t,null,s,u),h.push({event:E,listeners:N}),P?E.data=P:(P=Mp(s),P!==null&&(E.data=P)))),(P=tv?sv(t,s):nv(t,s))&&(d=mo(d,"onBeforeInput"),0<d.length&&(u=new ih("onBeforeInput","beforeinput",null,s,u),h.push({event:u,listeners:d}),u.data=P))}qp(h,e)})}function zi(t,e,s){return{instance:t,listener:e,currentTarget:s}}function mo(t,e){for(var s=e+"Capture",n=[];t!==null;){var r=t,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=Oi(t,s),i!=null&&n.unshift(zi(t,i,r)),i=Oi(t,e),i!=null&&n.push(zi(t,i,r))),t=t.return}return n}function Yn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function xh(t,e,s,n,r){for(var i=e._reactName,o=[];s!==null&&s!==n;){var l=s,c=l.alternate,d=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&d!==null&&(l=d,r?(c=Oi(s,i),c!=null&&o.unshift(zi(s,c,l))):r||(c=Oi(s,i),c!=null&&o.push(zi(s,c,l)))),s=s.return}o.length!==0&&t.push({event:e,listeners:o})}var xv=/\r\n?/g,yv=/\u0000|\uFFFD/g;function yh(t){return(typeof t=="string"?t:""+t).replace(xv,`
`).replace(yv,"")}function va(t,e,s){if(e=yh(e),yh(t)!==e&&s)throw Error(W(425))}function po(){}var Mc=null,Lc=null;function Dc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Bc=typeof setTimeout=="function"?setTimeout:void 0,vv=typeof clearTimeout=="function"?clearTimeout:void 0,vh=typeof Promise=="function"?Promise:void 0,bv=typeof queueMicrotask=="function"?queueMicrotask:typeof vh<"u"?function(t){return vh.resolve(null).then(t).catch(wv)}:Bc;function wv(t){setTimeout(function(){throw t})}function Bl(t,e){var s=e,n=0;do{var r=s.nextSibling;if(t.removeChild(s),r&&r.nodeType===8)if(s=r.data,s==="/$"){if(n===0){t.removeChild(r),Li(e);return}n--}else s!=="$"&&s!=="$?"&&s!=="$!"||n++;s=r}while(s);Li(e)}function Js(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function bh(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(e===0)return t;e--}else s==="/$"&&e++}t=t.previousSibling}return null}var zr=Math.random().toString(36).slice(2),cs="__reactFiber$"+zr,$i="__reactProps$"+zr,Es="__reactContainer$"+zr,Ic="__reactEvents$"+zr,_v="__reactListeners$"+zr,jv="__reactHandles$"+zr;function Pn(t){var e=t[cs];if(e)return e;for(var s=t.parentNode;s;){if(e=s[Es]||s[cs]){if(s=e.alternate,e.child!==null||s!==null&&s.child!==null)for(t=bh(t);t!==null;){if(s=t[cs])return s;t=bh(t)}return e}t=s,s=t.parentNode}return null}function ta(t){return t=t[cs]||t[Es],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function lr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(W(33))}function Qo(t){return t[$i]||null}var zc=[],cr=-1;function un(t){return{current:t}}function Oe(t){0>cr||(t.current=zc[cr],zc[cr]=null,cr--)}function Ee(t,e){cr++,zc[cr]=t.current,t.current=e}var an={},at=un(an),wt=un(!1),Dn=an;function Nr(t,e){var s=t.type.contextTypes;if(!s)return an;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in s)r[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function _t(t){return t=t.childContextTypes,t!=null}function go(){Oe(wt),Oe(at)}function wh(t,e,s){if(at.current!==an)throw Error(W(168));Ee(at,e),Ee(wt,s)}function Yp(t,e,s){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return s;n=n.getChildContext();for(var r in n)if(!(r in e))throw Error(W(108,oy(t)||"Unknown",r));return Be({},s,n)}function xo(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||an,Dn=at.current,Ee(at,t),Ee(wt,wt.current),!0}function _h(t,e,s){var n=t.stateNode;if(!n)throw Error(W(169));s?(t=Yp(t,e,Dn),n.__reactInternalMemoizedMergedChildContext=t,Oe(wt),Oe(at),Ee(at,t)):Oe(wt),Ee(wt,s)}var ws=null,Jo=!1,Il=!1;function Gp(t){ws===null?ws=[t]:ws.push(t)}function kv(t){Jo=!0,Gp(t)}function hn(){if(!Il&&ws!==null){Il=!0;var t=0,e=je;try{var s=ws;for(je=1;t<s.length;t++){var n=s[t];do n=n(!0);while(n!==null)}ws=null,Jo=!1}catch(r){throw ws!==null&&(ws=ws.slice(t+1)),bp(Id,hn),r}finally{je=e,Il=!1}}return null}var dr=[],ur=0,yo=null,vo=0,Bt=[],It=0,Bn=null,js=1,ks="";function _n(t,e){dr[ur++]=vo,dr[ur++]=yo,yo=t,vo=e}function Qp(t,e,s){Bt[It++]=js,Bt[It++]=ks,Bt[It++]=Bn,Bn=t;var n=js;t=ks;var r=32-es(n)-1;n&=~(1<<r),s+=1;var i=32-es(e)+r;if(30<i){var o=r-r%5;i=(n&(1<<o)-1).toString(32),n>>=o,r-=o,js=1<<32-es(e)+r|s<<r|n,ks=i+t}else js=1<<i|s<<r|n,ks=t}function Kd(t){t.return!==null&&(_n(t,1),Qp(t,1,0))}function Yd(t){for(;t===yo;)yo=dr[--ur],dr[ur]=null,vo=dr[--ur],dr[ur]=null;for(;t===Bn;)Bn=Bt[--It],Bt[It]=null,ks=Bt[--It],Bt[It]=null,js=Bt[--It],Bt[It]=null}var Tt=null,Ct=null,Re=!1,Xt=null;function Jp(t,e){var s=zt(5,null,null,0);s.elementType="DELETED",s.stateNode=e,s.return=t,e=t.deletions,e===null?(t.deletions=[s],t.flags|=16):e.push(s)}function jh(t,e){switch(t.tag){case 5:var s=t.type;return e=e.nodeType!==1||s.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Tt=t,Ct=Js(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Tt=t,Ct=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(s=Bn!==null?{id:js,overflow:ks}:null,t.memoizedState={dehydrated:e,treeContext:s,retryLane:1073741824},s=zt(18,null,null,0),s.stateNode=e,s.return=t,t.child=s,Tt=t,Ct=null,!0):!1;default:return!1}}function $c(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Fc(t){if(Re){var e=Ct;if(e){var s=e;if(!jh(t,e)){if($c(t))throw Error(W(418));e=Js(s.nextSibling);var n=Tt;e&&jh(t,e)?Jp(n,s):(t.flags=t.flags&-4097|2,Re=!1,Tt=t)}}else{if($c(t))throw Error(W(418));t.flags=t.flags&-4097|2,Re=!1,Tt=t}}}function kh(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Tt=t}function ba(t){if(t!==Tt)return!1;if(!Re)return kh(t),Re=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Dc(t.type,t.memoizedProps)),e&&(e=Ct)){if($c(t))throw Xp(),Error(W(418));for(;e;)Jp(t,e),e=Js(e.nextSibling)}if(kh(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(W(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"){if(e===0){Ct=Js(t.nextSibling);break e}e--}else s!=="$"&&s!=="$!"&&s!=="$?"||e++}t=t.nextSibling}Ct=null}}else Ct=Tt?Js(t.stateNode.nextSibling):null;return!0}function Xp(){for(var t=Ct;t;)t=Js(t.nextSibling)}function Sr(){Ct=Tt=null,Re=!1}function Gd(t){Xt===null?Xt=[t]:Xt.push(t)}var Nv=Os.ReactCurrentBatchConfig;function Kr(t,e,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(W(309));var n=s.stateNode}if(!n)throw Error(W(147,t));var r=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=r.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(W(284));if(!s._owner)throw Error(W(290,t))}return t}function wa(t,e){throw t=Object.prototype.toString.call(e),Error(W(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Nh(t){var e=t._init;return e(t._payload)}function Zp(t){function e(x,g){if(t){var y=x.deletions;y===null?(x.deletions=[g],x.flags|=16):y.push(g)}}function s(x,g){if(!t)return null;for(;g!==null;)e(x,g),g=g.sibling;return null}function n(x,g){for(x=new Map;g!==null;)g.key!==null?x.set(g.key,g):x.set(g.index,g),g=g.sibling;return x}function r(x,g){return x=tn(x,g),x.index=0,x.sibling=null,x}function i(x,g,y){return x.index=y,t?(y=x.alternate,y!==null?(y=y.index,y<g?(x.flags|=2,g):y):(x.flags|=2,g)):(x.flags|=1048576,g)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function l(x,g,y,w){return g===null||g.tag!==6?(g=Vl(y,x.mode,w),g.return=x,g):(g=r(g,y),g.return=x,g)}function c(x,g,y,w){var _=y.type;return _===rr?u(x,g,y.props.children,w,y.key):g!==null&&(g.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Is&&Nh(_)===g.type)?(w=r(g,y.props),w.ref=Kr(x,g,y),w.return=x,w):(w=eo(y.type,y.key,y.props,null,x.mode,w),w.ref=Kr(x,g,y),w.return=x,w)}function d(x,g,y,w){return g===null||g.tag!==4||g.stateNode.containerInfo!==y.containerInfo||g.stateNode.implementation!==y.implementation?(g=ql(y,x.mode,w),g.return=x,g):(g=r(g,y.children||[]),g.return=x,g)}function u(x,g,y,w,_){return g===null||g.tag!==7?(g=Rn(y,x.mode,w,_),g.return=x,g):(g=r(g,y),g.return=x,g)}function h(x,g,y){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Vl(""+g,x.mode,y),g.return=x,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case da:return y=eo(g.type,g.key,g.props,null,x.mode,y),y.ref=Kr(x,null,g),y.return=x,y;case nr:return g=ql(g,x.mode,y),g.return=x,g;case Is:var w=g._init;return h(x,w(g._payload),y)}if(ri(g)||Ur(g))return g=Rn(g,x.mode,y,null),g.return=x,g;wa(x,g)}return null}function f(x,g,y,w){var _=g!==null?g.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return _!==null?null:l(x,g,""+y,w);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case da:return y.key===_?c(x,g,y,w):null;case nr:return y.key===_?d(x,g,y,w):null;case Is:return _=y._init,f(x,g,_(y._payload),w)}if(ri(y)||Ur(y))return _!==null?null:u(x,g,y,w,null);wa(x,y)}return null}function m(x,g,y,w,_){if(typeof w=="string"&&w!==""||typeof w=="number")return x=x.get(y)||null,l(g,x,""+w,_);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case da:return x=x.get(w.key===null?y:w.key)||null,c(g,x,w,_);case nr:return x=x.get(w.key===null?y:w.key)||null,d(g,x,w,_);case Is:var N=w._init;return m(x,g,y,N(w._payload),_)}if(ri(w)||Ur(w))return x=x.get(y)||null,u(g,x,w,_,null);wa(g,w)}return null}function p(x,g,y,w){for(var _=null,N=null,P=g,E=g=0,C=null;P!==null&&E<y.length;E++){P.index>E?(C=P,P=null):C=P.sibling;var R=f(x,P,y[E],w);if(R===null){P===null&&(P=C);break}t&&P&&R.alternate===null&&e(x,P),g=i(R,g,E),N===null?_=R:N.sibling=R,N=R,P=C}if(E===y.length)return s(x,P),Re&&_n(x,E),_;if(P===null){for(;E<y.length;E++)P=h(x,y[E],w),P!==null&&(g=i(P,g,E),N===null?_=P:N.sibling=P,N=P);return Re&&_n(x,E),_}for(P=n(x,P);E<y.length;E++)C=m(P,x,E,y[E],w),C!==null&&(t&&C.alternate!==null&&P.delete(C.key===null?E:C.key),g=i(C,g,E),N===null?_=C:N.sibling=C,N=C);return t&&P.forEach(function(M){return e(x,M)}),Re&&_n(x,E),_}function v(x,g,y,w){var _=Ur(y);if(typeof _!="function")throw Error(W(150));if(y=_.call(y),y==null)throw Error(W(151));for(var N=_=null,P=g,E=g=0,C=null,R=y.next();P!==null&&!R.done;E++,R=y.next()){P.index>E?(C=P,P=null):C=P.sibling;var M=f(x,P,R.value,w);if(M===null){P===null&&(P=C);break}t&&P&&M.alternate===null&&e(x,P),g=i(M,g,E),N===null?_=M:N.sibling=M,N=M,P=C}if(R.done)return s(x,P),Re&&_n(x,E),_;if(P===null){for(;!R.done;E++,R=y.next())R=h(x,R.value,w),R!==null&&(g=i(R,g,E),N===null?_=R:N.sibling=R,N=R);return Re&&_n(x,E),_}for(P=n(x,P);!R.done;E++,R=y.next())R=m(P,x,E,R.value,w),R!==null&&(t&&R.alternate!==null&&P.delete(R.key===null?E:R.key),g=i(R,g,E),N===null?_=R:N.sibling=R,N=R);return t&&P.forEach(function(V){return e(x,V)}),Re&&_n(x,E),_}function b(x,g,y,w){if(typeof y=="object"&&y!==null&&y.type===rr&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case da:e:{for(var _=y.key,N=g;N!==null;){if(N.key===_){if(_=y.type,_===rr){if(N.tag===7){s(x,N.sibling),g=r(N,y.props.children),g.return=x,x=g;break e}}else if(N.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Is&&Nh(_)===N.type){s(x,N.sibling),g=r(N,y.props),g.ref=Kr(x,N,y),g.return=x,x=g;break e}s(x,N);break}else e(x,N);N=N.sibling}y.type===rr?(g=Rn(y.props.children,x.mode,w,y.key),g.return=x,x=g):(w=eo(y.type,y.key,y.props,null,x.mode,w),w.ref=Kr(x,g,y),w.return=x,x=w)}return o(x);case nr:e:{for(N=y.key;g!==null;){if(g.key===N)if(g.tag===4&&g.stateNode.containerInfo===y.containerInfo&&g.stateNode.implementation===y.implementation){s(x,g.sibling),g=r(g,y.children||[]),g.return=x,x=g;break e}else{s(x,g);break}else e(x,g);g=g.sibling}g=ql(y,x.mode,w),g.return=x,x=g}return o(x);case Is:return N=y._init,b(x,g,N(y._payload),w)}if(ri(y))return p(x,g,y,w);if(Ur(y))return v(x,g,y,w);wa(x,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,g!==null&&g.tag===6?(s(x,g.sibling),g=r(g,y),g.return=x,x=g):(s(x,g),g=Vl(y,x.mode,w),g.return=x,x=g),o(x)):s(x,g)}return b}var Cr=Zp(!0),eg=Zp(!1),bo=un(null),wo=null,hr=null,Qd=null;function Jd(){Qd=hr=wo=null}function Xd(t){var e=bo.current;Oe(bo),t._currentValue=e}function Uc(t,e,s){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===s)break;t=t.return}}function br(t,e){wo=t,Qd=hr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(bt=!0),t.firstContext=null)}function Ut(t){var e=t._currentValue;if(Qd!==t)if(t={context:t,memoizedValue:e,next:null},hr===null){if(wo===null)throw Error(W(308));hr=t,wo.dependencies={lanes:0,firstContext:t}}else hr=hr.next=t;return e}var En=null;function Zd(t){En===null?En=[t]:En.push(t)}function tg(t,e,s,n){var r=e.interleaved;return r===null?(s.next=s,Zd(e)):(s.next=r.next,r.next=s),e.interleaved=s,Ts(t,n)}function Ts(t,e){t.lanes|=e;var s=t.alternate;for(s!==null&&(s.lanes|=e),s=t,t=t.return;t!==null;)t.childLanes|=e,s=t.alternate,s!==null&&(s.childLanes|=e),s=t,t=t.return;return s.tag===3?s.stateNode:null}var zs=!1;function eu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Cs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Xs(t,e,s){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,be&2){var r=n.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),n.pending=e,Ts(t,s)}return r=n.interleaved,r===null?(e.next=e,Zd(n)):(e.next=r.next,r.next=e),n.interleaved=e,Ts(t,s)}function Ya(t,e,s){if(e=e.updateQueue,e!==null&&(e=e.shared,(s&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,s|=n,e.lanes=s,zd(t,s)}}function Sh(t,e){var s=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,s===n)){var r=null,i=null;if(s=s.firstBaseUpdate,s!==null){do{var o={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};i===null?r=i=o:i=i.next=o,s=s.next}while(s!==null);i===null?r=i=e:i=i.next=e}else r=i=e;s={baseState:n.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=e:t.next=e,s.lastBaseUpdate=e}function _o(t,e,s,n){var r=t.updateQueue;zs=!1;var i=r.firstBaseUpdate,o=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(i!==null){var h=r.baseState;o=0,u=d=c=null,l=i;do{var f=l.lane,m=l.eventTime;if((n&f)===f){u!==null&&(u=u.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=t,v=l;switch(f=e,m=s,v.tag){case 1:if(p=v.payload,typeof p=="function"){h=p.call(m,h,f);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=v.payload,f=typeof p=="function"?p.call(m,h,f):p,f==null)break e;h=Be({},h,f);break e;case 2:zs=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[l]:f.push(l))}else m={eventTime:m,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=m,c=h):u=u.next=m,o|=f;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;f=l,l=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(u===null&&(c=h),r.baseState=c,r.firstBaseUpdate=d,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else i===null&&(r.shared.lanes=0);zn|=o,t.lanes=o,t.memoizedState=h}}function Ch(t,e,s){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],r=n.callback;if(r!==null){if(n.callback=null,n=s,typeof r!="function")throw Error(W(191,r));r.call(n)}}}var sa={},us=un(sa),Fi=un(sa),Ui=un(sa);function Tn(t){if(t===sa)throw Error(W(174));return t}function tu(t,e){switch(Ee(Ui,e),Ee(Fi,t),Ee(us,sa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:_c(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=_c(e,t)}Oe(us),Ee(us,e)}function Pr(){Oe(us),Oe(Fi),Oe(Ui)}function ng(t){Tn(Ui.current);var e=Tn(us.current),s=_c(e,t.type);e!==s&&(Ee(Fi,t),Ee(us,s))}function su(t){Fi.current===t&&(Oe(us),Oe(Fi))}var Le=un(0);function jo(t){for(var e=t;e!==null;){if(e.tag===13){var s=e.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var zl=[];function nu(){for(var t=0;t<zl.length;t++)zl[t]._workInProgressVersionPrimary=null;zl.length=0}var Ga=Os.ReactCurrentDispatcher,$l=Os.ReactCurrentBatchConfig,In=0,De=null,qe=null,Ge=null,ko=!1,yi=!1,Wi=0,Sv=0;function st(){throw Error(W(321))}function ru(t,e){if(e===null)return!1;for(var s=0;s<e.length&&s<t.length;s++)if(!ss(t[s],e[s]))return!1;return!0}function iu(t,e,s,n,r,i){if(In=i,De=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ga.current=t===null||t.memoizedState===null?Tv:Av,t=s(n,r),yi){i=0;do{if(yi=!1,Wi=0,25<=i)throw Error(W(301));i+=1,Ge=qe=null,e.updateQueue=null,Ga.current=Ov,t=s(n,r)}while(yi)}if(Ga.current=No,e=qe!==null&&qe.next!==null,In=0,Ge=qe=De=null,ko=!1,e)throw Error(W(300));return t}function au(){var t=Wi!==0;return Wi=0,t}function os(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ge===null?De.memoizedState=Ge=t:Ge=Ge.next=t,Ge}function Wt(){if(qe===null){var t=De.alternate;t=t!==null?t.memoizedState:null}else t=qe.next;var e=Ge===null?De.memoizedState:Ge.next;if(e!==null)Ge=e,qe=t;else{if(t===null)throw Error(W(310));qe=t,t={memoizedState:qe.memoizedState,baseState:qe.baseState,baseQueue:qe.baseQueue,queue:qe.queue,next:null},Ge===null?De.memoizedState=Ge=t:Ge=Ge.next=t}return Ge}function Hi(t,e){return typeof e=="function"?e(t):e}function Fl(t){var e=Wt(),s=e.queue;if(s===null)throw Error(W(311));s.lastRenderedReducer=t;var n=qe,r=n.baseQueue,i=s.pending;if(i!==null){if(r!==null){var o=r.next;r.next=i.next,i.next=o}n.baseQueue=r=i,s.pending=null}if(r!==null){i=r.next,n=n.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((In&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:t(n,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=h,o=n):c=c.next=h,De.lanes|=u,zn|=u}d=d.next}while(d!==null&&d!==i);c===null?o=n:c.next=l,ss(n,e.memoizedState)||(bt=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=c,s.lastRenderedState=n}if(t=s.interleaved,t!==null){r=t;do i=r.lane,De.lanes|=i,zn|=i,r=r.next;while(r!==t)}else r===null&&(s.lanes=0);return[e.memoizedState,s.dispatch]}function Ul(t){var e=Wt(),s=e.queue;if(s===null)throw Error(W(311));s.lastRenderedReducer=t;var n=s.dispatch,r=s.pending,i=e.memoizedState;if(r!==null){s.pending=null;var o=r=r.next;do i=t(i,o.action),o=o.next;while(o!==r);ss(i,e.memoizedState)||(bt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),s.lastRenderedState=i}return[i,n]}function rg(){}function ig(t,e){var s=De,n=Wt(),r=e(),i=!ss(n.memoizedState,r);if(i&&(n.memoizedState=r,bt=!0),n=n.queue,ou(lg.bind(null,s,n,t),[t]),n.getSnapshot!==e||i||Ge!==null&&Ge.memoizedState.tag&1){if(s.flags|=2048,Vi(9,og.bind(null,s,n,r,e),void 0,null),Qe===null)throw Error(W(349));In&30||ag(s,e,r)}return r}function ag(t,e,s){t.flags|=16384,t={getSnapshot:e,value:s},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.stores=[t]):(s=e.stores,s===null?e.stores=[t]:s.push(t))}function og(t,e,s,n){e.value=s,e.getSnapshot=n,cg(e)&&dg(t)}function lg(t,e,s){return s(function(){cg(e)&&dg(t)})}function cg(t){var e=t.getSnapshot;t=t.value;try{var s=e();return!ss(t,s)}catch{return!0}}function dg(t){var e=Ts(t,1);e!==null&&ts(e,t,1,-1)}function Ph(t){var e=os();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:t},e.queue=t,t=t.dispatch=Ev.bind(null,De,t),[e.memoizedState,t]}function Vi(t,e,s,n){return t={tag:t,create:e,destroy:s,deps:n,next:null},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.lastEffect=t.next=t):(s=e.lastEffect,s===null?e.lastEffect=t.next=t:(n=s.next,s.next=t,t.next=n,e.lastEffect=t)),t}function ug(){return Wt().memoizedState}function Qa(t,e,s,n){var r=os();De.flags|=t,r.memoizedState=Vi(1|e,s,void 0,n===void 0?null:n)}function Xo(t,e,s,n){var r=Wt();n=n===void 0?null:n;var i=void 0;if(qe!==null){var o=qe.memoizedState;if(i=o.destroy,n!==null&&ru(n,o.deps)){r.memoizedState=Vi(e,s,i,n);return}}De.flags|=t,r.memoizedState=Vi(1|e,s,i,n)}function Eh(t,e){return Qa(8390656,8,t,e)}function ou(t,e){return Xo(2048,8,t,e)}function hg(t,e){return Xo(4,2,t,e)}function fg(t,e){return Xo(4,4,t,e)}function mg(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function pg(t,e,s){return s=s!=null?s.concat([t]):null,Xo(4,4,mg.bind(null,e,t),s)}function lu(){}function gg(t,e){var s=Wt();e=e===void 0?null:e;var n=s.memoizedState;return n!==null&&e!==null&&ru(e,n[1])?n[0]:(s.memoizedState=[t,e],t)}function xg(t,e){var s=Wt();e=e===void 0?null:e;var n=s.memoizedState;return n!==null&&e!==null&&ru(e,n[1])?n[0]:(t=t(),s.memoizedState=[t,e],t)}function yg(t,e,s){return In&21?(ss(s,e)||(s=jp(),De.lanes|=s,zn|=s,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,bt=!0),t.memoizedState=s)}function Cv(t,e){var s=je;je=s!==0&&4>s?s:4,t(!0);var n=$l.transition;$l.transition={};try{t(!1),e()}finally{je=s,$l.transition=n}}function vg(){return Wt().memoizedState}function Pv(t,e,s){var n=en(t);if(s={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null},bg(t))wg(e,s);else if(s=tg(t,e,s,n),s!==null){var r=ut();ts(s,t,n,r),_g(s,e,n)}}function Ev(t,e,s){var n=en(t),r={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null};if(bg(t))wg(e,r);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,s);if(r.hasEagerState=!0,r.eagerState=l,ss(l,o)){var c=e.interleaved;c===null?(r.next=r,Zd(e)):(r.next=c.next,c.next=r),e.interleaved=r;return}}catch{}finally{}s=tg(t,e,r,n),s!==null&&(r=ut(),ts(s,t,n,r),_g(s,e,n))}}function bg(t){var e=t.alternate;return t===De||e!==null&&e===De}function wg(t,e){yi=ko=!0;var s=t.pending;s===null?e.next=e:(e.next=s.next,s.next=e),t.pending=e}function _g(t,e,s){if(s&4194240){var n=e.lanes;n&=t.pendingLanes,s|=n,e.lanes=s,zd(t,s)}}var No={readContext:Ut,useCallback:st,useContext:st,useEffect:st,useImperativeHandle:st,useInsertionEffect:st,useLayoutEffect:st,useMemo:st,useReducer:st,useRef:st,useState:st,useDebugValue:st,useDeferredValue:st,useTransition:st,useMutableSource:st,useSyncExternalStore:st,useId:st,unstable_isNewReconciler:!1},Tv={readContext:Ut,useCallback:function(t,e){return os().memoizedState=[t,e===void 0?null:e],t},useContext:Ut,useEffect:Eh,useImperativeHandle:function(t,e,s){return s=s!=null?s.concat([t]):null,Qa(4194308,4,mg.bind(null,e,t),s)},useLayoutEffect:function(t,e){return Qa(4194308,4,t,e)},useInsertionEffect:function(t,e){return Qa(4,2,t,e)},useMemo:function(t,e){var s=os();return e=e===void 0?null:e,t=t(),s.memoizedState=[t,e],t},useReducer:function(t,e,s){var n=os();return e=s!==void 0?s(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Pv.bind(null,De,t),[n.memoizedState,t]},useRef:function(t){var e=os();return t={current:t},e.memoizedState=t},useState:Ph,useDebugValue:lu,useDeferredValue:function(t){return os().memoizedState=t},useTransition:function(){var t=Ph(!1),e=t[0];return t=Cv.bind(null,t[1]),os().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,s){var n=De,r=os();if(Re){if(s===void 0)throw Error(W(407));s=s()}else{if(s=e(),Qe===null)throw Error(W(349));In&30||ag(n,e,s)}r.memoizedState=s;var i={value:s,getSnapshot:e};return r.queue=i,Eh(lg.bind(null,n,i,t),[t]),n.flags|=2048,Vi(9,og.bind(null,n,i,s,e),void 0,null),s},useId:function(){var t=os(),e=Qe.identifierPrefix;if(Re){var s=ks,n=js;s=(n&~(1<<32-es(n)-1)).toString(32)+s,e=":"+e+"R"+s,s=Wi++,0<s&&(e+="H"+s.toString(32)),e+=":"}else s=Sv++,e=":"+e+"r"+s.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Av={readContext:Ut,useCallback:gg,useContext:Ut,useEffect:ou,useImperativeHandle:pg,useInsertionEffect:hg,useLayoutEffect:fg,useMemo:xg,useReducer:Fl,useRef:ug,useState:function(){return Fl(Hi)},useDebugValue:lu,useDeferredValue:function(t){var e=Wt();return yg(e,qe.memoizedState,t)},useTransition:function(){var t=Fl(Hi)[0],e=Wt().memoizedState;return[t,e]},useMutableSource:rg,useSyncExternalStore:ig,useId:vg,unstable_isNewReconciler:!1},Ov={readContext:Ut,useCallback:gg,useContext:Ut,useEffect:ou,useImperativeHandle:pg,useInsertionEffect:hg,useLayoutEffect:fg,useMemo:xg,useReducer:Ul,useRef:ug,useState:function(){return Ul(Hi)},useDebugValue:lu,useDeferredValue:function(t){var e=Wt();return qe===null?e.memoizedState=t:yg(e,qe.memoizedState,t)},useTransition:function(){var t=Ul(Hi)[0],e=Wt().memoizedState;return[t,e]},useMutableSource:rg,useSyncExternalStore:ig,useId:vg,unstable_isNewReconciler:!1};function Gt(t,e){if(t&&t.defaultProps){e=Be({},e),t=t.defaultProps;for(var s in t)e[s]===void 0&&(e[s]=t[s]);return e}return e}function Wc(t,e,s,n){e=t.memoizedState,s=s(n,e),s=s==null?e:Be({},e,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var Zo={isMounted:function(t){return(t=t._reactInternals)?Vn(t)===t:!1},enqueueSetState:function(t,e,s){t=t._reactInternals;var n=ut(),r=en(t),i=Cs(n,r);i.payload=e,s!=null&&(i.callback=s),e=Xs(t,i,r),e!==null&&(ts(e,t,r,n),Ya(e,t,r))},enqueueReplaceState:function(t,e,s){t=t._reactInternals;var n=ut(),r=en(t),i=Cs(n,r);i.tag=1,i.payload=e,s!=null&&(i.callback=s),e=Xs(t,i,r),e!==null&&(ts(e,t,r,n),Ya(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var s=ut(),n=en(t),r=Cs(s,n);r.tag=2,e!=null&&(r.callback=e),e=Xs(t,r,n),e!==null&&(ts(e,t,n,s),Ya(e,t,n))}};function Th(t,e,s,n,r,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,o):e.prototype&&e.prototype.isPureReactComponent?!Bi(s,n)||!Bi(r,i):!0}function jg(t,e,s){var n=!1,r=an,i=e.contextType;return typeof i=="object"&&i!==null?i=Ut(i):(r=_t(e)?Dn:at.current,n=e.contextTypes,i=(n=n!=null)?Nr(t,r):an),e=new e(s,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Zo,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=i),e}function Ah(t,e,s,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(s,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(s,n),e.state!==t&&Zo.enqueueReplaceState(e,e.state,null)}function Hc(t,e,s,n){var r=t.stateNode;r.props=s,r.state=t.memoizedState,r.refs={},eu(t);var i=e.contextType;typeof i=="object"&&i!==null?r.context=Ut(i):(i=_t(e)?Dn:at.current,r.context=Nr(t,i)),r.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Wc(t,e,i,s),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Zo.enqueueReplaceState(r,r.state,null),_o(t,s,r,n),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Er(t,e){try{var s="",n=e;do s+=ay(n),n=n.return;while(n);var r=s}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:r,digest:null}}function Wl(t,e,s){return{value:t,source:null,stack:s??null,digest:e??null}}function Vc(t,e){try{console.error(e.value)}catch(s){setTimeout(function(){throw s})}}var Rv=typeof WeakMap=="function"?WeakMap:Map;function kg(t,e,s){s=Cs(-1,s),s.tag=3,s.payload={element:null};var n=e.value;return s.callback=function(){Co||(Co=!0,td=n),Vc(t,e)},s}function Ng(t,e,s){s=Cs(-1,s),s.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var r=e.value;s.payload=function(){return n(r)},s.callback=function(){Vc(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(s.callback=function(){Vc(t,e),typeof n!="function"&&(Zs===null?Zs=new Set([this]):Zs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),s}function Oh(t,e,s){var n=t.pingCache;if(n===null){n=t.pingCache=new Rv;var r=new Set;n.set(e,r)}else r=n.get(e),r===void 0&&(r=new Set,n.set(e,r));r.has(s)||(r.add(s),t=Kv.bind(null,t,e,s),e.then(t,t))}function Rh(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Mh(t,e,s,n,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(e=Cs(-1,1),e.tag=2,Xs(s,e,1))),s.lanes|=1),t)}var Mv=Os.ReactCurrentOwner,bt=!1;function dt(t,e,s,n){e.child=t===null?eg(e,null,s,n):Cr(e,t.child,s,n)}function Lh(t,e,s,n,r){s=s.render;var i=e.ref;return br(e,r),n=iu(t,e,s,n,i,r),s=au(),t!==null&&!bt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,As(t,e,r)):(Re&&s&&Kd(e),e.flags|=1,dt(t,e,n,r),e.child)}function Dh(t,e,s,n,r){if(t===null){var i=s.type;return typeof i=="function"&&!gu(i)&&i.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(e.tag=15,e.type=i,Sg(t,e,i,n,r)):(t=eo(s.type,null,n,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&r)){var o=i.memoizedProps;if(s=s.compare,s=s!==null?s:Bi,s(o,n)&&t.ref===e.ref)return As(t,e,r)}return e.flags|=1,t=tn(i,n),t.ref=e.ref,t.return=e,e.child=t}function Sg(t,e,s,n,r){if(t!==null){var i=t.memoizedProps;if(Bi(i,n)&&t.ref===e.ref)if(bt=!1,e.pendingProps=n=i,(t.lanes&r)!==0)t.flags&131072&&(bt=!0);else return e.lanes=t.lanes,As(t,e,r)}return qc(t,e,s,n,r)}function Cg(t,e,s){var n=e.pendingProps,r=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ee(mr,Nt),Nt|=s;else{if(!(s&1073741824))return t=i!==null?i.baseLanes|s:s,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ee(mr,Nt),Nt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:s,Ee(mr,Nt),Nt|=n}else i!==null?(n=i.baseLanes|s,e.memoizedState=null):n=s,Ee(mr,Nt),Nt|=n;return dt(t,e,r,s),e.child}function Pg(t,e){var s=e.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(e.flags|=512,e.flags|=2097152)}function qc(t,e,s,n,r){var i=_t(s)?Dn:at.current;return i=Nr(e,i),br(e,r),s=iu(t,e,s,n,i,r),n=au(),t!==null&&!bt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,As(t,e,r)):(Re&&n&&Kd(e),e.flags|=1,dt(t,e,s,r),e.child)}function Bh(t,e,s,n,r){if(_t(s)){var i=!0;xo(e)}else i=!1;if(br(e,r),e.stateNode===null)Ja(t,e),jg(e,s,n),Hc(e,s,n,r),n=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,d=s.contextType;typeof d=="object"&&d!==null?d=Ut(d):(d=_t(s)?Dn:at.current,d=Nr(e,d));var u=s.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==d)&&Ah(e,o,n,d),zs=!1;var f=e.memoizedState;o.state=f,_o(e,n,o,r),c=e.memoizedState,l!==n||f!==c||wt.current||zs?(typeof u=="function"&&(Wc(e,s,u,n),c=e.memoizedState),(l=zs||Th(e,s,l,n,f,c,d))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),o.props=n,o.state=c,o.context=d,n=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,sg(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:Gt(e.type,l),o.props=d,h=e.pendingProps,f=o.context,c=s.contextType,typeof c=="object"&&c!==null?c=Ut(c):(c=_t(s)?Dn:at.current,c=Nr(e,c));var m=s.getDerivedStateFromProps;(u=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==c)&&Ah(e,o,n,c),zs=!1,f=e.memoizedState,o.state=f,_o(e,n,o,r);var p=e.memoizedState;l!==h||f!==p||wt.current||zs?(typeof m=="function"&&(Wc(e,s,m,n),p=e.memoizedState),(d=zs||Th(e,s,d,n,f,p,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,p,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=p),o.props=n,o.state=p,o.context=c,n=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return Kc(t,e,s,n,i,r)}function Kc(t,e,s,n,r,i){Pg(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return r&&_h(e,s,!1),As(t,e,i);n=e.stateNode,Mv.current=e;var l=o&&typeof s.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=Cr(e,t.child,null,i),e.child=Cr(e,null,l,i)):dt(t,e,l,i),e.memoizedState=n.state,r&&_h(e,s,!0),e.child}function Eg(t){var e=t.stateNode;e.pendingContext?wh(t,e.pendingContext,e.pendingContext!==e.context):e.context&&wh(t,e.context,!1),tu(t,e.containerInfo)}function Ih(t,e,s,n,r){return Sr(),Gd(r),e.flags|=256,dt(t,e,s,n),e.child}var Yc={dehydrated:null,treeContext:null,retryLane:0};function Gc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Tg(t,e,s){var n=e.pendingProps,r=Le.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(r&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Ee(Le,r&1),t===null)return Fc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,i?(n=e.mode,i=e.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=sl(o,n,0,null),t=Rn(t,n,s,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Gc(s),e.memoizedState=Yc,t):cu(e,o));if(r=t.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return Lv(t,e,o,n,l,r,s);if(i){i=n.fallback,o=e.mode,r=t.child,l=r.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&e.child!==r?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=tn(r,c),n.subtreeFlags=r.subtreeFlags&14680064),l!==null?i=tn(l,i):(i=Rn(i,o,s,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,o=t.child.memoizedState,o=o===null?Gc(s):{baseLanes:o.baseLanes|s,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~s,e.memoizedState=Yc,n}return i=t.child,t=i.sibling,n=tn(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=s),n.return=e,n.sibling=null,t!==null&&(s=e.deletions,s===null?(e.deletions=[t],e.flags|=16):s.push(t)),e.child=n,e.memoizedState=null,n}function cu(t,e){return e=sl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function _a(t,e,s,n){return n!==null&&Gd(n),Cr(e,t.child,null,s),t=cu(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Lv(t,e,s,n,r,i,o){if(s)return e.flags&256?(e.flags&=-257,n=Wl(Error(W(422))),_a(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,r=e.mode,n=sl({mode:"visible",children:n.children},r,0,null),i=Rn(i,r,o,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&Cr(e,t.child,null,o),e.child.memoizedState=Gc(o),e.memoizedState=Yc,i);if(!(e.mode&1))return _a(t,e,o,null);if(r.data==="$!"){if(n=r.nextSibling&&r.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(W(419)),n=Wl(i,n,void 0),_a(t,e,o,n)}if(l=(o&t.childLanes)!==0,bt||l){if(n=Qe,n!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(n.suspendedLanes|o)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,Ts(t,r),ts(n,t,r,-1))}return pu(),n=Wl(Error(W(421))),_a(t,e,o,n)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=Yv.bind(null,t),r._reactRetry=e,null):(t=i.treeContext,Ct=Js(r.nextSibling),Tt=e,Re=!0,Xt=null,t!==null&&(Bt[It++]=js,Bt[It++]=ks,Bt[It++]=Bn,js=t.id,ks=t.overflow,Bn=e),e=cu(e,n.children),e.flags|=4096,e)}function zh(t,e,s){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Uc(t.return,e,s)}function Hl(t,e,s,n,r){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:s,tailMode:r}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=s,i.tailMode=r)}function Ag(t,e,s){var n=e.pendingProps,r=n.revealOrder,i=n.tail;if(dt(t,e,n.children,s),n=Le.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&zh(t,s,e);else if(t.tag===19)zh(t,s,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Ee(Le,n),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(s=e.child,r=null;s!==null;)t=s.alternate,t!==null&&jo(t)===null&&(r=s),s=s.sibling;s=r,s===null?(r=e.child,e.child=null):(r=s.sibling,s.sibling=null),Hl(e,!1,r,s,i);break;case"backwards":for(s=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&jo(t)===null){e.child=r;break}t=r.sibling,r.sibling=s,s=r,r=t}Hl(e,!0,s,null,i);break;case"together":Hl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ja(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function As(t,e,s){if(t!==null&&(e.dependencies=t.dependencies),zn|=e.lanes,!(s&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(W(153));if(e.child!==null){for(t=e.child,s=tn(t,t.pendingProps),e.child=s,s.return=e;t.sibling!==null;)t=t.sibling,s=s.sibling=tn(t,t.pendingProps),s.return=e;s.sibling=null}return e.child}function Dv(t,e,s){switch(e.tag){case 3:Eg(e),Sr();break;case 5:ng(e);break;case 1:_t(e.type)&&xo(e);break;case 4:tu(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,r=e.memoizedProps.value;Ee(bo,n._currentValue),n._currentValue=r;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Ee(Le,Le.current&1),e.flags|=128,null):s&e.child.childLanes?Tg(t,e,s):(Ee(Le,Le.current&1),t=As(t,e,s),t!==null?t.sibling:null);Ee(Le,Le.current&1);break;case 19:if(n=(s&e.childLanes)!==0,t.flags&128){if(n)return Ag(t,e,s);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Ee(Le,Le.current),n)break;return null;case 22:case 23:return e.lanes=0,Cg(t,e,s)}return As(t,e,s)}var Og,Qc,Rg,Mg;Og=function(t,e){for(var s=e.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Qc=function(){};Rg=function(t,e,s,n){var r=t.memoizedProps;if(r!==n){t=e.stateNode,Tn(us.current);var i=null;switch(s){case"input":r=yc(t,r),n=yc(t,n),i=[];break;case"select":r=Be({},r,{value:void 0}),n=Be({},n,{value:void 0}),i=[];break;case"textarea":r=wc(t,r),n=wc(t,n),i=[];break;default:typeof r.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=po)}jc(s,n);var o;s=null;for(d in r)if(!n.hasOwnProperty(d)&&r.hasOwnProperty(d)&&r[d]!=null)if(d==="style"){var l=r[d];for(o in l)l.hasOwnProperty(o)&&(s||(s={}),s[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Ti.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(l=r!=null?r[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(s||(s={}),s[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(s||(s={}),s[o]=c[o])}else s||(i||(i=[]),i.push(d,s)),s=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Ti.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Te("scroll",t),i||l===c||(i=[])):(i=i||[]).push(d,c))}s&&(i=i||[]).push("style",s);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};Mg=function(t,e,s,n){s!==n&&(e.flags|=4)};function Yr(t,e){if(!Re)switch(t.tailMode){case"hidden":e=t.tail;for(var s=null;e!==null;)e.alternate!==null&&(s=e),e=e.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function nt(t){var e=t.alternate!==null&&t.alternate.child===t.child,s=0,n=0;if(e)for(var r=t.child;r!==null;)s|=r.lanes|r.childLanes,n|=r.subtreeFlags&14680064,n|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)s|=r.lanes|r.childLanes,n|=r.subtreeFlags,n|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=n,t.childLanes=s,e}function Bv(t,e,s){var n=e.pendingProps;switch(Yd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nt(e),null;case 1:return _t(e.type)&&go(),nt(e),null;case 3:return n=e.stateNode,Pr(),Oe(wt),Oe(at),nu(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(ba(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Xt!==null&&(rd(Xt),Xt=null))),Qc(t,e),nt(e),null;case 5:su(e);var r=Tn(Ui.current);if(s=e.type,t!==null&&e.stateNode!=null)Rg(t,e,s,n,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(W(166));return nt(e),null}if(t=Tn(us.current),ba(e)){n=e.stateNode,s=e.type;var i=e.memoizedProps;switch(n[cs]=e,n[$i]=i,t=(e.mode&1)!==0,s){case"dialog":Te("cancel",n),Te("close",n);break;case"iframe":case"object":case"embed":Te("load",n);break;case"video":case"audio":for(r=0;r<ai.length;r++)Te(ai[r],n);break;case"source":Te("error",n);break;case"img":case"image":case"link":Te("error",n),Te("load",n);break;case"details":Te("toggle",n);break;case"input":Yu(n,i),Te("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Te("invalid",n);break;case"textarea":Qu(n,i),Te("invalid",n)}jc(s,i),r=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&va(n.textContent,l,t),r=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&va(n.textContent,l,t),r=["children",""+l]):Ti.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Te("scroll",n)}switch(s){case"input":ua(n),Gu(n,i,!0);break;case"textarea":ua(n),Ju(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=po)}n=r,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=lp(s)),t==="http://www.w3.org/1999/xhtml"?s==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(s,{is:n.is}):(t=o.createElement(s),s==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,s),t[cs]=e,t[$i]=n,Og(t,e,!1,!1),e.stateNode=t;e:{switch(o=kc(s,n),s){case"dialog":Te("cancel",t),Te("close",t),r=n;break;case"iframe":case"object":case"embed":Te("load",t),r=n;break;case"video":case"audio":for(r=0;r<ai.length;r++)Te(ai[r],t);r=n;break;case"source":Te("error",t),r=n;break;case"img":case"image":case"link":Te("error",t),Te("load",t),r=n;break;case"details":Te("toggle",t),r=n;break;case"input":Yu(t,n),r=yc(t,n),Te("invalid",t);break;case"option":r=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},r=Be({},n,{value:void 0}),Te("invalid",t);break;case"textarea":Qu(t,n),r=wc(t,n),Te("invalid",t);break;default:r=n}jc(s,r),l=r;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?up(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&cp(t,c)):i==="children"?typeof c=="string"?(s!=="textarea"||c!=="")&&Ai(t,c):typeof c=="number"&&Ai(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ti.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Te("scroll",t):c!=null&&Rd(t,i,c,o))}switch(s){case"input":ua(t),Gu(t,n,!1);break;case"textarea":ua(t),Ju(t);break;case"option":n.value!=null&&t.setAttribute("value",""+rn(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?gr(t,!!n.multiple,i,!1):n.defaultValue!=null&&gr(t,!!n.multiple,n.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=po)}switch(s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return nt(e),null;case 6:if(t&&e.stateNode!=null)Mg(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(W(166));if(s=Tn(Ui.current),Tn(us.current),ba(e)){if(n=e.stateNode,s=e.memoizedProps,n[cs]=e,(i=n.nodeValue!==s)&&(t=Tt,t!==null))switch(t.tag){case 3:va(n.nodeValue,s,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&va(n.nodeValue,s,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(s.nodeType===9?s:s.ownerDocument).createTextNode(n),n[cs]=e,e.stateNode=n}return nt(e),null;case 13:if(Oe(Le),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Re&&Ct!==null&&e.mode&1&&!(e.flags&128))Xp(),Sr(),e.flags|=98560,i=!1;else if(i=ba(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(W(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(W(317));i[cs]=e}else Sr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;nt(e),i=!1}else Xt!==null&&(rd(Xt),Xt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=s,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Le.current&1?Ke===0&&(Ke=3):pu())),e.updateQueue!==null&&(e.flags|=4),nt(e),null);case 4:return Pr(),Qc(t,e),t===null&&Ii(e.stateNode.containerInfo),nt(e),null;case 10:return Xd(e.type._context),nt(e),null;case 17:return _t(e.type)&&go(),nt(e),null;case 19:if(Oe(Le),i=e.memoizedState,i===null)return nt(e),null;if(n=(e.flags&128)!==0,o=i.rendering,o===null)if(n)Yr(i,!1);else{if(Ke!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=jo(t),o!==null){for(e.flags|=128,Yr(i,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=s,s=e.child;s!==null;)i=s,t=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s=s.sibling;return Ee(Le,Le.current&1|2),e.child}t=t.sibling}i.tail!==null&&Fe()>Tr&&(e.flags|=128,n=!0,Yr(i,!1),e.lanes=4194304)}else{if(!n)if(t=jo(o),t!==null){if(e.flags|=128,n=!0,s=t.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),Yr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Re)return nt(e),null}else 2*Fe()-i.renderingStartTime>Tr&&s!==1073741824&&(e.flags|=128,n=!0,Yr(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(s=i.last,s!==null?s.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Fe(),e.sibling=null,s=Le.current,Ee(Le,n?s&1|2:s&1),e):(nt(e),null);case 22:case 23:return mu(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Nt&1073741824&&(nt(e),e.subtreeFlags&6&&(e.flags|=8192)):nt(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function Iv(t,e){switch(Yd(e),e.tag){case 1:return _t(e.type)&&go(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Pr(),Oe(wt),Oe(at),nu(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return su(e),null;case 13:if(Oe(Le),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(W(340));Sr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Oe(Le),null;case 4:return Pr(),null;case 10:return Xd(e.type._context),null;case 22:case 23:return mu(),null;case 24:return null;default:return null}}var ja=!1,it=!1,zv=typeof WeakSet=="function"?WeakSet:Set,se=null;function fr(t,e){var s=t.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(n){Ie(t,e,n)}else s.current=null}function Jc(t,e,s){try{s()}catch(n){Ie(t,e,n)}}var $h=!1;function $v(t,e){if(Mc=ho,t=zp(),qd(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var n=s.getSelection&&s.getSelection();if(n&&n.rangeCount!==0){s=n.anchorNode;var r=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{s.nodeType,i.nodeType}catch{s=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=t,f=null;t:for(;;){for(var m;h!==s||r!==0&&h.nodeType!==3||(l=o+r),h!==i||n!==0&&h.nodeType!==3||(c=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===t)break t;if(f===s&&++d===r&&(l=o),f===i&&++u===n&&(c=o),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}s=l===-1||c===-1?null:{start:l,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(Lc={focusedElem:t,selectionRange:s},ho=!1,se=e;se!==null;)if(e=se,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,se=t;else for(;se!==null;){e=se;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var v=p.memoizedProps,b=p.memoizedState,x=e.stateNode,g=x.getSnapshotBeforeUpdate(e.elementType===e.type?v:Gt(e.type,v),b);x.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(w){Ie(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,se=t;break}se=e.return}return p=$h,$h=!1,p}function vi(t,e,s){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var r=n=n.next;do{if((r.tag&t)===t){var i=r.destroy;r.destroy=void 0,i!==void 0&&Jc(e,s,i)}r=r.next}while(r!==n)}}function el(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var s=e=e.next;do{if((s.tag&t)===t){var n=s.create;s.destroy=n()}s=s.next}while(s!==e)}}function Xc(t){var e=t.ref;if(e!==null){var s=t.stateNode;switch(t.tag){case 5:t=s;break;default:t=s}typeof e=="function"?e(t):e.current=t}}function Lg(t){var e=t.alternate;e!==null&&(t.alternate=null,Lg(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[cs],delete e[$i],delete e[Ic],delete e[_v],delete e[jv])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Dg(t){return t.tag===5||t.tag===3||t.tag===4}function Fh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Dg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Zc(t,e,s){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?s.nodeType===8?s.parentNode.insertBefore(t,e):s.insertBefore(t,e):(s.nodeType===8?(e=s.parentNode,e.insertBefore(t,s)):(e=s,e.appendChild(t)),s=s._reactRootContainer,s!=null||e.onclick!==null||(e.onclick=po));else if(n!==4&&(t=t.child,t!==null))for(Zc(t,e,s),t=t.sibling;t!==null;)Zc(t,e,s),t=t.sibling}function ed(t,e,s){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?s.insertBefore(t,e):s.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(ed(t,e,s),t=t.sibling;t!==null;)ed(t,e,s),t=t.sibling}var Xe=null,Qt=!1;function Ms(t,e,s){for(s=s.child;s!==null;)Bg(t,e,s),s=s.sibling}function Bg(t,e,s){if(ds&&typeof ds.onCommitFiberUnmount=="function")try{ds.onCommitFiberUnmount(qo,s)}catch{}switch(s.tag){case 5:it||fr(s,e);case 6:var n=Xe,r=Qt;Xe=null,Ms(t,e,s),Xe=n,Qt=r,Xe!==null&&(Qt?(t=Xe,s=s.stateNode,t.nodeType===8?t.parentNode.removeChild(s):t.removeChild(s)):Xe.removeChild(s.stateNode));break;case 18:Xe!==null&&(Qt?(t=Xe,s=s.stateNode,t.nodeType===8?Bl(t.parentNode,s):t.nodeType===1&&Bl(t,s),Li(t)):Bl(Xe,s.stateNode));break;case 4:n=Xe,r=Qt,Xe=s.stateNode.containerInfo,Qt=!0,Ms(t,e,s),Xe=n,Qt=r;break;case 0:case 11:case 14:case 15:if(!it&&(n=s.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){r=n=n.next;do{var i=r,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Jc(s,e,o),r=r.next}while(r!==n)}Ms(t,e,s);break;case 1:if(!it&&(fr(s,e),n=s.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=s.memoizedProps,n.state=s.memoizedState,n.componentWillUnmount()}catch(l){Ie(s,e,l)}Ms(t,e,s);break;case 21:Ms(t,e,s);break;case 22:s.mode&1?(it=(n=it)||s.memoizedState!==null,Ms(t,e,s),it=n):Ms(t,e,s);break;default:Ms(t,e,s)}}function Uh(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new zv),e.forEach(function(n){var r=Gv.bind(null,t,n);s.has(n)||(s.add(n),n.then(r,r))})}}function Kt(t,e){var s=e.deletions;if(s!==null)for(var n=0;n<s.length;n++){var r=s[n];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Xe=l.stateNode,Qt=!1;break e;case 3:Xe=l.stateNode.containerInfo,Qt=!0;break e;case 4:Xe=l.stateNode.containerInfo,Qt=!0;break e}l=l.return}if(Xe===null)throw Error(W(160));Bg(i,o,r),Xe=null,Qt=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(d){Ie(r,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Ig(e,t),e=e.sibling}function Ig(t,e){var s=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Kt(e,t),rs(t),n&4){try{vi(3,t,t.return),el(3,t)}catch(v){Ie(t,t.return,v)}try{vi(5,t,t.return)}catch(v){Ie(t,t.return,v)}}break;case 1:Kt(e,t),rs(t),n&512&&s!==null&&fr(s,s.return);break;case 5:if(Kt(e,t),rs(t),n&512&&s!==null&&fr(s,s.return),t.flags&32){var r=t.stateNode;try{Ai(r,"")}catch(v){Ie(t,t.return,v)}}if(n&4&&(r=t.stateNode,r!=null)){var i=t.memoizedProps,o=s!==null?s.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&ap(r,i),kc(l,o);var d=kc(l,i);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];u==="style"?up(r,h):u==="dangerouslySetInnerHTML"?cp(r,h):u==="children"?Ai(r,h):Rd(r,u,h,d)}switch(l){case"input":vc(r,i);break;case"textarea":op(r,i);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?gr(r,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?gr(r,!!i.multiple,i.defaultValue,!0):gr(r,!!i.multiple,i.multiple?[]:"",!1))}r[$i]=i}catch(v){Ie(t,t.return,v)}}break;case 6:if(Kt(e,t),rs(t),n&4){if(t.stateNode===null)throw Error(W(162));r=t.stateNode,i=t.memoizedProps;try{r.nodeValue=i}catch(v){Ie(t,t.return,v)}}break;case 3:if(Kt(e,t),rs(t),n&4&&s!==null&&s.memoizedState.isDehydrated)try{Li(e.containerInfo)}catch(v){Ie(t,t.return,v)}break;case 4:Kt(e,t),rs(t);break;case 13:Kt(e,t),rs(t),r=t.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(hu=Fe())),n&4&&Uh(t);break;case 22:if(u=s!==null&&s.memoizedState!==null,t.mode&1?(it=(d=it)||u,Kt(e,t),it=d):Kt(e,t),rs(t),n&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!u&&t.mode&1)for(se=t,u=t.child;u!==null;){for(h=se=u;se!==null;){switch(f=se,m=f.child,f.tag){case 0:case 11:case 14:case 15:vi(4,f,f.return);break;case 1:fr(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){n=f,s=f.return;try{e=n,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(v){Ie(n,s,v)}}break;case 5:fr(f,f.return);break;case 22:if(f.memoizedState!==null){Hh(h);continue}}m!==null?(m.return=f,se=m):Hh(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{r=h.stateNode,d?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=dp("display",o))}catch(v){Ie(t,t.return,v)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(v){Ie(t,t.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Kt(e,t),rs(t),n&4&&Uh(t);break;case 21:break;default:Kt(e,t),rs(t)}}function rs(t){var e=t.flags;if(e&2){try{e:{for(var s=t.return;s!==null;){if(Dg(s)){var n=s;break e}s=s.return}throw Error(W(160))}switch(n.tag){case 5:var r=n.stateNode;n.flags&32&&(Ai(r,""),n.flags&=-33);var i=Fh(t);ed(t,i,r);break;case 3:case 4:var o=n.stateNode.containerInfo,l=Fh(t);Zc(t,l,o);break;default:throw Error(W(161))}}catch(c){Ie(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Fv(t,e,s){se=t,zg(t)}function zg(t,e,s){for(var n=(t.mode&1)!==0;se!==null;){var r=se,i=r.child;if(r.tag===22&&n){var o=r.memoizedState!==null||ja;if(!o){var l=r.alternate,c=l!==null&&l.memoizedState!==null||it;l=ja;var d=it;if(ja=o,(it=c)&&!d)for(se=r;se!==null;)o=se,c=o.child,o.tag===22&&o.memoizedState!==null?Vh(r):c!==null?(c.return=o,se=c):Vh(r);for(;i!==null;)se=i,zg(i),i=i.sibling;se=r,ja=l,it=d}Wh(t)}else r.subtreeFlags&8772&&i!==null?(i.return=r,se=i):Wh(t)}}function Wh(t){for(;se!==null;){var e=se;if(e.flags&8772){var s=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:it||el(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!it)if(s===null)n.componentDidMount();else{var r=e.elementType===e.type?s.memoizedProps:Gt(e.type,s.memoizedProps);n.componentDidUpdate(r,s.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Ch(e,i,n);break;case 3:var o=e.updateQueue;if(o!==null){if(s=null,e.child!==null)switch(e.child.tag){case 5:s=e.child.stateNode;break;case 1:s=e.child.stateNode}Ch(e,o,s)}break;case 5:var l=e.stateNode;if(s===null&&e.flags&4){s=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Li(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}it||e.flags&512&&Xc(e)}catch(f){Ie(e,e.return,f)}}if(e===t){se=null;break}if(s=e.sibling,s!==null){s.return=e.return,se=s;break}se=e.return}}function Hh(t){for(;se!==null;){var e=se;if(e===t){se=null;break}var s=e.sibling;if(s!==null){s.return=e.return,se=s;break}se=e.return}}function Vh(t){for(;se!==null;){var e=se;try{switch(e.tag){case 0:case 11:case 15:var s=e.return;try{el(4,e)}catch(c){Ie(e,s,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var r=e.return;try{n.componentDidMount()}catch(c){Ie(e,r,c)}}var i=e.return;try{Xc(e)}catch(c){Ie(e,i,c)}break;case 5:var o=e.return;try{Xc(e)}catch(c){Ie(e,o,c)}}}catch(c){Ie(e,e.return,c)}if(e===t){se=null;break}var l=e.sibling;if(l!==null){l.return=e.return,se=l;break}se=e.return}}var Uv=Math.ceil,So=Os.ReactCurrentDispatcher,du=Os.ReactCurrentOwner,$t=Os.ReactCurrentBatchConfig,be=0,Qe=null,Ve=null,et=0,Nt=0,mr=un(0),Ke=0,qi=null,zn=0,tl=0,uu=0,bi=null,xt=null,hu=0,Tr=1/0,ys=null,Co=!1,td=null,Zs=null,ka=!1,Hs=null,Po=0,wi=0,sd=null,Xa=-1,Za=0;function ut(){return be&6?Fe():Xa!==-1?Xa:Xa=Fe()}function en(t){return t.mode&1?be&2&&et!==0?et&-et:Nv.transition!==null?(Za===0&&(Za=jp()),Za):(t=je,t!==0||(t=window.event,t=t===void 0?16:Tp(t.type)),t):1}function ts(t,e,s,n){if(50<wi)throw wi=0,sd=null,Error(W(185));Zi(t,s,n),(!(be&2)||t!==Qe)&&(t===Qe&&(!(be&2)&&(tl|=s),Ke===4&&Fs(t,et)),jt(t,n),s===1&&be===0&&!(e.mode&1)&&(Tr=Fe()+500,Jo&&hn()))}function jt(t,e){var s=t.callbackNode;Ny(t,e);var n=uo(t,t===Qe?et:0);if(n===0)s!==null&&eh(s),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(s!=null&&eh(s),e===1)t.tag===0?kv(qh.bind(null,t)):Gp(qh.bind(null,t)),bv(function(){!(be&6)&&hn()}),s=null;else{switch(kp(n)){case 1:s=Id;break;case 4:s=wp;break;case 16:s=co;break;case 536870912:s=_p;break;default:s=co}s=Kg(s,$g.bind(null,t))}t.callbackPriority=e,t.callbackNode=s}}function $g(t,e){if(Xa=-1,Za=0,be&6)throw Error(W(327));var s=t.callbackNode;if(wr()&&t.callbackNode!==s)return null;var n=uo(t,t===Qe?et:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Eo(t,n);else{e=n;var r=be;be|=2;var i=Ug();(Qe!==t||et!==e)&&(ys=null,Tr=Fe()+500,On(t,e));do try{Vv();break}catch(l){Fg(t,l)}while(!0);Jd(),So.current=i,be=r,Ve!==null?e=0:(Qe=null,et=0,e=Ke)}if(e!==0){if(e===2&&(r=Ec(t),r!==0&&(n=r,e=nd(t,r))),e===1)throw s=qi,On(t,0),Fs(t,n),jt(t,Fe()),s;if(e===6)Fs(t,n);else{if(r=t.current.alternate,!(n&30)&&!Wv(r)&&(e=Eo(t,n),e===2&&(i=Ec(t),i!==0&&(n=i,e=nd(t,i))),e===1))throw s=qi,On(t,0),Fs(t,n),jt(t,Fe()),s;switch(t.finishedWork=r,t.finishedLanes=n,e){case 0:case 1:throw Error(W(345));case 2:jn(t,xt,ys);break;case 3:if(Fs(t,n),(n&130023424)===n&&(e=hu+500-Fe(),10<e)){if(uo(t,0)!==0)break;if(r=t.suspendedLanes,(r&n)!==n){ut(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Bc(jn.bind(null,t,xt,ys),e);break}jn(t,xt,ys);break;case 4:if(Fs(t,n),(n&4194240)===n)break;for(e=t.eventTimes,r=-1;0<n;){var o=31-es(n);i=1<<o,o=e[o],o>r&&(r=o),n&=~i}if(n=r,n=Fe()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Uv(n/1960))-n,10<n){t.timeoutHandle=Bc(jn.bind(null,t,xt,ys),n);break}jn(t,xt,ys);break;case 5:jn(t,xt,ys);break;default:throw Error(W(329))}}}return jt(t,Fe()),t.callbackNode===s?$g.bind(null,t):null}function nd(t,e){var s=bi;return t.current.memoizedState.isDehydrated&&(On(t,e).flags|=256),t=Eo(t,e),t!==2&&(e=xt,xt=s,e!==null&&rd(e)),t}function rd(t){xt===null?xt=t:xt.push.apply(xt,t)}function Wv(t){for(var e=t;;){if(e.flags&16384){var s=e.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var n=0;n<s.length;n++){var r=s[n],i=r.getSnapshot;r=r.value;try{if(!ss(i(),r))return!1}catch{return!1}}}if(s=e.child,e.subtreeFlags&16384&&s!==null)s.return=e,e=s;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Fs(t,e){for(e&=~uu,e&=~tl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var s=31-es(e),n=1<<s;t[s]=-1,e&=~n}}function qh(t){if(be&6)throw Error(W(327));wr();var e=uo(t,0);if(!(e&1))return jt(t,Fe()),null;var s=Eo(t,e);if(t.tag!==0&&s===2){var n=Ec(t);n!==0&&(e=n,s=nd(t,n))}if(s===1)throw s=qi,On(t,0),Fs(t,e),jt(t,Fe()),s;if(s===6)throw Error(W(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,jn(t,xt,ys),jt(t,Fe()),null}function fu(t,e){var s=be;be|=1;try{return t(e)}finally{be=s,be===0&&(Tr=Fe()+500,Jo&&hn())}}function $n(t){Hs!==null&&Hs.tag===0&&!(be&6)&&wr();var e=be;be|=1;var s=$t.transition,n=je;try{if($t.transition=null,je=1,t)return t()}finally{je=n,$t.transition=s,be=e,!(be&6)&&hn()}}function mu(){Nt=mr.current,Oe(mr)}function On(t,e){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==-1&&(t.timeoutHandle=-1,vv(s)),Ve!==null)for(s=Ve.return;s!==null;){var n=s;switch(Yd(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&go();break;case 3:Pr(),Oe(wt),Oe(at),nu();break;case 5:su(n);break;case 4:Pr();break;case 13:Oe(Le);break;case 19:Oe(Le);break;case 10:Xd(n.type._context);break;case 22:case 23:mu()}s=s.return}if(Qe=t,Ve=t=tn(t.current,null),et=Nt=e,Ke=0,qi=null,uu=tl=zn=0,xt=bi=null,En!==null){for(e=0;e<En.length;e++)if(s=En[e],n=s.interleaved,n!==null){s.interleaved=null;var r=n.next,i=s.pending;if(i!==null){var o=i.next;i.next=r,n.next=o}s.pending=n}En=null}return t}function Fg(t,e){do{var s=Ve;try{if(Jd(),Ga.current=No,ko){for(var n=De.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}ko=!1}if(In=0,Ge=qe=De=null,yi=!1,Wi=0,du.current=null,s===null||s.return===null){Ke=1,qi=e,Ve=null;break}e:{var i=t,o=s.return,l=s,c=e;if(e=et,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=Rh(o);if(m!==null){m.flags&=-257,Mh(m,o,l,i,e),m.mode&1&&Oh(i,d,e),e=m,c=d;var p=e.updateQueue;if(p===null){var v=new Set;v.add(c),e.updateQueue=v}else p.add(c);break e}else{if(!(e&1)){Oh(i,d,e),pu();break e}c=Error(W(426))}}else if(Re&&l.mode&1){var b=Rh(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),Mh(b,o,l,i,e),Gd(Er(c,l));break e}}i=c=Er(c,l),Ke!==4&&(Ke=2),bi===null?bi=[i]:bi.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=kg(i,c,e);Sh(i,x);break e;case 1:l=c;var g=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Zs===null||!Zs.has(y)))){i.flags|=65536,e&=-e,i.lanes|=e;var w=Ng(i,l,e);Sh(i,w);break e}}i=i.return}while(i!==null)}Hg(s)}catch(_){e=_,Ve===s&&s!==null&&(Ve=s=s.return);continue}break}while(!0)}function Ug(){var t=So.current;return So.current=No,t===null?No:t}function pu(){(Ke===0||Ke===3||Ke===2)&&(Ke=4),Qe===null||!(zn&268435455)&&!(tl&268435455)||Fs(Qe,et)}function Eo(t,e){var s=be;be|=2;var n=Ug();(Qe!==t||et!==e)&&(ys=null,On(t,e));do try{Hv();break}catch(r){Fg(t,r)}while(!0);if(Jd(),be=s,So.current=n,Ve!==null)throw Error(W(261));return Qe=null,et=0,Ke}function Hv(){for(;Ve!==null;)Wg(Ve)}function Vv(){for(;Ve!==null&&!gy();)Wg(Ve)}function Wg(t){var e=qg(t.alternate,t,Nt);t.memoizedProps=t.pendingProps,e===null?Hg(t):Ve=e,du.current=null}function Hg(t){var e=t;do{var s=e.alternate;if(t=e.return,e.flags&32768){if(s=Iv(s,e),s!==null){s.flags&=32767,Ve=s;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ke=6,Ve=null;return}}else if(s=Bv(s,e,Nt),s!==null){Ve=s;return}if(e=e.sibling,e!==null){Ve=e;return}Ve=e=t}while(e!==null);Ke===0&&(Ke=5)}function jn(t,e,s){var n=je,r=$t.transition;try{$t.transition=null,je=1,qv(t,e,s,n)}finally{$t.transition=r,je=n}return null}function qv(t,e,s,n){do wr();while(Hs!==null);if(be&6)throw Error(W(327));s=t.finishedWork;var r=t.finishedLanes;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error(W(177));t.callbackNode=null,t.callbackPriority=0;var i=s.lanes|s.childLanes;if(Sy(t,i),t===Qe&&(Ve=Qe=null,et=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||ka||(ka=!0,Kg(co,function(){return wr(),null})),i=(s.flags&15990)!==0,s.subtreeFlags&15990||i){i=$t.transition,$t.transition=null;var o=je;je=1;var l=be;be|=4,du.current=null,$v(t,s),Ig(s,t),hv(Lc),ho=!!Mc,Lc=Mc=null,t.current=s,Fv(s),xy(),be=l,je=o,$t.transition=i}else t.current=s;if(ka&&(ka=!1,Hs=t,Po=r),i=t.pendingLanes,i===0&&(Zs=null),by(s.stateNode),jt(t,Fe()),e!==null)for(n=t.onRecoverableError,s=0;s<e.length;s++)r=e[s],n(r.value,{componentStack:r.stack,digest:r.digest});if(Co)throw Co=!1,t=td,td=null,t;return Po&1&&t.tag!==0&&wr(),i=t.pendingLanes,i&1?t===sd?wi++:(wi=0,sd=t):wi=0,hn(),null}function wr(){if(Hs!==null){var t=kp(Po),e=$t.transition,s=je;try{if($t.transition=null,je=16>t?16:t,Hs===null)var n=!1;else{if(t=Hs,Hs=null,Po=0,be&6)throw Error(W(331));var r=be;for(be|=4,se=t.current;se!==null;){var i=se,o=i.child;if(se.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(se=d;se!==null;){var u=se;switch(u.tag){case 0:case 11:case 15:vi(8,u,i)}var h=u.child;if(h!==null)h.return=u,se=h;else for(;se!==null;){u=se;var f=u.sibling,m=u.return;if(Lg(u),u===d){se=null;break}if(f!==null){f.return=m,se=f;break}se=m}}}var p=i.alternate;if(p!==null){var v=p.child;if(v!==null){p.child=null;do{var b=v.sibling;v.sibling=null,v=b}while(v!==null)}}se=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,se=o;else e:for(;se!==null;){if(i=se,i.flags&2048)switch(i.tag){case 0:case 11:case 15:vi(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,se=x;break e}se=i.return}}var g=t.current;for(se=g;se!==null;){o=se;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,se=y;else e:for(o=g;se!==null;){if(l=se,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:el(9,l)}}catch(_){Ie(l,l.return,_)}if(l===o){se=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,se=w;break e}se=l.return}}if(be=r,hn(),ds&&typeof ds.onPostCommitFiberRoot=="function")try{ds.onPostCommitFiberRoot(qo,t)}catch{}n=!0}return n}finally{je=s,$t.transition=e}}return!1}function Kh(t,e,s){e=Er(s,e),e=kg(t,e,1),t=Xs(t,e,1),e=ut(),t!==null&&(Zi(t,1,e),jt(t,e))}function Ie(t,e,s){if(t.tag===3)Kh(t,t,s);else for(;e!==null;){if(e.tag===3){Kh(e,t,s);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Zs===null||!Zs.has(n))){t=Er(s,t),t=Ng(e,t,1),e=Xs(e,t,1),t=ut(),e!==null&&(Zi(e,1,t),jt(e,t));break}}e=e.return}}function Kv(t,e,s){var n=t.pingCache;n!==null&&n.delete(e),e=ut(),t.pingedLanes|=t.suspendedLanes&s,Qe===t&&(et&s)===s&&(Ke===4||Ke===3&&(et&130023424)===et&&500>Fe()-hu?On(t,0):uu|=s),jt(t,e)}function Vg(t,e){e===0&&(t.mode&1?(e=ma,ma<<=1,!(ma&130023424)&&(ma=4194304)):e=1);var s=ut();t=Ts(t,e),t!==null&&(Zi(t,e,s),jt(t,s))}function Yv(t){var e=t.memoizedState,s=0;e!==null&&(s=e.retryLane),Vg(t,s)}function Gv(t,e){var s=0;switch(t.tag){case 13:var n=t.stateNode,r=t.memoizedState;r!==null&&(s=r.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(W(314))}n!==null&&n.delete(e),Vg(t,s)}var qg;qg=function(t,e,s){if(t!==null)if(t.memoizedProps!==e.pendingProps||wt.current)bt=!0;else{if(!(t.lanes&s)&&!(e.flags&128))return bt=!1,Dv(t,e,s);bt=!!(t.flags&131072)}else bt=!1,Re&&e.flags&1048576&&Qp(e,vo,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Ja(t,e),t=e.pendingProps;var r=Nr(e,at.current);br(e,s),r=iu(null,e,n,t,r,s);var i=au();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,_t(n)?(i=!0,xo(e)):i=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,eu(e),r.updater=Zo,e.stateNode=r,r._reactInternals=e,Hc(e,n,t,s),e=Kc(null,e,n,!0,i,s)):(e.tag=0,Re&&i&&Kd(e),dt(null,e,r,s),e=e.child),e;case 16:n=e.elementType;e:{switch(Ja(t,e),t=e.pendingProps,r=n._init,n=r(n._payload),e.type=n,r=e.tag=Jv(n),t=Gt(n,t),r){case 0:e=qc(null,e,n,t,s);break e;case 1:e=Bh(null,e,n,t,s);break e;case 11:e=Lh(null,e,n,t,s);break e;case 14:e=Dh(null,e,n,Gt(n.type,t),s);break e}throw Error(W(306,n,""))}return e;case 0:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:Gt(n,r),qc(t,e,n,r,s);case 1:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:Gt(n,r),Bh(t,e,n,r,s);case 3:e:{if(Eg(e),t===null)throw Error(W(387));n=e.pendingProps,i=e.memoizedState,r=i.element,sg(t,e),_o(e,n,null,s);var o=e.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){r=Er(Error(W(423)),e),e=Ih(t,e,n,s,r);break e}else if(n!==r){r=Er(Error(W(424)),e),e=Ih(t,e,n,s,r);break e}else for(Ct=Js(e.stateNode.containerInfo.firstChild),Tt=e,Re=!0,Xt=null,s=eg(e,null,n,s),e.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Sr(),n===r){e=As(t,e,s);break e}dt(t,e,n,s)}e=e.child}return e;case 5:return ng(e),t===null&&Fc(e),n=e.type,r=e.pendingProps,i=t!==null?t.memoizedProps:null,o=r.children,Dc(n,r)?o=null:i!==null&&Dc(n,i)&&(e.flags|=32),Pg(t,e),dt(t,e,o,s),e.child;case 6:return t===null&&Fc(e),null;case 13:return Tg(t,e,s);case 4:return tu(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Cr(e,null,n,s):dt(t,e,n,s),e.child;case 11:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:Gt(n,r),Lh(t,e,n,r,s);case 7:return dt(t,e,e.pendingProps,s),e.child;case 8:return dt(t,e,e.pendingProps.children,s),e.child;case 12:return dt(t,e,e.pendingProps.children,s),e.child;case 10:e:{if(n=e.type._context,r=e.pendingProps,i=e.memoizedProps,o=r.value,Ee(bo,n._currentValue),n._currentValue=o,i!==null)if(ss(i.value,o)){if(i.children===r.children&&!wt.current){e=As(t,e,s);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=Cs(-1,s&-s),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=s,c=i.alternate,c!==null&&(c.lanes|=s),Uc(i.return,s,e),l.lanes|=s;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(W(341));o.lanes|=s,l=o.alternate,l!==null&&(l.lanes|=s),Uc(o,s,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}dt(t,e,r.children,s),e=e.child}return e;case 9:return r=e.type,n=e.pendingProps.children,br(e,s),r=Ut(r),n=n(r),e.flags|=1,dt(t,e,n,s),e.child;case 14:return n=e.type,r=Gt(n,e.pendingProps),r=Gt(n.type,r),Dh(t,e,n,r,s);case 15:return Sg(t,e,e.type,e.pendingProps,s);case 17:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:Gt(n,r),Ja(t,e),e.tag=1,_t(n)?(t=!0,xo(e)):t=!1,br(e,s),jg(e,n,r),Hc(e,n,r,s),Kc(null,e,n,!0,t,s);case 19:return Ag(t,e,s);case 22:return Cg(t,e,s)}throw Error(W(156,e.tag))};function Kg(t,e){return bp(t,e)}function Qv(t,e,s,n){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zt(t,e,s,n){return new Qv(t,e,s,n)}function gu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Jv(t){if(typeof t=="function")return gu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ld)return 11;if(t===Dd)return 14}return 2}function tn(t,e){var s=t.alternate;return s===null?(s=zt(t.tag,e,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=e,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&14680064,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,e=t.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function eo(t,e,s,n,r,i){var o=2;if(n=t,typeof t=="function")gu(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case rr:return Rn(s.children,r,i,e);case Md:o=8,r|=8;break;case mc:return t=zt(12,s,e,r|2),t.elementType=mc,t.lanes=i,t;case pc:return t=zt(13,s,e,r),t.elementType=pc,t.lanes=i,t;case gc:return t=zt(19,s,e,r),t.elementType=gc,t.lanes=i,t;case np:return sl(s,r,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case tp:o=10;break e;case sp:o=9;break e;case Ld:o=11;break e;case Dd:o=14;break e;case Is:o=16,n=null;break e}throw Error(W(130,t==null?t:typeof t,""))}return e=zt(o,s,e,r),e.elementType=t,e.type=n,e.lanes=i,e}function Rn(t,e,s,n){return t=zt(7,t,n,e),t.lanes=s,t}function sl(t,e,s,n){return t=zt(22,t,n,e),t.elementType=np,t.lanes=s,t.stateNode={isHidden:!1},t}function Vl(t,e,s){return t=zt(6,t,null,e),t.lanes=s,t}function ql(t,e,s){return e=zt(4,t.children!==null?t.children:[],t.key,e),e.lanes=s,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Xv(t,e,s,n,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Sl(0),this.expirationTimes=Sl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sl(0),this.identifierPrefix=n,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function xu(t,e,s,n,r,i,o,l,c){return t=new Xv(t,e,s,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=zt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},eu(i),t}function Zv(t,e,s){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:nr,key:n==null?null:""+n,children:t,containerInfo:e,implementation:s}}function Yg(t){if(!t)return an;t=t._reactInternals;e:{if(Vn(t)!==t||t.tag!==1)throw Error(W(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(_t(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(t.tag===1){var s=t.type;if(_t(s))return Yp(t,s,e)}return e}function Gg(t,e,s,n,r,i,o,l,c){return t=xu(s,n,!0,t,r,i,o,l,c),t.context=Yg(null),s=t.current,n=ut(),r=en(s),i=Cs(n,r),i.callback=e??null,Xs(s,i,r),t.current.lanes=r,Zi(t,r,n),jt(t,n),t}function nl(t,e,s,n){var r=e.current,i=ut(),o=en(r);return s=Yg(s),e.context===null?e.context=s:e.pendingContext=s,e=Cs(i,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Xs(r,e,o),t!==null&&(ts(t,r,o,i),Ya(t,r,o)),o}function To(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Yh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<e?s:e}}function yu(t,e){Yh(t,e),(t=t.alternate)&&Yh(t,e)}function eb(){return null}var Qg=typeof reportError=="function"?reportError:function(t){console.error(t)};function vu(t){this._internalRoot=t}rl.prototype.render=vu.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(W(409));nl(t,e,null,null)};rl.prototype.unmount=vu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;$n(function(){nl(null,t,null,null)}),e[Es]=null}};function rl(t){this._internalRoot=t}rl.prototype.unstable_scheduleHydration=function(t){if(t){var e=Cp();t={blockedOn:null,target:t,priority:e};for(var s=0;s<$s.length&&e!==0&&e<$s[s].priority;s++);$s.splice(s,0,t),s===0&&Ep(t)}};function bu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function il(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Gh(){}function tb(t,e,s,n,r){if(r){if(typeof n=="function"){var i=n;n=function(){var d=To(o);i.call(d)}}var o=Gg(e,n,t,0,null,!1,!1,"",Gh);return t._reactRootContainer=o,t[Es]=o.current,Ii(t.nodeType===8?t.parentNode:t),$n(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof n=="function"){var l=n;n=function(){var d=To(c);l.call(d)}}var c=xu(t,0,!1,null,null,!1,!1,"",Gh);return t._reactRootContainer=c,t[Es]=c.current,Ii(t.nodeType===8?t.parentNode:t),$n(function(){nl(e,c,s,n)}),c}function al(t,e,s,n,r){var i=s._reactRootContainer;if(i){var o=i;if(typeof r=="function"){var l=r;r=function(){var c=To(o);l.call(c)}}nl(e,o,t,r)}else o=tb(s,e,t,r,n);return To(o)}Np=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var s=ii(e.pendingLanes);s!==0&&(zd(e,s|1),jt(e,Fe()),!(be&6)&&(Tr=Fe()+500,hn()))}break;case 13:$n(function(){var n=Ts(t,1);if(n!==null){var r=ut();ts(n,t,1,r)}}),yu(t,1)}};$d=function(t){if(t.tag===13){var e=Ts(t,134217728);if(e!==null){var s=ut();ts(e,t,134217728,s)}yu(t,134217728)}};Sp=function(t){if(t.tag===13){var e=en(t),s=Ts(t,e);if(s!==null){var n=ut();ts(s,t,e,n)}yu(t,e)}};Cp=function(){return je};Pp=function(t,e){var s=je;try{return je=t,e()}finally{je=s}};Sc=function(t,e,s){switch(e){case"input":if(vc(t,s),e=s.name,s.type==="radio"&&e!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<s.length;e++){var n=s[e];if(n!==t&&n.form===t.form){var r=Qo(n);if(!r)throw Error(W(90));ip(n),vc(n,r)}}}break;case"textarea":op(t,s);break;case"select":e=s.value,e!=null&&gr(t,!!s.multiple,e,!1)}};mp=fu;pp=$n;var sb={usingClientEntryPoint:!1,Events:[ta,lr,Qo,hp,fp,fu]},Gr={findFiberByHostInstance:Pn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nb={bundleType:Gr.bundleType,version:Gr.version,rendererPackageName:Gr.rendererPackageName,rendererConfig:Gr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Os.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=yp(t),t===null?null:t.stateNode},findFiberByHostInstance:Gr.findFiberByHostInstance||eb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Na=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Na.isDisabled&&Na.supportsFiber)try{qo=Na.inject(nb),ds=Na}catch{}}Rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sb;Rt.createPortal=function(t,e){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bu(e))throw Error(W(200));return Zv(t,e,null,s)};Rt.createRoot=function(t,e){if(!bu(t))throw Error(W(299));var s=!1,n="",r=Qg;return e!=null&&(e.unstable_strictMode===!0&&(s=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=xu(t,1,!1,null,null,s,!1,n,r),t[Es]=e.current,Ii(t.nodeType===8?t.parentNode:t),new vu(e)};Rt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(W(188)):(t=Object.keys(t).join(","),Error(W(268,t)));return t=yp(e),t=t===null?null:t.stateNode,t};Rt.flushSync=function(t){return $n(t)};Rt.hydrate=function(t,e,s){if(!il(e))throw Error(W(200));return al(null,t,e,!0,s)};Rt.hydrateRoot=function(t,e,s){if(!bu(t))throw Error(W(405));var n=s!=null&&s.hydratedSources||null,r=!1,i="",o=Qg;if(s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(i=s.identifierPrefix),s.onRecoverableError!==void 0&&(o=s.onRecoverableError)),e=Gg(e,null,t,1,s??null,r,!1,i,o),t[Es]=e.current,Ii(t),n)for(t=0;t<n.length;t++)s=n[t],r=s._getVersion,r=r(s._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[s,r]:e.mutableSourceEagerHydrationData.push(s,r);return new rl(e)};Rt.render=function(t,e,s){if(!il(e))throw Error(W(200));return al(null,t,e,!1,s)};Rt.unmountComponentAtNode=function(t){if(!il(t))throw Error(W(40));return t._reactRootContainer?($n(function(){al(null,null,t,!1,function(){t._reactRootContainer=null,t[Es]=null})}),!0):!1};Rt.unstable_batchedUpdates=fu;Rt.unstable_renderSubtreeIntoContainer=function(t,e,s,n){if(!il(s))throw Error(W(200));if(t==null||t._reactInternals===void 0)throw Error(W(38));return al(t,e,s,!1,n)};Rt.version="18.3.1-next-f1338f8080-20240426";function Jg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Jg)}catch(t){console.error(t)}}Jg(),Jm.exports=Rt;var rb=Jm.exports,Xg,Qh=rb;Xg=Qh.createRoot,Qh.hydrateRoot;const ib="modulepreload",ab=function(t){return"/"+t},Jh={},na=function(e,s,n){let r=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(s.map(c=>{if(c=ab(c),c in Jh)return;Jh[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":ib,d||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return r.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},ob=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>na(async()=>{const{default:n}=await Promise.resolve().then(()=>$r);return{default:n}},void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)};class wu extends Error{constructor(e,s="FunctionsError",n){super(e),this.name=s,this.context=n}}class lb extends wu{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Xh extends wu{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Zh extends wu{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var id;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(id||(id={}));var cb=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};class db{constructor(e,{headers:s={},customFetch:n,region:r=id.Any}={}){this.url=e,this.headers=s,this.region=r,this.fetch=ob(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,s={}){var n;return cb(this,void 0,void 0,function*(){try{const{headers:r,method:i,body:o}=s;let l={},{region:c}=s;c||(c=this.region);const d=new URL(`${this.url}/${e}`);c&&c!=="any"&&(l["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let u;o&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(l["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(l["Content-Type"]="application/json",u=JSON.stringify(o)));const h=yield this.fetch(d.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),r),body:u}).catch(v=>{throw new lb(v)}),f=h.headers.get("x-relay-error");if(f&&f==="true")throw new Xh(h);if(!h.ok)throw new Zh(h);let m=((n=h.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),p;return m==="application/json"?p=yield h.json():m==="application/octet-stream"?p=yield h.blob():m==="text/event-stream"?p=h:m==="multipart/form-data"?p=yield h.formData():p=yield h.text(),{data:p,error:null,response:h}}catch(r){return{data:null,error:r,response:r instanceof Zh||r instanceof Xh?r.context:void 0}}})}}var yt={},_u={},ol={},ra={},ll={},cl={},ub=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ar=ub();const hb=Ar.fetch,Zg=Ar.fetch.bind(Ar),e0=Ar.Headers,fb=Ar.Request,mb=Ar.Response,$r=Object.freeze(Object.defineProperty({__proto__:null,Headers:e0,Request:fb,Response:mb,default:Zg,fetch:hb},Symbol.toStringTag,{value:"Module"})),pb=Ox($r);var dl={};Object.defineProperty(dl,"__esModule",{value:!0});let gb=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};dl.default=gb;var t0=Ft&&Ft.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(cl,"__esModule",{value:!0});const xb=t0(pb),yb=t0(dl);let vb=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=xb.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,s){return this.headers=Object.assign({},this.headers),this.headers[e]=s,this}then(e,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let r=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c;let d=null,u=null,h=null,f=i.status,m=i.statusText;if(i.ok){if(this.method!=="HEAD"){const x=await i.text();x===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=x:u=JSON.parse(x))}const v=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),b=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");v&&b&&b.length>1&&(h=parseInt(b[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(d={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,f=406,m="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const v=await i.text();try{d=JSON.parse(v),Array.isArray(d)&&i.status===404&&(u=[],d=null,f=200,m="OK")}catch{i.status===404&&v===""?(f=204,m="No Content"):d={message:v}}if(d&&this.isMaybeSingle&&(!((c=d==null?void 0:d.details)===null||c===void 0)&&c.includes("0 rows"))&&(d=null,f=200,m="OK"),d&&this.shouldThrowOnError)throw new yb.default(d)}return{error:d,data:u,count:h,status:f,statusText:m}});return this.shouldThrowOnError||(r=r.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,s)}returns(){return this}overrideTypes(){return this}};cl.default=vb;var bb=Ft&&Ft.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ll,"__esModule",{value:!0});const wb=bb(cl);let _b=class extends wb.default{select(e){let s=!1;const n=(e??"*").split("").map(r=>/\s/.test(r)&&!s?"":(r==='"'&&(s=!s),r)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:s=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${s?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:s,referencedTable:n=s}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,s,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${s-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:s=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:o="text"}={}){var l;const c=[e?"analyze":null,s?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${d}"; options=${c};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};ll.default=_b;var jb=Ft&&Ft.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ra,"__esModule",{value:!0});const kb=jb(ll);let Nb=class extends kb.default{eq(e,s){return this.url.searchParams.append(e,`eq.${s}`),this}neq(e,s){return this.url.searchParams.append(e,`neq.${s}`),this}gt(e,s){return this.url.searchParams.append(e,`gt.${s}`),this}gte(e,s){return this.url.searchParams.append(e,`gte.${s}`),this}lt(e,s){return this.url.searchParams.append(e,`lt.${s}`),this}lte(e,s){return this.url.searchParams.append(e,`lte.${s}`),this}like(e,s){return this.url.searchParams.append(e,`like.${s}`),this}likeAllOf(e,s){return this.url.searchParams.append(e,`like(all).{${s.join(",")}}`),this}likeAnyOf(e,s){return this.url.searchParams.append(e,`like(any).{${s.join(",")}}`),this}ilike(e,s){return this.url.searchParams.append(e,`ilike.${s}`),this}ilikeAllOf(e,s){return this.url.searchParams.append(e,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(e,s){return this.url.searchParams.append(e,`ilike(any).{${s.join(",")}}`),this}is(e,s){return this.url.searchParams.append(e,`is.${s}`),this}in(e,s){const n=Array.from(new Set(s)).map(r=>typeof r=="string"&&new RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cs.{${s.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(s)}`),this}containedBy(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cd.{${s.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(s)}`),this}rangeGt(e,s){return this.url.searchParams.append(e,`sr.${s}`),this}rangeGte(e,s){return this.url.searchParams.append(e,`nxl.${s}`),this}rangeLt(e,s){return this.url.searchParams.append(e,`sl.${s}`),this}rangeLte(e,s){return this.url.searchParams.append(e,`nxr.${s}`),this}rangeAdjacent(e,s){return this.url.searchParams.append(e,`adj.${s}`),this}overlaps(e,s){return typeof s=="string"?this.url.searchParams.append(e,`ov.${s}`):this.url.searchParams.append(e,`ov.{${s.join(",")}}`),this}textSearch(e,s,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${o}.${s}`),this}match(e){return Object.entries(e).forEach(([s,n])=>{this.url.searchParams.append(s,`eq.${n}`)}),this}not(e,s,n){return this.url.searchParams.append(e,`not.${s}.${n}`),this}or(e,{foreignTable:s,referencedTable:n=s}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,s,n){return this.url.searchParams.append(e,`${s}.${n}`),this}};ra.default=Nb;var Sb=Ft&&Ft.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ol,"__esModule",{value:!0});const Qr=Sb(ra);let Cb=class{constructor(e,{headers:s={},schema:n,fetch:r}){this.url=e,this.headers=s,this.schema=n,this.fetch=r}select(e,{head:s=!1,count:n}={}){const r=s?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new Qr.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:s,defaultToNull:n=!0}={}){const r="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),s&&i.push(`count=${s}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Qr.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:s,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&l.push(this.headers.Prefer),r&&l.push(`count=${r}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const c=e.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(c.length>0){const d=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new Qr.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:s}={}){const n="PATCH",r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),s&&r.push(`count=${s}`),this.headers.Prefer=r.join(","),new Qr.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const s="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Qr.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};ol.default=Cb;var ul={},hl={};Object.defineProperty(hl,"__esModule",{value:!0});hl.version=void 0;hl.version="0.0.0-automated";Object.defineProperty(ul,"__esModule",{value:!0});ul.DEFAULT_HEADERS=void 0;const Pb=hl;ul.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Pb.version}`};var s0=Ft&&Ft.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_u,"__esModule",{value:!0});const Eb=s0(ol),Tb=s0(ra),Ab=ul;let Ob=class n0{constructor(e,{headers:s={},schema:n,fetch:r}={}){this.url=e,this.headers=Object.assign(Object.assign({},Ab.DEFAULT_HEADERS),s),this.schemaName=n,this.fetch=r}from(e){const s=new URL(`${this.url}/${e}`);return new Eb.default(s,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new n0(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,s={},{head:n=!1,get:r=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${e}`);let c;n||r?(o=n?"HEAD":"GET",Object.entries(s).filter(([u,h])=>h!==void 0).map(([u,h])=>[u,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([u,h])=>{l.searchParams.append(u,h)})):(o="POST",c=s);const d=Object.assign({},this.headers);return i&&(d.Prefer=`count=${i}`),new Tb.default({method:o,url:l,headers:d,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};_u.default=Ob;var Fr=Ft&&Ft.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(yt,"__esModule",{value:!0});yt.PostgrestError=yt.PostgrestBuilder=yt.PostgrestTransformBuilder=yt.PostgrestFilterBuilder=yt.PostgrestQueryBuilder=yt.PostgrestClient=void 0;const r0=Fr(_u);yt.PostgrestClient=r0.default;const i0=Fr(ol);yt.PostgrestQueryBuilder=i0.default;const a0=Fr(ra);yt.PostgrestFilterBuilder=a0.default;const o0=Fr(ll);yt.PostgrestTransformBuilder=o0.default;const l0=Fr(cl);yt.PostgrestBuilder=l0.default;const c0=Fr(dl);yt.PostgrestError=c0.default;var Rb=yt.default={PostgrestClient:r0.default,PostgrestQueryBuilder:i0.default,PostgrestFilterBuilder:a0.default,PostgrestTransformBuilder:o0.default,PostgrestBuilder:l0.default,PostgrestError:c0.default};const{PostgrestClient:Mb,PostgrestQueryBuilder:UN,PostgrestFilterBuilder:WN,PostgrestTransformBuilder:HN,PostgrestBuilder:VN,PostgrestError:qN}=Rb;function Lb(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const Db=Lb(),Bb="2.11.15",Ib=`realtime-js/${Bb}`,zb="1.0.0",d0=1e4,$b=1e3;var _i;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(_i||(_i={}));var rt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(rt||(rt={}));var Jt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Jt||(Jt={}));var ad;(function(t){t.websocket="websocket"})(ad||(ad={}));var Cn;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Cn||(Cn={}));class Fb{constructor(){this.HEADER_LENGTH=1}decode(e,s){return e.constructor===ArrayBuffer?s(this._binaryDecode(e)):s(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const s=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,s,n)}_decodeBroadcast(e,s,n){const r=s.getUint8(1),i=s.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(e.slice(o,o+r));o=o+r;const c=n.decode(e.slice(o,o+i));o=o+i;const d=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class u0{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ce;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ce||(Ce={}));const ef=(t,e,s={})=>{var n;const r=(n=s.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((i,o)=>(i[o]=Ub(o,t,e,r),i),{})},Ub=(t,e,s,n)=>{const r=e.find(l=>l.name===t),i=r==null?void 0:r.type,o=s[t];return i&&!n.includes(i)?h0(i,o):od(o)},h0=(t,e)=>{if(t.charAt(0)==="_"){const s=t.slice(1,t.length);return qb(e,s)}switch(t){case Ce.bool:return Wb(e);case Ce.float4:case Ce.float8:case Ce.int2:case Ce.int4:case Ce.int8:case Ce.numeric:case Ce.oid:return Hb(e);case Ce.json:case Ce.jsonb:return Vb(e);case Ce.timestamp:return Kb(e);case Ce.abstime:case Ce.date:case Ce.daterange:case Ce.int4range:case Ce.int8range:case Ce.money:case Ce.reltime:case Ce.text:case Ce.time:case Ce.timestamptz:case Ce.timetz:case Ce.tsrange:case Ce.tstzrange:return od(e);default:return od(e)}},od=t=>t,Wb=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Hb=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Vb=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},qb=(t,e)=>{if(typeof t!="string")return t;const s=t.length-1,n=t[s];if(t[0]==="{"&&n==="}"){let i;const o=t.slice(1,s);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>h0(e,l))}return t},Kb=t=>typeof t=="string"?t.replace(" ","T"):t,f0=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Kl{constructor(e,s,n={},r=d0){this.channel=e,this.event=s,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var n;return this._hasReceived(e)&&s((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var tf;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(tf||(tf={}));class ji{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},r=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ji.syncState(this.state,r,i,o),this.pendingDiffs.forEach(c=>{this.state=ji.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},r=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=ji.syncDiff(this.state,r,i,o),l())}),this.onJoin((r,i,o)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:i,newPresences:o})}),this.onLeave((r,i,o)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,n,r){const i=this.cloneDeep(e),o=this.transformState(s),l={},c={};return this.map(i,(d,u)=>{o[d]||(c[d]=u)}),this.map(o,(d,u)=>{const h=i[d];if(h){const f=u.map(b=>b.presence_ref),m=h.map(b=>b.presence_ref),p=u.filter(b=>m.indexOf(b.presence_ref)<0),v=h.filter(b=>f.indexOf(b.presence_ref)<0);p.length>0&&(l[d]=p),v.length>0&&(c[d]=v)}else l[d]=u}),this.syncDiff(i,{joins:l,leaves:c},n,r)}static syncDiff(e,s,n,r){const{joins:i,leaves:o}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(i,(l,c)=>{var d;const u=(d=e[l])!==null&&d!==void 0?d:[];if(e[l]=this.cloneDeep(c),u.length>0){const h=e[l].map(m=>m.presence_ref),f=u.filter(m=>h.indexOf(m.presence_ref)<0);e[l].unshift(...f)}n(l,u,c)}),this.map(o,(l,c)=>{let d=e[l];if(!d)return;const u=c.map(h=>h.presence_ref);d=d.filter(h=>u.indexOf(h.presence_ref)<0),e[l]=d,r(l,d,c),d.length===0&&delete e[l]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(n=>s(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,n)=>{const r=e[n];return"metas"in r?s[n]=r.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):s[n]=r,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var sf;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(sf||(sf={}));var nf;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(nf||(nf={}));var vs;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(vs||(vs={}));class ju{constructor(e,s={config:{}},n){this.topic=e,this.params=s,this.socket=n,this.bindings={},this.state=rt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Kl(this,Jt.join,this.params,this.timeout),this.rejoinTimer=new u0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=rt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=rt.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=rt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=rt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Jt.reply,{},(r,i)=>{this._trigger(this._replyEventName(i),r)}),this.presence=new ji(this),this.broadcastEndpointURL=f0(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,s=this.timeout){var n,r;if(this.socket.isConnected()||this.socket.connect(),this.state==rt.closed){const{config:{broadcast:i,presence:o,private:l}}=this.params;this._onError(u=>e==null?void 0:e(vs.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(vs.CLOSED));const c={},d={broadcast:i,presence:o,postgres_changes:(r=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(u=>u.filter))!==null&&r!==void 0?r:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:u})=>{var h;if(this.socket.setAuth(),u===void 0){e==null||e(vs.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,m=(h=f==null?void 0:f.length)!==null&&h!==void 0?h:0,p=[];for(let v=0;v<m;v++){const b=f[v],{filter:{event:x,schema:g,table:y,filter:w}}=b,_=u&&u[v];if(_&&_.event===x&&_.schema===g&&_.table===y&&_.filter===w)p.push(Object.assign(Object.assign({},b),{id:_.id}));else{this.unsubscribe(),this.state=rt.errored,e==null||e(vs.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e(vs.SUBSCRIBED);return}}).receive("error",u=>{this.state=rt.errored,e==null||e(vs.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(vs.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,n){return this._on(e,s,n)}async send(e,s={}){var n,r;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=s.timeout)!==null&&n!==void 0?n:this.timeout);return await((r=d.body)===null||r===void 0?void 0:r.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const d=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=rt.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Jt.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(r=>{n=new Kl(this,Jt.leave,{},e),n.receive("ok",()=>{s(),r("ok")}).receive("timeout",()=>{s(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,s,n){const r=new AbortController,i=setTimeout(()=>r.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:r.signal}));return clearTimeout(i),o}_push(e,s,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new Kl(this,e,s,n);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,s,n){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,n){var r,i;const o=e.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=Jt;if(n&&[l,c,d,u].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,s,n);if(s&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(m=>{var p,v,b;return((p=m.filter)===null||p===void 0?void 0:p.event)==="*"||((b=(v=m.filter)===null||v===void 0?void 0:v.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(m=>m.callback(f,n)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var p,v,b,x,g,y;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const w=m.id,_=(p=m.filter)===null||p===void 0?void 0:p.event;return w&&((v=s.ids)===null||v===void 0?void 0:v.includes(w))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((b=s.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const w=(g=(x=m==null?void 0:m.filter)===null||x===void 0?void 0:x.event)===null||g===void 0?void 0:g.toLocaleLowerCase();return w==="*"||w===((y=s==null?void 0:s.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof f=="object"&&"ids"in f){const p=f.data,{schema:v,table:b,commit_timestamp:x,type:g,errors:y}=p;f=Object.assign(Object.assign({},{schema:v,table:b,commit_timestamp:x,eventType:g,new:{},old:{},errors:y}),this._getPayloadRecords(p))}m.callback(f,n)})}_isClosed(){return this.state===rt.closed}_isJoined(){return this.state===rt.joined}_isJoining(){return this.state===rt.joining}_isLeaving(){return this.state===rt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,n){const r=e.toLocaleLowerCase(),i={type:r,filter:s,callback:n};return this.bindings[r]?this.bindings[r].push(i):this.bindings[r]=[i],this}_off(e,s){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(r=>{var i;return!(((i=r.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&ju.isEqual(r.filter,s))}),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const n in e)if(e[n]!==s[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Jt.close,{},e)}_onError(e){this._on(Jt.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=rt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=ef(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=ef(e.columns,e.old_record)),s}}const rf=()=>{},Yb=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Gb{constructor(e,s){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=d0,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=rf,this.ref=0,this.logger=rf,this.conn=null,this.sendBuffer=[],this.serializer=new Fb,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>na(async()=>{const{default:c}=await Promise.resolve().then(()=>$r);return{default:c}},void 0).then(({default:c})=>c(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${e}/${ad.websocket}`,this.httpEndpoint=f0(e),s!=null&&s.transport?this.transport=s.transport:this.transport=null,s!=null&&s.params&&(this.params=s.params),s!=null&&s.timeout&&(this.timeout=s.timeout),s!=null&&s.logger&&(this.logger=s.logger),(s!=null&&s.logLevel||s!=null&&s.log_level)&&(this.logLevel=s.logLevel||s.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),s!=null&&s.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const r=(n=s==null?void 0:s.params)===null||n===void 0?void 0:n.apikey;if(r&&(this.accessTokenValue=r,this.apiKey=r),this.reconnectAfterMs=s!=null&&s.reconnectAfterMs?s.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=s!=null&&s.encode?s.encode:(i,o)=>o(JSON.stringify(i)),this.decode=s!=null&&s.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new u0(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s==null?void 0:s.fetch),s!=null&&s.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(s==null?void 0:s.worker)||!1,this.workerUrl=s==null?void 0:s.workerUrl}this.accessToken=(s==null?void 0:s.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=Db),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:zb}))}disconnect(e,s){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,s,n){this.logger(e,s,n)}connectionState(){switch(this.conn&&this.conn.readyState){case _i.connecting:return Cn.Connecting;case _i.open:return Cn.Open;case _i.closing:return Cn.Closing;default:return Cn.Closed}}isConnected(){return this.connectionState()===Cn.Open}channel(e,s={config:{}}){const n=`realtime:${e}`,r=this.getChannels().find(i=>i.topic===n);if(r)return r;{const i=new ju(`realtime:${e}`,s,this);return this.channels.push(i),i}}push(e){const{topic:s,event:n,payload:r,ref:i}=e,o=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${s} ${n} (${i})`,r),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let s=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(n=>{const r={access_token:s,version:Ib};s&&n.updateJoinPayload(r),n.joinedOnce&&n._isJoined()&&n._push(Jt.access_token,{access_token:s})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close($b,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,s=>{let{topic:n,event:r,payload:i,ref:o}=s;n==="phoenix"&&r==="phx_reply"&&this.heartbeatCallback(s.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${r} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(l=>l._isMember(n)).forEach(l=>l._trigger(r,i,o)),this.stateChangeCallbacks.message.forEach(l=>l(s))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Jt.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const n=e.match(/\?/)?"&":"?",r=new URLSearchParams(s);return`${e}${n}${r}`}_workerObjectUrl(e){let s;if(e)s=e;else{const n=new Blob([Yb],{type:"application/javascript"});s=URL.createObjectURL(n)}return s}}class ku extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ye(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Qb extends ku{constructor(e,s,n){super(e),this.name="StorageApiError",this.status=s,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ld extends ku{constructor(e,s){super(e),this.name="StorageUnknownError",this.originalError=s}}var Jb=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};const m0=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>na(async()=>{const{default:n}=await Promise.resolve().then(()=>$r);return{default:n}},void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)},Xb=()=>Jb(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield na(()=>Promise.resolve().then(()=>$r),void 0)).Response:Response}),cd=t=>{if(Array.isArray(t))return t.map(s=>cd(s));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([s,n])=>{const r=s.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[r]=cd(n)}),e},Zb=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var qn=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};const Yl=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),ew=(t,e,s)=>qn(void 0,void 0,void 0,function*(){const n=yield Xb();t instanceof n&&!(s!=null&&s.noResolveJson)?t.json().then(r=>{const i=t.status||500,o=(r==null?void 0:r.statusCode)||i+"";e(new Qb(Yl(r),i,o))}).catch(r=>{e(new ld(Yl(r),r))}):e(new ld(Yl(t),t))}),tw=(t,e,s,n)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?r:(Zb(n)?(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r.body=JSON.stringify(n)):r.body=n,Object.assign(Object.assign({},r),s))};function ia(t,e,s,n,r,i){return qn(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(s,tw(e,n,r,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>ew(c,l,n))})})}function Ao(t,e,s,n){return qn(this,void 0,void 0,function*(){return ia(t,"GET",e,s,n)})}function bs(t,e,s,n,r){return qn(this,void 0,void 0,function*(){return ia(t,"POST",e,n,r,s)})}function dd(t,e,s,n,r){return qn(this,void 0,void 0,function*(){return ia(t,"PUT",e,n,r,s)})}function sw(t,e,s,n){return qn(this,void 0,void 0,function*(){return ia(t,"HEAD",e,Object.assign(Object.assign({},s),{noResolveJson:!0}),n)})}function p0(t,e,s,n,r){return qn(this,void 0,void 0,function*(){return ia(t,"DELETE",e,n,r,s)})}var pt=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};const nw={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},af={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class rw{constructor(e,s={},n,r){this.url=e,this.headers=s,this.bucketId=n,this.fetch=m0(r)}uploadOrUpdate(e,s,n,r){return pt(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},af),r);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),r!=null&&r.headers&&(l=Object.assign(Object.assign({},l),r.headers));const d=this._removeEmptyFolders(s),u=this._getFinalPath(d),h=yield(e=="PUT"?dd:bs)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:d,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(Ye(i))return{data:null,error:i};throw i}})}upload(e,s,n){return pt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,s,n)})}uploadToSignedUrl(e,s,n,r){return pt(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",s);try{let c;const d=Object.assign({upsert:af.upsert},r),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",d.cacheControl)):(c=n,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const h=yield dd(this.fetch,l.toString(),c,{headers:u});return{data:{path:i,fullPath:h.Key},error:null}}catch(c){if(Ye(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,s){return pt(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const r=Object.assign({},this.headers);s!=null&&s.upsert&&(r["x-upsert"]="true");const i=yield bs(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:r}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new ku("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(n){if(Ye(n))return{data:null,error:n};throw n}})}update(e,s,n){return pt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,s,n)})}move(e,s,n){return pt(this,void 0,void 0,function*(){try{return{data:yield bs(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(Ye(r))return{data:null,error:r};throw r}})}copy(e,s,n){return pt(this,void 0,void 0,function*(){try{return{data:{path:(yield bs(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(Ye(r))return{data:null,error:r};throw r}})}createSignedUrl(e,s,n){return pt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),i=yield bs(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:s},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(r){if(Ye(r))return{data:null,error:r};throw r}})}createSignedUrls(e,s,n){return pt(this,void 0,void 0,function*(){try{const r=yield bs(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:e},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:r.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(r){if(Ye(r))return{data:null,error:r};throw r}})}download(e,s){return pt(this,void 0,void 0,function*(){const r=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield Ao(this.fetch,`${this.url}/${r}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Ye(l))return{data:null,error:l};throw l}})}info(e){return pt(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{const n=yield Ao(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:cd(n),error:null}}catch(n){if(Ye(n))return{data:null,error:n};throw n}})}exists(e){return pt(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{return yield sw(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Ye(n)&&n instanceof ld){const r=n.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,s){const n=this._getFinalPath(e),r=[],i=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";i!==""&&r.push(i);const l=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});c!==""&&r.push(c);let d=r.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${d}`)}}}remove(e){return pt(this,void 0,void 0,function*(){try{return{data:yield p0(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(s){if(Ye(s))return{data:null,error:s};throw s}})}list(e,s,n){return pt(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},nw),s),{prefix:e||""});return{data:yield bs(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(Ye(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const s=[];return e.width&&s.push(`width=${e.width}`),e.height&&s.push(`height=${e.height}`),e.resize&&s.push(`resize=${e.resize}`),e.format&&s.push(`format=${e.format}`),e.quality&&s.push(`quality=${e.quality}`),s.join("&")}}const iw="2.10.4",aw={"X-Client-Info":`storage-js/${iw}`};var Gn=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};class ow{constructor(e,s={},n,r){const i=new URL(e);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},aw),s),this.fetch=m0(n)}listBuckets(){return Gn(this,void 0,void 0,function*(){try{return{data:yield Ao(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Ye(e))return{data:null,error:e};throw e}})}getBucket(e){return Gn(this,void 0,void 0,function*(){try{return{data:yield Ao(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(s){if(Ye(s))return{data:null,error:s};throw s}})}createBucket(e,s={public:!1}){return Gn(this,void 0,void 0,function*(){try{return{data:yield bs(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Ye(n))return{data:null,error:n};throw n}})}updateBucket(e,s){return Gn(this,void 0,void 0,function*(){try{return{data:yield dd(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Ye(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Gn(this,void 0,void 0,function*(){try{return{data:yield bs(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(Ye(s))return{data:null,error:s};throw s}})}deleteBucket(e){return Gn(this,void 0,void 0,function*(){try{return{data:yield p0(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(Ye(s))return{data:null,error:s};throw s}})}}class lw extends ow{constructor(e,s={},n,r){super(e,s,n,r)}from(e){return new rw(this.url,this.headers,e,this.fetch)}}const cw="2.53.0";let oi="";typeof Deno<"u"?oi="deno":typeof document<"u"?oi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?oi="react-native":oi="node";const dw={"X-Client-Info":`supabase-js-${oi}/${cw}`},uw={headers:dw},hw={schema:"public"},fw={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},mw={};var pw=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};const gw=t=>{let e;return t?e=t:typeof fetch>"u"?e=Zg:e=fetch,(...s)=>e(...s)},xw=()=>typeof Headers>"u"?e0:Headers,yw=(t,e,s)=>{const n=gw(s),r=xw();return(i,o)=>pw(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:t;let d=new r(o==null?void 0:o.headers);return d.has("apikey")||d.set("apikey",t),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},o),{headers:d}))})};var vw=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};function bw(t){return t.endsWith("/")?t:t+"/"}function ww(t,e){var s,n;const{db:r,auth:i,realtime:o,global:l}=t,{db:c,auth:d,realtime:u,global:h}=e,f={db:Object.assign(Object.assign({},c),r),auth:Object.assign(Object.assign({},d),i),realtime:Object.assign(Object.assign({},u),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(s=h==null?void 0:h.headers)!==null&&s!==void 0?s:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>vw(this,void 0,void 0,function*(){return""})};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}const g0="2.71.1",tr=30*1e3,ud=3,Gl=ud*tr,_w="http://localhost:9999",jw="supabase.auth.token",kw={"X-Client-Info":`gotrue-js/${g0}`},hd="X-Supabase-Api-Version",x0={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Nw=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Sw=10*60*1e3;class Nu extends Error{constructor(e,s,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=n}}function fe(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Cw extends Nu{constructor(e,s,n){super(e,s,n),this.name="AuthApiError",this.status=s,this.code=n}}function Pw(t){return fe(t)&&t.name==="AuthApiError"}class y0 extends Nu{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class fn extends Nu{constructor(e,s,n,r){super(e,n,r),this.name=s,this.status=n}}class Bs extends fn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Ew(t){return fe(t)&&t.name==="AuthSessionMissingError"}class Sa extends fn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ca extends fn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Pa extends fn{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Tw(t){return fe(t)&&t.name==="AuthImplicitGrantRedirectError"}class of extends fn{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class fd extends fn{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function Ql(t){return fe(t)&&t.name==="AuthRetryableFetchError"}class lf extends fn{constructor(e,s,n){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=n}}class md extends fn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Oo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),cf=` 	
\r=`.split(""),Aw=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<cf.length;e+=1)t[cf[e].charCodeAt(0)]=-2;for(let e=0;e<Oo.length;e+=1)t[Oo[e].charCodeAt(0)]=e;return t})();function df(t,e,s){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;s(Oo[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;s(Oo[n]),e.queuedBits-=6}}function v0(t,e,s){const n=Aw[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)s(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function uf(t){const e=[],s=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},i=o=>{Mw(o,n,s)};for(let o=0;o<t.length;o+=1)v0(t.charCodeAt(o),r,i);return e.join("")}function Ow(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Rw(t,e){for(let s=0;s<t.length;s+=1){let n=t.charCodeAt(s);if(n>55295&&n<=56319){const r=(n-55296)*1024&65535;n=(t.charCodeAt(s+1)-56320&65535|r)+65536,s+=1}Ow(n,e)}}function Mw(t,e,s){if(e.utf8seq===0){if(t<=127){s(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&s(e.codepoint)}}function Lw(t){const e=[],s={queue:0,queuedBits:0},n=r=>{e.push(r)};for(let r=0;r<t.length;r+=1)v0(t.charCodeAt(r),s,n);return new Uint8Array(e)}function Dw(t){const e=[];return Rw(t,s=>e.push(s)),new Uint8Array(e)}function Bw(t){const e=[],s={queue:0,queuedBits:0},n=r=>{e.push(r)};return t.forEach(r=>df(r,s,n)),df(null,s,n),e.join("")}function Iw(t){return Math.round(Date.now()/1e3)+t}function zw(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Yt=()=>typeof window<"u"&&typeof document<"u",xn={tested:!1,writable:!1},b0=()=>{if(!Yt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(xn.tested)return xn.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),xn.tested=!0,xn.writable=!0}catch{xn.tested=!0,xn.writable=!1}return xn.writable};function $w(t){const e={},s=new URL(t);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((r,i)=>{e[i]=r})}catch{}return s.searchParams.forEach((n,r)=>{e[r]=n}),e}const w0=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>na(async()=>{const{default:n}=await Promise.resolve().then(()=>$r);return{default:n}},void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)},Fw=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",sr=async(t,e,s)=>{await t.setItem(e,JSON.stringify(s))},yn=async(t,e)=>{const s=await t.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},Ls=async(t,e)=>{await t.removeItem(e)};class fl{constructor(){this.promise=new fl.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}fl.promiseConstructor=Promise;function Jl(t){const e=t.split(".");if(e.length!==3)throw new md("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!Nw.test(e[n]))throw new md("JWT not in base64url format");return{header:JSON.parse(uf(e[0])),payload:JSON.parse(uf(e[1])),signature:Lw(e[2]),raw:{header:e[0],payload:e[1]}}}async function Uw(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Ww(t,e){return new Promise((n,r)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){n(o);return}}catch(o){if(!e(i,o)){r(o);return}}})()})}function Hw(t){return("0"+t.toString(16)).substr(-2)}function Vw(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=s.length;let r="";for(let i=0;i<56;i++)r+=s.charAt(Math.floor(Math.random()*n));return r}return crypto.getRandomValues(e),Array.from(e,Hw).join("")}async function qw(t){const s=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",s),r=new Uint8Array(n);return Array.from(r).map(i=>String.fromCharCode(i)).join("")}async function Kw(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const s=await qw(t);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Qn(t,e,s=!1){const n=Vw();let r=n;s&&(r+="/PASSWORD_RECOVERY"),await sr(t,`${e}-code-verifier`,r);const i=await Kw(n);return[i,n===i?"plain":"s256"]}const Yw=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Gw(t){const e=t.headers.get(hd);if(!e||!e.match(Yw))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Qw(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Jw(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Xw=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Jn(t){if(!Xw.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Xl(){const t={};return new Proxy(t,{get:(e,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const n=s.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function hf(t){return JSON.parse(JSON.stringify(t))}var Zw=function(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(s[n[r]]=t[n[r]]);return s};const kn=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),e_=[502,503,504];async function ff(t){var e;if(!Fw(t))throw new fd(kn(t),0);if(e_.includes(t.status))throw new fd(kn(t),t.status);let s;try{s=await t.json()}catch(i){throw new y0(kn(i),i)}let n;const r=Gw(t);if(r&&r.getTime()>=x0["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?n=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(n=s.error_code),n){if(n==="weak_password")throw new lf(kn(s),t.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Bs}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new lf(kn(s),t.status,s.weak_password.reasons);throw new Cw(kn(s),t.status||500,n)}const t_=(t,e,s,n)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(n),Object.assign(Object.assign({},r),s))};async function ge(t,e,s,n){var r;const i=Object.assign({},n==null?void 0:n.headers);i[hd]||(i[hd]=x0["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(r=n==null?void 0:n.query)!==null&&r!==void 0?r:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await s_(t,e,s+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function s_(t,e,s,n,r,i){const o=t_(e,n,r,i);let l;try{l=await t(s,Object.assign({},o))}catch(c){throw console.error(c),new fd(kn(c),0)}if(l.ok||await ff(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await ff(c)}}function ps(t){var e;let s=null;a_(t)&&(s=Object.assign({},t),t.expires_at||(s.expires_at=Iw(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:s,user:n},error:null}}function mf(t){const e=ps(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((s,n)=>s&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Us(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function n_(t){return{data:t,error:null}}function r_(t){const{action_link:e,email_otp:s,hashed_token:n,redirect_to:r,verification_type:i}=t,o=Zw(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:s,hashed_token:n,redirect_to:r,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function i_(t){return t}function a_(t){return t.access_token&&t.refresh_token&&t.expires_in}const Zl=["global","local","others"];var o_=function(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(s[n[r]]=t[n[r]]);return s};class l_{constructor({url:e="",headers:s={},fetch:n}){this.url=e,this.headers=s,this.fetch=w0(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,s=Zl[0]){if(Zl.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Zl.join(", ")}`);try{return await ge(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(fe(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,s={}){try{return await ge(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Us})}catch(n){if(fe(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:s}=e,n=o_(e,["options"]),r=Object.assign(Object.assign({},n),s);return"newEmail"in n&&(r.new_email=n==null?void 0:n.newEmail,delete r.newEmail),await ge(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:r_,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(fe(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await ge(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Us})}catch(s){if(fe(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,n,r,i,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await ge(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&n!==void 0?n:"",per_page:(i=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:""},xform:i_});if(u.error)throw u.error;const h=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(p=>{const v=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(p.split(";")[1].split("=")[1]);d[`${b}Page`]=v}),d.total=parseInt(f)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(fe(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){Jn(e);try{return await ge(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Us})}catch(s){if(fe(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){Jn(e);try{return await ge(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:Us})}catch(n){if(fe(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,s=!1){Jn(e);try{return await ge(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:Us})}catch(n){if(fe(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Jn(e.userId);try{const{data:s,error:n}=await ge(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:s,error:n}}catch(s){if(fe(s))return{data:null,error:s};throw s}}async _deleteFactor(e){Jn(e.userId),Jn(e.id);try{return{data:await ge(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(fe(s))return{data:null,error:s};throw s}}}function pf(t={}){return{getItem:e=>t[e]||null,setItem:(e,s)=>{t[e]=s},removeItem:e=>{delete t[e]}}}function c_(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Xn={debug:!!(globalThis&&b0()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class _0 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class d_ extends _0{}async function u_(t,e,s){Xn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Xn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async r=>{if(r){Xn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,r.name);try{return await s()}finally{Xn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,r.name)}}else{if(e===0)throw Xn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new d_(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Xn.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}c_();const h_={url:_w,storageKey:jw,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:kw,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function gf(t,e,s){return await s()}const Zn={};class Ki{constructor(e){var s,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ki.nextInstanceID,Ki.nextInstanceID+=1,this.instanceID>0&&Yt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},h_),e);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new l_({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=w0(r.fetch),this.lock=r.lock||gf,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:Yt()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=u_:this.lock=gf,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(r.storage?this.storage=r.storage:b0()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=pf(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=pf(this.memoryStorage)),Yt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,s;return(s=(e=Zn[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(e){Zn[this.storageKey]=Object.assign(Object.assign({},Zn[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,s;return(s=(e=Zn[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Zn[this.storageKey]=Object.assign(Object.assign({},Zn[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${g0}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const s=$w(window.location.href);let n="none";if(this._isImplicitGrantCallback(s)?n="implicit":await this._isPKCECallback(s)&&(n="pkce"),Yt()&&this.detectSessionInUrl&&n!=="none"){const{data:r,error:i}=await this._getSessionFromURL(s,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Tw(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=r;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return fe(s)?{error:s}:{error:new y0("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,n,r;try{const i=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:ps}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(fe(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var s,n,r;try{let i;if("email"in e){const{email:u,password:h,options:f}=e;let m=null,p=null;this.flowType==="pkce"&&([m,p]=await Qn(this.storage,this.storageKey)),i=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:h,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:m,code_challenge_method:p},xform:ps})}else if("phone"in e){const{phone:u,password:h,options:f}=e;i=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(r=f==null?void 0:f.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:ps})}else throw new Ca("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(fe(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let s;if("email"in e){const{email:i,password:o,options:l}=e;s=await ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:mf})}else if("phone"in e){const{phone:i,password:o,options:l}=e;s=await ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:mf})}else throw new Ca("You must provide either an email or phone number and a password");const{data:n,error:r}=s;return r?{data:{user:null,session:null},error:r}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Sa}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r})}catch(s){if(fe(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(e){var s,n,r,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:s}=e;if(s==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}async signInWithSolana(e){var s,n,r,i,o,l,c,d,u,h,f,m;let p,v;if("message"in e)p=e.message,v=e.signature;else{const{chain:b,wallet:x,statement:g,options:y}=e;let w;if(Yt())if(typeof x=="object")w=x;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))w=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=x}const _=new URL((s=y==null?void 0:y.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in w&&w.signIn){const N=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y==null?void 0:y.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),g?{statement:g}:null));let P;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")P=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)P=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in P&&"signature"in P&&(typeof P.signedMessage=="string"||P.signedMessage instanceof Uint8Array)&&P.signature instanceof Uint8Array)p=typeof P.signedMessage=="string"?P.signedMessage:new TextDecoder().decode(P.signedMessage),v=P.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${_.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(r=(n=y==null?void 0:y.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&r!==void 0?r:new Date().toISOString()}`,...!((i=y==null?void 0:y.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((o=y==null?void 0:y.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((l=y==null?void 0:y.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((c=y==null?void 0:y.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((d=y==null?void 0:y.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((h=(u=y==null?void 0:y.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...y.signInWithSolana.resources.map(P=>`- ${P}`)]:[]].join(`
`);const N=await w.signMessage(new TextEncoder().encode(p),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=N}}try{const{data:b,error:x}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:Bw(v)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:ps});if(x)throw x;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new Sa}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:x})}catch(b){if(fe(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(e){const s=await yn(this.storage,`${this.storageKey}-code-verifier`),[n,r]=(s??"").split("/");try{const{data:i,error:o}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:ps});if(await Ls(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Sa}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:r??null}),error:o})}catch(i){if(fe(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:s,provider:n,token:r,access_token:i,nonce:o}=e,l=await ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:r,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:ps}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Sa}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(s){if(fe(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(e){var s,n,r,i,o;try{if("email"in e){const{email:l,options:c}=e;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await Qn(this.storage,this.storageKey));const{error:h}=await ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:c}=e,{data:d,error:u}=await ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new Ca("You must provide either an email or phone number.")}catch(l){if(fe(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var s,n;try{let r,i;"options"in e&&(r=(s=e.options)===null||s===void 0?void 0:s.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await ge(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:r,xform:ps});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,d=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(r){if(fe(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var s,n,r;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Qn(this.storage,this.storageKey)),await ge(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&n!==void 0?n:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:n_})}catch(i){if(fe(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:n}=e;if(n)throw n;if(!s)throw new Bs;const{error:r}=await ge(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(fe(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const s=`${this.url}/resend`;if("email"in e){const{email:n,type:r,options:i}=e,{error:o}=await ge(this.fetch,"POST",s,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:r,options:i}=e,{data:o,error:l}=await ge(this.fetch,"POST",s,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Ca("You must provide either an email or phone number and a type")}catch(s){if(fe(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await n,await s()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=s();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await yn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Gl:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const o=await yn(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=Xl()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,d,u)=>(!o&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:e},error:null}}const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Us}):await this._useSession(async s=>{var n,r,i;const{data:o,error:l}=s;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Bs}:await ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0,xform:Us})})}catch(s){if(fe(s))return Ew(s)&&(await this._removeSession(),await Ls(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async n=>{const{data:r,error:i}=n;if(i)throw i;if(!r.session)throw new Bs;const o=r.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await Qn(this.storage,this.storageKey));const{data:d,error:u}=await ge(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Us});if(u)throw u;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(fe(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Bs;const s=Date.now()/1e3;let n=s,r=!0,i=null;const{payload:o}=Jl(e.access_token);if(o.exp&&(n=o.exp,r=n<=s),r){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-s,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(s){if(fe(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var n;if(!e){const{data:o,error:l}=s;if(l)throw l;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Bs;const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(fe(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(e,s){try{if(!Yt())throw new Pa("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Pa(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new of("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Pa("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new of("No code detected.");const{data:g,error:y}=await this._exchangeCodeForSession(e.code);if(y)throw y;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:g.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:d}=e;if(!i||!l||!o||!d)throw new Pa("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(l);let f=u+h;c&&(f=parseInt(c));const m=f-u;m*1e3<=tr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const p=f-h;u-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,f,u):u-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,f,u);const{data:v,error:b}=await this._getUser(i);if(b)throw b;const x={provider_token:n,provider_refresh_token:r,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:d,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:e.type},error:null}}catch(n){if(fe(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const s=await yn(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var n;const{data:r,error:i}=s;if(i)return{error:i};const o=(n=r.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(Pw(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Ls(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const s=zw(),n={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async s=>{var n,r;try{const{data:{session:i},error:o}=s;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,s={}){let n=null,r=null;this.flowType==="pkce"&&([n,r]=await Qn(this.storage,this.storageKey,!0));try{return await ge(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(i){if(fe(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:s,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(s){if(fe(s))return{data:null,error:s};throw s}}async linkIdentity(e){var s;try{const{data:n,error:r}=await this._useSession(async i=>{var o,l,c,d,u;const{data:h,error:f}=i;if(f)throw f;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await ge(this.fetch,"GET",m,{headers:this.headers,jwt:(u=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(r)throw r;return Yt()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(fe(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async s=>{var n,r;const{data:i,error:o}=s;if(o)throw o;return await ge(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&r!==void 0?r:void 0})})}catch(s){if(fe(s))return{data:null,error:s};throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const n=Date.now();return await Ww(async r=>(r>0&&await Uw(200*Math.pow(2,r-1)),this._debug(s,"refreshing attempt",r),await ge(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ps})),(r,i)=>{const o=200*Math.pow(2,r);return i&&Ql(i)&&Date.now()+o-n<tr})}catch(n){if(this._debug(s,"error",n),fe(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",n),Yt()&&!s.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,s;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await yn(this.storage,this.storageKey);if(r&&this.userStorage){let o=await yn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:r.user},await sr(this.userStorage,this.storageKey+"-user",o)),r.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:Xl()}else if(r&&!r.user&&!r.user){const o=await yn(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(r.user=o.user,await Ls(this.storage,this.storageKey+"-user"),await sr(this.storage,this.storageKey,r)):r.user=Xl()}if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const i=((s=r.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<Gl;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Gl}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:o}=await this._callRefreshToken(r.refresh_token);o&&(console.error(o),Ql(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(r.user&&r.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(r.access_token);!l&&(o!=null&&o.user)?(r.user=o.user,await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var s,n;if(!e)throw new Bs;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new fl;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Bs;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(r,"error",i),fe(i)){const o={session:null,error:i};return Ql(i)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,s,n=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",s,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:s});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,s)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const s=Object.assign({},e),n=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&s.user&&await sr(this.userStorage,this.storageKey+"-user",{user:s.user});const r=Object.assign({},s);delete r.user;const i=hf(r);await sr(this.storage,this.storageKey,i)}else{const r=hf(s);await sr(this.storage,this.storageKey,r)}}async _removeSession(){this._debug("#_removeSession()"),await Ls(this.storage,this.storageKey),await Ls(this.storage,this.storageKey+"-code-verifier"),await Ls(this.storage,this.storageKey+"-user"),this.userStorage&&await Ls(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Yt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),tr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:n}}=s;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((n.expires_at*1e3-e)/tr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${tr}ms, refresh threshold is ${ud} ticks`),r<=ud&&await this._callRefreshToken(n.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof _0)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Yt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,n){const r=[`provider=${encodeURIComponent(s)}`];if(n!=null&&n.redirectTo&&r.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&r.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Qn(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});r.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);r.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&r.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var n;const{data:r,error:i}=s;return i?{data:null,error:i}:await ge(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(fe(s))return{data:null,error:s};throw s}}async _enroll(e){try{return await this._useSession(async s=>{var n,r;const{data:i,error:o}=s;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:d}=await ge(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((r=c==null?void 0:c.totp)===null||r===void 0)&&r.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(s){if(fe(s))return{data:null,error:s};throw s}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:r,error:i}=s;if(i)return{data:null,error:i};const{data:o,error:l}=await ge(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(s){if(fe(s))return{data:null,error:s};throw s}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:r,error:i}=s;return i?{data:null,error:i}:await ge(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(fe(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(e){const{data:s,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){const{data:{user:e},error:s}=await this.getUser();if(s)return{data:null,error:s};const n=(e==null?void 0:e.factors)||[],r=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:r,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var s,n;const{data:{session:r},error:i}=e;if(i)return{data:null,error:i};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Jl(r.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(s=r.user.factors)===null||s===void 0?void 0:s.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const u=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,s={keys:[]}){let n=s.keys.find(l=>l.kid===e);if(n)return n;const r=Date.now();if(n=this.jwks.keys.find(l=>l.kid===e),n&&this.jwks_cached_at+Sw>r)return n;const{data:i,error:o}=await ge(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=r,n=i.keys.find(l=>l.kid===e),!n)?null:n}async getClaims(e,s={}){try{let n=e;if(!n){const{data:m,error:p}=await this.getSession();if(p||!m.session)return{data:null,error:p};n=m.session.access_token}const{header:r,payload:i,signature:o,raw:{header:l,payload:c}}=Jl(n);s!=null&&s.allowExpired||Qw(i.exp);const d=!r.alg||r.alg.startsWith("HS")||!r.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(r.kid,s!=null&&s.keys?{keys:s.keys}:s==null?void 0:s.jwks);if(!d){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:i,header:r,signature:o},error:null}}const u=Jw(r.alg),h=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,o,Dw(`${l}.${c}`)))throw new md("Invalid JWT signature");return{data:{claims:i,header:r,signature:o},error:null}}catch(n){if(fe(n))return{data:null,error:n};throw n}}}Ki.nextInstanceID=0;const f_=Ki;class m_ extends f_{constructor(e){super(e)}}var p_=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};class g_{constructor(e,s,n){var r,i,o;if(this.supabaseUrl=e,this.supabaseKey=s,!e)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const l=bw(e),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:hw,realtime:mw,auth:Object.assign(Object.assign({},fw),{storageKey:d}),global:uw},h=ww(n??{},u);this.storageKey=(r=h.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=yw(s,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new Mb(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new lw(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new db(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,s={},n={}){return this.rest.rpc(e,s,n)}channel(e,s={config:{}}){return this.realtime.channel(e,s)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,s;return p_(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(s=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:s,detectSessionInUrl:n,storage:r,storageKey:i,flowType:o,lock:l,debug:c},d,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new m_({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),d),storageKey:i,autoRefreshToken:e,persistSession:s,detectSessionInUrl:n,storage:r,flowType:o,lock:l,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Gb(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,n)=>{this._handleTokenChanged(s,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,s,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const x_=(t,e,s)=>new g_(t,e,s);function y_(){if(typeof window<"u"||typeof process>"u"||process.version===void 0||process.version===null)return!1;const t=process.version.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}y_()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const v_="https://eymxpphofhhfeuvaqfad.supabase.co",b_="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImV5bXhwcGhvZmhoZmV1dmFxZmFkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMzNTAwMTIsImV4cCI6MjA2ODkyNjAxMn0.mR-TxkFP6b48BB_s_W7mD7NFV3oEZIweAQk7EefzssY",K=x_(v_,b_),j0=k.createContext(void 0);function w_({children:t}){const[e,s]=k.useState(null),[n,r]=k.useState(!1);k.useEffect(()=>{(async()=>{r(!0);try{const{data:{session:d}}=await K.auth.getSession();if(d!=null&&d.user){const{data:u}=await K.from("profiles").select("*").eq("id",d.user.id).limit(1);u&&u.length>0&&s({id:u[0].id,username:u[0].username,email:u[0].email||"",role:u[0].role||"user",joinedDate:u[0].created_at})}}catch(d){console.error("Session check error:",d)}finally{r(!1)}})()},[]);const i=async(c,d)=>{try{console.log(" LOGIN ATTEMPT - Username:",c);const{data:u,error:h}=await K.from("profiles").select("*").eq("username",c).limit(1);if(h)return console.error(" LOGIN FAILED - Database error:",h),!1;if(!u||u.length===0)return console.error(" LOGIN FAILED - No profile found for username:",c),!1;const f=u[0];if(!f.email)return console.error(" LOGIN FAILED - Profile has no email:",f),!1;console.log(" Profile found - Email:",f.email,"Role:",f.role);const{data:m,error:p}=await K.auth.signInWithPassword({email:f.email,password:d});return p?(console.error(" SUPABASE AUTH ERROR:",p.message),!1):(s({id:f.id,username:f.username,email:f.email||"",role:f.role||"user",joinedDate:f.created_at}),!0)}catch(u){return console.error("Login error:",u),!1}},o=async(c,d,u,h)=>{var f,m,p,v;try{console.log(" SIGNUP ATTEMPT - Username:",c,"Email:",d);const{data:b,error:x}=await K.auth.signUp({email:d,password:u,options:{data:{username:c}}});if(x)return console.error(" SUPABASE SIGNUP ERROR:",x.message,"Code:",x.status),!1;if(console.log(" SUPABASE SIGNUP SUCCESS:",{user_id:(f=b.user)==null?void 0:f.id,email:(m=b.user)==null?void 0:m.email,email_confirmed:(p=b.user)==null?void 0:p.email_confirmed_at,user_metadata:(v=b.user)==null?void 0:v.user_metadata}),b.user){const{error:g}=await K.from("profiles").insert({id:b.user.id,username:c,email:d,role:h});g?console.error(" PROFILE CREATION ERROR:",g.message):console.log(" PROFILE CREATED SUCCESSFULLY")}return!0}catch(b){return console.error("Signup error:",b),!1}},l=async()=>{try{console.log(" LOGOUT: Starting logout process...");const{error:c}=await K.auth.signOut();c?console.error(" LOGOUT: Supabase signout error:",c):console.log(" LOGOUT: Supabase signout successful"),s(null),console.log(" LOGOUT: User state cleared - Back to guest mode"),window.location.reload()}catch(c){console.error(" LOGOUT: Unexpected error:",c),s(null),window.location.reload()}};return a.jsx(j0.Provider,{value:{user:e,login:i,signup:o,logout:l,loading:n,setUser:s},children:t})}function ns(){const t=k.useContext(j0);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const k0=k.createContext(void 0);function __({children:t}){const[e,s]=k.useState({isOpen:!1,title:"",message:"",type:"alert"}),n=(c,d)=>new Promise(u=>{s({isOpen:!0,title:c,message:d,type:"confirm",resolve:u})}),r=(c,d)=>new Promise(u=>{s({isOpen:!0,title:c,message:d,type:"alert",resolve:u})}),i=()=>{e.resolve&&e.resolve(!0),s(c=>({...c,isOpen:!1}))},o=()=>{e.resolve&&(e.type==="confirm"?e.resolve(!1):e.resolve()),s(c=>({...c,isOpen:!1}))},l=()=>{o()};return a.jsxs(k0.Provider,{value:{confirm:n,alert:r},children:[t,e.isOpen&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50",onClick:l}),a.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4 z-50",children:a.jsx("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full mx-4 border border-gray-200",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center mb-4",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mr-4",children:a.jsx("span",{className:"text-blue-600 text-xl",children:e.type==="confirm"?"":""})}),a.jsx("div",{children:a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e.title})})]}),a.jsx("p",{className:"text-gray-600 mb-6",children:e.message}),a.jsxs("div",{className:"flex justify-end space-x-3",children:[e.type==="confirm"&&a.jsx("button",{onClick:o,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:i,className:`px-4 py-2 rounded-md transition-colors ${e.type==="confirm"?"bg-red-600 text-white hover:bg-red-700":"bg-blue-600 text-white hover:bg-blue-700"}`,children:e.type==="confirm"?"Confirm":"OK"})]})]})})})]})]})}function Kn(){const t=k.useContext(k0);if(t===void 0)throw new Error("useConfirmation must be used within a ConfirmationProvider");return t}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var j_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k_=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ue=(t,e)=>{const s=k.forwardRef(({color:n="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...d},u)=>k.createElement("svg",{ref:u,...j_,width:r,height:r,stroke:n,strokeWidth:o?Number(i)*24/Number(r):i,className:["lucide",`lucide-${k_(t)}`,l].join(" "),...d},[...e.map(([h,f])=>k.createElement(h,f)),...Array.isArray(c)?c:[c]]));return s.displayName=`${t}`,s};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=ue("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ml=ue("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jr=ue("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mo=ue("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fn=ue("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N_=ue("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N0=ue("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S_=ue("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Su=ue("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C_=ue("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const to=ue("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P_=ue("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cu=ue("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E_=ue("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T_=ue("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xf=ue("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A_=ue("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sn=ue("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O_=ue("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S0=ue("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R_=ue("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M_=ue("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L_=ue("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D_=ue("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const li=ue("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B_=ue("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mn=ue("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I_=ue("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yf=ue("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Or=ue("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C0=ue("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z_=ue("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P0=ue("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E0=ue("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ki=ue("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Un=ue("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $_=ue("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vf=ue("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F_=ue("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T0=ue("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=ue("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U_=ue("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=ue("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A0=ue("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const on=ue("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=ue("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pu=ue("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function W_({onBackToLogin:t,onSignupSuccess:e}){const[s,n]=k.useState(""),[r,i]=k.useState(""),[o,l]=k.useState(""),[c,d]=k.useState(""),[u,h]=k.useState(""),[f,m]=k.useState(!1),[p,v]=k.useState(!1),{signup:b}=ns(),x=async g=>{if(g.preventDefault(),m(!0),h(""),v(!1),o!==c){h("Passwords do not match."),m(!1);return}if(o.length<6){h("Password must be at least 6 characters long."),m(!1);return}if(s.trim().length<3){h("Username must be at least 3 characters long."),m(!1);return}if(!/^[a-zA-Z0-9_-]+$/.test(s.trim())){h("Username can only contain letters, numbers, hyphens, and underscores."),m(!1);return}await b(s.trim(),r.trim(),o,"user")?v(!0):h("Failed to create account. Username might already be taken or there was a server error. Please try a different username."),m(!1)};return p?a.jsx("div",{className:"w-full max-w-md bg-white rounded-xl shadow-2xl p-8 mx-auto",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx("span",{className:"text-white text-2xl",children:""})}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Account Created!"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Your account has been successfully created! You can now sign in to access the system."}),a.jsx("button",{onClick:t,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors",children:"Back to Login"})]})}):a.jsxs("div",{className:"w-full max-w-md bg-white rounded-xl shadow-2xl p-8 mx-auto",children:[a.jsxs("div",{className:"flex items-center mb-6",children:[a.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full transition-colors mr-3",children:a.jsx(ml,{size:20})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Create Account"}),a.jsx("p",{className:"text-gray-600",children:"Join the Beyblade community"})]})]}),a.jsxs("form",{onSubmit:x,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700",children:"Username"}),a.jsx("input",{type:"text",id:"username",value:s,onChange:g=>n(g.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,minLength:3,placeholder:"Choose a unique username"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),a.jsx("input",{type:"email",id:"email",value:r,onChange:g=>i(g.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,placeholder:"your.email@example.com"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),a.jsx("input",{type:"password",id:"password",value:o,onChange:g=>l(g.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,minLength:6,placeholder:"At least 6 characters"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),a.jsx("input",{type:"password",id:"confirmPassword",value:c,onChange:g=>d(g.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,minLength:6,placeholder:"Confirm your password"})]}),u&&a.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-md",children:u}),a.jsx("button",{type:"submit",disabled:f,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50",children:f?"Creating Account...":"Create Account"})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsx("p",{className:"text-xs text-gray-500",children:"By creating an account, you agree to participate in tournaments and follow community guidelines. All new accounts start with basic user permissions."})})]})}function O0({onLoginSuccess:t}){const[e,s]=k.useState(""),[n,r]=k.useState(""),[i,o]=k.useState(""),[l,c]=k.useState(!1),[d,u]=k.useState("login"),{login:h}=ns(),f=async m=>{m.preventDefault(),c(!0),o(""),await h(e,n)?(s(""),r(""),o(""),t==null||t()):o("Invalid username or password. Please check your credentials and try again."),c(!1)};return d==="signup"?a.jsx(W_,{onBackToLogin:()=>u("login"),onSignupSuccess:t}):a.jsxs("div",{className:"w-full max-w-md p-8 mx-auto",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"w-16 h-16 bg-gray-900 rounded-lg flex items-center justify-center mx-auto mb-4",children:a.jsx("span",{className:"text-white text-2xl font-bold font-space-grotesk",children:"B"})}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 font-space-grotesk",children:"OBC Portal"}),a.jsx("p",{className:"text-gray-600 mt-2 font-inter",children:"Sign in to access your account"})]}),a.jsxs("form",{onSubmit:f,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"username",className:"form-label",children:"Username"}),a.jsx("input",{type:"text",id:"username",value:e,onChange:m=>s(m.target.value),className:"input-field w-full",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"form-label",children:"Password"}),a.jsx("input",{type:"password",id:"password",value:n,onChange:m=>r(m.target.value),className:"input-field w-full",required:!0})]}),i&&a.jsx("div",{className:"text-red-600 text-sm font-inter text-center",children:i}),a.jsx("button",{type:"submit",disabled:l,className:"primary-button w-full disabled:opacity-50 text-center",children:l?"Signing in...":"Sign In"})]}),a.jsxs("div",{className:"mt-6",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-gray-300"})}),a.jsx("div",{className:"relative flex justify-center text-sm",children:a.jsx("span",{className:"px-2 bg-white text-gray-500 font-inter",children:"Or"})})]}),a.jsx("div",{className:"mt-6",children:a.jsx("button",{onClick:()=>u("signup"),className:"secondary-button w-full text-center",children:"Create New Account"})})]}),a.jsx("div",{className:"mt-6 text-center px-4",children:a.jsx("p",{className:"text-xs text-gray-500 font-inter",children:"Create an account to participate in tournaments and access all features."})})]})}const H_=[{id:"dashboard",label:"Dashboard",icon:a.jsx(A_,{size:20}),roles:["user","technical_officer","admin","developer"]},{id:"tournaments",label:"Tournaments",icon:a.jsx(Zt,{size:20}),roles:["user","technical_officer","admin","developer"]},{id:"analytics",label:"Analytics",icon:a.jsx(Mo,{size:20}),roles:["user","technical_officer","admin","developer"]},{id:"inventory",label:"Inventory & Decks",icon:a.jsx(li,{size:20}),roles:["user","technical_officer","admin","developer"]},{id:"match-tracker",label:"Match Tracker",icon:a.jsx(Fn,{size:20}),roles:["technical_officer","admin","developer"]},{id:"tournament-manager",label:"Tournament Manager",icon:a.jsx(P0,{size:20}),roles:["admin","developer"]},{id:"user-management",label:"User Management",icon:a.jsx(on,{size:20}),roles:["admin","developer"]},{id:"database",label:"Database",icon:a.jsx(to,{size:20}),roles:["developer"]}];function V_({isOpen:t,currentView:e,onViewChange:s,onToggle:n}){const{user:r,logout:i}=ns(),[o,l]=He.useState(!1),c=H_.filter(u=>r?u.roles.includes(r.role||"user"):!u.requiresAuth&&u.roles.includes("user")),d=async()=>{await i(),n()};return a.jsxs(a.Fragment,{children:[a.jsxs("aside",{className:`fixed left-0 top-0 z-40 h-screen flex flex-col 
        transition-transform ${t?"translate-x-0":"-translate-x-full"} 
        bg-white border-r border-gray-200 ${t?"w-64":"w-16"}`,children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-10 h-10 bg-gray-900 rounded-lg flex items-center justify-center font-space-grotesk font-bold text-lg text-white",children:"B"}),t&&a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-space-grotesk font-bold text-gray-900",children:"OBC Portal"}),a.jsx("p",{className:"text-xs text-gray-500 font-inter",children:"Beyblade Community"})]})]}),t&&a.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(Pt,{size:20})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto px-4 py-6",children:a.jsx("ul",{className:"space-y-2",children:c.map(u=>a.jsx("li",{children:a.jsxs("button",{onClick:()=>s(u.id),className:e===u.id?"sidebar-item-active":"sidebar-item",children:[a.jsx("div",{className:"transition-colors",children:u.icon}),t&&a.jsx("span",{className:"ml-3 font-inter",children:u.label})]})},u.id))})}),a.jsx("div",{className:"px-4 border-t border-gray-200 py-4",children:r&&!r.id.startsWith("guest-")?a.jsxs("button",{onClick:d,className:"sidebar-item w-full text-red-600 hover:text-red-700 hover:bg-red-50",children:[a.jsx("div",{className:"transition-colors",children:a.jsx(S0,{size:20})}),t&&a.jsx("span",{className:"ml-3 font-inter",children:"Logout"})]}):a.jsxs("button",{onClick:()=>l(!0),className:"sidebar-item w-full text-blue-600 hover:text-blue-700 hover:bg-blue-50",children:[a.jsx("div",{className:"transition-colors",children:a.jsx(O_,{size:20})}),t&&a.jsx("span",{className:"ml-3 font-inter",children:"Login"})]})}),t&&a.jsx("div",{className:"px-2 pb-4",children:a.jsxs("div",{className:"bg-gray-100 rounded-lg p-4 border border-gray-200",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx("div",{className:"w-6 h-6 bg-blue-600 rounded flex items-center justify-center",children:a.jsx("span",{className:"text-xs text-white",children:"J"})}),a.jsx("h3",{className:"font-space-grotesk font-semibold text-sm text-gray-900",children:"Created by Jedynsay"})]}),a.jsx("p",{className:"text-xs text-gray-600 font-inter mb-2",children:"Powered by Supabase"})]})})]}),o&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-overlay",style:{zIndex:50},onClick:()=>l(!1)}),a.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4 pointer-events-none z-50",children:a.jsxs("div",{className:"relative pointer-events-auto bg-white rounded-xl shadow-2xl max-w-md w-full mx-4 max-h-[90vh]",children:[a.jsx(O0,{onLoginSuccess:()=>l(!1)}),a.jsx("button",{onClick:()=>l(!1),className:"absolute top-4 right-4 w-8 h-8 bg-gray-100 hover:bg-gray-200 rounded-full flex items-center justify-center text-gray-600 hover:text-gray-800 transition-colors",children:a.jsx(Pt,{size:16})})]})})]})]})}function bf({onViewChange:t}){var ie,ce,T,$,q,U;const{user:e,logout:s}=ns(),[n,r]=k.useState(!1),[i,o]=k.useState(!1),[l,c]=k.useState({totalTournaments:0,activePlayers:0,upcomingEvents:0,completedMatches:0}),[d,u]=k.useState([]),[h,f]=k.useState([]),[m,p]=k.useState([]),[v,b]=k.useState([]),[x,g]=k.useState(!0),[y,w]=k.useState(0),[_,N]=k.useState("all"),[P,E]=k.useState([]);k.useEffect(()=>{C(),e&&!e.id.startsWith("guest-")&&V()},[e]),k.useEffect(()=>{if(h.length>1){const L=setInterval(()=>{w(H=>(H+1)%h.length)},5e3);return()=>clearInterval(L)}},[h.length]);const C=async()=>{try{const[L,H,te]=await Promise.all([K.from("tournaments").select("*"),K.from("profiles").select("*",{count:"exact",head:!0}),K.from("match_results").select("*",{count:"exact",head:!0})]),Q=L.data||[];E(Q);const O=Q.filter(X=>X.status==="upcoming").slice(0,3);u(O),c({totalTournaments:Q.length,activePlayers:H.count||0,upcomingEvents:Q.filter(X=>X.status==="upcoming").length,completedMatches:te.count||0}),await R(),await M()}catch(L){console.error("Error fetching dashboard data:",L)}finally{g(!1)}},R=async()=>{try{const{data:L}=await K.from("match_results").select("player1_name, player2_name, winner_name");if(!L)return;const H={};L.forEach(Q=>{[Q.player1_name,Q.player2_name].forEach(O=>{O&&(H[O]||(H[O]={wins:0,matches:0}),H[O].matches++,Q.winner_name===O&&H[O].wins++)})});const te=Object.entries(H).map(([Q,O])=>({name:Q,wins:O.wins,tournaments:Math.ceil(O.matches/10),winRate:Math.round(O.wins/O.matches*100)})).sort((Q,O)=>O.winRate-Q.winRate).slice(0,5);f(te)}catch(L){console.error("Error fetching top players:",L)}},M=async()=>{try{let L=K.from("match_results").select("player1_name, player2_name, player1_beyblade, player2_beyblade, winner_name, outcome, submitted_at, tournament_id").order("submitted_at",{ascending:!1}).limit(10);_!=="all"&&(L=L.eq("tournament_id",_));const{data:H}=await L;b(H||[])}catch(L){console.error("Error fetching recent matches:",L)}};k.useEffect(()=>{x||M()},[_]);const V=async()=>{if(!(!e||e.id.startsWith("guest-")))try{const{data:L}=await K.from("deck_presets").select("*").eq("user_id",e.id);p(L||[])}catch(L){console.error("Error fetching deck presets:",L)}};return x?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-blue-500 border-t-transparent mx-auto mb-4"}),a.jsx("p",{className:"text-blue-200 text-lg",children:"Loading battle arena..."})]})}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900",children:[a.jsxs("section",{className:"relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/20 to-purple-600/20",children:a.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml,%3Csvg%20width%3D%2260%22%20height%3D%2260%22%20viewBox%3D%220%200%2060%2060%22%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%3E%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%3Cg%20fill%3D%22%239C92AC%22%20fill-opacity%3D%220.1%22%3E%3Ccircle%20cx%3D%2230%22%20cy%3D%2230%22%20r%3D%222%22/%3E%3C/g%3E%3C/g%3E%3C/svg%3E')] animate-pulse"})}),a.jsxs("div",{className:"relative max-w-7xl mx-auto px-6 py-20",children:[e&&!e.id.startsWith("guest-")&&a.jsx("div",{className:"absolute top-4 right-4",children:a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>r(!n),className:"flex items-center space-x-3 bg-slate-800/90 backdrop-blur-sm rounded-xl px-4 py-2 shadow-lg hover:bg-slate-700/90 transition-all duration-200 cursor-pointer",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold",children:e.username.charAt(0).toUpperCase()}),a.jsxs("div",{className:"text-white",children:[a.jsx("p",{className:"font-semibold text-sm",children:e.username}),a.jsx("p",{className:"text-xs text-blue-200 capitalize",children:e.role})]})]}),n&&a.jsx("div",{className:"absolute top-full right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50",children:a.jsxs("div",{className:"py-1",children:[a.jsxs("div",{className:"px-4 py-3 border-b border-gray-200",children:[a.jsx("p",{className:"font-semibold text-gray-900",children:e.username}),a.jsx("p",{className:"text-sm text-gray-600 capitalize",children:e.role})]}),a.jsxs("button",{onClick:()=>{r(!1)},className:"w-full text-left px-4 py-3 hover:bg-gray-50 flex items-center space-x-2 text-gray-700 hover:text-gray-900 transition-colors",children:[a.jsx(P0,{size:16}),a.jsx("span",{children:"Settings"})]}),a.jsxs("button",{onClick:async()=>{r(!1),await s()},className:"w-full text-left px-4 py-3 hover:bg-red-50 flex items-center space-x-2 text-red-600 hover:text-red-700 transition-colors",children:[a.jsx(S0,{size:16}),a.jsx("span",{children:"Logout"})]})]})})]})}),n&&a.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>r(!1)}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center space-x-2 text-yellow-400",children:[a.jsx(T_,{size:24}),a.jsx("span",{className:"text-sm font-semibold uppercase tracking-wider",children:"Battle Ready"})]}),a.jsxs("h1",{className:"text-5xl lg:text-6xl font-bold text-white leading-tight",children:["Welcome back,"," ",a.jsx("span",{className:"bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:e?e.username:"Blader"}),"!"]}),a.jsx("p",{className:"text-xl text-blue-200 leading-relaxed",children:"Gear up and join the next battle. The arena awaits your ultimate Beyblade combination."})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[a.jsxs("button",{onClick:()=>t==null?void 0:t("tournaments"),className:"group bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white px-8 py-4 rounded-xl font-semibold text-lg transition-all duration-300 transform hover:scale-105 hover:shadow-xl hover:shadow-blue-500/25 flex items-center justify-center space-x-2 cursor-pointer",children:[a.jsx(Zt,{size:24}),a.jsx("span",{children:"Check Tournaments"}),a.jsx(Jr,{size:20,className:"group-hover:translate-x-1 transition-transform"})]}),a.jsxs("button",{onClick:()=>t==null?void 0:t("inventory"),className:"group bg-slate-800/50 hover:bg-slate-700/50 text-white border border-slate-600 hover:border-slate-500 px-8 py-4 rounded-xl font-semibold text-lg transition-all duration-300 flex items-center justify-center space-x-2 cursor-pointer",children:[a.jsx(sn,{size:24}),a.jsx("span",{children:"Deck Builder and Inventory Tracker"}),a.jsx(N0,{size:20,className:"group-hover:translate-x-1 transition-transform"})]})]})]}),e&&!e.id.startsWith("guest-")?a.jsx(a.Fragment,{children:a.jsx("div",{className:"relative",children:a.jsxs("div",{className:"relative w-80 h-80 mx-auto",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full animate-spin-slow opacity-20"}),a.jsx("div",{className:"absolute inset-4 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full animate-pulse"}),a.jsx("div",{className:"absolute inset-8 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-full flex items-center justify-center",children:a.jsx(Pu,{size:120,className:"text-white animate-pulse"})}),a.jsx("div",{className:"absolute -top-4 -right-4 w-8 h-8 bg-yellow-400 rounded-full animate-ping"}),a.jsx("div",{className:"absolute -bottom-4 -left-4 w-6 h-6 bg-blue-400 rounded-full animate-ping delay-1000"}),a.jsx("div",{className:"absolute top-1/2 -left-8 w-4 h-4 bg-purple-400 rounded-full animate-ping delay-500"})]})})}):a.jsx(a.Fragment,{children:a.jsx("div",{className:"absolute top-4 right-4",children:a.jsx("button",{onClick:()=>o(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-xl font-semibold transition-all duration-200 flex items-center space-x-2",children:a.jsx("span",{children:"Login"})})})})]})]})]}),a.jsx("section",{className:"max-w-7xl mx-auto px-6 py-16",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsxs("button",{onClick:()=>t==null?void 0:t("tournaments"),className:"group bg-gradient-to-br from-slate-800 to-slate-900 border border-slate-700 rounded-2xl p-6 hover:border-blue-500 transition-all duration-300 hover:shadow-xl hover:shadow-blue-500/10 hover:-translate-y-1 cursor-pointer text-left w-full",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:"p-3 bg-blue-600 rounded-xl",children:a.jsx(Zt,{size:24,className:"text-white"})}),a.jsxs("span",{className:"text-xs bg-yellow-500 text-black px-2 py-1 rounded-full font-semibold",children:[l.upcomingEvents," LIVE"]})]}),a.jsx("h3",{className:"text-white font-bold text-lg mb-2",children:"Next Tournament"}),d.length>0?a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-blue-300 font-semibold",children:d[0].name}),a.jsx("p",{className:"text-slate-400 text-sm",children:new Date(d[0].tournament_date).toLocaleDateString()}),a.jsx("p",{className:"text-slate-400 text-sm",children:d[0].location}),a.jsxs("div",{className:"flex justify-between items-center mt-4",children:[a.jsxs("span",{className:"text-xs text-slate-500",children:[d[0].current_participants,"/",d[0].max_participants," spots"]}),a.jsxs("span",{className:"text-blue-400 hover:text-blue-300 text-sm font-semibold flex items-center space-x-1 group-hover:translate-x-1 transition-transform",children:[a.jsx("span",{children:"Register"}),a.jsx(Jr,{size:14})]})]})]}):a.jsx("p",{className:"text-slate-400",children:"No upcoming tournaments"})]}),a.jsxs("button",{onClick:()=>t==null?void 0:t("analytics"),className:"group bg-gradient-to-br from-slate-800 to-slate-900 border border-slate-700 rounded-2xl p-6 hover:border-purple-500 transition-all duration-300 hover:shadow-xl hover:shadow-purple-500/10 hover:-translate-y-1 cursor-pointer text-left w-full",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:"p-3 bg-purple-600 rounded-xl",children:a.jsx(U_,{size:24,className:"text-white"})}),a.jsx("span",{className:"text-xs bg-green-500 text-black px-2 py-1 rounded-full font-semibold",children:"UPDATED"})]}),a.jsx("h3",{className:"text-white font-bold text-lg mb-2",children:"Meta Analysis"}),a.jsx("p",{className:"text-purple-300 text-sm mb-2",children:"Latest tier rankings"}),a.jsx("p",{className:"text-slate-400 text-xs mb-4",children:"Updated 2 hours ago"}),a.jsxs("span",{className:"text-purple-400 hover:text-purple-300 text-sm font-semibold flex items-center space-x-1 group-hover:translate-x-1 transition-transform",children:[a.jsx("span",{children:"View Stats"}),a.jsx(Jr,{size:14})]})]}),a.jsxs("button",{onClick:()=>{alert("News section is currently under construction. Stay tuned for updates!")},className:"group bg-gradient-to-br from-slate-800 to-slate-900 border border-slate-700 rounded-2xl p-6 hover:border-green-500 transition-all duration-300 hover:shadow-xl hover:shadow-green-500/10 hover:-translate-y-1 cursor-pointer text-left w-full",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:"p-3 bg-green-600 rounded-xl",children:a.jsx(D_,{size:24,className:"text-white"})}),a.jsx("span",{className:"text-xs bg-yellow-500 text-black px-2 py-1 rounded-full font-semibold",children:"SOON"})]}),a.jsx("h3",{className:"text-white font-bold text-lg mb-2",children:"Under Construction"}),a.jsx("p",{className:"text-green-300 text-sm mb-2",children:"News & Updates"}),a.jsx("p",{className:"text-slate-400 text-xs mb-4",children:"Coming soon to keep you informed"}),a.jsxs("span",{className:"text-green-400 hover:text-green-300 text-sm font-semibold flex items-center space-x-1 group-hover:translate-x-1 transition-transform",children:[a.jsx("span",{children:"Coming Soon"}),a.jsx(Jr,{size:14})]})]}),a.jsxs("button",{onClick:()=>t==null?void 0:t("inventory"),className:"group bg-gradient-to-br from-slate-800 to-slate-900 border border-slate-700 rounded-2xl p-6 hover:border-orange-500 transition-all duration-300 hover:shadow-xl hover:shadow-orange-500/10 hover:-translate-y-1 cursor-pointer text-left w-full",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:"p-3 bg-orange-600 rounded-xl",children:a.jsx(sn,{size:24,className:"text-white"})}),a.jsx("span",{className:"text-xs bg-blue-500 text-white px-2 py-1 rounded-full font-semibold",children:m.length})]}),a.jsx("h3",{className:"text-white font-bold text-lg mb-2",children:"Your Decks"}),a.jsx("p",{className:"text-orange-300 text-sm mb-2",children:"Saved combinations"}),a.jsxs("p",{className:"text-slate-400 text-xs mb-4",children:[m.length," presets ready"]}),a.jsxs("span",{className:"text-orange-400 hover:text-orange-300 text-sm font-semibold flex items-center space-x-1 group-hover:translate-x-1 transition-transform",children:[a.jsx("span",{children:"Manage"}),a.jsx(Jr,{size:14})]})]})]})}),a.jsxs("section",{className:"max-w-7xl mx-auto px-6 py-16",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h2",{className:"text-4xl font-bold text-white mb-4",children:"Community Champions"}),a.jsx("p",{className:"text-blue-200 text-lg",children:"Meet the top bladers dominating the arena"})]}),h.length>0&&a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-900 border border-slate-700 rounded-3xl p-8 text-center",children:[a.jsx("div",{className:"flex items-center justify-center mb-6",children:a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"w-24 h-24 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full flex items-center justify-center text-4xl font-bold text-black",children:(ie=h[y])==null?void 0:ie.name.charAt(0).toUpperCase()}),a.jsx("div",{className:"absolute -top-2 -right-2 bg-yellow-400 rounded-full p-2",children:a.jsx(C_,{size:16,className:"text-black"})})]})}),a.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:(ce=h[y])==null?void 0:ce.name}),a.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[a.jsx($_,{className:"text-yellow-400",size:20}),a.jsx("span",{className:"text-yellow-400 font-semibold",children:"Top Player"})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-6 max-w-md mx-auto",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-blue-400",children:(T=h[y])==null?void 0:T.wins}),a.jsx("div",{className:"text-slate-400 text-sm",children:"Wins"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-purple-400",children:($=h[y])==null?void 0:$.tournaments}),a.jsx("div",{className:"text-slate-400 text-sm",children:"Tournaments"})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"text-2xl font-bold text-green-400",children:[(q=h[y])==null?void 0:q.winRate,"%"]}),a.jsx("div",{className:"text-slate-400 text-sm",children:"Win Rate"})]})]})]}),a.jsx("div",{className:"flex justify-center space-x-2 mt-6",children:h.map((L,H)=>a.jsx("button",{onClick:()=>w(H),className:`w-3 h-3 rounded-full transition-all duration-300 ${H===y?"bg-blue-500 scale-125":"bg-slate-600 hover:bg-slate-500"}`},H))})]}),_!=="all"||v.length>0?a.jsxs("div",{className:"mt-12 bg-slate-800/50 border border-slate-700 rounded-2xl p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"text-white font-bold text-lg flex items-center space-x-2",children:[a.jsx(B_,{size:20,className:"text-green-400"}),a.jsx("span",{children:"Live Results"})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("select",{value:_,onChange:L=>N(L.target.value),className:"text-xs bg-slate-700 text-white border border-slate-600 rounded px-2 py-1 focus:outline-none focus:ring-1 focus:ring-blue-500",children:[a.jsx("option",{value:"all",children:"All Tournaments"}),P.map(L=>a.jsx("option",{value:L.id,children:L.name},L.id))]}),a.jsx("span",{className:"text-xs bg-green-500 text-black px-2 py-1 rounded-full font-semibold animate-pulse",children:"LIVE"})]})]}),v.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"text-slate-400 text-4xl mb-4",children:""}),a.jsx("p",{className:"text-slate-400 font-medium",children:"No matches found"}),a.jsx("p",{className:"text-slate-500 text-sm mt-1",children:_==="all"?"No recent matches across all tournaments":`No matches found for ${((U=P.find(L=>L.id===_))==null?void 0:U.name)||"this tournament"}`})]}):a.jsx("div",{className:"space-y-3 max-h-48 overflow-y-auto",children:v.slice(0,5).map((L,H)=>{var te;return a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-white font-semibold",children:L.winner_name}),a.jsx("span",{className:"text-slate-400",children:"defeated"}),a.jsx("span",{className:"text-slate-300",children:L.winner_name===L.player1_name?L.player2_name:L.player1_name})]}),(L.player1_beyblade||L.player2_beyblade)&&a.jsx("div",{className:"text-xs text-slate-500 font-mono mt-1",children:L.winner_name===L.player1_name?`${L.player1_beyblade||"Unknown"} vs ${L.player2_beyblade||"Unknown"}`:`${L.player2_beyblade||"Unknown"} vs ${L.player1_beyblade||"Unknown"}`})]})]}),a.jsx("div",{className:"text-slate-500 text-xs",children:((te=L.outcome)==null?void 0:te.split(" (")[0])||"Victory"})]},H)})})]}):null]}),a.jsx("footer",{className:"border-t border-slate-800 bg-slate-900/50",children:a.jsx("div",{className:"max-w-7xl mx-auto px-6 py-8",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 items-center",children:[a.jsxs("div",{className:"text-slate-400 text-sm",children:[a.jsx("p",{className:"font-semibold text-white mb-1",children:"Created by Jedynsay"}),a.jsx("p",{children:"Powered by Supabase"})]}),a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"flex items-center justify-center space-x-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-3 h-3 bg-green-400 rounded-full animate-pulse"}),a.jsx("span",{className:"text-green-400 font-semibold",children:"System Online"})]})})}),a.jsx("div",{className:"flex justify-end",children:a.jsx("div",{className:"text-slate-400 text-sm",children:"OBC Portal v1.0"})})]})})}),i&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-overlay",style:{zIndex:50},onClick:()=>o(!1)}),a.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4 pointer-events-none z-50",children:a.jsxs("div",{className:"relative pointer-events-auto bg-white rounded-xl shadow-2xl max-w-md w-full mx-4 max-h-[90vh]",children:[a.jsx(O0,{onLoginSuccess:()=>o(!1)}),a.jsx("button",{onClick:()=>o(!1),className:"absolute top-4 right-4 w-8 h-8 bg-gray-100 hover:bg-gray-200 rounded-full flex items-center justify-center text-gray-600 hover:text-gray-800 transition-colors",children:a.jsx(Pt,{size:16})})]})})]})]})}function q_({tournament:t,onClose:e,onSubmit:s}){var Z,pe,ke;const{user:n}=ns(),{confirm:r,alert:i}=Kn(),[o,l]=k.useState(""),[c,d]=k.useState("free"),[u,h]=k.useState([{id:"1",bladeLine:"",parts:{}}]),[f,m]=k.useState({blades:[],ratchets:[],bits:[],lockchips:[],assistBlades:[]}),[p,v]=k.useState(!1),[b,x]=k.useState(null),[g,y]=k.useState(!1),[w,_]=k.useState([]),[N,P]=k.useState(""),[E,C]=k.useState(!1);k.useState("");const[R,M]=k.useState([]),[V,ie]=k.useState({duplicateParts:[],duplicatePlayerName:!1}),ce=async()=>{v(!0),x(null);try{const[A,J,Y,re,we]=await Promise.all([K.from("beypart_blade").select("*"),K.from("beypart_ratchet").select("*"),K.from("beypart_bit").select("*"),K.from("beypart_lockchip").select("*"),K.from("beypart_assistblade").select("*")]);if(A.error)throw A.error;if(J.error)throw J.error;if(Y.error)throw Y.error;if(re.error)throw re.error;if(we.error)throw we.error;m({blades:A.data||[],ratchets:J.data||[],bits:Y.data||[],lockchips:re.data||[],assistBlades:we.data||[]})}catch(A){console.error("Error fetching parts data:",A),x("Failed to load Beyblade parts. Please try again.")}finally{v(!1)}};He.useEffect(()=>{ce(),T(),n&&!n.id.startsWith("guest-")&&U()},[]);const T=async()=>{try{const{data:A,error:J}=await K.from("tournament_registrations").select("player_name").eq("tournament_id",t.id).eq("status","confirmed");if(J)throw J;const Y=(A||[]).map(re=>re.player_name.toLowerCase().trim());M(Y)}catch(A){console.error("Error fetching existing player names:",A),M([])}},$=A=>{const J=A.toLowerCase().trim(),Y=R.includes(J);return ie(re=>({...re,duplicatePlayerName:Y})),!Y},q=()=>{const A=[],J=new Map;return u.forEach((Y,re)=>{if(!Y.bladeLine)return;H(Y.bladeLine).forEach(Ue=>{const Ht=Y.parts[Ue];if(!Ht)return;const he=Q(Ht,Ue),Vt=`${Ue}:${he}`;if(J.has(Vt)){const Rs=J.get(Vt);A.push(`${he} (${Ue}) is used in both Beyblade ${Rs.beybladeIndex+1} and Beyblade ${re+1}`)}else J.set(Vt,{beybladeIndex:re,partType:Ue})})}),ie(Y=>({...Y,duplicateParts:A})),A.length===0};He.useEffect(()=>{o.trim()?$(o):ie(A=>({...A,duplicatePlayerName:!1}))},[o,R]),He.useEffect(()=>{q()},[u]);const U=async()=>{if(!(!n||n.id.startsWith("guest-")))try{const{data:A,error:J}=await K.from("deck_presets").select("*").eq("user_id",n.id).order("updated_at",{ascending:!1});if(J)throw J;_(A||[])}catch(A){console.error("Error fetching deck presets:",A)}},L=A=>{const J=w.find(Y=>Y.id===A);if(J){const Y=J.beyblades.slice(0,t.beyblades_per_player).map((re,we)=>({id:(we+1).toString(),bladeLine:re.blade_line,parts:re.parts}));h(Y),h(Y.map(re=>({...re,name:O(re.bladeLine,re.parts)}))),C(!1),P("")}},H=A=>{switch(A){case"Basic":case"Unique":case"X-Over":return["Blade","Ratchet","Bit"];case"Custom":return["Lockchip","Main Blade","Assist Blade","Ratchet","Bit"];default:return[]}},te=(A,J)=>{if(!A)return[];let Y=[];switch(J){case"Blade":Y=f.blades.filter(re=>re.Line===A);break;case"Main Blade":Y=f.blades.filter(re=>re.Line==="Custom");break;case"Ratchet":Y=f.ratchets;break;case"Bit":Y=f.bits;break;case"Lockchip":Y=f.lockchips;break;case"Assist Blade":Y=f.assistBlades;break;default:Y=[]}return Y.sort((re,we)=>{const Ue=Q(re,J),Ht=Q(we,J);return Ue.localeCompare(Ht)})},Q=(A,J)=>{switch(J){case"Blade":case"Main Blade":return A.Blades;case"Ratchet":return A.Ratchet;case"Bit":return`${A.Bit} (${A.Shortcut})`;case"Lockchip":return A.Lockchip;case"Assist Blade":return`${A["Assist Blade Name"]} (${A["Assist Blade"]})`;default:return""}},O=(A,J)=>{var we,Ue,Ht,he,Vt,Rs,pn,z;if(!A||!H(A).every(G=>J[G]))return"";if(A==="Custom"){const G=((we=J.Lockchip)==null?void 0:we.Lockchip)||"",ee=((Ue=J["Main Blade"])==null?void 0:Ue.Blades)||"",de=((Ht=J["Assist Blade"])==null?void 0:Ht["Assist Blade"])||"",Me=((he=J.Ratchet)==null?void 0:he.Ratchet)||"",Ne=((Vt=J.Bit)==null?void 0:Vt.Shortcut)||"";return`${G}${ee} ${de}${Me}${Ne}`}else{const G=((Rs=J.Blade)==null?void 0:Rs.Blades)||"",ee=((pn=J.Ratchet)==null?void 0:pn.Ratchet)||"",de=((z=J.Bit)==null?void 0:z.Shortcut)||"";return`${G} ${ee}${de}`}},X=A=>{let J={attack:0,defense:0,stamina:0,dash:0,burstRes:0};return Object.values(A).forEach(Y=>{Y&&(J.attack+=Y.Attack||0,J.defense+=Y.Defense||0,J.stamina+=Y.Stamina||0,J.dash+=Y.Dash||0,J.burstRes+=Y["Burst Res"]||0)}),J},ne=()=>{u.length<t.beyblades_per_player?h([...u,{id:Date.now().toString(),bladeLine:"",parts:{}}]):i("Maximum Reached",`Maximum ${t.beyblades_per_player} Beyblades allowed for this tournament.`)},ae=A=>{u.length>1&&h(u.filter(J=>J.id!==A))},B=(A,J,Y)=>{h(u.map(re=>re.id===A?{...re,[J]:Y,parts:{}}:re))},F=(A,J,Y)=>{h(u.map(re=>re.id===A?{...re,parts:{...re.parts,[J]:Y}}:re))},I=()=>!o.trim()||!c||V.duplicatePlayerName||V.duplicateParts.length>0?!1:u.every(A=>A.bladeLine?H(A.bladeLine).every(Y=>A.parts[Y]):!1),le=async()=>{var A,J;if(!I()){await i("Missing Information","Please fill in all required fields to register for the tournament.");return}if(!$(o)){await i("Duplicate Player Name",`The player name "${o}" is already registered for this tournament. Please choose a different name.`);return}if(!q()){await i("Invalid Beyblade Configuration","One or more of your Beyblades have duplicate parts. Each Beyblade must use unique parts.");return}y(!0);try{const Y=await K.from("tournaments").select("is_free").eq("id",t.id).single(),re=(A=Y.data)!=null&&A.is_free?"confirmed":"unpaid",{data:we,error:Ue}=await K.from("tournament_registrations").insert({tournament_id:t.id,player_name:o.trim(),payment_mode:c,status:"confirmed",payment_status:re}).select().single();if(Ue)throw new Error(`Registration failed: ${Ue.message}`);for(const he of u){const Vt=O(he.bladeLine,he.parts),{data:Rs,error:pn}=await K.from("tournament_beyblades").insert({registration_id:we.id,beyblade_name:Vt,blade_line:he.bladeLine}).select().single();if(pn)throw new Error(`Beyblade registration failed: ${pn.message}`);const z=Object.entries(he.parts).map(([ee,de])=>({beyblade_id:Rs.id,part_type:ee,part_name:Q(de,ee),part_data:de})),{error:G}=await K.from("tournament_beyblade_parts").insert(z);if(G)throw new Error(`Parts registration failed: ${G.message}`)}const Ht=(J=Y.data)!=null&&J.is_free?`Successfully registered ${o} for ${t.name}! You're confirmed and ready to compete.`:`Successfully registered ${o} for ${t.name}! Please complete payment to confirm your spot. Registration ID: ${we.id}`;await i("Registration Successful",Ht),e()}catch(Y){console.error("Registration error:",Y),await i("Registration Failed",`Failed to register for tournament: ${Y instanceof Error?Y.message:"Unknown error"}. Please try again.`)}finally{y(!1)}},j=A=>{switch(A){case"Basic":return"text-blue-600 bg-blue-50 border-blue-200";case"Unique":return"text-purple-600 bg-purple-50 border-purple-200";case"Custom":return"text-orange-600 bg-orange-50 border-orange-200";case"X-Over":return"text-green-600 bg-green-50 border-green-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},S=A=>{switch(A){case"attack":return a.jsx(Pu,{size:12,className:"text-red-500"});case"defense":return a.jsx(ki,{size:12,className:"text-blue-500"});case"stamina":return a.jsx(Su,{size:12,className:"text-green-500"});case"dash":return a.jsx(Ro,{size:12,className:"text-yellow-500"});case"burstRes":return a.jsx(E0,{size:12,className:"text-purple-500"});default:return null}},D=A=>{switch(A){case"attack":return"bg-red-500";case"defense":return"bg-blue-500";case"stamina":return"bg-green-500";case"dash":return"bg-yellow-500";case"burstRes":return"bg-purple-500";default:return"bg-gray-500"}},oe=({stats:A})=>{const J=re=>{switch(re){case"attack":case"defense":case"stamina":return 200;case"dash":return 50;case"burstRes":return 80;default:return 100}},Y=[{key:"attack",label:"Attack",value:A.attack},{key:"defense",label:"Defense",value:A.defense},{key:"stamina",label:"Stamina",value:A.stamina},{key:"dash",label:"Dash",value:A.dash},{key:"burstRes",label:"Burst Res",value:A.burstRes}];return a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mt-4",children:[a.jsxs("h5",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center",children:[a.jsx(Ro,{size:16,className:"mr-2"}),"Combined Stats"]}),a.jsx("div",{className:"space-y-2",children:Y.map(({key:re,label:we,value:Ue})=>a.jsxs("div",{className:"flex items-center",children:[a.jsxs("div",{className:"flex items-center w-20 text-xs font-medium text-gray-600",children:[S(re),a.jsx("span",{className:"ml-1",children:we})]}),a.jsx("div",{className:"flex-1 mx-3",children:a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${D(re)}`,style:{width:`${Math.min(Ue/J(re)*100,100)}%`}})})}),a.jsx("div",{className:"w-8 text-xs font-bold text-gray-700 text-right",children:Ue})]},re))})]})};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(p||g)&&a.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center z-10 rounded-lg",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:p?"Loading Beyblade parts...":"Registering for tournament..."})]})}),a.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Tournament Registration"}),a.jsx("p",{className:"text-gray-600",children:t.name}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Configure your Beyblades for this tournament. You can register up to ",t.beyblades_per_player," Beyblades."]})]}),a.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:a.jsx(Pt,{size:24})})]}),a.jsxs("div",{className:"p-6",children:[b&&a.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"text-red-600 mr-3",children:""}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-red-800 font-medium",children:"Error Loading Parts"}),a.jsx("p",{className:"text-red-700 text-sm mt-1",children:b}),a.jsx("button",{onClick:ce,className:"mt-2 text-red-600 hover:text-red-800 text-sm underline",children:"Try Again"})]})]})}),a.jsxs("div",{className:"mb-8 bg-blue-50 border border-blue-200 rounded-lg p-6",children:[a.jsxs("div",{className:"flex items-center mb-4",children:[a.jsx(A0,{className:"text-blue-600 mr-2",size:20}),a.jsx("h3",{className:"text-lg font-semibold text-blue-900",children:"Player Information"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"playerName",className:"block text-sm font-medium text-gray-700 mb-2",children:"Player Name *"}),a.jsx("input",{type:"text",id:"playerName",value:o,onChange:A=>l(A.target.value),placeholder:"Enter your player name for this tournament",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),V.duplicatePlayerName&&a.jsxs("div",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx("span",{className:"mr-1",children:""}),"This player name is already registered for this tournament"]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This is your blader name that will appear in tournament brackets and match results."})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"paymentMode",className:"block text-sm font-medium text-gray-700 mb-2",children:"Mode of Payment *"}),a.jsxs("select",{id:"paymentMode",value:c,onChange:A=>d(A.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[t.is_free&&a.jsx("option",{value:"free",children:"Free Entry"}),a.jsx("option",{value:"cash",children:"Cash"}),a.jsx("option",{value:"gcash",children:"GCash"}),a.jsx("option",{value:"bank_transfer",children:"Bank Transfer"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t.is_free&&c==="free"?"This tournament has no entry fee.":c==="cash"?"Pay at the venue on tournament day.":c==="gcash"?"Payment details will be provided after registration.":"Bank details will be provided after registration."})]})]})]}),!(n!=null&&n.id.startsWith("guest-"))&&w.length>0&&a.jsxs("div",{className:"mb-8 bg-green-50 border border-green-200 rounded-lg p-6",children:[a.jsxs("div",{className:"flex items-center mb-4",children:[a.jsx(sn,{className:"text-green-600 mr-2",size:20}),a.jsx("h3",{className:"text-lg font-semibold text-green-900",children:"Quick Setup with Deck Presets"})]}),a.jsx("div",{className:"mb-4 p-3 bg-white rounded-lg border border-green-200",children:a.jsxs("p",{className:"text-sm text-green-800",children:[a.jsx("strong",{children:"Save time!"})," Use one of your saved deck presets to quickly configure your Beyblades for this tournament."]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Deck Preset"}),a.jsxs("select",{value:N,onChange:A=>P(A.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500",children:[a.jsx("option",{value:"",children:"-- Select a preset --"}),w.map(A=>a.jsxs("option",{value:A.id,children:[A.name," (",A.beyblades.length," Beyblades)"]},A.id))]})]}),a.jsx("div",{className:"flex items-end",children:a.jsx("button",{type:"button",onClick:()=>N&&L(N),disabled:!N,className:"w-full bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Load Preset"})})]}),N&&a.jsx("div",{className:"mt-4 p-3 bg-white rounded-lg border border-green-200",children:a.jsxs("div",{className:"text-sm text-green-800",children:[a.jsx("strong",{children:"Preview:"}),(Z=w.find(A=>A.id===N))==null?void 0:Z.beyblades.slice(0,3).map((A,J)=>a.jsxs("div",{className:"font-mono text-xs mt-1",children:[" ",A.name||`Beyblade ${J+1}`]},J)),((pe=w.find(A=>A.id===N))==null?void 0:pe.beyblades.length)>3&&a.jsxs("div",{className:"text-xs mt-1 text-green-600",children:["+",((ke=w.find(A=>A.id===N))==null?void 0:ke.beyblades.length)-3," more..."]})]})})]}),c!=="free"&&a.jsxs("div",{className:"mb-8 bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:[a.jsxs("div",{className:"flex items-center mb-4",children:[a.jsx("div",{className:"w-6 h-6 bg-yellow-500 rounded-full flex items-center justify-center mr-2",children:a.jsx("span",{className:"text-white text-sm font-bold",children:""})}),a.jsx("h3",{className:"text-lg font-semibold text-yellow-900",children:"Payment Information"})]}),a.jsxs("div",{className:"bg-white rounded-lg p-4 border border-yellow-200",children:[c==="cash"&&a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Cash Payment"}),a.jsx("p",{className:"text-gray-700 text-sm",children:"Please bring the exact tournament entry fee on the day of the tournament. Payment will be collected during registration at the venue."})]}),c==="gcash"&&a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"GCash Payment"}),a.jsx("p",{className:"text-gray-700 text-sm mb-2",children:"GCash payment details will be sent to you after registration confirmation."}),a.jsxs("div",{className:"bg-gray-50 p-3 rounded text-sm",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"GCash Number:"})," [Will be provided]"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Account Name:"})," [Will be provided]"]})]})]}),c==="bank_transfer"&&a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Bank Transfer"}),a.jsx("p",{className:"text-gray-700 text-sm mb-2",children:"Bank transfer details will be sent to you after registration confirmation."}),a.jsxs("div",{className:"bg-gray-50 p-3 rounded text-sm",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Bank:"})," [Will be provided]"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Account Number:"})," [Will be provided]"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Account Name:"})," [Will be provided]"]})]})]})]})]}),a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("label",{htmlFor:"playerName",className:"block text-sm font-medium text-gray-700 mb-2",children:"Beyblade Registration"}),a.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Configure your Beyblades for this tournament. You can register up to ",t.beyblades_per_player," Beyblades."]})]}),u.map((A,J)=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Beyblade #",J+1]}),u.length>1&&a.jsx("button",{onClick:()=>ae(A.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-full transition-colors",children:a.jsx(hs,{size:16})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Blade Line *"}),a.jsxs("select",{value:A.bladeLine,onChange:Y=>B(A.id,"bladeLine",Y.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Select Blade Line"}),a.jsx("option",{value:"Basic",children:"Basic"}),a.jsx("option",{value:"Unique",children:"Unique"}),a.jsx("option",{value:"Custom",children:"Custom"}),a.jsx("option",{value:"X-Over",children:"X-Over"})]})]}),A.bladeLine&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Generated Name"}),a.jsx("div",{className:"w-full border border-gray-200 rounded-md px-3 py-2 bg-gray-50 text-gray-700 font-mono",children:O(A.bladeLine,A.parts)||"Select all parts to generate name"})]})]}),A.bladeLine&&a.jsxs("div",{className:`border rounded-lg p-4 ${j(A.bladeLine)}`,children:[a.jsxs("h4",{className:"font-semibold mb-3 flex items-center",children:[a.jsxs("span",{className:"mr-2",children:[A.bladeLine," Line Parts"]}),a.jsxs("span",{className:"text-xs px-2 py-1 rounded-full bg-white bg-opacity-50",children:[H(A.bladeLine).length," parts required"]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:H(A.bladeLine).map(Y=>a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium mb-2",children:[Y," *"]}),a.jsxs("select",{value:A.parts[Y]?JSON.stringify(A.parts[Y]):"",onChange:re=>{if(re.target.value){const we=JSON.parse(re.target.value);F(A.id,Y,we)}},className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white disabled:bg-gray-100 disabled:cursor-not-allowed",disabled:p||!!b,children:[a.jsxs("option",{value:"",children:["Select ",Y]}),te(A.bladeLine,Y).map((re,we)=>a.jsx("option",{value:JSON.stringify(re),children:Q(re,Y)},we))]}),A.parts[Y]&&V.duplicateParts.some(re=>re.includes(Q(A.parts[Y],Y)))&&a.jsxs("div",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx("span",{className:"mr-1",children:""}),"This part is being used in another Beyblade"]}),A.parts[Y]&&a.jsx("div",{className:"mt-2",children:a.jsx("div",{className:"flex flex-wrap gap-2 text-xs",children:Object.entries(A.parts[Y]).map(([re,we])=>typeof we=="number"&&we>0&&["Attack","Defense","Stamina","Dash","Burst Res"].includes(re)?a.jsxs("div",{className:"flex items-center space-x-1 bg-white bg-opacity-50 px-2 py-1 rounded",children:[S(re.toLowerCase().replace(" ","")),a.jsxs("span",{children:[re,": ",we]})]},re):null)})})]},Y))})]}),A.bladeLine&&Object.keys(A.parts).length>0&&a.jsx(oe,{stats:X(A.parts)})]},A.id))]}),u.length<t.beyblades_per_player&&a.jsxs("button",{onClick:ne,className:"mt-6 w-full border-2 border-dashed border-gray-300 rounded-lg p-4 text-gray-600 hover:border-blue-400 hover:text-blue-600 transition-colors flex items-center justify-center space-x-2",children:[a.jsx(Mn,{size:20}),a.jsxs("span",{children:["Add Another Beyblade (",u.length,"/",t.beyblades_per_player,")"]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 mt-8 pt-6 border-t border-gray-200",children:[a.jsx("button",{onClick:e,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsxs("button",{onClick:le,disabled:!I()||p||!!b||g,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[a.jsx(Or,{size:16}),a.jsx("span",{children:"Register for Tournament"})]})]})]})]})})}function K_(){ns();const{alert:t}=Kn(),[e,s]=k.useState("all"),[n,r]=k.useState(null),[i,o]=k.useState([]),[l,c]=k.useState(!0);He.useEffect(()=>{(async()=>{try{const{data:m,error:p}=await K.from("tournaments").select("*").order("tournament_date",{ascending:!0});if(p)throw p;o(m||[])}catch(m){console.error("Error fetching tournaments:",m),o([])}finally{c(!1)}})()},[]);const d=i.filter(f=>e==="all"||f.status===e),u=(f,m)=>{console.log("Tournament registration:",{playerName:f,beyblades:m}),t("Registration Complete",`Successfully registered ${f} with ${m.length} Beyblades for the tournament!`),r(null)},h=f=>{switch(f){case"upcoming":return"tournament-status-upcoming";case"active":return"tournament-status-active";case"completed":return"tournament-status-completed";default:return"tournament-status-completed"}};return a.jsx("div",{className:"page-container",children:a.jsxs("div",{className:"content-wrapper",children:[a.jsxs("div",{className:"page-header",children:[a.jsx("h1",{className:"page-title",children:"Tournaments"}),a.jsx("p",{className:"page-subtitle",children:"Join the ultimate Beyblade battles"})]}),a.jsx("div",{className:"mb-8",children:a.jsx("div",{className:"filter-tabs",children:["all","upcoming","active","completed"].map(f=>a.jsx("button",{onClick:()=>s(f),className:`filter-tab capitalize ${e===f?"filter-tab-active":"filter-tab-inactive"}`,children:f},f))})}),l?a.jsxs("div",{className:"empty-state",children:[a.jsx("div",{className:"loading-spinner h-12 w-12 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading tournaments..."})]}):d.length===0?a.jsxs("div",{className:"empty-state",children:[a.jsx(Zt,{className:"empty-icon"}),a.jsx("h3",{className:"empty-title",children:"No tournaments found"}),a.jsx("p",{className:"empty-description",children:"Check back later for upcoming events"})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(f=>a.jsxs("div",{className:"card p-6 hover:shadow-lg transition-all duration-200",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("h3",{className:"text-xl font-space-grotesk font-bold text-gray-900",children:f.name}),a.jsx("span",{className:`badge capitalize ${h(f.status)}`,children:f.status})]}),a.jsx("p",{className:"text-gray-600 mb-6 font-inter",children:f.description}),a.jsxs("div",{className:"space-y-3 mb-6",children:[a.jsxs("div",{className:"flex items-center text-gray-600 font-inter",children:[a.jsx(Fn,{size:16,className:"mr-2"}),new Date(f.tournament_date).toLocaleDateString()]}),a.jsxs("div",{className:"flex items-center text-gray-600 font-inter",children:[a.jsx(M_,{size:16,className:"mr-2"}),f.location]}),a.jsxs("div",{className:"flex items-center text-gray-600 font-inter",children:[a.jsx(on,{size:16,className:"mr-2"}),f.current_participants,"/",f.max_participants," participants"]}),f.prize_pool&&a.jsxs("div",{className:"flex items-center text-gray-600 font-inter",children:[a.jsx(Zt,{size:16,className:"mr-2"}),"Prize Pool: ",f.prize_pool]}),a.jsxs("div",{className:"flex items-center text-gray-600 font-inter",children:[a.jsx(Su,{size:16,className:"mr-2"}),"Registration ends: ",new Date(f.registration_deadline).toLocaleDateString()]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"flex justify-between text-gray-600 font-inter mb-2",children:[a.jsx("span",{children:"Registration Progress"}),a.jsxs("span",{children:[Math.round(f.current_participants/f.max_participants*100),"%"]})]}),a.jsx("div",{className:"progress-bar",children:a.jsx("div",{className:"progress-fill",style:{width:`${f.current_participants/f.max_participants*100}%`}})})]}),f.status==="upcoming"&&a.jsx("button",{onClick:()=>r(f.id),disabled:f.current_participants>=f.max_participants,className:"primary-button w-full disabled:opacity-50 disabled:cursor-not-allowed",children:f.current_participants>=f.max_participants?"Tournament Full":"Register for Tournament"})]},f.id))}),n&&a.jsx(q_,{tournament:d.find(f=>f.id===n),onClose:()=>r(null),onSubmit:u})]})})}function wf(t,e,s=1.96){if(e===0)return 0;const n=t/e,r=1+s*s/e,i=n+s*s/(2*e),o=s*Math.sqrt((n*(1-n)+s*s/(4*e))/e);return(i-o)/r}function Y_(t,e,s){console.log(` PARSER: Attempting ${e} parsing for: "${t}"`);let n=t;const r=R0(n,s.bits);if(!r)return console.log(` PARSER: ${e} parsing failed - no bit found`),null;n=n.slice(0,n.length-r.bitName.length).trim(),console.log(` PARSER: After bit removal: "${n}"`);const i=M0(n,s.ratchets);if(!i)return console.log(` PARSER: ${e} parsing failed - no ratchet found`),null;n=n.slice(0,n.length-i.ratchetName.length).trim(),console.log(` PARSER: After ratchet removal: "${n}"`),console.log(` PARSER: Looking for ${e} blade: "${n}"`);const o=L0(n,s.blades.filter(c=>c.Line===e));if(!o)return console.log(` PARSER: ${e} parsing failed - no ${e} blade found for "${n}"`),null;const l={isCustom:!1,blade:o.bladeName,ratchet:i.ratchetName,bit:r.bitName};return console.log(` PARSER: ${e} parsing successful:`,l),l}function G_(t,e){console.log(` PARSER: Attempting Custom parsing for: "${t}"`);let s=t;const n=Q_(t,e.lockchips);if(!n)return console.log(" PARSER: Custom parsing failed - no lockchip found"),null;s=t.slice(n.lockchipName.length),console.log(` PARSER: After lockchip removal: "${s}"`);const r=R0(s,e.bits);if(!r)return console.log(" PARSER: Custom parsing failed - no bit found"),null;s=s.slice(0,s.length-r.bitName.length).trim(),console.log(` PARSER: After bit removal: "${s}"`);const i=M0(s,e.ratchets);if(!i)return console.log(" PARSER: Custom parsing failed - no ratchet found"),null;s=s.slice(0,s.length-i.ratchetName.length).trim(),console.log(` PARSER: After ratchet removal: "${s}"`);const o=J_(s,e.assistBlades);if(!o)return console.log(" PARSER: Custom parsing failed - no assist blade found"),null;s=s.slice(0,s.length-o.assistBladeName.length).trim(),console.log(` PARSER: After assist blade removal: "${s}"`);const l=L0(s,e.blades.filter(d=>d.Line==="Custom"));if(!l)return console.log(` PARSER: Custom parsing failed - no Custom main blade found for "${s}"`),null;const c={isCustom:!0,lockchip:n.lockchipName,mainBlade:l.bladeName,assistBlade:o.assistBladeName,ratchet:i.ratchetName,bit:r.bitName};return console.log(" PARSER: Custom parsing successful:",c),c}function R0(t,e){console.log(` PARSER: Finding bit in "${t}"`),console.log(" PARSER: Available bits:",e.map(n=>({shortcut:n.Shortcut,full:n.Bit})));const s=[...e].sort((n,r)=>{const i=n.Shortcut||n.Bit||"";return(r.Shortcut||r.Bit||"").length-i.length});for(const n of s){const r=n.Shortcut;if(r&&t.endsWith(r))return console.log(` PARSER: Found bit by shortcut: ${r}`),{bit:n,bitName:r}}for(const n of s){const r=n.Bit;if(r&&t.endsWith(r))return console.log(` PARSER: Found bit by full name: ${r}  ${n.Shortcut||r}`),{bit:n,bitName:n.Shortcut||r}}return console.log(` PARSER: No bit found in "${t}"`),null}function M0(t,e){console.log(` PARSER: Finding ratchet in "${t}"`);const s=[...e].sort((n,r)=>{const i=n.Ratchet||"";return(r.Ratchet||"").length-i.length});for(const n of s){const r=n.Ratchet;if(r&&t.endsWith(r))return console.log(` PARSER: Found ratchet: ${r}`),{ratchet:n,ratchetName:r}}return console.log(` PARSER: No ratchet found in "${t}"`),null}function L0(t,e){console.log(` PARSER: Finding blade in "${t}"`),console.log(" PARSER: Available blades:",e.map(s=>({name:s.Blades,line:s.Line})));for(const s of e){const n=s.Blades;if(n&&t===n)return console.log(` PARSER: Found blade: ${n} (${s.Line} line)`),{blade:s,bladeName:n}}return console.log(` PARSER: No blade found for "${t}" in available blades`),null}function Q_(t,e){console.log(` PARSER: Finding lockchip in "${t}"`),console.log(" PARSER: Available lockchips:",e.map(n=>n.Lockchip));const s=[...e].sort((n,r)=>{const i=n.Lockchip||"";return(r.Lockchip||"").length-i.length});for(const n of s){const r=n.Lockchip;if(r&&t.startsWith(r))return console.log(` PARSER: Found lockchip: ${r}`),{lockchip:n,lockchipName:r}}return console.log(` PARSER: No lockchip found in "${t}"`),null}function J_(t,e){console.log(` PARSER: Finding assist blade in "${t}"`),console.log(" PARSER: Available assist blades:",e.map(n=>n["Assist Blade"]));const s=[...e].sort((n,r)=>{const i=n["Assist Blade"]||"";return(r["Assist Blade"]||"").length-i.length});for(const n of s){const r=n["Assist Blade"];if(r&&t.endsWith(r))return console.log(` PARSER: Found assist blade: ${r}`),{assistBlade:n,assistBladeName:r}}return console.log(` PARSER: No assist blade found in "${t}"`),null}function _f(t,e,s){if(!t||!t.trim())return console.log(" PARSER: Empty beyblade name"),{isCustom:!1};console.log(`
 PARSER: Starting to parse "${t}"`);const n=["Basic","Unique","X-Over","Custom"];for(const r of n){if(console.log(` PARSER: Trying ${r} blade line...`),r==="Custom"){const i=G_(t,s);if(i)return console.log(` PARSER: Successfully parsed as ${r} Beyblade`),i}else{const i=Y_(t,r,s);if(i)return console.log(` PARSER: Successfully parsed as ${r} Beyblade`),i}console.log(` PARSER: ${r} parsing failed`)}return console.log(` PARSER: All parsing attempts failed for "${t}"`),{isCustom:!1}}function X_({onBack:t}){var Q;const[e,s]=k.useState([]),[n,r]=k.useState(""),[i,o]=k.useState(!0),[l,c]=k.useState(!1),[d,u]=k.useState(null),[h,f]=k.useState({blades:[],ratchets:[],bits:[],lockchips:[],assistBlades:[]}),[m,p]=k.useState({blade:{},ratchet:{},bit:{},lockchip:{},mainBlade:{},assistBlade:{}}),[v,b]=k.useState([]),[x,g]=k.useState(""),[y,w]=k.useState(""),[_,N]=k.useState([]),[P,E]=k.useState(null),[C,R]=k.useState([]),[M,V]=k.useState({key:"wilson",direction:"desc"});k.useEffect(()=>{ie(),ce()},[]),k.useEffect(()=>{n&&Object.keys(h.blades).length>0&&T()},[n,h]),k.useEffect(()=>{x&&y&&v.length>0&&$()},[x,y,v]);const ie=async()=>{try{console.log(" META ANALYSIS: Fetching tournaments...");const{data:O,error:X}=await K.from("tournaments").select("id, name, status, tournament_date").order("tournament_date",{ascending:!1});if(X)throw X;s(O||[]),console.log(` META ANALYSIS: Loaded ${(O==null?void 0:O.length)||0} tournaments`);const ne=O==null?void 0:O.find(ae=>ae.status==="completed");ne&&(r(ne.id),console.log(` META ANALYSIS: Auto-selected completed tournament: ${ne.name}`))}catch(O){console.error(" META ANALYSIS: Error fetching tournaments:",O),u("Failed to load tournaments")}finally{o(!1)}},ce=async()=>{try{console.log(" META ANALYSIS: Fetching all parts data...");const[O,X,ne,ae,B]=await Promise.all([K.from("beypart_blade").select("*"),K.from("beypart_ratchet").select("*"),K.from("beypart_bit").select("*"),K.from("beypart_lockchip").select("*"),K.from("beypart_assistblade").select("*")]);if(O.error)throw O.error;if(X.error)throw X.error;if(ne.error)throw ne.error;if(ae.error)throw ae.error;if(B.error)throw B.error;const F={blades:O.data||[],ratchets:X.data||[],bits:ne.data||[],lockchips:ae.data||[],assistBlades:B.data||[]};f(F),console.log(" META ANALYSIS: Parts data loaded:",{blades:F.blades.length,ratchets:F.ratchets.length,bits:F.bits.length,lockchips:F.lockchips.length,assistBlades:F.assistBlades.length})}catch(O){console.error(" META ANALYSIS: Error fetching parts data:",O),u("Failed to load parts data")}},T=async()=>{if(n){c(!0),u(null);try{console.log(` META ANALYSIS: Processing data for tournament ${n}`);const{data:O,error:X}=await K.from("match_results").select("player1_name, player2_name, player1_beyblade, player2_beyblade, player1_blade_line, player2_blade_line, winner_name, outcome, points_awarded").eq("tournament_id",n);if(X)throw X;if(!O||O.length===0){console.log(" META ANALYSIS: No matches found for this tournament"),p({blade:{},ratchet:{},bit:{},lockchip:{},mainBlade:{},assistBlade:{}}),b([]),c(!1);return}console.log(` META ANALYSIS: Processing ${O.length} matches`);const ne=[],ae={blade:{},ratchet:{},bit:{},lockchip:{},mainBlade:{},assistBlade:{}},B=(F,I)=>{ae[F][I]||(ae[F][I]={name:I,usage:0,wins:0,losses:0,winRate:0,wilson:0})};O.forEach(F=>{if(!F.winner_name||!F.player1_name||!F.player2_name)return;const I=_f(F.player1_beyblade,F.player1_blade_line,h),le=_f(F.player2_beyblade,F.player2_blade_line,h),j={player:F.player1_name,opponent:F.player2_name,beyblade:F.player1_beyblade,opponentBeyblade:F.player2_beyblade,isWin:F.winner_name===F.player1_name,outcome:F.outcome||"Unknown",parsedParts:I},S={player:F.player2_name,opponent:F.player1_name,beyblade:F.player2_beyblade,opponentBeyblade:F.player1_beyblade,isWin:F.winner_name===F.player2_name,outcome:F.outcome||"Unknown",parsedParts:le};ne.push(j,S);const D=(oe,Z)=>{Object.entries(oe).forEach(([pe,ke])=>{if(pe==="isCustom"||!ke)return;B(pe,ke);const A=ae[pe][ke];A.usage++,Z?A.wins++:A.losses++})};D(I,j.isWin),D(le,S.isWin)}),Object.keys(ae).forEach(F=>{Object.values(ae[F]).forEach(I=>{const le=I.wins+I.losses;I.winRate=le>0?I.wins/le*100:0,I.wilson=wf(I.wins,le)})}),p(ae),b(ne),console.log(" META ANALYSIS: Data processing complete"),console.log(" META ANALYSIS: Stats summary:",{totalProcessedMatches:ne.length,uniqueBlades:Object.keys(ae.blade).length,uniqueRatchets:Object.keys(ae.ratchet).length,uniqueBits:Object.keys(ae.bit).length})}catch(O){console.error(" META ANALYSIS: Error processing tournament data:",O),u("Failed to process tournament data")}finally{c(!1)}}},$=()=>{console.log(` META ANALYSIS: Generating builds data for ${x}: ${y}`);const O={};v.forEach(ne=>{if(ne.parsedParts[x]!==y)return;const B=`${ne.beyblade}_${ne.player}`;O[B]||(O[B]={build:ne.beyblade,player:ne.player,wins:0,losses:0,winRate:0,wilson:0}),ne.isWin?O[B].wins++:O[B].losses++});const X=Object.values(O).map(ne=>{const ae=ne.wins+ne.losses;return ne.winRate=ae>0?ne.wins/ae*100:0,ne.wilson=wf(ne.wins,ae),ne}).sort((ne,ae)=>ae.wilson-ne.wilson);N(X),console.log(` META ANALYSIS: Generated ${X.length} builds for ${y}`)},q=(O,X)=>{E({build:O,player:X});const ne=v.filter(ae=>ae.beyblade===O&&ae.player===X);R(ne),console.log(` META ANALYSIS: Showing ${ne.length} matches for ${O} by ${X}`)},U=O=>{let X="asc";M.key===O&&M.direction==="asc"&&(X="desc"),V({key:O,direction:X})},L=O=>{const X=Object.values(m[O]||{}).filter(ne=>ne.usage>0);return M.key?[...X].sort((ne,ae)=>{const B=ne[M.key],F=ae[M.key];if(typeof B=="number"&&typeof F=="number")return M.direction==="asc"?B-F:F-B;const I=String(B),le=String(F);return M.direction==="asc"?I.localeCompare(le):le.localeCompare(I)}):X.sort((ne,ae)=>ae.wilson-ne.wilson)},H=O=>{switch(O){case"blade":return"Blades";case"ratchet":return"Ratchets";case"bit":return"Bits";case"lockchip":return"Lockchips";case"mainBlade":return"Main Blades";case"assistBlade":return"Assist Blades";default:return O}},te=({children:O,sortKey:X})=>a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>U(X),children:a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("span",{children:O}),M.key===X&&(M.direction==="asc"?a.jsx(S_,{size:12}):a.jsx(N_,{size:12}))]})});return i?a.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading tournaments..."})]})}):d?a.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-red-500 text-4xl mb-4",children:""}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Error"}),a.jsx("p",{className:"text-red-600 mb-4",children:d}),a.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"Reload Page"})]})}):a.jsx("div",{className:"page-container",children:a.jsxs("div",{className:"content-wrapper",children:[a.jsx("div",{className:"page-header",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"page-title",children:"Tournament Analytics"}),a.jsx("p",{className:"page-subtitle",children:"Comprehensive tournament and player statistics"})]}),a.jsxs("div",{className:"filter-tabs",children:[a.jsx("button",{onClick:()=>{t&&t()},className:"filter-tab filter-tab-inactive",children:"Overview"}),a.jsx("button",{className:"filter-tab filter-tab-active",children:"Meta Analysis"}),a.jsx("button",{onClick:()=>{t&&(t(),setTimeout(()=>{const O=new CustomEvent("navigateToPlayerAnalytics");window.dispatchEvent(O)},50))},className:"filter-tab filter-tab-inactive",children:"Player Analytics"})]})]})}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Tournament Selection"}),a.jsxs("div",{className:"max-w-md",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Tournament"}),a.jsxs("select",{value:n,onChange:O=>r(O.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"-- Select Tournament --"}),e.map(O=>a.jsxs("option",{value:O.id,children:[O.name," (",O.status,")"]},O.id))]})]})]}),n&&a.jsxs(a.Fragment,{children:[l&&a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-8",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mr-3"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-blue-800 font-medium",children:"Processing Tournament Data"}),a.jsx("p",{className:"text-blue-700 text-sm mt-1",children:"Parsing Beyblade names and calculating statistics..."})]})]})}),!l&&v.length===0&&a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 mb-8",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"text-yellow-600 mr-3",children:""}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-yellow-800 font-medium",children:"No Match Data Available"}),a.jsxs("p",{className:"text-yellow-700 text-sm mt-1",children:["This tournament has no completed matches yet. Meta analysis requires match results to generate statistics.",((Q=e.find(O=>O.id===n))==null?void 0:Q.status)==="upcoming"&&" Try selecting a completed tournament instead."]})]})]})}),!l&&v.length>0&&a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[a.jsx(T0,{className:"mr-2",size:24}),"Builds by Part"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Part Type"}),a.jsxs("select",{value:x,onChange:O=>{g(O.target.value),w(""),N([]),E(null),R([])},className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Select Part Type"}),a.jsx("option",{value:"blade",children:"Blade"}),a.jsx("option",{value:"ratchet",children:"Ratchet"}),a.jsx("option",{value:"bit",children:"Bit"}),a.jsx("option",{value:"lockchip",children:"Lockchip"}),a.jsx("option",{value:"mainBlade",children:"Main Blade"}),a.jsx("option",{value:"assistBlade",children:"Assist Blade"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Part Name"}),a.jsxs("select",{value:y,onChange:O=>w(O.target.value),disabled:!x,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100",children:[a.jsx("option",{value:"",children:"Select Part Name"}),x&&Object.values(m[x]||{}).filter(O=>O.usage>0).sort((O,X)=>X.wilson-O.wilson).map(O=>a.jsx("option",{value:O.name,children:O.name},O.name))]})]})]}),_.length>0&&a.jsxs("div",{className:"mb-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Builds using ",y," (",H(x),")"]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Build"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Wins"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Losses"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Win Rate"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Wilson Score"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:_.map((O,X)=>a.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>q(O.build,O.player),children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-600 hover:text-blue-800",children:O.build}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:O.player}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:O.wins}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:O.losses}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[O.winRate.toFixed(1),"%"]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:O.wilson.toFixed(3)})]},X))})]})})]}),P&&C.length>0&&a.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[a.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Matches for ",a.jsx("strong",{children:P.build})," by ",a.jsx("strong",{children:P.player})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-100",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Result"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Opponent"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Opponent's Bey"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Finish Type"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:C.map((O,X)=>a.jsxs("tr",{className:O.isWin?"bg-green-50":"bg-red-50",children:[a.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm font-medium ${O.isWin?"text-green-800":"text-red-800"}`,children:O.isWin?"Win":"Loss"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:O.opponent}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:O.opponentBeyblade}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:O.outcome})]},X))})]})})]})]}),!l&&v.length>0&&a.jsx("div",{className:"space-y-8",children:["blade","ratchet","bit","lockchip","mainBlade","assistBlade"].map(O=>a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 capitalize flex items-center",children:[a.jsx(Mo,{className:"mr-2",size:24}),H(O)]}),Object.keys(m[O]||{}).length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Mo,{size:48,className:"mx-auto text-gray-400 mb-4"}),a.jsxs("p",{className:"text-gray-500",children:["No ",H(O).toLowerCase()," data available"]}),a.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:["No matches used ",H(O).toLowerCase()," from this category"]})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx(te,{sortKey:"name",children:"Name"}),a.jsx(te,{sortKey:"usage",children:"Usage"}),a.jsx(te,{sortKey:"wins",children:"Wins"}),a.jsx(te,{sortKey:"losses",children:"Losses"}),a.jsx(te,{sortKey:"winRate",children:"Win Rate"}),a.jsx(te,{sortKey:"wilson",children:"Wilson Score"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:L(O).map((X,ne)=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:X.name}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:X.usage}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:X.wins}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:X.losses}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[X.winRate.toFixed(1),"%"]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:X.wilson.toFixed(3)})]},ne))})]})})]},O))})]})]})})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function aa(t){return t+.5|0}const Vs=(t,e,s)=>Math.max(Math.min(t,s),e);function ci(t){return Vs(aa(t*2.55),0,255)}function nn(t){return Vs(aa(t*255),0,255)}function _s(t){return Vs(aa(t/2.55)/100,0,1)}function jf(t){return Vs(aa(t*100),0,100)}const Dt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},pd=[..."0123456789ABCDEF"],Z_=t=>pd[t&15],e1=t=>pd[(t&240)>>4]+pd[t&15],Ea=t=>(t&240)>>4===(t&15),t1=t=>Ea(t.r)&&Ea(t.g)&&Ea(t.b)&&Ea(t.a);function s1(t){var e=t.length,s;return t[0]==="#"&&(e===4||e===5?s={r:255&Dt[t[1]]*17,g:255&Dt[t[2]]*17,b:255&Dt[t[3]]*17,a:e===5?Dt[t[4]]*17:255}:(e===7||e===9)&&(s={r:Dt[t[1]]<<4|Dt[t[2]],g:Dt[t[3]]<<4|Dt[t[4]],b:Dt[t[5]]<<4|Dt[t[6]],a:e===9?Dt[t[7]]<<4|Dt[t[8]]:255})),s}const n1=(t,e)=>t<255?e(t):"";function r1(t){var e=t1(t)?Z_:e1;return t?"#"+e(t.r)+e(t.g)+e(t.b)+n1(t.a,e):void 0}const i1=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function D0(t,e,s){const n=e*Math.min(s,1-s),r=(i,o=(i+t/30)%12)=>s-n*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function a1(t,e,s){const n=(r,i=(r+t/60)%6)=>s-s*e*Math.max(Math.min(i,4-i,1),0);return[n(5),n(3),n(1)]}function o1(t,e,s){const n=D0(t,1,.5);let r;for(e+s>1&&(r=1/(e+s),e*=r,s*=r),r=0;r<3;r++)n[r]*=1-e-s,n[r]+=e;return n}function l1(t,e,s,n,r){return t===r?(e-s)/n+(e<s?6:0):e===r?(s-t)/n+2:(t-e)/n+4}function Eu(t){const s=t.r/255,n=t.g/255,r=t.b/255,i=Math.max(s,n,r),o=Math.min(s,n,r),l=(i+o)/2;let c,d,u;return i!==o&&(u=i-o,d=l>.5?u/(2-i-o):u/(i+o),c=l1(s,n,r,u,i),c=c*60+.5),[c|0,d||0,l]}function Tu(t,e,s,n){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,s,n)).map(nn)}function Au(t,e,s){return Tu(D0,t,e,s)}function c1(t,e,s){return Tu(o1,t,e,s)}function d1(t,e,s){return Tu(a1,t,e,s)}function B0(t){return(t%360+360)%360}function u1(t){const e=i1.exec(t);let s=255,n;if(!e)return;e[5]!==n&&(s=e[6]?ci(+e[5]):nn(+e[5]));const r=B0(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?n=c1(r,i,o):e[1]==="hsv"?n=d1(r,i,o):n=Au(r,i,o),{r:n[0],g:n[1],b:n[2],a:s}}function h1(t,e){var s=Eu(t);s[0]=B0(s[0]+e),s=Au(s),t.r=s[0],t.g=s[1],t.b=s[2]}function f1(t){if(!t)return;const e=Eu(t),s=e[0],n=jf(e[1]),r=jf(e[2]);return t.a<255?`hsla(${s}, ${n}%, ${r}%, ${_s(t.a)})`:`hsl(${s}, ${n}%, ${r}%)`}const kf={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Nf={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function m1(){const t={},e=Object.keys(Nf),s=Object.keys(kf);let n,r,i,o,l;for(n=0;n<e.length;n++){for(o=l=e[n],r=0;r<s.length;r++)i=s[r],l=l.replace(i,kf[i]);i=parseInt(Nf[o],16),t[l]=[i>>16&255,i>>8&255,i&255]}return t}let Ta;function p1(t){Ta||(Ta=m1(),Ta.transparent=[0,0,0,0]);const e=Ta[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const g1=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function x1(t){const e=g1.exec(t);let s=255,n,r,i;if(e){if(e[7]!==n){const o=+e[7];s=e[8]?ci(o):Vs(o*255,0,255)}return n=+e[1],r=+e[3],i=+e[5],n=255&(e[2]?ci(n):Vs(n,0,255)),r=255&(e[4]?ci(r):Vs(r,0,255)),i=255&(e[6]?ci(i):Vs(i,0,255)),{r:n,g:r,b:i,a:s}}}function y1(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${_s(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const ec=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,er=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function v1(t,e,s){const n=er(_s(t.r)),r=er(_s(t.g)),i=er(_s(t.b));return{r:nn(ec(n+s*(er(_s(e.r))-n))),g:nn(ec(r+s*(er(_s(e.g))-r))),b:nn(ec(i+s*(er(_s(e.b))-i))),a:t.a+s*(e.a-t.a)}}function Aa(t,e,s){if(t){let n=Eu(t);n[e]=Math.max(0,Math.min(n[e]+n[e]*s,e===0?360:1)),n=Au(n),t.r=n[0],t.g=n[1],t.b=n[2]}}function I0(t,e){return t&&Object.assign(e||{},t)}function Sf(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=nn(t[3]))):(e=I0(t,{r:0,g:0,b:0,a:1}),e.a=nn(e.a)),e}function b1(t){return t.charAt(0)==="r"?x1(t):u1(t)}class Yi{constructor(e){if(e instanceof Yi)return e;const s=typeof e;let n;s==="object"?n=Sf(e):s==="string"&&(n=s1(e)||p1(e)||b1(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=I0(this._rgb);return e&&(e.a=_s(e.a)),e}set rgb(e){this._rgb=Sf(e)}rgbString(){return this._valid?y1(this._rgb):void 0}hexString(){return this._valid?r1(this._rgb):void 0}hslString(){return this._valid?f1(this._rgb):void 0}mix(e,s){if(e){const n=this.rgb,r=e.rgb;let i;const o=s===i?.5:s,l=2*o-1,c=n.a-r.a,d=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;i=1-d,n.r=255&d*n.r+i*r.r+.5,n.g=255&d*n.g+i*r.g+.5,n.b=255&d*n.b+i*r.b+.5,n.a=o*n.a+(1-o)*r.a,this.rgb=n}return this}interpolate(e,s){return e&&(this._rgb=v1(this._rgb,e._rgb,s)),this}clone(){return new Yi(this.rgb)}alpha(e){return this._rgb.a=nn(e),this}clearer(e){const s=this._rgb;return s.a*=1-e,this}greyscale(){const e=this._rgb,s=aa(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=s,this}opaquer(e){const s=this._rgb;return s.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Aa(this._rgb,2,e),this}darken(e){return Aa(this._rgb,2,-e),this}saturate(e){return Aa(this._rgb,1,e),this}desaturate(e){return Aa(this._rgb,1,-e),this}rotate(e){return h1(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function ms(){}const w1=(()=>{let t=0;return()=>t++})();function Ae(t){return t==null}function ze(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function ve(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function ot(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function is(t,e){return ot(t)?t:e}function ye(t,e){return typeof t>"u"?e:t}const _1=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Pe(t,e,s){if(t&&typeof t.call=="function")return t.apply(s,e)}function _e(t,e,s,n){let r,i,o;if(ze(t))for(i=t.length,r=0;r<i;r++)e.call(s,t[r],r);else if(ve(t))for(o=Object.keys(t),i=o.length,r=0;r<i;r++)e.call(s,t[o[r]],o[r])}function Lo(t,e){let s,n,r,i;if(!t||!e||t.length!==e.length)return!1;for(s=0,n=t.length;s<n;++s)if(r=t[s],i=e[s],r.datasetIndex!==i.datasetIndex||r.index!==i.index)return!1;return!0}function Do(t){if(ze(t))return t.map(Do);if(ve(t)){const e=Object.create(null),s=Object.keys(t),n=s.length;let r=0;for(;r<n;++r)e[s[r]]=Do(t[s[r]]);return e}return t}function z0(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function j1(t,e,s,n){if(!z0(t))return;const r=e[t],i=s[t];ve(r)&&ve(i)?Gi(r,i,n):e[t]=Do(i)}function Gi(t,e,s){const n=ze(e)?e:[e],r=n.length;if(!ve(t))return t;s=s||{};const i=s.merger||j1;let o;for(let l=0;l<r;++l){if(o=n[l],!ve(o))continue;const c=Object.keys(o);for(let d=0,u=c.length;d<u;++d)i(c[d],t,o,s)}return t}function Ni(t,e){return Gi(t,e,{merger:k1})}function k1(t,e,s){if(!z0(t))return;const n=e[t],r=s[t];ve(n)&&ve(r)?Ni(n,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Do(r))}const Cf={"":t=>t,x:t=>t.x,y:t=>t.y};function N1(t){const e=t.split("."),s=[];let n="";for(const r of e)n+=r,n.endsWith("\\")?n=n.slice(0,-1)+".":(s.push(n),n="");return s}function S1(t){const e=N1(t);return s=>{for(const n of e){if(n==="")break;s=s&&s[n]}return s}}function Qi(t,e){return(Cf[e]||(Cf[e]=S1(e)))(t)}function Ou(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Bo=t=>typeof t<"u",ln=t=>typeof t=="function",Pf=(t,e)=>{if(t.size!==e.size)return!1;for(const s of t)if(!e.has(s))return!1;return!0};function C1(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Je=Math.PI,At=2*Je,P1=At+Je,Io=Number.POSITIVE_INFINITY,E1=Je/180,Et=Je/2,vn=Je/4,Ef=Je*2/3,gd=Math.log10,Rr=Math.sign;function Si(t,e,s){return Math.abs(t-e)<s}function Tf(t){const e=Math.round(t);t=Si(t,e,t/1e3)?e:t;const s=Math.pow(10,Math.floor(gd(t))),n=t/s;return(n<=1?1:n<=2?2:n<=5?5:10)*s}function T1(t){const e=[],s=Math.sqrt(t);let n;for(n=1;n<s;n++)t%n===0&&(e.push(n),e.push(t/n));return s===(s|0)&&e.push(s),e.sort((r,i)=>r-i).pop(),e}function A1(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function zo(t){return!A1(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function O1(t,e){const s=Math.round(t);return s-e<=t&&s+e>=t}function R1(t,e,s){let n,r,i;for(n=0,r=t.length;n<r;n++)i=t[n][s],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function An(t){return t*(Je/180)}function Ru(t){return t*(180/Je)}function Af(t){if(!ot(t))return;let e=1,s=0;for(;Math.round(t*e)/e!==t;)e*=10,s++;return s}function M1(t,e){const s=e.x-t.x,n=e.y-t.y,r=Math.sqrt(s*s+n*n);let i=Math.atan2(n,s);return i<-.5*Je&&(i+=At),{angle:i,distance:r}}function xd(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function L1(t,e){return(t-e+P1)%At-Je}function St(t){return(t%At+At)%At}function $0(t,e,s,n){const r=St(t),i=St(e),o=St(s),l=St(i-r),c=St(o-r),d=St(r-i),u=St(r-o);return r===i||r===o||n&&i===o||l>c&&d<u}function Ns(t,e,s){return Math.max(e,Math.min(s,t))}function D1(t){return Ns(t,-32768,32767)}function pr(t,e,s,n=1e-6){return t>=Math.min(e,s)-n&&t<=Math.max(e,s)+n}function Mu(t,e,s){s=s||(o=>t[o]<e);let n=t.length-1,r=0,i;for(;n-r>1;)i=r+n>>1,s(i)?r=i:n=i;return{lo:r,hi:n}}const yd=(t,e,s,n)=>Mu(t,s,n?r=>{const i=t[r][e];return i<s||i===s&&t[r+1][e]===s}:r=>t[r][e]<s),B1=(t,e,s)=>Mu(t,s,n=>t[n][e]>=s);function I1(t,e,s){let n=0,r=t.length;for(;n<r&&t[n]<e;)n++;for(;r>n&&t[r-1]>s;)r--;return n>0||r<t.length?t.slice(n,r):t}const F0=["push","pop","shift","splice","unshift"];function z1(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),F0.forEach(s=>{const n="_onData"+Ou(s),r=t[s];Object.defineProperty(t,s,{configurable:!0,enumerable:!1,value(...i){const o=r.apply(this,i);return t._chartjs.listeners.forEach(l=>{typeof l[n]=="function"&&l[n](...i)}),o}})})}function Of(t,e){const s=t._chartjs;if(!s)return;const n=s.listeners,r=n.indexOf(e);r!==-1&&n.splice(r,1),!(n.length>0)&&(F0.forEach(i=>{delete t[i]}),delete t._chartjs)}function $1(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const U0=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function W0(t,e){let s=[],n=!1;return function(...r){s=r,n||(n=!0,U0.call(window,()=>{n=!1,t.apply(e,s)}))}}function F1(t,e){let s;return function(...n){return e?(clearTimeout(s),s=setTimeout(t,e,n)):t.apply(this,n),e}}const H0=t=>t==="start"?"left":t==="end"?"right":"center",kt=(t,e,s)=>t==="start"?e:t==="end"?s:(e+s)/2,U1=(t,e,s,n)=>t===(n?"left":"right")?s:t==="center"?(e+s)/2:e,Oa=t=>t===0||t===1,Rf=(t,e,s)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*At/s)),Mf=(t,e,s)=>Math.pow(2,-10*t)*Math.sin((t-e)*At/s)+1,Ci={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Et)+1,easeOutSine:t=>Math.sin(t*Et),easeInOutSine:t=>-.5*(Math.cos(Je*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Oa(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Oa(t)?t:Rf(t,.075,.3),easeOutElastic:t=>Oa(t)?t:Mf(t,.075,.3),easeInOutElastic(t){return Oa(t)?t:t<.5?.5*Rf(t*2,.1125,.45):.5+.5*Mf(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Ci.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Ci.easeInBounce(t*2)*.5:Ci.easeOutBounce(t*2-1)*.5+.5};function Lu(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Lf(t){return Lu(t)?t:new Yi(t)}function tc(t){return Lu(t)?t:new Yi(t).saturate(.5).darken(.1).hexString()}const W1=["x","y","borderWidth","radius","tension"],H1=["color","borderColor","backgroundColor"];function V1(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:H1},numbers:{type:"number",properties:W1}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function q1(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Df=new Map;function K1(t,e){e=e||{};const s=t+JSON.stringify(e);let n=Df.get(s);return n||(n=new Intl.NumberFormat(t,e),Df.set(s,n)),n}function V0(t,e,s){return K1(e,s).format(t)}const q0={values(t){return ze(t)?t:""+t},numeric(t,e,s){if(t===0)return"0";const n=this.chart.options.locale;let r,i=t;if(s.length>1){const d=Math.max(Math.abs(s[0].value),Math.abs(s[s.length-1].value));(d<1e-4||d>1e15)&&(r="scientific"),i=Y1(t,s)}const o=gd(Math.abs(i)),l=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:r,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),V0(t,n,c)},logarithmic(t,e,s){if(t===0)return"0";const n=s[e].significand||t/Math.pow(10,Math.floor(gd(t)));return[1,2,3,5,10,15].includes(n)||e>.8*s.length?q0.numeric.call(this,t,e,s):""}};function Y1(t,e){let s=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(s)>=1&&t!==Math.floor(t)&&(s=t-Math.floor(t)),s}var K0={formatters:q0};function G1(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,s)=>s.lineWidth,tickColor:(e,s)=>s.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:K0.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Wn=Object.create(null),vd=Object.create(null);function Pi(t,e){if(!e)return t;const s=e.split(".");for(let n=0,r=s.length;n<r;++n){const i=s[n];t=t[i]||(t[i]=Object.create(null))}return t}function sc(t,e,s){return typeof e=="string"?Gi(Pi(t,e),s):Gi(Pi(t,""),e)}class Q1{constructor(e,s){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,r)=>tc(r.backgroundColor),this.hoverBorderColor=(n,r)=>tc(r.borderColor),this.hoverColor=(n,r)=>tc(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(s)}set(e,s){return sc(this,e,s)}get(e){return Pi(this,e)}describe(e,s){return sc(vd,e,s)}override(e,s){return sc(Wn,e,s)}route(e,s,n,r){const i=Pi(this,e),o=Pi(this,n),l="_"+s;Object.defineProperties(i,{[l]:{value:i[s],writable:!0},[s]:{enumerable:!0,get(){const c=this[l],d=o[r];return ve(c)?Object.assign({},d,c):ye(c,d)},set(c){this[l]=c}}})}apply(e){e.forEach(s=>s(this))}}var $e=new Q1({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[V1,q1,G1]);function J1(t){return!t||Ae(t.size)||Ae(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function $o(t,e,s,n,r){let i=e[r];return i||(i=e[r]=t.measureText(r).width,s.push(r)),i>n&&(n=i),n}function X1(t,e,s,n){n=n||{};let r=n.data=n.data||{},i=n.garbageCollect=n.garbageCollect||[];n.font!==e&&(r=n.data={},i=n.garbageCollect=[],n.font=e),t.save(),t.font=e;let o=0;const l=s.length;let c,d,u,h,f;for(c=0;c<l;c++)if(h=s[c],h!=null&&!ze(h))o=$o(t,r,i,o,h);else if(ze(h))for(d=0,u=h.length;d<u;d++)f=h[d],f!=null&&!ze(f)&&(o=$o(t,r,i,o,f));t.restore();const m=i.length/2;if(m>s.length){for(c=0;c<m;c++)delete r[i[c]];i.splice(0,m)}return o}function bn(t,e,s){const n=t.currentDevicePixelRatio,r=s!==0?Math.max(s/2,.5):0;return Math.round((e-r)*n)/n+r}function Bf(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function bd(t,e,s,n){Y0(t,e,s,n,null)}function Y0(t,e,s,n,r){let i,o,l,c,d,u,h,f;const m=e.pointStyle,p=e.rotation,v=e.radius;let b=(p||0)*E1;if(m&&typeof m=="object"&&(i=m.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(s,n),t.rotate(b),t.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),t.restore();return}if(!(isNaN(v)||v<=0)){switch(t.beginPath(),m){default:r?t.ellipse(s,n,r/2,v,0,0,At):t.arc(s,n,v,0,At),t.closePath();break;case"triangle":u=r?r/2:v,t.moveTo(s+Math.sin(b)*u,n-Math.cos(b)*v),b+=Ef,t.lineTo(s+Math.sin(b)*u,n-Math.cos(b)*v),b+=Ef,t.lineTo(s+Math.sin(b)*u,n-Math.cos(b)*v),t.closePath();break;case"rectRounded":d=v*.516,c=v-d,o=Math.cos(b+vn)*c,h=Math.cos(b+vn)*(r?r/2-d:c),l=Math.sin(b+vn)*c,f=Math.sin(b+vn)*(r?r/2-d:c),t.arc(s-h,n-l,d,b-Je,b-Et),t.arc(s+f,n-o,d,b-Et,b),t.arc(s+h,n+l,d,b,b+Et),t.arc(s-f,n+o,d,b+Et,b+Je),t.closePath();break;case"rect":if(!p){c=Math.SQRT1_2*v,u=r?r/2:c,t.rect(s-u,n-c,2*u,2*c);break}b+=vn;case"rectRot":h=Math.cos(b)*(r?r/2:v),o=Math.cos(b)*v,l=Math.sin(b)*v,f=Math.sin(b)*(r?r/2:v),t.moveTo(s-h,n-l),t.lineTo(s+f,n-o),t.lineTo(s+h,n+l),t.lineTo(s-f,n+o),t.closePath();break;case"crossRot":b+=vn;case"cross":h=Math.cos(b)*(r?r/2:v),o=Math.cos(b)*v,l=Math.sin(b)*v,f=Math.sin(b)*(r?r/2:v),t.moveTo(s-h,n-l),t.lineTo(s+h,n+l),t.moveTo(s+f,n-o),t.lineTo(s-f,n+o);break;case"star":h=Math.cos(b)*(r?r/2:v),o=Math.cos(b)*v,l=Math.sin(b)*v,f=Math.sin(b)*(r?r/2:v),t.moveTo(s-h,n-l),t.lineTo(s+h,n+l),t.moveTo(s+f,n-o),t.lineTo(s-f,n+o),b+=vn,h=Math.cos(b)*(r?r/2:v),o=Math.cos(b)*v,l=Math.sin(b)*v,f=Math.sin(b)*(r?r/2:v),t.moveTo(s-h,n-l),t.lineTo(s+h,n+l),t.moveTo(s+f,n-o),t.lineTo(s-f,n+o);break;case"line":o=r?r/2:Math.cos(b)*v,l=Math.sin(b)*v,t.moveTo(s-o,n-l),t.lineTo(s+o,n+l);break;case"dash":t.moveTo(s,n),t.lineTo(s+Math.cos(b)*(r?r/2:v),n+Math.sin(b)*v);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Ss(t,e,s){return s=s||.5,!e||t&&t.x>e.left-s&&t.x<e.right+s&&t.y>e.top-s&&t.y<e.bottom+s}function pl(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function gl(t){t.restore()}function Z1(t,e,s,n,r){if(!e)return t.lineTo(s.x,s.y);if(r==="middle"){const i=(e.x+s.x)/2;t.lineTo(i,e.y),t.lineTo(i,s.y)}else r==="after"!=!!n?t.lineTo(e.x,s.y):t.lineTo(s.x,e.y);t.lineTo(s.x,s.y)}function ej(t,e,s,n){if(!e)return t.lineTo(s.x,s.y);t.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?s.cp2x:s.cp1x,n?s.cp2y:s.cp1y,s.x,s.y)}function tj(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Ae(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function sj(t,e,s,n,r){if(r.strikethrough||r.underline){const i=t.measureText(n),o=e-i.actualBoundingBoxLeft,l=e+i.actualBoundingBoxRight,c=s-i.actualBoundingBoxAscent,d=s+i.actualBoundingBoxDescent,u=r.strikethrough?(c+d)/2:d;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,u),t.lineTo(l,u),t.stroke()}}function nj(t,e){const s=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=s}function Mr(t,e,s,n,r,i={}){const o=ze(e)?e:[e],l=i.strokeWidth>0&&i.strokeColor!=="";let c,d;for(t.save(),t.font=r.string,tj(t,i),c=0;c<o.length;++c)d=o[c],i.backdrop&&nj(t,i.backdrop),l&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),Ae(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(d,s,n,i.maxWidth)),t.fillText(d,s,n,i.maxWidth),sj(t,s,n,d,i),n+=Number(r.lineHeight);t.restore()}function Fo(t,e){const{x:s,y:n,w:r,h:i,radius:o}=e;t.arc(s+o.topLeft,n+o.topLeft,o.topLeft,1.5*Je,Je,!0),t.lineTo(s,n+i-o.bottomLeft),t.arc(s+o.bottomLeft,n+i-o.bottomLeft,o.bottomLeft,Je,Et,!0),t.lineTo(s+r-o.bottomRight,n+i),t.arc(s+r-o.bottomRight,n+i-o.bottomRight,o.bottomRight,Et,0,!0),t.lineTo(s+r,n+o.topRight),t.arc(s+r-o.topRight,n+o.topRight,o.topRight,0,-Et,!0),t.lineTo(s+o.topLeft,n)}const rj=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,ij=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function aj(t,e){const s=(""+t).match(rj);if(!s||s[1]==="normal")return e*1.2;switch(t=+s[2],s[3]){case"px":return t;case"%":t/=100;break}return e*t}const oj=t=>+t||0;function G0(t,e){const s={},n=ve(e),r=n?Object.keys(e):e,i=ve(t)?n?o=>ye(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of r)s[o]=oj(i(o));return s}function lj(t){return G0(t,{top:"y",right:"x",bottom:"y",left:"x"})}function _r(t){return G0(t,["topLeft","topRight","bottomLeft","bottomRight"])}function ht(t){const e=lj(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Ze(t,e){t=t||{},e=e||$e.font;let s=ye(t.size,e.size);typeof s=="string"&&(s=parseInt(s,10));let n=ye(t.style,e.style);n&&!(""+n).match(ij)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const r={family:ye(t.family,e.family),lineHeight:aj(ye(t.lineHeight,e.lineHeight),s),size:s,style:n,weight:ye(t.weight,e.weight),string:""};return r.string=J1(r),r}function Ra(t,e,s,n){let r,i,o;for(r=0,i=t.length;r<i;++r)if(o=t[r],o!==void 0&&o!==void 0)return o}function cj(t,e,s){const{min:n,max:r}=t,i=_1(e,(r-n)/2),o=(l,c)=>s&&l===0?0:l+c;return{min:o(n,-Math.abs(i)),max:o(r,i)}}function mn(t,e){return Object.assign(Object.create(t),e)}function Du(t,e=[""],s,n,r=()=>t[0]){const i=s||t;typeof n>"u"&&(n=Z0("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:n,_getTarget:r,override:l=>Du([l,...t],e,i,n)};return new Proxy(o,{deleteProperty(l,c){return delete l[c],delete l._keys,delete t[0][c],!0},get(l,c){return J0(l,c,()=>xj(c,e,t,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(l,c){return zf(l).includes(c)},ownKeys(l){return zf(l)},set(l,c,d){const u=l._storage||(l._storage=r());return l[c]=u[c]=d,delete l._keys,!0}})}function Lr(t,e,s,n){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:s,_stack:new Set,_descriptors:Q0(t,n),setContext:i=>Lr(t,i,s,n),override:i=>Lr(t.override(i),e,s,n)};return new Proxy(r,{deleteProperty(i,o){return delete i[o],delete t[o],!0},get(i,o,l){return J0(i,o,()=>uj(i,o,l))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(i,o,l){return t[o]=l,delete i[o],!0}})}function Q0(t,e={scriptable:!0,indexable:!0}){const{_scriptable:s=e.scriptable,_indexable:n=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:s,indexable:n,isScriptable:ln(s)?s:()=>s,isIndexable:ln(n)?n:()=>n}}const dj=(t,e)=>t?t+Ou(e):e,Bu=(t,e)=>ve(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function J0(t,e,s){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const n=s();return t[e]=n,n}function uj(t,e,s){const{_proxy:n,_context:r,_subProxy:i,_descriptors:o}=t;let l=n[e];return ln(l)&&o.isScriptable(e)&&(l=hj(e,l,t,s)),ze(l)&&l.length&&(l=fj(e,l,t,o.isIndexable)),Bu(e,l)&&(l=Lr(l,r,i&&i[e],o)),l}function hj(t,e,s,n){const{_proxy:r,_context:i,_subProxy:o,_stack:l}=s;if(l.has(t))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+t);l.add(t);let c=e(i,o||n);return l.delete(t),Bu(t,c)&&(c=Iu(r._scopes,r,t,c)),c}function fj(t,e,s,n){const{_proxy:r,_context:i,_subProxy:o,_descriptors:l}=s;if(typeof i.index<"u"&&n(t))return e[i.index%e.length];if(ve(e[0])){const c=e,d=r._scopes.filter(u=>u!==c);e=[];for(const u of c){const h=Iu(d,r,t,u);e.push(Lr(h,i,o&&o[t],l))}}return e}function X0(t,e,s){return ln(t)?t(e,s):t}const mj=(t,e)=>t===!0?e:typeof t=="string"?Qi(e,t):void 0;function pj(t,e,s,n,r){for(const i of e){const o=mj(s,i);if(o){t.add(o);const l=X0(o._fallback,s,r);if(typeof l<"u"&&l!==s&&l!==n)return l}else if(o===!1&&typeof n<"u"&&s!==n)return null}return!1}function Iu(t,e,s,n){const r=e._rootScopes,i=X0(e._fallback,s,n),o=[...t,...r],l=new Set;l.add(n);let c=If(l,o,s,i||s,n);return c===null||typeof i<"u"&&i!==s&&(c=If(l,o,i,c,n),c===null)?!1:Du(Array.from(l),[""],r,i,()=>gj(e,s,n))}function If(t,e,s,n,r){for(;s;)s=pj(t,e,s,n,r);return s}function gj(t,e,s){const n=t._getTarget();e in n||(n[e]={});const r=n[e];return ze(r)&&ve(s)?s:r||{}}function xj(t,e,s,n){let r;for(const i of e)if(r=Z0(dj(i,t),s),typeof r<"u")return Bu(t,r)?Iu(s,n,t,r):r}function Z0(t,e){for(const s of e){if(!s)continue;const n=s[t];if(typeof n<"u")return n}}function zf(t){let e=t._keys;return e||(e=t._keys=yj(t._scopes)),e}function yj(t){const e=new Set;for(const s of t)for(const n of Object.keys(s).filter(r=>!r.startsWith("_")))e.add(n);return Array.from(e)}function vj(t,e,s,n){const{iScale:r}=t,{key:i="r"}=this._parsing,o=new Array(n);let l,c,d,u;for(l=0,c=n;l<c;++l)d=l+s,u=e[d],o[l]={r:r.parse(Qi(u,i),d)};return o}const bj=Number.EPSILON||1e-14,Dr=(t,e)=>e<t.length&&!t[e].skip&&t[e],ex=t=>t==="x"?"y":"x";function wj(t,e,s,n){const r=t.skip?e:t,i=e,o=s.skip?e:s,l=xd(i,r),c=xd(o,i);let d=l/(l+c),u=c/(l+c);d=isNaN(d)?0:d,u=isNaN(u)?0:u;const h=n*d,f=n*u;return{previous:{x:i.x-h*(o.x-r.x),y:i.y-h*(o.y-r.y)},next:{x:i.x+f*(o.x-r.x),y:i.y+f*(o.y-r.y)}}}function _j(t,e,s){const n=t.length;let r,i,o,l,c,d=Dr(t,0);for(let u=0;u<n-1;++u)if(c=d,d=Dr(t,u+1),!(!c||!d)){if(Si(e[u],0,bj)){s[u]=s[u+1]=0;continue}r=s[u]/e[u],i=s[u+1]/e[u],l=Math.pow(r,2)+Math.pow(i,2),!(l<=9)&&(o=3/Math.sqrt(l),s[u]=r*o*e[u],s[u+1]=i*o*e[u])}}function jj(t,e,s="x"){const n=ex(s),r=t.length;let i,o,l,c=Dr(t,0);for(let d=0;d<r;++d){if(o=l,l=c,c=Dr(t,d+1),!l)continue;const u=l[s],h=l[n];o&&(i=(u-o[s])/3,l[`cp1${s}`]=u-i,l[`cp1${n}`]=h-i*e[d]),c&&(i=(c[s]-u)/3,l[`cp2${s}`]=u+i,l[`cp2${n}`]=h+i*e[d])}}function kj(t,e="x"){const s=ex(e),n=t.length,r=Array(n).fill(0),i=Array(n);let o,l,c,d=Dr(t,0);for(o=0;o<n;++o)if(l=c,c=d,d=Dr(t,o+1),!!c){if(d){const u=d[e]-c[e];r[o]=u!==0?(d[s]-c[s])/u:0}i[o]=l?d?Rr(r[o-1])!==Rr(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}_j(t,r,i),jj(t,i,e)}function Ma(t,e,s){return Math.max(Math.min(t,s),e)}function Nj(t,e){let s,n,r,i,o,l=Ss(t[0],e);for(s=0,n=t.length;s<n;++s)o=i,i=l,l=s<n-1&&Ss(t[s+1],e),i&&(r=t[s],o&&(r.cp1x=Ma(r.cp1x,e.left,e.right),r.cp1y=Ma(r.cp1y,e.top,e.bottom)),l&&(r.cp2x=Ma(r.cp2x,e.left,e.right),r.cp2y=Ma(r.cp2y,e.top,e.bottom)))}function Sj(t,e,s,n,r){let i,o,l,c;if(e.spanGaps&&(t=t.filter(d=>!d.skip)),e.cubicInterpolationMode==="monotone")kj(t,r);else{let d=n?t[t.length-1]:t[0];for(i=0,o=t.length;i<o;++i)l=t[i],c=wj(d,l,t[Math.min(i+1,o-(n?0:1))%o],e.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,d=l}e.capBezierPoints&&Nj(t,s)}function zu(){return typeof window<"u"&&typeof document<"u"}function $u(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Uo(t,e,s){let n;return typeof t=="string"?(n=parseInt(t,10),t.indexOf("%")!==-1&&(n=n/100*e.parentNode[s])):n=t,n}const xl=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function Cj(t,e){return xl(t).getPropertyValue(e)}const Pj=["top","right","bottom","left"];function Ln(t,e,s){const n={};s=s?"-"+s:"";for(let r=0;r<4;r++){const i=Pj[r];n[i]=parseFloat(t[e+"-"+i+s])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const Ej=(t,e,s)=>(t>0||e>0)&&(!s||!s.shadowRoot);function Tj(t,e){const s=t.touches,n=s&&s.length?s[0]:t,{offsetX:r,offsetY:i}=n;let o=!1,l,c;if(Ej(r,i,t.target))l=r,c=i;else{const d=e.getBoundingClientRect();l=n.clientX-d.left,c=n.clientY-d.top,o=!0}return{x:l,y:c,box:o}}function Nn(t,e){if("native"in t)return t;const{canvas:s,currentDevicePixelRatio:n}=e,r=xl(s),i=r.boxSizing==="border-box",o=Ln(r,"padding"),l=Ln(r,"border","width"),{x:c,y:d,box:u}=Tj(t,s),h=o.left+(u&&l.left),f=o.top+(u&&l.top);let{width:m,height:p}=e;return i&&(m-=o.width+l.width,p-=o.height+l.height),{x:Math.round((c-h)/m*s.width/n),y:Math.round((d-f)/p*s.height/n)}}function Aj(t,e,s){let n,r;if(e===void 0||s===void 0){const i=t&&$u(t);if(!i)e=t.clientWidth,s=t.clientHeight;else{const o=i.getBoundingClientRect(),l=xl(i),c=Ln(l,"border","width"),d=Ln(l,"padding");e=o.width-d.width-c.width,s=o.height-d.height-c.height,n=Uo(l.maxWidth,i,"clientWidth"),r=Uo(l.maxHeight,i,"clientHeight")}}return{width:e,height:s,maxWidth:n||Io,maxHeight:r||Io}}const La=t=>Math.round(t*10)/10;function Oj(t,e,s,n){const r=xl(t),i=Ln(r,"margin"),o=Uo(r.maxWidth,t,"clientWidth")||Io,l=Uo(r.maxHeight,t,"clientHeight")||Io,c=Aj(t,e,s);let{width:d,height:u}=c;if(r.boxSizing==="content-box"){const f=Ln(r,"border","width"),m=Ln(r,"padding");d-=m.width+f.width,u-=m.height+f.height}return d=Math.max(0,d-i.width),u=Math.max(0,n?d/n:u-i.height),d=La(Math.min(d,o,c.maxWidth)),u=La(Math.min(u,l,c.maxHeight)),d&&!u&&(u=La(d/2)),(e!==void 0||s!==void 0)&&n&&c.height&&u>c.height&&(u=c.height,d=La(Math.floor(u*n))),{width:d,height:u}}function $f(t,e,s){const n=e||1,r=Math.floor(t.height*n),i=Math.floor(t.width*n);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(s||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==n||o.height!==r||o.width!==i?(t.currentDevicePixelRatio=n,o.height=r,o.width=i,t.ctx.setTransform(n,0,0,n,0,0),!0):!1}const Rj=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};zu()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function Ff(t,e){const s=Cj(t,e),n=s&&s.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function Sn(t,e,s,n){return{x:t.x+s*(e.x-t.x),y:t.y+s*(e.y-t.y)}}function Mj(t,e,s,n){return{x:t.x+s*(e.x-t.x),y:n==="middle"?s<.5?t.y:e.y:n==="after"?s<1?t.y:e.y:s>0?e.y:t.y}}function Lj(t,e,s,n){const r={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},o=Sn(t,r,s),l=Sn(r,i,s),c=Sn(i,e,s),d=Sn(o,l,s),u=Sn(l,c,s);return Sn(d,u,s)}const Dj=function(t,e){return{x(s){return t+t+e-s},setWidth(s){e=s},textAlign(s){return s==="center"?s:s==="right"?"left":"right"},xPlus(s,n){return s-n},leftForLtr(s,n){return s-n}}},Bj=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function jr(t,e,s){return t?Dj(e,s):Bj()}function tx(t,e){let s,n;(e==="ltr"||e==="rtl")&&(s=t.canvas.style,n=[s.getPropertyValue("direction"),s.getPropertyPriority("direction")],s.setProperty("direction",e,"important"),t.prevTextDirection=n)}function sx(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function nx(t){return t==="angle"?{between:$0,compare:L1,normalize:St}:{between:pr,compare:(e,s)=>e-s,normalize:e=>e}}function Uf({start:t,end:e,count:s,loop:n,style:r}){return{start:t%s,end:e%s,loop:n&&(e-t+1)%s===0,style:r}}function Ij(t,e,s){const{property:n,start:r,end:i}=s,{between:o,normalize:l}=nx(n),c=e.length;let{start:d,end:u,loop:h}=t,f,m;if(h){for(d+=c,u+=c,f=0,m=c;f<m&&o(l(e[d%c][n]),r,i);++f)d--,u--;d%=c,u%=c}return u<d&&(u+=c),{start:d,end:u,loop:h,style:t.style}}function rx(t,e,s){if(!s)return[t];const{property:n,start:r,end:i}=s,o=e.length,{compare:l,between:c,normalize:d}=nx(n),{start:u,end:h,loop:f,style:m}=Ij(t,e,s),p=[];let v=!1,b=null,x,g,y;const w=()=>c(r,y,x)&&l(r,y)!==0,_=()=>l(i,x)===0||c(i,y,x),N=()=>v||w(),P=()=>!v||_();for(let E=u,C=u;E<=h;++E)g=e[E%o],!g.skip&&(x=d(g[n]),x!==y&&(v=c(x,r,i),b===null&&N()&&(b=l(x,r)===0?E:C),b!==null&&P()&&(p.push(Uf({start:b,end:E,loop:f,count:o,style:m})),b=null),C=E,y=x));return b!==null&&p.push(Uf({start:b,end:h,loop:f,count:o,style:m})),p}function ix(t,e){const s=[],n=t.segments;for(let r=0;r<n.length;r++){const i=rx(n[r],t.points,e);i.length&&s.push(...i)}return s}function zj(t,e,s,n){let r=0,i=e-1;if(s&&!n)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,s&&(i+=r);i>r&&t[i%e].skip;)i--;return i%=e,{start:r,end:i}}function $j(t,e,s,n){const r=t.length,i=[];let o=e,l=t[e],c;for(c=e+1;c<=s;++c){const d=t[c%r];d.skip||d.stop?l.skip||(n=!1,i.push({start:e%r,end:(c-1)%r,loop:n}),e=o=d.stop?c:null):(o=c,l.skip&&(e=c)),l=d}return o!==null&&i.push({start:e%r,end:o%r,loop:n}),i}function Fj(t,e){const s=t.points,n=t.options.spanGaps,r=s.length;if(!r)return[];const i=!!t._loop,{start:o,end:l}=zj(s,r,i,n);if(n===!0)return Wf(t,[{start:o,end:l,loop:i}],s,e);const c=l<o?l+r:l,d=!!t._fullLoop&&o===0&&l===r-1;return Wf(t,$j(s,o,c,d),s,e)}function Wf(t,e,s,n){return!n||!n.setContext||!s?e:Uj(t,e,s,n)}function Uj(t,e,s,n){const r=t._chart.getContext(),i=Hf(t.options),{_datasetIndex:o,options:{spanGaps:l}}=t,c=s.length,d=[];let u=i,h=e[0].start,f=h;function m(p,v,b,x){const g=l?-1:1;if(p!==v){for(p+=c;s[p%c].skip;)p-=g;for(;s[v%c].skip;)v+=g;p%c!==v%c&&(d.push({start:p%c,end:v%c,loop:b,style:x}),u=x,h=v%c)}}for(const p of e){h=l?h:p.start;let v=s[h%c],b;for(f=h+1;f<=p.end;f++){const x=s[f%c];b=Hf(n.setContext(mn(r,{type:"segment",p0:v,p1:x,p0DataIndex:(f-1)%c,p1DataIndex:f%c,datasetIndex:o}))),Wj(b,u)&&m(h,f-1,p.loop,u),v=x,u=b}h<f-1&&m(h,f-1,p.loop,u)}return d}function Hf(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function Wj(t,e){if(!e)return!1;const s=[],n=function(r,i){return Lu(i)?(s.includes(i)||s.push(i),s.indexOf(i)):i};return JSON.stringify(t,n)!==JSON.stringify(e,n)}function Da(t,e,s){return t.options.clip?t[s]:e[s]}function Hj(t,e){const{xScale:s,yScale:n}=t;return s&&n?{left:Da(s,e,"left"),right:Da(s,e,"right"),top:Da(n,e,"top"),bottom:Da(n,e,"bottom")}:e}function ax(t,e){const s=e._clip;if(s.disabled)return!1;const n=Hj(e,t.chartArea);return{left:s.left===!1?0:n.left-(s.left===!0?0:s.left),right:s.right===!1?t.width:n.right+(s.right===!0?0:s.right),top:s.top===!1?0:n.top-(s.top===!0?0:s.top),bottom:s.bottom===!1?t.height:n.bottom+(s.bottom===!0?0:s.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class Vj{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,s,n,r){const i=s.listeners[r],o=s.duration;i.forEach(l=>l({chart:e,initial:s.initial,numSteps:o,currentStep:Math.min(n-s.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=U0.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let s=0;this._charts.forEach((n,r)=>{if(!n.running||!n.items.length)return;const i=n.items;let o=i.length-1,l=!1,c;for(;o>=0;--o)c=i[o],c._active?(c._total>n.duration&&(n.duration=c._total),c.tick(e),l=!0):(i[o]=i[i.length-1],i.pop());l&&(r.draw(),this._notify(r,n,e,"progress")),i.length||(n.running=!1,this._notify(r,n,e,"complete"),n.initial=!1),s+=i.length}),this._lastDate=e,s===0&&(this._running=!1)}_getAnims(e){const s=this._charts;let n=s.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},s.set(e,n)),n}listen(e,s,n){this._getAnims(e).listeners[s].push(n)}add(e,s){!s||!s.length||this._getAnims(e).items.push(...s)}has(e){return this._getAnims(e).items.length>0}start(e){const s=this._charts.get(e);s&&(s.running=!0,s.start=Date.now(),s.duration=s.items.reduce((n,r)=>Math.max(n,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const s=this._charts.get(e);return!(!s||!s.running||!s.items.length)}stop(e){const s=this._charts.get(e);if(!s||!s.items.length)return;const n=s.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();s.items=[],this._notify(e,s,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var gs=new Vj;const Vf="transparent",qj={boolean(t,e,s){return s>.5?e:t},color(t,e,s){const n=Lf(t||Vf),r=n.valid&&Lf(e||Vf);return r&&r.valid?r.mix(n,s).hexString():e},number(t,e,s){return t+(e-t)*s}};class Kj{constructor(e,s,n,r){const i=s[n];r=Ra([e.to,r,i,e.from]);const o=Ra([e.from,i,r]);this._active=!0,this._fn=e.fn||qj[e.type||typeof o],this._easing=Ci[e.easing]||Ci.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=s,this._prop=n,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,s,n){if(this._active){this._notify(!1);const r=this._target[this._prop],i=n-this._start,o=this._duration-i;this._start=n,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=Ra([e.to,s,r,e.from]),this._from=Ra([e.from,r,s])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const s=e-this._start,n=this._duration,r=this._prop,i=this._from,o=this._loop,l=this._to;let c;if(this._active=i!==l&&(o||s<n),!this._active){this._target[r]=l,this._notify(!0);return}if(s<0){this._target[r]=i;return}c=s/n%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[r]=this._fn(i,l,c)}wait(){const e=this._promises||(this._promises=[]);return new Promise((s,n)=>{e.push({res:s,rej:n})})}_notify(e){const s=e?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][s]()}}class ox{constructor(e,s){this._chart=e,this._properties=new Map,this.configure(s)}configure(e){if(!ve(e))return;const s=Object.keys($e.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const i=e[r];if(!ve(i))return;const o={};for(const l of s)o[l]=i[l];(ze(i.properties)&&i.properties||[r]).forEach(l=>{(l===r||!n.has(l))&&n.set(l,o)})})}_animateOptions(e,s){const n=s.options,r=Gj(e,n);if(!r)return[];const i=this._createAnimations(r,n);return n.$shared&&Yj(e.options.$animations,n).then(()=>{e.options=n},()=>{}),i}_createAnimations(e,s){const n=this._properties,r=[],i=e.$animations||(e.$animations={}),o=Object.keys(s),l=Date.now();let c;for(c=o.length-1;c>=0;--c){const d=o[c];if(d.charAt(0)==="$")continue;if(d==="options"){r.push(...this._animateOptions(e,s));continue}const u=s[d];let h=i[d];const f=n.get(d);if(h)if(f&&h.active()){h.update(f,u,l);continue}else h.cancel();if(!f||!f.duration){e[d]=u;continue}i[d]=h=new Kj(f,e,d,u),r.push(h)}return r}update(e,s){if(this._properties.size===0){Object.assign(e,s);return}const n=this._createAnimations(e,s);if(n.length)return gs.add(this._chart,n),!0}}function Yj(t,e){const s=[],n=Object.keys(e);for(let r=0;r<n.length;r++){const i=t[n[r]];i&&i.active()&&s.push(i.wait())}return Promise.all(s)}function Gj(t,e){if(!e)return;let s=t.options;if(!s){t.options=e;return}return s.$shared&&(t.options=s=Object.assign({},s,{$shared:!1,$animations:{}})),s}function qf(t,e){const s=t&&t.options||{},n=s.reverse,r=s.min===void 0?e:0,i=s.max===void 0?e:0;return{start:n?i:r,end:n?r:i}}function Qj(t,e,s){if(s===!1)return!1;const n=qf(t,s),r=qf(e,s);return{top:r.end,right:n.end,bottom:r.start,left:n.start}}function Jj(t){let e,s,n,r;return ve(t)?(e=t.top,s=t.right,n=t.bottom,r=t.left):e=s=n=r=t,{top:e,right:s,bottom:n,left:r,disabled:t===!1}}function lx(t,e){const s=[],n=t._getSortedDatasetMetas(e);let r,i;for(r=0,i=n.length;r<i;++r)s.push(n[r].index);return s}function Kf(t,e,s,n={}){const r=t.keys,i=n.mode==="single";let o,l,c,d;if(e===null)return;let u=!1;for(o=0,l=r.length;o<l;++o){if(c=+r[o],c===s){if(u=!0,n.all)continue;break}d=t.values[c],ot(d)&&(i||e===0||Rr(e)===Rr(d))&&(e+=d)}return!u&&!n.all?0:e}function Xj(t,e){const{iScale:s,vScale:n}=e,r=s.axis==="x"?"x":"y",i=n.axis==="x"?"x":"y",o=Object.keys(t),l=new Array(o.length);let c,d,u;for(c=0,d=o.length;c<d;++c)u=o[c],l[c]={[r]:u,[i]:t[u]};return l}function nc(t,e){const s=t&&t.options.stacked;return s||s===void 0&&e.stack!==void 0}function Zj(t,e,s){return`${t.id}.${e.id}.${s.stack||s.type}`}function e2(t){const{min:e,max:s,minDefined:n,maxDefined:r}=t.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:r?s:Number.POSITIVE_INFINITY}}function t2(t,e,s){const n=t[e]||(t[e]={});return n[s]||(n[s]={})}function Yf(t,e,s,n){for(const r of e.getMatchingVisibleMetas(n).reverse()){const i=t[r.index];if(s&&i>0||!s&&i<0)return r.index}return null}function Gf(t,e){const{chart:s,_cachedMeta:n}=t,r=s._stacks||(s._stacks={}),{iScale:i,vScale:o,index:l}=n,c=i.axis,d=o.axis,u=Zj(i,o,n),h=e.length;let f;for(let m=0;m<h;++m){const p=e[m],{[c]:v,[d]:b}=p,x=p._stacks||(p._stacks={});f=x[d]=t2(r,u,v),f[l]=b,f._top=Yf(f,o,!0,n.type),f._bottom=Yf(f,o,!1,n.type);const g=f._visualValues||(f._visualValues={});g[l]=b}}function rc(t,e){const s=t.scales;return Object.keys(s).filter(n=>s[n].axis===e).shift()}function s2(t,e){return mn(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function n2(t,e,s){return mn(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:s,index:e,mode:"default",type:"data"})}function Xr(t,e){const s=t.controller.index,n=t.vScale&&t.vScale.axis;if(n){e=e||t._parsed;for(const r of e){const i=r._stacks;if(!i||i[n]===void 0||i[n][s]===void 0)return;delete i[n][s],i[n]._visualValues!==void 0&&i[n]._visualValues[s]!==void 0&&delete i[n]._visualValues[s]}}}const ic=t=>t==="reset"||t==="none",Qf=(t,e)=>e?t:Object.assign({},t),r2=(t,e,s)=>t&&!e.hidden&&e._stacked&&{keys:lx(s,!0),values:null};class Ei{constructor(e,s){this.chart=e,this._ctx=e.ctx,this.index=s,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=nc(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Xr(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,s=this._cachedMeta,n=this.getDataset(),r=(h,f,m,p)=>h==="x"?f:h==="r"?p:m,i=s.xAxisID=ye(n.xAxisID,rc(e,"x")),o=s.yAxisID=ye(n.yAxisID,rc(e,"y")),l=s.rAxisID=ye(n.rAxisID,rc(e,"r")),c=s.indexAxis,d=s.iAxisID=r(c,i,o,l),u=s.vAxisID=r(c,o,i,l);s.xScale=this.getScaleForId(i),s.yScale=this.getScaleForId(o),s.rScale=this.getScaleForId(l),s.iScale=this.getScaleForId(d),s.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const s=this._cachedMeta;return e===s.iScale?s.vScale:s.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Of(this._data,this),e._stacked&&Xr(e)}_dataCheck(){const e=this.getDataset(),s=e.data||(e.data=[]),n=this._data;if(ve(s)){const r=this._cachedMeta;this._data=Xj(s,r)}else if(n!==s){if(n){Of(n,this);const r=this._cachedMeta;Xr(r),r._parsed=[]}s&&Object.isExtensible(s)&&z1(s,this),this._syncList=[],this._data=s}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const s=this._cachedMeta,n=this.getDataset();let r=!1;this._dataCheck();const i=s._stacked;s._stacked=nc(s.vScale,s),s.stack!==n.stack&&(r=!0,Xr(s),s.stack=n.stack),this._resyncElements(e),(r||i!==s._stacked)&&(Gf(this,s._parsed),s._stacked=nc(s.vScale,s))}configure(){const e=this.chart.config,s=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),s,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,s){const{_cachedMeta:n,_data:r}=this,{iScale:i,_stacked:o}=n,l=i.axis;let c=e===0&&s===r.length?!0:n._sorted,d=e>0&&n._parsed[e-1],u,h,f;if(this._parsing===!1)n._parsed=r,n._sorted=!0,f=r;else{ze(r[e])?f=this.parseArrayData(n,r,e,s):ve(r[e])?f=this.parseObjectData(n,r,e,s):f=this.parsePrimitiveData(n,r,e,s);const m=()=>h[l]===null||d&&h[l]<d[l];for(u=0;u<s;++u)n._parsed[u+e]=h=f[u],c&&(m()&&(c=!1),d=h);n._sorted=c}o&&Gf(this,f)}parsePrimitiveData(e,s,n,r){const{iScale:i,vScale:o}=e,l=i.axis,c=o.axis,d=i.getLabels(),u=i===o,h=new Array(r);let f,m,p;for(f=0,m=r;f<m;++f)p=f+n,h[f]={[l]:u||i.parse(d[p],p),[c]:o.parse(s[p],p)};return h}parseArrayData(e,s,n,r){const{xScale:i,yScale:o}=e,l=new Array(r);let c,d,u,h;for(c=0,d=r;c<d;++c)u=c+n,h=s[u],l[c]={x:i.parse(h[0],u),y:o.parse(h[1],u)};return l}parseObjectData(e,s,n,r){const{xScale:i,yScale:o}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=new Array(r);let u,h,f,m;for(u=0,h=r;u<h;++u)f=u+n,m=s[f],d[u]={x:i.parse(Qi(m,l),f),y:o.parse(Qi(m,c),f)};return d}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,s,n){const r=this.chart,i=this._cachedMeta,o=s[e.axis],l={keys:lx(r,!0),values:s._stacks[e.axis]._visualValues};return Kf(l,o,i.index,{mode:n})}updateRangeFromParsed(e,s,n,r){const i=n[s.axis];let o=i===null?NaN:i;const l=r&&n._stacks[s.axis];r&&l&&(r.values=l,o=Kf(r,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,s){const n=this._cachedMeta,r=n._parsed,i=n._sorted&&e===n.iScale,o=r.length,l=this._getOtherScale(e),c=r2(s,n,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=e2(l);let f,m;function p(){m=r[f];const v=m[l.axis];return!ot(m[e.axis])||u>v||h<v}for(f=0;f<o&&!(!p()&&(this.updateRangeFromParsed(d,e,m,c),i));++f);if(i){for(f=o-1;f>=0;--f)if(!p()){this.updateRangeFromParsed(d,e,m,c);break}}return d}getAllParsedValues(e){const s=this._cachedMeta._parsed,n=[];let r,i,o;for(r=0,i=s.length;r<i;++r)o=s[r][e.axis],ot(o)&&n.push(o);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const s=this._cachedMeta,n=s.iScale,r=s.vScale,i=this.getParsed(e);return{label:n?""+n.getLabelForValue(i[n.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(e){const s=this._cachedMeta;this.update(e||"default"),s._clip=Jj(ye(this.options.clip,Qj(s.xScale,s.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,s=this.chart,n=this._cachedMeta,r=n.data||[],i=s.chartArea,o=[],l=this._drawStart||0,c=this._drawCount||r.length-l,d=this.options.drawActiveElementsOnTop;let u;for(n.dataset&&n.dataset.draw(e,i,l,c),u=l;u<l+c;++u){const h=r[u];h.hidden||(h.active&&d?o.push(h):h.draw(e,i))}for(u=0;u<o.length;++u)o[u].draw(e,i)}getStyle(e,s){const n=s?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,s,n){const r=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=n2(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=r.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=s2(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!s,i.mode=n,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,s){return this._resolveElementOptions(this.dataElementType.id,s,e)}_resolveElementOptions(e,s="default",n){const r=s==="active",i=this._cachedDataOpts,o=e+"-"+s,l=i[o],c=this.enableOptionSharing&&Bo(n);if(l)return Qf(l,c);const d=this.chart.config,u=d.datasetElementScopeKeys(this._type,e),h=r?[`${e}Hover`,"hover",e,""]:[e,""],f=d.getOptionScopes(this.getDataset(),u),m=Object.keys($e.elements[e]),p=()=>this.getContext(n,r,s),v=d.resolveNamedOptions(f,m,p,h);return v.$shared&&(v.$shared=c,i[o]=Object.freeze(Qf(v,c))),v}_resolveAnimations(e,s,n){const r=this.chart,i=this._cachedDataOpts,o=`animation-${s}`,l=i[o];if(l)return l;let c;if(r.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,s),f=u.getOptionScopes(this.getDataset(),h);c=u.createResolver(f,this.getContext(e,n,s))}const d=new ox(r,c&&c.animations);return c&&c._cacheable&&(i[o]=Object.freeze(d)),d}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,s){return!s||ic(e)||this.chart._animationsDisabled}_getSharedOptions(e,s){const n=this.resolveDataElementOptions(e,s),r=this._sharedOptions,i=this.getSharedOptions(n),o=this.includeOptions(s,i)||i!==r;return this.updateSharedOptions(i,s,n),{sharedOptions:i,includeOptions:o}}updateElement(e,s,n,r){ic(r)?Object.assign(e,n):this._resolveAnimations(s,r).update(e,n)}updateSharedOptions(e,s,n){e&&!ic(s)&&this._resolveAnimations(void 0,s).update(e,n)}_setStyle(e,s,n,r){e.active=r;const i=this.getStyle(s,r);this._resolveAnimations(s,n,r).update(e,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(e,s,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,s,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const s=this._data,n=this._cachedMeta.data;for(const[l,c,d]of this._syncList)this[l](c,d);this._syncList=[];const r=n.length,i=s.length,o=Math.min(i,r);o&&this.parse(0,o),i>r?this._insertElements(r,i-r,e):i<r&&this._removeElements(i,r-i)}_insertElements(e,s,n=!0){const r=this._cachedMeta,i=r.data,o=e+s;let l;const c=d=>{for(d.length+=s,l=d.length-1;l>=o;l--)d[l]=d[l-s]};for(c(i),l=e;l<o;++l)i[l]=new this.dataElementType;this._parsing&&c(r._parsed),this.parse(e,s),n&&this.updateElements(i,e,s,"reset")}updateElements(e,s,n,r){}_removeElements(e,s){const n=this._cachedMeta;if(this._parsing){const r=n._parsed.splice(e,s);n._stacked&&Xr(n,r)}n.data.splice(e,s)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[s,n,r]=e;this[s](n,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,s){s&&this._sync(["_removeElements",e,s]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}me(Ei,"defaults",{}),me(Ei,"datasetElementType",null),me(Ei,"dataElementType",null);class so extends Ei{getLabelAndValue(e){const s=this._cachedMeta.vScale,n=this.getParsed(e);return{label:s.getLabels()[e],value:""+s.getLabelForValue(n[s.axis])}}parseObjectData(e,s,n,r){return vj.bind(this)(e,s,n,r)}update(e){const s=this._cachedMeta,n=s.dataset,r=s.data||[],i=s.iScale.getLabels();if(n.points=r,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const l={_loop:!0,_fullLoop:i.length===r.length,options:o};this.updateElement(n,void 0,l,e)}this.updateElements(r,0,r.length,e)}updateElements(e,s,n,r){const i=this._cachedMeta.rScale,o=r==="reset";for(let l=s;l<s+n;l++){const c=e[l],d=this.resolveDataElementOptions(l,c.active?"active":r),u=i.getPointPositionForValue(l,this.getParsed(l).r),h=o?i.xCenter:u.x,f=o?i.yCenter:u.y,m={x:h,y:f,angle:u.angle,skip:isNaN(h)||isNaN(f),options:d};this.updateElement(c,l,m,r)}}}me(so,"id","radar"),me(so,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),me(so,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});function wn(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Fu{constructor(e){me(this,"options");this.options=e||{}}static override(e){Object.assign(Fu.prototype,e)}init(){}formats(){return wn()}parse(){return wn()}format(){return wn()}add(){return wn()}diff(){return wn()}startOf(){return wn()}endOf(){return wn()}}var i2={_date:Fu};function a2(t,e,s,n){const{controller:r,data:i,_sorted:o}=t,l=r._cachedMeta.iScale,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(l&&e===l.axis&&e!=="r"&&o&&i.length){const d=l._reversePixels?B1:yd;if(n){if(r._sharedOptions){const u=i[0],h=typeof u.getRange=="function"&&u.getRange(e);if(h){const f=d(i,e,s-h),m=d(i,e,s+h);return{lo:f.lo,hi:m.hi}}}}else{const u=d(i,e,s);if(c){const{vScale:h}=r._cachedMeta,{_parsed:f}=t,m=f.slice(0,u.lo+1).reverse().findIndex(v=>!Ae(v[h.axis]));u.lo-=Math.max(0,m);const p=f.slice(u.hi).findIndex(v=>!Ae(v[h.axis]));u.hi+=Math.max(0,p)}return u}}return{lo:0,hi:i.length-1}}function oa(t,e,s,n,r){const i=t.getSortedVisibleDatasetMetas(),o=s[e];for(let l=0,c=i.length;l<c;++l){const{index:d,data:u}=i[l],{lo:h,hi:f}=a2(i[l],e,o,r);for(let m=h;m<=f;++m){const p=u[m];p.skip||n(p,d,m)}}}function o2(t){const e=t.indexOf("x")!==-1,s=t.indexOf("y")!==-1;return function(n,r){const i=e?Math.abs(n.x-r.x):0,o=s?Math.abs(n.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function ac(t,e,s,n,r){const i=[];return!r&&!t.isPointInArea(e)||oa(t,s,e,function(l,c,d){!r&&!Ss(l,t.chartArea,0)||l.inRange(e.x,e.y,n)&&i.push({element:l,datasetIndex:c,index:d})},!0),i}function l2(t,e,s,n){let r=[];function i(o,l,c){const{startAngle:d,endAngle:u}=o.getProps(["startAngle","endAngle"],n),{angle:h}=M1(o,{x:e.x,y:e.y});$0(h,d,u)&&r.push({element:o,datasetIndex:l,index:c})}return oa(t,s,e,i),r}function c2(t,e,s,n,r,i){let o=[];const l=o2(s);let c=Number.POSITIVE_INFINITY;function d(u,h,f){const m=u.inRange(e.x,e.y,r);if(n&&!m)return;const p=u.getCenterPoint(r);if(!(!!i||t.isPointInArea(p))&&!m)return;const b=l(e,p);b<c?(o=[{element:u,datasetIndex:h,index:f}],c=b):b===c&&o.push({element:u,datasetIndex:h,index:f})}return oa(t,s,e,d),o}function oc(t,e,s,n,r,i){return!i&&!t.isPointInArea(e)?[]:s==="r"&&!n?l2(t,e,s,r):c2(t,e,s,n,r,i)}function Jf(t,e,s,n,r){const i=[],o=s==="x"?"inXRange":"inYRange";let l=!1;return oa(t,s,e,(c,d,u)=>{c[o]&&c[o](e[s],r)&&(i.push({element:c,datasetIndex:d,index:u}),l=l||c.inRange(e.x,e.y,r))}),n&&!l?[]:i}var d2={evaluateInteractionItems:oa,modes:{index(t,e,s,n){const r=Nn(e,t),i=s.axis||"x",o=s.includeInvisible||!1,l=s.intersect?ac(t,r,i,n,o):oc(t,r,i,!1,n,o),c=[];return l.length?(t.getSortedVisibleDatasetMetas().forEach(d=>{const u=l[0].index,h=d.data[u];h&&!h.skip&&c.push({element:h,datasetIndex:d.index,index:u})}),c):[]},dataset(t,e,s,n){const r=Nn(e,t),i=s.axis||"xy",o=s.includeInvisible||!1;let l=s.intersect?ac(t,r,i,n,o):oc(t,r,i,!1,n,o);if(l.length>0){const c=l[0].datasetIndex,d=t.getDatasetMeta(c).data;l=[];for(let u=0;u<d.length;++u)l.push({element:d[u],datasetIndex:c,index:u})}return l},point(t,e,s,n){const r=Nn(e,t),i=s.axis||"xy",o=s.includeInvisible||!1;return ac(t,r,i,n,o)},nearest(t,e,s,n){const r=Nn(e,t),i=s.axis||"xy",o=s.includeInvisible||!1;return oc(t,r,i,s.intersect,n,o)},x(t,e,s,n){const r=Nn(e,t);return Jf(t,r,"x",s.intersect,n)},y(t,e,s,n){const r=Nn(e,t);return Jf(t,r,"y",s.intersect,n)}}};const cx=["left","top","right","bottom"];function Zr(t,e){return t.filter(s=>s.pos===e)}function Xf(t,e){return t.filter(s=>cx.indexOf(s.pos)===-1&&s.box.axis===e)}function ei(t,e){return t.sort((s,n)=>{const r=e?n:s,i=e?s:n;return r.weight===i.weight?r.index-i.index:r.weight-i.weight})}function u2(t){const e=[];let s,n,r,i,o,l;for(s=0,n=(t||[]).length;s<n;++s)r=t[s],{position:i,options:{stack:o,stackWeight:l=1}}=r,e.push({index:s,box:r,pos:i,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&i+o,stackWeight:l});return e}function h2(t){const e={};for(const s of t){const{stack:n,pos:r,stackWeight:i}=s;if(!n||!cx.includes(r))continue;const o=e[n]||(e[n]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function f2(t,e){const s=h2(t),{vBoxMaxWidth:n,hBoxMaxHeight:r}=e;let i,o,l;for(i=0,o=t.length;i<o;++i){l=t[i];const{fullSize:c}=l.box,d=s[l.stack],u=d&&l.stackWeight/d.weight;l.horizontal?(l.width=u?u*n:c&&e.availableWidth,l.height=r):(l.width=n,l.height=u?u*r:c&&e.availableHeight)}return s}function m2(t){const e=u2(t),s=ei(e.filter(d=>d.box.fullSize),!0),n=ei(Zr(e,"left"),!0),r=ei(Zr(e,"right")),i=ei(Zr(e,"top"),!0),o=ei(Zr(e,"bottom")),l=Xf(e,"x"),c=Xf(e,"y");return{fullSize:s,leftAndTop:n.concat(i),rightAndBottom:r.concat(c).concat(o).concat(l),chartArea:Zr(e,"chartArea"),vertical:n.concat(r).concat(c),horizontal:i.concat(o).concat(l)}}function Zf(t,e,s,n){return Math.max(t[s],e[s])+Math.max(t[n],e[n])}function dx(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function p2(t,e,s,n){const{pos:r,box:i}=s,o=t.maxPadding;if(!ve(r)){s.size&&(t[r]-=s.size);const h=n[s.stack]||{size:0,count:1};h.size=Math.max(h.size,s.horizontal?i.height:i.width),s.size=h.size/h.count,t[r]+=s.size}i.getPadding&&dx(o,i.getPadding());const l=Math.max(0,e.outerWidth-Zf(o,t,"left","right")),c=Math.max(0,e.outerHeight-Zf(o,t,"top","bottom")),d=l!==t.w,u=c!==t.h;return t.w=l,t.h=c,s.horizontal?{same:d,other:u}:{same:u,other:d}}function g2(t){const e=t.maxPadding;function s(n){const r=Math.max(e[n]-t[n],0);return t[n]+=r,r}t.y+=s("top"),t.x+=s("left"),s("right"),s("bottom")}function x2(t,e){const s=e.maxPadding;function n(r){const i={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{i[o]=Math.max(e[o],s[o])}),i}return n(t?["left","right"]:["top","bottom"])}function di(t,e,s,n){const r=[];let i,o,l,c,d,u;for(i=0,o=t.length,d=0;i<o;++i){l=t[i],c=l.box,c.update(l.width||e.w,l.height||e.h,x2(l.horizontal,e));const{same:h,other:f}=p2(e,s,l,n);d|=h&&r.length,u=u||f,c.fullSize||r.push(l)}return d&&di(r,e,s,n)||u}function Ba(t,e,s,n,r){t.top=s,t.left=e,t.right=e+n,t.bottom=s+r,t.width=n,t.height=r}function em(t,e,s,n){const r=s.padding;let{x:i,y:o}=e;for(const l of t){const c=l.box,d=n[l.stack]||{count:1,placed:0,weight:1},u=l.stackWeight/d.weight||1;if(l.horizontal){const h=e.w*u,f=d.size||c.height;Bo(d.start)&&(o=d.start),c.fullSize?Ba(c,r.left,o,s.outerWidth-r.right-r.left,f):Ba(c,e.left+d.placed,o,h,f),d.start=o,d.placed+=h,o=c.bottom}else{const h=e.h*u,f=d.size||c.width;Bo(d.start)&&(i=d.start),c.fullSize?Ba(c,i,r.top,f,s.outerHeight-r.bottom-r.top):Ba(c,i,e.top+d.placed,f,h),d.start=i,d.placed+=h,i=c.right}}e.x=i,e.y=o}var qs={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(s){e.draw(s)}}]},t.boxes.push(e)},removeBox(t,e){const s=t.boxes?t.boxes.indexOf(e):-1;s!==-1&&t.boxes.splice(s,1)},configure(t,e,s){e.fullSize=s.fullSize,e.position=s.position,e.weight=s.weight},update(t,e,s,n){if(!t)return;const r=ht(t.options.layout.padding),i=Math.max(e-r.width,0),o=Math.max(s-r.height,0),l=m2(t.boxes),c=l.vertical,d=l.horizontal;_e(t.boxes,v=>{typeof v.beforeLayout=="function"&&v.beforeLayout()});const u=c.reduce((v,b)=>b.box.options&&b.box.options.display===!1?v:v+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:s,padding:r,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/u,hBoxMaxHeight:o/2}),f=Object.assign({},r);dx(f,ht(n));const m=Object.assign({maxPadding:f,w:i,h:o,x:r.left,y:r.top},r),p=f2(c.concat(d),h);di(l.fullSize,m,h,p),di(c,m,h,p),di(d,m,h,p)&&di(c,m,h,p),g2(m),em(l.leftAndTop,m,h,p),m.x+=m.w,m.y+=m.h,em(l.rightAndBottom,m,h,p),t.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},_e(l.chartArea,v=>{const b=v.box;Object.assign(b,t.chartArea),b.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class ux{acquireContext(e,s){}releaseContext(e){return!1}addEventListener(e,s,n){}removeEventListener(e,s,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,s,n,r){return s=Math.max(0,s||e.width),n=n||e.height,{width:s,height:Math.max(0,r?Math.floor(s/r):n)}}isAttached(e){return!0}updateConfig(e){}}class y2 extends ux{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const no="$chartjs",v2={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},tm=t=>t===null||t==="";function b2(t,e){const s=t.style,n=t.getAttribute("height"),r=t.getAttribute("width");if(t[no]={initial:{height:n,width:r,style:{display:s.display,height:s.height,width:s.width}}},s.display=s.display||"block",s.boxSizing=s.boxSizing||"border-box",tm(r)){const i=Ff(t,"width");i!==void 0&&(t.width=i)}if(tm(n))if(t.style.height==="")t.height=t.width/(e||2);else{const i=Ff(t,"height");i!==void 0&&(t.height=i)}return t}const hx=Rj?{passive:!0}:!1;function w2(t,e,s){t&&t.addEventListener(e,s,hx)}function _2(t,e,s){t&&t.canvas&&t.canvas.removeEventListener(e,s,hx)}function j2(t,e){const s=v2[t.type]||t.type,{x:n,y:r}=Nn(t,e);return{type:s,chart:e,native:t,x:n!==void 0?n:null,y:r!==void 0?r:null}}function Wo(t,e){for(const s of t)if(s===e||s.contains(e))return!0}function k2(t,e,s){const n=t.canvas,r=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||Wo(l.addedNodes,n),o=o&&!Wo(l.removedNodes,n);o&&s()});return r.observe(document,{childList:!0,subtree:!0}),r}function N2(t,e,s){const n=t.canvas,r=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||Wo(l.removedNodes,n),o=o&&!Wo(l.addedNodes,n);o&&s()});return r.observe(document,{childList:!0,subtree:!0}),r}const Ji=new Map;let sm=0;function fx(){const t=window.devicePixelRatio;t!==sm&&(sm=t,Ji.forEach((e,s)=>{s.currentDevicePixelRatio!==t&&e()}))}function S2(t,e){Ji.size||window.addEventListener("resize",fx),Ji.set(t,e)}function C2(t){Ji.delete(t),Ji.size||window.removeEventListener("resize",fx)}function P2(t,e,s){const n=t.canvas,r=n&&$u(n);if(!r)return;const i=W0((l,c)=>{const d=r.clientWidth;s(l,c),d<r.clientWidth&&s()},window),o=new ResizeObserver(l=>{const c=l[0],d=c.contentRect.width,u=c.contentRect.height;d===0&&u===0||i(d,u)});return o.observe(r),S2(t,i),o}function lc(t,e,s){s&&s.disconnect(),e==="resize"&&C2(t)}function E2(t,e,s){const n=t.canvas,r=W0(i=>{t.ctx!==null&&s(j2(i,t))},t);return w2(n,e,r),r}class T2 extends ux{acquireContext(e,s){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(b2(e,s),n):null}releaseContext(e){const s=e.canvas;if(!s[no])return!1;const n=s[no].initial;["height","width"].forEach(i=>{const o=n[i];Ae(o)?s.removeAttribute(i):s.setAttribute(i,o)});const r=n.style||{};return Object.keys(r).forEach(i=>{s.style[i]=r[i]}),s.width=s.width,delete s[no],!0}addEventListener(e,s,n){this.removeEventListener(e,s);const r=e.$proxies||(e.$proxies={}),o={attach:k2,detach:N2,resize:P2}[s]||E2;r[s]=o(e,s,n)}removeEventListener(e,s){const n=e.$proxies||(e.$proxies={}),r=n[s];if(!r)return;({attach:lc,detach:lc,resize:lc}[s]||_2)(e,s,r),n[s]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,s,n,r){return Oj(e,s,n,r)}isAttached(e){const s=e&&$u(e);return!!(s&&s.isConnected)}}function A2(t){return!zu()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?y2:T2}class cn{constructor(){me(this,"x");me(this,"y");me(this,"active",!1);me(this,"options");me(this,"$animations")}tooltipPosition(e){const{x:s,y:n}=this.getProps(["x","y"],e);return{x:s,y:n}}hasValue(){return zo(this.x)&&zo(this.y)}getProps(e,s){const n=this.$animations;if(!s||!n)return this;const r={};return e.forEach(i=>{r[i]=n[i]&&n[i].active()?n[i]._to:this[i]}),r}}me(cn,"defaults",{}),me(cn,"defaultRoutes");function O2(t,e){const s=t.options.ticks,n=R2(t),r=Math.min(s.maxTicksLimit||n,n),i=s.major.enabled?L2(e):[],o=i.length,l=i[0],c=i[o-1],d=[];if(o>r)return D2(e,d,i,o/r),d;const u=M2(i,e,r);if(o>0){let h,f;const m=o>1?Math.round((c-l)/(o-1)):null;for(Ia(e,d,u,Ae(m)?0:l-m,l),h=0,f=o-1;h<f;h++)Ia(e,d,u,i[h],i[h+1]);return Ia(e,d,u,c,Ae(m)?e.length:c+m),d}return Ia(e,d,u),d}function R2(t){const e=t.options.offset,s=t._tickSize(),n=t._length/s+(e?0:1),r=t._maxLength/s;return Math.floor(Math.min(n,r))}function M2(t,e,s){const n=B2(t),r=e.length/s;if(!n)return Math.max(r,1);const i=T1(n);for(let o=0,l=i.length-1;o<l;o++){const c=i[o];if(c>r)return c}return Math.max(r,1)}function L2(t){const e=[];let s,n;for(s=0,n=t.length;s<n;s++)t[s].major&&e.push(s);return e}function D2(t,e,s,n){let r=0,i=s[0],o;for(n=Math.ceil(n),o=0;o<t.length;o++)o===i&&(e.push(t[o]),r++,i=s[r*n])}function Ia(t,e,s,n,r){const i=ye(n,0),o=Math.min(ye(r,t.length),t.length);let l=0,c,d,u;for(s=Math.ceil(s),r&&(c=r-n,s=c/Math.floor(c/s)),u=i;u<0;)l++,u=Math.round(i+l*s);for(d=Math.max(i,0);d<o;d++)d===u&&(e.push(t[d]),l++,u=Math.round(i+l*s))}function B2(t){const e=t.length;let s,n;if(e<2)return!1;for(n=t[0],s=1;s<e;++s)if(t[s]-t[s-1]!==n)return!1;return n}const I2=t=>t==="left"?"right":t==="right"?"left":t,nm=(t,e,s)=>e==="top"||e==="left"?t[e]+s:t[e]-s,rm=(t,e)=>Math.min(e||t,t);function im(t,e){const s=[],n=t.length/e,r=t.length;let i=0;for(;i<r;i+=n)s.push(t[Math.floor(i)]);return s}function z2(t,e,s){const n=t.ticks.length,r=Math.min(e,n-1),i=t._startPixel,o=t._endPixel,l=1e-6;let c=t.getPixelForTick(r),d;if(!(s&&(n===1?d=Math.max(c-i,o-c):e===0?d=(t.getPixelForTick(1)-c)/2:d=(c-t.getPixelForTick(r-1))/2,c+=r<e?d:-d,c<i-l||c>o+l)))return c}function $2(t,e){_e(t,s=>{const n=s.gc,r=n.length/2;let i;if(r>e){for(i=0;i<r;++i)delete s.data[n[i]];n.splice(0,r)}})}function ti(t){return t.drawTicks?t.tickLength:0}function am(t,e){if(!t.display)return 0;const s=Ze(t.font,e),n=ht(t.padding);return(ze(t.text)?t.text.length:1)*s.lineHeight+n.height}function F2(t,e){return mn(t,{scale:e,type:"scale"})}function U2(t,e,s){return mn(t,{tick:s,index:e,type:"tick"})}function W2(t,e,s){let n=H0(t);return(s&&e!=="right"||!s&&e==="right")&&(n=I2(n)),n}function H2(t,e,s,n){const{top:r,left:i,bottom:o,right:l,chart:c}=t,{chartArea:d,scales:u}=c;let h=0,f,m,p;const v=o-r,b=l-i;if(t.isHorizontal()){if(m=kt(n,i,l),ve(s)){const x=Object.keys(s)[0],g=s[x];p=u[x].getPixelForValue(g)+v-e}else s==="center"?p=(d.bottom+d.top)/2+v-e:p=nm(t,s,e);f=l-i}else{if(ve(s)){const x=Object.keys(s)[0],g=s[x];m=u[x].getPixelForValue(g)-b+e}else s==="center"?m=(d.left+d.right)/2-b+e:m=nm(t,s,e);p=kt(n,o,r),h=s==="left"?-Et:Et}return{titleX:m,titleY:p,maxWidth:f,rotation:h}}class la extends cn{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,s){return e}getUserBounds(){let{_userMin:e,_userMax:s,_suggestedMin:n,_suggestedMax:r}=this;return e=is(e,Number.POSITIVE_INFINITY),s=is(s,Number.NEGATIVE_INFINITY),n=is(n,Number.POSITIVE_INFINITY),r=is(r,Number.NEGATIVE_INFINITY),{min:is(e,n),max:is(s,r),minDefined:ot(e),maxDefined:ot(s)}}getMinMax(e){let{min:s,max:n,minDefined:r,maxDefined:i}=this.getUserBounds(),o;if(r&&i)return{min:s,max:n};const l=this.getMatchingVisibleMetas();for(let c=0,d=l.length;c<d;++c)o=l[c].controller.getMinMax(this,e),r||(s=Math.min(s,o.min)),i||(n=Math.max(n,o.max));return s=i&&s>n?n:s,n=r&&s>n?s:n,{min:is(s,is(n,s)),max:is(n,is(s,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Pe(this.options.beforeUpdate,[this])}update(e,s,n){const{beginAtZero:r,grace:i,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=s,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=cj(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?im(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=O2(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,s,n;this.isHorizontal()?(s=this.left,n=this.right):(s=this.top,n=this.bottom,e=!e),this._startPixel=s,this._endPixel=n,this._reversePixels=e,this._length=n-s,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Pe(this.options.afterUpdate,[this])}beforeSetDimensions(){Pe(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Pe(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Pe(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Pe(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const s=this.options.ticks;let n,r,i;for(n=0,r=e.length;n<r;n++)i=e[n],i.label=Pe(s.callback,[i.value,n,e],this)}afterTickToLabelConversion(){Pe(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Pe(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,s=e.ticks,n=rm(this.ticks.length,e.ticks.maxTicksLimit),r=s.minRotation||0,i=s.maxRotation;let o=r,l,c,d;if(!this._isVisible()||!s.display||r>=i||n<=1||!this.isHorizontal()){this.labelRotation=r;return}const u=this._getLabelSizes(),h=u.widest.width,f=u.highest.height,m=Ns(this.chart.width-h,0,this.maxWidth);l=e.offset?this.maxWidth/n:m/(n-1),h+6>l&&(l=m/(n-(e.offset?.5:1)),c=this.maxHeight-ti(e.grid)-s.padding-am(e.title,this.chart.options.font),d=Math.sqrt(h*h+f*f),o=Ru(Math.min(Math.asin(Ns((u.highest.height+6)/l,-1,1)),Math.asin(Ns(c/d,-1,1))-Math.asin(Ns(f/d,-1,1)))),o=Math.max(r,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){Pe(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Pe(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:s,options:{ticks:n,title:r,grid:i}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const c=am(r,s.options.font);if(l?(e.width=this.maxWidth,e.height=ti(i)+c):(e.height=this.maxHeight,e.width=ti(i)+c),n.display&&this.ticks.length){const{first:d,last:u,widest:h,highest:f}=this._getLabelSizes(),m=n.padding*2,p=An(this.labelRotation),v=Math.cos(p),b=Math.sin(p);if(l){const x=n.mirror?0:b*h.width+v*f.height;e.height=Math.min(this.maxHeight,e.height+x+m)}else{const x=n.mirror?0:v*h.width+b*f.height;e.width=Math.min(this.maxWidth,e.width+x+m)}this._calculatePadding(d,u,b,v)}}this._handleMargins(),l?(this.width=this._length=s.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=s.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,s,n,r){const{ticks:{align:i,padding:o},position:l}=this.options,c=this.labelRotation!==0,d=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,m=0;c?d?(f=r*e.width,m=n*s.height):(f=n*e.height,m=r*s.width):i==="start"?m=s.width:i==="end"?f=e.width:i!=="inner"&&(f=e.width/2,m=s.width/2),this.paddingLeft=Math.max((f-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((m-h+o)*this.width/(this.width-h),0)}else{let u=s.height/2,h=e.height/2;i==="start"?(u=0,h=e.height):i==="end"&&(u=s.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Pe(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:s}=this.options;return s==="top"||s==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let s,n;for(s=0,n=e.length;s<n;s++)Ae(e[s].label)&&(e.splice(s,1),n--,s--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const s=this.options.ticks.sampleSize;let n=this.ticks;s<n.length&&(n=im(n,s)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,s,n){const{ctx:r,_longestTextCache:i}=this,o=[],l=[],c=Math.floor(s/rm(s,n));let d=0,u=0,h,f,m,p,v,b,x,g,y,w,_;for(h=0;h<s;h+=c){if(p=e[h].label,v=this._resolveTickFontOptions(h),r.font=b=v.string,x=i[b]=i[b]||{data:{},gc:[]},g=v.lineHeight,y=w=0,!Ae(p)&&!ze(p))y=$o(r,x.data,x.gc,y,p),w=g;else if(ze(p))for(f=0,m=p.length;f<m;++f)_=p[f],!Ae(_)&&!ze(_)&&(y=$o(r,x.data,x.gc,y,_),w+=g);o.push(y),l.push(w),d=Math.max(y,d),u=Math.max(w,u)}$2(i,s);const N=o.indexOf(d),P=l.indexOf(u),E=C=>({width:o[C]||0,height:l[C]||0});return{first:E(0),last:E(s-1),widest:E(N),highest:E(P),widths:o,heights:l}}getLabelForValue(e){return e}getPixelForValue(e,s){return NaN}getValueForPixel(e){}getPixelForTick(e){const s=this.ticks;return e<0||e>s.length-1?null:this.getPixelForValue(s[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const s=this._startPixel+e*this._length;return D1(this._alignToPixels?bn(this.chart,s,0):s)}getDecimalForPixel(e){const s=(e-this._startPixel)/this._length;return this._reversePixels?1-s:s}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:s}=this;return e<0&&s<0?s:e>0&&s>0?e:0}getContext(e){const s=this.ticks||[];if(e>=0&&e<s.length){const n=s[e];return n.$context||(n.$context=U2(this.getContext(),e,n))}return this.$context||(this.$context=F2(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,s=An(this.labelRotation),n=Math.abs(Math.cos(s)),r=Math.abs(Math.sin(s)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,l=i?i.widest.width+o:0,c=i?i.highest.height+o:0;return this.isHorizontal()?c*n>l*r?l/n:c/r:c*r<l*n?c/n:l/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const s=this.axis,n=this.chart,r=this.options,{grid:i,position:o,border:l}=r,c=i.offset,d=this.isHorizontal(),h=this.ticks.length+(c?1:0),f=ti(i),m=[],p=l.setContext(this.getContext()),v=p.display?p.width:0,b=v/2,x=function($){return bn(n,$,v)};let g,y,w,_,N,P,E,C,R,M,V,ie;if(o==="top")g=x(this.bottom),P=this.bottom-f,C=g-b,M=x(e.top)+b,ie=e.bottom;else if(o==="bottom")g=x(this.top),M=e.top,ie=x(e.bottom)-b,P=g+b,C=this.top+f;else if(o==="left")g=x(this.right),N=this.right-f,E=g-b,R=x(e.left)+b,V=e.right;else if(o==="right")g=x(this.left),R=e.left,V=x(e.right)-b,N=g+b,E=this.left+f;else if(s==="x"){if(o==="center")g=x((e.top+e.bottom)/2+.5);else if(ve(o)){const $=Object.keys(o)[0],q=o[$];g=x(this.chart.scales[$].getPixelForValue(q))}M=e.top,ie=e.bottom,P=g+b,C=P+f}else if(s==="y"){if(o==="center")g=x((e.left+e.right)/2);else if(ve(o)){const $=Object.keys(o)[0],q=o[$];g=x(this.chart.scales[$].getPixelForValue(q))}N=g-b,E=N-f,R=e.left,V=e.right}const ce=ye(r.ticks.maxTicksLimit,h),T=Math.max(1,Math.ceil(h/ce));for(y=0;y<h;y+=T){const $=this.getContext(y),q=i.setContext($),U=l.setContext($),L=q.lineWidth,H=q.color,te=U.dash||[],Q=U.dashOffset,O=q.tickWidth,X=q.tickColor,ne=q.tickBorderDash||[],ae=q.tickBorderDashOffset;w=z2(this,y,c),w!==void 0&&(_=bn(n,w,L),d?N=E=R=V=_:P=C=M=ie=_,m.push({tx1:N,ty1:P,tx2:E,ty2:C,x1:R,y1:M,x2:V,y2:ie,width:L,color:H,borderDash:te,borderDashOffset:Q,tickWidth:O,tickColor:X,tickBorderDash:ne,tickBorderDashOffset:ae}))}return this._ticksLength=h,this._borderValue=g,m}_computeLabelItems(e){const s=this.axis,n=this.options,{position:r,ticks:i}=n,o=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:d,padding:u,mirror:h}=i,f=ti(n.grid),m=f+u,p=h?-u:m,v=-An(this.labelRotation),b=[];let x,g,y,w,_,N,P,E,C,R,M,V,ie="middle";if(r==="top")N=this.bottom-p,P=this._getXAxisLabelAlignment();else if(r==="bottom")N=this.top+p,P=this._getXAxisLabelAlignment();else if(r==="left"){const T=this._getYAxisLabelAlignment(f);P=T.textAlign,_=T.x}else if(r==="right"){const T=this._getYAxisLabelAlignment(f);P=T.textAlign,_=T.x}else if(s==="x"){if(r==="center")N=(e.top+e.bottom)/2+m;else if(ve(r)){const T=Object.keys(r)[0],$=r[T];N=this.chart.scales[T].getPixelForValue($)+m}P=this._getXAxisLabelAlignment()}else if(s==="y"){if(r==="center")_=(e.left+e.right)/2-m;else if(ve(r)){const T=Object.keys(r)[0],$=r[T];_=this.chart.scales[T].getPixelForValue($)}P=this._getYAxisLabelAlignment(f).textAlign}s==="y"&&(c==="start"?ie="top":c==="end"&&(ie="bottom"));const ce=this._getLabelSizes();for(x=0,g=l.length;x<g;++x){y=l[x],w=y.label;const T=i.setContext(this.getContext(x));E=this.getPixelForTick(x)+i.labelOffset,C=this._resolveTickFontOptions(x),R=C.lineHeight,M=ze(w)?w.length:1;const $=M/2,q=T.color,U=T.textStrokeColor,L=T.textStrokeWidth;let H=P;o?(_=E,P==="inner"&&(x===g-1?H=this.options.reverse?"left":"right":x===0?H=this.options.reverse?"right":"left":H="center"),r==="top"?d==="near"||v!==0?V=-M*R+R/2:d==="center"?V=-ce.highest.height/2-$*R+R:V=-ce.highest.height+R/2:d==="near"||v!==0?V=R/2:d==="center"?V=ce.highest.height/2-$*R:V=ce.highest.height-M*R,h&&(V*=-1),v!==0&&!T.showLabelBackdrop&&(_+=R/2*Math.sin(v))):(N=E,V=(1-M)*R/2);let te;if(T.showLabelBackdrop){const Q=ht(T.backdropPadding),O=ce.heights[x],X=ce.widths[x];let ne=V-Q.top,ae=0-Q.left;switch(ie){case"middle":ne-=O/2;break;case"bottom":ne-=O;break}switch(P){case"center":ae-=X/2;break;case"right":ae-=X;break;case"inner":x===g-1?ae-=X:x>0&&(ae-=X/2);break}te={left:ae,top:ne,width:X+Q.width,height:O+Q.height,color:T.backdropColor}}b.push({label:w,font:C,textOffset:V,options:{rotation:v,color:q,strokeColor:U,strokeWidth:L,textAlign:H,textBaseline:ie,translation:[_,N],backdrop:te}})}return b}_getXAxisLabelAlignment(){const{position:e,ticks:s}=this.options;if(-An(this.labelRotation))return e==="top"?"left":"right";let r="center";return s.align==="start"?r="left":s.align==="end"?r="right":s.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:s,ticks:{crossAlign:n,mirror:r,padding:i}}=this.options,o=this._getLabelSizes(),l=e+i,c=o.widest.width;let d,u;return s==="left"?r?(u=this.right+i,n==="near"?d="left":n==="center"?(d="center",u+=c/2):(d="right",u+=c)):(u=this.right-l,n==="near"?d="right":n==="center"?(d="center",u-=c/2):(d="left",u=this.left)):s==="right"?r?(u=this.left+i,n==="near"?d="right":n==="center"?(d="center",u-=c/2):(d="left",u-=c)):(u=this.left+l,n==="near"?d="left":n==="center"?(d="center",u+=c/2):(d="right",u=this.right)):d="right",{textAlign:d,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,s=this.options.position;if(s==="left"||s==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(s==="top"||s==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:s},left:n,top:r,width:i,height:o}=this;s&&(e.save(),e.fillStyle=s,e.fillRect(n,r,i,o),e.restore())}getLineWidthForValue(e){const s=this.options.grid;if(!this._isVisible()||!s.display)return 0;const r=this.ticks.findIndex(i=>i.value===e);return r>=0?s.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const s=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const l=(c,d,u)=>{!u.width||!u.color||(n.save(),n.lineWidth=u.width,n.strokeStyle=u.color,n.setLineDash(u.borderDash||[]),n.lineDashOffset=u.borderDashOffset,n.beginPath(),n.moveTo(c.x,c.y),n.lineTo(d.x,d.y),n.stroke(),n.restore())};if(s.display)for(i=0,o=r.length;i<o;++i){const c=r[i];s.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),s.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:s,options:{border:n,grid:r}}=this,i=n.setContext(this.getContext()),o=n.display?i.width:0;if(!o)return;const l=r.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let d,u,h,f;this.isHorizontal()?(d=bn(e,this.left,o)-o/2,u=bn(e,this.right,l)+l/2,h=f=c):(h=bn(e,this.top,o)-o/2,f=bn(e,this.bottom,l)+l/2,d=u=c),s.save(),s.lineWidth=i.width,s.strokeStyle=i.color,s.beginPath(),s.moveTo(d,h),s.lineTo(u,f),s.stroke(),s.restore()}drawLabels(e){if(!this.options.ticks.display)return;const n=this.ctx,r=this._computeLabelArea();r&&pl(n,r);const i=this.getLabelItems(e);for(const o of i){const l=o.options,c=o.font,d=o.label,u=o.textOffset;Mr(n,d,0,u,c,l)}r&&gl(n)}drawTitle(){const{ctx:e,options:{position:s,title:n,reverse:r}}=this;if(!n.display)return;const i=Ze(n.font),o=ht(n.padding),l=n.align;let c=i.lineHeight/2;s==="bottom"||s==="center"||ve(s)?(c+=o.bottom,ze(n.text)&&(c+=i.lineHeight*(n.text.length-1))):c+=o.top;const{titleX:d,titleY:u,maxWidth:h,rotation:f}=H2(this,c,s,l);Mr(e,n.text,0,0,i,{color:n.color,maxWidth:h,rotation:f,textAlign:W2(l,s,r),textBaseline:"middle",translation:[d,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,s=e.ticks&&e.ticks.z||0,n=ye(e.grid&&e.grid.z,-1),r=ye(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==la.prototype.draw?[{z:s,draw:i=>{this.draw(i)}}]:[{z:n,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:s,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const s=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let i,o;for(i=0,o=s.length;i<o;++i){const l=s[i];l[n]===this.id&&(!e||l.type===e)&&r.push(l)}return r}_resolveTickFontOptions(e){const s=this.options.ticks.setContext(this.getContext(e));return Ze(s.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class za{constructor(e,s,n){this.type=e,this.scope=s,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const s=Object.getPrototypeOf(e);let n;K2(s)&&(n=this.register(s));const r=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in r||(r[i]=e,V2(e,o,n),this.override&&$e.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const s=this.items,n=e.id,r=this.scope;n in s&&delete s[n],r&&n in $e[r]&&(delete $e[r][n],this.override&&delete Wn[n])}}function V2(t,e,s){const n=Gi(Object.create(null),[s?$e.get(s):{},$e.get(e),t.defaults]);$e.set(e,n),t.defaultRoutes&&q2(e,t.defaultRoutes),t.descriptors&&$e.describe(e,t.descriptors)}function q2(t,e){Object.keys(e).forEach(s=>{const n=s.split("."),r=n.pop(),i=[t].concat(n).join("."),o=e[s].split("."),l=o.pop(),c=o.join(".");$e.route(i,r,c,l)})}function K2(t){return"id"in t&&"defaults"in t}class Y2{constructor(){this.controllers=new za(Ei,"datasets",!0),this.elements=new za(cn,"elements"),this.plugins=new za(Object,"plugins"),this.scales=new za(la,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,s,n){[...s].forEach(r=>{const i=n||this._getRegistryForType(r);n||i.isForType(r)||i===this.plugins&&r.id?this._exec(e,i,r):_e(r,o=>{const l=n||this._getRegistryForType(o);this._exec(e,l,o)})})}_exec(e,s,n){const r=Ou(e);Pe(n["before"+r],[],n),s[e](n),Pe(n["after"+r],[],n)}_getRegistryForType(e){for(let s=0;s<this._typedRegistries.length;s++){const n=this._typedRegistries[s];if(n.isForType(e))return n}return this.plugins}_get(e,s,n){const r=s.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+n+".");return r}}var ls=new Y2;class G2{constructor(){this._init=[]}notify(e,s,n,r){s==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(i,e,s,n);return s==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,s,n,r){r=r||{};for(const i of e){const o=i.plugin,l=o[n],c=[s,r,i.options];if(Pe(l,c,o)===!1&&r.cancelable)return!1}return!0}invalidate(){Ae(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const s=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),s}_createDescriptors(e,s){const n=e&&e.config,r=ye(n.options&&n.options.plugins,{}),i=Q2(n);return r===!1&&!s?[]:X2(e,i,r,s)}_notifyStateChanges(e){const s=this._oldCache||[],n=this._cache,r=(i,o)=>i.filter(l=>!o.some(c=>l.plugin.id===c.plugin.id));this._notify(r(s,n),e,"stop"),this._notify(r(n,s),e,"start")}}function Q2(t){const e={},s=[],n=Object.keys(ls.plugins.items);for(let i=0;i<n.length;i++)s.push(ls.getPlugin(n[i]));const r=t.plugins||[];for(let i=0;i<r.length;i++){const o=r[i];s.indexOf(o)===-1&&(s.push(o),e[o.id]=!0)}return{plugins:s,localIds:e}}function J2(t,e){return!e&&t===!1?null:t===!0?{}:t}function X2(t,{plugins:e,localIds:s},n,r){const i=[],o=t.getContext();for(const l of e){const c=l.id,d=J2(n[c],r);d!==null&&i.push({plugin:l,options:Z2(t.config,{plugin:l,local:s[c]},d,o)})}return i}function Z2(t,{plugin:e,local:s},n,r){const i=t.pluginScopeKeys(e),o=t.getOptionScopes(n,i);return s&&e.defaults&&o.push(e.defaults),t.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function wd(t,e){const s=$e.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||s.indexAxis||"x"}function ek(t,e){let s=t;return t==="_index_"?s=e:t==="_value_"&&(s=e==="x"?"y":"x"),s}function tk(t,e){return t===e?"_index_":"_value_"}function om(t){if(t==="x"||t==="y"||t==="r")return t}function sk(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function _d(t,...e){if(om(t))return t;for(const s of e){const n=s.axis||sk(s.position)||t.length>1&&om(t[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function lm(t,e,s){if(s[e+"AxisID"]===t)return{axis:e}}function nk(t,e){if(e.data&&e.data.datasets){const s=e.data.datasets.filter(n=>n.xAxisID===t||n.yAxisID===t);if(s.length)return lm(t,"x",s[0])||lm(t,"y",s[0])}return{}}function rk(t,e){const s=Wn[t.type]||{scales:{}},n=e.scales||{},r=wd(t.type,e),i=Object.create(null);return Object.keys(n).forEach(o=>{const l=n[o];if(!ve(l))return console.error(`Invalid scale configuration for scale: ${o}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const c=_d(o,l,nk(o,t),$e.scales[l.type]),d=tk(c,r),u=s.scales||{};i[o]=Ni(Object.create(null),[{axis:c},l,u[c],u[d]])}),t.data.datasets.forEach(o=>{const l=o.type||t.type,c=o.indexAxis||wd(l,e),u=(Wn[l]||{}).scales||{};Object.keys(u).forEach(h=>{const f=ek(h,c),m=o[f+"AxisID"]||f;i[m]=i[m]||Object.create(null),Ni(i[m],[{axis:f},n[m],u[h]])})}),Object.keys(i).forEach(o=>{const l=i[o];Ni(l,[$e.scales[l.type],$e.scale])}),i}function mx(t){const e=t.options||(t.options={});e.plugins=ye(e.plugins,{}),e.scales=rk(t,e)}function px(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function ik(t){return t=t||{},t.data=px(t.data),mx(t),t}const cm=new Map,gx=new Set;function $a(t,e){let s=cm.get(t);return s||(s=e(),cm.set(t,s),gx.add(s)),s}const si=(t,e,s)=>{const n=Qi(e,s);n!==void 0&&t.add(n)};class ak{constructor(e){this._config=ik(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=px(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),mx(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return $a(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,s){return $a(`${e}.transition.${s}`,()=>[[`datasets.${e}.transitions.${s}`,`transitions.${s}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,s){return $a(`${e}-${s}`,()=>[[`datasets.${e}.elements.${s}`,`datasets.${e}`,`elements.${s}`,""]])}pluginScopeKeys(e){const s=e.id,n=this.type;return $a(`${n}-plugin-${s}`,()=>[[`plugins.${s}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,s){const n=this._scopeCache;let r=n.get(e);return(!r||s)&&(r=new Map,n.set(e,r)),r}getOptionScopes(e,s,n){const{options:r,type:i}=this,o=this._cachedScopes(e,n),l=o.get(s);if(l)return l;const c=new Set;s.forEach(u=>{e&&(c.add(e),u.forEach(h=>si(c,e,h))),u.forEach(h=>si(c,r,h)),u.forEach(h=>si(c,Wn[i]||{},h)),u.forEach(h=>si(c,$e,h)),u.forEach(h=>si(c,vd,h))});const d=Array.from(c);return d.length===0&&d.push(Object.create(null)),gx.has(s)&&o.set(s,d),d}chartOptionScopes(){const{options:e,type:s}=this;return[e,Wn[s]||{},$e.datasets[s]||{},{type:s},$e,vd]}resolveNamedOptions(e,s,n,r=[""]){const i={$shared:!0},{resolver:o,subPrefixes:l}=dm(this._resolverCache,e,r);let c=o;if(lk(o,s)){i.$shared=!1,n=ln(n)?n():n;const d=this.createResolver(e,n,l);c=Lr(o,n,d)}for(const d of s)i[d]=c[d];return i}createResolver(e,s,n=[""],r){const{resolver:i}=dm(this._resolverCache,e,n);return ve(s)?Lr(i,s,void 0,r):i}}function dm(t,e,s){let n=t.get(e);n||(n=new Map,t.set(e,n));const r=s.join();let i=n.get(r);return i||(i={resolver:Du(e,s),subPrefixes:s.filter(l=>!l.toLowerCase().includes("hover"))},n.set(r,i)),i}const ok=t=>ve(t)&&Object.getOwnPropertyNames(t).some(e=>ln(t[e]));function lk(t,e){const{isScriptable:s,isIndexable:n}=Q0(t);for(const r of e){const i=s(r),o=n(r),l=(o||i)&&t[r];if(i&&(ln(l)||ok(l))||o&&ze(l))return!0}return!1}var ck="4.5.0";const dk=["top","bottom","left","right","chartArea"];function um(t,e){return t==="top"||t==="bottom"||dk.indexOf(t)===-1&&e==="x"}function hm(t,e){return function(s,n){return s[t]===n[t]?s[e]-n[e]:s[t]-n[t]}}function fm(t){const e=t.chart,s=e.options.animation;e.notifyPlugins("afterRender"),Pe(s&&s.onComplete,[t],e)}function uk(t){const e=t.chart,s=e.options.animation;Pe(s&&s.onProgress,[t],e)}function xx(t){return zu()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const ro={},mm=t=>{const e=xx(t);return Object.values(ro).filter(s=>s.canvas===e).pop()};function hk(t,e,s){const n=Object.keys(t);for(const r of n){const i=+r;if(i>=e){const o=t[r];delete t[r],(s>0||i>e)&&(t[i+s]=o)}}}function fk(t,e,s,n){return!s||t.type==="mouseout"?null:n?e:t}var Ds;let yl=(Ds=class{static register(...e){ls.add(...e),pm()}static unregister(...e){ls.remove(...e),pm()}constructor(e,s){const n=this.config=new ak(s),r=xx(e),i=mm(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||A2(r)),this.platform.updateConfig(n);const l=this.platform.acquireContext(r,o.aspectRatio),c=l&&l.canvas,d=c&&c.height,u=c&&c.width;if(this.id=w1(),this.ctx=l,this.canvas=c,this.width=u,this.height=d,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new G2,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=F1(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],ro[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}gs.listen(this,"complete",fm),gs.listen(this,"progress",uk),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:s},width:n,height:r,_aspectRatio:i}=this;return Ae(e)?s&&i?i:r?n/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return ls}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():$f(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Bf(this.canvas,this.ctx),this}stop(){return gs.stop(this),this}resize(e,s){gs.running(this)?this._resizeBeforeDraw={width:e,height:s}:this._resize(e,s)}_resize(e,s){const n=this.options,r=this.canvas,i=n.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,s,i),l=n.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,$f(this,l,!0)&&(this.notifyPlugins("resize",{size:o}),Pe(n.onResize,[this,o],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const s=this.options.scales||{};_e(s,(n,r)=>{n.id=r})}buildOrUpdateScales(){const e=this.options,s=e.scales,n=this.scales,r=Object.keys(n).reduce((o,l)=>(o[l]=!1,o),{});let i=[];s&&(i=i.concat(Object.keys(s).map(o=>{const l=s[o],c=_d(o,l),d=c==="r",u=c==="x";return{options:l,dposition:d?"chartArea":u?"bottom":"left",dtype:d?"radialLinear":u?"category":"linear"}}))),_e(i,o=>{const l=o.options,c=l.id,d=_d(c,l),u=ye(l.type,o.dtype);(l.position===void 0||um(l.position,d)!==um(o.dposition))&&(l.position=o.dposition),r[c]=!0;let h=null;if(c in n&&n[c].type===u)h=n[c];else{const f=ls.getScale(u);h=new f({id:c,type:u,ctx:this.ctx,chart:this}),n[h.id]=h}h.init(l,e)}),_e(r,(o,l)=>{o||delete n[l]}),_e(n,o=>{qs.configure(this,o,o.options),qs.addBox(this,o)})}_updateMetasets(){const e=this._metasets,s=this.data.datasets.length,n=e.length;if(e.sort((r,i)=>r.index-i.index),n>s){for(let r=s;r<n;++r)this._destroyDatasetMeta(r);e.splice(s,n-s)}this._sortedMetasets=e.slice(0).sort(hm("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:s}}=this;e.length>s.length&&delete this._stacks,e.forEach((n,r)=>{s.filter(i=>i===n._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],s=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=s.length;n<r;n++){const i=s[n];let o=this.getDatasetMeta(n);const l=i.type||this.config.type;if(o.type&&o.type!==l&&(this._destroyDatasetMeta(n),o=this.getDatasetMeta(n)),o.type=l,o.indexAxis=i.indexAxis||wd(l,this.options),o.order=i.order||0,o.index=n,o.label=""+i.label,o.visible=this.isDatasetVisible(n),o.controller)o.controller.updateIndex(n),o.controller.linkScales();else{const c=ls.getController(l),{datasetElementType:d,dataElementType:u}=$e.datasets[l];Object.assign(c,{dataElementType:ls.getElement(u),datasetElementType:d&&ls.getElement(d)}),o.controller=new c(this,n),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){_e(this.data.datasets,(e,s)=>{this.getDatasetMeta(s).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const s=this.config;s.update();const n=this._options=s.createResolver(s.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let d=0,u=this.data.datasets.length;d<u;d++){const{controller:h}=this.getDatasetMeta(d),f=!r&&i.indexOf(h)===-1;h.buildOrUpdateElements(f),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=n.layout.autoPadding?o:0,this._updateLayout(o),r||_e(i,d=>{d.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(hm("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){_e(this.scales,e=>{qs.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,s=new Set(Object.keys(this._listeners)),n=new Set(e.events);(!Pf(s,n)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,s=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:i}of s){const o=n==="_removeElements"?-i:i;hk(e,r,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const s=this.data.datasets.length,n=i=>new Set(e.filter(o=>o[0]===i).map((o,l)=>l+","+o.splice(1).join(","))),r=n(0);for(let i=1;i<s;i++)if(!Pf(r,n(i)))return;return Array.from(r).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;qs.update(this,this.width,this.height,e);const s=this.chartArea,n=s.width<=0||s.height<=0;this._layers=[],_e(this.boxes,r=>{n&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,i)=>{r._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let s=0,n=this.data.datasets.length;s<n;++s)this.getDatasetMeta(s).controller.configure();for(let s=0,n=this.data.datasets.length;s<n;++s)this._updateDataset(s,ln(e)?e({datasetIndex:s}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,s){const n=this.getDatasetMeta(e),r={meta:n,index:e,mode:s,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(n.controller._update(s),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(gs.has(this)?this.attached&&!gs.running(this)&&gs.start(this):(this.draw(),fm({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:n,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const s=this._layers;for(e=0;e<s.length&&s[e].z<=0;++e)s[e].draw(this.chartArea);for(this._drawDatasets();e<s.length;++e)s[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const s=this._sortedMetasets,n=[];let r,i;for(r=0,i=s.length;r<i;++r){const o=s[r];(!e||o.visible)&&n.push(o)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let s=e.length-1;s>=0;--s)this._drawDataset(e[s]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const s=this.ctx,n={meta:e,index:e.index,cancelable:!0},r=ax(this,e);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(r&&pl(s,r),e.controller.draw(),r&&gl(s),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return Ss(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,s,n,r){const i=d2.modes[s];return typeof i=="function"?i(this,e,n,r):[]}getDatasetMeta(e){const s=this.data.datasets[e],n=this._metasets;let r=n.filter(i=>i&&i._dataset===s).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:s&&s.order||0,index:e,_dataset:s,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=mn(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const s=this.data.datasets[e];if(!s)return!1;const n=this.getDatasetMeta(e);return typeof n.hidden=="boolean"?!n.hidden:!s.hidden}setDatasetVisibility(e,s){const n=this.getDatasetMeta(e);n.hidden=!s}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,s,n){const r=n?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,r);Bo(s)?(i.data[s].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),o.update(i,{visible:n}),this.update(l=>l.datasetIndex===e?r:void 0))}hide(e,s){this._updateVisibility(e,s,!1)}show(e,s){this._updateVisibility(e,s,!0)}_destroyDatasetMeta(e){const s=this._metasets[e];s&&s.controller&&s.controller._destroy(),delete this._metasets[e]}_stop(){let e,s;for(this.stop(),gs.remove(this),e=0,s=this.data.datasets.length;e<s;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:s}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Bf(e,s),this.platform.releaseContext(s),this.canvas=null,this.ctx=null),delete ro[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,s=this.platform,n=(i,o)=>{s.addEventListener(this,i,o),e[i]=o},r=(i,o,l)=>{i.offsetX=o,i.offsetY=l,this._eventHandler(i)};_e(this.options.events,i=>n(i,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,s=this.platform,n=(c,d)=>{s.addEventListener(this,c,d),e[c]=d},r=(c,d)=>{e[c]&&(s.removeEventListener(this,c,d),delete e[c])},i=(c,d)=>{this.canvas&&this.resize(c,d)};let o;const l=()=>{r("attach",l),this.attached=!0,this.resize(),n("resize",i),n("detach",o)};o=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),n("attach",l)},s.isAttached(this.canvas)?l():o()}unbindEvents(){_e(this._listeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._listeners={},_e(this._responsiveListeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,s,n){const r=n?"set":"remove";let i,o,l,c;for(s==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),l=0,c=e.length;l<c;++l){o=e[l];const d=o&&this.getDatasetMeta(o.datasetIndex).controller;d&&d[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const s=this._active||[],n=e.map(({datasetIndex:i,index:o})=>{const l=this.getDatasetMeta(i);if(!l)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:l.data[o],index:o}});!Lo(n,s)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,s))}notifyPlugins(e,s,n){return this._plugins.notify(this,e,s,n)}isPluginEnabled(e){return this._plugins._cache.filter(s=>s.plugin.id===e).length===1}_updateHoverStyles(e,s,n){const r=this.options.hover,i=(c,d)=>c.filter(u=>!d.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),o=i(s,e),l=n?e:i(e,s);o.length&&this.updateHoverStyle(o,r.mode,!1),l.length&&r.mode&&this.updateHoverStyle(l,r.mode,!0)}_eventHandler(e,s){const n={event:e,replay:s,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",n,r)===!1)return;const i=this._handleEvent(e,s,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(i||n.changed)&&this.render(),this}_handleEvent(e,s,n){const{_active:r=[],options:i}=this,o=s,l=this._getActiveElements(e,r,n,o),c=C1(e),d=fk(e,this._lastEvent,n,c);n&&(this._lastEvent=null,Pe(i.onHover,[e,l,this],this),c&&Pe(i.onClick,[e,l,this],this));const u=!Lo(l,r);return(u||s)&&(this._active=l,this._updateHoverStyles(l,r,s)),this._lastEvent=d,u}_getActiveElements(e,s,n,r){if(e.type==="mouseout")return[];if(!n)return s;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,r)}},me(Ds,"defaults",$e),me(Ds,"instances",ro),me(Ds,"overrides",Wn),me(Ds,"registry",ls),me(Ds,"version",ck),me(Ds,"getChart",mm),Ds);function pm(){return _e(yl.instances,t=>t._plugins.invalidate())}function yx(t,e,s=e){t.lineCap=ye(s.borderCapStyle,e.borderCapStyle),t.setLineDash(ye(s.borderDash,e.borderDash)),t.lineDashOffset=ye(s.borderDashOffset,e.borderDashOffset),t.lineJoin=ye(s.borderJoinStyle,e.borderJoinStyle),t.lineWidth=ye(s.borderWidth,e.borderWidth),t.strokeStyle=ye(s.borderColor,e.borderColor)}function mk(t,e,s){t.lineTo(s.x,s.y)}function pk(t){return t.stepped?Z1:t.tension||t.cubicInterpolationMode==="monotone"?ej:mk}function vx(t,e,s={}){const n=t.length,{start:r=0,end:i=n-1}=s,{start:o,end:l}=e,c=Math.max(r,o),d=Math.min(i,l),u=r<o&&i<o||r>l&&i>l;return{count:n,start:c,loop:e.loop,ilen:d<c&&!u?n+d-c:d-c}}function gk(t,e,s,n){const{points:r,options:i}=e,{count:o,start:l,loop:c,ilen:d}=vx(r,s,n),u=pk(i);let{move:h=!0,reverse:f}=n||{},m,p,v;for(m=0;m<=d;++m)p=r[(l+(f?d-m:m))%o],!p.skip&&(h?(t.moveTo(p.x,p.y),h=!1):u(t,v,p,f,i.stepped),v=p);return c&&(p=r[(l+(f?d:0))%o],u(t,v,p,f,i.stepped)),!!c}function xk(t,e,s,n){const r=e.points,{count:i,start:o,ilen:l}=vx(r,s,n),{move:c=!0,reverse:d}=n||{};let u=0,h=0,f,m,p,v,b,x;const g=w=>(o+(d?l-w:w))%i,y=()=>{v!==b&&(t.lineTo(u,b),t.lineTo(u,v),t.lineTo(u,x))};for(c&&(m=r[g(0)],t.moveTo(m.x,m.y)),f=0;f<=l;++f){if(m=r[g(f)],m.skip)continue;const w=m.x,_=m.y,N=w|0;N===p?(_<v?v=_:_>b&&(b=_),u=(h*u+w)/++h):(y(),t.lineTo(w,_),p=N,h=0,v=b=_),x=_}y()}function jd(t){const e=t.options,s=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!s?xk:gk}function yk(t){return t.stepped?Mj:t.tension||t.cubicInterpolationMode==="monotone"?Lj:Sn}function vk(t,e,s,n){let r=e._path;r||(r=e._path=new Path2D,e.path(r,s,n)&&r.closePath()),yx(t,e.options),t.stroke(r)}function bk(t,e,s,n){const{segments:r,options:i}=e,o=jd(e);for(const l of r)yx(t,i,l.style),t.beginPath(),o(t,e,l,{start:s,end:s+n-1})&&t.closePath(),t.stroke()}const wk=typeof Path2D=="function";function _k(t,e,s,n){wk&&!e.options.segment?vk(t,e,s,n):bk(t,e,s,n)}class Ks extends cn{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,s){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const r=n.spanGaps?this._loop:this._fullLoop;Sj(this._points,n,e,r,s),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Fj(this,this.options.segment))}first(){const e=this.segments,s=this.points;return e.length&&s[e[0].start]}last(){const e=this.segments,s=this.points,n=e.length;return n&&s[e[n-1].end]}interpolate(e,s){const n=this.options,r=e[s],i=this.points,o=ix(this,{property:s,start:r,end:r});if(!o.length)return;const l=[],c=yk(n);let d,u;for(d=0,u=o.length;d<u;++d){const{start:h,end:f}=o[d],m=i[h],p=i[f];if(m===p){l.push(m);continue}const v=Math.abs((r-m[s])/(p[s]-m[s])),b=c(m,p,v,n.stepped);b[s]=e[s],l.push(b)}return l.length===1?l[0]:l}pathSegment(e,s,n){return jd(this)(e,this,s,n)}path(e,s,n){const r=this.segments,i=jd(this);let o=this._loop;s=s||0,n=n||this.points.length-s;for(const l of r)o&=i(e,this,l,{start:s,end:s+n-1});return!!o}draw(e,s,n,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),_k(e,this,n,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}me(Ks,"id","line"),me(Ks,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),me(Ks,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),me(Ks,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function gm(t,e,s,n){const r=t.options,{[s]:i}=t.getProps([s],n);return Math.abs(e-i)<r.radius+r.hitRadius}class io extends cn{constructor(s){super();me(this,"parsed");me(this,"skip");me(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,s&&Object.assign(this,s)}inRange(s,n,r){const i=this.options,{x:o,y:l}=this.getProps(["x","y"],r);return Math.pow(s-o,2)+Math.pow(n-l,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(s,n){return gm(this,s,"x",n)}inYRange(s,n){return gm(this,s,"y",n)}getCenterPoint(s){const{x:n,y:r}=this.getProps(["x","y"],s);return{x:n,y:r}}size(s){s=s||this.options||{};let n=s.radius||0;n=Math.max(n,n&&s.hoverRadius||0);const r=n&&s.borderWidth||0;return(n+r)*2}draw(s,n){const r=this.options;this.skip||r.radius<.1||!Ss(this,n,this.size(r)/2)||(s.strokeStyle=r.borderColor,s.lineWidth=r.borderWidth,s.fillStyle=r.backgroundColor,bd(s,r,this.x,this.y))}getRange(){const s=this.options||{};return s.radius+s.hitRadius}}me(io,"id","point"),me(io,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),me(io,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function jk(t,e,s){const n=t.segments,r=t.points,i=e.points,o=[];for(const l of n){let{start:c,end:d}=l;d=vl(c,d,r);const u=kd(s,r[c],r[d],l.loop);if(!e.segments){o.push({source:l,target:u,start:r[c],end:r[d]});continue}const h=ix(e,u);for(const f of h){const m=kd(s,i[f.start],i[f.end],f.loop),p=rx(l,r,m);for(const v of p)o.push({source:v,target:f,start:{[s]:xm(u,m,"start",Math.max)},end:{[s]:xm(u,m,"end",Math.min)}})}}return o}function kd(t,e,s,n){if(n)return;let r=e[t],i=s[t];return t==="angle"&&(r=St(r),i=St(i)),{property:t,start:r,end:i}}function kk(t,e){const{x:s=null,y:n=null}=t||{},r=e.points,i=[];return e.segments.forEach(({start:o,end:l})=>{l=vl(o,l,r);const c=r[o],d=r[l];n!==null?(i.push({x:c.x,y:n}),i.push({x:d.x,y:n})):s!==null&&(i.push({x:s,y:c.y}),i.push({x:s,y:d.y}))}),i}function vl(t,e,s){for(;e>t;e--){const n=s[e];if(!isNaN(n.x)&&!isNaN(n.y))break}return e}function xm(t,e,s,n){return t&&e?n(t[s],e[s]):t?t[s]:e?e[s]:0}function bx(t,e){let s=[],n=!1;return ze(t)?(n=!0,s=t):s=kk(t,e),s.length?new Ks({points:s,options:{tension:0},_loop:n,_fullLoop:n}):null}function ym(t){return t&&t.fill!==!1}function Nk(t,e,s){let r=t[e].fill;const i=[e];let o;if(!s)return r;for(;r!==!1&&i.indexOf(r)===-1;){if(!ot(r))return r;if(o=t[r],!o)return!1;if(o.visible)return r;i.push(r),r=o.fill}return!1}function Sk(t,e,s){const n=Tk(t);if(ve(n))return isNaN(n.value)?!1:n;let r=parseFloat(n);return ot(r)&&Math.floor(r)===r?Ck(n[0],e,r,s):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function Ck(t,e,s,n){return(t==="-"||t==="+")&&(s=e+s),s===e||s<0||s>=n?!1:s}function Pk(t,e){let s=null;return t==="start"?s=e.bottom:t==="end"?s=e.top:ve(t)?s=e.getPixelForValue(t.value):e.getBasePixel&&(s=e.getBasePixel()),s}function Ek(t,e,s){let n;return t==="start"?n=s:t==="end"?n=e.options.reverse?e.min:e.max:ve(t)?n=t.value:n=e.getBaseValue(),n}function Tk(t){const e=t.options,s=e.fill;let n=ye(s&&s.target,s);return n===void 0&&(n=!!e.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function Ak(t){const{scale:e,index:s,line:n}=t,r=[],i=n.segments,o=n.points,l=Ok(e,s);l.push(bx({x:null,y:e.bottom},n));for(let c=0;c<i.length;c++){const d=i[c];for(let u=d.start;u<=d.end;u++)Rk(r,o[u],l)}return new Ks({points:r,options:{}})}function Ok(t,e){const s=[],n=t.getMatchingVisibleMetas("line");for(let r=0;r<n.length;r++){const i=n[r];if(i.index===e)break;i.hidden||s.unshift(i.dataset)}return s}function Rk(t,e,s){const n=[];for(let r=0;r<s.length;r++){const i=s[r],{first:o,last:l,point:c}=Mk(i,e,"x");if(!(!c||o&&l)){if(o)n.unshift(c);else if(t.push(c),!l)break}}t.push(...n)}function Mk(t,e,s){const n=t.interpolate(e,s);if(!n)return{};const r=n[s],i=t.segments,o=t.points;let l=!1,c=!1;for(let d=0;d<i.length;d++){const u=i[d],h=o[u.start][s],f=o[u.end][s];if(pr(r,h,f)){l=r===h,c=r===f;break}}return{first:l,last:c,point:n}}class wx{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,s,n){const{x:r,y:i,radius:o}=this;return s=s||{start:0,end:At},e.arc(r,i,o,s.end,s.start,!0),!n.bounds}interpolate(e){const{x:s,y:n,radius:r}=this,i=e.angle;return{x:s+Math.cos(i)*r,y:n+Math.sin(i)*r,angle:i}}}function Lk(t){const{chart:e,fill:s,line:n}=t;if(ot(s))return Dk(e,s);if(s==="stack")return Ak(t);if(s==="shape")return!0;const r=Bk(t);return r instanceof wx?r:bx(r,n)}function Dk(t,e){const s=t.getDatasetMeta(e);return s&&t.isDatasetVisible(e)?s.dataset:null}function Bk(t){return(t.scale||{}).getPointPositionForValue?zk(t):Ik(t)}function Ik(t){const{scale:e={},fill:s}=t,n=Pk(s,e);if(ot(n)){const r=e.isHorizontal();return{x:r?n:null,y:r?null:n}}return null}function zk(t){const{scale:e,fill:s}=t,n=e.options,r=e.getLabels().length,i=n.reverse?e.max:e.min,o=Ek(s,e,i),l=[];if(n.grid.circular){const c=e.getPointPositionForValue(0,i);return new wx({x:c.x,y:c.y,radius:e.getDistanceFromCenterForValue(o)})}for(let c=0;c<r;++c)l.push(e.getPointPositionForValue(c,o));return l}function cc(t,e,s){const n=Lk(e),{chart:r,index:i,line:o,scale:l,axis:c}=e,d=o.options,u=d.fill,h=d.backgroundColor,{above:f=h,below:m=h}=u||{},p=r.getDatasetMeta(i),v=ax(r,p);n&&o.points.length&&(pl(t,s),$k(t,{line:o,target:n,above:f,below:m,area:s,scale:l,axis:c,clip:v}),gl(t))}function $k(t,e){const{line:s,target:n,above:r,below:i,area:o,scale:l,clip:c}=e,d=s._loop?"angle":e.axis;t.save();let u=i;i!==r&&(d==="x"?(vm(t,n,o.top),dc(t,{line:s,target:n,color:r,scale:l,property:d,clip:c}),t.restore(),t.save(),vm(t,n,o.bottom)):d==="y"&&(bm(t,n,o.left),dc(t,{line:s,target:n,color:i,scale:l,property:d,clip:c}),t.restore(),t.save(),bm(t,n,o.right),u=r)),dc(t,{line:s,target:n,color:u,scale:l,property:d,clip:c}),t.restore()}function vm(t,e,s){const{segments:n,points:r}=e;let i=!0,o=!1;t.beginPath();for(const l of n){const{start:c,end:d}=l,u=r[c],h=r[vl(c,d,r)];i?(t.moveTo(u.x,u.y),i=!1):(t.lineTo(u.x,s),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,l,{move:o}),o?t.closePath():t.lineTo(h.x,s)}t.lineTo(e.first().x,s),t.closePath(),t.clip()}function bm(t,e,s){const{segments:n,points:r}=e;let i=!0,o=!1;t.beginPath();for(const l of n){const{start:c,end:d}=l,u=r[c],h=r[vl(c,d,r)];i?(t.moveTo(u.x,u.y),i=!1):(t.lineTo(s,u.y),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,l,{move:o}),o?t.closePath():t.lineTo(s,h.y)}t.lineTo(s,e.first().y),t.closePath(),t.clip()}function dc(t,e){const{line:s,target:n,property:r,color:i,scale:o,clip:l}=e,c=jk(s,n,r);for(const{source:d,target:u,start:h,end:f}of c){const{style:{backgroundColor:m=i}={}}=d,p=n!==!0;t.save(),t.fillStyle=m,Fk(t,o,l,p&&kd(r,h,f)),t.beginPath();const v=!!s.pathSegment(t,d);let b;if(p){v?t.closePath():wm(t,n,f,r);const x=!!n.pathSegment(t,u,{move:v,reverse:!0});b=v&&x,b||wm(t,n,h,r)}t.closePath(),t.fill(b?"evenodd":"nonzero"),t.restore()}}function Fk(t,e,s,n){const r=e.chart.chartArea,{property:i,start:o,end:l}=n||{};if(i==="x"||i==="y"){let c,d,u,h;i==="x"?(c=o,d=r.top,u=l,h=r.bottom):(c=r.left,d=o,u=r.right,h=l),t.beginPath(),s&&(c=Math.max(c,s.left),u=Math.min(u,s.right),d=Math.max(d,s.top),h=Math.min(h,s.bottom)),t.rect(c,d,u-c,h-d),t.clip()}}function wm(t,e,s,n){const r=e.interpolate(s,n);r&&t.lineTo(r.x,r.y)}var Uk={id:"filler",afterDatasetsUpdate(t,e,s){const n=(t.data.datasets||[]).length,r=[];let i,o,l,c;for(o=0;o<n;++o)i=t.getDatasetMeta(o),l=i.dataset,c=null,l&&l.options&&l instanceof Ks&&(c={visible:t.isDatasetVisible(o),index:o,fill:Sk(l,o,n),chart:t,axis:i.controller.options.indexAxis,scale:i.vScale,line:l}),i.$filler=c,r.push(c);for(o=0;o<n;++o)c=r[o],!(!c||c.fill===!1)&&(c.fill=Nk(r,o,s.propagate))},beforeDraw(t,e,s){const n=s.drawTime==="beforeDraw",r=t.getSortedVisibleDatasetMetas(),i=t.chartArea;for(let o=r.length-1;o>=0;--o){const l=r[o].$filler;l&&(l.line.updateControlPoints(i,l.axis),n&&l.fill&&cc(t.ctx,l,i))}},beforeDatasetsDraw(t,e,s){if(s.drawTime!=="beforeDatasetsDraw")return;const n=t.getSortedVisibleDatasetMetas();for(let r=n.length-1;r>=0;--r){const i=n[r].$filler;ym(i)&&cc(t.ctx,i,t.chartArea)}},beforeDatasetDraw(t,e,s){const n=e.meta.$filler;!ym(n)||s.drawTime!=="beforeDatasetDraw"||cc(t.ctx,n,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const _m=(t,e)=>{let{boxHeight:s=e,boxWidth:n=e}=t;return t.usePointStyle&&(s=Math.min(s,e),n=t.pointStyleWidth||Math.min(n,e)),{boxWidth:n,boxHeight:s,itemHeight:Math.max(e,s)}},Wk=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class jm extends cn{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,s,n){this.maxWidth=e,this.maxHeight=s,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let s=Pe(e.generateLabels,[this.chart],this)||[];e.filter&&(s=s.filter(n=>e.filter(n,this.chart.data))),e.sort&&(s=s.sort((n,r)=>e.sort(n,r,this.chart.data))),this.options.reverse&&s.reverse(),this.legendItems=s}fit(){const{options:e,ctx:s}=this;if(!e.display){this.width=this.height=0;return}const n=e.labels,r=Ze(n.font),i=r.size,o=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=_m(n,i);let d,u;s.font=r.string,this.isHorizontal()?(d=this.maxWidth,u=this._fitRows(o,i,l,c)+10):(u=this.maxHeight,d=this._fitCols(o,r,l,c)+10),this.width=Math.min(d,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,s,n,r){const{ctx:i,maxWidth:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],d=this.lineWidths=[0],u=r+l;let h=e;i.textAlign="left",i.textBaseline="middle";let f=-1,m=-u;return this.legendItems.forEach((p,v)=>{const b=n+s/2+i.measureText(p.text).width;(v===0||d[d.length-1]+b+2*l>o)&&(h+=u,d[d.length-(v>0?0:1)]=0,m+=u,f++),c[v]={left:0,top:m,row:f,width:b,height:r},d[d.length-1]+=b+l}),h}_fitCols(e,s,n,r){const{ctx:i,maxHeight:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],d=this.columnSizes=[],u=o-e;let h=l,f=0,m=0,p=0,v=0;return this.legendItems.forEach((b,x)=>{const{itemWidth:g,itemHeight:y}=Hk(n,s,i,b,r);x>0&&m+y+2*l>u&&(h+=f+l,d.push({width:f,height:m}),p+=f+l,v++,f=m=0),c[x]={left:p,top:m,col:v,width:g,height:y},f=Math.max(f,g),m+=y+l}),h+=f,d.push({width:f,height:m}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:s,options:{align:n,labels:{padding:r},rtl:i}}=this,o=jr(i,this.left,this.width);if(this.isHorizontal()){let l=0,c=kt(n,this.left+r,this.right-this.lineWidths[l]);for(const d of s)l!==d.row&&(l=d.row,c=kt(n,this.left+r,this.right-this.lineWidths[l])),d.top+=this.top+e+r,d.left=o.leftForLtr(o.x(c),d.width),c+=d.width+r}else{let l=0,c=kt(n,this.top+e+r,this.bottom-this.columnSizes[l].height);for(const d of s)d.col!==l&&(l=d.col,c=kt(n,this.top+e+r,this.bottom-this.columnSizes[l].height)),d.top=c,d.left+=this.left+r,d.left=o.leftForLtr(o.x(d.left),d.width),c+=d.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;pl(e,this),this._draw(),gl(e)}}_draw(){const{options:e,columnSizes:s,lineWidths:n,ctx:r}=this,{align:i,labels:o}=e,l=$e.color,c=jr(e.rtl,this.left,this.width),d=Ze(o.font),{padding:u}=o,h=d.size,f=h/2;let m;this.drawTitle(),r.textAlign=c.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=d.string;const{boxWidth:p,boxHeight:v,itemHeight:b}=_m(o,h),x=function(N,P,E){if(isNaN(p)||p<=0||isNaN(v)||v<0)return;r.save();const C=ye(E.lineWidth,1);if(r.fillStyle=ye(E.fillStyle,l),r.lineCap=ye(E.lineCap,"butt"),r.lineDashOffset=ye(E.lineDashOffset,0),r.lineJoin=ye(E.lineJoin,"miter"),r.lineWidth=C,r.strokeStyle=ye(E.strokeStyle,l),r.setLineDash(ye(E.lineDash,[])),o.usePointStyle){const R={radius:v*Math.SQRT2/2,pointStyle:E.pointStyle,rotation:E.rotation,borderWidth:C},M=c.xPlus(N,p/2),V=P+f;Y0(r,R,M,V,o.pointStyleWidth&&p)}else{const R=P+Math.max((h-v)/2,0),M=c.leftForLtr(N,p),V=_r(E.borderRadius);r.beginPath(),Object.values(V).some(ie=>ie!==0)?Fo(r,{x:M,y:R,w:p,h:v,radius:V}):r.rect(M,R,p,v),r.fill(),C!==0&&r.stroke()}r.restore()},g=function(N,P,E){Mr(r,E.text,N,P+b/2,d,{strikethrough:E.hidden,textAlign:c.textAlign(E.textAlign)})},y=this.isHorizontal(),w=this._computeTitleHeight();y?m={x:kt(i,this.left+u,this.right-n[0]),y:this.top+u+w,line:0}:m={x:this.left+u,y:kt(i,this.top+w+u,this.bottom-s[0].height),line:0},tx(this.ctx,e.textDirection);const _=b+u;this.legendItems.forEach((N,P)=>{r.strokeStyle=N.fontColor,r.fillStyle=N.fontColor;const E=r.measureText(N.text).width,C=c.textAlign(N.textAlign||(N.textAlign=o.textAlign)),R=p+f+E;let M=m.x,V=m.y;c.setWidth(this.width),y?P>0&&M+R+u>this.right&&(V=m.y+=_,m.line++,M=m.x=kt(i,this.left+u,this.right-n[m.line])):P>0&&V+_>this.bottom&&(M=m.x=M+s[m.line].width+u,m.line++,V=m.y=kt(i,this.top+w+u,this.bottom-s[m.line].height));const ie=c.x(M);if(x(ie,V,N),M=U1(C,M+p+f,y?M+R:this.right,e.rtl),g(c.x(M),V,N),y)m.x+=R+u;else if(typeof N.text!="string"){const ce=d.lineHeight;m.y+=_x(N,ce)+u}else m.y+=_}),sx(this.ctx,e.textDirection)}drawTitle(){const e=this.options,s=e.title,n=Ze(s.font),r=ht(s.padding);if(!s.display)return;const i=jr(e.rtl,this.left,this.width),o=this.ctx,l=s.position,c=n.size/2,d=r.top+c;let u,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+d,h=kt(e.align,h,this.right-f);else{const p=this.columnSizes.reduce((v,b)=>Math.max(v,b.height),0);u=d+kt(e.align,this.top,this.bottom-p-e.labels.padding-this._computeTitleHeight())}const m=kt(l,h,h+f);o.textAlign=i.textAlign(H0(l)),o.textBaseline="middle",o.strokeStyle=s.color,o.fillStyle=s.color,o.font=n.string,Mr(o,s.text,m,u,n)}_computeTitleHeight(){const e=this.options.title,s=Ze(e.font),n=ht(e.padding);return e.display?s.lineHeight+n.height:0}_getLegendItemAt(e,s){let n,r,i;if(pr(e,this.left,this.right)&&pr(s,this.top,this.bottom)){for(i=this.legendHitBoxes,n=0;n<i.length;++n)if(r=i[n],pr(e,r.left,r.left+r.width)&&pr(s,r.top,r.top+r.height))return this.legendItems[n]}return null}handleEvent(e){const s=this.options;if(!Kk(e.type,s))return;const n=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,i=Wk(r,n);r&&!i&&Pe(s.onLeave,[e,r,this],this),this._hoveredItem=n,n&&!i&&Pe(s.onHover,[e,n,this],this)}else n&&Pe(s.onClick,[e,n,this],this)}}function Hk(t,e,s,n,r){const i=Vk(n,t,e,s),o=qk(r,n,e.lineHeight);return{itemWidth:i,itemHeight:o}}function Vk(t,e,s,n){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((i,o)=>i.length>o.length?i:o)),e+s.size/2+n.measureText(r).width}function qk(t,e,s){let n=t;return typeof e.text!="string"&&(n=_x(e,s)),n}function _x(t,e){const s=t.text?t.text.length:0;return e*s}function Kk(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var Yk={id:"legend",_element:jm,start(t,e,s){const n=t.legend=new jm({ctx:t.ctx,options:s,chart:t});qs.configure(t,n,s),qs.addBox(t,n)},stop(t){qs.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,s){const n=t.legend;qs.configure(t,n,s),n.options=s},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,s){const n=e.datasetIndex,r=s.chart;r.isDatasetVisible(n)?(r.hide(n),e.hidden=!0):(r.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:s,pointStyle:n,textAlign:r,color:i,useBorderRadius:o,borderRadius:l}}=t.legend.options;return t._getSortedDatasetMetas().map(c=>{const d=c.controller.getStyle(s?0:void 0),u=ht(d.borderWidth);return{text:e[c.index].label,fillStyle:d.backgroundColor,fontColor:i,hidden:!c.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:d.borderColor,pointStyle:n||d.pointStyle,rotation:d.rotation,textAlign:r||d.textAlign,borderRadius:o&&(l||d.borderRadius),datasetIndex:c.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};const ui={average(t){if(!t.length)return!1;let e,s,n=new Set,r=0,i=0;for(e=0,s=t.length;e<s;++e){const l=t[e].element;if(l&&l.hasValue()){const c=l.tooltipPosition();n.add(c.x),r+=c.y,++i}}return i===0||n.size===0?!1:{x:[...n].reduce((l,c)=>l+c)/n.size,y:r/i}},nearest(t,e){if(!t.length)return!1;let s=e.x,n=e.y,r=Number.POSITIVE_INFINITY,i,o,l;for(i=0,o=t.length;i<o;++i){const c=t[i].element;if(c&&c.hasValue()){const d=c.getCenterPoint(),u=xd(e,d);u<r&&(r=u,l=c)}}if(l){const c=l.tooltipPosition();s=c.x,n=c.y}return{x:s,y:n}}};function as(t,e){return e&&(ze(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function xs(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function Gk(t,e){const{element:s,datasetIndex:n,index:r}=e,i=t.getDatasetMeta(n).controller,{label:o,value:l}=i.getLabelAndValue(r);return{chart:t,label:o,parsed:i.getParsed(r),raw:t.data.datasets[n].data[r],formattedValue:l,dataset:i.getDataset(),dataIndex:r,datasetIndex:n,element:s}}function km(t,e){const s=t.chart.ctx,{body:n,footer:r,title:i}=t,{boxWidth:o,boxHeight:l}=e,c=Ze(e.bodyFont),d=Ze(e.titleFont),u=Ze(e.footerFont),h=i.length,f=r.length,m=n.length,p=ht(e.padding);let v=p.height,b=0,x=n.reduce((w,_)=>w+_.before.length+_.lines.length+_.after.length,0);if(x+=t.beforeBody.length+t.afterBody.length,h&&(v+=h*d.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),x){const w=e.displayColors?Math.max(l,c.lineHeight):c.lineHeight;v+=m*w+(x-m)*c.lineHeight+(x-1)*e.bodySpacing}f&&(v+=e.footerMarginTop+f*u.lineHeight+(f-1)*e.footerSpacing);let g=0;const y=function(w){b=Math.max(b,s.measureText(w).width+g)};return s.save(),s.font=d.string,_e(t.title,y),s.font=c.string,_e(t.beforeBody.concat(t.afterBody),y),g=e.displayColors?o+2+e.boxPadding:0,_e(n,w=>{_e(w.before,y),_e(w.lines,y),_e(w.after,y)}),g=0,s.font=u.string,_e(t.footer,y),s.restore(),b+=p.width,{width:b,height:v}}function Qk(t,e){const{y:s,height:n}=e;return s<n/2?"top":s>t.height-n/2?"bottom":"center"}function Jk(t,e,s,n){const{x:r,width:i}=n,o=s.caretSize+s.caretPadding;if(t==="left"&&r+i+o>e.width||t==="right"&&r-i-o<0)return!0}function Xk(t,e,s,n){const{x:r,width:i}=s,{width:o,chartArea:{left:l,right:c}}=t;let d="center";return n==="center"?d=r<=(l+c)/2?"left":"right":r<=i/2?d="left":r>=o-i/2&&(d="right"),Jk(d,t,e,s)&&(d="center"),d}function Nm(t,e,s){const n=s.yAlign||e.yAlign||Qk(t,s);return{xAlign:s.xAlign||e.xAlign||Xk(t,e,s,n),yAlign:n}}function Zk(t,e){let{x:s,width:n}=t;return e==="right"?s-=n:e==="center"&&(s-=n/2),s}function eN(t,e,s){let{y:n,height:r}=t;return e==="top"?n+=s:e==="bottom"?n-=r+s:n-=r/2,n}function Sm(t,e,s,n){const{caretSize:r,caretPadding:i,cornerRadius:o}=t,{xAlign:l,yAlign:c}=s,d=r+i,{topLeft:u,topRight:h,bottomLeft:f,bottomRight:m}=_r(o);let p=Zk(e,l);const v=eN(e,c,d);return c==="center"?l==="left"?p+=d:l==="right"&&(p-=d):l==="left"?p-=Math.max(u,f)+r:l==="right"&&(p+=Math.max(h,m)+r),{x:Ns(p,0,n.width-e.width),y:Ns(v,0,n.height-e.height)}}function Fa(t,e,s){const n=ht(s.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-n.right:t.x+n.left}function Cm(t){return as([],xs(t))}function tN(t,e,s){return mn(t,{tooltip:e,tooltipItems:s,type:"tooltip"})}function Pm(t,e){const s=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return s?t.override(s):t}const jx={beforeTitle:ms,title(t){if(t.length>0){const e=t[0],s=e.chart.data.labels,n=s?s.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return s[e.dataIndex]}return""},afterTitle:ms,beforeBody:ms,beforeLabel:ms,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const s=t.formattedValue;return Ae(s)||(e+=s),e},labelColor(t){const s=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:s.borderColor,backgroundColor:s.backgroundColor,borderWidth:s.borderWidth,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const s=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:s.pointStyle,rotation:s.rotation}},afterLabel:ms,afterBody:ms,beforeFooter:ms,footer:ms,afterFooter:ms};function gt(t,e,s,n){const r=t[e].call(s,n);return typeof r>"u"?jx[e].call(s,n):r}class Nd extends cn{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const s=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&s.options.animation&&n.animations,i=new ox(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=tN(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,s){const{callbacks:n}=s,r=gt(n,"beforeTitle",this,e),i=gt(n,"title",this,e),o=gt(n,"afterTitle",this,e);let l=[];return l=as(l,xs(r)),l=as(l,xs(i)),l=as(l,xs(o)),l}getBeforeBody(e,s){return Cm(gt(s.callbacks,"beforeBody",this,e))}getBody(e,s){const{callbacks:n}=s,r=[];return _e(e,i=>{const o={before:[],lines:[],after:[]},l=Pm(n,i);as(o.before,xs(gt(l,"beforeLabel",this,i))),as(o.lines,gt(l,"label",this,i)),as(o.after,xs(gt(l,"afterLabel",this,i))),r.push(o)}),r}getAfterBody(e,s){return Cm(gt(s.callbacks,"afterBody",this,e))}getFooter(e,s){const{callbacks:n}=s,r=gt(n,"beforeFooter",this,e),i=gt(n,"footer",this,e),o=gt(n,"afterFooter",this,e);let l=[];return l=as(l,xs(r)),l=as(l,xs(i)),l=as(l,xs(o)),l}_createItems(e){const s=this._active,n=this.chart.data,r=[],i=[],o=[];let l=[],c,d;for(c=0,d=s.length;c<d;++c)l.push(Gk(this.chart,s[c]));return e.filter&&(l=l.filter((u,h,f)=>e.filter(u,h,f,n))),e.itemSort&&(l=l.sort((u,h)=>e.itemSort(u,h,n))),_e(l,u=>{const h=Pm(e.callbacks,u);r.push(gt(h,"labelColor",this,u)),i.push(gt(h,"labelPointStyle",this,u)),o.push(gt(h,"labelTextColor",this,u))}),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=l,l}update(e,s){const n=this.options.setContext(this.getContext()),r=this._active;let i,o=[];if(!r.length)this.opacity!==0&&(i={opacity:0});else{const l=ui[n.position].call(this,r,this._eventPosition);o=this._createItems(n),this.title=this.getTitle(o,n),this.beforeBody=this.getBeforeBody(o,n),this.body=this.getBody(o,n),this.afterBody=this.getAfterBody(o,n),this.footer=this.getFooter(o,n);const c=this._size=km(this,n),d=Object.assign({},l,c),u=Nm(this.chart,n,d),h=Sm(n,d,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,i={opacity:1,x:h.x,y:h.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:s})}drawCaret(e,s,n,r){const i=this.getCaretPosition(e,n,r);s.lineTo(i.x1,i.y1),s.lineTo(i.x2,i.y2),s.lineTo(i.x3,i.y3)}getCaretPosition(e,s,n){const{xAlign:r,yAlign:i}=this,{caretSize:o,cornerRadius:l}=n,{topLeft:c,topRight:d,bottomLeft:u,bottomRight:h}=_r(l),{x:f,y:m}=e,{width:p,height:v}=s;let b,x,g,y,w,_;return i==="center"?(w=m+v/2,r==="left"?(b=f,x=b-o,y=w+o,_=w-o):(b=f+p,x=b+o,y=w-o,_=w+o),g=b):(r==="left"?x=f+Math.max(c,u)+o:r==="right"?x=f+p-Math.max(d,h)-o:x=this.caretX,i==="top"?(y=m,w=y-o,b=x-o,g=x+o):(y=m+v,w=y+o,b=x+o,g=x-o),_=y),{x1:b,x2:x,x3:g,y1:y,y2:w,y3:_}}drawTitle(e,s,n){const r=this.title,i=r.length;let o,l,c;if(i){const d=jr(n.rtl,this.x,this.width);for(e.x=Fa(this,n.titleAlign,n),s.textAlign=d.textAlign(n.titleAlign),s.textBaseline="middle",o=Ze(n.titleFont),l=n.titleSpacing,s.fillStyle=n.titleColor,s.font=o.string,c=0;c<i;++c)s.fillText(r[c],d.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+l,c+1===i&&(e.y+=n.titleMarginBottom-l)}}_drawColorBox(e,s,n,r,i){const o=this.labelColors[n],l=this.labelPointStyles[n],{boxHeight:c,boxWidth:d}=i,u=Ze(i.bodyFont),h=Fa(this,"left",i),f=r.x(h),m=c<u.lineHeight?(u.lineHeight-c)/2:0,p=s.y+m;if(i.usePointStyle){const v={radius:Math.min(d,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},b=r.leftForLtr(f,d)+d/2,x=p+c/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,bd(e,v,b,x),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,bd(e,v,b,x)}else{e.lineWidth=ve(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const v=r.leftForLtr(f,d),b=r.leftForLtr(r.xPlus(f,1),d-2),x=_r(o.borderRadius);Object.values(x).some(g=>g!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,Fo(e,{x:v,y:p,w:d,h:c,radius:x}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Fo(e,{x:b,y:p+1,w:d-2,h:c-2,radius:x}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(v,p,d,c),e.strokeRect(v,p,d,c),e.fillStyle=o.backgroundColor,e.fillRect(b,p+1,d-2,c-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,s,n){const{body:r}=this,{bodySpacing:i,bodyAlign:o,displayColors:l,boxHeight:c,boxWidth:d,boxPadding:u}=n,h=Ze(n.bodyFont);let f=h.lineHeight,m=0;const p=jr(n.rtl,this.x,this.width),v=function(E){s.fillText(E,p.x(e.x+m),e.y+f/2),e.y+=f+i},b=p.textAlign(o);let x,g,y,w,_,N,P;for(s.textAlign=o,s.textBaseline="middle",s.font=h.string,e.x=Fa(this,b,n),s.fillStyle=n.bodyColor,_e(this.beforeBody,v),m=l&&b!=="right"?o==="center"?d/2+u:d+2+u:0,w=0,N=r.length;w<N;++w){for(x=r[w],g=this.labelTextColors[w],s.fillStyle=g,_e(x.before,v),y=x.lines,l&&y.length&&(this._drawColorBox(s,e,w,p,n),f=Math.max(h.lineHeight,c)),_=0,P=y.length;_<P;++_)v(y[_]),f=h.lineHeight;_e(x.after,v)}m=0,f=h.lineHeight,_e(this.afterBody,v),e.y-=i}drawFooter(e,s,n){const r=this.footer,i=r.length;let o,l;if(i){const c=jr(n.rtl,this.x,this.width);for(e.x=Fa(this,n.footerAlign,n),e.y+=n.footerMarginTop,s.textAlign=c.textAlign(n.footerAlign),s.textBaseline="middle",o=Ze(n.footerFont),s.fillStyle=n.footerColor,s.font=o.string,l=0;l<i;++l)s.fillText(r[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+n.footerSpacing}}drawBackground(e,s,n,r){const{xAlign:i,yAlign:o}=this,{x:l,y:c}=e,{width:d,height:u}=n,{topLeft:h,topRight:f,bottomLeft:m,bottomRight:p}=_r(r.cornerRadius);s.fillStyle=r.backgroundColor,s.strokeStyle=r.borderColor,s.lineWidth=r.borderWidth,s.beginPath(),s.moveTo(l+h,c),o==="top"&&this.drawCaret(e,s,n,r),s.lineTo(l+d-f,c),s.quadraticCurveTo(l+d,c,l+d,c+f),o==="center"&&i==="right"&&this.drawCaret(e,s,n,r),s.lineTo(l+d,c+u-p),s.quadraticCurveTo(l+d,c+u,l+d-p,c+u),o==="bottom"&&this.drawCaret(e,s,n,r),s.lineTo(l+m,c+u),s.quadraticCurveTo(l,c+u,l,c+u-m),o==="center"&&i==="left"&&this.drawCaret(e,s,n,r),s.lineTo(l,c+h),s.quadraticCurveTo(l,c,l+h,c),s.closePath(),s.fill(),r.borderWidth>0&&s.stroke()}_updateAnimationTarget(e){const s=this.chart,n=this.$animations,r=n&&n.x,i=n&&n.y;if(r||i){const o=ui[e.position].call(this,this._active,this._eventPosition);if(!o)return;const l=this._size=km(this,e),c=Object.assign({},o,this._size),d=Nm(s,e,c),u=Sm(e,c,d,s);(r._to!==u.x||i._to!==u.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=l.width,this.height=l.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const s=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(s);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const o=ht(s.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;s.enabled&&l&&(e.save(),e.globalAlpha=n,this.drawBackground(i,e,r,s),tx(e,s.textDirection),i.y+=o.top,this.drawTitle(i,e,s),this.drawBody(i,e,s),this.drawFooter(i,e,s),sx(e,s.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,s){const n=this._active,r=e.map(({datasetIndex:l,index:c})=>{const d=this.chart.getDatasetMeta(l);if(!d)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:d.data[c],index:c}}),i=!Lo(n,r),o=this._positionChanged(r,s);(i||o)&&(this._active=r,this._eventPosition=s,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,s,n=!0){if(s&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],o=this._getActiveElements(e,i,s,n),l=this._positionChanged(o,e),c=s||!Lo(o,i)||l;return c&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,s))),c}_getActiveElements(e,s,n,r){const i=this.options;if(e.type==="mouseout")return[];if(!r)return s.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,n);return i.reverse&&o.reverse(),o}_positionChanged(e,s){const{caretX:n,caretY:r,options:i}=this,o=ui[i.position].call(this,e,s);return o!==!1&&(n!==o.x||r!==o.y)}}me(Nd,"positioners",ui);var sN={id:"tooltip",_element:Nd,positioners:ui,afterInit(t,e,s){s&&(t.tooltip=new Nd({chart:t,options:s}))},beforeUpdate(t,e,s){t.tooltip&&t.tooltip.initialize(s)},reset(t,e,s){t.tooltip&&t.tooltip.initialize(s)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const s={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...s,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",s)}},afterEvent(t,e){if(t.tooltip){const s=e.replay;t.tooltip.handleEvent(e.event,s,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:jx},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function nN(t,e){const s=[],{bounds:r,step:i,min:o,max:l,precision:c,count:d,maxTicks:u,maxDigits:h,includeBounds:f}=t,m=i||1,p=u-1,{min:v,max:b}=e,x=!Ae(o),g=!Ae(l),y=!Ae(d),w=(b-v)/(h+1);let _=Tf((b-v)/p/m)*m,N,P,E,C;if(_<1e-14&&!x&&!g)return[{value:v},{value:b}];C=Math.ceil(b/_)-Math.floor(v/_),C>p&&(_=Tf(C*_/p/m)*m),Ae(c)||(N=Math.pow(10,c),_=Math.ceil(_*N)/N),r==="ticks"?(P=Math.floor(v/_)*_,E=Math.ceil(b/_)*_):(P=v,E=b),x&&g&&i&&O1((l-o)/i,_/1e3)?(C=Math.round(Math.min((l-o)/_,u)),_=(l-o)/C,P=o,E=l):y?(P=x?o:P,E=g?l:E,C=d-1,_=(E-P)/C):(C=(E-P)/_,Si(C,Math.round(C),_/1e3)?C=Math.round(C):C=Math.ceil(C));const R=Math.max(Af(_),Af(P));N=Math.pow(10,Ae(c)?R:c),P=Math.round(P*N)/N,E=Math.round(E*N)/N;let M=0;for(x&&(f&&P!==o?(s.push({value:o}),P<o&&M++,Si(Math.round((P+M*_)*N)/N,o,Em(o,w,t))&&M++):P<o&&M++);M<C;++M){const V=Math.round((P+M*_)*N)/N;if(g&&V>l)break;s.push({value:V})}return g&&f&&E!==l?s.length&&Si(s[s.length-1].value,l,Em(l,w,t))?s[s.length-1].value=l:s.push({value:l}):(!g||E===l)&&s.push({value:E}),s}function Em(t,e,{horizontal:s,minRotation:n}){const r=An(n),i=(s?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+t).length;return Math.min(e/i,o)}class Tm extends la{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,s){return Ae(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:s,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this;const o=c=>r=s?r:c,l=c=>i=n?i:c;if(e){const c=Rr(r),d=Rr(i);c<0&&d<0?l(0):c>0&&d>0&&o(0)}if(r===i){let c=i===0?1:Math.abs(i*.05);l(i+c),e||o(r-c)}this.min=r,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:s,stepSize:n}=e,r;return n?(r=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),s=s||11),s&&(r=Math.min(s,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,s=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const r={maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:s.precision,step:s.stepSize,count:s.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:s.minRotation||0,includeBounds:s.includeBounds!==!1},i=this._range||this,o=nN(r,i);return e.bounds==="ticks"&&R1(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let s=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const r=(n-s)/Math.max(e.length-1,1)/2;s-=r,n+=r}this._startValue=s,this._endValue=n,this._valueRange=n-s}getLabelForValue(e){return V0(e,this.chart.options.locale,this.options.ticks.format)}}function Sd(t){const e=t.ticks;if(e.display&&t.display){const s=ht(e.backdropPadding);return ye(e.font&&e.font.size,$e.font.size)+s.height}return 0}function rN(t,e,s){return s=ze(s)?s:[s],{w:X1(t,e.string,s),h:s.length*e.lineHeight}}function Am(t,e,s,n,r){return t===n||t===r?{start:e-s/2,end:e+s/2}:t<n||t>r?{start:e-s,end:e}:{start:e,end:e+s}}function iN(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},s=Object.assign({},e),n=[],r=[],i=t._pointLabels.length,o=t.options.pointLabels,l=o.centerPointLabels?Je/i:0;for(let c=0;c<i;c++){const d=o.setContext(t.getPointLabelContext(c));r[c]=d.padding;const u=t.getPointPosition(c,t.drawingArea+r[c],l),h=Ze(d.font),f=rN(t.ctx,h,t._pointLabels[c]);n[c]=f;const m=St(t.getIndexAngle(c)+l),p=Math.round(Ru(m)),v=Am(p,u.x,f.w,0,180),b=Am(p,u.y,f.h,90,270);aN(s,e,m,v,b)}t.setCenterPoint(e.l-s.l,s.r-e.r,e.t-s.t,s.b-e.b),t._pointLabelItems=cN(t,n,r)}function aN(t,e,s,n,r){const i=Math.abs(Math.sin(s)),o=Math.abs(Math.cos(s));let l=0,c=0;n.start<e.l?(l=(e.l-n.start)/i,t.l=Math.min(t.l,e.l-l)):n.end>e.r&&(l=(n.end-e.r)/i,t.r=Math.max(t.r,e.r+l)),r.start<e.t?(c=(e.t-r.start)/o,t.t=Math.min(t.t,e.t-c)):r.end>e.b&&(c=(r.end-e.b)/o,t.b=Math.max(t.b,e.b+c))}function oN(t,e,s){const n=t.drawingArea,{extra:r,additionalAngle:i,padding:o,size:l}=s,c=t.getPointPosition(e,n+r+o,i),d=Math.round(Ru(St(c.angle+Et))),u=hN(c.y,l.h,d),h=dN(d),f=uN(c.x,l.w,h);return{visible:!0,x:c.x,y:u,textAlign:h,left:f,top:u,right:f+l.w,bottom:u+l.h}}function lN(t,e){if(!e)return!0;const{left:s,top:n,right:r,bottom:i}=t;return!(Ss({x:s,y:n},e)||Ss({x:s,y:i},e)||Ss({x:r,y:n},e)||Ss({x:r,y:i},e))}function cN(t,e,s){const n=[],r=t._pointLabels.length,i=t.options,{centerPointLabels:o,display:l}=i.pointLabels,c={extra:Sd(i)/2,additionalAngle:o?Je/r:0};let d;for(let u=0;u<r;u++){c.padding=s[u],c.size=e[u];const h=oN(t,u,c);n.push(h),l==="auto"&&(h.visible=lN(h,d),h.visible&&(d=h))}return n}function dN(t){return t===0||t===180?"center":t<180?"left":"right"}function uN(t,e,s){return s==="right"?t-=e:s==="center"&&(t-=e/2),t}function hN(t,e,s){return s===90||s===270?t-=e/2:(s>270||s<90)&&(t-=e),t}function fN(t,e,s){const{left:n,top:r,right:i,bottom:o}=s,{backdropColor:l}=e;if(!Ae(l)){const c=_r(e.borderRadius),d=ht(e.backdropPadding);t.fillStyle=l;const u=n-d.left,h=r-d.top,f=i-n+d.width,m=o-r+d.height;Object.values(c).some(p=>p!==0)?(t.beginPath(),Fo(t,{x:u,y:h,w:f,h:m,radius:c}),t.fill()):t.fillRect(u,h,f,m)}}function mN(t,e){const{ctx:s,options:{pointLabels:n}}=t;for(let r=e-1;r>=0;r--){const i=t._pointLabelItems[r];if(!i.visible)continue;const o=n.setContext(t.getPointLabelContext(r));fN(s,o,i);const l=Ze(o.font),{x:c,y:d,textAlign:u}=i;Mr(s,t._pointLabels[r],c,d+l.lineHeight/2,l,{color:o.color,textAlign:u,textBaseline:"middle"})}}function kx(t,e,s,n){const{ctx:r}=t;if(s)r.arc(t.xCenter,t.yCenter,e,0,At);else{let i=t.getPointPosition(0,e);r.moveTo(i.x,i.y);for(let o=1;o<n;o++)i=t.getPointPosition(o,e),r.lineTo(i.x,i.y)}}function pN(t,e,s,n,r){const i=t.ctx,o=e.circular,{color:l,lineWidth:c}=e;!o&&!n||!l||!c||s<0||(i.save(),i.strokeStyle=l,i.lineWidth=c,i.setLineDash(r.dash||[]),i.lineDashOffset=r.dashOffset,i.beginPath(),kx(t,s,o,n),i.closePath(),i.stroke(),i.restore())}function gN(t,e,s){return mn(t,{label:s,index:e,type:"pointLabel"})}class hi extends Tm{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=ht(Sd(this.options)/2),s=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+s/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(s,n)/2)}determineDataLimits(){const{min:e,max:s}=this.getMinMax(!1);this.min=ot(e)&&!isNaN(e)?e:0,this.max=ot(s)&&!isNaN(s)?s:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Sd(this.options))}generateTickLabels(e){Tm.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((s,n)=>{const r=Pe(this.options.pointLabels.callback,[s,n],this);return r||r===0?r:""}).filter((s,n)=>this.chart.getDataVisibility(n))}fit(){const e=this.options;e.display&&e.pointLabels.display?iN(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,s,n,r){this.xCenter+=Math.floor((e-s)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,s,n,r))}getIndexAngle(e){const s=At/(this._pointLabels.length||1),n=this.options.startAngle||0;return St(e*s+An(n))}getDistanceFromCenterForValue(e){if(Ae(e))return NaN;const s=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*s:(e-this.min)*s}getValueForDistanceFromCenter(e){if(Ae(e))return NaN;const s=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-s:this.min+s}getPointLabelContext(e){const s=this._pointLabels||[];if(e>=0&&e<s.length){const n=s[e];return gN(this.getContext(),e,n)}}getPointPosition(e,s,n=0){const r=this.getIndexAngle(e)-Et+n;return{x:Math.cos(r)*s+this.xCenter,y:Math.sin(r)*s+this.yCenter,angle:r}}getPointPositionForValue(e,s){return this.getPointPosition(e,this.getDistanceFromCenterForValue(s))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:s,top:n,right:r,bottom:i}=this._pointLabelItems[e];return{left:s,top:n,right:r,bottom:i}}drawBackground(){const{backgroundColor:e,grid:{circular:s}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),kx(this,this.getDistanceFromCenterForValue(this._endValue),s,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,s=this.options,{angleLines:n,grid:r,border:i}=s,o=this._pointLabels.length;let l,c,d;if(s.pointLabels.display&&mN(this,o),r.display&&this.ticks.forEach((u,h)=>{if(h!==0||h===0&&this.min<0){c=this.getDistanceFromCenterForValue(u.value);const f=this.getContext(h),m=r.setContext(f),p=i.setContext(f);pN(this,m,c,o,p)}}),n.display){for(e.save(),l=o-1;l>=0;l--){const u=n.setContext(this.getPointLabelContext(l)),{color:h,lineWidth:f}=u;!f||!h||(e.lineWidth=f,e.strokeStyle=h,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,c=this.getDistanceFromCenterForValue(s.reverse?this.min:this.max),d=this.getPointPosition(l,c),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(d.x,d.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,s=this.options,n=s.ticks;if(!n.display)return;const r=this.getIndexAngle(0);let i,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((l,c)=>{if(c===0&&this.min>=0&&!s.reverse)return;const d=n.setContext(this.getContext(c)),u=Ze(d.font);if(i=this.getDistanceFromCenterForValue(this.ticks[c].value),d.showLabelBackdrop){e.font=u.string,o=e.measureText(l.label).width,e.fillStyle=d.backdropColor;const h=ht(d.backdropPadding);e.fillRect(-o/2-h.left,-i-u.size/2-h.top,o+h.width,u.size+h.height)}Mr(e,l.label,0,-i,u,{color:d.color,strokeColor:d.textStrokeColor,strokeWidth:d.textStrokeWidth})}),e.restore()}drawTitle(){}}me(hi,"id","radialLinear"),me(hi,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:K0.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),me(hi,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),me(hi,"descriptors",{angleLines:{_fallback:"grid"}});const bl={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},vt=Object.keys(bl);function Om(t,e){return t-e}function Rm(t,e){if(Ae(e))return null;const s=t._adapter,{parser:n,round:r,isoWeekday:i}=t._parseOpts;let o=e;return typeof n=="function"&&(o=n(o)),ot(o)||(o=typeof n=="string"?s.parse(o,n):s.parse(o)),o===null?null:(r&&(o=r==="week"&&(zo(i)||i===!0)?s.startOf(o,"isoWeek",i):s.startOf(o,r)),+o)}function Mm(t,e,s,n){const r=vt.length;for(let i=vt.indexOf(t);i<r-1;++i){const o=bl[vt[i]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((s-e)/(l*o.size))<=n)return vt[i]}return vt[r-1]}function xN(t,e,s,n,r){for(let i=vt.length-1;i>=vt.indexOf(s);i--){const o=vt[i];if(bl[o].common&&t._adapter.diff(r,n,o)>=e-1)return o}return vt[s?vt.indexOf(s):0]}function yN(t){for(let e=vt.indexOf(t)+1,s=vt.length;e<s;++e)if(bl[vt[e]].common)return vt[e]}function Lm(t,e,s){if(!s)t[e]=!0;else if(s.length){const{lo:n,hi:r}=Mu(s,e),i=s[n]>=e?s[n]:s[r];t[i]=!0}}function vN(t,e,s,n){const r=t._adapter,i=+r.startOf(e[0].value,n),o=e[e.length-1].value;let l,c;for(l=i;l<=o;l=+r.add(l,1,n))c=s[l],c>=0&&(e[c].major=!0);return e}function Dm(t,e,s){const n=[],r={},i=e.length;let o,l;for(o=0;o<i;++o)l=e[o],r[l]=o,n.push({value:l,major:!1});return i===0||!s?n:vN(t,n,r,s)}class Ho extends la{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,s={}){const n=e.time||(e.time={}),r=this._adapter=new i2._date(e.adapters.date);r.init(s),Ni(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=s.normalized}parse(e,s){return e===void 0?null:Rm(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,s=this._adapter,n=e.time.unit||"day";let{min:r,max:i,minDefined:o,maxDefined:l}=this.getUserBounds();function c(d){!o&&!isNaN(d.min)&&(r=Math.min(r,d.min)),!l&&!isNaN(d.max)&&(i=Math.max(i,d.max))}(!o||!l)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),r=ot(r)&&!isNaN(r)?r:+s.startOf(Date.now(),n),i=ot(i)&&!isNaN(i)?i:+s.endOf(Date.now(),n)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let s=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(s=e[0],n=e[e.length-1]),{min:s,max:n}}buildTicks(){const e=this.options,s=e.time,n=e.ticks,r=n.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,o=this.max,l=I1(r,i,o);return this._unit=s.unit||(n.autoSkip?Mm(s.minUnit,this.min,this.max,this._getLabelCapacity(i)):xN(this,l.length,s.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:yN(this._unit),this.initOffsets(r),e.reverse&&l.reverse(),Dm(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let s=0,n=0,r,i;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?s=1-r:s=(this.getDecimalForValue(e[1])-r)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?n=i:n=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;s=Ns(s,0,o),n=Ns(n,0,o),this._offsets={start:s,end:n,factor:1/(s+1+n)}}_generate(){const e=this._adapter,s=this.min,n=this.max,r=this.options,i=r.time,o=i.unit||Mm(i.minUnit,s,n,this._getLabelCapacity(s)),l=ye(r.ticks.stepSize,1),c=o==="week"?i.isoWeekday:!1,d=zo(c)||c===!0,u={};let h=s,f,m;if(d&&(h=+e.startOf(h,"isoWeek",c)),h=+e.startOf(h,d?"day":o),e.diff(n,s,o)>1e5*l)throw new Error(s+" and "+n+" are too far apart with stepSize of "+l+" "+o);const p=r.ticks.source==="data"&&this.getDataTimestamps();for(f=h,m=0;f<n;f=+e.add(f,l,o),m++)Lm(u,f,p);return(f===n||r.bounds==="ticks"||m===1)&&Lm(u,f,p),Object.keys(u).sort(Om).map(v=>+v)}getLabelForValue(e){const s=this._adapter,n=this.options.time;return n.tooltipFormat?s.format(e,n.tooltipFormat):s.format(e,n.displayFormats.datetime)}format(e,s){const r=this.options.time.displayFormats,i=this._unit,o=s||r[i];return this._adapter.format(e,o)}_tickFormatFunction(e,s,n,r){const i=this.options,o=i.ticks.callback;if(o)return Pe(o,[e,s,n],this);const l=i.time.displayFormats,c=this._unit,d=this._majorUnit,u=c&&l[c],h=d&&l[d],f=n[s],m=d&&h&&f&&f.major;return this._adapter.format(e,r||(m?h:u))}generateTickLabels(e){let s,n,r;for(s=0,n=e.length;s<n;++s)r=e[s],r.label=this._tickFormatFunction(r.value,s,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const s=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((s.start+n)*s.factor)}getValueForPixel(e){const s=this._offsets,n=this.getDecimalForPixel(e)/s.factor-s.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const s=this.options.ticks,n=this.ctx.measureText(e).width,r=An(this.isHorizontal()?s.maxRotation:s.minRotation),i=Math.cos(r),o=Math.sin(r),l=this._resolveTickFontOptions(0).size;return{w:n*i+l*o,h:n*o+l*i}}_getLabelCapacity(e){const s=this.options.time,n=s.displayFormats,r=n[s.unit]||n.millisecond,i=this._tickFormatFunction(e,0,Dm(this,[e],this._majorUnit),r),o=this._getLabelSize(i),l=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return l>0?l:1}getDataTimestamps(){let e=this._cache.data||[],s,n;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(s=0,n=r.length;s<n;++s)e=e.concat(r[s].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let s,n;if(e.length)return e;const r=this.getLabels();for(s=0,n=r.length;s<n;++s)e.push(Rm(this,r[s]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return $1(e.sort(Om))}}me(Ho,"id","time"),me(Ho,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Ua(t,e,s){let n=0,r=t.length-1,i,o,l,c;s?(e>=t[n].pos&&e<=t[r].pos&&({lo:n,hi:r}=yd(t,"pos",e)),{pos:i,time:l}=t[n],{pos:o,time:c}=t[r]):(e>=t[n].time&&e<=t[r].time&&({lo:n,hi:r}=yd(t,"time",e)),{time:i,pos:l}=t[n],{time:o,pos:c}=t[r]);const d=o-i;return d?l+(c-l)*(e-i)/d:l}class Bm extends Ho{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),s=this._table=this.buildLookupTable(e);this._minPos=Ua(s,this.min),this._tableRange=Ua(s,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:s,max:n}=this,r=[],i=[];let o,l,c,d,u;for(o=0,l=e.length;o<l;++o)d=e[o],d>=s&&d<=n&&r.push(d);if(r.length<2)return[{time:s,pos:0},{time:n,pos:1}];for(o=0,l=r.length;o<l;++o)u=r[o+1],c=r[o-1],d=r[o],Math.round((u+c)/2)!==d&&i.push({time:d,pos:o/(l-1)});return i}_generate(){const e=this.min,s=this.max;let n=super.getDataTimestamps();return(!n.includes(e)||!n.length)&&n.splice(0,0,e),(!n.includes(s)||n.length===1)&&n.push(s),n.sort((r,i)=>r-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const s=this.getDataTimestamps(),n=this.getLabelTimestamps();return s.length&&n.length?e=this.normalize(s.concat(n)):e=s.length?s:n,e=this._cache.all=e,e}getDecimalForValue(e){return(Ua(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const s=this._offsets,n=this.getDecimalForPixel(e)/s.factor-s.end;return Ua(this._table,n*this._tableRange+this._minPos,!0)}}me(Bm,"id","timeseries"),me(Bm,"defaults",Ho.defaults);const Nx="label";function Im(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function bN(t,e){const s=t.options;s&&e&&Object.assign(s,e)}function Sx(t,e){t.labels=e}function Cx(t,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Nx;const n=[];t.datasets=e.map(r=>{const i=t.datasets.find(o=>o[s]===r[s]);return!i||!r.data||n.includes(i)?{...r}:(n.push(i),Object.assign(i,r),i)})}function wN(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Nx;const s={labels:[],datasets:[]};return Sx(s,t.labels),Cx(s,t.datasets,e),s}function _N(t,e){const{height:s=150,width:n=300,redraw:r=!1,datasetIdKey:i,type:o,data:l,options:c,plugins:d=[],fallbackContent:u,updateMode:h,...f}=t,m=k.useRef(null),p=k.useRef(null),v=()=>{m.current&&(p.current=new yl(m.current,{type:o,data:wN(l,i),options:c&&{...c},plugins:d}),Im(e,p.current))},b=()=>{Im(e,null),p.current&&(p.current.destroy(),p.current=null)};return k.useEffect(()=>{!r&&p.current&&c&&bN(p.current,c)},[r,c]),k.useEffect(()=>{!r&&p.current&&Sx(p.current.config.data,l.labels)},[r,l.labels]),k.useEffect(()=>{!r&&p.current&&l.datasets&&Cx(p.current.config.data,l.datasets,i)},[r,l.datasets]),k.useEffect(()=>{p.current&&(r?(b(),setTimeout(v)):p.current.update(h))},[r,c,l.labels,l.datasets,h]),k.useEffect(()=>{p.current&&(b(),setTimeout(v))},[o]),k.useEffect(()=>(v(),()=>b()),[]),He.createElement("canvas",{ref:m,role:"img",height:s,width:n,...f},u)}const jN=k.forwardRef(_N);function kN(t,e){return yl.register(e),k.forwardRef((s,n)=>He.createElement(jN,{...s,ref:n,type:t}))}const NN=kN("radar",so);yl.register(hi,io,Ks,Uk,sN,Yk);const zm=["Spin Finish","Burst Finish","Over Finish","Extreme Finish"],uc={"Spin Finish":1,"Burst Finish":2,"Over Finish":2,"Extreme Finish":3};function SN({onBack:t}){const[e,s]=k.useState([]),[n,r]=k.useState(""),[i,o]=k.useState({}),[l,c]=k.useState(""),[d,u]=k.useState(!0),[h,f]=k.useState(!1),[m,p]=k.useState(!1),[v,b]=k.useState("player");k.useEffect(()=>{x()},[]),k.useEffect(()=>{n&&g()},[n]);const x=async()=>{try{const{data:C,error:R}=await K.from("tournaments").select("id, name, status, tournament_date").order("tournament_date",{ascending:!1});if(R)throw R;s(C||[]);const M=C==null?void 0:C.find(V=>V.status==="completed");M&&r(M.id)}catch(C){console.error("Error fetching tournaments:",C)}finally{u(!1)}},g=async()=>{f(!0),o({}),c("");try{const{data:C,error:R}=await K.from("match_results").select(`
          player1_name,
          player2_name,
          player1_beyblade,
          player2_beyblade,
          winner_name,
          outcome,
          points_awarded
        `).eq("tournament_id",n);if(R)throw R;if(!C||C.length===0){o({});return}const M={};C.forEach(V=>{const ie=V.player1_name,ce=V.player2_name,T=V.player1_beyblade,$=V.player2_beyblade,q=V.winner_name,L=(V.outcome||"").split(" (")[0].trim()||"Unknown",H=V.points_awarded||uc[L]||0;if(M[ie]||(M[ie]={name:ie,beys:[],matches:[],winFinishes:{},loseFinishes:{},beyStats:{},wins:0,losses:0,points:0}),M[ce]||(M[ce]={name:ce,beys:[],matches:[],winFinishes:{},loseFinishes:{},beyStats:{},wins:0,losses:0,points:0}),T&&!M[ie].beys.includes(T)&&M[ie].beys.push(T),$&&!M[ce].beys.includes($)&&M[ce].beys.push($),!q||!ie||!ce)return;const te=q===ie?ce:ie,Q=q===ie?T:$,O=q===ie?$:T;M[q].wins++,M[q].points+=H,M[q].winFinishes[L]=(M[q].winFinishes[L]||0)+1,M[q].matches.push({result:"win",bey:Q,outcome:L,opponent:te,opponentBey:O}),M[te].losses++,M[te].loseFinishes[L]=(M[te].loseFinishes[L]||0)+1,M[te].matches.push({result:"loss",bey:O,outcome:L,opponent:q,opponentBey:Q}),!(!Q||!O)&&(M[q].beyStats[Q]||(M[q].beyStats[Q]={win:0,loss:0,finishes:{},lossFinishes:{},points:0}),M[te].beyStats[O]||(M[te].beyStats[O]={win:0,loss:0,finishes:{},lossFinishes:{},points:0}),M[q].beyStats[Q].win++,M[q].beyStats[Q].points+=H,M[q].beyStats[Q].finishes[L]=(M[q].beyStats[Q].finishes[L]||0)+1,M[te].beyStats[O].loss++,M[te].beyStats[O].lossFinishes[L]=(M[te].beyStats[O].lossFinishes[L]||0)+1)}),o(M)}catch(C){console.error("Error fetching tournament data:",C),o({})}finally{f(!1)}},y=C=>Object.entries(C).reduce((R,[M,V])=>V>R[1]?[M,V]:R,["",-1])[0]||"N/A",w=C=>{let R="",M=-1;for(const ce of C.beys){const T=C.beyStats[ce]||{points:0,win:0};T.points>M&&(M=T.points,R=ce)}const V=C.beyStats[R],ie=V?`${V.win} wins, ${V.points} pts`:"No matches";return{bey:R||"N/A",reason:ie}},_=C=>({labels:zm,datasets:[{label:"Point Contribution",data:zm.map(R=>{const M=C[R]||0,V=uc[R]||0;return M*V}),backgroundColor:"rgba(33, 150, 243, 0.2)",borderColor:"#2196f3",pointBackgroundColor:"#2196f3",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"#2196f3"}]}),N={responsive:!0,maintainAspectRatio:!1,scales:{r:{suggestedMin:0,ticks:{stepSize:2},title:{display:!0,text:"Points"}}},plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(C){const R=C.label,M=C.raw,V=winFinishes[R]||0,ie=uc[R]||0;return`${R}: ${M} pts (${V}  ${ie})`}}}}},P=()=>{if(!l||!i[l])return null;const C=i[l],{bey:R,reason:M}=w(C),V=C.wins+C.losses,ie=V?(C.wins/V*100).toFixed(1):"0.0",ce=V?(C.points/V).toFixed(2):"0.00";return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("div",{className:"flex items-center mb-6",children:[a.jsx("div",{className:"w-16 h-16 bg-blue-500 rounded-full flex items-center justify-center text-white text-2xl font-bold mr-4",children:C.name.charAt(0).toUpperCase()}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:C.name}),a.jsx("p",{className:"text-gray-600",children:"Tournament Player"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Most Valuable Bey"}),a.jsx("p",{className:"text-lg font-semibold text-gray-900",children:R}),a.jsx("p",{className:"text-sm text-gray-500",children:M})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Most Common Finish (Win)"}),a.jsx("p",{className:"text-lg font-semibold text-green-600",children:y(C.winFinishes)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Most Common Finish (Loss)"}),a.jsx("p",{className:"text-lg font-semibold text-red-600",children:y(C.loseFinishes)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Win Rate"}),a.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[ie,"% (",C.wins," of ",V,")  ",ce," pts/match"]})]})]}),a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{style:{width:"300px",height:"300px"},children:a.jsx(NN,{data:_(C.winFinishes),options:N})})})]}),a.jsxs("div",{className:"flex justify-center space-x-4 mt-6",children:[a.jsx("button",{onClick:()=>p(!m),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:m?"Hide Advanced":"Show Advanced"}),a.jsxs("button",{onClick:()=>b("matches"),className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors flex items-center space-x-2",children:[a.jsx(Cu,{size:16}),a.jsx("span",{children:"Show All Matches"})]})]})]}),m&&a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"Advanced Statistics"}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Win by Finish"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Beyblade"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Spin"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Burst"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Over"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Extreme"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Wins"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Points"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:C.beys.map(T=>{const $=C.beyStats[T]||{finishes:{},win:0,points:0};return a.jsxs("tr",{className:"bg-green-50",children:[a.jsx("td",{className:"px-4 py-2 text-sm font-medium text-gray-900",children:T}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:$.finishes["Spin Finish"]||0}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:$.finishes["Burst Finish"]||0}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:$.finishes["Over Finish"]||0}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:$.finishes["Extreme Finish"]||0}),a.jsx("td",{className:"px-4 py-2 text-sm font-semibold text-gray-900",children:$.win}),a.jsx("td",{className:"px-4 py-2 text-sm font-semibold text-gray-900",children:$.points})]},T)})})]})})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Loss by Finish"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Beyblade"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Spin"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Burst"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Over"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Extreme"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Losses"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Points Given"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:C.beys.map(T=>{const $=C.beyStats[T]||{lossFinishes:{},loss:0},q=$.lossFinishes||{},U=(q["Spin Finish"]||0)*1+(q["Burst Finish"]||0)*2+(q["Over Finish"]||0)*2+(q["Extreme Finish"]||0)*3;return a.jsxs("tr",{className:"bg-red-50",children:[a.jsx("td",{className:"px-4 py-2 text-sm font-medium text-gray-900",children:T}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:q["Spin Finish"]||0}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:q["Burst Finish"]||0}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:q["Over Finish"]||0}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:q["Extreme Finish"]||0}),a.jsx("td",{className:"px-4 py-2 text-sm font-semibold text-gray-900",children:$.loss}),a.jsx("td",{className:"px-4 py-2 text-sm font-semibold text-gray-900",children:U})]},T)})})]})})]})]})]})]})},E=()=>{if(!l||!i[l])return null;const C=i[l];return a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:["All Matches for ",a.jsx("strong",{children:C.name})]}),a.jsxs("button",{onClick:()=>b("player"),className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700 transition-colors flex items-center space-x-2",children:[a.jsx(ml,{size:16}),a.jsx("span",{children:"Back to Player Stats"})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Result"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Your Bey"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Opponent"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Opponent's Bey"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Finish"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:C.matches.map((R,M)=>a.jsxs("tr",{className:R.result==="win"?"bg-green-50":"bg-red-50",children:[a.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm font-medium ${R.result==="win"?"text-green-800":"text-red-800"}`,children:R.result==="win"?"Win":"Loss"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:R.bey}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:R.opponent}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:R.opponentBey||"-"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:R.outcome})]},M))})]})})]})};return d?a.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading tournaments..."})]})}):h?a.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Player Performance Analysis"}),a.jsx("p",{className:"text-gray-600",children:"Analyze individual player statistics and performance"})]}),a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading player data..."})]})]}):a.jsx("div",{className:"page-container",children:a.jsxs("div",{className:"content-wrapper",children:[a.jsx("div",{className:"page-header",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"page-title",children:"Tournament Analytics"}),a.jsx("p",{className:"page-subtitle",children:"Comprehensive tournament and player statistics"})]}),a.jsxs("div",{className:"filter-tabs",children:[a.jsx("button",{onClick:()=>{t&&t()},className:"filter-tab filter-tab-inactive",children:"Overview"}),a.jsx("button",{onClick:()=>{t&&(t(),setTimeout(()=>{const C=new CustomEvent("navigateToMetaAnalysis");window.dispatchEvent(C)},50))},className:"filter-tab filter-tab-inactive",children:"Meta Analysis"}),a.jsx("button",{className:"filter-tab filter-tab-active",children:"Player Analytics"})]})]})}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Tournament Selection"}),a.jsxs("div",{className:"max-w-md",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Tournament"}),a.jsxs("select",{value:n,onChange:C=>r(C.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"-- Select Tournament --"}),e.map(C=>a.jsxs("option",{value:C.id,children:[C.name," (",C.status,")"]},C.id))]})]})]}),n&&a.jsxs(a.Fragment,{children:[Object.keys(i).length===0&&a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 mb-8",children:a.jsx("p",{className:"text-yellow-800",children:"No player data found for this tournament. Make sure there are completed matches with valid player names and Beyblade information."})}),Object.keys(i).length>0&&a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[a.jsx(A0,{className:"mr-2",size:24}),"Player Selection"]}),a.jsxs("div",{className:"max-w-md",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Player"}),a.jsxs("select",{value:l,onChange:C=>{c(C.target.value),b("player"),p(!1)},className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"-- Select Player --"}),Object.keys(i).sort().map(C=>a.jsx("option",{value:C,children:C},C))]})]})]}),l&&(v==="player"?P():E())]})]})})}function CN(){const[t,e]=He.useState("overview"),[s,n]=He.useState(!1);He.useEffect(()=>{const h=()=>{n(!0),e("meta"),setTimeout(()=>n(!1),50)},f=()=>{n(!0),e("player"),setTimeout(()=>n(!1),50)};return window.addEventListener("navigateToMetaAnalysis",h),window.addEventListener("navigateToPlayerAnalytics",f),()=>{window.removeEventListener("navigateToMetaAnalysis",h),window.removeEventListener("navigateToPlayerAnalytics",f)}},[]);const[r,i]=He.useState({totalTournaments:0,activePlayers:0,completedMatches:0,upcomingEvents:0,completedTournaments:[],activeTournaments:0,upcomingTournaments:0}),[o,l]=He.useState(!0);He.useEffect(()=>{(async()=>{try{const[f,m,p,v]=await Promise.all([K.from("tournaments").select("*"),K.from("profiles").select("*",{count:"exact",head:!0}),K.from("match_results").select("*"),K.from("tournament_registrations").select("*",{count:"exact",head:!0})]),b=f.data||[],x=p.data||[],g=b.filter(N=>N.status==="completed"),y=b.filter(N=>N.status==="active").length,w=b.filter(N=>N.status==="upcoming").length,_=x.length;i({totalTournaments:b.length,activePlayers:m.count||0,completedMatches:_,upcomingEvents:w,completedTournaments:g,activeTournaments:y,upcomingTournaments:w})}catch(f){console.error("Error fetching analytics:",f),i({totalTournaments:0,activePlayers:0,completedMatches:0,upcomingEvents:0,completedTournaments:[],activeTournaments:0,upcomingTournaments:0})}finally{l(!1)}})()},[]);const[c,d]=He.useState([]);He.useEffect(()=>{(async()=>{try{const{data:f}=await K.from("match_results").select("player1_name, player2_name, winner_name");if(!f)return;const m={};f.forEach(v=>{!v.player1_name||!v.player2_name||!v.winner_name||[v.player1_name,v.player2_name].forEach(b=>{m[b]||(m[b]={wins:0,matches:0}),m[b].matches++,v.winner_name===b&&m[b].wins++})});const p=Object.entries(m).map(([v,b])=>({player:v,wins:b.wins,matches:b.matches,winRate:Math.round(b.wins/b.matches*100)})).sort((v,b)=>b.winRate-v.winRate).slice(0,4);d(p)}catch(f){console.error("Error calculating win rates:",f),d([])}})()},[]);const u=[{icon:Zt,label:"Total Tournaments",value:r.totalTournaments,color:"text-blue-600",bgColor:"bg-blue-100"},{icon:on,label:"Active Players",value:r.activePlayers,color:"text-green-600",bgColor:"bg-green-100"},{icon:T0,label:"Completed Matches",value:r.completedMatches,color:"text-purple-600",bgColor:"bg-purple-100"},{icon:Fn,label:"Upcoming Events",value:r.upcomingEvents,color:"text-orange-600",bgColor:"bg-orange-100"}];return o?a.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading analytics..."})]})}):t==="meta"?a.jsx(X_,{onBack:()=>{n(!0),e("overview"),setTimeout(()=>n(!1),50)}}):t==="player"?a.jsx(SN,{onBack:()=>{n(!0),e("overview"),setTimeout(()=>n(!1),50)}}):s?a.jsx("div",{className:"page-container",children:a.jsx("div",{className:"content-wrapper",children:a.jsx("div",{className:"text-center py-12",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"})})})}):a.jsx("div",{className:"page-container",children:a.jsxs("div",{className:"content-wrapper",children:[a.jsx("div",{className:"page-header",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"page-title",children:"Tournament Analytics"}),a.jsx("p",{className:"page-subtitle",children:"Comprehensive tournament and player statistics"})]}),a.jsxs("div",{className:"filter-tabs",children:[a.jsx("button",{onClick:()=>e("overview"),className:`filter-tab ${t==="overview"?"filter-tab-active":"filter-tab-inactive"}`,children:"Overview"}),a.jsx("button",{onClick:()=>e("meta"),className:`filter-tab ${t==="meta"?"filter-tab-active":"filter-tab-inactive"}`,children:"Meta Analysis"}),a.jsx("button",{onClick:()=>e("player"),className:`filter-tab ${t==="player"?"filter-tab-active":"filter-tab-inactive"}`,children:"Player Analytics"})]})]})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:u.map((h,f)=>a.jsx("div",{className:"metric-card",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"metric-label",children:h.label}),a.jsx("p",{className:"metric-value",children:h.value})]}),a.jsx("div",{className:`p-3 rounded-lg ${h.bgColor} ${h.color}`,children:a.jsx(h.icon,{size:24})})]})},f))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"chart-container",children:[a.jsx("h2",{className:"chart-title",children:"Tournament Status"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-700 font-inter font-medium",children:"Completed"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-40 bg-gray-200 rounded-full h-3",children:a.jsx("div",{className:"bg-green-500 h-3 rounded-full",style:{width:`${r.totalTournaments>0?r.completedTournaments.length/r.totalTournaments*100:0}%`}})}),a.jsx("span",{className:"text-lg font-space-grotesk font-bold text-gray-900",children:r.completedTournaments.length})]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-700 font-inter font-medium",children:"Active"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-40 bg-gray-200 rounded-full h-3",children:a.jsx("div",{className:"bg-blue-500 h-3 rounded-full",style:{width:`${r.totalTournaments>0?r.activeTournaments/r.totalTournaments*100:0}%`}})}),a.jsx("span",{className:"text-lg font-space-grotesk font-bold text-gray-900",children:r.activeTournaments})]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-700 font-inter font-medium",children:"Upcoming"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-40 bg-gray-200 rounded-full h-3",children:a.jsx("div",{className:"bg-orange-500 h-3 rounded-full",style:{width:`${r.totalTournaments>0?r.upcomingTournaments/r.totalTournaments*100:0}%`}})}),a.jsx("span",{className:"text-lg font-space-grotesk font-bold text-gray-900",children:r.upcomingTournaments})]})]})]})]}),a.jsxs("div",{className:"chart-container",children:[a.jsx("h2",{className:"chart-title",children:"Top Player Win Rates"}),a.jsx("div",{className:"space-y-4",children:c.map((h,f)=>a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gray-900 rounded-full flex items-center justify-center text-white font-space-grotesk font-bold",children:f+1}),a.jsxs("div",{children:[a.jsx("p",{className:"font-space-grotesk font-bold text-gray-900",children:h.player}),a.jsxs("p",{className:"text-gray-600 font-inter",children:[h.wins,"/",h.matches," matches"]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"font-space-grotesk font-bold text-xl text-gray-900",children:[h.winRate,"%"]}),a.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-3",children:a.jsx("div",{className:"bg-green-500 h-3 rounded-full",style:{width:`${h.winRate}%`}})})]})]},h.player))})]})]}),a.jsxs("div",{className:"chart-container mt-8",children:[a.jsx("h2",{className:"chart-title",children:"Match Statistics"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"metric-value text-blue-600",children:r.completedMatches}),a.jsx("p",{className:"metric-label",children:"Completed Matches"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"metric-value text-orange-600",children:"0"}),a.jsx("p",{className:"metric-label",children:"Ongoing Matches"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"metric-value text-green-600",children:"0"}),a.jsx("p",{className:"metric-label",children:"Scheduled Matches"})]})]})]})]})})}const hc={"Over Finish (2 pts)":2,"Burst Finish (2 pts)":2,"Spin Finish (1 pt)":1,"Extreme Finish (3 pts)":3},PN=()=>{const{confirm:t,alert:e}=Kn(),[s,n]=k.useState([]),[r,i]=k.useState(""),[o,l]=k.useState({}),[c,d]=k.useState({}),[u,h]=k.useState(!0),[f,m]=k.useState(!1),[p,v]=k.useState(""),[b,x]=k.useState(""),[g,y]=k.useState(1),[w,_]=k.useState(""),[N,P]=k.useState({}),[E,C]=k.useState(0),[R,M]=k.useState(0),[V,ie]=k.useState(2),[ce,T]=k.useState(!1),[$,q]=k.useState(!1),[U,L]=k.useState(!1),[H,te]=k.useState(""),[Q,O]=k.useState({}),[X,ne]=k.useState(null);k.useEffect(()=>{ae()},[]),k.useEffect(()=>{r&&B(r)},[r]);const ae=async()=>{try{const{data:z,error:G}=await K.from("tournaments").select("id, name, status, tournament_date, location, beyblades_per_player").order("tournament_date",{ascending:!1});if(G)throw G;n(z||[]);const ee=z==null?void 0:z.find(de=>de.status==="active");ee&&i(ee.id)}catch(z){console.error("Error fetching tournaments:",z)}finally{h(!1)}},B=async z=>{m(!0);try{const{data:G,error:ee}=await K.from("tournament_registrations").select(`
          player_name,
          tournament_beyblades(
            beyblade_name,
            blade_line
          )
        `).eq("tournament_id",z).eq("status","confirmed").order("player_name",{ascending:!0});if(ee)throw ee;const de={},Me={};G==null||G.forEach(Ne=>{const Se=Ne.player_name,lt=Ne.tournament_beyblades.map(Lt=>Lt.beyblade_name),We=Ne.tournament_beyblades.map(Lt=>({name:Lt.beyblade_name,blade_line:Lt.blade_line}));lt.length>0&&(de[Se]=lt,Me[Se]=We)}),l(de),d(Me),F()}catch(G){console.error("Error fetching player data:",G),l({})}finally{m(!1)}},F=()=>{v(""),x(""),y(1),_(""),P({}),C(0),M(0),ie(2),T(!1),O({}),d({}),te("")},I=(z,G)=>{z===1?(v(G),G===b&&x("")):(x(G),G===p&&v("")),G&&(P({}),C(0),M(0),ie(2),T(!1),O({}))},le=(z,G)=>{var Se,lt,We;const ee=(he==null?void 0:he.beyblades_per_player)||3,de=Math.floor(G/ee)+1,Me=G%ee;if(de===1)return((Se=o[z])==null?void 0:Se[Me])||"";const Ne=(lt=Q[de])==null?void 0:lt[z];return Ne?Ne[Me]||"":((We=o[z])==null?void 0:We[Me])||""},j=(z,G)=>{var Se,lt,We,Lt,gn,ct;const ee=(he==null?void 0:he.beyblades_per_player)||3,de=Math.floor(G/ee)+1,Me=G%ee;if(de===1)return((lt=(Se=c[z])==null?void 0:Se[Me])==null?void 0:lt.blade_line)||"";const Ne=(We=Q[de])==null?void 0:We[z];if(Ne){const fs=Ne[Me],qt=(Lt=c[z])==null?void 0:Lt.find(Px=>Px.name===fs);return(qt==null?void 0:qt.blade_line)||""}return((ct=(gn=c[z])==null?void 0:gn[Me])==null?void 0:ct.blade_line)||""},S=()=>{if(ce){e("Phase Required",`Click Shuffle before adding the next match (after every ${(he==null?void 0:he.beyblades_per_player)||3} matches).`);return}if(!p||!b){e("Missing Players","Please select both players first.");return}let z=0;for(;N[z]!==void 0;)z++;const G={...N,[z]:{outcome:null,winner:null,points:0}};P(G);const ee=(he==null?void 0:he.beyblades_per_player)||3,de=Object.keys(G).length;de>0&&de%ee===0&&T(!0)},D=(z,G)=>{const ee={...N};if(ee[z]){ee[z].outcome=G;const de=G&&ee[z].winner&&hc[G]||0;ee[z].points=de}P(ee),Z(ee)},oe=(z,G)=>{const ee={...N};if(ee[z]){ee[z].winner=G;const de=ee[z].outcome&&G&&hc[ee[z].outcome]||0;ee[z].points=de}P(ee),Z(ee)},Z=z=>{let G=0,ee=0;Object.values(z).forEach(de=>{de.winner&&de.outcome&&de.points>0&&(de.winner===p?G+=de.points:de.winner===b&&(ee+=de.points))}),C(G),M(ee)},pe=z=>{const G={...N};delete G[z],P(G),Z(G),T(!1)},ke=()=>{const z=V,G={...Q};G[z]||(G[z]={[p]:[...o[p]||[]],[b]:[...o[b]||[]]}),O(G),ie(ee=>ee+1),T(!1)},A=(z,G,ee)=>{O(de=>({...de,[z]:{...de[z],[G]:ee}}))},J=(z,G)=>{ne(G),z.dataTransfer.effectAllowed="move"},Y=z=>{z.preventDefault(),z.dataTransfer.dropEffect="move"},re=(z,G,ee,de)=>{var lt;if(z.preventDefault(),!X)return;const Me=((lt=Q[G])==null?void 0:lt[ee])||[],Ne=Me.indexOf(X);if(Ne===-1)return;const Se=[...Me];Se.splice(Ne,1),Se.splice(de,0,X),A(G,ee,Se),ne(null)},we=()=>{ne(null)},Ue=async()=>{if(!w.trim()){e("Please enter the Tournament Officer name before submitting.");return}const z=Object.entries(N).filter(([G,ee])=>ee.outcome&&ee.winner);if(z.length===0){e("No complete matches to submit.");return}L(!0),te("Submitting matches...");try{const G=z.map(([Me,Ne])=>{const Se=parseInt(Me);return{tournament_id:r,round_number:g,player1_name:p,player2_name:b,player1_beyblade:le(p,Se),player2_beyblade:le(b,Se),player1_blade_line:j(p,Se),player2_blade_line:j(b,Se),outcome:Ne.outcome,winner_name:Ne.winner,points_awarded:Ne.points,match_number:Se+1,phase_number:Math.floor(Se/3)+1,tournament_officer:w}}),{error:ee}=await K.from("match_results").insert(G);if(ee)throw ee;const{error:de}=await K.from("match_sessions").insert({tournament_id:r,round_number:g,player1_name:p,player2_name:b,player1_final_score:E,player2_final_score:R,winner_name:E>R?p:b,total_matches:z.length,tournament_officer:w,match_summary:z.map(([Me,Ne])=>{const Se=parseInt(Me),lt=le(Ne.winner,Se),We=(he==null?void 0:he.beyblades_per_player)||3,Lt=Math.floor(Se/We)+1,gn=Se%We+1;return`Phase ${Lt}, Match ${gn}: ${Ne.outcome} by ${Ne.winner} using ${lt}`}).join("; "),phases:Object.keys(Q).length+1,deck_orders:Q});if(de)throw de;te(" Matches submitted successfully!"),q(!1),setTimeout(()=>{F(),te("")},2e3)}catch(G){console.error("Error submitting matches:",G),te(" Failed to submit matches. Please try again.")}finally{L(!1)}},Ht=()=>Object.entries(N).filter(([G,ee])=>ee.outcome&&ee.winner).map(([G,ee])=>{const de=parseInt(G),Me=le(ee.winner,de);return`Match ${de+1}: ${ee.outcome} by ${ee.winner} using ${Me}`}),he=s.find(z=>z.id===r),Vt=Object.keys(o),Rs=Vt.filter(z=>z!==b),pn=Vt.filter(z=>z!==p);return u?a.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading tournaments..."})]})}):a.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"OBC Match Tracker"}),a.jsx("p",{className:"text-gray-600",children:"Track tournament matches in real-time"})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Tournament Selection"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Tournament"}),a.jsxs("select",{value:r,onChange:z=>i(z.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"-- Select Tournament --"}),s.map(z=>a.jsxs("option",{value:z.id,children:[z.name," (",z.status,")"]},z.id))]})]}),he&&a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:he.name}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Status: ",a.jsx("span",{className:`capitalize ${he.status==="active"?"text-green-600":he.status==="upcoming"?"text-blue-600":"text-gray-600"}`,children:he.status})]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Date: ",new Date(he.tournament_date).toLocaleDateString()]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Location: ",he.location]})]})]})]}),r&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Match Setup"}),f?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading player data..."})]}):Object.keys(o).length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(on,{size:48,className:"mx-auto text-gray-400 mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No confirmed registrations found for this tournament"})]}):a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Round #"}),a.jsx("input",{type:"number",min:"1",value:g,onChange:z=>y(parseInt(z.target.value)||1),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Player 1"}),a.jsxs("select",{value:p,onChange:z=>I(1,z.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"-- Select Player 1 --"}),Rs.map(z=>a.jsx("option",{value:z,children:z},z))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Player 2"}),a.jsxs("select",{value:b,onChange:z=>I(2,z.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"-- Select Player 2 --"}),pn.map(z=>a.jsx("option",{value:z,children:z},z))]})]})]})]}),p&&b&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"bg-white border border-gray-200 rounded-lg shadow-md p-4 mb-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto flex justify-between items-center",children:[a.jsx("div",{children:a.jsx("input",{type:"text",placeholder:"Tournament Officer",value:w,onChange:z=>_(z.target.value),className:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})}),a.jsxs("div",{className:"text-lg font-bold",children:[a.jsxs("span",{className:`${E>R?"text-green-600":E<R?"text-red-600":"text-gray-600"}`,children:[p,": ",E]}),a.jsx("span",{className:"mx-4 text-gray-400",children:"|"}),a.jsxs("span",{className:`${R>E?"text-green-600":R<E?"text-red-600":"text-gray-600"}`,children:[b,": ",R]})]})]})}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:["Phase 1 Decks (",(he==null?void 0:he.beyblades_per_player)||3," Beyblades)"]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b",children:[a.jsx("th",{className:"text-left py-2"}),a.jsx("th",{className:"text-left py-2 font-semibold",children:p}),a.jsx("th",{className:"text-left py-2 font-semibold",children:b})]})}),a.jsx("tbody",{children:Array.from({length:(he==null?void 0:he.beyblades_per_player)||3},(z,G)=>{var ee,de;return a.jsxs("tr",{className:"border-b",children:[a.jsxs("td",{className:"py-2 font-medium",children:["Bey ",G+1]}),a.jsx("td",{className:"py-2",children:((ee=o[p])==null?void 0:ee[G])||""}),a.jsx("td",{className:"py-2",children:((de=o[b])==null?void 0:de[G])||""})]},G)})})]})})]}),a.jsx("div",{className:"space-y-4 mb-6",children:Object.entries(N).map(([z,G])=>{var Lt,gn;const ee=parseInt(z),de=le(p,ee),Me=le(b,ee),Ne=ee+1,Se=(he==null?void 0:he.beyblades_per_player)||3,lt=Ne%Se===0&&Ne>0,We=Math.floor(Ne/Se)+1;return a.jsxs("div",{children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("h3",{className:"text-lg font-bold",children:["Match ",Ne,": ",de," vs ",Me]}),a.jsx("button",{onClick:()=>pe(ee),className:"text-red-600 hover:bg-red-50 p-1 rounded",children:a.jsx(hs,{size:16})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold mb-2",children:"Outcome:"}),a.jsx("div",{className:"space-y-2",children:Object.keys(hc).map(ct=>a.jsx("button",{onClick:()=>D(ee,ct),className:`w-full text-left px-3 py-2 rounded border transition-colors ${G.outcome===ct?"bg-blue-100 border-blue-300 text-blue-700":"bg-gray-50 border-gray-200 hover:bg-gray-100"}`,children:ct},ct))})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold mb-2",children:"Winner:"}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("button",{onClick:()=>oe(ee,p),className:`w-full text-left px-3 py-2 rounded border transition-colors ${G.winner===p?"bg-green-100 border-green-300 text-green-700":"bg-gray-50 border-gray-200 hover:bg-gray-100"}`,children:p}),a.jsx("button",{onClick:()=>oe(ee,b),className:`w-full text-left px-3 py-2 rounded border transition-colors ${G.winner===b?"bg-green-100 border-green-300 text-green-700":"bg-gray-50 border-gray-200 hover:bg-gray-100"}`,children:b})]})]})]})]}),lt&&We>1&&Q[We]&&a.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg shadow-md p-6 mt-4 border-2 border-purple-200",children:[a.jsxs("h3",{className:"text-lg font-bold text-purple-900 mb-4 flex items-center",children:[a.jsx(yf,{className:"mr-2",size:20}),"Phase ",We," Decks - Drag to Reorder"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold mb-3 text-purple-800",children:p}),a.jsx("div",{className:"space-y-2",children:(Lt=Q[We][p])==null?void 0:Lt.map((ct,fs)=>a.jsxs("div",{draggable:!0,onDragStart:qt=>J(qt,ct),onDragOver:Y,onDrop:qt=>re(qt,We,p,fs),onDragEnd:we,className:`bg-white p-3 rounded border-2 cursor-move transition-all duration-200 flex items-center ${X===ct?"border-purple-400 shadow-lg opacity-50":"border-gray-200 hover:border-purple-300 hover:shadow-md"}`,children:[a.jsx(xf,{size:16,className:"text-gray-400 mr-2"}),a.jsxs("span",{className:"font-medium text-gray-700",children:[fs+1,"."]}),a.jsx("span",{className:"ml-2",children:ct})]},`${We}-${p}-${fs}`))})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold mb-3 text-purple-800",children:b}),a.jsx("div",{className:"space-y-2",children:(gn=Q[We][b])==null?void 0:gn.map((ct,fs)=>a.jsxs("div",{draggable:!0,onDragStart:qt=>J(qt,ct),onDragOver:Y,onDrop:qt=>re(qt,We,b,fs),onDragEnd:we,className:`bg-white p-3 rounded border-2 cursor-move transition-all duration-200 flex items-center ${X===ct?"border-purple-400 shadow-lg opacity-50":"border-gray-200 hover:border-purple-300 hover:shadow-md"}`,children:[a.jsx(xf,{size:16,className:"text-gray-400 mr-2"}),a.jsxs("span",{className:"font-medium text-gray-700",children:[fs+1,"."]}),a.jsx("span",{className:"ml-2",children:ct})]},`${We}-${b}-${fs}`))})]})]})]})]},z)})}),a.jsxs("div",{className:"flex justify-center space-x-4 mb-6",children:[a.jsxs("button",{onClick:ce?ke:S,className:"bg-blue-600 text-white px-6 py-3 rounded-md hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[a.jsx(Mn,{size:20}),a.jsx("span",{children:ce?"Shuffle":"Add Match"})]}),a.jsxs("button",{onClick:()=>q(!0),disabled:Object.values(N).every(z=>!z.outcome||!z.winner),className:"bg-green-600 text-white px-6 py-3 rounded-md hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[a.jsx(z_,{size:20}),a.jsx("span",{children:"Submit Scores"})]}),a.jsxs("button",{onClick:F,className:"bg-gray-600 text-white px-6 py-3 rounded-md hover:bg-gray-700 transition-colors flex items-center space-x-2",children:[a.jsx(yf,{size:20}),a.jsx("span",{children:"Refresh"})]})]}),H&&a.jsx("div",{className:"text-center py-4",children:a.jsx("p",{className:`font-semibold ${H.includes("")?"text-green-600":H.includes("")?"text-red-600":"text-blue-600"}`,children:H})})]})]}),$&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Match Summary"}),a.jsx("button",{onClick:()=>q(!1),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:a.jsx(Pt,{size:24})})]}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Final Scores"}),a.jsxs("p",{className:"text-xl",children:[a.jsxs("strong",{children:[p,":"]})," ",E," pts | ",a.jsxs("strong",{children:[b,":"]})," ",R," pts"]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Match Results"}),a.jsx("div",{className:"space-y-2",children:Ht().map((z,G)=>a.jsx("p",{className:"text-gray-700",dangerouslySetInnerHTML:{__html:z}},G))})]}),a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx("button",{onClick:()=>q(!1),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsxs("button",{onClick:Ue,disabled:U,className:"px-6 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors disabled:opacity-50 flex items-center space-x-2",children:[U&&a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"Confirm Submit"})]})]})]})]})})]})};function EN(){var I,le;const{user:t}=ns(),[e,s]=k.useState([]),[n,r]=k.useState(!1),[i,o]=k.useState(null),[l,c]=k.useState({}),[d,u]=k.useState(null),[h,f]=k.useState([]),[m,p]=k.useState(!1),[v,b]=k.useState(!0),[x,g]=k.useState(null),[y,w]=k.useState([]),[_,N]=k.useState(!1),[P,E]=k.useState(null),[C,R]=k.useState({});k.useState(!1),k.useState([]),k.useState(!1);const M=(t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="developer";He.useEffect(()=>{T()},[]);const V=async j=>{p(!0);try{const{data:S,error:D}=await K.from("tournament_registration_details").select("*").eq("tournament_id",j).order("registered_at",{ascending:!1});if(D)throw D;const oe={};S==null||S.forEach(Z=>{oe[Z.registration_id]||(oe[Z.registration_id]={registration_id:Z.registration_id,tournament_id:Z.tournament_id,player_name:Z.player_name,payment_mode:Z.payment_mode,registered_at:Z.registered_at,status:Z.status,payment_status:Z.payment_status,beyblades:[]}),Z.beyblade_id&&(oe[Z.registration_id].beyblades.find(ke=>ke.beyblade_id===Z.beyblade_id)||oe[Z.registration_id].beyblades.push({beyblade_id:Z.beyblade_id,beyblade_name:Z.beyblade_name,blade_line:Z.blade_line,parts:Z.beyblade_parts||[]}))}),f(Object.values(oe))}catch(S){console.error("Error fetching registrations:",S),f([])}finally{p(!1)}},ie=async(j,S)=>{try{console.log("Updating payment status:",{registrationId:j,newStatus:S});const{error:D}=await K.from("tournament_registrations").update({payment_status:S}).eq("id",j);if(D)throw console.error("Payment status update error:",D),D.code==="42501"||D.message.includes("RLS")?alert("Permission denied. You need admin or developer role to update payment status."):alert(`Failed to update payment status: ${D.message}`),D;console.log("Payment status updated successfully"),await T(),alert("Payment status updated successfully!")}catch(D){console.error("Error updating payment status:",D)}},ce=(j,S)=>S==="Custom"?["Lockchip","Main Blade","Assist Blade","Ratchet","Bit"].map(oe=>j.find(Z=>Z.part_type===oe)).filter(Boolean):["Blade","Ratchet","Bit"].map(oe=>j.find(Z=>Z.part_type===oe)).filter(Boolean),T=async()=>{try{const{data:j,error:S}=await K.from("tournaments").select("*").order("tournament_date",{ascending:!1});if(S)throw S;const D=await Promise.all((j||[]).map(async oe=>{const{count:Z}=await K.from("tournament_registrations").select("*",{count:"exact",head:!0}).eq("tournament_id",oe.id).eq("status","confirmed");return{...oe,current_participants:Z||0}}));s(D)}catch(j){console.error("Error fetching tournaments:",j)}finally{b(!1)}},$=()=>{r(!0),c({name:"",description:"",tournament_date:"",location:"",max_participants:16,has_participant_limit:!0,status:"upcoming",registration_deadline:"",prize_pool:"",beyblades_per_player:3,players_per_team:1,is_free:!0,entry_fee:0,tournament_type:"casual"})},q=j=>{o(j.id),c(j)},U=async()=>{try{if(n){const{error:j}=await K.from("tournaments").insert([l]);if(j){console.error("Insert error:",j),j.code==="42501"||j.message.includes("RLS")?alert("Permission denied. You need admin or developer role to create tournaments."):alert(`Failed to create tournament: ${j.message}`);return}}else if(i){const{error:j}=await K.from("tournaments").update(l).eq("id",i);if(j){console.error("Update error:",j),j.code==="42501"||j.message.includes("RLS")||j.code==="42883"?alert("Permission denied. You need admin or developer role to edit tournaments."):alert(`Failed to update tournament: ${j.message}`);return}}await T(),r(!1),o(null),c({})}catch(j){console.error("Error saving tournament:",j),alert(`Failed to save tournament: ${j instanceof Error?j.message:"Unknown error"}. Please try again.`)}},L=()=>{r(!1),o(null),c({})},H=async j=>{if(confirm("Are you sure you want to delete this tournament? This will permanently delete ALL related data including registrations, beyblades, parts, matches, and sessions. This action cannot be undone."))try{const{error:S}=await K.from("tournaments").delete().eq("id",j);if(S){console.error("Delete error:",S),S.code==="42501"||S.message.includes("RLS")||S.message.includes("permission")?alert("Permission denied. You need admin or developer role to delete tournaments."):alert(`Failed to delete tournament: ${S.message}`);return}alert("Tournament deleted successfully!"),await T()}catch(S){console.error("Error deleting tournament:",S),alert(`Failed to delete tournament: ${S instanceof Error?S.message:"Unknown error"}. Please try again.`)}},te=async j=>{N(!0),g(j);try{const{data:S,error:D}=await K.from("match_results").select("*").eq("tournament_id",j).order("submitted_at",{ascending:!1});if(D)throw D;w(S||[])}catch(S){console.error("Error fetching matches:",S),alert("Failed to load matches. Please try again.")}finally{N(!1)}},Q=j=>{E(j.id),R({...j})},O=async()=>{if(!(!P||!M))try{const{error:j}=await K.from("match_results").update(C).eq("id",P);if(j){console.error("Update error:",j),alert(`Failed to update match: ${j.message}`);return}E(null),R({}),await te(x),alert("Match updated successfully!")}catch(j){console.error("Error updating match:",j),alert(`Failed to update match: ${j instanceof Error?j.message:"Unknown error"}`)}},X=()=>{E(null),R({})},ne=async j=>{if(confirm("Are you sure you want to delete this match? This action cannot be undone."))try{const{error:S}=await K.from("match_results").delete().eq("id",j);if(S){console.error("Delete error:",S),alert(`Failed to delete match: ${S.message}`);return}alert("Match deleted successfully!"),await te(x)}catch(S){console.error("Error deleting match:",S),alert(`Failed to delete match: ${S instanceof Error?S.message:"Unknown error"}`)}},ae=j=>{switch(j){case"upcoming":return"bg-blue-100 text-blue-800";case"active":return"bg-green-100 text-green-800";case"completed":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},B=j=>{u(j),V(j)},F=()=>{u(null),f([])};if(v)return a.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading tournaments..."})]})});if(d){const j=e.find(S=>S.id===d);return a.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("button",{onClick:F,className:"flex items-center space-x-2 text-blue-600 hover:text-blue-800 font-medium transition-colors mb-4",children:[a.jsx(ml,{size:20}),a.jsx("span",{children:"Back to Tournament Manager"})]}),a.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:[j==null?void 0:j.name," - Registrations"]}),a.jsx("p",{className:"text-gray-600",children:"Manage tournament registrations and payment status"})]}),m?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading registrations..."})]}):h.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(on,{size:48,className:"mx-auto text-gray-400 mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No registrations found for this tournament"})]}):a.jsx("div",{className:"space-y-6",children:h.map(S=>a.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white font-bold",children:S.player_name.charAt(0).toUpperCase()}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-lg text-gray-900",children:S.player_name}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Registered: ",new Date(S.registered_at).toLocaleDateString()]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Payment Mode:"}),a.jsx("p",{className:"font-medium capitalize",children:S.payment_mode==="free"?"Free":S.payment_mode.replace("_"," ").replace(/\b\w/g,D=>D.toUpperCase())||"N/A"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Status:"}),a.jsx("p",{className:"font-medium capitalize",children:S.status})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Payment Status"}),a.jsxs("select",{value:S.payment_status||"unpaid",onChange:D=>ie(S.registration_id,D.target.value),className:"text-xs border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-1 focus:ring-blue-500 bg-white",children:[a.jsx("option",{value:"unpaid",children:"Unpaid"}),a.jsx("option",{value:"paid",children:"Paid"}),a.jsx("option",{value:"confirmed",children:"Confirmed"})]})]}),a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${S.payment_status==="confirmed"?"bg-green-100 text-green-800":S.payment_status==="paid"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:S.payment_status||"unpaid"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h4",{className:"font-semibold text-gray-900 flex items-center",children:[a.jsx(Zt,{size:16,className:"mr-2 text-yellow-500"}),"Registered Beyblades (",S.beyblades.length,")"]}),S.beyblades.length===0?a.jsx("p",{className:"text-gray-500 text-sm italic",children:"No Beyblades registered"}):a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:S.beyblades.map((D,oe)=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[a.jsxs("div",{className:"flex justify-between items-center mb-3",children:[a.jsx("h5",{className:"font-semibold text-gray-900",children:D.beyblade_name}),a.jsxs("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:[D.blade_line," Line"]})]}),D.parts&&D.parts.length>0?a.jsx("div",{className:"grid grid-cols-2 gap-2",children:ce(D.parts,D.blade_line).map((Z,pe)=>a.jsxs("div",{className:"bg-white border border-gray-300 p-2 rounded text-xs",children:[a.jsx("div",{className:"font-medium text-gray-700",children:Z.part_type}),a.jsx("div",{className:"text-gray-600",children:Z.part_name})]},pe))}):a.jsx("p",{className:"text-gray-500 text-xs",children:"No parts configured"})]},D.beyblade_id))})]})]},S.registration_id))})]})}return a.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[a.jsxs("div",{className:"flex justify-between items-center mb-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Tournament Manager"}),a.jsx("p",{className:"text-gray-600",children:"Create and manage tournaments"})]}),a.jsx("div",{className:"flex space-x-3",children:M&&a.jsxs("button",{onClick:$,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[a.jsx(Mn,{size:20}),a.jsx("span",{children:"Create Tournament"})]})})]}),(n||i)&&a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:n?"Create New Tournament":"Edit Tournament"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tournament Name"}),a.jsx("input",{type:"text",value:l.name||"",onChange:j=>c({...l,name:j.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),a.jsx("input",{type:"text",value:l.location||"",onChange:j=>c({...l,location:j.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tournament Date"}),a.jsx("input",{type:"date",value:l.tournament_date||"",onChange:j=>c({...l,tournament_date:j.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Registration Deadline"}),a.jsx("input",{type:"date",value:l.registration_deadline||"",onChange:j=>c({...l,registration_deadline:j.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Participant Limit"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",checked:l.has_participant_limit,onChange:()=>c({...l,has_participant_limit:!0}),className:"mr-2"}),a.jsx("span",{className:"text-sm text-gray-700",children:"Set participant limit"})]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",checked:!l.has_participant_limit,onChange:()=>c({...l,has_participant_limit:!1}),className:"mr-2"}),a.jsx("span",{className:"text-sm text-gray-700",children:"No limit"})]})]}),l.has_participant_limit&&a.jsx("input",{type:"number",min:"1",value:l.max_participants,onChange:j=>c({...l,max_participants:parseInt(j.target.value)||1}),placeholder:"Maximum participants",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prize Pool"}),a.jsx("input",{type:"text",value:l.prize_pool||"",onChange:j=>c({...l,prize_pool:j.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., $500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tournament Type"}),a.jsxs("select",{value:l.tournament_type||"casual",onChange:j=>c({...l,tournament_type:j.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"casual",children:"Casual"}),a.jsx("option",{value:"ranked",children:"Ranked"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Entry Type"}),a.jsxs("select",{value:l.is_free?"free":"paid",onChange:j=>{const S=j.target.value==="free";c({...l,is_free:S,entry_fee:S?0:l.entry_fee||50})},className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"free",children:"Free Entry"}),a.jsx("option",{value:"paid",children:"Paid Entry"})]})]}),!l.is_free&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Entry Fee"}),a.jsx("input",{type:"number",step:"0.01",min:"0",value:l.entry_fee||"",onChange:j=>c({...l,entry_fee:parseFloat(j.target.value)||0}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Beyblades per Player"}),a.jsx("input",{type:"number",min:"1",max:"5",value:l.beyblades_per_player||3,onChange:j=>c({...l,beyblades_per_player:parseInt(j.target.value)}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Players per Team"}),a.jsx("input",{type:"number",min:"1",max:"4",value:l.players_per_team||1,onChange:j=>c({...l,players_per_team:parseInt(j.target.value)}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),a.jsx("textarea",{value:l.description||"",onChange:j=>c({...l,description:j.target.value}),rows:3,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),!n&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),a.jsxs("select",{value:l.status||"",onChange:j=>c({...l,status:j.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"upcoming",children:"Upcoming"}),a.jsx("option",{value:"active",children:"Active"}),a.jsx("option",{value:"completed",children:"Completed"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tournament Type"}),a.jsxs("select",{value:l.tournament_type||"casual",onChange:j=>c({...l,tournament_type:j.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"casual",children:"Casual"}),a.jsx("option",{value:"ranked",children:"Ranked"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Entry Type"}),a.jsxs("select",{value:l.is_free?"free":"paid",onChange:j=>{const S=j.target.value==="free";c({...l,is_free:S,entry_fee:S?0:l.entry_fee||50})},className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"free",children:"Free Entry"}),a.jsx("option",{value:"paid",children:"Paid Entry"})]})]}),!l.is_free&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Entry Fee ()"}),a.jsx("input",{type:"number",step:"0.01",min:"0",value:l.entry_fee||"",onChange:j=>c({...l,entry_fee:parseFloat(j.target.value)||0}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"50.00"})]})]})]}),a.jsxs("div",{className:"flex space-x-3 mt-6",children:[a.jsxs("button",{onClick:U,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[a.jsx(Or,{size:16}),a.jsx("span",{children:"Save"})]}),a.jsxs("button",{onClick:L,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors flex items-center space-x-2",children:[a.jsx(Pt,{size:16}),a.jsx("span",{children:"Cancel"})]})]})]}),a.jsx("div",{className:"space-y-4",children:e.map(j=>a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900",children:j.name}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium capitalize ${ae(j.status)}`,children:j.status})]}),a.jsx("p",{className:"text-gray-600 mb-2",children:j.description}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-gray-600",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Date:"})," ",new Date(j.tournament_date).toLocaleDateString()]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Location:"})," ",j.location]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Participants:"})," ",j.current_participants,"/",j.max_participants===999999?"":j.max_participants]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Prize Pool:"})," ",j.prize_pool]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Type:"}),a.jsx("span",{className:`ml-1 capitalize ${j.tournament_type==="ranked"?"text-orange-600 font-semibold":"text-gray-600"}`,children:j.tournament_type})]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Entry:"}),a.jsx("span",{className:`ml-1 ${j.is_free?"text-green-600":"text-blue-600"} font-semibold`,children:j.is_free?"Free":`${j.entry_fee}`})]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Beyblades/Player:"})," ",j.beyblades_per_player]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Players/Team:"})," ",j.players_per_team]})]})]}),a.jsxs("div",{className:"flex space-x-2",children:[M&&a.jsx("button",{onClick:()=>q(j),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-md transition-colors",title:"Edit Tournament",children:a.jsx(Un,{size:16})}),a.jsx("button",{onClick:()=>B(j.id),className:"p-2 text-green-600 hover:bg-green-50 rounded-md transition-colors",title:"View Registrations",children:a.jsx(Cu,{size:16})}),a.jsx("button",{onClick:()=>te(j.id),className:"p-2 text-purple-600 hover:bg-purple-50 rounded-md transition-colors",title:"View Matches",children:a.jsx(vf,{size:16})}),M&&a.jsx("button",{onClick:()=>H(j.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-md transition-colors",title:"Delete Tournament",children:a.jsx(hs,{size:16})})]})]}),a.jsx("div",{className:"border-t pt-4",children:a.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[a.jsxs("span",{children:["Registration Deadline: ",new Date(j.registration_deadline).toLocaleDateString()]}),a.jsxs("span",{children:["Tournament ID: ",j.id]})]})})]},j.id))}),d&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Tournament Registrations"}),a.jsx("p",{className:"text-gray-600",children:(I=e.find(j=>j.id===d))==null?void 0:I.name})]}),a.jsx("button",{onClick:()=>u(null),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:a.jsx(Pt,{size:24})})]}),a.jsx("div",{className:"p-6",children:m?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading registrations..."})]}):h.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(on,{size:48,className:"mx-auto text-gray-400 mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No registrations yet for this tournament"})]}):a.jsx("div",{className:"space-y-6",children:h.map(j=>a.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg p-6 shadow-sm",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900",children:j.player_name}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Registered: ",new Date(j.registered_at).toLocaleString()]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Payment: ",a.jsx("span",{className:"capitalize",children:j.payment_mode.replace("_"," ")})]})]}),a.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${j.status==="confirmed"?"bg-green-100 text-green-800":j.status==="cancelled"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:j.status})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"font-semibold text-gray-900",children:"Registered Beyblades:"}),j.beyblades.map(S=>a.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("h5",{className:"font-medium text-gray-900",children:S.beyblade_name}),a.jsxs("span",{className:"text-sm text-gray-600 bg-white px-2 py-1 rounded",children:[S.blade_line," Line"]})]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-2 text-sm",children:S.parts.map((D,oe)=>a.jsxs("div",{className:"bg-white border border-gray-300 p-2 rounded",children:[a.jsx("div",{className:"font-medium text-gray-700",children:D.part_type}),a.jsx("div",{className:"text-gray-600",children:D.part_name})]},oe))})]},S.beyblade_id))]})]},j.registration_id))})})]})}),x&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-7xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Tournament Matches"}),a.jsx("p",{className:"text-gray-600",children:(le=e.find(j=>j.id===x))==null?void 0:le.name})]}),a.jsx("button",{onClick:()=>{g(null),E(null),R({})},className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:a.jsx(Pt,{size:24})})]}),a.jsx("div",{className:"p-6",children:_?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading matches..."})]}):y.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(vf,{size:48,className:"mx-auto text-gray-400 mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No matches found for this tournament"})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Round"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Match #"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Player 1"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Player 1 Bey"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Player 2"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Player 2 Bey"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Winner"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Outcome"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Points"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Officer"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),M&&a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:y.map(j=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:P===j.id?a.jsx("input",{type:"number",value:C.round_number||"",onChange:S=>R({...C,round_number:parseInt(S.target.value)}),className:"w-16 border border-gray-300 rounded px-2 py-1 text-sm"}):j.round_number}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:P===j.id?a.jsx("input",{type:"number",value:C.match_number||"",onChange:S=>R({...C,match_number:parseInt(S.target.value)}),className:"w-16 border border-gray-300 rounded px-2 py-1 text-sm"}):j.match_number}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:P===j.id?a.jsx("input",{type:"text",value:C.player1_name||"",onChange:S=>R({...C,player1_name:S.target.value}),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm"}):j.player1_name}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:P===j.id?a.jsx("input",{type:"text",value:C.player1_beyblade||"",onChange:S=>R({...C,player1_beyblade:S.target.value}),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm"}):j.player1_beyblade}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:P===j.id?a.jsx("input",{type:"text",value:C.player2_name||"",onChange:S=>R({...C,player2_name:S.target.value}),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm"}):j.player2_name}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:P===j.id?a.jsx("input",{type:"text",value:C.player2_beyblade||"",onChange:S=>R({...C,player2_beyblade:S.target.value}),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm"}):j.player2_beyblade}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:P===j.id?a.jsxs("select",{value:C.winner_name||"",onChange:S=>R({...C,winner_name:S.target.value}),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm",children:[a.jsx("option",{value:"",children:"Select Winner"}),a.jsx("option",{value:C.player1_name,children:C.player1_name}),a.jsx("option",{value:C.player2_name,children:C.player2_name})]}):a.jsx("span",{className:`font-medium ${j.winner_name===j.player1_name?"text-green-600":"text-blue-600"}`,children:j.winner_name})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:P===j.id?a.jsxs("select",{value:C.outcome||"",onChange:S=>R({...C,outcome:S.target.value}),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm",children:[a.jsx("option",{value:"",children:"Select Outcome"}),a.jsx("option",{value:"Spin Finish (1 pt)",children:"Spin Finish (1 pt)"}),a.jsx("option",{value:"Burst Finish (2 pts)",children:"Burst Finish (2 pts)"}),a.jsx("option",{value:"Over Finish (2 pts)",children:"Over Finish (2 pts)"}),a.jsx("option",{value:"Extreme Finish (3 pts)",children:"Extreme Finish (3 pts)"})]}):j.outcome}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:P===j.id?a.jsx("input",{type:"number",value:C.points_awarded||"",onChange:S=>R({...C,points_awarded:parseInt(S.target.value)}),className:"w-16 border border-gray-300 rounded px-2 py-1 text-sm"}):j.points_awarded}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:P===j.id?a.jsx("input",{type:"text",value:C.tournament_officer||"",onChange:S=>R({...C,tournament_officer:S.target.value}),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm"}):j.tournament_officer}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Fn,{size:12,className:"mr-1"}),new Date(j.created_at).toLocaleDateString()]})}),M&&a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.jsx("div",{className:"flex space-x-2",children:P===j.id?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:O,className:"text-green-600 hover:text-green-900 p-1 rounded hover:bg-green-50",title:"Save Changes",children:a.jsx(Or,{size:16})}),a.jsx("button",{onClick:X,className:"text-gray-600 hover:text-gray-900 p-1 rounded hover:bg-gray-50",title:"Cancel",children:a.jsx(Pt,{size:16})})]}):a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>Q(j),className:"text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-50",title:"Edit Match",children:a.jsx(Un,{size:16})}),a.jsx("button",{onClick:()=>ne(j.id),className:"text-red-600 hover:text-red-900 p-1 rounded hover:bg-red-50",title:"Delete Match",children:a.jsx(hs,{size:16})})]})})})]},j.id))})]})})})]})})]})}function TN(){const{user:t}=ns(),{confirm:e,alert:s}=Kn(),[n,r]=k.useState([]),[i,o]=k.useState("all"),[l,c]=k.useState("all"),[d,u]=k.useState(!0),h=(t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="developer";He.useEffect(()=>{f()},[]);const f=async()=>{try{console.log(" USER MANAGEMENT: Fetching profiles...");const{data:g,error:y}=await K.from("profiles").select("*").order("created_at",{ascending:!1});if(y)throw console.error(" USER MANAGEMENT: Error fetching profiles:",y),y;console.log(" USER MANAGEMENT: Raw profiles data:",{count:(g==null?void 0:g.length)||0,sample:(g==null?void 0:g.slice(0,3))||[],allProfiles:g||[]});const w=(g||[]).map(_=>({id:_.id,username:_.username,email:_.email||"",role:_.role,joinedDate:_.created_at,status:"active",lastLogin:null}));console.log(" USER MANAGEMENT: Formatted profiles as users:",{count:w.length,sample:w.slice(0,3),roles:w.map(_=>_.role),statuses:w.map(_=>_.status)}),r(w),console.log(" USER MANAGEMENT: Profiles loaded successfully as users")}catch(g){console.error("Error fetching profiles:",g)}finally{u(!1)}},m=n.filter(g=>{const y=i==="all"||g.status===i,w=l==="all"||g.role===l;return y&&w}),p=async(g,y)=>{try{const{error:w}=await K.from("profiles").update(y).eq("id",g);if(w){const _=w.code==="42501"||w.message.includes("RLS")?"Permission denied. You need admin or developer role to update users.":`Failed to update user: ${w.message}`;await s("Update Failed",_);return}await f()}catch(w){console.error("Error updating user:",w),await s("Update Failed",`Failed to update user: ${w instanceof Error?w.message:"Unknown error"}`)}},v=async g=>{if(await e("Delete User","Are you sure you want to delete this user? This will also delete all their registrations and data. This action cannot be undone."))try{const{data:w,error:_}=await K.rpc("delete_user_completely",{user_id_to_delete:g});if(_){console.error("Delete error:",_),_.code==="42501"||_.message.includes("RLS")?await s("Permission Denied","You need admin or developer role to delete users."):_.message.includes("cannot delete themselves")?await s("Cannot Delete","You cannot delete your own account."):await s("Delete Failed",`Failed to delete user: ${_.message}`);return}await s("Success","User deleted successfully!"),await f()}catch(w){console.error("Error deleting user:",w),await s("Delete Failed",`Failed to delete user: ${w instanceof Error?w.message:"Unknown error"}. Please try again.`)}},b=g=>{switch(g){case"active":return"bg-green-100 text-green-800";case"suspended":return"bg-red-100 text-red-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},x=g=>{switch(g){case"admin":return"bg-red-100 text-red-800";case"developer":return"bg-purple-100 text-purple-800";case"technical_officer":return"bg-blue-100 text-blue-800";case"user":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return d?a.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading users..."})]})}):a.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"User Management"}),a.jsx("p",{className:"text-gray-600",children:"Manage user accounts and permissions"})]}),a.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Status"}),a.jsxs("select",{value:i,onChange:g=>o(g.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"active",children:"Active"}),a.jsx("option",{value:"suspended",children:"Suspended"}),a.jsx("option",{value:"pending",children:"Pending"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Role"}),a.jsxs("select",{value:l,onChange:g=>c(g.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"all",children:"All Roles"}),a.jsx("option",{value:"user",children:"User"}),a.jsx("option",{value:"technical_officer",children:"Technical Officer"}),a.jsx("option",{value:"admin",children:"Admin"}),a.jsx("option",{value:"developer",children:"Developer"})]})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[a.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 rounded-lg bg-blue-100 text-blue-600",children:a.jsx(on,{size:24})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.length})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 rounded-lg bg-green-100 text-green-600",children:a.jsx(ki,{size:24})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Users"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.length})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 rounded-lg bg-red-100 text-red-600",children:a.jsx(ki,{size:24})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Suspended"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"0"})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 rounded-lg bg-purple-100 text-purple-600",children:a.jsx(ki,{size:24})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Admins"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.filter(g=>g.role==="admin"||g.role==="developer").length})]})]})})]}),a.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Joined"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Login"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m.map(g=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold",children:g.username.charAt(0).toUpperCase()}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:g.username}),a.jsxs("div",{className:"text-sm text-gray-500 flex items-center",children:[a.jsx(R_,{size:12,className:"mr-1"}),g.email]})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("select",{value:g.role,onChange:y=>p(g.id,{role:y.target.value}),disabled:!h,className:`text-xs font-medium px-2 py-1 rounded-full border-0 ${x(g.role)}`,children:[a.jsx("option",{value:"user",children:"User"}),a.jsx("option",{value:"technical_officer",children:"Technical Officer"}),a.jsx("option",{value:"admin",children:"Admin"}),a.jsx("option",{value:"developer",children:"Developer"})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("select",{value:"active",disabled:!h,className:`text-xs font-medium px-2 py-1 rounded-full border-0 ${b("active")}`,children:a.jsx("option",{value:"active",children:"Active"})})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Fn,{size:12,className:"mr-1"}),new Date(g.joinedDate).toLocaleDateString()]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:"Never"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.jsx("div",{className:"flex space-x-2",children:h&&a.jsxs(a.Fragment,{children:[a.jsx("button",{className:"text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-50",children:a.jsx(Un,{size:16})}),a.jsx("button",{onClick:()=>v(g.id),className:"text-red-600 hover:text-red-900 p-1 rounded hover:bg-red-50",children:a.jsx(hs,{size:16})})]})})})]},g.id))})]})})})]})}function AN(){var I,le,j;const{user:t}=ns(),{confirm:e,alert:s}=Kn(),[n,r]=k.useState("tournaments"),[i,o]=k.useState(null),[l,c]=k.useState(!1),[d,u]=k.useState([]),[h,f]=k.useState(!1),[m,p]=k.useState(null),[v,b]=k.useState([]),[x,g]=k.useState(null),[y,w]=k.useState({}),[_,N]=k.useState(null),[P,E]=k.useState([]),[C,R]=k.useState(""),[M,V]=k.useState(1),[ie]=k.useState(10);He.useEffect(()=>{o(null),N(null),g(null),w({}),R(""),V(1)},[n]);const ce=(t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="developer",T=async()=>{try{console.log(" DATABASE: Fetching table counts...");const[S,D,oe,Z]=await Promise.all([K.from("profiles").select("*",{count:"exact",head:!0}),K.from("tournaments").select("*",{count:"exact",head:!0}),K.from("match_results").select("*",{count:"exact",head:!0}),K.from("tournament_registrations").select("*",{count:"exact",head:!0})]);b([{name:"users",records:S.count||0,icon:a.jsx(on,{size:20}),description:"User accounts and profiles",color:"from-blue-500 to-blue-600"},{name:"tournaments",records:D.count||0,icon:a.jsx(Zt,{size:20}),description:"Tournament information",color:"from-yellow-500 to-orange-500"},{name:"matches",records:oe.count||0,icon:a.jsx(Fn,{size:20}),description:"Match results and schedules",color:"from-green-500 to-emerald-500"},{name:"registrations",records:Z.count||0,icon:a.jsx(F_,{size:20}),description:"Tournament registrations with Beyblades",color:"from-purple-500 to-violet-500"}]);const{data:pe}=await K.from("tournaments").select("id, name").order("name");E(pe||[]),console.log(" DATABASE: Table counts loaded successfully")}catch(S){console.error("Error fetching table counts:",S)}},$=async(S,D)=>{f(!0),p(null),console.log(" DATABASE: Fetching table data for:",{tableName:S,tournamentId:D});try{let oe=[];if(S==="registrations"&&D){const{data:Z,error:pe}=await K.from("tournament_registration_details").select("*").eq("tournament_id",D).order("registered_at",{ascending:!1});if(pe)throw pe;const ke={};Z==null||Z.forEach(A=>{var J;ke[A.registration_id]||(ke[A.registration_id]={registration_id:A.registration_id,tournament_id:A.tournament_id,tournament_name:((J=P.find(Y=>Y.id===A.tournament_id))==null?void 0:J.name)||"Unknown Tournament",player_name:A.player_name,payment_mode:A.payment_mode,registered_at:A.registered_at,status:A.status,beyblades:[]}),A.beyblade_id&&(ke[A.registration_id].beyblades.find(re=>re.beyblade_id===A.beyblade_id)||ke[A.registration_id].beyblades.push({beyblade_id:A.beyblade_id,beyblade_name:A.beyblade_name,blade_line:A.blade_line,parts:A.beyblade_parts||[]}))}),oe=Object.values(ke)}else if(S==="registrations"&&!D)oe=P;else{let Z=S;S==="registrations"?Z="tournament_registrations":S==="users"?Z="profiles":S==="matches"&&(Z="match_results");const{data:pe,error:ke}=await K.from(Z).select("*").order(S==="tournaments"?"tournament_date":S==="matches"?"submitted_at":"created_at",{ascending:!1});if(ke)throw console.error(` DATABASE: Error fetching ${S}:`,ke),ke;oe=pe||[]}(S!=="registrations"||D)&&oe.sort((Z,pe)=>{const ke=Object.values(Z).find(J=>typeof J=="string")||"",A=Object.values(pe).find(J=>typeof J=="string")||"";return ke.localeCompare(A)}),u(oe),console.log(` DATABASE: Table data loaded for ${S}:`,{finalCount:oe.length,hasData:oe.length>0})}catch(oe){console.error("Error fetching table data:",oe),p(`Failed to load ${S} data. Please try again.`)}finally{f(!1)}},q=async()=>{c(!0),await Promise.all([T(),$(n,i||void 0)]),c(!1)},U=S=>{const D=JSON.stringify(d,null,2),oe=new Blob([D],{type:"application/json"}),Z=URL.createObjectURL(oe),pe=document.createElement("a");pe.href=Z,pe.download=`${S}_export_${new Date().toISOString().split("T")[0]}.json`,pe.click(),URL.revokeObjectURL(Z)},L=S=>{g(S.id||S.registration_id||S.tournament_id),w({...S})},H=async()=>{if(!(!x||!ce))try{let S=n;n==="registrations"?S="tournament_registrations":n==="users"?S="profiles":n==="matches"&&(S="match_results");const{error:D}=await K.from(S).update(y).eq("id",x);if(D){console.error("Update error:",D),D.code==="42501"||D.message.includes("RLS")?await s("Permission Denied","You need admin or developer role to edit records."):await s("Update Failed",`Failed to update record: ${D.message}`);return}g(null),w({}),await $(n)}catch(S){console.error("Error updating row:",S),await s("Update Failed",`Failed to update record: ${S instanceof Error?S.message:"Unknown error"}. Please try again.`)}},te=async S=>{if(await e("Delete Record","Are you sure you want to delete this record? This action cannot be undone."))try{let oe=n;n==="registrations"?oe="tournament_registrations":n==="users"?oe="profiles":n==="matches"&&(oe="match_results");const{error:Z}=await K.from(oe).delete().eq("id",S);if(Z){console.error("Delete error:",Z),Z.code==="42501"||Z.message.includes("RLS")?s("Permission denied. You need admin or developer role to delete records."):s(`Failed to delete record: ${Z.message}`);return}await Promise.all([T(),$(n,i||void 0)])}catch(oe){console.error("Error deleting row:",oe),await s("Delete Failed",`Failed to delete record: ${oe instanceof Error?oe.message:"Unknown error"}. Please try again.`)}},Q=S=>{o(S),$("registrations",S)},O=()=>{o(null),$("registrations")},X=S=>{N(S)};k.useEffect(()=>{T()},[]),k.useEffect(()=>{n==="registrations"&&o(null),$(n)},[n]);const ne=d.filter(S=>C?Object.values(S).filter(oe=>typeof oe=="string").join(" ").toLowerCase().includes(C.toLowerCase()):!0),ae=Math.ceil(ne.length/ie),B=ne.slice((M-1)*ie,M*ie),F=()=>{var S;return h?a.jsx("div",{className:"flex items-center justify-center py-16",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-500 border-t-transparent mx-auto mb-4"}),a.jsxs("p",{className:"text-gray-600 font-medium",children:["Loading ",n==="registrations"&&i?"registration":n," data..."]})]})}):m?a.jsx("div",{className:"flex items-center justify-center py-16",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx("span",{className:"text-red-500 text-2xl",children:""})}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Error Loading Data"}),a.jsx("p",{className:"text-red-600 mb-4",children:m}),a.jsx("button",{onClick:()=>$(n,i||void 0),className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"Try Again"})]})}):d.length===0?a.jsx("div",{className:"flex items-center justify-center py-16",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(to,{size:32,className:"text-gray-400"})}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Data Available"}),a.jsxs("p",{className:"text-gray-500",children:["No data available for ",n==="registrations"&&i?"this tournament":n]})]})}):n==="registrations"&&!i?a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-500 to-violet-500 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(Zt,{size:32,className:"text-white"})}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Select Tournament"}),a.jsx("p",{className:"text-gray-600",children:"Choose a tournament to view its registrations and participant details"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.map(D=>a.jsxs("button",{onClick:()=>Q(D.id),className:"group text-left p-6 bg-white border-2 border-gray-200 rounded-xl hover:border-purple-300 hover:shadow-lg transition-all duration-200 transform hover:-translate-y-1",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h4",{className:"font-semibold text-gray-900 group-hover:text-purple-700 transition-colors",children:D.name}),a.jsx(N0,{size:20,className:"text-gray-400 group-hover:text-purple-500 transition-colors"})]}),a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:D.location}),a.jsx("p",{className:"text-sm text-gray-500",children:new Date(D.tournament_date).toLocaleDateString()}),a.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:a.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${D.status==="upcoming"?"bg-blue-100 text-blue-800":D.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:D.status})})]},D.id))})]}):n==="registrations"&&i?a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("button",{onClick:O,className:"flex items-center space-x-2 text-purple-600 hover:text-purple-800 font-medium transition-colors",children:[a.jsx(ml,{size:20}),a.jsx("span",{children:"Back to Tournaments"})]}),a.jsxs("h3",{className:"text-xl font-semibold text-gray-900",children:[((S=P.find(D=>D.id===i))==null?void 0:S.name)||"Tournament"," Registrations"]})]}),a.jsx("div",{className:"space-y-4",children:d.map(D=>{var oe;return a.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 hover:shadow-md transition-all duration-200",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white font-bold",children:D.player_name.charAt(0).toUpperCase()}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-lg text-gray-900",children:D.player_name}),a.jsx("p",{className:"text-sm text-gray-600",children:D.tournament_name})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Registered:"}),a.jsx("p",{className:"font-medium",children:new Date(D.registered_at).toLocaleDateString()})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Payment:"}),a.jsx("p",{className:"font-medium capitalize",children:((oe=D.payment_mode)==null?void 0:oe.replace("_"," "))||"N/A"})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${D.status==="confirmed"?"bg-green-100 text-green-800":D.status==="cancelled"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:D.status}),a.jsxs("div",{className:"flex space-x-1",children:[a.jsx("button",{onClick:()=>X(D),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"View Details",children:a.jsx(Cu,{size:16})}),ce&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>L(D),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Edit",children:a.jsx(Un,{size:16})}),a.jsx("button",{onClick:()=>te(D.registration_id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:a.jsx(hs,{size:16})})]})]})]})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Beyblades:"}),a.jsxs("span",{className:"text-sm text-gray-600",children:[D.beyblades.length," registered"]})]}),a.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:D.beyblades.length>0?D.beyblades.map((Z,pe)=>a.jsx("span",{className:"inline-block bg-white px-3 py-1 rounded-full text-xs font-medium text-gray-700 border",children:Z.beyblade_name},pe)):a.jsx("span",{className:"text-sm text-gray-500 italic",children:"No Beyblades registered"})})]})]},D.registration_id)})})]}):a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-6 space-y-4 sm:space-y-0",children:[a.jsxs("div",{className:"relative",children:[a.jsx(C0,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:`Search ${n}...`,value:C,onChange:D=>{R(D.target.value),V(1)},className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 w-64"})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("span",{className:"text-sm text-gray-600",children:["Showing ",B.length," of ",ne.length," records"]}),ae>1&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>V(Math.max(1,M-1)),disabled:M===1,className:"px-3 py-1 border border-gray-300 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors",children:"Previous"}),a.jsxs("span",{className:"text-sm text-gray-600",children:["Page ",M," of ",ae]}),a.jsx("button",{onClick:()=>V(Math.min(ae,M+1)),disabled:M===ae,className:"px-3 py-1 border border-gray-300 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors",children:"Next"})]})]})]}),a.jsx("div",{className:"bg-white border border-gray-200 rounded-xl overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[B.length>0&&B[0]&&Object.keys(B[0]).map(D=>a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:D.replace(/_/g," ")},D)),ce&&a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:B.map((D,oe)=>a.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[Object.entries(D).map(([Z,pe],ke)=>a.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:x===(D.id||D.registration_id||D.tournament_id)&&ce?a.jsx("input",{type:"text",value:y[Z]||"",onChange:A=>w({...y,[Z]:A.target.value}),className:"w-full border border-gray-300 rounded-md px-2 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}):a.jsx("div",{className:"max-w-xs",children:typeof pe=="object"&&pe!==null?a.jsx("div",{className:"bg-gray-100 rounded-md px-2 py-1 text-xs font-mono",children:JSON.stringify(pe).length>50?JSON.stringify(pe).substring(0,50)+"...":JSON.stringify(pe)}):pe instanceof Date?pe.toLocaleString():a.jsx("span",{className:Z.includes("email")?"font-mono text-blue-600":"",children:String(pe||"")})})},ke)),ce&&a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"flex items-center space-x-2",children:x===(D.id||D.registration_id||D.tournament_id)?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:H,className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Save Changes",children:a.jsx(Or,{size:16})}),a.jsx("button",{onClick:()=>{g(null),w({})},className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",title:"Cancel",children:a.jsx(Pt,{size:16})})]}):a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>L(D),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit Record",children:a.jsx(Un,{size:16})}),a.jsx("button",{onClick:()=>te(D.id||D.registration_id||D.tournament_id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete Record",children:a.jsx(hs,{size:16})})]})})})]},D.id||oe))})]})})})]})};return a.jsx("div",{className:"page-container",children:a.jsxs("div",{className:"content-wrapper",children:[a.jsx("div",{className:"page-header",children:a.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center space-y-4 lg:space-y-0",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"page-title flex items-center",children:[a.jsx(to,{size:32,className:"mr-3 text-blue-600"}),"Database Management"]}),a.jsx("p",{className:"page-subtitle",children:"Monitor and manage application data from Supabase"})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("button",{onClick:q,disabled:l,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2 disabled:opacity-50",children:[a.jsx(I_,{size:16,className:l?"animate-spin":""}),a.jsx("span",{children:"Refresh"})]}),a.jsxs("button",{onClick:()=>U(n),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2",children:[a.jsx(P_,{size:16}),a.jsx("span",{children:"Export"})]})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-4 gap-8",children:[a.jsxs("div",{className:"xl:col-span-1",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[a.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 px-6 py-4 border-b border-gray-200",children:a.jsxs("h2",{className:"text-lg font-bold text-gray-900 flex items-center",children:[a.jsx(to,{size:20,className:"mr-2 text-gray-700"}),"Database Tables"]})}),a.jsx("div",{className:"p-4 space-y-2",children:v.map(S=>a.jsxs("button",{onClick:()=>r(S.name),className:`w-full text-left p-4 rounded-xl transition-all duration-200 group ${n===S.name?"bg-gradient-to-r "+S.color+" text-white shadow-lg transform scale-105":"hover:bg-gray-50 border border-gray-200"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:`p-2 rounded-lg ${n===S.name?"bg-white/20":"bg-gray-100 group-hover:bg-gray-200"} transition-colors`,children:He.cloneElement(S.icon,{className:n===S.name?"text-white":"text-gray-600"})}),a.jsx("span",{className:`font-semibold capitalize ${n===S.name?"text-white":"text-gray-900"}`,children:S.name})]}),a.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-bold ${n===S.name?"bg-white/20 text-white":"bg-gray-100 text-gray-600"}`,children:S.records})]}),a.jsx("p",{className:`text-xs ${n===S.name?"text-white/80":"text-gray-600"}`,children:S.description})]},S.name))})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 mt-6 overflow-hidden",children:[a.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 px-6 py-4 border-b border-gray-200",children:a.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center",children:[a.jsx(Mo,{size:20,className:"mr-2 text-gray-700"}),"Database Stats"]})}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-600 font-medium",children:"Total Records"}),a.jsx("span",{className:"text-2xl font-bold text-gray-900",children:v.reduce((S,D)=>S+D.records,0)})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-600 font-medium",children:"Active Tables"}),a.jsx("span",{className:"text-2xl font-bold text-gray-900",children:v.length})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-600 font-medium",children:"Database"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),a.jsx("span",{className:"text-green-600 font-bold",children:"Supabase"})]})]}),a.jsx("div",{className:"pt-4 border-t border-gray-100",children:a.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["Last updated: ",new Date().toLocaleTimeString()]})})]})]})]}),a.jsx("div",{className:"xl:col-span-3",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[a.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 px-6 py-4 border-b border-gray-200",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-900 capitalize flex items-center",children:[((I=v.find(S=>S.name===n))==null?void 0:I.icon)&&He.cloneElement(v.find(S=>S.name===n).icon,{className:"mr-2 text-gray-700",size:24}),n==="registrations"&&i?`${((le=P.find(S=>S.id===i))==null?void 0:le.name)||"Tournament"} Registrations`:n==="registrations"?"Tournament Selection":`${n} Management`]}),a.jsx("p",{className:"text-gray-600 mt-1",children:(j=v.find(S=>S.name===n))==null?void 0:j.description})]}),a.jsx("div",{className:"flex items-center space-x-2",children:a.jsx("span",{className:"text-sm text-gray-500 bg-gray-100 px-3 py-1 rounded-full",children:n==="registrations"&&!i?`${P.length} tournaments`:`${ne.length} records`})})]})}),F()]})})]}),_&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-5xl w-full max-h-[90vh] overflow-hidden",children:[a.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-violet-500 px-6 py-4 text-white",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Registration Details"}),a.jsx("p",{className:"text-purple-100",children:_.player_name})]}),a.jsx("button",{onClick:()=>N(null),className:"p-2 hover:bg-white/20 rounded-full transition-colors",children:a.jsx(Pt,{size:24})})]})}),a.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-80px)]",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Player Name"}),a.jsx("p",{className:"text-xl font-bold text-gray-900",children:_.player_name})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Tournament"}),a.jsx("p",{className:"text-lg text-gray-900",children:_.tournament_name})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Payment Mode"}),a.jsx("span",{className:"inline-block bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium capitalize",children:_.payment_mode.replace("_"," ")})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Status"}),a.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-sm font-medium ${_.status==="confirmed"?"bg-green-100 text-green-800":_.status==="cancelled"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:_.status})]})]})]}),a.jsx("div",{className:"bg-gray-50 rounded-xl p-4 mb-8",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Fn,{size:16,className:"text-gray-600"}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Registered on:"}),a.jsx("span",{className:"text-sm text-gray-900 font-semibold",children:new Date(_.registered_at).toLocaleString()})]})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h3",{className:"text-xl font-bold text-gray-900 flex items-center",children:[a.jsx(Zt,{size:24,className:"mr-2 text-yellow-500"}),"Registered Beyblades"]}),a.jsxs("span",{className:"bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm font-medium",children:[_.beyblades.length," Beyblades"]})]}),_.beyblades.length===0?a.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-xl",children:[a.jsx(Zt,{size:48,className:"mx-auto text-gray-400 mb-4"}),a.jsx("p",{className:"text-gray-500 font-medium",children:"No Beyblades registered"})]}):a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:_.beyblades.map((S,D)=>a.jsxs("div",{className:"border-2 border-gray-200 rounded-xl p-6 hover:border-purple-300 transition-colors",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-lg text-gray-900",children:S.beyblade_name}),a.jsxs("span",{className:"inline-block bg-gradient-to-r from-blue-500 to-purple-500 text-white px-3 py-1 rounded-full text-sm font-medium mt-2",children:[S.blade_line," Line"]})]}),a.jsx("div",{className:"text-right",children:a.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full flex items-center justify-center text-white font-bold text-lg",children:D+1})})]}),S.parts.length>0?a.jsxs("div",{className:"space-y-3",children:[a.jsx("h5",{className:"font-semibold text-gray-700 text-sm uppercase tracking-wide",children:"Parts Configuration"}),a.jsx("div",{className:"grid grid-cols-1 gap-2",children:S.parts.map((oe,Z)=>a.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3 flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-gray-900 text-sm",children:oe.part_type}),a.jsx("div",{className:"text-gray-600 text-xs",children:oe.part_name})]}),a.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-blue-600 text-xs font-bold",children:Z+1})})]},Z))})]}):a.jsx("div",{className:"text-center py-4 bg-gray-50 rounded-lg",children:a.jsx("p",{className:"text-gray-500 text-sm",children:"No parts configured"})})]},S.beyblade_id))})]})]})]})})]})})}function ON({showHeader:t=!0}){const{user:e}=ns(),{confirm:s,alert:n}=Kn();if(!e||e.id.startsWith("guest-"))return a.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Deck Builder"}),a.jsx("p",{className:"text-gray-600",children:"Create and save Beyblade deck presets"})]}),a.jsxs("div",{className:"text-center py-12",children:[a.jsx(sn,{size:64,className:"mx-auto text-gray-400 mb-6"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Advanced Deck Builder"}),a.jsx("p",{className:"text-gray-600 mb-8 max-w-2xl mx-auto",children:"Create powerful Beyblade combinations from your inventory. Build multiple deck presets, analyze stats, and save your favorite combinations for quick tournament registration."}),a.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-xl p-8 max-w-md mx-auto mb-8",children:[a.jsx("div",{className:"flex items-center justify-center mb-6",children:a.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-600 rounded-full flex items-center justify-center text-white text-2xl font-bold shadow-lg",children:""})}),a.jsx("h3",{className:"text-xl font-bold text-purple-900 mb-3",children:"Login to Start Building"}),a.jsx("p",{className:"text-purple-800 text-sm mb-6",children:"Create a free account to access the advanced deck builder and save your custom combinations!"}),a.jsxs("div",{className:"space-y-2 text-sm text-purple-700",children:[a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full mr-2"}),"Build from your inventory"]}),a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full mr-2"}),"Save unlimited deck presets"]}),a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full mr-2"}),"Analyze combined stats"]})]})]}),a.jsx("div",{className:"bg-gray-50 rounded-lg p-6 max-w-lg mx-auto",children:a.jsxs("p",{className:"text-gray-600 text-sm",children:[a.jsx("strong",{children:"Ready to build?"}),' Click the "Login" button in the top right corner to create your account and start building powerful deck combinations.']})})]})]});const[r,i]=k.useState([]),[o,l]=k.useState([]),[c,d]=k.useState(!0),[u,h]=k.useState(!1),[f,m]=k.useState(null),[p,v]=k.useState(!0),[b,x]=k.useState({blades:[],ratchets:[],bits:[],lockchips:[],assistBlades:[]}),[g,y]=k.useState(""),[w,_]=k.useState(""),[N,P]=k.useState(3),[E,C]=k.useState([{id:"1",name:"",blade_line:"Basic",parts:{}}]);k.useEffect(()=>{R(),p&&V(),M()},[e]);const R=async()=>{try{const{data:B,error:F}=await K.from("deck_presets").select("*").eq("user_id",e.id).order("updated_at",{ascending:!1});if(F)throw F;i(B||[])}catch(B){console.error("Error fetching presets:",B)}finally{d(!1)}};k.useEffect(()=>{p||M()},[p]);const M=async()=>{try{const[B,F,I,le,j]=await Promise.all([K.from("beypart_blade").select("*"),K.from("beypart_ratchet").select("*"),K.from("beypart_bit").select("*"),K.from("beypart_lockchip").select("*"),K.from("beypart_assistblade").select("*")]);x({blades:B.data||[],ratchets:F.data||[],bits:I.data||[],lockchips:le.data||[],assistBlades:j.data||[]})}catch(B){console.error("Error fetching parts data:",B)}},V=async()=>{try{const{data:B,error:F}=await K.from("user_inventory").select("*").eq("user_id",e.id).gt("quantity",0);if(F)throw F;l(B||[])}catch(B){console.error("Error fetching inventory:",B)}},ie=B=>{switch(B){case"Basic":case"Unique":case"X-Over":return["Blade","Ratchet","Bit"];case"Custom":return["Lockchip","Main Blade","Assist Blade","Ratchet","Bit"];default:return[]}},ce=B=>{if(!p)switch(B==="Main Blade"?"Blade":B){case"Blade":return b.blades.map(I=>({id:`db-${I.Blades}`,part_type:"Blade",part_name:I.Blades,part_data:I,quantity:999}));case"Ratchet":return b.ratchets.map(I=>({id:`db-${I.Ratchet}`,part_type:"Ratchet",part_name:I.Ratchet,part_data:I,quantity:999}));case"Bit":return b.bits.map(I=>({id:`db-${I.Bit}`,part_type:"Bit",part_name:`${I.Bit} (${I.Shortcut})`,part_data:I,quantity:999}));case"Lockchip":return b.lockchips.map(I=>({id:`db-${I.Lockchip}`,part_type:"Lockchip",part_name:I.Lockchip,part_data:I,quantity:999}));case"Assist Blade":return b.assistBlades.map(I=>({id:`db-${I["Assist Blade"]}`,part_type:"Assist Blade",part_name:`${I["Assist Blade Name"]} (${I["Assist Blade"]})`,part_data:I,quantity:999}));default:return[]}return B==="Blade"||B==="Main Blade"?o.filter(I=>I.part_type.startsWith("Blade (")&&I.part_type===`Blade (${B==="Main Blade"?"Custom":"Basic"})`):o.filter(I=>I.part_type===B)},T=(B,F)=>{var j,S,D,oe,Z,pe,ke,A;if(!B||!ie(B).every(J=>F[J]))return"";if(B==="Custom"){const J=((j=F.Lockchip)==null?void 0:j.Lockchip)||"",Y=((S=F["Main Blade"])==null?void 0:S.Blades)||"",re=((D=F["Assist Blade"])==null?void 0:D["Assist Blade"])||"",we=((oe=F.Ratchet)==null?void 0:oe.Ratchet)||"",Ue=((Z=F.Bit)==null?void 0:Z.Shortcut)||"";return`${J}${Y} ${re}${we}${Ue}`}else{const J=((pe=F.Blade)==null?void 0:pe.Blades)||"",Y=((ke=F.Ratchet)==null?void 0:ke.Ratchet)||"",re=((A=F.Bit)==null?void 0:A.Shortcut)||"";return`${J} ${Y}${re}`}},$=B=>{let F={attack:0,defense:0,stamina:0,dash:0,burstRes:0};return Object.values(B).forEach(I=>{I&&(F.attack+=I.Attack||0,F.defense+=I.Defense||0,F.stamina+=I.Stamina||0,F.dash+=I.Dash||0,F.burstRes+=I["Burst Res"]||0)}),F},q=()=>{h(!0),y(""),_(""),P(3),C([{id:"1",name:"",blade_line:"Basic",parts:{}}])},U=B=>{m(B.id),y(B.name),_(B.description||""),P(B.beyblades.length),C(B.beyblades)},L=()=>{E.length<N&&C([...E,{id:Date.now().toString(),name:"",blade_line:"Basic",parts:{}}])},H=B=>{E.length>1&&C(E.filter(F=>F.id!==B))},te=(B,F,I)=>{C(E.map(le=>{if(le.id===B){const j={...le,[F]:I,parts:{}};return j.name=T(I,{}),j}return le}))},Q=(B,F,I)=>{C(E.map(le=>{if(le.id===B){const j={...le.parts,[F]:I},S=T(le.blade_line,j);return{...le,parts:j,name:S}}return le}))},O=async()=>{if(!g.trim()){await n("Missing Information","Please enter a deck name.");return}const B=E.filter(F=>{const I=ie(F.blade_line);return F.blade_line&&I.every(le=>F.parts[le])});if(B.length===0){await n("Missing Information","Please configure at least one complete Beyblade.");return}try{const F={user_id:e.id,name:g.trim(),description:w.trim()||null,beyblades:B};if(u){const{error:I}=await K.from("deck_presets").insert([F]);if(I)throw I}else if(f){const{error:I}=await K.from("deck_presets").update({...F,updated_at:new Date().toISOString()}).eq("id",f);if(I)throw I}await R(),ne(),await n("Success","Deck preset saved successfully!")}catch(F){console.error("Error saving preset:",F),await n("Error","Failed to save deck preset. Please try again.")}},X=async B=>{if(await s("Delete Deck Preset","Are you sure you want to delete this deck preset?"))try{const{error:I}=await K.from("deck_presets").delete().eq("id",B);if(I)throw I;await R()}catch(I){console.error("Error deleting preset:",I),await n("Error","Failed to delete deck preset. Please try again.")}},ne=()=>{h(!1),m(null),y(""),_(""),P(3),C([{id:"1",name:"",blade_line:"Basic",parts:{}}])},ae=B=>{switch(B){case"attack":return a.jsx(Pu,{size:12,className:"text-red-500"});case"defense":return a.jsx(ki,{size:12,className:"text-blue-500"});case"stamina":return a.jsx(Su,{size:12,className:"text-green-500"});case"dash":return a.jsx(Ro,{size:12,className:"text-yellow-500"});case"burstRes":return a.jsx(E0,{size:12,className:"text-purple-500"});default:return null}};return c?a.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading deck builder..."})]})}):a.jsxs("div",{className:t?"p-6 max-w-7xl mx-auto":"",children:[t&&a.jsxs("div",{className:"flex justify-between items-center mb-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Deck Builder"}),a.jsx("p",{className:"text-gray-600",children:"Create and save Beyblade deck presets from your inventory"})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Build Mode:"}),a.jsxs("div",{className:"flex items-center space-x-2 bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>v(!0),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors ${p?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Use Inventory"}),a.jsx("button",{onClick:()=>v(!1),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors ${p?"text-gray-600 hover:text-gray-900":"bg-white text-gray-900 shadow-sm"}`,children:"Free Build"})]})]}),a.jsxs("button",{onClick:q,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[a.jsx(Mn,{size:20}),a.jsx("span",{children:"New Deck"})]})]})]}),!t&&a.jsxs("div",{className:"flex justify-between items-center mb-8",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Build Mode:"}),a.jsxs("div",{className:"flex items-center space-x-2 bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>v(!0),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors ${p?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Use Inventory"}),a.jsx("button",{onClick:()=>v(!1),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors ${p?"text-gray-600 hover:text-gray-900":"bg-white text-gray-900 shadow-sm"}`,children:"Free Build"})]})]}),a.jsxs("button",{onClick:q,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[a.jsx(Mn,{size:20}),a.jsx("span",{children:"New Deck"})]})]}),(u||f)&&a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:u?"Create New Deck":"Edit Deck"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Deck Name"}),a.jsx("input",{type:"text",value:g,onChange:B=>y(B.target.value),placeholder:"Enter deck name",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description (Optional)"}),a.jsx("input",{type:"text",value:w,onChange:B=>_(B.target.value),placeholder:"Deck strategy or notes",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),a.jsx("div",{className:"space-y-6",children:E.map((B,F)=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Beyblade #",F+1]}),E.length>1&&a.jsx("button",{onClick:()=>H(B.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-full transition-colors",children:a.jsx(hs,{size:16})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Blade Line"}),a.jsxs("select",{value:B.blade_line,onChange:I=>te(B.id,"blade_line",I.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"Basic",children:"Basic"}),a.jsx("option",{value:"Unique",children:"Unique"}),a.jsx("option",{value:"Custom",children:"Custom"}),a.jsx("option",{value:"X-Over",children:"X-Over"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Generated Name"}),a.jsx("div",{className:"w-full border border-gray-200 rounded-md px-3 py-2 bg-gray-50 text-gray-700 font-mono",children:B.name||"Select all parts to generate name"})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4",children:ie(B.blade_line).map(I=>a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:I}),a.jsxs("select",{value:B.parts[I]?JSON.stringify(B.parts[I]):"",onChange:le=>{if(le.target.value){const j=JSON.parse(le.target.value);Q(B.id,I,j)}},className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsxs("option",{value:"",children:["Select ",I]}),ce(I).filter(le=>{var j;return!p&&(I==="Blade"||I==="Main Blade")&&((j=le.part_data)!=null&&j.Line)?le.part_data.Line===(I==="Main Blade"?"Custom":B.blade_line):!0}).map(le=>a.jsxs("option",{value:JSON.stringify(le.part_data),children:[le.part_name," ",p?`(Qty: ${le.quantity})`:""]},le.id))]})]},I))}),Object.keys(B.parts).length>0&&a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsxs("h5",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center",children:[a.jsx(Ro,{size:16,className:"mr-2"}),"Combined Stats"]}),a.jsx("div",{className:"grid grid-cols-5 gap-4",children:Object.entries($(B.parts)).map(([I,le])=>a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"flex items-center justify-center mb-1",children:ae(I)}),a.jsx("div",{className:"text-xs font-medium text-gray-600 capitalize",children:I==="burstRes"?"Burst Res":I}),a.jsx("div",{className:"text-lg font-bold text-gray-900",children:le})]},I))})]})]},B.id))}),E.length<5&&a.jsxs("button",{onClick:L,className:"mt-4 w-full border-2 border-dashed border-gray-300 rounded-lg p-4 text-gray-600 hover:border-blue-400 hover:text-blue-600 transition-colors flex items-center justify-center space-x-2",children:[a.jsx(Mn,{size:20}),a.jsxs("span",{children:["Add Another Beyblade (",E.length,"/5)"]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[a.jsxs("button",{onClick:ne,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors flex items-center space-x-2",children:[a.jsx(Pt,{size:16}),a.jsx("span",{children:"Cancel"})]}),a.jsxs("button",{onClick:O,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[a.jsx(Or,{size:16}),a.jsx("span",{children:"Save Preset"})]})]})]}),r.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(sn,{size:48,className:"mx-auto text-gray-400 mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No deck presets yet"}),a.jsx("button",{onClick:q,className:"mt-4 text-blue-600 hover:text-blue-800 underline",children:"Create your first deck preset"})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(B=>a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:B.name}),B.description&&a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:B.description})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>U(B),className:"p-1 text-blue-600 hover:bg-blue-50 rounded",children:a.jsx(Un,{size:16})}),a.jsx("button",{onClick:()=>X(B.id),className:"p-1 text-red-600 hover:bg-red-50 rounded",children:a.jsx(hs,{size:16})})]})]}),a.jsxs("div",{className:"space-y-2 mb-4",children:[a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsx("span",{className:"font-medium",children:B.beyblades.length})," Beyblades configured"]}),a.jsxs("div",{className:"space-y-1",children:[B.beyblades.slice(0,3).map((F,I)=>a.jsx("div",{className:"text-xs text-gray-500 font-mono",children:F.name||`Beyblade ${I+1}`},I)),B.beyblades.length>3&&a.jsxs("div",{className:"text-xs text-gray-400",children:["+",B.beyblades.length-3," more..."]})]})]}),a.jsxs("div",{className:"text-xs text-gray-500 pt-2 border-t",children:["Updated: ",new Date(B.updated_at).toLocaleDateString()]})]},B.id))})]})}function RN(){const{user:t}=ns(),{confirm:e,alert:s}=Kn(),[n,r]=k.useState("inventory");if(!t||t.id.startsWith("guest-"))return a.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Inventory & Deck Builder"}),a.jsx("p",{className:"text-gray-600",children:"Track your parts and build custom decks"})]}),a.jsxs("div",{className:"text-center py-12",children:[a.jsxs("div",{className:"flex justify-center space-x-4 mb-6",children:[a.jsx(li,{size:64,className:"text-gray-400"}),a.jsx(sn,{size:64,className:"text-gray-400"})]}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Inventory & Deck Builder"}),a.jsx("p",{className:"text-gray-600 mb-8 max-w-2xl mx-auto",children:"Track your Beyblade parts collection and build powerful custom decks. Save deck presets for quick tournament registration."}),a.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-xl p-8 max-w-md mx-auto mb-8",children:[a.jsx("div",{className:"flex items-center justify-center mb-6",children:a.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white text-2xl font-bold shadow-lg",children:""})}),a.jsx("h3",{className:"text-xl font-bold text-blue-900 mb-3",children:"Login to Access Tools"}),a.jsx("p",{className:"text-blue-800 text-sm mb-6",children:"Create a free account to access inventory tracking and deck building tools!"}),a.jsxs("div",{className:"space-y-2 text-sm text-blue-700",children:[a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full mr-2"}),"Track unlimited Beyblade parts"]}),a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full mr-2"}),"Build and save custom decks"]}),a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full mr-2"}),"Quick tournament registration"]})]})]}),a.jsx("div",{className:"bg-gray-50 rounded-lg p-6 max-w-lg mx-auto",children:a.jsxs("p",{className:"text-gray-600 text-sm",children:[a.jsx("strong",{children:"Ready to start?"}),' Click the "Login" button to create your account and unlock inventory & deck building features.']})})]})]});const[i,o]=k.useState([]),[l,c]=k.useState(!0),[d,u]=k.useState(!1),[h,f]=k.useState(null),[m,p]=k.useState(""),[v,b]=k.useState("all"),[x,g]=k.useState({part_type:"Blade (Basic)",part_name:"",part_data:null,quantity:1,notes:""}),[y,w]=k.useState({blades:[],ratchets:[],bits:[],lockchips:[],assistBlades:[]});k.useEffect(()=>{_(),N()},[t]);const _=async()=>{try{const{data:T,error:$}=await K.from("user_inventory").select("*").eq("user_id",t.id).order("created_at",{ascending:!1});if($)throw $;o(T||[])}catch(T){console.error("Error fetching inventory:",T)}finally{c(!1)}},N=async()=>{try{const[T,$,q,U,L]=await Promise.all([K.from("beypart_blade").select("*"),K.from("beypart_ratchet").select("*"),K.from("beypart_bit").select("*"),K.from("beypart_lockchip").select("*"),K.from("beypart_assistblade").select("*")]);w({blades:T.data||[],ratchets:$.data||[],bits:q.data||[],lockchips:U.data||[],assistBlades:L.data||[]})}catch(T){console.error("Error fetching parts data:",T)}},P=T=>{let $=[];if(T.startsWith("Blade (")){const q=T.replace("Blade (","").replace(")","");$=y.blades.filter(U=>U.Line===q)}else T==="Ratchet"?$=y.ratchets:T==="Bit"?$=y.bits:T==="Lockchip"?$=y.lockchips:T==="Assist Blade"&&($=y.assistBlades);return T==="Blade"?$=y.blades.filter(q=>q.Line!=="Custom"):T==="Blade (Custom)"?$=y.blades.filter(q=>q.Line==="Custom"):T==="Ratchet"?$=y.ratchets:T==="Bit"?$=y.bits:T==="Lockchip"?$=y.lockchips:T==="Assist Blade"&&($=y.assistBlades),$},E=(T,$)=>{if($.startsWith("Blade ("))return T.Blades;switch($){case"Ratchet":return T.Ratchet;case"Bit":return`${T.Bit} (${T.Shortcut})`;case"Lockchip":return T.Lockchip;case"Assist Blade":return`${T["Assist Blade Name"]} (${T["Assist Blade"]})`;default:return""}},C=()=>{u(!0),g({part_type:"Blade (Basic)",part_name:"",part_data:null,quantity:1,notes:""})},R=T=>{f(T.id),g({part_type:T.part_type,part_name:T.part_name,part_data:T.part_data,quantity:T.quantity,notes:T.notes||""})},M=async()=>{if(!x.part_name||!x.part_data){await s("Missing Information","Please select a part before saving.");return}try{const T={user_id:t.id,part_type:x.part_type,part_name:x.part_name,part_data:x.part_data,quantity:x.quantity,notes:x.notes||null};if(d){const{error:$}=await K.from("user_inventory").insert([T]);if($)throw $}else if(h){const{error:$}=await K.from("user_inventory").update(T).eq("id",h);if($)throw $}await _()}catch(T){console.error("Error saving inventory item:",T),await s("Error","Failed to save inventory item. Please try again.")}},V=async T=>{if(await e("Delete Inventory Item","Are you sure you want to delete this inventory item? This action cannot be undone."))try{const{error:q}=await K.from("user_inventory").delete().eq("id",T);if(q)throw q;await _()}catch(q){console.error("Error deleting inventory item:",q),await s("Error","Failed to delete inventory item. Please try again.")}},ie=()=>{u(!1),f(null),g({part_type:"Blade (Basic)",part_name:"",part_data:null,quantity:1,notes:""})},ce=i.filter(T=>{var U;const $=T.part_name.toLowerCase().includes(m.toLowerCase())||T.notes&&T.notes.toLowerCase().includes(m.toLowerCase());let q=!1;if(v==="all")q=!0;else if(v.startsWith("Blade (")){const L=v.replace("Blade (","").replace(")","");q=T.part_type==="Blade"&&((U=T.part_data)==null?void 0:U.Line)===L}else q=T.part_type===v;return $&&q});return l?a.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading inventory..."})]})}):n==="deck-builder"?a.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[a.jsx("div",{className:"mb-8",children:a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Inventory & Deck Builder"}),a.jsx("p",{className:"text-gray-600",children:"Track your parts and build custom decks"})]}),a.jsxs("div",{className:"filter-tabs",children:[a.jsxs("button",{onClick:()=>r("inventory"),className:`filter-tab ${n==="inventory"?"filter-tab-active":"filter-tab-inactive"}`,children:[a.jsx(li,{size:16,className:"mr-2"}),"Inventory"]}),a.jsxs("button",{onClick:()=>r("deck-builder"),className:`filter-tab ${n==="deck-builder"?"filter-tab-active":"filter-tab-inactive"}`,children:[a.jsx(sn,{size:16,className:"mr-2"}),"Deck Builder"]})]})]})}),a.jsx(ON,{})]}):a.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Inventory & Deck Builder"}),a.jsx("p",{className:"text-gray-600",children:"Track your parts and build custom decks"})]}),a.jsxs("div",{className:"filter-tabs",children:[a.jsxs("button",{onClick:()=>r("inventory"),className:`filter-tab ${n==="inventory"?"filter-tab-active":"filter-tab-inactive"}`,children:[a.jsx(li,{size:16,className:"mr-2"}),"Inventory"]}),a.jsxs("button",{onClick:()=>r("deck-builder"),className:`filter-tab ${n==="deck-builder"?"filter-tab-active":"filter-tab-inactive"}`,children:[a.jsx(sn,{size:16,className:"mr-2"}),"Deck Builder"]})]})]})}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{onClick:C,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[a.jsx(Mn,{size:20}),a.jsx("span",{children:"Add Part"})]})})]}),a.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(C0,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search parts or notes...",value:m,onChange:T=>p(T.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(E_,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsxs("select",{value:v,onChange:T=>b(T.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"all",children:"All Parts"}),a.jsx("option",{value:"Blade (Basic)",children:"Blades (Basic)"}),a.jsx("option",{value:"Blade (Unique)",children:"Blades (Unique)"}),a.jsx("option",{value:"Blade (X-Over)",children:"Blades (X-Over)"}),a.jsx("option",{value:"Blade (Custom)",children:"Blades (Custom)"}),a.jsx("option",{value:"Ratchet",children:"Ratchets"}),a.jsx("option",{value:"Bit",children:"Bits"}),a.jsx("option",{value:"Blade (Basic)",children:"Blade (Basic)"}),a.jsx("option",{value:"Blade (Unique)",children:"Blade (Unique)"}),a.jsx("option",{value:"Blade (X-Over)",children:"Blade (X-Over)"}),a.jsx("option",{value:"Blade (Custom)",children:"Blade (Custom)"}),a.jsx("option",{value:"Assist Blade",children:"Assist Blades"})]})]})]})}),(d||h)&&a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:d?"Add New Part":"Edit Part"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Part Type"}),a.jsxs("select",{value:x.part_type,onChange:T=>g({...x,part_type:T.target.value,part_name:"",part_data:null}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"Blade (Basic)",children:"Blade (Basic)"}),a.jsx("option",{value:"Blade (Unique)",children:"Blade (Unique)"}),a.jsx("option",{value:"Blade (X-Over)",children:"Blade (X-Over)"}),a.jsx("option",{value:"Blade (Custom)",children:"Blade (Custom)"}),a.jsx("option",{value:"Ratchet",children:"Ratchet"}),a.jsx("option",{value:"Bit",children:"Bit"}),a.jsx("option",{value:"Lockchip",children:"Lockchip"}),a.jsx("option",{value:"Assist Blade",children:"Assist Blade"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Part"}),a.jsxs("select",{value:x.part_data?JSON.stringify(x.part_data):"",onChange:T=>{if(T.target.value){const $=JSON.parse(T.target.value);g({...x,part_name:E($,x.part_type),part_data:$})}},className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Select Part"}),P(x.part_type).map((T,$)=>a.jsx("option",{value:JSON.stringify(T),children:E(T,x.part_type)},$))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantity"}),a.jsx("input",{type:"number",min:"1",value:x.quantity,onChange:T=>g({...x,quantity:parseInt(T.target.value)||1}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes (Optional)"}),a.jsx("input",{type:"text",value:x.notes,onChange:T=>g({...x,notes:T.target.value}),placeholder:"e.g., condition, source, etc.",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[a.jsxs("button",{onClick:ie,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors flex items-center space-x-2",children:[a.jsx(Pt,{size:16}),a.jsx("span",{children:"Cancel"})]}),a.jsxs("button",{onClick:M,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[a.jsx(Or,{size:16}),a.jsx("span",{children:"Save"})]})]})]}),ce.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(li,{size:48,className:"mx-auto text-gray-400 mb-4"}),a.jsx("p",{className:"text-gray-500",children:i.length===0?"No parts in your inventory yet":"No parts match your search"}),i.length===0&&a.jsx("button",{onClick:C,className:"mt-4 text-blue-600 hover:text-blue-800 underline",children:"Add your first part"})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:ce.map(T=>a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{children:[a.jsx("span",{className:"inline-block px-2 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded-full mb-2",children:T.part_type}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:T.part_name})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>R(T),className:"p-1 text-blue-600 hover:bg-blue-50 rounded",children:a.jsx(Un,{size:16})}),a.jsx("button",{onClick:()=>V(T.id),className:"p-1 text-red-600 hover:bg-red-50 rounded",children:a.jsx(hs,{size:16})})]})]}),a.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Quantity:"}),a.jsx("span",{className:"font-medium",children:T.quantity})]}),T.notes&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Notes:"}),a.jsx("p",{className:"text-gray-700 mt-1",children:T.notes})]}),a.jsxs("div",{className:"text-xs text-gray-500 pt-2 border-t",children:["Added: ",new Date(T.created_at).toLocaleDateString()]})]}),T.part_data&&a.jsx("div",{className:"mt-4 pt-4 border-t",children:a.jsx("div",{className:"grid grid-cols-2 gap-2 text-xs",children:Object.entries(T.part_data).map(([$,q])=>typeof q=="number"&&q>0&&["Attack","Defense","Stamina","Dash","Burst Res"].includes($)?a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("span",{className:"text-gray-600",children:[$,":"]}),a.jsx("span",{className:"font-medium",children:q})]},$):null)})})]},T.id))})]})}function MN(){const[t,e]=k.useState("dashboard"),[s,n]=k.useState(!1),r=()=>{n(!s)},i=()=>{switch(t){case"dashboard":return a.jsx(bf,{onViewChange:e});case"tournaments":return a.jsx(K_,{});case"inventory":return a.jsx(RN,{});case"analytics":return a.jsx(CN,{});case"match-tracker":return a.jsx(PN,{});case"tournament-manager":return a.jsx(EN,{});case"user-management":return a.jsx(TN,{});case"database":return a.jsx(AN,{});default:return a.jsx(bf,{})}};return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[!s&&a.jsx("button",{onClick:r,className:`fixed top-6 left-0 z-50 p-3 rounded-r-xl shadow-lg backdrop-blur-sm transition-all duration-300 hover:scale-105 ${t==="dashboard"?"bg-slate-800/90 hover:bg-slate-700/90 text-white":"bg-white/90 hover:bg-white text-gray-800 border border-gray-200"}`,children:a.jsx(L_,{size:24})}),a.jsx(V_,{isOpen:s,currentView:t,onViewChange:e,onToggle:r}),a.jsx("div",{className:`${s?"lg:ml-64":"lg:ml-0"} transition-all duration-300`,children:a.jsx("main",{className:"flex-1",children:i()})})]})}function LN(){return a.jsx(w_,{children:a.jsx(__,{children:a.jsx(MN,{})})})}Xg(document.getElementById("root")).render(a.jsx(k.StrictMode,{children:a.jsx(LN,{})}));
