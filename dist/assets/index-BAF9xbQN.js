var Tx=Object.defineProperty;var Ax=(t,e,s)=>e in t?Tx(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var me=(t,e,s)=>Ax(t,typeof e!="symbol"?e+"":e,s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function s(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=s(r);fetch(r.href,i)}})();var Ft=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ox(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Rx(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var s=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(s,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}),s}var $m={exports:{}},Vo={},zm={exports:{}},xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ji=Symbol.for("react.element"),Mx=Symbol.for("react.portal"),Lx=Symbol.for("react.fragment"),Dx=Symbol.for("react.strict_mode"),Bx=Symbol.for("react.profiler"),Ix=Symbol.for("react.provider"),$x=Symbol.for("react.context"),zx=Symbol.for("react.forward_ref"),Fx=Symbol.for("react.suspense"),Ux=Symbol.for("react.memo"),Wx=Symbol.for("react.lazy"),Fu=Symbol.iterator;function Hx(t){return t===null||typeof t!="object"?null:(t=Fu&&t[Fu]||t["@@iterator"],typeof t=="function"?t:null)}var Fm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Um=Object.assign,Wm={};function Br(t,e,s){this.props=t,this.context=e,this.refs=Wm,this.updater=s||Fm}Br.prototype.isReactComponent={};Br.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Br.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Hm(){}Hm.prototype=Br.prototype;function Cd(t,e,s){this.props=t,this.context=e,this.refs=Wm,this.updater=s||Fm}var Pd=Cd.prototype=new Hm;Pd.constructor=Cd;Um(Pd,Br.prototype);Pd.isPureReactComponent=!0;var Uu=Array.isArray,Vm=Object.prototype.hasOwnProperty,Ed={current:null},qm={key:!0,ref:!0,__self:!0,__source:!0};function Km(t,e,s){var n,r={},i=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)Vm.call(e,n)&&!qm.hasOwnProperty(n)&&(r[n]=e[n]);var l=arguments.length-2;if(l===1)r.children=s;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];r.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)r[n]===void 0&&(r[n]=l[n]);return{$$typeof:Ji,type:t,key:i,ref:a,props:r,_owner:Ed.current}}function Vx(t,e){return{$$typeof:Ji,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Td(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ji}function qx(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(s){return e[s]})}var Wu=/\/+/g;function wl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?qx(""+t.key):e.toString(36)}function Wa(t,e,s,n,r){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Ji:case Mx:a=!0}}if(a)return a=t,r=r(a),t=n===""?"."+wl(a,0):n,Uu(r)?(s="",t!=null&&(s=t.replace(Wu,"$&/")+"/"),Wa(r,e,s,"",function(d){return d})):r!=null&&(Td(r)&&(r=Vx(r,s+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(Wu,"$&/")+"/")+t)),e.push(r)),1;if(a=0,n=n===""?".":n+":",Uu(t))for(var l=0;l<t.length;l++){i=t[l];var c=n+wl(i,l);a+=Wa(i,e,s,c,r)}else if(c=Hx(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=n+wl(i,l++),a+=Wa(i,e,s,c,r);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function la(t,e,s){if(t==null)return t;var n=[],r=0;return Wa(t,n,"","",function(i){return e.call(s,i,r++)}),n}function Kx(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(s){(t._status===0||t._status===-1)&&(t._status=1,t._result=s)},function(s){(t._status===0||t._status===-1)&&(t._status=2,t._result=s)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ft={current:null},Ha={transition:null},Yx={ReactCurrentDispatcher:ft,ReactCurrentBatchConfig:Ha,ReactCurrentOwner:Ed};function Ym(){throw Error("act(...) is not supported in production builds of React.")}xe.Children={map:la,forEach:function(t,e,s){la(t,function(){e.apply(this,arguments)},s)},count:function(t){var e=0;return la(t,function(){e++}),e},toArray:function(t){return la(t,function(e){return e})||[]},only:function(t){if(!Td(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};xe.Component=Br;xe.Fragment=Lx;xe.Profiler=Bx;xe.PureComponent=Cd;xe.StrictMode=Dx;xe.Suspense=Fx;xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Yx;xe.act=Ym;xe.cloneElement=function(t,e,s){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Um({},t.props),r=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=Ed.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)Vm.call(e,c)&&!qm.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=s;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:Ji,type:t.type,key:r,ref:i,props:n,_owner:a}};xe.createContext=function(t){return t={$$typeof:$x,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Ix,_context:t},t.Consumer=t};xe.createElement=Km;xe.createFactory=function(t){var e=Km.bind(null,t);return e.type=t,e};xe.createRef=function(){return{current:null}};xe.forwardRef=function(t){return{$$typeof:zx,render:t}};xe.isValidElement=Td;xe.lazy=function(t){return{$$typeof:Wx,_payload:{_status:-1,_result:t},_init:Kx}};xe.memo=function(t,e){return{$$typeof:Ux,type:t,compare:e===void 0?null:e}};xe.startTransition=function(t){var e=Ha.transition;Ha.transition={};try{t()}finally{Ha.transition=e}};xe.unstable_act=Ym;xe.useCallback=function(t,e){return ft.current.useCallback(t,e)};xe.useContext=function(t){return ft.current.useContext(t)};xe.useDebugValue=function(){};xe.useDeferredValue=function(t){return ft.current.useDeferredValue(t)};xe.useEffect=function(t,e){return ft.current.useEffect(t,e)};xe.useId=function(){return ft.current.useId()};xe.useImperativeHandle=function(t,e,s){return ft.current.useImperativeHandle(t,e,s)};xe.useInsertionEffect=function(t,e){return ft.current.useInsertionEffect(t,e)};xe.useLayoutEffect=function(t,e){return ft.current.useLayoutEffect(t,e)};xe.useMemo=function(t,e){return ft.current.useMemo(t,e)};xe.useReducer=function(t,e,s){return ft.current.useReducer(t,e,s)};xe.useRef=function(t){return ft.current.useRef(t)};xe.useState=function(t){return ft.current.useState(t)};xe.useSyncExternalStore=function(t,e,s){return ft.current.useSyncExternalStore(t,e,s)};xe.useTransition=function(){return ft.current.useTransition()};xe.version="18.3.1";zm.exports=xe;var N=zm.exports;const He=Ox(N);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gx=N,Qx=Symbol.for("react.element"),Jx=Symbol.for("react.fragment"),Xx=Object.prototype.hasOwnProperty,Zx=Gx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ey={key:!0,ref:!0,__self:!0,__source:!0};function Gm(t,e,s){var n,r={},i=null,a=null;s!==void 0&&(i=""+s),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)Xx.call(e,n)&&!ey.hasOwnProperty(n)&&(r[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)r[n]===void 0&&(r[n]=e[n]);return{$$typeof:Qx,type:t,key:i,ref:a,props:r,_owner:Zx.current}}Vo.Fragment=Jx;Vo.jsx=Gm;Vo.jsxs=Gm;$m.exports=Vo;var o=$m.exports,Qm={exports:{}},Rt={},Jm={exports:{}},Xm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(W,K){var J=W.length;W.push(K);e:for(;0<J;){var re=J-1>>>1,ie=W[re];if(0<r(ie,K))W[re]=K,W[J]=ie,J=re;else break e}}function s(W){return W.length===0?null:W[0]}function n(W){if(W.length===0)return null;var K=W[0],J=W.pop();if(J!==K){W[0]=J;e:for(var re=0,ie=W.length,M=ie>>>1;re<M;){var ee=2*(re+1)-1,se=W[ee],ae=ee+1,D=W[ae];if(0>r(se,J))ae<ie&&0>r(D,se)?(W[re]=D,W[ae]=J,re=ae):(W[re]=se,W[ee]=J,re=ee);else if(ae<ie&&0>r(D,J))W[re]=D,W[ae]=J,re=ae;else break e}}return K}function r(W,K){var J=W.sortIndex-K.sortIndex;return J!==0?J:W.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],d=[],u=1,h=null,f=3,m=!1,p=!1,y=!1,b=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(W){for(var K=s(d);K!==null;){if(K.callback===null)n(d);else if(K.startTime<=W)n(d),K.sortIndex=K.expirationTime,e(c,K);else break;K=s(d)}}function w(W){if(y=!1,v(W),!p)if(s(c)!==null)p=!0,z(_);else{var K=s(d);K!==null&&V(w,K.startTime-W)}}function _(W,K){p=!1,y&&(y=!1,x(E),E=-1),m=!0;var J=f;try{for(v(K),h=s(c);h!==null&&(!(h.expirationTime>K)||W&&!R());){var re=h.callback;if(typeof re=="function"){h.callback=null,f=h.priorityLevel;var ie=re(h.expirationTime<=K);K=t.unstable_now(),typeof ie=="function"?h.callback=ie:h===s(c)&&n(c),v(K)}else n(c);h=s(c)}if(h!==null)var M=!0;else{var ee=s(d);ee!==null&&V(w,ee.startTime-K),M=!1}return M}finally{h=null,f=J,m=!1}}var S=!1,P=null,E=-1,k=5,T=-1;function R(){return!(t.unstable_now()-T<k)}function $(){if(P!==null){var W=t.unstable_now();T=W;var K=!0;try{K=P(!0,W)}finally{K?G():(S=!1,P=null)}}else S=!1}var G;if(typeof g=="function")G=function(){g($)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,O=le.port2;le.port1.onmessage=$,G=function(){O.postMessage(null)}}else G=function(){b($,0)};function z(W){P=W,S||(S=!0,G())}function V(W,K){E=b(function(){W(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){p||m||(p=!0,z(_))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return s(c)},t.unstable_next=function(W){switch(f){case 1:case 2:case 3:var K=3;break;default:K=f}var J=f;f=K;try{return W()}finally{f=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,K){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var J=f;f=W;try{return K()}finally{f=J}},t.unstable_scheduleCallback=function(W,K,J){var re=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?re+J:re):J=re,W){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=J+ie,W={id:u++,callback:K,priorityLevel:W,startTime:J,expirationTime:ie,sortIndex:-1},J>re?(W.sortIndex=J,e(d,W),s(c)===null&&W===s(d)&&(y?(x(E),E=-1):y=!0,V(w,J-re))):(W.sortIndex=ie,e(c,W),p||m||(p=!0,z(_))),W},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(W){var K=f;return function(){var J=f;f=K;try{return W.apply(this,arguments)}finally{f=J}}}})(Xm);Jm.exports=Xm;var ty=Jm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sy=N,Ot=ty;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)e+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Zm=new Set,Ei={};function Hn(t,e){kr(t,e),kr(t+"Capture",e)}function kr(t,e){for(Ei[t]=e,t=0;t<e.length;t++)Zm.add(e[t])}var Ps=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fc=Object.prototype.hasOwnProperty,ny=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Hu={},Vu={};function ry(t){return fc.call(Vu,t)?!0:fc.call(Hu,t)?!1:ny.test(t)?Vu[t]=!0:(Hu[t]=!0,!1)}function iy(t,e,s,n){if(s!==null&&s.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:s!==null?!s.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function ay(t,e,s,n){if(e===null||typeof e>"u"||iy(t,e,s,n))return!0;if(n)return!1;if(s!==null)switch(s.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function mt(t,e,s,n,r,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=r,this.mustUseProperty=s,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var tt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){tt[t]=new mt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];tt[e]=new mt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){tt[t]=new mt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){tt[t]=new mt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){tt[t]=new mt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){tt[t]=new mt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){tt[t]=new mt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){tt[t]=new mt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){tt[t]=new mt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ad=/[\-:]([a-z])/g;function Od(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ad,Od);tt[e]=new mt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ad,Od);tt[e]=new mt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ad,Od);tt[e]=new mt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){tt[t]=new mt(t,1,!1,t.toLowerCase(),null,!1,!1)});tt.xlinkHref=new mt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){tt[t]=new mt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Rd(t,e,s,n){var r=tt.hasOwnProperty(e)?tt[e]:null;(r!==null?r.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(ay(e,s,r,n)&&(s=null),n||r===null?ry(e)&&(s===null?t.removeAttribute(e):t.setAttribute(e,""+s)):r.mustUseProperty?t[r.propertyName]=s===null?r.type===3?!1:"":s:(e=r.attributeName,n=r.attributeNamespace,s===null?t.removeAttribute(e):(r=r.type,s=r===3||r===4&&s===!0?"":""+s,n?t.setAttributeNS(n,e,s):t.setAttribute(e,s))))}var Os=sy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ca=Symbol.for("react.element"),nr=Symbol.for("react.portal"),rr=Symbol.for("react.fragment"),Md=Symbol.for("react.strict_mode"),mc=Symbol.for("react.profiler"),ep=Symbol.for("react.provider"),tp=Symbol.for("react.context"),Ld=Symbol.for("react.forward_ref"),pc=Symbol.for("react.suspense"),gc=Symbol.for("react.suspense_list"),Dd=Symbol.for("react.memo"),Is=Symbol.for("react.lazy"),sp=Symbol.for("react.offscreen"),qu=Symbol.iterator;function Ur(t){return t===null||typeof t!="object"?null:(t=qu&&t[qu]||t["@@iterator"],typeof t=="function"?t:null)}var Be=Object.assign,_l;function si(t){if(_l===void 0)try{throw Error()}catch(s){var e=s.stack.trim().match(/\n( *(at )?)/);_l=e&&e[1]||""}return`
`+_l+t}var jl=!1;function kl(t,e){if(!t||jl)return"";jl=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var n=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){n=d}t.call(e.prototype)}else{try{throw Error()}catch(d){n=d}t()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var r=d.stack.split(`
`),i=n.stack.split(`
`),a=r.length-1,l=i.length-1;1<=a&&0<=l&&r[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(r[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||r[a]!==i[l]){var c=`
`+r[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=l);break}}}finally{jl=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?si(t):""}function oy(t){switch(t.tag){case 5:return si(t.type);case 16:return si("Lazy");case 13:return si("Suspense");case 19:return si("SuspenseList");case 0:case 2:case 15:return t=kl(t.type,!1),t;case 11:return t=kl(t.type.render,!1),t;case 1:return t=kl(t.type,!0),t;default:return""}}function xc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case rr:return"Fragment";case nr:return"Portal";case mc:return"Profiler";case Md:return"StrictMode";case pc:return"Suspense";case gc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case tp:return(t.displayName||"Context")+".Consumer";case ep:return(t._context.displayName||"Context")+".Provider";case Ld:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Dd:return e=t.displayName||null,e!==null?e:xc(t.type)||"Memo";case Is:e=t._payload,t=t._init;try{return xc(t(e))}catch{}}return null}function ly(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xc(e);case 8:return e===Md?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function rn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function np(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function cy(t){var e=np(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var r=s.get,i=s.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){n=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function da(t){t._valueTracker||(t._valueTracker=cy(t))}function rp(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var s=e.getValue(),n="";return t&&(n=np(t)?t.checked?"true":"false":t.value),t=n,t!==s?(e.setValue(t),!0):!1}function ao(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function yc(t,e){var s=e.checked;return Be({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??t._wrapperState.initialChecked})}function Ku(t,e){var s=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;s=rn(e.value!=null?e.value:s),t._wrapperState={initialChecked:n,initialValue:s,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ip(t,e){e=e.checked,e!=null&&Rd(t,"checked",e,!1)}function vc(t,e){ip(t,e);var s=rn(e.value),n=e.type;if(s!=null)n==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+s):t.value!==""+s&&(t.value=""+s);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?bc(t,e.type,s):e.hasOwnProperty("defaultValue")&&bc(t,e.type,rn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Yu(t,e,s){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,s||e===t.value||(t.value=e),t.defaultValue=e}s=t.name,s!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,s!==""&&(t.name=s)}function bc(t,e,s){(e!=="number"||ao(t.ownerDocument)!==t)&&(s==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+s&&(t.defaultValue=""+s))}var ni=Array.isArray;function gr(t,e,s,n){if(t=t.options,e){e={};for(var r=0;r<s.length;r++)e["$"+s[r]]=!0;for(s=0;s<t.length;s++)r=e.hasOwnProperty("$"+t[s].value),t[s].selected!==r&&(t[s].selected=r),r&&n&&(t[s].defaultSelected=!0)}else{for(s=""+rn(s),e=null,r=0;r<t.length;r++){if(t[r].value===s){t[r].selected=!0,n&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function wc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Be({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Gu(t,e){var s=e.value;if(s==null){if(s=e.children,e=e.defaultValue,s!=null){if(e!=null)throw Error(U(92));if(ni(s)){if(1<s.length)throw Error(U(93));s=s[0]}e=s}e==null&&(e=""),s=e}t._wrapperState={initialValue:rn(s)}}function ap(t,e){var s=rn(e.value),n=rn(e.defaultValue);s!=null&&(s=""+s,s!==t.value&&(t.value=s),e.defaultValue==null&&t.defaultValue!==s&&(t.defaultValue=s)),n!=null&&(t.defaultValue=""+n)}function Qu(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function op(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _c(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?op(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ua,lp=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,s,n,r){MSApp.execUnsafeLocalFunction(function(){return t(e,s,n,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ua=ua||document.createElement("div"),ua.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ua.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ti(t,e){if(e){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=e;return}}t.textContent=e}var hi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dy=["Webkit","ms","Moz","O"];Object.keys(hi).forEach(function(t){dy.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),hi[e]=hi[t]})});function cp(t,e,s){return e==null||typeof e=="boolean"||e===""?"":s||typeof e!="number"||e===0||hi.hasOwnProperty(t)&&hi[t]?(""+e).trim():e+"px"}function dp(t,e){t=t.style;for(var s in e)if(e.hasOwnProperty(s)){var n=s.indexOf("--")===0,r=cp(s,e[s],n);s==="float"&&(s="cssFloat"),n?t.setProperty(s,r):t[s]=r}}var uy=Be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jc(t,e){if(e){if(uy[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function kc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nc=null;function Bd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Sc=null,xr=null,yr=null;function Ju(t){if(t=ea(t)){if(typeof Sc!="function")throw Error(U(280));var e=t.stateNode;e&&(e=Qo(e),Sc(t.stateNode,t.type,e))}}function up(t){xr?yr?yr.push(t):yr=[t]:xr=t}function hp(){if(xr){var t=xr,e=yr;if(yr=xr=null,Ju(t),e)for(t=0;t<e.length;t++)Ju(e[t])}}function fp(t,e){return t(e)}function mp(){}var Nl=!1;function pp(t,e,s){if(Nl)return t(e,s);Nl=!0;try{return fp(t,e,s)}finally{Nl=!1,(xr!==null||yr!==null)&&(mp(),hp())}}function Ai(t,e){var s=t.stateNode;if(s===null)return null;var n=Qo(s);if(n===null)return null;s=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(U(231,e,typeof s));return s}var Cc=!1;if(Ps)try{var Wr={};Object.defineProperty(Wr,"passive",{get:function(){Cc=!0}}),window.addEventListener("test",Wr,Wr),window.removeEventListener("test",Wr,Wr)}catch{Cc=!1}function hy(t,e,s,n,r,i,a,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(s,d)}catch(u){this.onError(u)}}var fi=!1,oo=null,lo=!1,Pc=null,fy={onError:function(t){fi=!0,oo=t}};function my(t,e,s,n,r,i,a,l,c){fi=!1,oo=null,hy.apply(fy,arguments)}function py(t,e,s,n,r,i,a,l,c){if(my.apply(this,arguments),fi){if(fi){var d=oo;fi=!1,oo=null}else throw Error(U(198));lo||(lo=!0,Pc=d)}}function Vn(t){var e=t,s=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(s=e.return),t=e.return;while(t)}return e.tag===3?s:null}function gp(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Xu(t){if(Vn(t)!==t)throw Error(U(188))}function gy(t){var e=t.alternate;if(!e){if(e=Vn(t),e===null)throw Error(U(188));return e!==t?null:t}for(var s=t,n=e;;){var r=s.return;if(r===null)break;var i=r.alternate;if(i===null){if(n=r.return,n!==null){s=n;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===s)return Xu(r),t;if(i===n)return Xu(r),e;i=i.sibling}throw Error(U(188))}if(s.return!==n.return)s=r,n=i;else{for(var a=!1,l=r.child;l;){if(l===s){a=!0,s=r,n=i;break}if(l===n){a=!0,n=r,s=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===s){a=!0,s=i,n=r;break}if(l===n){a=!0,n=i,s=r;break}l=l.sibling}if(!a)throw Error(U(189))}}if(s.alternate!==n)throw Error(U(190))}if(s.tag!==3)throw Error(U(188));return s.stateNode.current===s?t:e}function xp(t){return t=gy(t),t!==null?yp(t):null}function yp(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=yp(t);if(e!==null)return e;t=t.sibling}return null}var vp=Ot.unstable_scheduleCallback,Zu=Ot.unstable_cancelCallback,xy=Ot.unstable_shouldYield,yy=Ot.unstable_requestPaint,Fe=Ot.unstable_now,vy=Ot.unstable_getCurrentPriorityLevel,Id=Ot.unstable_ImmediatePriority,bp=Ot.unstable_UserBlockingPriority,co=Ot.unstable_NormalPriority,by=Ot.unstable_LowPriority,wp=Ot.unstable_IdlePriority,qo=null,ds=null;function wy(t){if(ds&&typeof ds.onCommitFiberRoot=="function")try{ds.onCommitFiberRoot(qo,t,void 0,(t.current.flags&128)===128)}catch{}}var es=Math.clz32?Math.clz32:ky,_y=Math.log,jy=Math.LN2;function ky(t){return t>>>=0,t===0?32:31-(_y(t)/jy|0)|0}var ha=64,fa=4194304;function ri(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function uo(t,e){var s=t.pendingLanes;if(s===0)return 0;var n=0,r=t.suspendedLanes,i=t.pingedLanes,a=s&268435455;if(a!==0){var l=a&~r;l!==0?n=ri(l):(i&=a,i!==0&&(n=ri(i)))}else a=s&~r,a!==0?n=ri(a):i!==0&&(n=ri(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&r)&&(r=n&-n,i=e&-e,r>=i||r===16&&(i&4194240)!==0))return e;if(n&4&&(n|=s&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)s=31-es(e),r=1<<s,n|=t[s],e&=~r;return n}function Ny(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Sy(t,e){for(var s=t.suspendedLanes,n=t.pingedLanes,r=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-es(i),l=1<<a,c=r[a];c===-1?(!(l&s)||l&n)&&(r[a]=Ny(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function Ec(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function _p(){var t=ha;return ha<<=1,!(ha&4194240)&&(ha=64),t}function Sl(t){for(var e=[],s=0;31>s;s++)e.push(t);return e}function Xi(t,e,s){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-es(e),t[e]=s}function Cy(t,e){var s=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<s;){var r=31-es(s),i=1<<r;e[r]=0,n[r]=-1,t[r]=-1,s&=~i}}function $d(t,e){var s=t.entangledLanes|=e;for(t=t.entanglements;s;){var n=31-es(s),r=1<<n;r&e|t[n]&e&&(t[n]|=e),s&=~r}}var je=0;function jp(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var kp,zd,Np,Sp,Cp,Tc=!1,ma=[],Ys=null,Gs=null,Qs=null,Oi=new Map,Ri=new Map,zs=[],Py="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function eh(t,e){switch(t){case"focusin":case"focusout":Ys=null;break;case"dragenter":case"dragleave":Gs=null;break;case"mouseover":case"mouseout":Qs=null;break;case"pointerover":case"pointerout":Oi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ri.delete(e.pointerId)}}function Hr(t,e,s,n,r,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:s,eventSystemFlags:n,nativeEvent:i,targetContainers:[r]},e!==null&&(e=ea(e),e!==null&&zd(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function Ey(t,e,s,n,r){switch(e){case"focusin":return Ys=Hr(Ys,t,e,s,n,r),!0;case"dragenter":return Gs=Hr(Gs,t,e,s,n,r),!0;case"mouseover":return Qs=Hr(Qs,t,e,s,n,r),!0;case"pointerover":var i=r.pointerId;return Oi.set(i,Hr(Oi.get(i)||null,t,e,s,n,r)),!0;case"gotpointercapture":return i=r.pointerId,Ri.set(i,Hr(Ri.get(i)||null,t,e,s,n,r)),!0}return!1}function Pp(t){var e=Pn(t.target);if(e!==null){var s=Vn(e);if(s!==null){if(e=s.tag,e===13){if(e=gp(s),e!==null){t.blockedOn=e,Cp(t.priority,function(){Np(s)});return}}else if(e===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Va(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var s=Ac(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(s===null){s=t.nativeEvent;var n=new s.constructor(s.type,s);Nc=n,s.target.dispatchEvent(n),Nc=null}else return e=ea(s),e!==null&&zd(e),t.blockedOn=s,!1;e.shift()}return!0}function th(t,e,s){Va(t)&&s.delete(e)}function Ty(){Tc=!1,Ys!==null&&Va(Ys)&&(Ys=null),Gs!==null&&Va(Gs)&&(Gs=null),Qs!==null&&Va(Qs)&&(Qs=null),Oi.forEach(th),Ri.forEach(th)}function Vr(t,e){t.blockedOn===e&&(t.blockedOn=null,Tc||(Tc=!0,Ot.unstable_scheduleCallback(Ot.unstable_NormalPriority,Ty)))}function Mi(t){function e(r){return Vr(r,t)}if(0<ma.length){Vr(ma[0],t);for(var s=1;s<ma.length;s++){var n=ma[s];n.blockedOn===t&&(n.blockedOn=null)}}for(Ys!==null&&Vr(Ys,t),Gs!==null&&Vr(Gs,t),Qs!==null&&Vr(Qs,t),Oi.forEach(e),Ri.forEach(e),s=0;s<zs.length;s++)n=zs[s],n.blockedOn===t&&(n.blockedOn=null);for(;0<zs.length&&(s=zs[0],s.blockedOn===null);)Pp(s),s.blockedOn===null&&zs.shift()}var vr=Os.ReactCurrentBatchConfig,ho=!0;function Ay(t,e,s,n){var r=je,i=vr.transition;vr.transition=null;try{je=1,Fd(t,e,s,n)}finally{je=r,vr.transition=i}}function Oy(t,e,s,n){var r=je,i=vr.transition;vr.transition=null;try{je=4,Fd(t,e,s,n)}finally{je=r,vr.transition=i}}function Fd(t,e,s,n){if(ho){var r=Ac(t,e,s,n);if(r===null)Dl(t,e,n,fo,s),eh(t,n);else if(Ey(r,t,e,s,n))n.stopPropagation();else if(eh(t,n),e&4&&-1<Py.indexOf(t)){for(;r!==null;){var i=ea(r);if(i!==null&&kp(i),i=Ac(t,e,s,n),i===null&&Dl(t,e,n,fo,s),i===r)break;r=i}r!==null&&n.stopPropagation()}else Dl(t,e,n,null,s)}}var fo=null;function Ac(t,e,s,n){if(fo=null,t=Bd(n),t=Pn(t),t!==null)if(e=Vn(t),e===null)t=null;else if(s=e.tag,s===13){if(t=gp(e),t!==null)return t;t=null}else if(s===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return fo=t,null}function Ep(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vy()){case Id:return 1;case bp:return 4;case co:case by:return 16;case wp:return 536870912;default:return 16}default:return 16}}var Ws=null,Ud=null,qa=null;function Tp(){if(qa)return qa;var t,e=Ud,s=e.length,n,r="value"in Ws?Ws.value:Ws.textContent,i=r.length;for(t=0;t<s&&e[t]===r[t];t++);var a=s-t;for(n=1;n<=a&&e[s-n]===r[i-n];n++);return qa=r.slice(t,1<n?1-n:void 0)}function Ka(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function pa(){return!0}function sh(){return!1}function Mt(t){function e(s,n,r,i,a){this._reactName=s,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(s=t[l],this[l]=s?s(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?pa:sh,this.isPropagationStopped=sh,this}return Be(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=pa)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=pa)},persist:function(){},isPersistent:pa}),e}var Ir={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wd=Mt(Ir),Zi=Be({},Ir,{view:0,detail:0}),Ry=Mt(Zi),Cl,Pl,qr,Ko=Be({},Zi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==qr&&(qr&&t.type==="mousemove"?(Cl=t.screenX-qr.screenX,Pl=t.screenY-qr.screenY):Pl=Cl=0,qr=t),Cl)},movementY:function(t){return"movementY"in t?t.movementY:Pl}}),nh=Mt(Ko),My=Be({},Ko,{dataTransfer:0}),Ly=Mt(My),Dy=Be({},Zi,{relatedTarget:0}),El=Mt(Dy),By=Be({},Ir,{animationName:0,elapsedTime:0,pseudoElement:0}),Iy=Mt(By),$y=Be({},Ir,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),zy=Mt($y),Fy=Be({},Ir,{data:0}),rh=Mt(Fy),Uy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vy(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Hy[t])?!!e[t]:!1}function Hd(){return Vy}var qy=Be({},Zi,{key:function(t){if(t.key){var e=Uy[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ka(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Wy[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hd,charCode:function(t){return t.type==="keypress"?Ka(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ka(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ky=Mt(qy),Yy=Be({},Ko,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ih=Mt(Yy),Gy=Be({},Zi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hd}),Qy=Mt(Gy),Jy=Be({},Ir,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xy=Mt(Jy),Zy=Be({},Ko,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ev=Mt(Zy),tv=[9,13,27,32],Vd=Ps&&"CompositionEvent"in window,mi=null;Ps&&"documentMode"in document&&(mi=document.documentMode);var sv=Ps&&"TextEvent"in window&&!mi,Ap=Ps&&(!Vd||mi&&8<mi&&11>=mi),ah=" ",oh=!1;function Op(t,e){switch(t){case"keyup":return tv.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rp(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ir=!1;function nv(t,e){switch(t){case"compositionend":return Rp(e);case"keypress":return e.which!==32?null:(oh=!0,ah);case"textInput":return t=e.data,t===ah&&oh?null:t;default:return null}}function rv(t,e){if(ir)return t==="compositionend"||!Vd&&Op(t,e)?(t=Tp(),qa=Ud=Ws=null,ir=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Ap&&e.locale!=="ko"?null:e.data;default:return null}}var iv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!iv[t.type]:e==="textarea"}function Mp(t,e,s,n){up(n),e=mo(e,"onChange"),0<e.length&&(s=new Wd("onChange","change",null,s,n),t.push({event:s,listeners:e}))}var pi=null,Li=null;function av(t){Vp(t,0)}function Yo(t){var e=lr(t);if(rp(e))return t}function ov(t,e){if(t==="change")return e}var Lp=!1;if(Ps){var Tl;if(Ps){var Al="oninput"in document;if(!Al){var ch=document.createElement("div");ch.setAttribute("oninput","return;"),Al=typeof ch.oninput=="function"}Tl=Al}else Tl=!1;Lp=Tl&&(!document.documentMode||9<document.documentMode)}function dh(){pi&&(pi.detachEvent("onpropertychange",Dp),Li=pi=null)}function Dp(t){if(t.propertyName==="value"&&Yo(Li)){var e=[];Mp(e,Li,t,Bd(t)),pp(av,e)}}function lv(t,e,s){t==="focusin"?(dh(),pi=e,Li=s,pi.attachEvent("onpropertychange",Dp)):t==="focusout"&&dh()}function cv(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Yo(Li)}function dv(t,e){if(t==="click")return Yo(e)}function uv(t,e){if(t==="input"||t==="change")return Yo(e)}function hv(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ss=typeof Object.is=="function"?Object.is:hv;function Di(t,e){if(ss(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var s=Object.keys(t),n=Object.keys(e);if(s.length!==n.length)return!1;for(n=0;n<s.length;n++){var r=s[n];if(!fc.call(e,r)||!ss(t[r],e[r]))return!1}return!0}function uh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function hh(t,e){var s=uh(t);t=0;for(var n;s;){if(s.nodeType===3){if(n=t+s.textContent.length,t<=e&&n>=e)return{node:s,offset:e-t};t=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=uh(s)}}function Bp(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Bp(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Ip(){for(var t=window,e=ao();e instanceof t.HTMLIFrameElement;){try{var s=typeof e.contentWindow.location.href=="string"}catch{s=!1}if(s)t=e.contentWindow;else break;e=ao(t.document)}return e}function qd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function fv(t){var e=Ip(),s=t.focusedElem,n=t.selectionRange;if(e!==s&&s&&s.ownerDocument&&Bp(s.ownerDocument.documentElement,s)){if(n!==null&&qd(s)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in s)s.selectionStart=e,s.selectionEnd=Math.min(t,s.value.length);else if(t=(e=s.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=s.textContent.length,i=Math.min(n.start,r);n=n.end===void 0?i:Math.min(n.end,r),!t.extend&&i>n&&(r=n,n=i,i=r),r=hh(s,i);var a=hh(s,n);r&&a&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=s;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<e.length;s++)t=e[s],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var mv=Ps&&"documentMode"in document&&11>=document.documentMode,ar=null,Oc=null,gi=null,Rc=!1;function fh(t,e,s){var n=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Rc||ar==null||ar!==ao(n)||(n=ar,"selectionStart"in n&&qd(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),gi&&Di(gi,n)||(gi=n,n=mo(Oc,"onSelect"),0<n.length&&(e=new Wd("onSelect","select",null,e,s),t.push({event:e,listeners:n}),e.target=ar)))}function ga(t,e){var s={};return s[t.toLowerCase()]=e.toLowerCase(),s["Webkit"+t]="webkit"+e,s["Moz"+t]="moz"+e,s}var or={animationend:ga("Animation","AnimationEnd"),animationiteration:ga("Animation","AnimationIteration"),animationstart:ga("Animation","AnimationStart"),transitionend:ga("Transition","TransitionEnd")},Ol={},$p={};Ps&&($p=document.createElement("div").style,"AnimationEvent"in window||(delete or.animationend.animation,delete or.animationiteration.animation,delete or.animationstart.animation),"TransitionEvent"in window||delete or.transitionend.transition);function Go(t){if(Ol[t])return Ol[t];if(!or[t])return t;var e=or[t],s;for(s in e)if(e.hasOwnProperty(s)&&s in $p)return Ol[t]=e[s];return t}var zp=Go("animationend"),Fp=Go("animationiteration"),Up=Go("animationstart"),Wp=Go("transitionend"),Hp=new Map,mh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function dn(t,e){Hp.set(t,e),Hn(e,[t])}for(var Rl=0;Rl<mh.length;Rl++){var Ml=mh[Rl],pv=Ml.toLowerCase(),gv=Ml[0].toUpperCase()+Ml.slice(1);dn(pv,"on"+gv)}dn(zp,"onAnimationEnd");dn(Fp,"onAnimationIteration");dn(Up,"onAnimationStart");dn("dblclick","onDoubleClick");dn("focusin","onFocus");dn("focusout","onBlur");dn(Wp,"onTransitionEnd");kr("onMouseEnter",["mouseout","mouseover"]);kr("onMouseLeave",["mouseout","mouseover"]);kr("onPointerEnter",["pointerout","pointerover"]);kr("onPointerLeave",["pointerout","pointerover"]);Hn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Hn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Hn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Hn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Hn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Hn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ii="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xv=new Set("cancel close invalid load scroll toggle".split(" ").concat(ii));function ph(t,e,s){var n=t.type||"unknown-event";t.currentTarget=s,py(n,e,void 0,t),t.currentTarget=null}function Vp(t,e){e=(e&4)!==0;for(var s=0;s<t.length;s++){var n=t[s],r=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var a=n.length-1;0<=a;a--){var l=n[a],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&r.isPropagationStopped())break e;ph(r,l,d),i=c}else for(a=0;a<n.length;a++){if(l=n[a],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&r.isPropagationStopped())break e;ph(r,l,d),i=c}}}if(lo)throw t=Pc,lo=!1,Pc=null,t}function Te(t,e){var s=e[Ic];s===void 0&&(s=e[Ic]=new Set);var n=t+"__bubble";s.has(n)||(qp(e,t,2,!1),s.add(n))}function Ll(t,e,s){var n=0;e&&(n|=4),qp(s,t,n,e)}var xa="_reactListening"+Math.random().toString(36).slice(2);function Bi(t){if(!t[xa]){t[xa]=!0,Zm.forEach(function(s){s!=="selectionchange"&&(xv.has(s)||Ll(s,!1,t),Ll(s,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[xa]||(e[xa]=!0,Ll("selectionchange",!1,e))}}function qp(t,e,s,n){switch(Ep(e)){case 1:var r=Ay;break;case 4:r=Oy;break;default:r=Fd}s=r.bind(null,e,s,t),r=void 0,!Cc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),n?r!==void 0?t.addEventListener(e,s,{capture:!0,passive:r}):t.addEventListener(e,s,!0):r!==void 0?t.addEventListener(e,s,{passive:r}):t.addEventListener(e,s,!1)}function Dl(t,e,s,n,r){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var l=n.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(a===4)for(a=n.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;a=a.return}for(;l!==null;){if(a=Pn(l),a===null)return;if(c=a.tag,c===5||c===6){n=i=a;continue e}l=l.parentNode}}n=n.return}pp(function(){var d=i,u=Bd(s),h=[];e:{var f=Hp.get(t);if(f!==void 0){var m=Wd,p=t;switch(t){case"keypress":if(Ka(s)===0)break e;case"keydown":case"keyup":m=Ky;break;case"focusin":p="focus",m=El;break;case"focusout":p="blur",m=El;break;case"beforeblur":case"afterblur":m=El;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=nh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Ly;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Qy;break;case zp:case Fp:case Up:m=Iy;break;case Wp:m=Xy;break;case"scroll":m=Ry;break;case"wheel":m=ev;break;case"copy":case"cut":case"paste":m=zy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=ih}var y=(e&4)!==0,b=!y&&t==="scroll",x=y?f!==null?f+"Capture":null:f;y=[];for(var g=d,v;g!==null;){v=g;var w=v.stateNode;if(v.tag===5&&w!==null&&(v=w,x!==null&&(w=Ai(g,x),w!=null&&y.push(Ii(g,w,v)))),b)break;g=g.return}0<y.length&&(f=new m(f,p,null,s,u),h.push({event:f,listeners:y}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&s!==Nc&&(p=s.relatedTarget||s.fromElement)&&(Pn(p)||p[Es]))break e;if((m||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,m?(p=s.relatedTarget||s.toElement,m=d,p=p?Pn(p):null,p!==null&&(b=Vn(p),p!==b||p.tag!==5&&p.tag!==6)&&(p=null)):(m=null,p=d),m!==p)){if(y=nh,w="onMouseLeave",x="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(y=ih,w="onPointerLeave",x="onPointerEnter",g="pointer"),b=m==null?f:lr(m),v=p==null?f:lr(p),f=new y(w,g+"leave",m,s,u),f.target=b,f.relatedTarget=v,w=null,Pn(u)===d&&(y=new y(x,g+"enter",p,s,u),y.target=v,y.relatedTarget=b,w=y),b=w,m&&p)t:{for(y=m,x=p,g=0,v=y;v;v=Yn(v))g++;for(v=0,w=x;w;w=Yn(w))v++;for(;0<g-v;)y=Yn(y),g--;for(;0<v-g;)x=Yn(x),v--;for(;g--;){if(y===x||x!==null&&y===x.alternate)break t;y=Yn(y),x=Yn(x)}y=null}else y=null;m!==null&&gh(h,f,m,y,!1),p!==null&&b!==null&&gh(h,b,p,y,!0)}}e:{if(f=d?lr(d):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var _=ov;else if(lh(f))if(Lp)_=uv;else{_=cv;var S=lv}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=dv);if(_&&(_=_(t,d))){Mp(h,_,s,u);break e}S&&S(t,f,d),t==="focusout"&&(S=f._wrapperState)&&S.controlled&&f.type==="number"&&bc(f,"number",f.value)}switch(S=d?lr(d):window,t){case"focusin":(lh(S)||S.contentEditable==="true")&&(ar=S,Oc=d,gi=null);break;case"focusout":gi=Oc=ar=null;break;case"mousedown":Rc=!0;break;case"contextmenu":case"mouseup":case"dragend":Rc=!1,fh(h,s,u);break;case"selectionchange":if(mv)break;case"keydown":case"keyup":fh(h,s,u)}var P;if(Vd)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else ir?Op(t,s)&&(E="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(E="onCompositionStart");E&&(Ap&&s.locale!=="ko"&&(ir||E!=="onCompositionStart"?E==="onCompositionEnd"&&ir&&(P=Tp()):(Ws=u,Ud="value"in Ws?Ws.value:Ws.textContent,ir=!0)),S=mo(d,E),0<S.length&&(E=new rh(E,t,null,s,u),h.push({event:E,listeners:S}),P?E.data=P:(P=Rp(s),P!==null&&(E.data=P)))),(P=sv?nv(t,s):rv(t,s))&&(d=mo(d,"onBeforeInput"),0<d.length&&(u=new rh("onBeforeInput","beforeinput",null,s,u),h.push({event:u,listeners:d}),u.data=P))}Vp(h,e)})}function Ii(t,e,s){return{instance:t,listener:e,currentTarget:s}}function mo(t,e){for(var s=e+"Capture",n=[];t!==null;){var r=t,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=Ai(t,s),i!=null&&n.unshift(Ii(t,i,r)),i=Ai(t,e),i!=null&&n.push(Ii(t,i,r))),t=t.return}return n}function Yn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function gh(t,e,s,n,r){for(var i=e._reactName,a=[];s!==null&&s!==n;){var l=s,c=l.alternate,d=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&d!==null&&(l=d,r?(c=Ai(s,i),c!=null&&a.unshift(Ii(s,c,l))):r||(c=Ai(s,i),c!=null&&a.push(Ii(s,c,l)))),s=s.return}a.length!==0&&t.push({event:e,listeners:a})}var yv=/\r\n?/g,vv=/\u0000|\uFFFD/g;function xh(t){return(typeof t=="string"?t:""+t).replace(yv,`
`).replace(vv,"")}function ya(t,e,s){if(e=xh(e),xh(t)!==e&&s)throw Error(U(425))}function po(){}var Mc=null,Lc=null;function Dc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Bc=typeof setTimeout=="function"?setTimeout:void 0,bv=typeof clearTimeout=="function"?clearTimeout:void 0,yh=typeof Promise=="function"?Promise:void 0,wv=typeof queueMicrotask=="function"?queueMicrotask:typeof yh<"u"?function(t){return yh.resolve(null).then(t).catch(_v)}:Bc;function _v(t){setTimeout(function(){throw t})}function Bl(t,e){var s=e,n=0;do{var r=s.nextSibling;if(t.removeChild(s),r&&r.nodeType===8)if(s=r.data,s==="/$"){if(n===0){t.removeChild(r),Mi(e);return}n--}else s!=="$"&&s!=="$?"&&s!=="$!"||n++;s=r}while(s);Mi(e)}function Js(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function vh(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(e===0)return t;e--}else s==="/$"&&e++}t=t.previousSibling}return null}var $r=Math.random().toString(36).slice(2),cs="__reactFiber$"+$r,$i="__reactProps$"+$r,Es="__reactContainer$"+$r,Ic="__reactEvents$"+$r,jv="__reactListeners$"+$r,kv="__reactHandles$"+$r;function Pn(t){var e=t[cs];if(e)return e;for(var s=t.parentNode;s;){if(e=s[Es]||s[cs]){if(s=e.alternate,e.child!==null||s!==null&&s.child!==null)for(t=vh(t);t!==null;){if(s=t[cs])return s;t=vh(t)}return e}t=s,s=t.parentNode}return null}function ea(t){return t=t[cs]||t[Es],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function lr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function Qo(t){return t[$i]||null}var $c=[],cr=-1;function un(t){return{current:t}}function Oe(t){0>cr||(t.current=$c[cr],$c[cr]=null,cr--)}function Ee(t,e){cr++,$c[cr]=t.current,t.current=e}var an={},at=un(an),wt=un(!1),Dn=an;function Nr(t,e){var s=t.type.contextTypes;if(!s)return an;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in s)r[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function _t(t){return t=t.childContextTypes,t!=null}function go(){Oe(wt),Oe(at)}function bh(t,e,s){if(at.current!==an)throw Error(U(168));Ee(at,e),Ee(wt,s)}function Kp(t,e,s){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return s;n=n.getChildContext();for(var r in n)if(!(r in e))throw Error(U(108,ly(t)||"Unknown",r));return Be({},s,n)}function xo(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||an,Dn=at.current,Ee(at,t),Ee(wt,wt.current),!0}function wh(t,e,s){var n=t.stateNode;if(!n)throw Error(U(169));s?(t=Kp(t,e,Dn),n.__reactInternalMemoizedMergedChildContext=t,Oe(wt),Oe(at),Ee(at,t)):Oe(wt),Ee(wt,s)}var ws=null,Jo=!1,Il=!1;function Yp(t){ws===null?ws=[t]:ws.push(t)}function Nv(t){Jo=!0,Yp(t)}function hn(){if(!Il&&ws!==null){Il=!0;var t=0,e=je;try{var s=ws;for(je=1;t<s.length;t++){var n=s[t];do n=n(!0);while(n!==null)}ws=null,Jo=!1}catch(r){throw ws!==null&&(ws=ws.slice(t+1)),vp(Id,hn),r}finally{je=e,Il=!1}}return null}var dr=[],ur=0,yo=null,vo=0,Bt=[],It=0,Bn=null,js=1,ks="";function _n(t,e){dr[ur++]=vo,dr[ur++]=yo,yo=t,vo=e}function Gp(t,e,s){Bt[It++]=js,Bt[It++]=ks,Bt[It++]=Bn,Bn=t;var n=js;t=ks;var r=32-es(n)-1;n&=~(1<<r),s+=1;var i=32-es(e)+r;if(30<i){var a=r-r%5;i=(n&(1<<a)-1).toString(32),n>>=a,r-=a,js=1<<32-es(e)+r|s<<r|n,ks=i+t}else js=1<<i|s<<r|n,ks=t}function Kd(t){t.return!==null&&(_n(t,1),Gp(t,1,0))}function Yd(t){for(;t===yo;)yo=dr[--ur],dr[ur]=null,vo=dr[--ur],dr[ur]=null;for(;t===Bn;)Bn=Bt[--It],Bt[It]=null,ks=Bt[--It],Bt[It]=null,js=Bt[--It],Bt[It]=null}var Tt=null,Ct=null,Re=!1,Xt=null;function Qp(t,e){var s=$t(5,null,null,0);s.elementType="DELETED",s.stateNode=e,s.return=t,e=t.deletions,e===null?(t.deletions=[s],t.flags|=16):e.push(s)}function _h(t,e){switch(t.tag){case 5:var s=t.type;return e=e.nodeType!==1||s.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Tt=t,Ct=Js(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Tt=t,Ct=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(s=Bn!==null?{id:js,overflow:ks}:null,t.memoizedState={dehydrated:e,treeContext:s,retryLane:1073741824},s=$t(18,null,null,0),s.stateNode=e,s.return=t,t.child=s,Tt=t,Ct=null,!0):!1;default:return!1}}function zc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Fc(t){if(Re){var e=Ct;if(e){var s=e;if(!_h(t,e)){if(zc(t))throw Error(U(418));e=Js(s.nextSibling);var n=Tt;e&&_h(t,e)?Qp(n,s):(t.flags=t.flags&-4097|2,Re=!1,Tt=t)}}else{if(zc(t))throw Error(U(418));t.flags=t.flags&-4097|2,Re=!1,Tt=t}}}function jh(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Tt=t}function va(t){if(t!==Tt)return!1;if(!Re)return jh(t),Re=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Dc(t.type,t.memoizedProps)),e&&(e=Ct)){if(zc(t))throw Jp(),Error(U(418));for(;e;)Qp(t,e),e=Js(e.nextSibling)}if(jh(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"){if(e===0){Ct=Js(t.nextSibling);break e}e--}else s!=="$"&&s!=="$!"&&s!=="$?"||e++}t=t.nextSibling}Ct=null}}else Ct=Tt?Js(t.stateNode.nextSibling):null;return!0}function Jp(){for(var t=Ct;t;)t=Js(t.nextSibling)}function Sr(){Ct=Tt=null,Re=!1}function Gd(t){Xt===null?Xt=[t]:Xt.push(t)}var Sv=Os.ReactCurrentBatchConfig;function Kr(t,e,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(U(309));var n=s.stateNode}if(!n)throw Error(U(147,t));var r=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var l=r.refs;a===null?delete l[i]:l[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(U(284));if(!s._owner)throw Error(U(290,t))}return t}function ba(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function kh(t){var e=t._init;return e(t._payload)}function Xp(t){function e(x,g){if(t){var v=x.deletions;v===null?(x.deletions=[g],x.flags|=16):v.push(g)}}function s(x,g){if(!t)return null;for(;g!==null;)e(x,g),g=g.sibling;return null}function n(x,g){for(x=new Map;g!==null;)g.key!==null?x.set(g.key,g):x.set(g.index,g),g=g.sibling;return x}function r(x,g){return x=tn(x,g),x.index=0,x.sibling=null,x}function i(x,g,v){return x.index=v,t?(v=x.alternate,v!==null?(v=v.index,v<g?(x.flags|=2,g):v):(x.flags|=2,g)):(x.flags|=1048576,g)}function a(x){return t&&x.alternate===null&&(x.flags|=2),x}function l(x,g,v,w){return g===null||g.tag!==6?(g=Vl(v,x.mode,w),g.return=x,g):(g=r(g,v),g.return=x,g)}function c(x,g,v,w){var _=v.type;return _===rr?u(x,g,v.props.children,w,v.key):g!==null&&(g.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Is&&kh(_)===g.type)?(w=r(g,v.props),w.ref=Kr(x,g,v),w.return=x,w):(w=eo(v.type,v.key,v.props,null,x.mode,w),w.ref=Kr(x,g,v),w.return=x,w)}function d(x,g,v,w){return g===null||g.tag!==4||g.stateNode.containerInfo!==v.containerInfo||g.stateNode.implementation!==v.implementation?(g=ql(v,x.mode,w),g.return=x,g):(g=r(g,v.children||[]),g.return=x,g)}function u(x,g,v,w,_){return g===null||g.tag!==7?(g=Rn(v,x.mode,w,_),g.return=x,g):(g=r(g,v),g.return=x,g)}function h(x,g,v){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Vl(""+g,x.mode,v),g.return=x,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case ca:return v=eo(g.type,g.key,g.props,null,x.mode,v),v.ref=Kr(x,null,g),v.return=x,v;case nr:return g=ql(g,x.mode,v),g.return=x,g;case Is:var w=g._init;return h(x,w(g._payload),v)}if(ni(g)||Ur(g))return g=Rn(g,x.mode,v,null),g.return=x,g;ba(x,g)}return null}function f(x,g,v,w){var _=g!==null?g.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return _!==null?null:l(x,g,""+v,w);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ca:return v.key===_?c(x,g,v,w):null;case nr:return v.key===_?d(x,g,v,w):null;case Is:return _=v._init,f(x,g,_(v._payload),w)}if(ni(v)||Ur(v))return _!==null?null:u(x,g,v,w,null);ba(x,v)}return null}function m(x,g,v,w,_){if(typeof w=="string"&&w!==""||typeof w=="number")return x=x.get(v)||null,l(g,x,""+w,_);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ca:return x=x.get(w.key===null?v:w.key)||null,c(g,x,w,_);case nr:return x=x.get(w.key===null?v:w.key)||null,d(g,x,w,_);case Is:var S=w._init;return m(x,g,v,S(w._payload),_)}if(ni(w)||Ur(w))return x=x.get(v)||null,u(g,x,w,_,null);ba(g,w)}return null}function p(x,g,v,w){for(var _=null,S=null,P=g,E=g=0,k=null;P!==null&&E<v.length;E++){P.index>E?(k=P,P=null):k=P.sibling;var T=f(x,P,v[E],w);if(T===null){P===null&&(P=k);break}t&&P&&T.alternate===null&&e(x,P),g=i(T,g,E),S===null?_=T:S.sibling=T,S=T,P=k}if(E===v.length)return s(x,P),Re&&_n(x,E),_;if(P===null){for(;E<v.length;E++)P=h(x,v[E],w),P!==null&&(g=i(P,g,E),S===null?_=P:S.sibling=P,S=P);return Re&&_n(x,E),_}for(P=n(x,P);E<v.length;E++)k=m(P,x,E,v[E],w),k!==null&&(t&&k.alternate!==null&&P.delete(k.key===null?E:k.key),g=i(k,g,E),S===null?_=k:S.sibling=k,S=k);return t&&P.forEach(function(R){return e(x,R)}),Re&&_n(x,E),_}function y(x,g,v,w){var _=Ur(v);if(typeof _!="function")throw Error(U(150));if(v=_.call(v),v==null)throw Error(U(151));for(var S=_=null,P=g,E=g=0,k=null,T=v.next();P!==null&&!T.done;E++,T=v.next()){P.index>E?(k=P,P=null):k=P.sibling;var R=f(x,P,T.value,w);if(R===null){P===null&&(P=k);break}t&&P&&R.alternate===null&&e(x,P),g=i(R,g,E),S===null?_=R:S.sibling=R,S=R,P=k}if(T.done)return s(x,P),Re&&_n(x,E),_;if(P===null){for(;!T.done;E++,T=v.next())T=h(x,T.value,w),T!==null&&(g=i(T,g,E),S===null?_=T:S.sibling=T,S=T);return Re&&_n(x,E),_}for(P=n(x,P);!T.done;E++,T=v.next())T=m(P,x,E,T.value,w),T!==null&&(t&&T.alternate!==null&&P.delete(T.key===null?E:T.key),g=i(T,g,E),S===null?_=T:S.sibling=T,S=T);return t&&P.forEach(function($){return e(x,$)}),Re&&_n(x,E),_}function b(x,g,v,w){if(typeof v=="object"&&v!==null&&v.type===rr&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case ca:e:{for(var _=v.key,S=g;S!==null;){if(S.key===_){if(_=v.type,_===rr){if(S.tag===7){s(x,S.sibling),g=r(S,v.props.children),g.return=x,x=g;break e}}else if(S.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Is&&kh(_)===S.type){s(x,S.sibling),g=r(S,v.props),g.ref=Kr(x,S,v),g.return=x,x=g;break e}s(x,S);break}else e(x,S);S=S.sibling}v.type===rr?(g=Rn(v.props.children,x.mode,w,v.key),g.return=x,x=g):(w=eo(v.type,v.key,v.props,null,x.mode,w),w.ref=Kr(x,g,v),w.return=x,x=w)}return a(x);case nr:e:{for(S=v.key;g!==null;){if(g.key===S)if(g.tag===4&&g.stateNode.containerInfo===v.containerInfo&&g.stateNode.implementation===v.implementation){s(x,g.sibling),g=r(g,v.children||[]),g.return=x,x=g;break e}else{s(x,g);break}else e(x,g);g=g.sibling}g=ql(v,x.mode,w),g.return=x,x=g}return a(x);case Is:return S=v._init,b(x,g,S(v._payload),w)}if(ni(v))return p(x,g,v,w);if(Ur(v))return y(x,g,v,w);ba(x,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,g!==null&&g.tag===6?(s(x,g.sibling),g=r(g,v),g.return=x,x=g):(s(x,g),g=Vl(v,x.mode,w),g.return=x,x=g),a(x)):s(x,g)}return b}var Cr=Xp(!0),Zp=Xp(!1),bo=un(null),wo=null,hr=null,Qd=null;function Jd(){Qd=hr=wo=null}function Xd(t){var e=bo.current;Oe(bo),t._currentValue=e}function Uc(t,e,s){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===s)break;t=t.return}}function br(t,e){wo=t,Qd=hr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(bt=!0),t.firstContext=null)}function Ut(t){var e=t._currentValue;if(Qd!==t)if(t={context:t,memoizedValue:e,next:null},hr===null){if(wo===null)throw Error(U(308));hr=t,wo.dependencies={lanes:0,firstContext:t}}else hr=hr.next=t;return e}var En=null;function Zd(t){En===null?En=[t]:En.push(t)}function eg(t,e,s,n){var r=e.interleaved;return r===null?(s.next=s,Zd(e)):(s.next=r.next,r.next=s),e.interleaved=s,Ts(t,n)}function Ts(t,e){t.lanes|=e;var s=t.alternate;for(s!==null&&(s.lanes|=e),s=t,t=t.return;t!==null;)t.childLanes|=e,s=t.alternate,s!==null&&(s.childLanes|=e),s=t,t=t.return;return s.tag===3?s.stateNode:null}var $s=!1;function eu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function tg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Cs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Xs(t,e,s){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,be&2){var r=n.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),n.pending=e,Ts(t,s)}return r=n.interleaved,r===null?(e.next=e,Zd(n)):(e.next=r.next,r.next=e),n.interleaved=e,Ts(t,s)}function Ya(t,e,s){if(e=e.updateQueue,e!==null&&(e=e.shared,(s&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,s|=n,e.lanes=s,$d(t,s)}}function Nh(t,e){var s=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,s===n)){var r=null,i=null;if(s=s.firstBaseUpdate,s!==null){do{var a={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};i===null?r=i=a:i=i.next=a,s=s.next}while(s!==null);i===null?r=i=e:i=i.next=e}else r=i=e;s={baseState:n.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=e:t.next=e,s.lastBaseUpdate=e}function _o(t,e,s,n){var r=t.updateQueue;$s=!1;var i=r.firstBaseUpdate,a=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var c=l,d=c.next;c.next=null,a===null?i=d:a.next=d,a=c;var u=t.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==a&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(i!==null){var h=r.baseState;a=0,u=d=c=null,l=i;do{var f=l.lane,m=l.eventTime;if((n&f)===f){u!==null&&(u=u.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=t,y=l;switch(f=e,m=s,y.tag){case 1:if(p=y.payload,typeof p=="function"){h=p.call(m,h,f);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=y.payload,f=typeof p=="function"?p.call(m,h,f):p,f==null)break e;h=Be({},h,f);break e;case 2:$s=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[l]:f.push(l))}else m={eventTime:m,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=m,c=h):u=u.next=m,a|=f;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;f=l,l=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(u===null&&(c=h),r.baseState=c,r.firstBaseUpdate=d,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else i===null&&(r.shared.lanes=0);$n|=a,t.lanes=a,t.memoizedState=h}}function Sh(t,e,s){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],r=n.callback;if(r!==null){if(n.callback=null,n=s,typeof r!="function")throw Error(U(191,r));r.call(n)}}}var ta={},us=un(ta),zi=un(ta),Fi=un(ta);function Tn(t){if(t===ta)throw Error(U(174));return t}function tu(t,e){switch(Ee(Fi,e),Ee(zi,t),Ee(us,ta),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:_c(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=_c(e,t)}Oe(us),Ee(us,e)}function Pr(){Oe(us),Oe(zi),Oe(Fi)}function sg(t){Tn(Fi.current);var e=Tn(us.current),s=_c(e,t.type);e!==s&&(Ee(zi,t),Ee(us,s))}function su(t){zi.current===t&&(Oe(us),Oe(zi))}var Le=un(0);function jo(t){for(var e=t;e!==null;){if(e.tag===13){var s=e.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var $l=[];function nu(){for(var t=0;t<$l.length;t++)$l[t]._workInProgressVersionPrimary=null;$l.length=0}var Ga=Os.ReactCurrentDispatcher,zl=Os.ReactCurrentBatchConfig,In=0,De=null,qe=null,Ge=null,ko=!1,xi=!1,Ui=0,Cv=0;function st(){throw Error(U(321))}function ru(t,e){if(e===null)return!1;for(var s=0;s<e.length&&s<t.length;s++)if(!ss(t[s],e[s]))return!1;return!0}function iu(t,e,s,n,r,i){if(In=i,De=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ga.current=t===null||t.memoizedState===null?Av:Ov,t=s(n,r),xi){i=0;do{if(xi=!1,Ui=0,25<=i)throw Error(U(301));i+=1,Ge=qe=null,e.updateQueue=null,Ga.current=Rv,t=s(n,r)}while(xi)}if(Ga.current=No,e=qe!==null&&qe.next!==null,In=0,Ge=qe=De=null,ko=!1,e)throw Error(U(300));return t}function au(){var t=Ui!==0;return Ui=0,t}function os(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ge===null?De.memoizedState=Ge=t:Ge=Ge.next=t,Ge}function Wt(){if(qe===null){var t=De.alternate;t=t!==null?t.memoizedState:null}else t=qe.next;var e=Ge===null?De.memoizedState:Ge.next;if(e!==null)Ge=e,qe=t;else{if(t===null)throw Error(U(310));qe=t,t={memoizedState:qe.memoizedState,baseState:qe.baseState,baseQueue:qe.baseQueue,queue:qe.queue,next:null},Ge===null?De.memoizedState=Ge=t:Ge=Ge.next=t}return Ge}function Wi(t,e){return typeof e=="function"?e(t):e}function Fl(t){var e=Wt(),s=e.queue;if(s===null)throw Error(U(311));s.lastRenderedReducer=t;var n=qe,r=n.baseQueue,i=s.pending;if(i!==null){if(r!==null){var a=r.next;r.next=i.next,i.next=a}n.baseQueue=r=i,s.pending=null}if(r!==null){i=r.next,n=n.baseState;var l=a=null,c=null,d=i;do{var u=d.lane;if((In&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:t(n,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=h,a=n):c=c.next=h,De.lanes|=u,$n|=u}d=d.next}while(d!==null&&d!==i);c===null?a=n:c.next=l,ss(n,e.memoizedState)||(bt=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=c,s.lastRenderedState=n}if(t=s.interleaved,t!==null){r=t;do i=r.lane,De.lanes|=i,$n|=i,r=r.next;while(r!==t)}else r===null&&(s.lanes=0);return[e.memoizedState,s.dispatch]}function Ul(t){var e=Wt(),s=e.queue;if(s===null)throw Error(U(311));s.lastRenderedReducer=t;var n=s.dispatch,r=s.pending,i=e.memoizedState;if(r!==null){s.pending=null;var a=r=r.next;do i=t(i,a.action),a=a.next;while(a!==r);ss(i,e.memoizedState)||(bt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),s.lastRenderedState=i}return[i,n]}function ng(){}function rg(t,e){var s=De,n=Wt(),r=e(),i=!ss(n.memoizedState,r);if(i&&(n.memoizedState=r,bt=!0),n=n.queue,ou(og.bind(null,s,n,t),[t]),n.getSnapshot!==e||i||Ge!==null&&Ge.memoizedState.tag&1){if(s.flags|=2048,Hi(9,ag.bind(null,s,n,r,e),void 0,null),Qe===null)throw Error(U(349));In&30||ig(s,e,r)}return r}function ig(t,e,s){t.flags|=16384,t={getSnapshot:e,value:s},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.stores=[t]):(s=e.stores,s===null?e.stores=[t]:s.push(t))}function ag(t,e,s,n){e.value=s,e.getSnapshot=n,lg(e)&&cg(t)}function og(t,e,s){return s(function(){lg(e)&&cg(t)})}function lg(t){var e=t.getSnapshot;t=t.value;try{var s=e();return!ss(t,s)}catch{return!0}}function cg(t){var e=Ts(t,1);e!==null&&ts(e,t,1,-1)}function Ch(t){var e=os();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:t},e.queue=t,t=t.dispatch=Tv.bind(null,De,t),[e.memoizedState,t]}function Hi(t,e,s,n){return t={tag:t,create:e,destroy:s,deps:n,next:null},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.lastEffect=t.next=t):(s=e.lastEffect,s===null?e.lastEffect=t.next=t:(n=s.next,s.next=t,t.next=n,e.lastEffect=t)),t}function dg(){return Wt().memoizedState}function Qa(t,e,s,n){var r=os();De.flags|=t,r.memoizedState=Hi(1|e,s,void 0,n===void 0?null:n)}function Xo(t,e,s,n){var r=Wt();n=n===void 0?null:n;var i=void 0;if(qe!==null){var a=qe.memoizedState;if(i=a.destroy,n!==null&&ru(n,a.deps)){r.memoizedState=Hi(e,s,i,n);return}}De.flags|=t,r.memoizedState=Hi(1|e,s,i,n)}function Ph(t,e){return Qa(8390656,8,t,e)}function ou(t,e){return Xo(2048,8,t,e)}function ug(t,e){return Xo(4,2,t,e)}function hg(t,e){return Xo(4,4,t,e)}function fg(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function mg(t,e,s){return s=s!=null?s.concat([t]):null,Xo(4,4,fg.bind(null,e,t),s)}function lu(){}function pg(t,e){var s=Wt();e=e===void 0?null:e;var n=s.memoizedState;return n!==null&&e!==null&&ru(e,n[1])?n[0]:(s.memoizedState=[t,e],t)}function gg(t,e){var s=Wt();e=e===void 0?null:e;var n=s.memoizedState;return n!==null&&e!==null&&ru(e,n[1])?n[0]:(t=t(),s.memoizedState=[t,e],t)}function xg(t,e,s){return In&21?(ss(s,e)||(s=_p(),De.lanes|=s,$n|=s,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,bt=!0),t.memoizedState=s)}function Pv(t,e){var s=je;je=s!==0&&4>s?s:4,t(!0);var n=zl.transition;zl.transition={};try{t(!1),e()}finally{je=s,zl.transition=n}}function yg(){return Wt().memoizedState}function Ev(t,e,s){var n=en(t);if(s={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null},vg(t))bg(e,s);else if(s=eg(t,e,s,n),s!==null){var r=ut();ts(s,t,n,r),wg(s,e,n)}}function Tv(t,e,s){var n=en(t),r={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null};if(vg(t))bg(e,r);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,s);if(r.hasEagerState=!0,r.eagerState=l,ss(l,a)){var c=e.interleaved;c===null?(r.next=r,Zd(e)):(r.next=c.next,c.next=r),e.interleaved=r;return}}catch{}finally{}s=eg(t,e,r,n),s!==null&&(r=ut(),ts(s,t,n,r),wg(s,e,n))}}function vg(t){var e=t.alternate;return t===De||e!==null&&e===De}function bg(t,e){xi=ko=!0;var s=t.pending;s===null?e.next=e:(e.next=s.next,s.next=e),t.pending=e}function wg(t,e,s){if(s&4194240){var n=e.lanes;n&=t.pendingLanes,s|=n,e.lanes=s,$d(t,s)}}var No={readContext:Ut,useCallback:st,useContext:st,useEffect:st,useImperativeHandle:st,useInsertionEffect:st,useLayoutEffect:st,useMemo:st,useReducer:st,useRef:st,useState:st,useDebugValue:st,useDeferredValue:st,useTransition:st,useMutableSource:st,useSyncExternalStore:st,useId:st,unstable_isNewReconciler:!1},Av={readContext:Ut,useCallback:function(t,e){return os().memoizedState=[t,e===void 0?null:e],t},useContext:Ut,useEffect:Ph,useImperativeHandle:function(t,e,s){return s=s!=null?s.concat([t]):null,Qa(4194308,4,fg.bind(null,e,t),s)},useLayoutEffect:function(t,e){return Qa(4194308,4,t,e)},useInsertionEffect:function(t,e){return Qa(4,2,t,e)},useMemo:function(t,e){var s=os();return e=e===void 0?null:e,t=t(),s.memoizedState=[t,e],t},useReducer:function(t,e,s){var n=os();return e=s!==void 0?s(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Ev.bind(null,De,t),[n.memoizedState,t]},useRef:function(t){var e=os();return t={current:t},e.memoizedState=t},useState:Ch,useDebugValue:lu,useDeferredValue:function(t){return os().memoizedState=t},useTransition:function(){var t=Ch(!1),e=t[0];return t=Pv.bind(null,t[1]),os().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,s){var n=De,r=os();if(Re){if(s===void 0)throw Error(U(407));s=s()}else{if(s=e(),Qe===null)throw Error(U(349));In&30||ig(n,e,s)}r.memoizedState=s;var i={value:s,getSnapshot:e};return r.queue=i,Ph(og.bind(null,n,i,t),[t]),n.flags|=2048,Hi(9,ag.bind(null,n,i,s,e),void 0,null),s},useId:function(){var t=os(),e=Qe.identifierPrefix;if(Re){var s=ks,n=js;s=(n&~(1<<32-es(n)-1)).toString(32)+s,e=":"+e+"R"+s,s=Ui++,0<s&&(e+="H"+s.toString(32)),e+=":"}else s=Cv++,e=":"+e+"r"+s.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Ov={readContext:Ut,useCallback:pg,useContext:Ut,useEffect:ou,useImperativeHandle:mg,useInsertionEffect:ug,useLayoutEffect:hg,useMemo:gg,useReducer:Fl,useRef:dg,useState:function(){return Fl(Wi)},useDebugValue:lu,useDeferredValue:function(t){var e=Wt();return xg(e,qe.memoizedState,t)},useTransition:function(){var t=Fl(Wi)[0],e=Wt().memoizedState;return[t,e]},useMutableSource:ng,useSyncExternalStore:rg,useId:yg,unstable_isNewReconciler:!1},Rv={readContext:Ut,useCallback:pg,useContext:Ut,useEffect:ou,useImperativeHandle:mg,useInsertionEffect:ug,useLayoutEffect:hg,useMemo:gg,useReducer:Ul,useRef:dg,useState:function(){return Ul(Wi)},useDebugValue:lu,useDeferredValue:function(t){var e=Wt();return qe===null?e.memoizedState=t:xg(e,qe.memoizedState,t)},useTransition:function(){var t=Ul(Wi)[0],e=Wt().memoizedState;return[t,e]},useMutableSource:ng,useSyncExternalStore:rg,useId:yg,unstable_isNewReconciler:!1};function Gt(t,e){if(t&&t.defaultProps){e=Be({},e),t=t.defaultProps;for(var s in t)e[s]===void 0&&(e[s]=t[s]);return e}return e}function Wc(t,e,s,n){e=t.memoizedState,s=s(n,e),s=s==null?e:Be({},e,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var Zo={isMounted:function(t){return(t=t._reactInternals)?Vn(t)===t:!1},enqueueSetState:function(t,e,s){t=t._reactInternals;var n=ut(),r=en(t),i=Cs(n,r);i.payload=e,s!=null&&(i.callback=s),e=Xs(t,i,r),e!==null&&(ts(e,t,r,n),Ya(e,t,r))},enqueueReplaceState:function(t,e,s){t=t._reactInternals;var n=ut(),r=en(t),i=Cs(n,r);i.tag=1,i.payload=e,s!=null&&(i.callback=s),e=Xs(t,i,r),e!==null&&(ts(e,t,r,n),Ya(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var s=ut(),n=en(t),r=Cs(s,n);r.tag=2,e!=null&&(r.callback=e),e=Xs(t,r,n),e!==null&&(ts(e,t,n,s),Ya(e,t,n))}};function Eh(t,e,s,n,r,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,a):e.prototype&&e.prototype.isPureReactComponent?!Di(s,n)||!Di(r,i):!0}function _g(t,e,s){var n=!1,r=an,i=e.contextType;return typeof i=="object"&&i!==null?i=Ut(i):(r=_t(e)?Dn:at.current,n=e.contextTypes,i=(n=n!=null)?Nr(t,r):an),e=new e(s,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Zo,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=i),e}function Th(t,e,s,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(s,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(s,n),e.state!==t&&Zo.enqueueReplaceState(e,e.state,null)}function Hc(t,e,s,n){var r=t.stateNode;r.props=s,r.state=t.memoizedState,r.refs={},eu(t);var i=e.contextType;typeof i=="object"&&i!==null?r.context=Ut(i):(i=_t(e)?Dn:at.current,r.context=Nr(t,i)),r.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Wc(t,e,i,s),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Zo.enqueueReplaceState(r,r.state,null),_o(t,s,r,n),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Er(t,e){try{var s="",n=e;do s+=oy(n),n=n.return;while(n);var r=s}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:r,digest:null}}function Wl(t,e,s){return{value:t,source:null,stack:s??null,digest:e??null}}function Vc(t,e){try{console.error(e.value)}catch(s){setTimeout(function(){throw s})}}var Mv=typeof WeakMap=="function"?WeakMap:Map;function jg(t,e,s){s=Cs(-1,s),s.tag=3,s.payload={element:null};var n=e.value;return s.callback=function(){Co||(Co=!0,td=n),Vc(t,e)},s}function kg(t,e,s){s=Cs(-1,s),s.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var r=e.value;s.payload=function(){return n(r)},s.callback=function(){Vc(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(s.callback=function(){Vc(t,e),typeof n!="function"&&(Zs===null?Zs=new Set([this]):Zs.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),s}function Ah(t,e,s){var n=t.pingCache;if(n===null){n=t.pingCache=new Mv;var r=new Set;n.set(e,r)}else r=n.get(e),r===void 0&&(r=new Set,n.set(e,r));r.has(s)||(r.add(s),t=Yv.bind(null,t,e,s),e.then(t,t))}function Oh(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Rh(t,e,s,n,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(e=Cs(-1,1),e.tag=2,Xs(s,e,1))),s.lanes|=1),t)}var Lv=Os.ReactCurrentOwner,bt=!1;function dt(t,e,s,n){e.child=t===null?Zp(e,null,s,n):Cr(e,t.child,s,n)}function Mh(t,e,s,n,r){s=s.render;var i=e.ref;return br(e,r),n=iu(t,e,s,n,i,r),s=au(),t!==null&&!bt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,As(t,e,r)):(Re&&s&&Kd(e),e.flags|=1,dt(t,e,n,r),e.child)}function Lh(t,e,s,n,r){if(t===null){var i=s.type;return typeof i=="function"&&!gu(i)&&i.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(e.tag=15,e.type=i,Ng(t,e,i,n,r)):(t=eo(s.type,null,n,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&r)){var a=i.memoizedProps;if(s=s.compare,s=s!==null?s:Di,s(a,n)&&t.ref===e.ref)return As(t,e,r)}return e.flags|=1,t=tn(i,n),t.ref=e.ref,t.return=e,e.child=t}function Ng(t,e,s,n,r){if(t!==null){var i=t.memoizedProps;if(Di(i,n)&&t.ref===e.ref)if(bt=!1,e.pendingProps=n=i,(t.lanes&r)!==0)t.flags&131072&&(bt=!0);else return e.lanes=t.lanes,As(t,e,r)}return qc(t,e,s,n,r)}function Sg(t,e,s){var n=e.pendingProps,r=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ee(mr,Nt),Nt|=s;else{if(!(s&1073741824))return t=i!==null?i.baseLanes|s:s,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ee(mr,Nt),Nt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:s,Ee(mr,Nt),Nt|=n}else i!==null?(n=i.baseLanes|s,e.memoizedState=null):n=s,Ee(mr,Nt),Nt|=n;return dt(t,e,r,s),e.child}function Cg(t,e){var s=e.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(e.flags|=512,e.flags|=2097152)}function qc(t,e,s,n,r){var i=_t(s)?Dn:at.current;return i=Nr(e,i),br(e,r),s=iu(t,e,s,n,i,r),n=au(),t!==null&&!bt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,As(t,e,r)):(Re&&n&&Kd(e),e.flags|=1,dt(t,e,s,r),e.child)}function Dh(t,e,s,n,r){if(_t(s)){var i=!0;xo(e)}else i=!1;if(br(e,r),e.stateNode===null)Ja(t,e),_g(e,s,n),Hc(e,s,n,r),n=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,d=s.contextType;typeof d=="object"&&d!==null?d=Ut(d):(d=_t(s)?Dn:at.current,d=Nr(e,d));var u=s.getDerivedStateFromProps,h=typeof u=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==n||c!==d)&&Th(e,a,n,d),$s=!1;var f=e.memoizedState;a.state=f,_o(e,n,a,r),c=e.memoizedState,l!==n||f!==c||wt.current||$s?(typeof u=="function"&&(Wc(e,s,u,n),c=e.memoizedState),(l=$s||Eh(e,s,l,n,f,c,d))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),a.props=n,a.state=c,a.context=d,n=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,tg(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:Gt(e.type,l),a.props=d,h=e.pendingProps,f=a.context,c=s.contextType,typeof c=="object"&&c!==null?c=Ut(c):(c=_t(s)?Dn:at.current,c=Nr(e,c));var m=s.getDerivedStateFromProps;(u=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==h||f!==c)&&Th(e,a,n,c),$s=!1,f=e.memoizedState,a.state=f,_o(e,n,a,r);var p=e.memoizedState;l!==h||f!==p||wt.current||$s?(typeof m=="function"&&(Wc(e,s,m,n),p=e.memoizedState),(d=$s||Eh(e,s,d,n,f,p,c)||!1)?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,p,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,p,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=p),a.props=n,a.state=p,a.context=c,n=d):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return Kc(t,e,s,n,i,r)}function Kc(t,e,s,n,r,i){Cg(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return r&&wh(e,s,!1),As(t,e,i);n=e.stateNode,Lv.current=e;var l=a&&typeof s.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=Cr(e,t.child,null,i),e.child=Cr(e,null,l,i)):dt(t,e,l,i),e.memoizedState=n.state,r&&wh(e,s,!0),e.child}function Pg(t){var e=t.stateNode;e.pendingContext?bh(t,e.pendingContext,e.pendingContext!==e.context):e.context&&bh(t,e.context,!1),tu(t,e.containerInfo)}function Bh(t,e,s,n,r){return Sr(),Gd(r),e.flags|=256,dt(t,e,s,n),e.child}var Yc={dehydrated:null,treeContext:null,retryLane:0};function Gc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Eg(t,e,s){var n=e.pendingProps,r=Le.current,i=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(r&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Ee(Le,r&1),t===null)return Fc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,i?(n=e.mode,i=e.child,a={mode:"hidden",children:a},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=sl(a,n,0,null),t=Rn(t,n,s,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Gc(s),e.memoizedState=Yc,t):cu(e,a));if(r=t.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return Dv(t,e,a,n,l,r,s);if(i){i=n.fallback,a=e.mode,r=t.child,l=r.sibling;var c={mode:"hidden",children:n.children};return!(a&1)&&e.child!==r?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=tn(r,c),n.subtreeFlags=r.subtreeFlags&14680064),l!==null?i=tn(l,i):(i=Rn(i,a,s,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,a=t.child.memoizedState,a=a===null?Gc(s):{baseLanes:a.baseLanes|s,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~s,e.memoizedState=Yc,n}return i=t.child,t=i.sibling,n=tn(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=s),n.return=e,n.sibling=null,t!==null&&(s=e.deletions,s===null?(e.deletions=[t],e.flags|=16):s.push(t)),e.child=n,e.memoizedState=null,n}function cu(t,e){return e=sl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function wa(t,e,s,n){return n!==null&&Gd(n),Cr(e,t.child,null,s),t=cu(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Dv(t,e,s,n,r,i,a){if(s)return e.flags&256?(e.flags&=-257,n=Wl(Error(U(422))),wa(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,r=e.mode,n=sl({mode:"visible",children:n.children},r,0,null),i=Rn(i,r,a,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&Cr(e,t.child,null,a),e.child.memoizedState=Gc(a),e.memoizedState=Yc,i);if(!(e.mode&1))return wa(t,e,a,null);if(r.data==="$!"){if(n=r.nextSibling&&r.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(U(419)),n=Wl(i,n,void 0),wa(t,e,a,n)}if(l=(a&t.childLanes)!==0,bt||l){if(n=Qe,n!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(n.suspendedLanes|a)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,Ts(t,r),ts(n,t,r,-1))}return pu(),n=Wl(Error(U(421))),wa(t,e,a,n)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=Gv.bind(null,t),r._reactRetry=e,null):(t=i.treeContext,Ct=Js(r.nextSibling),Tt=e,Re=!0,Xt=null,t!==null&&(Bt[It++]=js,Bt[It++]=ks,Bt[It++]=Bn,js=t.id,ks=t.overflow,Bn=e),e=cu(e,n.children),e.flags|=4096,e)}function Ih(t,e,s){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Uc(t.return,e,s)}function Hl(t,e,s,n,r){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:s,tailMode:r}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=s,i.tailMode=r)}function Tg(t,e,s){var n=e.pendingProps,r=n.revealOrder,i=n.tail;if(dt(t,e,n.children,s),n=Le.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ih(t,s,e);else if(t.tag===19)Ih(t,s,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Ee(Le,n),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(s=e.child,r=null;s!==null;)t=s.alternate,t!==null&&jo(t)===null&&(r=s),s=s.sibling;s=r,s===null?(r=e.child,e.child=null):(r=s.sibling,s.sibling=null),Hl(e,!1,r,s,i);break;case"backwards":for(s=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&jo(t)===null){e.child=r;break}t=r.sibling,r.sibling=s,s=r,r=t}Hl(e,!0,s,null,i);break;case"together":Hl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ja(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function As(t,e,s){if(t!==null&&(e.dependencies=t.dependencies),$n|=e.lanes,!(s&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,s=tn(t,t.pendingProps),e.child=s,s.return=e;t.sibling!==null;)t=t.sibling,s=s.sibling=tn(t,t.pendingProps),s.return=e;s.sibling=null}return e.child}function Bv(t,e,s){switch(e.tag){case 3:Pg(e),Sr();break;case 5:sg(e);break;case 1:_t(e.type)&&xo(e);break;case 4:tu(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,r=e.memoizedProps.value;Ee(bo,n._currentValue),n._currentValue=r;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Ee(Le,Le.current&1),e.flags|=128,null):s&e.child.childLanes?Eg(t,e,s):(Ee(Le,Le.current&1),t=As(t,e,s),t!==null?t.sibling:null);Ee(Le,Le.current&1);break;case 19:if(n=(s&e.childLanes)!==0,t.flags&128){if(n)return Tg(t,e,s);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Ee(Le,Le.current),n)break;return null;case 22:case 23:return e.lanes=0,Sg(t,e,s)}return As(t,e,s)}var Ag,Qc,Og,Rg;Ag=function(t,e){for(var s=e.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Qc=function(){};Og=function(t,e,s,n){var r=t.memoizedProps;if(r!==n){t=e.stateNode,Tn(us.current);var i=null;switch(s){case"input":r=yc(t,r),n=yc(t,n),i=[];break;case"select":r=Be({},r,{value:void 0}),n=Be({},n,{value:void 0}),i=[];break;case"textarea":r=wc(t,r),n=wc(t,n),i=[];break;default:typeof r.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=po)}jc(s,n);var a;s=null;for(d in r)if(!n.hasOwnProperty(d)&&r.hasOwnProperty(d)&&r[d]!=null)if(d==="style"){var l=r[d];for(a in l)l.hasOwnProperty(a)&&(s||(s={}),s[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Ei.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(l=r!=null?r[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(s||(s={}),s[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(s||(s={}),s[a]=c[a])}else s||(i||(i=[]),i.push(d,s)),s=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Ei.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Te("scroll",t),i||l===c||(i=[])):(i=i||[]).push(d,c))}s&&(i=i||[]).push("style",s);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};Rg=function(t,e,s,n){s!==n&&(e.flags|=4)};function Yr(t,e){if(!Re)switch(t.tailMode){case"hidden":e=t.tail;for(var s=null;e!==null;)e.alternate!==null&&(s=e),e=e.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function nt(t){var e=t.alternate!==null&&t.alternate.child===t.child,s=0,n=0;if(e)for(var r=t.child;r!==null;)s|=r.lanes|r.childLanes,n|=r.subtreeFlags&14680064,n|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)s|=r.lanes|r.childLanes,n|=r.subtreeFlags,n|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=n,t.childLanes=s,e}function Iv(t,e,s){var n=e.pendingProps;switch(Yd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nt(e),null;case 1:return _t(e.type)&&go(),nt(e),null;case 3:return n=e.stateNode,Pr(),Oe(wt),Oe(at),nu(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(va(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Xt!==null&&(rd(Xt),Xt=null))),Qc(t,e),nt(e),null;case 5:su(e);var r=Tn(Fi.current);if(s=e.type,t!==null&&e.stateNode!=null)Og(t,e,s,n,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(U(166));return nt(e),null}if(t=Tn(us.current),va(e)){n=e.stateNode,s=e.type;var i=e.memoizedProps;switch(n[cs]=e,n[$i]=i,t=(e.mode&1)!==0,s){case"dialog":Te("cancel",n),Te("close",n);break;case"iframe":case"object":case"embed":Te("load",n);break;case"video":case"audio":for(r=0;r<ii.length;r++)Te(ii[r],n);break;case"source":Te("error",n);break;case"img":case"image":case"link":Te("error",n),Te("load",n);break;case"details":Te("toggle",n);break;case"input":Ku(n,i),Te("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Te("invalid",n);break;case"textarea":Gu(n,i),Te("invalid",n)}jc(s,i),r=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&ya(n.textContent,l,t),r=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&ya(n.textContent,l,t),r=["children",""+l]):Ei.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Te("scroll",n)}switch(s){case"input":da(n),Yu(n,i,!0);break;case"textarea":da(n),Qu(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=po)}n=r,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=op(s)),t==="http://www.w3.org/1999/xhtml"?s==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(s,{is:n.is}):(t=a.createElement(s),s==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,s),t[cs]=e,t[$i]=n,Ag(t,e,!1,!1),e.stateNode=t;e:{switch(a=kc(s,n),s){case"dialog":Te("cancel",t),Te("close",t),r=n;break;case"iframe":case"object":case"embed":Te("load",t),r=n;break;case"video":case"audio":for(r=0;r<ii.length;r++)Te(ii[r],t);r=n;break;case"source":Te("error",t),r=n;break;case"img":case"image":case"link":Te("error",t),Te("load",t),r=n;break;case"details":Te("toggle",t),r=n;break;case"input":Ku(t,n),r=yc(t,n),Te("invalid",t);break;case"option":r=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},r=Be({},n,{value:void 0}),Te("invalid",t);break;case"textarea":Gu(t,n),r=wc(t,n),Te("invalid",t);break;default:r=n}jc(s,r),l=r;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?dp(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&lp(t,c)):i==="children"?typeof c=="string"?(s!=="textarea"||c!=="")&&Ti(t,c):typeof c=="number"&&Ti(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ei.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Te("scroll",t):c!=null&&Rd(t,i,c,a))}switch(s){case"input":da(t),Yu(t,n,!1);break;case"textarea":da(t),Qu(t);break;case"option":n.value!=null&&t.setAttribute("value",""+rn(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?gr(t,!!n.multiple,i,!1):n.defaultValue!=null&&gr(t,!!n.multiple,n.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=po)}switch(s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return nt(e),null;case 6:if(t&&e.stateNode!=null)Rg(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(U(166));if(s=Tn(Fi.current),Tn(us.current),va(e)){if(n=e.stateNode,s=e.memoizedProps,n[cs]=e,(i=n.nodeValue!==s)&&(t=Tt,t!==null))switch(t.tag){case 3:ya(n.nodeValue,s,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ya(n.nodeValue,s,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(s.nodeType===9?s:s.ownerDocument).createTextNode(n),n[cs]=e,e.stateNode=n}return nt(e),null;case 13:if(Oe(Le),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Re&&Ct!==null&&e.mode&1&&!(e.flags&128))Jp(),Sr(),e.flags|=98560,i=!1;else if(i=va(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(U(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(U(317));i[cs]=e}else Sr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;nt(e),i=!1}else Xt!==null&&(rd(Xt),Xt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=s,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Le.current&1?Ke===0&&(Ke=3):pu())),e.updateQueue!==null&&(e.flags|=4),nt(e),null);case 4:return Pr(),Qc(t,e),t===null&&Bi(e.stateNode.containerInfo),nt(e),null;case 10:return Xd(e.type._context),nt(e),null;case 17:return _t(e.type)&&go(),nt(e),null;case 19:if(Oe(Le),i=e.memoizedState,i===null)return nt(e),null;if(n=(e.flags&128)!==0,a=i.rendering,a===null)if(n)Yr(i,!1);else{if(Ke!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=jo(t),a!==null){for(e.flags|=128,Yr(i,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=s,s=e.child;s!==null;)i=s,t=n,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s=s.sibling;return Ee(Le,Le.current&1|2),e.child}t=t.sibling}i.tail!==null&&Fe()>Tr&&(e.flags|=128,n=!0,Yr(i,!1),e.lanes=4194304)}else{if(!n)if(t=jo(a),t!==null){if(e.flags|=128,n=!0,s=t.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),Yr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Re)return nt(e),null}else 2*Fe()-i.renderingStartTime>Tr&&s!==1073741824&&(e.flags|=128,n=!0,Yr(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(s=i.last,s!==null?s.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Fe(),e.sibling=null,s=Le.current,Ee(Le,n?s&1|2:s&1),e):(nt(e),null);case 22:case 23:return mu(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Nt&1073741824&&(nt(e),e.subtreeFlags&6&&(e.flags|=8192)):nt(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function $v(t,e){switch(Yd(e),e.tag){case 1:return _t(e.type)&&go(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Pr(),Oe(wt),Oe(at),nu(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return su(e),null;case 13:if(Oe(Le),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));Sr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Oe(Le),null;case 4:return Pr(),null;case 10:return Xd(e.type._context),null;case 22:case 23:return mu(),null;case 24:return null;default:return null}}var _a=!1,it=!1,zv=typeof WeakSet=="function"?WeakSet:Set,te=null;function fr(t,e){var s=t.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(n){Ie(t,e,n)}else s.current=null}function Jc(t,e,s){try{s()}catch(n){Ie(t,e,n)}}var $h=!1;function Fv(t,e){if(Mc=ho,t=Ip(),qd(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var n=s.getSelection&&s.getSelection();if(n&&n.rangeCount!==0){s=n.anchorNode;var r=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{s.nodeType,i.nodeType}catch{s=null;break e}var a=0,l=-1,c=-1,d=0,u=0,h=t,f=null;t:for(;;){for(var m;h!==s||r!==0&&h.nodeType!==3||(l=a+r),h!==i||n!==0&&h.nodeType!==3||(c=a+n),h.nodeType===3&&(a+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===t)break t;if(f===s&&++d===r&&(l=a),f===i&&++u===n&&(c=a),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}s=l===-1||c===-1?null:{start:l,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(Lc={focusedElem:t,selectionRange:s},ho=!1,te=e;te!==null;)if(e=te,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,te=t;else for(;te!==null;){e=te;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var y=p.memoizedProps,b=p.memoizedState,x=e.stateNode,g=x.getSnapshotBeforeUpdate(e.elementType===e.type?y:Gt(e.type,y),b);x.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(w){Ie(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,te=t;break}te=e.return}return p=$h,$h=!1,p}function yi(t,e,s){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var r=n=n.next;do{if((r.tag&t)===t){var i=r.destroy;r.destroy=void 0,i!==void 0&&Jc(e,s,i)}r=r.next}while(r!==n)}}function el(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var s=e=e.next;do{if((s.tag&t)===t){var n=s.create;s.destroy=n()}s=s.next}while(s!==e)}}function Xc(t){var e=t.ref;if(e!==null){var s=t.stateNode;switch(t.tag){case 5:t=s;break;default:t=s}typeof e=="function"?e(t):e.current=t}}function Mg(t){var e=t.alternate;e!==null&&(t.alternate=null,Mg(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[cs],delete e[$i],delete e[Ic],delete e[jv],delete e[kv])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Lg(t){return t.tag===5||t.tag===3||t.tag===4}function zh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Lg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Zc(t,e,s){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?s.nodeType===8?s.parentNode.insertBefore(t,e):s.insertBefore(t,e):(s.nodeType===8?(e=s.parentNode,e.insertBefore(t,s)):(e=s,e.appendChild(t)),s=s._reactRootContainer,s!=null||e.onclick!==null||(e.onclick=po));else if(n!==4&&(t=t.child,t!==null))for(Zc(t,e,s),t=t.sibling;t!==null;)Zc(t,e,s),t=t.sibling}function ed(t,e,s){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?s.insertBefore(t,e):s.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(ed(t,e,s),t=t.sibling;t!==null;)ed(t,e,s),t=t.sibling}var Xe=null,Qt=!1;function Ms(t,e,s){for(s=s.child;s!==null;)Dg(t,e,s),s=s.sibling}function Dg(t,e,s){if(ds&&typeof ds.onCommitFiberUnmount=="function")try{ds.onCommitFiberUnmount(qo,s)}catch{}switch(s.tag){case 5:it||fr(s,e);case 6:var n=Xe,r=Qt;Xe=null,Ms(t,e,s),Xe=n,Qt=r,Xe!==null&&(Qt?(t=Xe,s=s.stateNode,t.nodeType===8?t.parentNode.removeChild(s):t.removeChild(s)):Xe.removeChild(s.stateNode));break;case 18:Xe!==null&&(Qt?(t=Xe,s=s.stateNode,t.nodeType===8?Bl(t.parentNode,s):t.nodeType===1&&Bl(t,s),Mi(t)):Bl(Xe,s.stateNode));break;case 4:n=Xe,r=Qt,Xe=s.stateNode.containerInfo,Qt=!0,Ms(t,e,s),Xe=n,Qt=r;break;case 0:case 11:case 14:case 15:if(!it&&(n=s.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){r=n=n.next;do{var i=r,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Jc(s,e,a),r=r.next}while(r!==n)}Ms(t,e,s);break;case 1:if(!it&&(fr(s,e),n=s.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=s.memoizedProps,n.state=s.memoizedState,n.componentWillUnmount()}catch(l){Ie(s,e,l)}Ms(t,e,s);break;case 21:Ms(t,e,s);break;case 22:s.mode&1?(it=(n=it)||s.memoizedState!==null,Ms(t,e,s),it=n):Ms(t,e,s);break;default:Ms(t,e,s)}}function Fh(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new zv),e.forEach(function(n){var r=Qv.bind(null,t,n);s.has(n)||(s.add(n),n.then(r,r))})}}function Kt(t,e){var s=e.deletions;if(s!==null)for(var n=0;n<s.length;n++){var r=s[n];try{var i=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:Xe=l.stateNode,Qt=!1;break e;case 3:Xe=l.stateNode.containerInfo,Qt=!0;break e;case 4:Xe=l.stateNode.containerInfo,Qt=!0;break e}l=l.return}if(Xe===null)throw Error(U(160));Dg(i,a,r),Xe=null,Qt=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(d){Ie(r,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Bg(e,t),e=e.sibling}function Bg(t,e){var s=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Kt(e,t),rs(t),n&4){try{yi(3,t,t.return),el(3,t)}catch(y){Ie(t,t.return,y)}try{yi(5,t,t.return)}catch(y){Ie(t,t.return,y)}}break;case 1:Kt(e,t),rs(t),n&512&&s!==null&&fr(s,s.return);break;case 5:if(Kt(e,t),rs(t),n&512&&s!==null&&fr(s,s.return),t.flags&32){var r=t.stateNode;try{Ti(r,"")}catch(y){Ie(t,t.return,y)}}if(n&4&&(r=t.stateNode,r!=null)){var i=t.memoizedProps,a=s!==null?s.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&ip(r,i),kc(l,a);var d=kc(l,i);for(a=0;a<c.length;a+=2){var u=c[a],h=c[a+1];u==="style"?dp(r,h):u==="dangerouslySetInnerHTML"?lp(r,h):u==="children"?Ti(r,h):Rd(r,u,h,d)}switch(l){case"input":vc(r,i);break;case"textarea":ap(r,i);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?gr(r,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?gr(r,!!i.multiple,i.defaultValue,!0):gr(r,!!i.multiple,i.multiple?[]:"",!1))}r[$i]=i}catch(y){Ie(t,t.return,y)}}break;case 6:if(Kt(e,t),rs(t),n&4){if(t.stateNode===null)throw Error(U(162));r=t.stateNode,i=t.memoizedProps;try{r.nodeValue=i}catch(y){Ie(t,t.return,y)}}break;case 3:if(Kt(e,t),rs(t),n&4&&s!==null&&s.memoizedState.isDehydrated)try{Mi(e.containerInfo)}catch(y){Ie(t,t.return,y)}break;case 4:Kt(e,t),rs(t);break;case 13:Kt(e,t),rs(t),r=t.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(hu=Fe())),n&4&&Fh(t);break;case 22:if(u=s!==null&&s.memoizedState!==null,t.mode&1?(it=(d=it)||u,Kt(e,t),it=d):Kt(e,t),rs(t),n&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!u&&t.mode&1)for(te=t,u=t.child;u!==null;){for(h=te=u;te!==null;){switch(f=te,m=f.child,f.tag){case 0:case 11:case 14:case 15:yi(4,f,f.return);break;case 1:fr(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){n=f,s=f.return;try{e=n,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(y){Ie(n,s,y)}}break;case 5:fr(f,f.return);break;case 22:if(f.memoizedState!==null){Wh(h);continue}}m!==null?(m.return=f,te=m):Wh(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{r=h.stateNode,d?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=cp("display",a))}catch(y){Ie(t,t.return,y)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(y){Ie(t,t.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Kt(e,t),rs(t),n&4&&Fh(t);break;case 21:break;default:Kt(e,t),rs(t)}}function rs(t){var e=t.flags;if(e&2){try{e:{for(var s=t.return;s!==null;){if(Lg(s)){var n=s;break e}s=s.return}throw Error(U(160))}switch(n.tag){case 5:var r=n.stateNode;n.flags&32&&(Ti(r,""),n.flags&=-33);var i=zh(t);ed(t,i,r);break;case 3:case 4:var a=n.stateNode.containerInfo,l=zh(t);Zc(t,l,a);break;default:throw Error(U(161))}}catch(c){Ie(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Uv(t,e,s){te=t,Ig(t)}function Ig(t,e,s){for(var n=(t.mode&1)!==0;te!==null;){var r=te,i=r.child;if(r.tag===22&&n){var a=r.memoizedState!==null||_a;if(!a){var l=r.alternate,c=l!==null&&l.memoizedState!==null||it;l=_a;var d=it;if(_a=a,(it=c)&&!d)for(te=r;te!==null;)a=te,c=a.child,a.tag===22&&a.memoizedState!==null?Hh(r):c!==null?(c.return=a,te=c):Hh(r);for(;i!==null;)te=i,Ig(i),i=i.sibling;te=r,_a=l,it=d}Uh(t)}else r.subtreeFlags&8772&&i!==null?(i.return=r,te=i):Uh(t)}}function Uh(t){for(;te!==null;){var e=te;if(e.flags&8772){var s=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:it||el(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!it)if(s===null)n.componentDidMount();else{var r=e.elementType===e.type?s.memoizedProps:Gt(e.type,s.memoizedProps);n.componentDidUpdate(r,s.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Sh(e,i,n);break;case 3:var a=e.updateQueue;if(a!==null){if(s=null,e.child!==null)switch(e.child.tag){case 5:s=e.child.stateNode;break;case 1:s=e.child.stateNode}Sh(e,a,s)}break;case 5:var l=e.stateNode;if(s===null&&e.flags&4){s=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Mi(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}it||e.flags&512&&Xc(e)}catch(f){Ie(e,e.return,f)}}if(e===t){te=null;break}if(s=e.sibling,s!==null){s.return=e.return,te=s;break}te=e.return}}function Wh(t){for(;te!==null;){var e=te;if(e===t){te=null;break}var s=e.sibling;if(s!==null){s.return=e.return,te=s;break}te=e.return}}function Hh(t){for(;te!==null;){var e=te;try{switch(e.tag){case 0:case 11:case 15:var s=e.return;try{el(4,e)}catch(c){Ie(e,s,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var r=e.return;try{n.componentDidMount()}catch(c){Ie(e,r,c)}}var i=e.return;try{Xc(e)}catch(c){Ie(e,i,c)}break;case 5:var a=e.return;try{Xc(e)}catch(c){Ie(e,a,c)}}}catch(c){Ie(e,e.return,c)}if(e===t){te=null;break}var l=e.sibling;if(l!==null){l.return=e.return,te=l;break}te=e.return}}var Wv=Math.ceil,So=Os.ReactCurrentDispatcher,du=Os.ReactCurrentOwner,zt=Os.ReactCurrentBatchConfig,be=0,Qe=null,Ve=null,et=0,Nt=0,mr=un(0),Ke=0,Vi=null,$n=0,tl=0,uu=0,vi=null,xt=null,hu=0,Tr=1/0,ys=null,Co=!1,td=null,Zs=null,ja=!1,Hs=null,Po=0,bi=0,sd=null,Xa=-1,Za=0;function ut(){return be&6?Fe():Xa!==-1?Xa:Xa=Fe()}function en(t){return t.mode&1?be&2&&et!==0?et&-et:Sv.transition!==null?(Za===0&&(Za=_p()),Za):(t=je,t!==0||(t=window.event,t=t===void 0?16:Ep(t.type)),t):1}function ts(t,e,s,n){if(50<bi)throw bi=0,sd=null,Error(U(185));Xi(t,s,n),(!(be&2)||t!==Qe)&&(t===Qe&&(!(be&2)&&(tl|=s),Ke===4&&Fs(t,et)),jt(t,n),s===1&&be===0&&!(e.mode&1)&&(Tr=Fe()+500,Jo&&hn()))}function jt(t,e){var s=t.callbackNode;Sy(t,e);var n=uo(t,t===Qe?et:0);if(n===0)s!==null&&Zu(s),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(s!=null&&Zu(s),e===1)t.tag===0?Nv(Vh.bind(null,t)):Yp(Vh.bind(null,t)),wv(function(){!(be&6)&&hn()}),s=null;else{switch(jp(n)){case 1:s=Id;break;case 4:s=bp;break;case 16:s=co;break;case 536870912:s=wp;break;default:s=co}s=qg(s,$g.bind(null,t))}t.callbackPriority=e,t.callbackNode=s}}function $g(t,e){if(Xa=-1,Za=0,be&6)throw Error(U(327));var s=t.callbackNode;if(wr()&&t.callbackNode!==s)return null;var n=uo(t,t===Qe?et:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Eo(t,n);else{e=n;var r=be;be|=2;var i=Fg();(Qe!==t||et!==e)&&(ys=null,Tr=Fe()+500,On(t,e));do try{qv();break}catch(l){zg(t,l)}while(!0);Jd(),So.current=i,be=r,Ve!==null?e=0:(Qe=null,et=0,e=Ke)}if(e!==0){if(e===2&&(r=Ec(t),r!==0&&(n=r,e=nd(t,r))),e===1)throw s=Vi,On(t,0),Fs(t,n),jt(t,Fe()),s;if(e===6)Fs(t,n);else{if(r=t.current.alternate,!(n&30)&&!Hv(r)&&(e=Eo(t,n),e===2&&(i=Ec(t),i!==0&&(n=i,e=nd(t,i))),e===1))throw s=Vi,On(t,0),Fs(t,n),jt(t,Fe()),s;switch(t.finishedWork=r,t.finishedLanes=n,e){case 0:case 1:throw Error(U(345));case 2:jn(t,xt,ys);break;case 3:if(Fs(t,n),(n&130023424)===n&&(e=hu+500-Fe(),10<e)){if(uo(t,0)!==0)break;if(r=t.suspendedLanes,(r&n)!==n){ut(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Bc(jn.bind(null,t,xt,ys),e);break}jn(t,xt,ys);break;case 4:if(Fs(t,n),(n&4194240)===n)break;for(e=t.eventTimes,r=-1;0<n;){var a=31-es(n);i=1<<a,a=e[a],a>r&&(r=a),n&=~i}if(n=r,n=Fe()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Wv(n/1960))-n,10<n){t.timeoutHandle=Bc(jn.bind(null,t,xt,ys),n);break}jn(t,xt,ys);break;case 5:jn(t,xt,ys);break;default:throw Error(U(329))}}}return jt(t,Fe()),t.callbackNode===s?$g.bind(null,t):null}function nd(t,e){var s=vi;return t.current.memoizedState.isDehydrated&&(On(t,e).flags|=256),t=Eo(t,e),t!==2&&(e=xt,xt=s,e!==null&&rd(e)),t}function rd(t){xt===null?xt=t:xt.push.apply(xt,t)}function Hv(t){for(var e=t;;){if(e.flags&16384){var s=e.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var n=0;n<s.length;n++){var r=s[n],i=r.getSnapshot;r=r.value;try{if(!ss(i(),r))return!1}catch{return!1}}}if(s=e.child,e.subtreeFlags&16384&&s!==null)s.return=e,e=s;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Fs(t,e){for(e&=~uu,e&=~tl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var s=31-es(e),n=1<<s;t[s]=-1,e&=~n}}function Vh(t){if(be&6)throw Error(U(327));wr();var e=uo(t,0);if(!(e&1))return jt(t,Fe()),null;var s=Eo(t,e);if(t.tag!==0&&s===2){var n=Ec(t);n!==0&&(e=n,s=nd(t,n))}if(s===1)throw s=Vi,On(t,0),Fs(t,e),jt(t,Fe()),s;if(s===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,jn(t,xt,ys),jt(t,Fe()),null}function fu(t,e){var s=be;be|=1;try{return t(e)}finally{be=s,be===0&&(Tr=Fe()+500,Jo&&hn())}}function zn(t){Hs!==null&&Hs.tag===0&&!(be&6)&&wr();var e=be;be|=1;var s=zt.transition,n=je;try{if(zt.transition=null,je=1,t)return t()}finally{je=n,zt.transition=s,be=e,!(be&6)&&hn()}}function mu(){Nt=mr.current,Oe(mr)}function On(t,e){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==-1&&(t.timeoutHandle=-1,bv(s)),Ve!==null)for(s=Ve.return;s!==null;){var n=s;switch(Yd(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&go();break;case 3:Pr(),Oe(wt),Oe(at),nu();break;case 5:su(n);break;case 4:Pr();break;case 13:Oe(Le);break;case 19:Oe(Le);break;case 10:Xd(n.type._context);break;case 22:case 23:mu()}s=s.return}if(Qe=t,Ve=t=tn(t.current,null),et=Nt=e,Ke=0,Vi=null,uu=tl=$n=0,xt=vi=null,En!==null){for(e=0;e<En.length;e++)if(s=En[e],n=s.interleaved,n!==null){s.interleaved=null;var r=n.next,i=s.pending;if(i!==null){var a=i.next;i.next=r,n.next=a}s.pending=n}En=null}return t}function zg(t,e){do{var s=Ve;try{if(Jd(),Ga.current=No,ko){for(var n=De.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}ko=!1}if(In=0,Ge=qe=De=null,xi=!1,Ui=0,du.current=null,s===null||s.return===null){Ke=1,Vi=e,Ve=null;break}e:{var i=t,a=s.return,l=s,c=e;if(e=et,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=Oh(a);if(m!==null){m.flags&=-257,Rh(m,a,l,i,e),m.mode&1&&Ah(i,d,e),e=m,c=d;var p=e.updateQueue;if(p===null){var y=new Set;y.add(c),e.updateQueue=y}else p.add(c);break e}else{if(!(e&1)){Ah(i,d,e),pu();break e}c=Error(U(426))}}else if(Re&&l.mode&1){var b=Oh(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),Rh(b,a,l,i,e),Gd(Er(c,l));break e}}i=c=Er(c,l),Ke!==4&&(Ke=2),vi===null?vi=[i]:vi.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=jg(i,c,e);Nh(i,x);break e;case 1:l=c;var g=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Zs===null||!Zs.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var w=kg(i,l,e);Nh(i,w);break e}}i=i.return}while(i!==null)}Wg(s)}catch(_){e=_,Ve===s&&s!==null&&(Ve=s=s.return);continue}break}while(!0)}function Fg(){var t=So.current;return So.current=No,t===null?No:t}function pu(){(Ke===0||Ke===3||Ke===2)&&(Ke=4),Qe===null||!($n&268435455)&&!(tl&268435455)||Fs(Qe,et)}function Eo(t,e){var s=be;be|=2;var n=Fg();(Qe!==t||et!==e)&&(ys=null,On(t,e));do try{Vv();break}catch(r){zg(t,r)}while(!0);if(Jd(),be=s,So.current=n,Ve!==null)throw Error(U(261));return Qe=null,et=0,Ke}function Vv(){for(;Ve!==null;)Ug(Ve)}function qv(){for(;Ve!==null&&!xy();)Ug(Ve)}function Ug(t){var e=Vg(t.alternate,t,Nt);t.memoizedProps=t.pendingProps,e===null?Wg(t):Ve=e,du.current=null}function Wg(t){var e=t;do{var s=e.alternate;if(t=e.return,e.flags&32768){if(s=$v(s,e),s!==null){s.flags&=32767,Ve=s;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ke=6,Ve=null;return}}else if(s=Iv(s,e,Nt),s!==null){Ve=s;return}if(e=e.sibling,e!==null){Ve=e;return}Ve=e=t}while(e!==null);Ke===0&&(Ke=5)}function jn(t,e,s){var n=je,r=zt.transition;try{zt.transition=null,je=1,Kv(t,e,s,n)}finally{zt.transition=r,je=n}return null}function Kv(t,e,s,n){do wr();while(Hs!==null);if(be&6)throw Error(U(327));s=t.finishedWork;var r=t.finishedLanes;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var i=s.lanes|s.childLanes;if(Cy(t,i),t===Qe&&(Ve=Qe=null,et=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||ja||(ja=!0,qg(co,function(){return wr(),null})),i=(s.flags&15990)!==0,s.subtreeFlags&15990||i){i=zt.transition,zt.transition=null;var a=je;je=1;var l=be;be|=4,du.current=null,Fv(t,s),Bg(s,t),fv(Lc),ho=!!Mc,Lc=Mc=null,t.current=s,Uv(s),yy(),be=l,je=a,zt.transition=i}else t.current=s;if(ja&&(ja=!1,Hs=t,Po=r),i=t.pendingLanes,i===0&&(Zs=null),wy(s.stateNode),jt(t,Fe()),e!==null)for(n=t.onRecoverableError,s=0;s<e.length;s++)r=e[s],n(r.value,{componentStack:r.stack,digest:r.digest});if(Co)throw Co=!1,t=td,td=null,t;return Po&1&&t.tag!==0&&wr(),i=t.pendingLanes,i&1?t===sd?bi++:(bi=0,sd=t):bi=0,hn(),null}function wr(){if(Hs!==null){var t=jp(Po),e=zt.transition,s=je;try{if(zt.transition=null,je=16>t?16:t,Hs===null)var n=!1;else{if(t=Hs,Hs=null,Po=0,be&6)throw Error(U(331));var r=be;for(be|=4,te=t.current;te!==null;){var i=te,a=i.child;if(te.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(te=d;te!==null;){var u=te;switch(u.tag){case 0:case 11:case 15:yi(8,u,i)}var h=u.child;if(h!==null)h.return=u,te=h;else for(;te!==null;){u=te;var f=u.sibling,m=u.return;if(Mg(u),u===d){te=null;break}if(f!==null){f.return=m,te=f;break}te=m}}}var p=i.alternate;if(p!==null){var y=p.child;if(y!==null){p.child=null;do{var b=y.sibling;y.sibling=null,y=b}while(y!==null)}}te=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,te=a;else e:for(;te!==null;){if(i=te,i.flags&2048)switch(i.tag){case 0:case 11:case 15:yi(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,te=x;break e}te=i.return}}var g=t.current;for(te=g;te!==null;){a=te;var v=a.child;if(a.subtreeFlags&2064&&v!==null)v.return=a,te=v;else e:for(a=g;te!==null;){if(l=te,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:el(9,l)}}catch(_){Ie(l,l.return,_)}if(l===a){te=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,te=w;break e}te=l.return}}if(be=r,hn(),ds&&typeof ds.onPostCommitFiberRoot=="function")try{ds.onPostCommitFiberRoot(qo,t)}catch{}n=!0}return n}finally{je=s,zt.transition=e}}return!1}function qh(t,e,s){e=Er(s,e),e=jg(t,e,1),t=Xs(t,e,1),e=ut(),t!==null&&(Xi(t,1,e),jt(t,e))}function Ie(t,e,s){if(t.tag===3)qh(t,t,s);else for(;e!==null;){if(e.tag===3){qh(e,t,s);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Zs===null||!Zs.has(n))){t=Er(s,t),t=kg(e,t,1),e=Xs(e,t,1),t=ut(),e!==null&&(Xi(e,1,t),jt(e,t));break}}e=e.return}}function Yv(t,e,s){var n=t.pingCache;n!==null&&n.delete(e),e=ut(),t.pingedLanes|=t.suspendedLanes&s,Qe===t&&(et&s)===s&&(Ke===4||Ke===3&&(et&130023424)===et&&500>Fe()-hu?On(t,0):uu|=s),jt(t,e)}function Hg(t,e){e===0&&(t.mode&1?(e=fa,fa<<=1,!(fa&130023424)&&(fa=4194304)):e=1);var s=ut();t=Ts(t,e),t!==null&&(Xi(t,e,s),jt(t,s))}function Gv(t){var e=t.memoizedState,s=0;e!==null&&(s=e.retryLane),Hg(t,s)}function Qv(t,e){var s=0;switch(t.tag){case 13:var n=t.stateNode,r=t.memoizedState;r!==null&&(s=r.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(U(314))}n!==null&&n.delete(e),Hg(t,s)}var Vg;Vg=function(t,e,s){if(t!==null)if(t.memoizedProps!==e.pendingProps||wt.current)bt=!0;else{if(!(t.lanes&s)&&!(e.flags&128))return bt=!1,Bv(t,e,s);bt=!!(t.flags&131072)}else bt=!1,Re&&e.flags&1048576&&Gp(e,vo,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Ja(t,e),t=e.pendingProps;var r=Nr(e,at.current);br(e,s),r=iu(null,e,n,t,r,s);var i=au();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,_t(n)?(i=!0,xo(e)):i=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,eu(e),r.updater=Zo,e.stateNode=r,r._reactInternals=e,Hc(e,n,t,s),e=Kc(null,e,n,!0,i,s)):(e.tag=0,Re&&i&&Kd(e),dt(null,e,r,s),e=e.child),e;case 16:n=e.elementType;e:{switch(Ja(t,e),t=e.pendingProps,r=n._init,n=r(n._payload),e.type=n,r=e.tag=Xv(n),t=Gt(n,t),r){case 0:e=qc(null,e,n,t,s);break e;case 1:e=Dh(null,e,n,t,s);break e;case 11:e=Mh(null,e,n,t,s);break e;case 14:e=Lh(null,e,n,Gt(n.type,t),s);break e}throw Error(U(306,n,""))}return e;case 0:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:Gt(n,r),qc(t,e,n,r,s);case 1:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:Gt(n,r),Dh(t,e,n,r,s);case 3:e:{if(Pg(e),t===null)throw Error(U(387));n=e.pendingProps,i=e.memoizedState,r=i.element,tg(t,e),_o(e,n,null,s);var a=e.memoizedState;if(n=a.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){r=Er(Error(U(423)),e),e=Bh(t,e,n,s,r);break e}else if(n!==r){r=Er(Error(U(424)),e),e=Bh(t,e,n,s,r);break e}else for(Ct=Js(e.stateNode.containerInfo.firstChild),Tt=e,Re=!0,Xt=null,s=Zp(e,null,n,s),e.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Sr(),n===r){e=As(t,e,s);break e}dt(t,e,n,s)}e=e.child}return e;case 5:return sg(e),t===null&&Fc(e),n=e.type,r=e.pendingProps,i=t!==null?t.memoizedProps:null,a=r.children,Dc(n,r)?a=null:i!==null&&Dc(n,i)&&(e.flags|=32),Cg(t,e),dt(t,e,a,s),e.child;case 6:return t===null&&Fc(e),null;case 13:return Eg(t,e,s);case 4:return tu(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Cr(e,null,n,s):dt(t,e,n,s),e.child;case 11:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:Gt(n,r),Mh(t,e,n,r,s);case 7:return dt(t,e,e.pendingProps,s),e.child;case 8:return dt(t,e,e.pendingProps.children,s),e.child;case 12:return dt(t,e,e.pendingProps.children,s),e.child;case 10:e:{if(n=e.type._context,r=e.pendingProps,i=e.memoizedProps,a=r.value,Ee(bo,n._currentValue),n._currentValue=a,i!==null)if(ss(i.value,a)){if(i.children===r.children&&!wt.current){e=As(t,e,s);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=Cs(-1,s&-s),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=s,c=i.alternate,c!==null&&(c.lanes|=s),Uc(i.return,s,e),l.lanes|=s;break}c=c.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(U(341));a.lanes|=s,l=a.alternate,l!==null&&(l.lanes|=s),Uc(a,s,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}dt(t,e,r.children,s),e=e.child}return e;case 9:return r=e.type,n=e.pendingProps.children,br(e,s),r=Ut(r),n=n(r),e.flags|=1,dt(t,e,n,s),e.child;case 14:return n=e.type,r=Gt(n,e.pendingProps),r=Gt(n.type,r),Lh(t,e,n,r,s);case 15:return Ng(t,e,e.type,e.pendingProps,s);case 17:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:Gt(n,r),Ja(t,e),e.tag=1,_t(n)?(t=!0,xo(e)):t=!1,br(e,s),_g(e,n,r),Hc(e,n,r,s),Kc(null,e,n,!0,t,s);case 19:return Tg(t,e,s);case 22:return Sg(t,e,s)}throw Error(U(156,e.tag))};function qg(t,e){return vp(t,e)}function Jv(t,e,s,n){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $t(t,e,s,n){return new Jv(t,e,s,n)}function gu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Xv(t){if(typeof t=="function")return gu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ld)return 11;if(t===Dd)return 14}return 2}function tn(t,e){var s=t.alternate;return s===null?(s=$t(t.tag,e,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=e,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&14680064,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,e=t.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function eo(t,e,s,n,r,i){var a=2;if(n=t,typeof t=="function")gu(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case rr:return Rn(s.children,r,i,e);case Md:a=8,r|=8;break;case mc:return t=$t(12,s,e,r|2),t.elementType=mc,t.lanes=i,t;case pc:return t=$t(13,s,e,r),t.elementType=pc,t.lanes=i,t;case gc:return t=$t(19,s,e,r),t.elementType=gc,t.lanes=i,t;case sp:return sl(s,r,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ep:a=10;break e;case tp:a=9;break e;case Ld:a=11;break e;case Dd:a=14;break e;case Is:a=16,n=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=$t(a,s,e,r),e.elementType=t,e.type=n,e.lanes=i,e}function Rn(t,e,s,n){return t=$t(7,t,n,e),t.lanes=s,t}function sl(t,e,s,n){return t=$t(22,t,n,e),t.elementType=sp,t.lanes=s,t.stateNode={isHidden:!1},t}function Vl(t,e,s){return t=$t(6,t,null,e),t.lanes=s,t}function ql(t,e,s){return e=$t(4,t.children!==null?t.children:[],t.key,e),e.lanes=s,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Zv(t,e,s,n,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Sl(0),this.expirationTimes=Sl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sl(0),this.identifierPrefix=n,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function xu(t,e,s,n,r,i,a,l,c){return t=new Zv(t,e,s,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=$t(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},eu(i),t}function eb(t,e,s){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:nr,key:n==null?null:""+n,children:t,containerInfo:e,implementation:s}}function Kg(t){if(!t)return an;t=t._reactInternals;e:{if(Vn(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(_t(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var s=t.type;if(_t(s))return Kp(t,s,e)}return e}function Yg(t,e,s,n,r,i,a,l,c){return t=xu(s,n,!0,t,r,i,a,l,c),t.context=Kg(null),s=t.current,n=ut(),r=en(s),i=Cs(n,r),i.callback=e??null,Xs(s,i,r),t.current.lanes=r,Xi(t,r,n),jt(t,n),t}function nl(t,e,s,n){var r=e.current,i=ut(),a=en(r);return s=Kg(s),e.context===null?e.context=s:e.pendingContext=s,e=Cs(i,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Xs(r,e,a),t!==null&&(ts(t,r,a,i),Ya(t,r,a)),a}function To(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Kh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<e?s:e}}function yu(t,e){Kh(t,e),(t=t.alternate)&&Kh(t,e)}function tb(){return null}var Gg=typeof reportError=="function"?reportError:function(t){console.error(t)};function vu(t){this._internalRoot=t}rl.prototype.render=vu.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));nl(t,e,null,null)};rl.prototype.unmount=vu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;zn(function(){nl(null,t,null,null)}),e[Es]=null}};function rl(t){this._internalRoot=t}rl.prototype.unstable_scheduleHydration=function(t){if(t){var e=Sp();t={blockedOn:null,target:t,priority:e};for(var s=0;s<zs.length&&e!==0&&e<zs[s].priority;s++);zs.splice(s,0,t),s===0&&Pp(t)}};function bu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function il(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Yh(){}function sb(t,e,s,n,r){if(r){if(typeof n=="function"){var i=n;n=function(){var d=To(a);i.call(d)}}var a=Yg(e,n,t,0,null,!1,!1,"",Yh);return t._reactRootContainer=a,t[Es]=a.current,Bi(t.nodeType===8?t.parentNode:t),zn(),a}for(;r=t.lastChild;)t.removeChild(r);if(typeof n=="function"){var l=n;n=function(){var d=To(c);l.call(d)}}var c=xu(t,0,!1,null,null,!1,!1,"",Yh);return t._reactRootContainer=c,t[Es]=c.current,Bi(t.nodeType===8?t.parentNode:t),zn(function(){nl(e,c,s,n)}),c}function al(t,e,s,n,r){var i=s._reactRootContainer;if(i){var a=i;if(typeof r=="function"){var l=r;r=function(){var c=To(a);l.call(c)}}nl(e,a,t,r)}else a=sb(s,e,t,r,n);return To(a)}kp=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var s=ri(e.pendingLanes);s!==0&&($d(e,s|1),jt(e,Fe()),!(be&6)&&(Tr=Fe()+500,hn()))}break;case 13:zn(function(){var n=Ts(t,1);if(n!==null){var r=ut();ts(n,t,1,r)}}),yu(t,1)}};zd=function(t){if(t.tag===13){var e=Ts(t,134217728);if(e!==null){var s=ut();ts(e,t,134217728,s)}yu(t,134217728)}};Np=function(t){if(t.tag===13){var e=en(t),s=Ts(t,e);if(s!==null){var n=ut();ts(s,t,e,n)}yu(t,e)}};Sp=function(){return je};Cp=function(t,e){var s=je;try{return je=t,e()}finally{je=s}};Sc=function(t,e,s){switch(e){case"input":if(vc(t,s),e=s.name,s.type==="radio"&&e!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<s.length;e++){var n=s[e];if(n!==t&&n.form===t.form){var r=Qo(n);if(!r)throw Error(U(90));rp(n),vc(n,r)}}}break;case"textarea":ap(t,s);break;case"select":e=s.value,e!=null&&gr(t,!!s.multiple,e,!1)}};fp=fu;mp=zn;var nb={usingClientEntryPoint:!1,Events:[ea,lr,Qo,up,hp,fu]},Gr={findFiberByHostInstance:Pn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rb={bundleType:Gr.bundleType,version:Gr.version,rendererPackageName:Gr.rendererPackageName,rendererConfig:Gr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Os.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=xp(t),t===null?null:t.stateNode},findFiberByHostInstance:Gr.findFiberByHostInstance||tb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ka=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ka.isDisabled&&ka.supportsFiber)try{qo=ka.inject(rb),ds=ka}catch{}}Rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nb;Rt.createPortal=function(t,e){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bu(e))throw Error(U(200));return eb(t,e,null,s)};Rt.createRoot=function(t,e){if(!bu(t))throw Error(U(299));var s=!1,n="",r=Gg;return e!=null&&(e.unstable_strictMode===!0&&(s=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=xu(t,1,!1,null,null,s,!1,n,r),t[Es]=e.current,Bi(t.nodeType===8?t.parentNode:t),new vu(e)};Rt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=xp(e),t=t===null?null:t.stateNode,t};Rt.flushSync=function(t){return zn(t)};Rt.hydrate=function(t,e,s){if(!il(e))throw Error(U(200));return al(null,t,e,!0,s)};Rt.hydrateRoot=function(t,e,s){if(!bu(t))throw Error(U(405));var n=s!=null&&s.hydratedSources||null,r=!1,i="",a=Gg;if(s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(i=s.identifierPrefix),s.onRecoverableError!==void 0&&(a=s.onRecoverableError)),e=Yg(e,null,t,1,s??null,r,!1,i,a),t[Es]=e.current,Bi(t),n)for(t=0;t<n.length;t++)s=n[t],r=s._getVersion,r=r(s._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[s,r]:e.mutableSourceEagerHydrationData.push(s,r);return new rl(e)};Rt.render=function(t,e,s){if(!il(e))throw Error(U(200));return al(null,t,e,!1,s)};Rt.unmountComponentAtNode=function(t){if(!il(t))throw Error(U(40));return t._reactRootContainer?(zn(function(){al(null,null,t,!1,function(){t._reactRootContainer=null,t[Es]=null})}),!0):!1};Rt.unstable_batchedUpdates=fu;Rt.unstable_renderSubtreeIntoContainer=function(t,e,s,n){if(!il(s))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return al(t,e,s,!1,n)};Rt.version="18.3.1-next-f1338f8080-20240426";function Qg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Qg)}catch(t){console.error(t)}}Qg(),Qm.exports=Rt;var ib=Qm.exports,Jg,Gh=ib;Jg=Gh.createRoot,Gh.hydrateRoot;const ab="modulepreload",ob=function(t){return"/"+t},Qh={},sa=function(e,s,n){let r=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));r=Promise.allSettled(s.map(c=>{if(c=ob(c),c in Qh)return;Qh[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":ab,d||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return r.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},lb=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>sa(async()=>{const{default:n}=await Promise.resolve().then(()=>zr);return{default:n}},void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)};class wu extends Error{constructor(e,s="FunctionsError",n){super(e),this.name=s,this.context=n}}class cb extends wu{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Jh extends wu{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Xh extends wu{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var id;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(id||(id={}));var db=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(a){a(i)})}return new(s||(s=Promise))(function(i,a){function l(u){try{d(n.next(u))}catch(h){a(h)}}function c(u){try{d(n.throw(u))}catch(h){a(h)}}function d(u){u.done?i(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};class ub{constructor(e,{headers:s={},customFetch:n,region:r=id.Any}={}){this.url=e,this.headers=s,this.region=r,this.fetch=lb(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,s={}){var n;return db(this,void 0,void 0,function*(){try{const{headers:r,method:i,body:a}=s;let l={},{region:c}=s;c||(c=this.region);const d=new URL(`${this.url}/${e}`);c&&c!=="any"&&(l["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let u;a&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=a):typeof a=="string"?(l["Content-Type"]="text/plain",u=a):typeof FormData<"u"&&a instanceof FormData?u=a:(l["Content-Type"]="application/json",u=JSON.stringify(a)));const h=yield this.fetch(d.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),r),body:u}).catch(y=>{throw new cb(y)}),f=h.headers.get("x-relay-error");if(f&&f==="true")throw new Jh(h);if(!h.ok)throw new Xh(h);let m=((n=h.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),p;return m==="application/json"?p=yield h.json():m==="application/octet-stream"?p=yield h.blob():m==="text/event-stream"?p=h:m==="multipart/form-data"?p=yield h.formData():p=yield h.text(),{data:p,error:null,response:h}}catch(r){return{data:null,error:r,response:r instanceof Xh||r instanceof Jh?r.context:void 0}}})}}var yt={},_u={},ol={},na={},ll={},cl={},hb=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ar=hb();const fb=Ar.fetch,Xg=Ar.fetch.bind(Ar),Zg=Ar.Headers,mb=Ar.Request,pb=Ar.Response,zr=Object.freeze(Object.defineProperty({__proto__:null,Headers:Zg,Request:mb,Response:pb,default:Xg,fetch:fb},Symbol.toStringTag,{value:"Module"})),gb=Rx(zr);var dl={};Object.defineProperty(dl,"__esModule",{value:!0});let xb=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};dl.default=xb;var e0=Ft&&Ft.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(cl,"__esModule",{value:!0});const yb=e0(gb),vb=e0(dl);let bb=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=yb.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,s){return this.headers=Object.assign({},this.headers),this.headers[e]=s,this}then(e,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let r=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var a,l,c;let d=null,u=null,h=null,f=i.status,m=i.statusText;if(i.ok){if(this.method!=="HEAD"){const x=await i.text();x===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=x:u=JSON.parse(x))}const y=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),b=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");y&&b&&b.length>1&&(h=parseInt(b[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(d={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,f=406,m="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const y=await i.text();try{d=JSON.parse(y),Array.isArray(d)&&i.status===404&&(u=[],d=null,f=200,m="OK")}catch{i.status===404&&y===""?(f=204,m="No Content"):d={message:y}}if(d&&this.isMaybeSingle&&(!((c=d==null?void 0:d.details)===null||c===void 0)&&c.includes("0 rows"))&&(d=null,f=200,m="OK"),d&&this.shouldThrowOnError)throw new vb.default(d)}return{error:d,data:u,count:h,status:f,statusText:m}});return this.shouldThrowOnError||(r=r.catch(i=>{var a,l,c;return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,s)}returns(){return this}overrideTypes(){return this}};cl.default=bb;var wb=Ft&&Ft.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ll,"__esModule",{value:!0});const _b=wb(cl);let jb=class extends _b.default{select(e){let s=!1;const n=(e??"*").split("").map(r=>/\s/.test(r)&&!s?"":(r==='"'&&(s=!s),r)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:s=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){const a=i?`${i}.order`:"order",l=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${l?`${l},`:""}${e}.${s?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:s,referencedTable:n=s}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,s,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"offset":`${r}.offset`,a=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(a,`${s-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:s=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:a="text"}={}){var l;const c=[e?"analyze":null,s?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${d}"; options=${c};`,a==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};ll.default=jb;var kb=Ft&&Ft.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(na,"__esModule",{value:!0});const Nb=kb(ll);let Sb=class extends Nb.default{eq(e,s){return this.url.searchParams.append(e,`eq.${s}`),this}neq(e,s){return this.url.searchParams.append(e,`neq.${s}`),this}gt(e,s){return this.url.searchParams.append(e,`gt.${s}`),this}gte(e,s){return this.url.searchParams.append(e,`gte.${s}`),this}lt(e,s){return this.url.searchParams.append(e,`lt.${s}`),this}lte(e,s){return this.url.searchParams.append(e,`lte.${s}`),this}like(e,s){return this.url.searchParams.append(e,`like.${s}`),this}likeAllOf(e,s){return this.url.searchParams.append(e,`like(all).{${s.join(",")}}`),this}likeAnyOf(e,s){return this.url.searchParams.append(e,`like(any).{${s.join(",")}}`),this}ilike(e,s){return this.url.searchParams.append(e,`ilike.${s}`),this}ilikeAllOf(e,s){return this.url.searchParams.append(e,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(e,s){return this.url.searchParams.append(e,`ilike(any).{${s.join(",")}}`),this}is(e,s){return this.url.searchParams.append(e,`is.${s}`),this}in(e,s){const n=Array.from(new Set(s)).map(r=>typeof r=="string"&&new RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cs.{${s.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(s)}`),this}containedBy(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cd.{${s.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(s)}`),this}rangeGt(e,s){return this.url.searchParams.append(e,`sr.${s}`),this}rangeGte(e,s){return this.url.searchParams.append(e,`nxl.${s}`),this}rangeLt(e,s){return this.url.searchParams.append(e,`sl.${s}`),this}rangeLte(e,s){return this.url.searchParams.append(e,`nxr.${s}`),this}rangeAdjacent(e,s){return this.url.searchParams.append(e,`adj.${s}`),this}overlaps(e,s){return typeof s=="string"?this.url.searchParams.append(e,`ov.${s}`):this.url.searchParams.append(e,`ov.{${s.join(",")}}`),this}textSearch(e,s,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const a=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${a}.${s}`),this}match(e){return Object.entries(e).forEach(([s,n])=>{this.url.searchParams.append(s,`eq.${n}`)}),this}not(e,s,n){return this.url.searchParams.append(e,`not.${s}.${n}`),this}or(e,{foreignTable:s,referencedTable:n=s}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,s,n){return this.url.searchParams.append(e,`${s}.${n}`),this}};na.default=Sb;var Cb=Ft&&Ft.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ol,"__esModule",{value:!0});const Qr=Cb(na);let Pb=class{constructor(e,{headers:s={},schema:n,fetch:r}){this.url=e,this.headers=s,this.schema=n,this.fetch=r}select(e,{head:s=!1,count:n}={}){const r=s?"HEAD":"GET";let i=!1;const a=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",a),n&&(this.headers.Prefer=`count=${n}`),new Qr.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:s,defaultToNull:n=!0}={}){const r="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),s&&i.push(`count=${s}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const a=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Qr.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:s,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){const a="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&l.push(this.headers.Prefer),r&&l.push(`count=${r}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const c=e.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(c.length>0){const d=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new Qr.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:s}={}){const n="PATCH",r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),s&&r.push(`count=${s}`),this.headers.Prefer=r.join(","),new Qr.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const s="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Qr.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};ol.default=Pb;var ul={},hl={};Object.defineProperty(hl,"__esModule",{value:!0});hl.version=void 0;hl.version="0.0.0-automated";Object.defineProperty(ul,"__esModule",{value:!0});ul.DEFAULT_HEADERS=void 0;const Eb=hl;ul.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Eb.version}`};var t0=Ft&&Ft.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_u,"__esModule",{value:!0});const Tb=t0(ol),Ab=t0(na),Ob=ul;let Rb=class s0{constructor(e,{headers:s={},schema:n,fetch:r}={}){this.url=e,this.headers=Object.assign(Object.assign({},Ob.DEFAULT_HEADERS),s),this.schemaName=n,this.fetch=r}from(e){const s=new URL(`${this.url}/${e}`);return new Tb.default(s,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new s0(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,s={},{head:n=!1,get:r=!1,count:i}={}){let a;const l=new URL(`${this.url}/rpc/${e}`);let c;n||r?(a=n?"HEAD":"GET",Object.entries(s).filter(([u,h])=>h!==void 0).map(([u,h])=>[u,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([u,h])=>{l.searchParams.append(u,h)})):(a="POST",c=s);const d=Object.assign({},this.headers);return i&&(d.Prefer=`count=${i}`),new Ab.default({method:a,url:l,headers:d,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};_u.default=Rb;var Fr=Ft&&Ft.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(yt,"__esModule",{value:!0});yt.PostgrestError=yt.PostgrestBuilder=yt.PostgrestTransformBuilder=yt.PostgrestFilterBuilder=yt.PostgrestQueryBuilder=yt.PostgrestClient=void 0;const n0=Fr(_u);yt.PostgrestClient=n0.default;const r0=Fr(ol);yt.PostgrestQueryBuilder=r0.default;const i0=Fr(na);yt.PostgrestFilterBuilder=i0.default;const a0=Fr(ll);yt.PostgrestTransformBuilder=a0.default;const o0=Fr(cl);yt.PostgrestBuilder=o0.default;const l0=Fr(dl);yt.PostgrestError=l0.default;var Mb=yt.default={PostgrestClient:n0.default,PostgrestQueryBuilder:r0.default,PostgrestFilterBuilder:i0.default,PostgrestTransformBuilder:a0.default,PostgrestBuilder:o0.default,PostgrestError:l0.default};const{PostgrestClient:Lb,PostgrestQueryBuilder:qN,PostgrestFilterBuilder:KN,PostgrestTransformBuilder:YN,PostgrestBuilder:GN,PostgrestError:QN}=Mb;function Db(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const Bb=Db(),Ib="2.11.15",$b=`realtime-js/${Ib}`,zb="1.0.0",c0=1e4,Fb=1e3;var wi;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(wi||(wi={}));var rt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(rt||(rt={}));var Jt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Jt||(Jt={}));var ad;(function(t){t.websocket="websocket"})(ad||(ad={}));var Cn;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Cn||(Cn={}));class Ub{constructor(){this.HEADER_LENGTH=1}decode(e,s){return e.constructor===ArrayBuffer?s(this._binaryDecode(e)):s(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const s=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,s,n)}_decodeBroadcast(e,s,n){const r=s.getUint8(1),i=s.getUint8(2);let a=this.HEADER_LENGTH+2;const l=n.decode(e.slice(a,a+r));a=a+r;const c=n.decode(e.slice(a,a+i));a=a+i;const d=JSON.parse(n.decode(e.slice(a,e.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class d0{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ce;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ce||(Ce={}));const Zh=(t,e,s={})=>{var n;const r=(n=s.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((i,a)=>(i[a]=Wb(a,t,e,r),i),{})},Wb=(t,e,s,n)=>{const r=e.find(l=>l.name===t),i=r==null?void 0:r.type,a=s[t];return i&&!n.includes(i)?u0(i,a):od(a)},u0=(t,e)=>{if(t.charAt(0)==="_"){const s=t.slice(1,t.length);return Kb(e,s)}switch(t){case Ce.bool:return Hb(e);case Ce.float4:case Ce.float8:case Ce.int2:case Ce.int4:case Ce.int8:case Ce.numeric:case Ce.oid:return Vb(e);case Ce.json:case Ce.jsonb:return qb(e);case Ce.timestamp:return Yb(e);case Ce.abstime:case Ce.date:case Ce.daterange:case Ce.int4range:case Ce.int8range:case Ce.money:case Ce.reltime:case Ce.text:case Ce.time:case Ce.timestamptz:case Ce.timetz:case Ce.tsrange:case Ce.tstzrange:return od(e);default:return od(e)}},od=t=>t,Hb=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Vb=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},qb=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Kb=(t,e)=>{if(typeof t!="string")return t;const s=t.length-1,n=t[s];if(t[0]==="{"&&n==="}"){let i;const a=t.slice(1,s);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(l=>u0(e,l))}return t},Yb=t=>typeof t=="string"?t.replace(" ","T"):t,h0=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Kl{constructor(e,s,n={},r=c0){this.channel=e,this.event=s,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var n;return this._hasReceived(e)&&s((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var ef;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(ef||(ef={}));class _i{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},r=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=_i.syncState(this.state,r,i,a),this.pendingDiffs.forEach(c=>{this.state=_i.syncDiff(this.state,c,i,a)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},r=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=_i.syncDiff(this.state,r,i,a),l())}),this.onJoin((r,i,a)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:i,newPresences:a})}),this.onLeave((r,i,a)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,n,r){const i=this.cloneDeep(e),a=this.transformState(s),l={},c={};return this.map(i,(d,u)=>{a[d]||(c[d]=u)}),this.map(a,(d,u)=>{const h=i[d];if(h){const f=u.map(b=>b.presence_ref),m=h.map(b=>b.presence_ref),p=u.filter(b=>m.indexOf(b.presence_ref)<0),y=h.filter(b=>f.indexOf(b.presence_ref)<0);p.length>0&&(l[d]=p),y.length>0&&(c[d]=y)}else l[d]=u}),this.syncDiff(i,{joins:l,leaves:c},n,r)}static syncDiff(e,s,n,r){const{joins:i,leaves:a}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(i,(l,c)=>{var d;const u=(d=e[l])!==null&&d!==void 0?d:[];if(e[l]=this.cloneDeep(c),u.length>0){const h=e[l].map(m=>m.presence_ref),f=u.filter(m=>h.indexOf(m.presence_ref)<0);e[l].unshift(...f)}n(l,u,c)}),this.map(a,(l,c)=>{let d=e[l];if(!d)return;const u=c.map(h=>h.presence_ref);d=d.filter(h=>u.indexOf(h.presence_ref)<0),e[l]=d,r(l,d,c),d.length===0&&delete e[l]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(n=>s(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,n)=>{const r=e[n];return"metas"in r?s[n]=r.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):s[n]=r,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var tf;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(tf||(tf={}));var sf;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(sf||(sf={}));var vs;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(vs||(vs={}));class ju{constructor(e,s={config:{}},n){this.topic=e,this.params=s,this.socket=n,this.bindings={},this.state=rt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Kl(this,Jt.join,this.params,this.timeout),this.rejoinTimer=new d0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=rt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=rt.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=rt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=rt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Jt.reply,{},(r,i)=>{this._trigger(this._replyEventName(i),r)}),this.presence=new _i(this),this.broadcastEndpointURL=h0(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,s=this.timeout){var n,r;if(this.socket.isConnected()||this.socket.connect(),this.state==rt.closed){const{config:{broadcast:i,presence:a,private:l}}=this.params;this._onError(u=>e==null?void 0:e(vs.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(vs.CLOSED));const c={},d={broadcast:i,presence:a,postgres_changes:(r=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(u=>u.filter))!==null&&r!==void 0?r:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:u})=>{var h;if(this.socket.setAuth(),u===void 0){e==null||e(vs.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,m=(h=f==null?void 0:f.length)!==null&&h!==void 0?h:0,p=[];for(let y=0;y<m;y++){const b=f[y],{filter:{event:x,schema:g,table:v,filter:w}}=b,_=u&&u[y];if(_&&_.event===x&&_.schema===g&&_.table===v&&_.filter===w)p.push(Object.assign(Object.assign({},b),{id:_.id}));else{this.unsubscribe(),this.state=rt.errored,e==null||e(vs.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e(vs.SUBSCRIBED);return}}).receive("error",u=>{this.state=rt.errored,e==null||e(vs.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(vs.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,n){return this._on(e,s,n)}async send(e,s={}){var n,r;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:a}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=s.timeout)!==null&&n!==void 0?n:this.timeout);return await((r=d.body)===null||r===void 0?void 0:r.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,l,c;const d=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=rt.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Jt.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(r=>{n=new Kl(this,Jt.leave,{},e),n.receive("ok",()=>{s(),r("ok")}).receive("timeout",()=>{s(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,s,n){const r=new AbortController,i=setTimeout(()=>r.abort(),n),a=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:r.signal}));return clearTimeout(i),a}_push(e,s,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new Kl(this,e,s,n);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,s,n){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,n){var r,i;const a=e.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=Jt;if(n&&[l,c,d,u].indexOf(a)>=0&&n!==this._joinRef())return;let f=this._onMessage(a,s,n);if(s&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(m=>{var p,y,b;return((p=m.filter)===null||p===void 0?void 0:p.event)==="*"||((b=(y=m.filter)===null||y===void 0?void 0:y.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===a}).map(m=>m.callback(f,n)):(i=this.bindings[a])===null||i===void 0||i.filter(m=>{var p,y,b,x,g,v;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in m){const w=m.id,_=(p=m.filter)===null||p===void 0?void 0:p.event;return w&&((y=s.ids)===null||y===void 0?void 0:y.includes(w))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((b=s.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const w=(g=(x=m==null?void 0:m.filter)===null||x===void 0?void 0:x.event)===null||g===void 0?void 0:g.toLocaleLowerCase();return w==="*"||w===((v=s==null?void 0:s.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===a}).map(m=>{if(typeof f=="object"&&"ids"in f){const p=f.data,{schema:y,table:b,commit_timestamp:x,type:g,errors:v}=p;f=Object.assign(Object.assign({},{schema:y,table:b,commit_timestamp:x,eventType:g,new:{},old:{},errors:v}),this._getPayloadRecords(p))}m.callback(f,n)})}_isClosed(){return this.state===rt.closed}_isJoined(){return this.state===rt.joined}_isJoining(){return this.state===rt.joining}_isLeaving(){return this.state===rt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,n){const r=e.toLocaleLowerCase(),i={type:r,filter:s,callback:n};return this.bindings[r]?this.bindings[r].push(i):this.bindings[r]=[i],this}_off(e,s){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(r=>{var i;return!(((i=r.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&ju.isEqual(r.filter,s))}),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const n in e)if(e[n]!==s[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Jt.close,{},e)}_onError(e){this._on(Jt.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=rt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=Zh(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=Zh(e.columns,e.old_record)),s}}const nf=()=>{},Gb=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Qb{constructor(e,s){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=c0,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=nf,this.ref=0,this.logger=nf,this.conn=null,this.sendBuffer=[],this.serializer=new Ub,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...l)=>sa(async()=>{const{default:c}=await Promise.resolve().then(()=>zr);return{default:c}},void 0).then(({default:c})=>c(...l)):a=fetch,(...l)=>a(...l)},this.endPoint=`${e}/${ad.websocket}`,this.httpEndpoint=h0(e),s!=null&&s.transport?this.transport=s.transport:this.transport=null,s!=null&&s.params&&(this.params=s.params),s!=null&&s.timeout&&(this.timeout=s.timeout),s!=null&&s.logger&&(this.logger=s.logger),(s!=null&&s.logLevel||s!=null&&s.log_level)&&(this.logLevel=s.logLevel||s.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),s!=null&&s.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const r=(n=s==null?void 0:s.params)===null||n===void 0?void 0:n.apikey;if(r&&(this.accessTokenValue=r,this.apiKey=r),this.reconnectAfterMs=s!=null&&s.reconnectAfterMs?s.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=s!=null&&s.encode?s.encode:(i,a)=>a(JSON.stringify(i)),this.decode=s!=null&&s.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new d0(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s==null?void 0:s.fetch),s!=null&&s.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(s==null?void 0:s.worker)||!1,this.workerUrl=s==null?void 0:s.workerUrl}this.accessToken=(s==null?void 0:s.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=Bb),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:zb}))}disconnect(e,s){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,s,n){this.logger(e,s,n)}connectionState(){switch(this.conn&&this.conn.readyState){case wi.connecting:return Cn.Connecting;case wi.open:return Cn.Open;case wi.closing:return Cn.Closing;default:return Cn.Closed}}isConnected(){return this.connectionState()===Cn.Open}channel(e,s={config:{}}){const n=`realtime:${e}`,r=this.getChannels().find(i=>i.topic===n);if(r)return r;{const i=new ju(`realtime:${e}`,s,this);return this.channels.push(i),i}}push(e){const{topic:s,event:n,payload:r,ref:i}=e,a=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${s} ${n} (${i})`,r),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){let s=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(n=>{const r={access_token:s,version:$b};s&&n.updateJoinPayload(r),n.joinedOnce&&n._isJoined()&&n._push(Jt.access_token,{access_token:s})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(Fb,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,s=>{let{topic:n,event:r,payload:i,ref:a}=s;n==="phoenix"&&r==="phx_reply"&&this.heartbeatCallback(s.payload.status=="ok"?"ok":"error"),a&&a===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${r} ${a&&"("+a+")"||""}`,i),Array.from(this.channels).filter(l=>l._isMember(n)).forEach(l=>l._trigger(r,i,a)),this.stateChangeCallbacks.message.forEach(l=>l(s))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Jt.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const n=e.match(/\?/)?"&":"?",r=new URLSearchParams(s);return`${e}${n}${r}`}_workerObjectUrl(e){let s;if(e)s=e;else{const n=new Blob([Gb],{type:"application/javascript"});s=URL.createObjectURL(n)}return s}}class ku extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ye(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Jb extends ku{constructor(e,s,n){super(e),this.name="StorageApiError",this.status=s,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ld extends ku{constructor(e,s){super(e),this.name="StorageUnknownError",this.originalError=s}}var Xb=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(a){a(i)})}return new(s||(s=Promise))(function(i,a){function l(u){try{d(n.next(u))}catch(h){a(h)}}function c(u){try{d(n.throw(u))}catch(h){a(h)}}function d(u){u.done?i(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};const f0=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>sa(async()=>{const{default:n}=await Promise.resolve().then(()=>zr);return{default:n}},void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)},Zb=()=>Xb(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield sa(()=>Promise.resolve().then(()=>zr),void 0)).Response:Response}),cd=t=>{if(Array.isArray(t))return t.map(s=>cd(s));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([s,n])=>{const r=s.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[r]=cd(n)}),e},ew=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var qn=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(a){a(i)})}return new(s||(s=Promise))(function(i,a){function l(u){try{d(n.next(u))}catch(h){a(h)}}function c(u){try{d(n.throw(u))}catch(h){a(h)}}function d(u){u.done?i(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};const Yl=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),tw=(t,e,s)=>qn(void 0,void 0,void 0,function*(){const n=yield Zb();t instanceof n&&!(s!=null&&s.noResolveJson)?t.json().then(r=>{const i=t.status||500,a=(r==null?void 0:r.statusCode)||i+"";e(new Jb(Yl(r),i,a))}).catch(r=>{e(new ld(Yl(r),r))}):e(new ld(Yl(t),t))}),sw=(t,e,s,n)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?r:(ew(n)?(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r.body=JSON.stringify(n)):r.body=n,Object.assign(Object.assign({},r),s))};function ra(t,e,s,n,r,i){return qn(this,void 0,void 0,function*(){return new Promise((a,l)=>{t(s,sw(e,n,r,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>tw(c,l,n))})})}function Ao(t,e,s,n){return qn(this,void 0,void 0,function*(){return ra(t,"GET",e,s,n)})}function bs(t,e,s,n,r){return qn(this,void 0,void 0,function*(){return ra(t,"POST",e,n,r,s)})}function dd(t,e,s,n,r){return qn(this,void 0,void 0,function*(){return ra(t,"PUT",e,n,r,s)})}function nw(t,e,s,n){return qn(this,void 0,void 0,function*(){return ra(t,"HEAD",e,Object.assign(Object.assign({},s),{noResolveJson:!0}),n)})}function m0(t,e,s,n,r){return qn(this,void 0,void 0,function*(){return ra(t,"DELETE",e,n,r,s)})}var pt=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(a){a(i)})}return new(s||(s=Promise))(function(i,a){function l(u){try{d(n.next(u))}catch(h){a(h)}}function c(u){try{d(n.throw(u))}catch(h){a(h)}}function d(u){u.done?i(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};const rw={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},rf={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class iw{constructor(e,s={},n,r){this.url=e,this.headers=s,this.bucketId=n,this.fetch=f0(r)}uploadOrUpdate(e,s,n,r){return pt(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},rf),r);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),r!=null&&r.headers&&(l=Object.assign(Object.assign({},l),r.headers));const d=this._removeEmptyFolders(s),u=this._getFinalPath(d),h=yield(e=="PUT"?dd:bs)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:d,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(Ye(i))return{data:null,error:i};throw i}})}upload(e,s,n){return pt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,s,n)})}uploadToSignedUrl(e,s,n,r){return pt(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),a=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",s);try{let c;const d=Object.assign({upsert:rf.upsert},r),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",d.cacheControl)):(c=n,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const h=yield dd(this.fetch,l.toString(),c,{headers:u});return{data:{path:i,fullPath:h.Key},error:null}}catch(c){if(Ye(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,s){return pt(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const r=Object.assign({},this.headers);s!=null&&s.upsert&&(r["x-upsert"]="true");const i=yield bs(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:r}),a=new URL(this.url+i.url),l=a.searchParams.get("token");if(!l)throw new ku("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:l},error:null}}catch(n){if(Ye(n))return{data:null,error:n};throw n}})}update(e,s,n){return pt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,s,n)})}move(e,s,n){return pt(this,void 0,void 0,function*(){try{return{data:yield bs(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(Ye(r))return{data:null,error:r};throw r}})}copy(e,s,n){return pt(this,void 0,void 0,function*(){try{return{data:{path:(yield bs(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(Ye(r))return{data:null,error:r};throw r}})}createSignedUrl(e,s,n){return pt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),i=yield bs(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:s},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(r){if(Ye(r))return{data:null,error:r};throw r}})}createSignedUrls(e,s,n){return pt(this,void 0,void 0,function*(){try{const r=yield bs(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:e},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:r.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(r){if(Ye(r))return{data:null,error:r};throw r}})}download(e,s){return pt(this,void 0,void 0,function*(){const r=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),a=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield Ao(this.fetch,`${this.url}/${r}/${l}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Ye(l))return{data:null,error:l};throw l}})}info(e){return pt(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{const n=yield Ao(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:cd(n),error:null}}catch(n){if(Ye(n))return{data:null,error:n};throw n}})}exists(e){return pt(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{return yield nw(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Ye(n)&&n instanceof ld){const r=n.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,s){const n=this._getFinalPath(e),r=[],i=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";i!==""&&r.push(i);const l=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});c!==""&&r.push(c);let d=r.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${d}`)}}}remove(e){return pt(this,void 0,void 0,function*(){try{return{data:yield m0(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(s){if(Ye(s))return{data:null,error:s};throw s}})}list(e,s,n){return pt(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},rw),s),{prefix:e||""});return{data:yield bs(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(Ye(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const s=[];return e.width&&s.push(`width=${e.width}`),e.height&&s.push(`height=${e.height}`),e.resize&&s.push(`resize=${e.resize}`),e.format&&s.push(`format=${e.format}`),e.quality&&s.push(`quality=${e.quality}`),s.join("&")}}const aw="2.10.4",ow={"X-Client-Info":`storage-js/${aw}`};var Gn=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(a){a(i)})}return new(s||(s=Promise))(function(i,a){function l(u){try{d(n.next(u))}catch(h){a(h)}}function c(u){try{d(n.throw(u))}catch(h){a(h)}}function d(u){u.done?i(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};class lw{constructor(e,s={},n,r){const i=new URL(e);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},ow),s),this.fetch=f0(n)}listBuckets(){return Gn(this,void 0,void 0,function*(){try{return{data:yield Ao(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Ye(e))return{data:null,error:e};throw e}})}getBucket(e){return Gn(this,void 0,void 0,function*(){try{return{data:yield Ao(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(s){if(Ye(s))return{data:null,error:s};throw s}})}createBucket(e,s={public:!1}){return Gn(this,void 0,void 0,function*(){try{return{data:yield bs(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Ye(n))return{data:null,error:n};throw n}})}updateBucket(e,s){return Gn(this,void 0,void 0,function*(){try{return{data:yield dd(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Ye(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Gn(this,void 0,void 0,function*(){try{return{data:yield bs(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(Ye(s))return{data:null,error:s};throw s}})}deleteBucket(e){return Gn(this,void 0,void 0,function*(){try{return{data:yield m0(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(Ye(s))return{data:null,error:s};throw s}})}}class cw extends lw{constructor(e,s={},n,r){super(e,s,n,r)}from(e){return new iw(this.url,this.headers,e,this.fetch)}}const dw="2.53.0";let ai="";typeof Deno<"u"?ai="deno":typeof document<"u"?ai="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ai="react-native":ai="node";const uw={"X-Client-Info":`supabase-js-${ai}/${dw}`},hw={headers:uw},fw={schema:"public"},mw={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},pw={};var gw=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(a){a(i)})}return new(s||(s=Promise))(function(i,a){function l(u){try{d(n.next(u))}catch(h){a(h)}}function c(u){try{d(n.throw(u))}catch(h){a(h)}}function d(u){u.done?i(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};const xw=t=>{let e;return t?e=t:typeof fetch>"u"?e=Xg:e=fetch,(...s)=>e(...s)},yw=()=>typeof Headers>"u"?Zg:Headers,vw=(t,e,s)=>{const n=xw(s),r=yw();return(i,a)=>gw(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:t;let d=new r(a==null?void 0:a.headers);return d.has("apikey")||d.set("apikey",t),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},a),{headers:d}))})};var bw=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(a){a(i)})}return new(s||(s=Promise))(function(i,a){function l(u){try{d(n.next(u))}catch(h){a(h)}}function c(u){try{d(n.throw(u))}catch(h){a(h)}}function d(u){u.done?i(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};function ww(t){return t.endsWith("/")?t:t+"/"}function _w(t,e){var s,n;const{db:r,auth:i,realtime:a,global:l}=t,{db:c,auth:d,realtime:u,global:h}=e,f={db:Object.assign(Object.assign({},c),r),auth:Object.assign(Object.assign({},d),i),realtime:Object.assign(Object.assign({},u),a),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(s=h==null?void 0:h.headers)!==null&&s!==void 0?s:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>bw(this,void 0,void 0,function*(){return""})};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}const p0="2.71.1",tr=30*1e3,ud=3,Gl=ud*tr,jw="http://localhost:9999",kw="supabase.auth.token",Nw={"X-Client-Info":`gotrue-js/${p0}`},hd="X-Supabase-Api-Version",g0={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Sw=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Cw=10*60*1e3;class Nu extends Error{constructor(e,s,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=n}}function fe(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Pw extends Nu{constructor(e,s,n){super(e,s,n),this.name="AuthApiError",this.status=s,this.code=n}}function Ew(t){return fe(t)&&t.name==="AuthApiError"}class x0 extends Nu{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class fn extends Nu{constructor(e,s,n,r){super(e,n,r),this.name=s,this.status=n}}class Bs extends fn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Tw(t){return fe(t)&&t.name==="AuthSessionMissingError"}class Na extends fn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Sa extends fn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ca extends fn{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Aw(t){return fe(t)&&t.name==="AuthImplicitGrantRedirectError"}class af extends fn{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class fd extends fn{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function Ql(t){return fe(t)&&t.name==="AuthRetryableFetchError"}class of extends fn{constructor(e,s,n){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=n}}class md extends fn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Oo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),lf=` 	
\r=`.split(""),Ow=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<lf.length;e+=1)t[lf[e].charCodeAt(0)]=-2;for(let e=0;e<Oo.length;e+=1)t[Oo[e].charCodeAt(0)]=e;return t})();function cf(t,e,s){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;s(Oo[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;s(Oo[n]),e.queuedBits-=6}}function y0(t,e,s){const n=Ow[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)s(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function df(t){const e=[],s=a=>{e.push(String.fromCodePoint(a))},n={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},i=a=>{Lw(a,n,s)};for(let a=0;a<t.length;a+=1)y0(t.charCodeAt(a),r,i);return e.join("")}function Rw(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Mw(t,e){for(let s=0;s<t.length;s+=1){let n=t.charCodeAt(s);if(n>55295&&n<=56319){const r=(n-55296)*1024&65535;n=(t.charCodeAt(s+1)-56320&65535|r)+65536,s+=1}Rw(n,e)}}function Lw(t,e,s){if(e.utf8seq===0){if(t<=127){s(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&s(e.codepoint)}}function Dw(t){const e=[],s={queue:0,queuedBits:0},n=r=>{e.push(r)};for(let r=0;r<t.length;r+=1)y0(t.charCodeAt(r),s,n);return new Uint8Array(e)}function Bw(t){const e=[];return Mw(t,s=>e.push(s)),new Uint8Array(e)}function Iw(t){const e=[],s={queue:0,queuedBits:0},n=r=>{e.push(r)};return t.forEach(r=>cf(r,s,n)),cf(null,s,n),e.join("")}function $w(t){return Math.round(Date.now()/1e3)+t}function zw(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Yt=()=>typeof window<"u"&&typeof document<"u",xn={tested:!1,writable:!1},v0=()=>{if(!Yt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(xn.tested)return xn.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),xn.tested=!0,xn.writable=!0}catch{xn.tested=!0,xn.writable=!1}return xn.writable};function Fw(t){const e={},s=new URL(t);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((r,i)=>{e[i]=r})}catch{}return s.searchParams.forEach((n,r)=>{e[r]=n}),e}const b0=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>sa(async()=>{const{default:n}=await Promise.resolve().then(()=>zr);return{default:n}},void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)},Uw=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",sr=async(t,e,s)=>{await t.setItem(e,JSON.stringify(s))},yn=async(t,e)=>{const s=await t.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},Ls=async(t,e)=>{await t.removeItem(e)};class fl{constructor(){this.promise=new fl.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}fl.promiseConstructor=Promise;function Jl(t){const e=t.split(".");if(e.length!==3)throw new md("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!Sw.test(e[n]))throw new md("JWT not in base64url format");return{header:JSON.parse(df(e[0])),payload:JSON.parse(df(e[1])),signature:Dw(e[2]),raw:{header:e[0],payload:e[1]}}}async function Ww(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Hw(t,e){return new Promise((n,r)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await t(i);if(!e(i,null,a)){n(a);return}}catch(a){if(!e(i,a)){r(a);return}}})()})}function Vw(t){return("0"+t.toString(16)).substr(-2)}function qw(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=s.length;let r="";for(let i=0;i<56;i++)r+=s.charAt(Math.floor(Math.random()*n));return r}return crypto.getRandomValues(e),Array.from(e,Vw).join("")}async function Kw(t){const s=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",s),r=new Uint8Array(n);return Array.from(r).map(i=>String.fromCharCode(i)).join("")}async function Yw(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const s=await Kw(t);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Qn(t,e,s=!1){const n=qw();let r=n;s&&(r+="/PASSWORD_RECOVERY"),await sr(t,`${e}-code-verifier`,r);const i=await Yw(n);return[i,n===i?"plain":"s256"]}const Gw=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Qw(t){const e=t.headers.get(hd);if(!e||!e.match(Gw))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Jw(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Xw(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Zw=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Jn(t){if(!Zw.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Xl(){const t={};return new Proxy(t,{get:(e,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const n=s.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function uf(t){return JSON.parse(JSON.stringify(t))}var e_=function(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(s[n[r]]=t[n[r]]);return s};const kn=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),t_=[502,503,504];async function hf(t){var e;if(!Uw(t))throw new fd(kn(t),0);if(t_.includes(t.status))throw new fd(kn(t),t.status);let s;try{s=await t.json()}catch(i){throw new x0(kn(i),i)}let n;const r=Qw(t);if(r&&r.getTime()>=g0["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?n=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(n=s.error_code),n){if(n==="weak_password")throw new of(kn(s),t.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Bs}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new of(kn(s),t.status,s.weak_password.reasons);throw new Pw(kn(s),t.status||500,n)}const s_=(t,e,s,n)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(n),Object.assign(Object.assign({},r),s))};async function ge(t,e,s,n){var r;const i=Object.assign({},n==null?void 0:n.headers);i[hd]||(i[hd]=g0["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const a=(r=n==null?void 0:n.query)!==null&&r!==void 0?r:{};n!=null&&n.redirectTo&&(a.redirect_to=n.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await n_(t,e,s+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function n_(t,e,s,n,r,i){const a=s_(e,n,r,i);let l;try{l=await t(s,Object.assign({},a))}catch(c){throw console.error(c),new fd(kn(c),0)}if(l.ok||await hf(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await hf(c)}}function ps(t){var e;let s=null;o_(t)&&(s=Object.assign({},t),t.expires_at||(s.expires_at=$w(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:s,user:n},error:null}}function ff(t){const e=ps(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((s,n)=>s&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Us(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function r_(t){return{data:t,error:null}}function i_(t){const{action_link:e,email_otp:s,hashed_token:n,redirect_to:r,verification_type:i}=t,a=e_(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:s,hashed_token:n,redirect_to:r,verification_type:i},c=Object.assign({},a);return{data:{properties:l,user:c},error:null}}function a_(t){return t}function o_(t){return t.access_token&&t.refresh_token&&t.expires_in}const Zl=["global","local","others"];var l_=function(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(s[n[r]]=t[n[r]]);return s};class c_{constructor({url:e="",headers:s={},fetch:n}){this.url=e,this.headers=s,this.fetch=b0(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,s=Zl[0]){if(Zl.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Zl.join(", ")}`);try{return await ge(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(fe(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,s={}){try{return await ge(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Us})}catch(n){if(fe(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:s}=e,n=l_(e,["options"]),r=Object.assign(Object.assign({},n),s);return"newEmail"in n&&(r.new_email=n==null?void 0:n.newEmail,delete r.newEmail),await ge(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:i_,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(fe(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await ge(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Us})}catch(s){if(fe(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,n,r,i,a,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await ge(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&n!==void 0?n:"",per_page:(i=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:""},xform:a_});if(u.error)throw u.error;const h=await u.json(),f=(a=u.headers.get("x-total-count"))!==null&&a!==void 0?a:0,m=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(p=>{const y=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(p.split(";")[1].split("=")[1]);d[`${b}Page`]=y}),d.total=parseInt(f)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(fe(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){Jn(e);try{return await ge(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Us})}catch(s){if(fe(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){Jn(e);try{return await ge(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:Us})}catch(n){if(fe(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,s=!1){Jn(e);try{return await ge(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:Us})}catch(n){if(fe(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Jn(e.userId);try{const{data:s,error:n}=await ge(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:s,error:n}}catch(s){if(fe(s))return{data:null,error:s};throw s}}async _deleteFactor(e){Jn(e.userId),Jn(e.id);try{return{data:await ge(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(fe(s))return{data:null,error:s};throw s}}}function mf(t={}){return{getItem:e=>t[e]||null,setItem:(e,s)=>{t[e]=s},removeItem:e=>{delete t[e]}}}function d_(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Xn={debug:!!(globalThis&&v0()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class w0 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class u_ extends w0{}async function h_(t,e,s){Xn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Xn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async r=>{if(r){Xn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,r.name);try{return await s()}finally{Xn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,r.name)}}else{if(e===0)throw Xn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new u_(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Xn.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}d_();const f_={url:jw,storageKey:kw,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Nw,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function pf(t,e,s){return await s()}const Zn={};class qi{constructor(e){var s,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=qi.nextInstanceID,qi.nextInstanceID+=1,this.instanceID>0&&Yt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},f_),e);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new c_({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=b0(r.fetch),this.lock=r.lock||pf,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:Yt()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=h_:this.lock=pf,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(r.storage?this.storage=r.storage:v0()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=mf(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=mf(this.memoryStorage)),Yt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,s;return(s=(e=Zn[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(e){Zn[this.storageKey]=Object.assign(Object.assign({},Zn[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,s;return(s=(e=Zn[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Zn[this.storageKey]=Object.assign(Object.assign({},Zn[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${p0}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const s=Fw(window.location.href);let n="none";if(this._isImplicitGrantCallback(s)?n="implicit":await this._isPKCECallback(s)&&(n="pkce"),Yt()&&this.detectSessionInUrl&&n!=="none"){const{data:r,error:i}=await this._getSessionFromURL(s,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Aw(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:l}=r;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),await this._saveSession(a),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return fe(s)?{error:s}:{error:new x0("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,n,r;try{const i=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:ps}),{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,d=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(fe(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var s,n,r;try{let i;if("email"in e){const{email:u,password:h,options:f}=e;let m=null,p=null;this.flowType==="pkce"&&([m,p]=await Qn(this.storage,this.storageKey)),i=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:h,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:m,code_challenge_method:p},xform:ps})}else if("phone"in e){const{phone:u,password:h,options:f}=e;i=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(r=f==null?void 0:f.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:ps})}else throw new Sa("You must provide either an email or phone number and a password");const{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,d=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(fe(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let s;if("email"in e){const{email:i,password:a,options:l}=e;s=await ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:ff})}else if("phone"in e){const{phone:i,password:a,options:l}=e;s=await ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:ff})}else throw new Sa("You must provide either an email or phone number and a password");const{data:n,error:r}=s;return r?{data:{user:null,session:null},error:r}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Na}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r})}catch(s){if(fe(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(e){var s,n,r,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:s}=e;if(s==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}async signInWithSolana(e){var s,n,r,i,a,l,c,d,u,h,f,m;let p,y;if("message"in e)p=e.message,y=e.signature;else{const{chain:b,wallet:x,statement:g,options:v}=e;let w;if(Yt())if(typeof x=="object")w=x;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))w=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=x}const _=new URL((s=v==null?void 0:v.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in w&&w.signIn){const S=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),g?{statement:g}:null));let P;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")P=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)P=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in P&&"signature"in P&&(typeof P.signedMessage=="string"||P.signedMessage instanceof Uint8Array)&&P.signature instanceof Uint8Array)p=typeof P.signedMessage=="string"?P.signedMessage:new TextDecoder().decode(P.signedMessage),y=P.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${_.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(r=(n=v==null?void 0:v.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&r!==void 0?r:new Date().toISOString()}`,...!((i=v==null?void 0:v.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((a=v==null?void 0:v.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((l=v==null?void 0:v.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((c=v==null?void 0:v.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((d=v==null?void 0:v.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((h=(u=v==null?void 0:v.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...v.signInWithSolana.resources.map(P=>`- ${P}`)]:[]].join(`
`);const S=await w.signMessage(new TextEncoder().encode(p),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=S}}try{const{data:b,error:x}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:Iw(y)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:ps});if(x)throw x;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new Na}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:x})}catch(b){if(fe(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(e){const s=await yn(this.storage,`${this.storageKey}-code-verifier`),[n,r]=(s??"").split("/");try{const{data:i,error:a}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:ps});if(await Ls(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Na}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:r??null}),error:a})}catch(i){if(fe(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:s,provider:n,token:r,access_token:i,nonce:a}=e,l=await ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:r,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:ps}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Na}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(s){if(fe(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(e){var s,n,r,i,a;try{if("email"in e){const{email:l,options:c}=e;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await Qn(this.storage,this.storageKey));const{error:h}=await ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:c}=e,{data:d,error:u}=await ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new Sa("You must provide either an email or phone number.")}catch(l){if(fe(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var s,n;try{let r,i;"options"in e&&(r=(s=e.options)===null||s===void 0?void 0:s.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:a,error:l}=await ge(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:r,xform:ps});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,d=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(r){if(fe(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var s,n,r;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await Qn(this.storage,this.storageKey)),await ge(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&n!==void 0?n:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:r_})}catch(i){if(fe(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:n}=e;if(n)throw n;if(!s)throw new Bs;const{error:r}=await ge(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(fe(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const s=`${this.url}/resend`;if("email"in e){const{email:n,type:r,options:i}=e,{error:a}=await ge(this.fetch,"POST",s,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:n,type:r,options:i}=e,{data:a,error:l}=await ge(this.fetch,"POST",s,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l}}throw new Sa("You must provide either an email or phone number and a type")}catch(s){if(fe(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await n,await s()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=s();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await yn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Gl:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const a=await yn(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=Xl()}if(this.storage.isServer&&e.user){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,d,u)=>(!a&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:e},error:null}}const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Us}):await this._useSession(async s=>{var n,r,i;const{data:a,error:l}=s;if(l)throw l;return!(!((n=a.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Bs}:await ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0,xform:Us})})}catch(s){if(fe(s))return Tw(s)&&(await this._removeSession(),await Ls(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async n=>{const{data:r,error:i}=n;if(i)throw i;if(!r.session)throw new Bs;const a=r.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await Qn(this.storage,this.storageKey));const{data:d,error:u}=await ge(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:Us});if(u)throw u;return a.user=d.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(n){if(fe(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Bs;const s=Date.now()/1e3;let n=s,r=!0,i=null;const{payload:a}=Jl(e.access_token);if(a.exp&&(n=a.exp,r=n<=s),r){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-s,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(s){if(fe(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var n;if(!e){const{data:a,error:l}=s;if(l)throw l;e=(n=a.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Bs;const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(fe(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(e,s){try{if(!Yt())throw new Ca("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ca(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new af("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ca("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new af("No code detected.");const{data:g,error:v}=await this._exchangeCodeForSession(e.code);if(v)throw v;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:g.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:i,refresh_token:a,expires_in:l,expires_at:c,token_type:d}=e;if(!i||!l||!a||!d)throw new Ca("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(l);let f=u+h;c&&(f=parseInt(c));const m=f-u;m*1e3<=tr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const p=f-h;u-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,f,u):u-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,f,u);const{data:y,error:b}=await this._getUser(i);if(b)throw b;const x={provider_token:n,provider_refresh_token:r,access_token:i,expires_in:h,expires_at:f,refresh_token:a,token_type:d,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:e.type},error:null}}catch(n){if(fe(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const s=await yn(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var n;const{data:r,error:i}=s;if(i)return{error:i};const a=(n=r.session)===null||n===void 0?void 0:n.access_token;if(a){const{error:l}=await this.admin.signOut(a,e);if(l&&!(Ew(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Ls(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const s=zw(),n={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async s=>{var n,r;try{const{data:{session:i},error:a}=s;if(a)throw a;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,s={}){let n=null,r=null;this.flowType==="pkce"&&([n,r]=await Qn(this.storage,this.storageKey,!0));try{return await ge(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(i){if(fe(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:s,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(s){if(fe(s))return{data:null,error:s};throw s}}async linkIdentity(e){var s;try{const{data:n,error:r}=await this._useSession(async i=>{var a,l,c,d,u;const{data:h,error:f}=i;if(f)throw f;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await ge(this.fetch,"GET",m,{headers:this.headers,jwt:(u=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(r)throw r;return Yt()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(fe(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async s=>{var n,r;const{data:i,error:a}=s;if(a)throw a;return await ge(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&r!==void 0?r:void 0})})}catch(s){if(fe(s))return{data:null,error:s};throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const n=Date.now();return await Hw(async r=>(r>0&&await Ww(200*Math.pow(2,r-1)),this._debug(s,"refreshing attempt",r),await ge(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ps})),(r,i)=>{const a=200*Math.pow(2,r);return i&&Ql(i)&&Date.now()+a-n<tr})}catch(n){if(this._debug(s,"error",n),fe(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",n),Yt()&&!s.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,s;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await yn(this.storage,this.storageKey);if(r&&this.userStorage){let a=await yn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:r.user},await sr(this.userStorage,this.storageKey+"-user",a)),r.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:Xl()}else if(r&&!r.user&&!r.user){const a=await yn(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(r.user=a.user,await Ls(this.storage,this.storageKey+"-user"),await sr(this.storage,this.storageKey,r)):r.user=Xl()}if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const i=((s=r.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<Gl;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Gl}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:a}=await this._callRefreshToken(r.refresh_token);a&&(console.error(a),Ql(a)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(r.user&&r.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:l}=await this._getUser(r.access_token);!l&&(a!=null&&a.user)?(r.user=a.user,await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(n,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var s,n;if(!e)throw new Bs;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new fl;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new Bs;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(r,"error",i),fe(i)){const a={session:null,error:i};return Ql(i)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(a),a}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,s,n=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",s,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:s});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,s)}catch(c){i.push(c)}});if(await Promise.all(a),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const s=Object.assign({},e),n=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&s.user&&await sr(this.userStorage,this.storageKey+"-user",{user:s.user});const r=Object.assign({},s);delete r.user;const i=uf(r);await sr(this.storage,this.storageKey,i)}else{const r=uf(s);await sr(this.storage,this.storageKey,r)}}async _removeSession(){this._debug("#_removeSession()"),await Ls(this.storage,this.storageKey),await Ls(this.storage,this.storageKey+"-code-verifier"),await Ls(this.storage,this.storageKey+"-user"),this.userStorage&&await Ls(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Yt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),tr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:n}}=s;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((n.expires_at*1e3-e)/tr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${tr}ms, refresh threshold is ${ud} ticks`),r<=ud&&await this._callRefreshToken(n.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof w0)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Yt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,n){const r=[`provider=${encodeURIComponent(s)}`];if(n!=null&&n.redirectTo&&r.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&r.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,a]=await Qn(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});r.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);r.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&r.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var n;const{data:r,error:i}=s;return i?{data:null,error:i}:await ge(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(fe(s))return{data:null,error:s};throw s}}async _enroll(e){try{return await this._useSession(async s=>{var n,r;const{data:i,error:a}=s;if(a)return{data:null,error:a};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:d}=await ge(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((r=c==null?void 0:c.totp)===null||r===void 0)&&r.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(s){if(fe(s))return{data:null,error:s};throw s}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:r,error:i}=s;if(i)return{data:null,error:i};const{data:a,error:l}=await ge(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(s){if(fe(s))return{data:null,error:s};throw s}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:r,error:i}=s;return i?{data:null,error:i}:await ge(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(fe(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(e){const{data:s,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){const{data:{user:e},error:s}=await this.getUser();if(s)return{data:null,error:s};const n=(e==null?void 0:e.factors)||[],r=n.filter(a=>a.factor_type==="totp"&&a.status==="verified"),i=n.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:n,totp:r,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var s,n;const{data:{session:r},error:i}=e;if(i)return{data:null,error:i};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Jl(r.access_token);let l=null;a.aal&&(l=a.aal);let c=l;((n=(s=r.user.factors)===null||s===void 0?void 0:s.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const u=a.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,s={keys:[]}){let n=s.keys.find(l=>l.kid===e);if(n)return n;const r=Date.now();if(n=this.jwks.keys.find(l=>l.kid===e),n&&this.jwks_cached_at+Cw>r)return n;const{data:i,error:a}=await ge(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=r,n=i.keys.find(l=>l.kid===e),!n)?null:n}async getClaims(e,s={}){try{let n=e;if(!n){const{data:m,error:p}=await this.getSession();if(p||!m.session)return{data:null,error:p};n=m.session.access_token}const{header:r,payload:i,signature:a,raw:{header:l,payload:c}}=Jl(n);s!=null&&s.allowExpired||Jw(i.exp);const d=!r.alg||r.alg.startsWith("HS")||!r.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(r.kid,s!=null&&s.keys?{keys:s.keys}:s==null?void 0:s.jwks);if(!d){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:i,header:r,signature:a},error:null}}const u=Xw(r.alg),h=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,a,Bw(`${l}.${c}`)))throw new md("Invalid JWT signature");return{data:{claims:i,header:r,signature:a},error:null}}catch(n){if(fe(n))return{data:null,error:n};throw n}}}qi.nextInstanceID=0;const m_=qi;class p_ extends m_{constructor(e){super(e)}}var g_=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(a){a(i)})}return new(s||(s=Promise))(function(i,a){function l(u){try{d(n.next(u))}catch(h){a(h)}}function c(u){try{d(n.throw(u))}catch(h){a(h)}}function d(u){u.done?i(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};class x_{constructor(e,s,n){var r,i,a;if(this.supabaseUrl=e,this.supabaseKey=s,!e)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const l=ww(e),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:fw,realtime:pw,auth:Object.assign(Object.assign({},mw),{storageKey:d}),global:hw},h=_w(n??{},u);this.storageKey=(r=h.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=h.auth)!==null&&a!==void 0?a:{},this.headers,h.global.fetch),this.fetch=vw(s,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new Lb(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new cw(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new ub(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,s={},n={}){return this.rest.rpc(e,s,n)}channel(e,s={config:{}}){return this.realtime.channel(e,s)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,s;return g_(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(s=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:s,detectSessionInUrl:n,storage:r,storageKey:i,flowType:a,lock:l,debug:c},d,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new p_({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),d),storageKey:i,autoRefreshToken:e,persistSession:s,detectSessionInUrl:n,storage:r,flowType:a,lock:l,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Qb(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,n)=>{this._handleTokenChanged(s,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,s,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const y_=(t,e,s)=>new x_(t,e,s);function v_(){if(typeof window<"u"||typeof process>"u"||process.version===void 0||process.version===null)return!1;const t=process.version.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}v_()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const b_="https://eymxpphofhhfeuvaqfad.supabase.co",w_="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImV5bXhwcGhvZmhoZmV1dmFxZmFkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMzNTAwMTIsImV4cCI6MjA2ODkyNjAxMn0.mR-TxkFP6b48BB_s_W7mD7NFV3oEZIweAQk7EefzssY",H=y_(b_,w_),_0=N.createContext(void 0);function __({children:t}){const[e,s]=N.useState(null),[n,r]=N.useState(!1);N.useEffect(()=>{(async()=>{r(!0);try{const{data:{session:d}}=await H.auth.getSession();if(d!=null&&d.user){const{data:u}=await H.from("profiles").select("*").eq("id",d.user.id).limit(1);u&&u.length>0&&s({id:u[0].id,username:u[0].username,email:u[0].email||"",role:u[0].role||"user",joinedDate:u[0].created_at})}}catch(d){console.error("Session check error:",d)}finally{r(!1)}})()},[]);const i=async(c,d)=>{try{console.log(" LOGIN ATTEMPT - Username:",c);const{data:u,error:h}=await H.from("profiles").select("*").eq("username",c).limit(1);if(h)return console.error(" LOGIN FAILED - Database error:",h),!1;if(!u||u.length===0)return console.error(" LOGIN FAILED - No profile found for username:",c),!1;const f=u[0];if(!f.email)return console.error(" LOGIN FAILED - Profile has no email:",f),!1;console.log(" Profile found - Email:",f.email,"Role:",f.role);const{data:m,error:p}=await H.auth.signInWithPassword({email:f.email,password:d});return p?(console.error(" SUPABASE AUTH ERROR:",p.message),!1):(s({id:f.id,username:f.username,email:f.email||"",role:f.role||"user",joinedDate:f.created_at}),!0)}catch(u){return console.error("Login error:",u),!1}},a=async(c,d,u,h)=>{var f,m,p,y;try{console.log(" SIGNUP ATTEMPT - Username:",c,"Email:",d);const{data:b,error:x}=await H.auth.signUp({email:d,password:u,options:{data:{username:c}}});if(x)return console.error(" SUPABASE SIGNUP ERROR:",x.message,"Code:",x.status),!1;if(console.log(" SUPABASE SIGNUP SUCCESS:",{user_id:(f=b.user)==null?void 0:f.id,email:(m=b.user)==null?void 0:m.email,email_confirmed:(p=b.user)==null?void 0:p.email_confirmed_at,user_metadata:(y=b.user)==null?void 0:y.user_metadata}),b.user){const{error:g}=await H.from("profiles").insert({id:b.user.id,username:c,email:d,role:h});g?console.error(" PROFILE CREATION ERROR:",g.message):console.log(" PROFILE CREATED SUCCESSFULLY")}return!0}catch(b){return console.error("Signup error:",b),!1}},l=async()=>{try{console.log(" LOGOUT: Starting logout process...");const{error:c}=await H.auth.signOut();c?console.error(" LOGOUT: Supabase signout error:",c):console.log(" LOGOUT: Supabase signout successful"),s(null),console.log(" LOGOUT: User state cleared - Back to guest mode"),window.location.reload()}catch(c){console.error(" LOGOUT: Unexpected error:",c),s(null),window.location.reload()}};return o.jsx(_0.Provider,{value:{user:e,login:i,signup:a,logout:l,loading:n,setUser:s},children:t})}function ns(){const t=N.useContext(_0);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const j0=N.createContext(void 0);function j_({children:t}){const[e,s]=N.useState({isOpen:!1,title:"",message:"",type:"alert"}),n=(c,d)=>new Promise(u=>{s({isOpen:!0,title:c,message:d,type:"confirm",resolve:u})}),r=(c,d)=>new Promise(u=>{s({isOpen:!0,title:c,message:d,type:"alert",resolve:u})}),i=()=>{e.resolve&&e.resolve(!0),s(c=>({...c,isOpen:!1}))},a=()=>{e.resolve&&(e.type==="confirm"?e.resolve(!1):e.resolve()),s(c=>({...c,isOpen:!1}))},l=()=>{a()};return o.jsxs(j0.Provider,{value:{confirm:n,alert:r},children:[t,e.isOpen&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50",onClick:l}),o.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4 z-50",children:o.jsx("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full mx-4 border border-gray-200",children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mr-4",children:o.jsx("span",{className:"text-blue-600 text-xl",children:e.type==="confirm"?"":""})}),o.jsx("div",{children:o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e.title})})]}),o.jsx("p",{className:"text-gray-600 mb-6",children:e.message}),o.jsxs("div",{className:"flex justify-end space-x-3",children:[e.type==="confirm"&&o.jsx("button",{onClick:a,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),o.jsx("button",{onClick:i,className:`px-4 py-2 rounded-md transition-colors ${e.type==="confirm"?"bg-red-600 text-white hover:bg-red-700":"bg-blue-600 text-white hover:bg-blue-700"}`,children:e.type==="confirm"?"Confirm":"OK"})]})]})})})]})]})}function Kn(){const t=N.useContext(j0);if(t===void 0)throw new Error("useConfirmation must be used within a ConfirmationProvider");return t}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var k_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N_=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ue=(t,e)=>{const s=N.forwardRef(({color:n="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:l="",children:c,...d},u)=>N.createElement("svg",{ref:u,...k_,width:r,height:r,stroke:n,strokeWidth:a?Number(i)*24/Number(r):i,className:["lucide",`lucide-${N_(t)}`,l].join(" "),...d},[...e.map(([h,f])=>N.createElement(h,f)),...Array.isArray(c)?c:[c]]));return s.displayName=`${t}`,s};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=ue("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ml=ue("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k0=ue("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mo=ue("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fn=ue("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S_=ue("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N0=ue("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C_=ue("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Su=ue("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P_=ue("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const to=ue("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E_=ue("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cu=ue("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T_=ue("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gf=ue("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A_=ue("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sn=ue("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O_=ue("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S0=ue("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R_=ue("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M_=ue("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L_=ue("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D_=ue("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oi=ue("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B_=ue("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mn=ue("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I_=ue("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xf=ue("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Or=ue("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C0=ue("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $_=ue("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P0=ue("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E0=ue("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ji=ue("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Un=ue("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yf=ue("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z_=ue("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T0=ue("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=ue("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F_=ue("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=ue("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A0=ue("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const on=ue("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=ue("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O0=ue("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function U_({onBackToLogin:t,onSignupSuccess:e}){const[s,n]=N.useState(""),[r,i]=N.useState(""),[a,l]=N.useState(""),[c,d]=N.useState(""),[u,h]=N.useState(""),[f,m]=N.useState(!1),[p,y]=N.useState(!1),{signup:b}=ns(),x=async g=>{if(g.preventDefault(),m(!0),h(""),y(!1),a!==c){h("Passwords do not match."),m(!1);return}if(a.length<6){h("Password must be at least 6 characters long."),m(!1);return}if(s.trim().length<3){h("Username must be at least 3 characters long."),m(!1);return}if(!/^[a-zA-Z0-9_-]+$/.test(s.trim())){h("Username can only contain letters, numbers, hyphens, and underscores."),m(!1);return}await b(s.trim(),r.trim(),a,"user")?y(!0):h("Failed to create account. Username might already be taken or there was a server error. Please try a different username."),m(!1)};return p?o.jsx("div",{className:"w-full max-w-md bg-white rounded-xl shadow-2xl p-8 mx-auto",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx("span",{className:"text-white text-2xl",children:""})}),o.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Account Created!"}),o.jsx("p",{className:"text-gray-600 mb-6",children:"Your account has been successfully created! You can now sign in to access the system."}),o.jsx("button",{onClick:t,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors",children:"Back to Login"})]})}):o.jsxs("div",{className:"w-full max-w-md bg-white rounded-xl shadow-2xl p-8 mx-auto",children:[o.jsxs("div",{className:"flex items-center mb-6",children:[o.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full transition-colors mr-3",children:o.jsx(ml,{size:20})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Create Account"}),o.jsx("p",{className:"text-gray-600",children:"Join the Beyblade community"})]})]}),o.jsxs("form",{onSubmit:x,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700",children:"Username"}),o.jsx("input",{type:"text",id:"username",value:s,onChange:g=>n(g.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,minLength:3,placeholder:"Choose a unique username"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),o.jsx("input",{type:"email",id:"email",value:r,onChange:g=>i(g.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,placeholder:"your.email@example.com"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),o.jsx("input",{type:"password",id:"password",value:a,onChange:g=>l(g.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,minLength:6,placeholder:"At least 6 characters"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),o.jsx("input",{type:"password",id:"confirmPassword",value:c,onChange:g=>d(g.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,minLength:6,placeholder:"Confirm your password"})]}),u&&o.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-md",children:u}),o.jsx("button",{type:"submit",disabled:f,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50",children:f?"Creating Account...":"Create Account"})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsx("p",{className:"text-xs text-gray-500",children:"By creating an account, you agree to participate in tournaments and follow community guidelines. All new accounts start with basic user permissions."})})]})}function R0({onLoginSuccess:t}){const[e,s]=N.useState(""),[n,r]=N.useState(""),[i,a]=N.useState(""),[l,c]=N.useState(!1),[d,u]=N.useState("login"),{login:h}=ns(),f=async m=>{m.preventDefault(),c(!0),a(""),await h(e,n)?(s(""),r(""),a(""),t==null||t()):a("Invalid username or password. Please check your credentials and try again."),c(!1)};return d==="signup"?o.jsx(U_,{onBackToLogin:()=>u("login"),onSignupSuccess:t}):o.jsxs("div",{className:"w-full max-w-md p-8 mx-auto",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"w-16 h-16 bg-gray-900 rounded-lg flex items-center justify-center mx-auto mb-4",children:o.jsx("span",{className:"text-white text-2xl font-bold font-space-grotesk",children:"B"})}),o.jsx("h2",{className:"text-2xl font-bold text-gray-900 font-space-grotesk",children:"OBC Portal"}),o.jsx("p",{className:"text-gray-600 mt-2 font-inter",children:"Sign in to access your account"})]}),o.jsxs("form",{onSubmit:f,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"username",className:"form-label",children:"Username"}),o.jsx("input",{type:"text",id:"username",value:e,onChange:m=>s(m.target.value),className:"input-field w-full",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"form-label",children:"Password"}),o.jsx("input",{type:"password",id:"password",value:n,onChange:m=>r(m.target.value),className:"input-field w-full",required:!0})]}),i&&o.jsx("div",{className:"text-red-600 text-sm font-inter text-center",children:i}),o.jsx("button",{type:"submit",disabled:l,className:"primary-button w-full disabled:opacity-50 text-center",children:l?"Signing in...":"Sign In"})]}),o.jsxs("div",{className:"mt-6",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-0 flex items-center",children:o.jsx("div",{className:"w-full border-t border-gray-300"})}),o.jsx("div",{className:"relative flex justify-center text-sm",children:o.jsx("span",{className:"px-2 bg-white text-gray-500 font-inter",children:"Or"})})]}),o.jsx("div",{className:"mt-6",children:o.jsx("button",{onClick:()=>u("signup"),className:"secondary-button w-full text-center",children:"Create New Account"})})]}),o.jsx("div",{className:"mt-6 text-center px-4",children:o.jsx("p",{className:"text-xs text-gray-500 font-inter",children:"Create an account to participate in tournaments and access all features."})})]})}const W_=[{id:"dashboard",label:"Dashboard",icon:o.jsx(A_,{size:20}),roles:["user","technical_officer","admin","developer"]},{id:"tournaments",label:"Tournaments",icon:o.jsx(Zt,{size:20}),roles:["user","technical_officer","admin","developer"]},{id:"analytics",label:"Analytics",icon:o.jsx(Mo,{size:20}),roles:["user","technical_officer","admin","developer"]},{id:"inventory",label:"Inventory & Decks",icon:o.jsx(oi,{size:20}),roles:["user","technical_officer","admin","developer"]},{id:"match-tracker",label:"Match Tracker",icon:o.jsx(Fn,{size:20}),roles:["technical_officer","admin","developer"]},{id:"tournament-manager",label:"Tournament Manager",icon:o.jsx(P0,{size:20}),roles:["admin","developer"]},{id:"user-management",label:"User Management",icon:o.jsx(on,{size:20}),roles:["admin","developer"]},{id:"database",label:"Database",icon:o.jsx(to,{size:20}),roles:["developer"]}];function H_({isOpen:t,currentView:e,onViewChange:s,onToggle:n}){const{user:r,logout:i}=ns(),[a,l]=He.useState(!1),c=W_.filter(u=>r?u.roles.includes(r.role||"user"):!u.requiresAuth&&u.roles.includes("user")),d=async()=>{await i(),n()};return o.jsxs(o.Fragment,{children:[o.jsxs("aside",{className:`fixed left-0 top-0 z-40 h-screen flex flex-col 
        transition-transform ${t?"translate-x-0":"-translate-x-full"} 
        bg-white border-r border-gray-200 ${t?"w-64":"w-16"}`,children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"w-10 h-10 bg-gray-900 rounded-lg flex items-center justify-center font-space-grotesk font-bold text-lg text-white",children:"B"}),t&&o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl font-space-grotesk font-bold text-gray-900",children:"OBC Portal"}),o.jsx("p",{className:"text-xs text-gray-500 font-inter",children:"Beyblade Community"})]})]}),t&&o.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:o.jsx(Pt,{size:20})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-4 py-6",children:o.jsx("ul",{className:"space-y-2",children:c.map(u=>o.jsx("li",{children:o.jsxs("button",{onClick:()=>s(u.id),className:e===u.id?"sidebar-item-active":"sidebar-item",children:[o.jsx("div",{className:"transition-colors",children:u.icon}),t&&o.jsx("span",{className:"ml-3 font-inter",children:u.label})]})},u.id))})}),o.jsx("div",{className:"px-4 border-t border-gray-200 py-4",children:r&&!r.id.startsWith("guest-")?o.jsxs("button",{onClick:d,className:"sidebar-item w-full text-red-600 hover:text-red-700 hover:bg-red-50",children:[o.jsx("div",{className:"transition-colors",children:o.jsx(S0,{size:20})}),t&&o.jsx("span",{className:"ml-3 font-inter",children:"Logout"})]}):o.jsxs("button",{onClick:()=>l(!0),className:"sidebar-item w-full text-blue-600 hover:text-blue-700 hover:bg-blue-50",children:[o.jsx("div",{className:"transition-colors",children:o.jsx(O_,{size:20})}),t&&o.jsx("span",{className:"ml-3 font-inter",children:"Login"})]})}),t&&o.jsx("div",{className:"px-2 pb-4",children:o.jsxs("div",{className:"bg-gray-100 rounded-lg p-4 border border-gray-200",children:[o.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[o.jsx("div",{className:"w-6 h-6 bg-blue-600 rounded flex items-center justify-center",children:o.jsx("span",{className:"text-xs text-white",children:"J"})}),o.jsx("h3",{className:"font-space-grotesk font-semibold text-sm text-gray-900",children:"Created by Jedynsay"})]}),o.jsx("p",{className:"text-xs text-gray-600 font-inter mb-2",children:"Powered by Supabase"})]})})]}),a&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"modal-overlay",style:{zIndex:50},onClick:()=>l(!1)}),o.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4 pointer-events-none z-50",children:o.jsxs("div",{className:"relative pointer-events-auto bg-white rounded-xl shadow-2xl max-w-md w-full mx-4 max-h-[90vh]",children:[o.jsx(R0,{onLoginSuccess:()=>l(!1)}),o.jsx("button",{onClick:()=>l(!1),className:"absolute top-4 right-4 w-8 h-8 bg-gray-100 hover:bg-gray-200 rounded-full flex items-center justify-center text-gray-600 hover:text-gray-800 transition-colors",children:o.jsx(Pt,{size:16})})]})})]})]})}function V_({user:t,onViewChange:e,onLoginClick:s,onLogout:n}){const[r,i]=N.useState(!1);return o.jsx("section",{className:"relative overflow-hidden bg-slate-950 border-b border-slate-800",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-16 relative",children:[t&&!t.id.startsWith("guest-")&&o.jsx("div",{className:"absolute top-4 right-4",children:o.jsxs("div",{className:"relative",children:[o.jsxs("button",{onClick:()=>i(!r),className:"flex items-center gap-3 bg-slate-800/90 rounded-lg px-4 py-2 hover:bg-slate-700 transition-colors",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center font-bold",children:t.username.charAt(0).toUpperCase()}),o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold",children:t.username}),o.jsx("p",{className:"text-xs text-slate-400",children:t.role})]})]}),r&&o.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-slate-800 border border-slate-700 rounded-lg shadow-lg",children:[o.jsxs("button",{className:"w-full flex items-center gap-2 px-4 py-2 hover:bg-slate-700",onClick:()=>i(!1),children:[o.jsx(P0,{size:16})," Settings"]}),o.jsxs("button",{className:"w-full flex items-center gap-2 px-4 py-2 hover:bg-slate-700 text-red-400",onClick:()=>{i(!1),n()},children:[o.jsx(S0,{size:16})," Logout"]})]})]})}),!t||t.id.startsWith("guest-")?o.jsx("div",{className:"absolute top-4 right-4",children:o.jsx("button",{onClick:s,className:"bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg font-semibold",children:"Login"})}):null,o.jsxs("div",{className:"max-w-2xl",children:[o.jsxs("h1",{className:"text-5xl font-bold leading-tight",children:["Welcome back, ",o.jsx("span",{className:"text-blue-400",children:t?t.username:"Blader"})]}),o.jsx("p",{className:"mt-4 text-lg text-slate-400",children:"Prepare your ultimate combo and dominate the arena."}),o.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row gap-4",children:[o.jsxs("button",{onClick:()=>e==null?void 0:e("tournaments"),className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 px-6 py-3 rounded-lg font-semibold",children:[o.jsx(Zt,{size:20})," Check Tournaments ",o.jsx(k0,{size:16})]}),o.jsxs("button",{onClick:()=>e==null?void 0:e("inventory"),className:"flex items-center gap-2 bg-slate-800 hover:bg-slate-700 px-6 py-3 rounded-lg border border-slate-600",children:[o.jsx(sn,{size:20})," Deck Builder ",o.jsx(N0,{size:16})]})]})]})]})})}function q_({stats:t,upcomingTournaments:e,deckPresets:s,onViewChange:n}){return o.jsxs("section",{className:"max-w-7xl mx-auto px-6 py-12 grid gap-6 sm:grid-cols-2 lg:grid-cols-4",children:[o.jsx(Pa,{onClick:()=>n==null?void 0:n("tournaments"),icon:o.jsx(Zt,{}),title:"Next Tournament",accent:"blue",children:e.length>0?o.jsxs(o.Fragment,{children:[o.jsx("p",{className:"font-semibold",children:e[0].name}),o.jsx("p",{className:"text-sm text-slate-400",children:new Date(e[0].tournament_date).toLocaleDateString()}),o.jsx("p",{className:"text-sm text-slate-400",children:e[0].location})]}):o.jsx("p",{className:"text-slate-400",children:"No upcoming tournaments"})}),o.jsxs(Pa,{onClick:()=>n==null?void 0:n("analytics"),icon:o.jsx(F_,{}),title:"Meta Analysis",accent:"purple",children:[o.jsx("p",{className:"text-sm text-slate-400",children:"Latest tier rankings"}),o.jsxs("span",{className:"flex items-center gap-1 text-purple-400",children:["View Stats ",o.jsx(k0,{size:14})]})]}),o.jsx(Pa,{onClick:()=>alert("News coming soon!"),icon:o.jsx(D_,{}),title:"News & Updates",accent:"green",children:o.jsx("p",{className:"text-sm text-slate-400",children:"Stay informed on events"})}),o.jsx(Pa,{onClick:()=>n==null?void 0:n("inventory"),icon:o.jsx(sn,{}),title:"Your Decks",accent:"orange",children:o.jsxs("p",{className:"text-sm text-slate-400",children:[s.length," saved presets"]})})]})}function Pa({onClick:t,icon:e,title:s,children:n,accent:r}){const i={blue:"bg-blue-600",purple:"bg-purple-600",green:"bg-green-600",orange:"bg-orange-600"};return o.jsxs("button",{onClick:t,className:"bg-slate-900 border border-slate-800 rounded-lg p-6 text-left hover:border-blue-500 transition-all",children:[o.jsx("div",{className:`w-10 h-10 ${i[r]} rounded-lg flex items-center justify-center mb-4`,children:e}),o.jsx("h3",{className:"font-bold text-lg mb-2",children:s}),n]})}function K_({topPlayers:t,currentTournamentFilter:e,setTournamentFilter:s,tournaments:n,recentMatches:r}){var l,c,d,u,h;const[i,a]=N.useState(0);return N.useEffect(()=>{if(t.length>1){const f=setInterval(()=>{a(m=>(m+1)%t.length)},5e3);return()=>clearInterval(f)}},[t.length]),o.jsxs("section",{className:"max-w-7xl mx-auto px-6 py-12",children:[o.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Community Champions"}),t.length>0&&o.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-lg p-8 text-center mb-8",children:[o.jsxs("div",{className:"w-20 h-20 bg-yellow-400 text-black rounded-full flex items-center justify-center mx-auto text-2xl font-bold relative",children:[(l=t[i])==null?void 0:l.name.charAt(0),o.jsx(P_,{className:"absolute -top-3 -right-3 text-yellow-400",size:20})]}),o.jsx("h3",{className:"mt-4 text-xl font-semibold",children:(c=t[i])==null?void 0:c.name}),o.jsxs("div",{className:"mt-2 flex justify-center gap-6 text-sm text-slate-400",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-blue-400 font-bold",children:(d=t[i])==null?void 0:d.wins})," Wins"]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-purple-400 font-bold",children:(u=t[i])==null?void 0:u.tournaments})," Tournaments"]}),o.jsxs("div",{children:[o.jsxs("span",{className:"text-green-400 font-bold",children:[(h=t[i])==null?void 0:h.winRate,"%"]})," Win Rate"]})]})]}),o.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-lg p-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsxs("h3",{className:"font-bold flex items-center gap-2",children:[o.jsx(B_,{size:18,className:"text-green-400"})," Live Results"]}),o.jsxs("select",{value:e,onChange:f=>s(f.target.value),className:"bg-slate-800 border border-slate-700 rounded px-2 py-1 text-sm",children:[o.jsx("option",{value:"all",children:"All Tournaments"}),n.map(f=>o.jsx("option",{value:f.id,children:f.name},f.id))]})]}),r.length===0?o.jsx("p",{className:"text-slate-500 text-sm",children:"No matches found."}):o.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:r.slice(0,5).map((f,m)=>{var p;return o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-white",children:f.winner_name}),o.jsx("span",{className:"text-slate-400",children:"defeated"}),o.jsx("span",{className:"text-slate-300",children:f.winner_name===f.player1_name?f.player2_name:f.player1_name}),o.jsx("span",{className:"text-slate-500",children:((p=f.outcome)==null?void 0:p.split(" (")[0])||"Victory"})]},m)})})]})]})}function Y_(){return o.jsx("footer",{className:"bg-slate-950 border-t border-slate-800 py-6 mt-12",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-6 flex flex-col sm:flex-row justify-between text-slate-500 text-sm",children:[o.jsx("div",{children:"Created by Jedynsay  Powered by Supabase"}),o.jsx("div",{className:"mt-2 sm:mt-0",children:"System Online"}),o.jsx("div",{children:"OBC Portal beta v0.3"})]})})}function G_({onClose:t}){return o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"relative bg-white rounded-lg p-6 w-full max-w-md",children:[o.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-600 hover:text-black",children:o.jsx(Pt,{size:20})}),o.jsx(R0,{onLoginSuccess:t})]})})}function vf({onViewChange:t}){const{user:e,logout:s}=ns(),[n,r]=N.useState(!1),[i,a]=N.useState({totalTournaments:0,activePlayers:0,upcomingEvents:0,completedMatches:0}),[l,c]=N.useState([]),[d,u]=N.useState([]),[h,f]=N.useState([]),[m,p]=N.useState([]),[y,b]=N.useState([]),[x,g]=N.useState(!0),[v,w]=N.useState("all");N.useEffect(()=>{_(),e&&!e.id.startsWith("guest-")&&E()},[e]);const _=async()=>{try{const[k,T,R]=await Promise.all([H.from("tournaments").select("*"),H.from("profiles").select("*",{count:"exact",head:!0}),H.from("match_results").select("*",{count:"exact",head:!0})]),$=k.data||[];b($);const G=$.filter(le=>le.status==="upcoming").slice(0,3);c(G),a({totalTournaments:$.length,activePlayers:T.count||0,upcomingEvents:$.filter(le=>le.status==="upcoming").length,completedMatches:R.count||0}),await S(),await P()}catch(k){console.error(k)}finally{g(!1)}},S=async()=>{const{data:k}=await H.from("match_results").select("player1_name, player2_name, winner_name");if(!k)return;const T={};k.forEach($=>{[$.player1_name,$.player2_name].forEach(G=>{G&&(T[G]||(T[G]={wins:0,matches:0}),T[G].matches++,$.winner_name===G&&T[G].wins++)})});const R=Object.entries(T).map(([$,G])=>({name:$,wins:G.wins,tournaments:Math.ceil(G.matches/10),winRate:Math.round(G.wins/G.matches*100)})).sort(($,G)=>G.winRate-$.winRate).slice(0,5);u(R)},P=async()=>{let k=H.from("match_results").select("player1_name, player2_name, player1_beyblade, player2_beyblade, winner_name, outcome, submitted_at, tournament_id").order("submitted_at",{ascending:!1}).limit(10);v!=="all"&&(k=k.eq("tournament_id",v));const{data:T}=await k;p(T||[])},E=async()=>{if(!e||e.id.startsWith("guest-"))return;const{data:k}=await H.from("deck_presets").select("*").eq("user_id",e.id);f(k||[])};return x?o.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center",children:o.jsxs("div",{className:"text-center text-slate-300",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-500 border-t-transparent mx-auto mb-4"}),"Loading dashboard..."]})}):o.jsxs("div",{className:"min-h-screen bg-slate-950 text-white",children:[o.jsx(V_,{user:e,onViewChange:t,onLoginClick:()=>r(!0),onLogout:s}),o.jsx(q_,{stats:i,upcomingTournaments:l,deckPresets:h,onViewChange:t}),o.jsx(K_,{topPlayers:d,currentTournamentFilter:v,setTournamentFilter:w,tournaments:y,recentMatches:m}),o.jsx(Y_,{}),n&&o.jsx(G_,{onClose:()=>r(!1)})]})}function Q_({tournament:t,onClose:e,onSubmit:s}){var X,pe,ke;const{user:n}=ns(),{confirm:r,alert:i}=Kn(),[a,l]=N.useState(""),[c,d]=N.useState("free"),[u,h]=N.useState([{id:"1",bladeLine:"",parts:{}}]),[f,m]=N.useState({blades:[],ratchets:[],bits:[],lockchips:[],assistBlades:[]}),[p,y]=N.useState(!1),[b,x]=N.useState(null),[g,v]=N.useState(!1),[w,_]=N.useState([]),[S,P]=N.useState(""),[E,k]=N.useState(!1);N.useState("");const[T,R]=N.useState([]),[$,G]=N.useState({duplicateParts:[],duplicatePlayerName:!1}),le=async()=>{y(!0),x(null);try{const[A,Q,q,ne,we]=await Promise.all([H.from("beypart_blade").select("*"),H.from("beypart_ratchet").select("*"),H.from("beypart_bit").select("*"),H.from("beypart_lockchip").select("*"),H.from("beypart_assistblade").select("*")]);if(A.error)throw A.error;if(Q.error)throw Q.error;if(q.error)throw q.error;if(ne.error)throw ne.error;if(we.error)throw we.error;m({blades:A.data||[],ratchets:Q.data||[],bits:q.data||[],lockchips:ne.data||[],assistBlades:we.data||[]})}catch(A){console.error("Error fetching parts data:",A),x("Failed to load Beyblade parts. Please try again.")}finally{y(!1)}};He.useEffect(()=>{le(),O(),n&&!n.id.startsWith("guest-")&&W()},[]);const O=async()=>{try{const{data:A,error:Q}=await H.from("tournament_registrations").select("player_name").eq("tournament_id",t.id).eq("status","confirmed");if(Q)throw Q;const q=(A||[]).map(ne=>ne.player_name.toLowerCase().trim());R(q)}catch(A){console.error("Error fetching existing player names:",A),R([])}},z=A=>{const Q=A.toLowerCase().trim(),q=T.includes(Q);return G(ne=>({...ne,duplicatePlayerName:q})),!q},V=()=>{const A=[],Q=new Map;return u.forEach((q,ne)=>{if(!q.bladeLine)return;J(q.bladeLine).forEach(Ue=>{const Ht=q.parts[Ue];if(!Ht)return;const he=ie(Ht,Ue),Vt=`${Ue}:${he}`;if(Q.has(Vt)){const Rs=Q.get(Vt);A.push(`${he} (${Ue}) is used in both Beyblade ${Rs.beybladeIndex+1} and Beyblade ${ne+1}`)}else Q.set(Vt,{beybladeIndex:ne,partType:Ue})})}),G(q=>({...q,duplicateParts:A})),A.length===0};He.useEffect(()=>{a.trim()?z(a):G(A=>({...A,duplicatePlayerName:!1}))},[a,T]),He.useEffect(()=>{V()},[u]);const W=async()=>{if(!(!n||n.id.startsWith("guest-")))try{const{data:A,error:Q}=await H.from("deck_presets").select("*").eq("user_id",n.id).order("updated_at",{ascending:!1});if(Q)throw Q;_(A||[])}catch(A){console.error("Error fetching deck presets:",A)}},K=A=>{const Q=w.find(q=>q.id===A);if(Q){const q=Q.beyblades.slice(0,t.beyblades_per_player).map((ne,we)=>({id:(we+1).toString(),bladeLine:ne.blade_line,parts:ne.parts}));h(q),h(q.map(ne=>({...ne,name:M(ne.bladeLine,ne.parts)}))),k(!1),P("")}},J=A=>{switch(A){case"Basic":case"Unique":case"X-Over":return["Blade","Ratchet","Bit"];case"Custom":return["Lockchip","Main Blade","Assist Blade","Ratchet","Bit"];default:return[]}},re=(A,Q)=>{if(!A)return[];let q=[];switch(Q){case"Blade":q=f.blades.filter(ne=>ne.Line===A);break;case"Main Blade":q=f.blades.filter(ne=>ne.Line==="Custom");break;case"Ratchet":q=f.ratchets;break;case"Bit":q=f.bits;break;case"Lockchip":q=f.lockchips;break;case"Assist Blade":q=f.assistBlades;break;default:q=[]}return q.sort((ne,we)=>{const Ue=ie(ne,Q),Ht=ie(we,Q);return Ue.localeCompare(Ht)})},ie=(A,Q)=>{switch(Q){case"Blade":case"Main Blade":return A.Blades;case"Ratchet":return A.Ratchet;case"Bit":return`${A.Bit} (${A.Shortcut})`;case"Lockchip":return A.Lockchip;case"Assist Blade":return`${A["Assist Blade Name"]} (${A["Assist Blade"]})`;default:return""}},M=(A,Q)=>{var we,Ue,Ht,he,Vt,Rs,pn,I;if(!A||!J(A).every(Y=>Q[Y]))return"";if(A==="Custom"){const Y=((we=Q.Lockchip)==null?void 0:we.Lockchip)||"",Z=((Ue=Q["Main Blade"])==null?void 0:Ue.Blades)||"",de=((Ht=Q["Assist Blade"])==null?void 0:Ht["Assist Blade"])||"",Me=((he=Q.Ratchet)==null?void 0:he.Ratchet)||"",Ne=((Vt=Q.Bit)==null?void 0:Vt.Shortcut)||"";return`${Y}${Z} ${de}${Me}${Ne}`}else{const Y=((Rs=Q.Blade)==null?void 0:Rs.Blades)||"",Z=((pn=Q.Ratchet)==null?void 0:pn.Ratchet)||"",de=((I=Q.Bit)==null?void 0:I.Shortcut)||"";return`${Y} ${Z}${de}`}},ee=A=>{let Q={attack:0,defense:0,stamina:0,dash:0,burstRes:0};return Object.values(A).forEach(q=>{q&&(Q.attack+=q.Attack||0,Q.defense+=q.Defense||0,Q.stamina+=q.Stamina||0,Q.dash+=q.Dash||0,Q.burstRes+=q["Burst Res"]||0)}),Q},se=()=>{u.length<t.beyblades_per_player?h([...u,{id:Date.now().toString(),bladeLine:"",parts:{}}]):i("Maximum Reached",`Maximum ${t.beyblades_per_player} Beyblades allowed for this tournament.`)},ae=A=>{u.length>1&&h(u.filter(Q=>Q.id!==A))},D=(A,Q,q)=>{h(u.map(ne=>ne.id===A?{...ne,[Q]:q,parts:{}}:ne))},F=(A,Q,q)=>{h(u.map(ne=>ne.id===A?{...ne,parts:{...ne.parts,[Q]:q}}:ne))},B=()=>!a.trim()||!c||$.duplicatePlayerName||$.duplicateParts.length>0?!1:u.every(A=>A.bladeLine?J(A.bladeLine).every(q=>A.parts[q]):!1),ce=async()=>{var A,Q;if(!B()){await i("Missing Information","Please fill in all required fields to register for the tournament.");return}if(!z(a)){await i("Duplicate Player Name",`The player name "${a}" is already registered for this tournament. Please choose a different name.`);return}if(!V()){await i("Invalid Beyblade Configuration","One or more of your Beyblades have duplicate parts. Each Beyblade must use unique parts.");return}v(!0);try{const q=await H.from("tournaments").select("is_free").eq("id",t.id).single(),ne=(A=q.data)!=null&&A.is_free?"confirmed":"unpaid",{data:we,error:Ue}=await H.from("tournament_registrations").insert({tournament_id:t.id,player_name:a.trim(),payment_mode:c,status:"confirmed",payment_status:ne}).select().single();if(Ue)throw new Error(`Registration failed: ${Ue.message}`);for(const he of u){const Vt=M(he.bladeLine,he.parts),{data:Rs,error:pn}=await H.from("tournament_beyblades").insert({registration_id:we.id,beyblade_name:Vt,blade_line:he.bladeLine}).select().single();if(pn)throw new Error(`Beyblade registration failed: ${pn.message}`);const I=Object.entries(he.parts).map(([Z,de])=>({beyblade_id:Rs.id,part_type:Z,part_name:ie(de,Z),part_data:de})),{error:Y}=await H.from("tournament_beyblade_parts").insert(I);if(Y)throw new Error(`Parts registration failed: ${Y.message}`)}const Ht=(Q=q.data)!=null&&Q.is_free?`Successfully registered ${a} for ${t.name}! You're confirmed and ready to compete.`:`Successfully registered ${a} for ${t.name}! Please complete payment to confirm your spot. Registration ID: ${we.id}`;await i("Registration Successful",Ht),e()}catch(q){console.error("Registration error:",q),await i("Registration Failed",`Failed to register for tournament: ${q instanceof Error?q.message:"Unknown error"}. Please try again.`)}finally{v(!1)}},j=A=>{switch(A){case"Basic":return"text-blue-600 bg-blue-50 border-blue-200";case"Unique":return"text-purple-600 bg-purple-50 border-purple-200";case"Custom":return"text-orange-600 bg-orange-50 border-orange-200";case"X-Over":return"text-green-600 bg-green-50 border-green-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},C=A=>{switch(A){case"attack":return o.jsx(O0,{size:12,className:"text-red-500"});case"defense":return o.jsx(ji,{size:12,className:"text-blue-500"});case"stamina":return o.jsx(Su,{size:12,className:"text-green-500"});case"dash":return o.jsx(Ro,{size:12,className:"text-yellow-500"});case"burstRes":return o.jsx(E0,{size:12,className:"text-purple-500"});default:return null}},L=A=>{switch(A){case"attack":return"bg-red-500";case"defense":return"bg-blue-500";case"stamina":return"bg-green-500";case"dash":return"bg-yellow-500";case"burstRes":return"bg-purple-500";default:return"bg-gray-500"}},oe=({stats:A})=>{const Q=ne=>{switch(ne){case"attack":case"defense":case"stamina":return 200;case"dash":return 50;case"burstRes":return 80;default:return 100}},q=[{key:"attack",label:"Attack",value:A.attack},{key:"defense",label:"Defense",value:A.defense},{key:"stamina",label:"Stamina",value:A.stamina},{key:"dash",label:"Dash",value:A.dash},{key:"burstRes",label:"Burst Res",value:A.burstRes}];return o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mt-4",children:[o.jsxs("h5",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center",children:[o.jsx(Ro,{size:16,className:"mr-2"}),"Combined Stats"]}),o.jsx("div",{className:"space-y-2",children:q.map(({key:ne,label:we,value:Ue})=>o.jsxs("div",{className:"flex items-center",children:[o.jsxs("div",{className:"flex items-center w-20 text-xs font-medium text-gray-600",children:[C(ne),o.jsx("span",{className:"ml-1",children:we})]}),o.jsx("div",{className:"flex-1 mx-3",children:o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:o.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${L(ne)}`,style:{width:`${Math.min(Ue/Q(ne)*100,100)}%`}})})}),o.jsx("div",{className:"w-8 text-xs font-bold text-gray-700 text-right",children:Ue})]},ne))})]})};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(p||g)&&o.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center z-10 rounded-lg",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:p?"Loading Beyblade parts...":"Registering for tournament..."})]})}),o.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Tournament Registration"}),o.jsx("p",{className:"text-gray-600",children:t.name}),o.jsxs("p",{className:"text-sm text-gray-500",children:["Configure your Beyblades for this tournament. You can register up to ",t.beyblades_per_player," Beyblades."]})]}),o.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:o.jsx(Pt,{size:24})})]}),o.jsxs("div",{className:"p-6",children:[b&&o.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"text-red-600 mr-3",children:""}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-red-800 font-medium",children:"Error Loading Parts"}),o.jsx("p",{className:"text-red-700 text-sm mt-1",children:b}),o.jsx("button",{onClick:le,className:"mt-2 text-red-600 hover:text-red-800 text-sm underline",children:"Try Again"})]})]})}),o.jsxs("div",{className:"mb-8 bg-blue-50 border border-blue-200 rounded-lg p-6",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx(A0,{className:"text-blue-600 mr-2",size:20}),o.jsx("h3",{className:"text-lg font-semibold text-blue-900",children:"Player Information"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"playerName",className:"block text-sm font-medium text-gray-700 mb-2",children:"Player Name *"}),o.jsx("input",{type:"text",id:"playerName",value:a,onChange:A=>l(A.target.value),placeholder:"Enter your player name for this tournament",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),$.duplicatePlayerName&&o.jsxs("div",{className:"mt-1 text-sm text-red-600 flex items-center",children:[o.jsx("span",{className:"mr-1",children:""}),"This player name is already registered for this tournament"]}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This is your blader name that will appear in tournament brackets and match results."})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"paymentMode",className:"block text-sm font-medium text-gray-700 mb-2",children:"Mode of Payment *"}),o.jsxs("select",{id:"paymentMode",value:c,onChange:A=>d(A.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[t.is_free&&o.jsx("option",{value:"free",children:"Free Entry"}),o.jsx("option",{value:"cash",children:"Cash"}),o.jsx("option",{value:"gcash",children:"GCash"}),o.jsx("option",{value:"bank_transfer",children:"Bank Transfer"})]}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t.is_free&&c==="free"?"This tournament has no entry fee.":c==="cash"?"Pay at the venue on tournament day.":c==="gcash"?"Payment details will be provided after registration.":"Bank details will be provided after registration."})]})]})]}),!(n!=null&&n.id.startsWith("guest-"))&&w.length>0&&o.jsxs("div",{className:"mb-8 bg-green-50 border border-green-200 rounded-lg p-6",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx(sn,{className:"text-green-600 mr-2",size:20}),o.jsx("h3",{className:"text-lg font-semibold text-green-900",children:"Quick Setup with Deck Presets"})]}),o.jsx("div",{className:"mb-4 p-3 bg-white rounded-lg border border-green-200",children:o.jsxs("p",{className:"text-sm text-green-800",children:[o.jsx("strong",{children:"Save time!"})," Use one of your saved deck presets to quickly configure your Beyblades for this tournament."]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Deck Preset"}),o.jsxs("select",{value:S,onChange:A=>P(A.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500",children:[o.jsx("option",{value:"",children:"-- Select a preset --"}),w.map(A=>o.jsxs("option",{value:A.id,children:[A.name," (",A.beyblades.length," Beyblades)"]},A.id))]})]}),o.jsx("div",{className:"flex items-end",children:o.jsx("button",{type:"button",onClick:()=>S&&K(S),disabled:!S,className:"w-full bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Load Preset"})})]}),S&&o.jsx("div",{className:"mt-4 p-3 bg-white rounded-lg border border-green-200",children:o.jsxs("div",{className:"text-sm text-green-800",children:[o.jsx("strong",{children:"Preview:"}),(X=w.find(A=>A.id===S))==null?void 0:X.beyblades.slice(0,3).map((A,Q)=>o.jsxs("div",{className:"font-mono text-xs mt-1",children:[" ",A.name||`Beyblade ${Q+1}`]},Q)),((pe=w.find(A=>A.id===S))==null?void 0:pe.beyblades.length)>3&&o.jsxs("div",{className:"text-xs mt-1 text-green-600",children:["+",((ke=w.find(A=>A.id===S))==null?void 0:ke.beyblades.length)-3," more..."]})]})})]}),c!=="free"&&o.jsxs("div",{className:"mb-8 bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx("div",{className:"w-6 h-6 bg-yellow-500 rounded-full flex items-center justify-center mr-2",children:o.jsx("span",{className:"text-white text-sm font-bold",children:""})}),o.jsx("h3",{className:"text-lg font-semibold text-yellow-900",children:"Payment Information"})]}),o.jsxs("div",{className:"bg-white rounded-lg p-4 border border-yellow-200",children:[c==="cash"&&o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Cash Payment"}),o.jsx("p",{className:"text-gray-700 text-sm",children:"Please bring the exact tournament entry fee on the day of the tournament. Payment will be collected during registration at the venue."})]}),c==="gcash"&&o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"GCash Payment"}),o.jsx("p",{className:"text-gray-700 text-sm mb-2",children:"GCash payment details will be sent to you after registration confirmation."}),o.jsxs("div",{className:"bg-gray-50 p-3 rounded text-sm",children:[o.jsxs("p",{children:[o.jsx("strong",{children:"GCash Number:"})," [Will be provided]"]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Account Name:"})," [Will be provided]"]})]})]}),c==="bank_transfer"&&o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Bank Transfer"}),o.jsx("p",{className:"text-gray-700 text-sm mb-2",children:"Bank transfer details will be sent to you after registration confirmation."}),o.jsxs("div",{className:"bg-gray-50 p-3 rounded text-sm",children:[o.jsxs("p",{children:[o.jsx("strong",{children:"Bank:"})," [Will be provided]"]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Account Number:"})," [Will be provided]"]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Account Name:"})," [Will be provided]"]})]})]})]})]}),o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("label",{htmlFor:"playerName",className:"block text-sm font-medium text-gray-700 mb-2",children:"Beyblade Registration"}),o.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Configure your Beyblades for this tournament. You can register up to ",t.beyblades_per_player," Beyblades."]})]}),u.map((A,Q)=>o.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Beyblade #",Q+1]}),u.length>1&&o.jsx("button",{onClick:()=>ae(A.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-full transition-colors",children:o.jsx(hs,{size:16})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Blade Line *"}),o.jsxs("select",{value:A.bladeLine,onChange:q=>D(A.id,"bladeLine",q.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.jsx("option",{value:"",children:"Select Blade Line"}),o.jsx("option",{value:"Basic",children:"Basic"}),o.jsx("option",{value:"Unique",children:"Unique"}),o.jsx("option",{value:"Custom",children:"Custom"}),o.jsx("option",{value:"X-Over",children:"X-Over"})]})]}),A.bladeLine&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Generated Name"}),o.jsx("div",{className:"w-full border border-gray-200 rounded-md px-3 py-2 bg-gray-50 text-gray-700 font-mono",children:M(A.bladeLine,A.parts)||"Select all parts to generate name"})]})]}),A.bladeLine&&o.jsxs("div",{className:`border rounded-lg p-4 ${j(A.bladeLine)}`,children:[o.jsxs("h4",{className:"font-semibold mb-3 flex items-center",children:[o.jsxs("span",{className:"mr-2",children:[A.bladeLine," Line Parts"]}),o.jsxs("span",{className:"text-xs px-2 py-1 rounded-full bg-white bg-opacity-50",children:[J(A.bladeLine).length," parts required"]})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:J(A.bladeLine).map(q=>o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium mb-2",children:[q," *"]}),o.jsxs("select",{value:A.parts[q]?JSON.stringify(A.parts[q]):"",onChange:ne=>{if(ne.target.value){const we=JSON.parse(ne.target.value);F(A.id,q,we)}},className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white disabled:bg-gray-100 disabled:cursor-not-allowed",disabled:p||!!b,children:[o.jsxs("option",{value:"",children:["Select ",q]}),re(A.bladeLine,q).map((ne,we)=>o.jsx("option",{value:JSON.stringify(ne),children:ie(ne,q)},we))]}),A.parts[q]&&$.duplicateParts.some(ne=>ne.includes(ie(A.parts[q],q)))&&o.jsxs("div",{className:"mt-1 text-sm text-red-600 flex items-center",children:[o.jsx("span",{className:"mr-1",children:""}),"This part is being used in another Beyblade"]}),A.parts[q]&&o.jsx("div",{className:"mt-2",children:o.jsx("div",{className:"flex flex-wrap gap-2 text-xs",children:Object.entries(A.parts[q]).map(([ne,we])=>typeof we=="number"&&we>0&&["Attack","Defense","Stamina","Dash","Burst Res"].includes(ne)?o.jsxs("div",{className:"flex items-center space-x-1 bg-white bg-opacity-50 px-2 py-1 rounded",children:[C(ne.toLowerCase().replace(" ","")),o.jsxs("span",{children:[ne,": ",we]})]},ne):null)})})]},q))})]}),A.bladeLine&&Object.keys(A.parts).length>0&&o.jsx(oe,{stats:ee(A.parts)})]},A.id))]}),u.length<t.beyblades_per_player&&o.jsxs("button",{onClick:se,className:"mt-6 w-full border-2 border-dashed border-gray-300 rounded-lg p-4 text-gray-600 hover:border-blue-400 hover:text-blue-600 transition-colors flex items-center justify-center space-x-2",children:[o.jsx(Mn,{size:20}),o.jsxs("span",{children:["Add Another Beyblade (",u.length,"/",t.beyblades_per_player,")"]})]}),o.jsxs("div",{className:"flex justify-end space-x-3 mt-8 pt-6 border-t border-gray-200",children:[o.jsx("button",{onClick:e,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),o.jsxs("button",{onClick:ce,disabled:!B()||p||!!b||g,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[o.jsx(Or,{size:16}),o.jsx("span",{children:"Register for Tournament"})]})]})]})]})})}function J_(){ns();const{alert:t}=Kn(),[e,s]=N.useState("all"),[n,r]=N.useState(null),[i,a]=N.useState([]),[l,c]=N.useState(!0);He.useEffect(()=>{(async()=>{try{const{data:m,error:p}=await H.from("tournaments").select("*").order("tournament_date",{ascending:!0});if(p)throw p;a(m||[])}catch(m){console.error("Error fetching tournaments:",m),a([])}finally{c(!1)}})()},[]);const d=i.filter(f=>e==="all"||f.status===e),u=(f,m)=>{console.log("Tournament registration:",{playerName:f,beyblades:m}),t("Registration Complete",`Successfully registered ${f} with ${m.length} Beyblades for the tournament!`),r(null)},h=f=>{switch(f){case"upcoming":return"tournament-status-upcoming";case"active":return"tournament-status-active";case"completed":return"tournament-status-completed";default:return"tournament-status-completed"}};return o.jsx("div",{className:"page-container",children:o.jsxs("div",{className:"content-wrapper",children:[o.jsxs("div",{className:"page-header",children:[o.jsx("h1",{className:"page-title",children:"Tournaments"}),o.jsx("p",{className:"page-subtitle",children:"Join the ultimate Beyblade battles"})]}),o.jsx("div",{className:"mb-8",children:o.jsx("div",{className:"filter-tabs",children:["all","upcoming","active","completed"].map(f=>o.jsx("button",{onClick:()=>s(f),className:`filter-tab capitalize ${e===f?"filter-tab-active":"filter-tab-inactive"}`,children:f},f))})}),l?o.jsxs("div",{className:"empty-state",children:[o.jsx("div",{className:"loading-spinner h-12 w-12 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading tournaments..."})]}):d.length===0?o.jsxs("div",{className:"empty-state",children:[o.jsx(Zt,{className:"empty-icon"}),o.jsx("h3",{className:"empty-title",children:"No tournaments found"}),o.jsx("p",{className:"empty-description",children:"Check back later for upcoming events"})]}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(f=>o.jsxs("div",{className:"card p-6 hover:shadow-lg transition-all duration-200",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsx("h3",{className:"text-xl font-space-grotesk font-bold text-gray-900",children:f.name}),o.jsx("span",{className:`badge capitalize ${h(f.status)}`,children:f.status})]}),o.jsx("p",{className:"text-gray-600 mb-6 font-inter",children:f.description}),o.jsxs("div",{className:"space-y-3 mb-6",children:[o.jsxs("div",{className:"flex items-center text-gray-600 font-inter",children:[o.jsx(Fn,{size:16,className:"mr-2"}),new Date(f.tournament_date).toLocaleDateString()]}),o.jsxs("div",{className:"flex items-center text-gray-600 font-inter",children:[o.jsx(M_,{size:16,className:"mr-2"}),f.location]}),o.jsxs("div",{className:"flex items-center text-gray-600 font-inter",children:[o.jsx(on,{size:16,className:"mr-2"}),f.current_participants,"/",f.max_participants," participants"]}),f.prize_pool&&o.jsxs("div",{className:"flex items-center text-gray-600 font-inter",children:[o.jsx(Zt,{size:16,className:"mr-2"}),"Prize Pool: ",f.prize_pool]}),o.jsxs("div",{className:"flex items-center text-gray-600 font-inter",children:[o.jsx(Su,{size:16,className:"mr-2"}),"Registration ends: ",new Date(f.registration_deadline).toLocaleDateString()]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsxs("div",{className:"flex justify-between text-gray-600 font-inter mb-2",children:[o.jsx("span",{children:"Registration Progress"}),o.jsxs("span",{children:[Math.round(f.current_participants/f.max_participants*100),"%"]})]}),o.jsx("div",{className:"progress-bar",children:o.jsx("div",{className:"progress-fill",style:{width:`${f.current_participants/f.max_participants*100}%`}})})]}),f.status==="upcoming"&&o.jsx("button",{onClick:()=>r(f.id),disabled:f.current_participants>=f.max_participants,className:"primary-button w-full disabled:opacity-50 disabled:cursor-not-allowed",children:f.current_participants>=f.max_participants?"Tournament Full":"Register for Tournament"})]},f.id))}),n&&o.jsx(Q_,{tournament:d.find(f=>f.id===n),onClose:()=>r(null),onSubmit:u})]})})}function bf(t,e,s=1.96){if(e===0)return 0;const n=t/e,r=1+s*s/e,i=n+s*s/(2*e),a=s*Math.sqrt((n*(1-n)+s*s/(4*e))/e);return(i-a)/r}function X_(t,e,s){console.log(` PARSER: Attempting ${e} parsing for: "${t}"`);let n=t;const r=M0(n,s.bits);if(!r)return console.log(` PARSER: ${e} parsing failed - no bit found`),null;n=n.slice(0,n.length-r.bitName.length).trim(),console.log(` PARSER: After bit removal: "${n}"`);const i=L0(n,s.ratchets);if(!i)return console.log(` PARSER: ${e} parsing failed - no ratchet found`),null;n=n.slice(0,n.length-i.ratchetName.length).trim(),console.log(` PARSER: After ratchet removal: "${n}"`),console.log(` PARSER: Looking for ${e} blade: "${n}"`);const a=D0(n,s.blades.filter(c=>c.Line===e));if(!a)return console.log(` PARSER: ${e} parsing failed - no ${e} blade found for "${n}"`),null;const l={isCustom:!1,blade:a.bladeName,ratchet:i.ratchetName,bit:r.bitName};return console.log(` PARSER: ${e} parsing successful:`,l),l}function Z_(t,e){console.log(` PARSER: Attempting Custom parsing for: "${t}"`);let s=t;const n=e1(t,e.lockchips);if(!n)return console.log(" PARSER: Custom parsing failed - no lockchip found"),null;s=t.slice(n.lockchipName.length),console.log(` PARSER: After lockchip removal: "${s}"`);const r=M0(s,e.bits);if(!r)return console.log(" PARSER: Custom parsing failed - no bit found"),null;s=s.slice(0,s.length-r.bitName.length).trim(),console.log(` PARSER: After bit removal: "${s}"`);const i=L0(s,e.ratchets);if(!i)return console.log(" PARSER: Custom parsing failed - no ratchet found"),null;s=s.slice(0,s.length-i.ratchetName.length).trim(),console.log(` PARSER: After ratchet removal: "${s}"`);const a=t1(s,e.assistBlades);if(!a)return console.log(" PARSER: Custom parsing failed - no assist blade found"),null;s=s.slice(0,s.length-a.assistBladeName.length).trim(),console.log(` PARSER: After assist blade removal: "${s}"`);const l=D0(s,e.blades.filter(d=>d.Line==="Custom"));if(!l)return console.log(` PARSER: Custom parsing failed - no Custom main blade found for "${s}"`),null;const c={isCustom:!0,lockchip:n.lockchipName,mainBlade:l.bladeName,assistBlade:a.assistBladeName,ratchet:i.ratchetName,bit:r.bitName};return console.log(" PARSER: Custom parsing successful:",c),c}function M0(t,e){console.log(` PARSER: Finding bit in "${t}"`),console.log(" PARSER: Available bits:",e.map(n=>({shortcut:n.Shortcut,full:n.Bit})));const s=[...e].sort((n,r)=>{const i=n.Shortcut||n.Bit||"";return(r.Shortcut||r.Bit||"").length-i.length});for(const n of s){const r=n.Shortcut;if(r&&t.endsWith(r))return console.log(` PARSER: Found bit by shortcut: ${r}`),{bit:n,bitName:r}}for(const n of s){const r=n.Bit;if(r&&t.endsWith(r))return console.log(` PARSER: Found bit by full name: ${r}  ${n.Shortcut||r}`),{bit:n,bitName:n.Shortcut||r}}return console.log(` PARSER: No bit found in "${t}"`),null}function L0(t,e){console.log(` PARSER: Finding ratchet in "${t}"`);const s=[...e].sort((n,r)=>{const i=n.Ratchet||"";return(r.Ratchet||"").length-i.length});for(const n of s){const r=n.Ratchet;if(r&&t.endsWith(r))return console.log(` PARSER: Found ratchet: ${r}`),{ratchet:n,ratchetName:r}}return console.log(` PARSER: No ratchet found in "${t}"`),null}function D0(t,e){console.log(` PARSER: Finding blade in "${t}"`),console.log(" PARSER: Available blades:",e.map(s=>({name:s.Blades,line:s.Line})));for(const s of e){const n=s.Blades;if(n&&t===n)return console.log(` PARSER: Found blade: ${n} (${s.Line} line)`),{blade:s,bladeName:n}}return console.log(` PARSER: No blade found for "${t}" in available blades`),null}function e1(t,e){console.log(` PARSER: Finding lockchip in "${t}"`),console.log(" PARSER: Available lockchips:",e.map(n=>n.Lockchip));const s=[...e].sort((n,r)=>{const i=n.Lockchip||"";return(r.Lockchip||"").length-i.length});for(const n of s){const r=n.Lockchip;if(r&&t.startsWith(r))return console.log(` PARSER: Found lockchip: ${r}`),{lockchip:n,lockchipName:r}}return console.log(` PARSER: No lockchip found in "${t}"`),null}function t1(t,e){console.log(` PARSER: Finding assist blade in "${t}"`),console.log(" PARSER: Available assist blades:",e.map(n=>n["Assist Blade"]));const s=[...e].sort((n,r)=>{const i=n["Assist Blade"]||"";return(r["Assist Blade"]||"").length-i.length});for(const n of s){const r=n["Assist Blade"];if(r&&t.endsWith(r))return console.log(` PARSER: Found assist blade: ${r}`),{assistBlade:n,assistBladeName:r}}return console.log(` PARSER: No assist blade found in "${t}"`),null}function wf(t,e,s){if(!t||!t.trim())return console.log(" PARSER: Empty beyblade name"),{isCustom:!1};console.log(`
 PARSER: Starting to parse "${t}"`);const n=["Basic","Unique","X-Over","Custom"];for(const r of n){if(console.log(` PARSER: Trying ${r} blade line...`),r==="Custom"){const i=Z_(t,s);if(i)return console.log(` PARSER: Successfully parsed as ${r} Beyblade`),i}else{const i=X_(t,r,s);if(i)return console.log(` PARSER: Successfully parsed as ${r} Beyblade`),i}console.log(` PARSER: ${r} parsing failed`)}return console.log(` PARSER: All parsing attempts failed for "${t}"`),{isCustom:!1}}function s1({onBack:t}){var ie;const[e,s]=N.useState([]),[n,r]=N.useState(""),[i,a]=N.useState(!0),[l,c]=N.useState(!1),[d,u]=N.useState(null),[h,f]=N.useState({blades:[],ratchets:[],bits:[],lockchips:[],assistBlades:[]}),[m,p]=N.useState({blade:{},ratchet:{},bit:{},lockchip:{},mainBlade:{},assistBlade:{}}),[y,b]=N.useState([]),[x,g]=N.useState(""),[v,w]=N.useState(""),[_,S]=N.useState([]),[P,E]=N.useState(null),[k,T]=N.useState([]),[R,$]=N.useState({key:"wilson",direction:"desc"});N.useEffect(()=>{G(),le()},[]),N.useEffect(()=>{n&&Object.keys(h.blades).length>0&&O()},[n,h]),N.useEffect(()=>{x&&v&&y.length>0&&z()},[x,v,y]);const G=async()=>{try{console.log(" META ANALYSIS: Fetching tournaments...");const{data:M,error:ee}=await H.from("tournaments").select("id, name, status, tournament_date").order("tournament_date",{ascending:!1});if(ee)throw ee;s(M||[]),console.log(` META ANALYSIS: Loaded ${(M==null?void 0:M.length)||0} tournaments`);const se=M==null?void 0:M.find(ae=>ae.status==="completed");se&&(r(se.id),console.log(` META ANALYSIS: Auto-selected completed tournament: ${se.name}`))}catch(M){console.error(" META ANALYSIS: Error fetching tournaments:",M),u("Failed to load tournaments")}finally{a(!1)}},le=async()=>{try{console.log(" META ANALYSIS: Fetching all parts data...");const[M,ee,se,ae,D]=await Promise.all([H.from("beypart_blade").select("*"),H.from("beypart_ratchet").select("*"),H.from("beypart_bit").select("*"),H.from("beypart_lockchip").select("*"),H.from("beypart_assistblade").select("*")]);if(M.error)throw M.error;if(ee.error)throw ee.error;if(se.error)throw se.error;if(ae.error)throw ae.error;if(D.error)throw D.error;const F={blades:M.data||[],ratchets:ee.data||[],bits:se.data||[],lockchips:ae.data||[],assistBlades:D.data||[]};f(F),console.log(" META ANALYSIS: Parts data loaded:",{blades:F.blades.length,ratchets:F.ratchets.length,bits:F.bits.length,lockchips:F.lockchips.length,assistBlades:F.assistBlades.length})}catch(M){console.error(" META ANALYSIS: Error fetching parts data:",M),u("Failed to load parts data")}},O=async()=>{if(n){c(!0),u(null);try{console.log(` META ANALYSIS: Processing data for tournament ${n}`);const{data:M,error:ee}=await H.from("match_results").select("player1_name, player2_name, player1_beyblade, player2_beyblade, player1_blade_line, player2_blade_line, winner_name, outcome, points_awarded").eq("tournament_id",n);if(ee)throw ee;if(!M||M.length===0){console.log(" META ANALYSIS: No matches found for this tournament"),p({blade:{},ratchet:{},bit:{},lockchip:{},mainBlade:{},assistBlade:{}}),b([]),c(!1);return}console.log(` META ANALYSIS: Processing ${M.length} matches`);const se=[],ae={blade:{},ratchet:{},bit:{},lockchip:{},mainBlade:{},assistBlade:{}},D=(F,B)=>{ae[F][B]||(ae[F][B]={name:B,usage:0,wins:0,losses:0,winRate:0,wilson:0})};M.forEach(F=>{if(!F.winner_name||!F.player1_name||!F.player2_name)return;const B=wf(F.player1_beyblade,F.player1_blade_line,h),ce=wf(F.player2_beyblade,F.player2_blade_line,h),j={player:F.player1_name,opponent:F.player2_name,beyblade:F.player1_beyblade,opponentBeyblade:F.player2_beyblade,isWin:F.winner_name===F.player1_name,outcome:F.outcome||"Unknown",parsedParts:B},C={player:F.player2_name,opponent:F.player1_name,beyblade:F.player2_beyblade,opponentBeyblade:F.player1_beyblade,isWin:F.winner_name===F.player2_name,outcome:F.outcome||"Unknown",parsedParts:ce};se.push(j,C);const L=(oe,X)=>{Object.entries(oe).forEach(([pe,ke])=>{if(pe==="isCustom"||!ke)return;D(pe,ke);const A=ae[pe][ke];A.usage++,X?A.wins++:A.losses++})};L(B,j.isWin),L(ce,C.isWin)}),Object.keys(ae).forEach(F=>{Object.values(ae[F]).forEach(B=>{const ce=B.wins+B.losses;B.winRate=ce>0?B.wins/ce*100:0,B.wilson=bf(B.wins,ce)})}),p(ae),b(se),console.log(" META ANALYSIS: Data processing complete"),console.log(" META ANALYSIS: Stats summary:",{totalProcessedMatches:se.length,uniqueBlades:Object.keys(ae.blade).length,uniqueRatchets:Object.keys(ae.ratchet).length,uniqueBits:Object.keys(ae.bit).length})}catch(M){console.error(" META ANALYSIS: Error processing tournament data:",M),u("Failed to process tournament data")}finally{c(!1)}}},z=()=>{console.log(` META ANALYSIS: Generating builds data for ${x}: ${v}`);const M={};y.forEach(se=>{if(se.parsedParts[x]!==v)return;const D=`${se.beyblade}_${se.player}`;M[D]||(M[D]={build:se.beyblade,player:se.player,wins:0,losses:0,winRate:0,wilson:0}),se.isWin?M[D].wins++:M[D].losses++});const ee=Object.values(M).map(se=>{const ae=se.wins+se.losses;return se.winRate=ae>0?se.wins/ae*100:0,se.wilson=bf(se.wins,ae),se}).sort((se,ae)=>ae.wilson-se.wilson);S(ee),console.log(` META ANALYSIS: Generated ${ee.length} builds for ${v}`)},V=(M,ee)=>{E({build:M,player:ee});const se=y.filter(ae=>ae.beyblade===M&&ae.player===ee);T(se),console.log(` META ANALYSIS: Showing ${se.length} matches for ${M} by ${ee}`)},W=M=>{let ee="asc";R.key===M&&R.direction==="asc"&&(ee="desc"),$({key:M,direction:ee})},K=M=>{const ee=Object.values(m[M]||{}).filter(se=>se.usage>0);return R.key?[...ee].sort((se,ae)=>{const D=se[R.key],F=ae[R.key];if(typeof D=="number"&&typeof F=="number")return R.direction==="asc"?D-F:F-D;const B=String(D),ce=String(F);return R.direction==="asc"?B.localeCompare(ce):ce.localeCompare(B)}):ee.sort((se,ae)=>ae.wilson-se.wilson)},J=M=>{switch(M){case"blade":return"Blades";case"ratchet":return"Ratchets";case"bit":return"Bits";case"lockchip":return"Lockchips";case"mainBlade":return"Main Blades";case"assistBlade":return"Assist Blades";default:return M}},re=({children:M,sortKey:ee})=>o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>W(ee),children:o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("span",{children:M}),R.key===ee&&(R.direction==="asc"?o.jsx(C_,{size:12}):o.jsx(S_,{size:12}))]})});return i?o.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading tournaments..."})]})}):d?o.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"text-red-500 text-4xl mb-4",children:""}),o.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Error"}),o.jsx("p",{className:"text-red-600 mb-4",children:d}),o.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"Reload Page"})]})}):o.jsx("div",{className:"page-container",children:o.jsxs("div",{className:"content-wrapper",children:[o.jsx("div",{className:"page-header",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"page-title",children:"Tournament Analytics"}),o.jsx("p",{className:"page-subtitle",children:"Comprehensive tournament and player statistics"})]}),o.jsxs("div",{className:"filter-tabs",children:[o.jsx("button",{onClick:()=>{t&&t()},className:"filter-tab filter-tab-inactive",children:"Overview"}),o.jsx("button",{className:"filter-tab filter-tab-active",children:"Meta Analysis"}),o.jsx("button",{onClick:()=>{t&&(t(),setTimeout(()=>{const M=new CustomEvent("navigateToPlayerAnalytics");window.dispatchEvent(M)},50))},className:"filter-tab filter-tab-inactive",children:"Player Analytics"})]})]})}),o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Tournament Selection"}),o.jsxs("div",{className:"max-w-md",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Tournament"}),o.jsxs("select",{value:n,onChange:M=>r(M.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.jsx("option",{value:"",children:"-- Select Tournament --"}),e.map(M=>o.jsxs("option",{value:M.id,children:[M.name," (",M.status,")"]},M.id))]})]})]}),n&&o.jsxs(o.Fragment,{children:[l&&o.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-8",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mr-3"}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-blue-800 font-medium",children:"Processing Tournament Data"}),o.jsx("p",{className:"text-blue-700 text-sm mt-1",children:"Parsing Beyblade names and calculating statistics..."})]})]})}),!l&&y.length===0&&o.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 mb-8",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"text-yellow-600 mr-3",children:""}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-yellow-800 font-medium",children:"No Match Data Available"}),o.jsxs("p",{className:"text-yellow-700 text-sm mt-1",children:["This tournament has no completed matches yet. Meta analysis requires match results to generate statistics.",((ie=e.find(M=>M.id===n))==null?void 0:ie.status)==="upcoming"&&" Try selecting a completed tournament instead."]})]})]})}),!l&&y.length>0&&o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[o.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[o.jsx(T0,{className:"mr-2",size:24}),"Builds by Part"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Part Type"}),o.jsxs("select",{value:x,onChange:M=>{g(M.target.value),w(""),S([]),E(null),T([])},className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.jsx("option",{value:"",children:"Select Part Type"}),o.jsx("option",{value:"blade",children:"Blade"}),o.jsx("option",{value:"ratchet",children:"Ratchet"}),o.jsx("option",{value:"bit",children:"Bit"}),o.jsx("option",{value:"lockchip",children:"Lockchip"}),o.jsx("option",{value:"mainBlade",children:"Main Blade"}),o.jsx("option",{value:"assistBlade",children:"Assist Blade"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Part Name"}),o.jsxs("select",{value:v,onChange:M=>w(M.target.value),disabled:!x,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100",children:[o.jsx("option",{value:"",children:"Select Part Name"}),x&&Object.values(m[x]||{}).filter(M=>M.usage>0).sort((M,ee)=>ee.wilson-M.wilson).map(M=>o.jsx("option",{value:M.name,children:M.name},M.name))]})]})]}),_.length>0&&o.jsxs("div",{className:"mb-6",children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Builds using ",v," (",J(x),")"]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Build"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Wins"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Losses"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Win Rate"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Wilson Score"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:_.map((M,ee)=>o.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>V(M.build,M.player),children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-600 hover:text-blue-800",children:M.build}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:M.player}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:M.wins}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:M.losses}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[M.winRate.toFixed(1),"%"]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:M.wilson.toFixed(3)})]},ee))})]})})]}),P&&k.length>0&&o.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[o.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Matches for ",o.jsx("strong",{children:P.build})," by ",o.jsx("strong",{children:P.player})]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Result"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Opponent"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Opponent's Bey"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Finish Type"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k.map((M,ee)=>o.jsxs("tr",{className:M.isWin?"bg-green-50":"bg-red-50",children:[o.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm font-medium ${M.isWin?"text-green-800":"text-red-800"}`,children:M.isWin?"Win":"Loss"}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:M.opponent}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:M.opponentBeyblade}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:M.outcome})]},ee))})]})})]})]}),!l&&y.length>0&&o.jsx("div",{className:"space-y-8",children:["blade","ratchet","bit","lockchip","mainBlade","assistBlade"].map(M=>o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[o.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 capitalize flex items-center",children:[o.jsx(Mo,{className:"mr-2",size:24}),J(M)]}),Object.keys(m[M]||{}).length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx(Mo,{size:48,className:"mx-auto text-gray-400 mb-4"}),o.jsxs("p",{className:"text-gray-500",children:["No ",J(M).toLowerCase()," data available"]}),o.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:["No matches used ",J(M).toLowerCase()," from this category"]})]}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx(re,{sortKey:"name",children:"Name"}),o.jsx(re,{sortKey:"usage",children:"Usage"}),o.jsx(re,{sortKey:"wins",children:"Wins"}),o.jsx(re,{sortKey:"losses",children:"Losses"}),o.jsx(re,{sortKey:"winRate",children:"Win Rate"}),o.jsx(re,{sortKey:"wilson",children:"Wilson Score"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:K(M).map((ee,se)=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:ee.name}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:ee.usage}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:ee.wins}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:ee.losses}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[ee.winRate.toFixed(1),"%"]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:ee.wilson.toFixed(3)})]},se))})]})})]},M))})]})]})})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function ia(t){return t+.5|0}const Vs=(t,e,s)=>Math.max(Math.min(t,s),e);function li(t){return Vs(ia(t*2.55),0,255)}function nn(t){return Vs(ia(t*255),0,255)}function _s(t){return Vs(ia(t/2.55)/100,0,1)}function _f(t){return Vs(ia(t*100),0,100)}const Dt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},pd=[..."0123456789ABCDEF"],n1=t=>pd[t&15],r1=t=>pd[(t&240)>>4]+pd[t&15],Ea=t=>(t&240)>>4===(t&15),i1=t=>Ea(t.r)&&Ea(t.g)&&Ea(t.b)&&Ea(t.a);function a1(t){var e=t.length,s;return t[0]==="#"&&(e===4||e===5?s={r:255&Dt[t[1]]*17,g:255&Dt[t[2]]*17,b:255&Dt[t[3]]*17,a:e===5?Dt[t[4]]*17:255}:(e===7||e===9)&&(s={r:Dt[t[1]]<<4|Dt[t[2]],g:Dt[t[3]]<<4|Dt[t[4]],b:Dt[t[5]]<<4|Dt[t[6]],a:e===9?Dt[t[7]]<<4|Dt[t[8]]:255})),s}const o1=(t,e)=>t<255?e(t):"";function l1(t){var e=i1(t)?n1:r1;return t?"#"+e(t.r)+e(t.g)+e(t.b)+o1(t.a,e):void 0}const c1=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function B0(t,e,s){const n=e*Math.min(s,1-s),r=(i,a=(i+t/30)%12)=>s-n*Math.max(Math.min(a-3,9-a,1),-1);return[r(0),r(8),r(4)]}function d1(t,e,s){const n=(r,i=(r+t/60)%6)=>s-s*e*Math.max(Math.min(i,4-i,1),0);return[n(5),n(3),n(1)]}function u1(t,e,s){const n=B0(t,1,.5);let r;for(e+s>1&&(r=1/(e+s),e*=r,s*=r),r=0;r<3;r++)n[r]*=1-e-s,n[r]+=e;return n}function h1(t,e,s,n,r){return t===r?(e-s)/n+(e<s?6:0):e===r?(s-t)/n+2:(t-e)/n+4}function Pu(t){const s=t.r/255,n=t.g/255,r=t.b/255,i=Math.max(s,n,r),a=Math.min(s,n,r),l=(i+a)/2;let c,d,u;return i!==a&&(u=i-a,d=l>.5?u/(2-i-a):u/(i+a),c=h1(s,n,r,u,i),c=c*60+.5),[c|0,d||0,l]}function Eu(t,e,s,n){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,s,n)).map(nn)}function Tu(t,e,s){return Eu(B0,t,e,s)}function f1(t,e,s){return Eu(u1,t,e,s)}function m1(t,e,s){return Eu(d1,t,e,s)}function I0(t){return(t%360+360)%360}function p1(t){const e=c1.exec(t);let s=255,n;if(!e)return;e[5]!==n&&(s=e[6]?li(+e[5]):nn(+e[5]));const r=I0(+e[2]),i=+e[3]/100,a=+e[4]/100;return e[1]==="hwb"?n=f1(r,i,a):e[1]==="hsv"?n=m1(r,i,a):n=Tu(r,i,a),{r:n[0],g:n[1],b:n[2],a:s}}function g1(t,e){var s=Pu(t);s[0]=I0(s[0]+e),s=Tu(s),t.r=s[0],t.g=s[1],t.b=s[2]}function x1(t){if(!t)return;const e=Pu(t),s=e[0],n=_f(e[1]),r=_f(e[2]);return t.a<255?`hsla(${s}, ${n}%, ${r}%, ${_s(t.a)})`:`hsl(${s}, ${n}%, ${r}%)`}const jf={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},kf={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function y1(){const t={},e=Object.keys(kf),s=Object.keys(jf);let n,r,i,a,l;for(n=0;n<e.length;n++){for(a=l=e[n],r=0;r<s.length;r++)i=s[r],l=l.replace(i,jf[i]);i=parseInt(kf[a],16),t[l]=[i>>16&255,i>>8&255,i&255]}return t}let Ta;function v1(t){Ta||(Ta=y1(),Ta.transparent=[0,0,0,0]);const e=Ta[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const b1=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function w1(t){const e=b1.exec(t);let s=255,n,r,i;if(e){if(e[7]!==n){const a=+e[7];s=e[8]?li(a):Vs(a*255,0,255)}return n=+e[1],r=+e[3],i=+e[5],n=255&(e[2]?li(n):Vs(n,0,255)),r=255&(e[4]?li(r):Vs(r,0,255)),i=255&(e[6]?li(i):Vs(i,0,255)),{r:n,g:r,b:i,a:s}}}function _1(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${_s(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const ec=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,er=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function j1(t,e,s){const n=er(_s(t.r)),r=er(_s(t.g)),i=er(_s(t.b));return{r:nn(ec(n+s*(er(_s(e.r))-n))),g:nn(ec(r+s*(er(_s(e.g))-r))),b:nn(ec(i+s*(er(_s(e.b))-i))),a:t.a+s*(e.a-t.a)}}function Aa(t,e,s){if(t){let n=Pu(t);n[e]=Math.max(0,Math.min(n[e]+n[e]*s,e===0?360:1)),n=Tu(n),t.r=n[0],t.g=n[1],t.b=n[2]}}function $0(t,e){return t&&Object.assign(e||{},t)}function Nf(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=nn(t[3]))):(e=$0(t,{r:0,g:0,b:0,a:1}),e.a=nn(e.a)),e}function k1(t){return t.charAt(0)==="r"?w1(t):p1(t)}class Ki{constructor(e){if(e instanceof Ki)return e;const s=typeof e;let n;s==="object"?n=Nf(e):s==="string"&&(n=a1(e)||v1(e)||k1(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=$0(this._rgb);return e&&(e.a=_s(e.a)),e}set rgb(e){this._rgb=Nf(e)}rgbString(){return this._valid?_1(this._rgb):void 0}hexString(){return this._valid?l1(this._rgb):void 0}hslString(){return this._valid?x1(this._rgb):void 0}mix(e,s){if(e){const n=this.rgb,r=e.rgb;let i;const a=s===i?.5:s,l=2*a-1,c=n.a-r.a,d=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;i=1-d,n.r=255&d*n.r+i*r.r+.5,n.g=255&d*n.g+i*r.g+.5,n.b=255&d*n.b+i*r.b+.5,n.a=a*n.a+(1-a)*r.a,this.rgb=n}return this}interpolate(e,s){return e&&(this._rgb=j1(this._rgb,e._rgb,s)),this}clone(){return new Ki(this.rgb)}alpha(e){return this._rgb.a=nn(e),this}clearer(e){const s=this._rgb;return s.a*=1-e,this}greyscale(){const e=this._rgb,s=ia(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=s,this}opaquer(e){const s=this._rgb;return s.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Aa(this._rgb,2,e),this}darken(e){return Aa(this._rgb,2,-e),this}saturate(e){return Aa(this._rgb,1,e),this}desaturate(e){return Aa(this._rgb,1,-e),this}rotate(e){return g1(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function ms(){}const N1=(()=>{let t=0;return()=>t++})();function Ae(t){return t==null}function $e(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function ve(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function ot(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function is(t,e){return ot(t)?t:e}function ye(t,e){return typeof t>"u"?e:t}const S1=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Pe(t,e,s){if(t&&typeof t.call=="function")return t.apply(s,e)}function _e(t,e,s,n){let r,i,a;if($e(t))for(i=t.length,r=0;r<i;r++)e.call(s,t[r],r);else if(ve(t))for(a=Object.keys(t),i=a.length,r=0;r<i;r++)e.call(s,t[a[r]],a[r])}function Lo(t,e){let s,n,r,i;if(!t||!e||t.length!==e.length)return!1;for(s=0,n=t.length;s<n;++s)if(r=t[s],i=e[s],r.datasetIndex!==i.datasetIndex||r.index!==i.index)return!1;return!0}function Do(t){if($e(t))return t.map(Do);if(ve(t)){const e=Object.create(null),s=Object.keys(t),n=s.length;let r=0;for(;r<n;++r)e[s[r]]=Do(t[s[r]]);return e}return t}function z0(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function C1(t,e,s,n){if(!z0(t))return;const r=e[t],i=s[t];ve(r)&&ve(i)?Yi(r,i,n):e[t]=Do(i)}function Yi(t,e,s){const n=$e(e)?e:[e],r=n.length;if(!ve(t))return t;s=s||{};const i=s.merger||C1;let a;for(let l=0;l<r;++l){if(a=n[l],!ve(a))continue;const c=Object.keys(a);for(let d=0,u=c.length;d<u;++d)i(c[d],t,a,s)}return t}function ki(t,e){return Yi(t,e,{merger:P1})}function P1(t,e,s){if(!z0(t))return;const n=e[t],r=s[t];ve(n)&&ve(r)?ki(n,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Do(r))}const Sf={"":t=>t,x:t=>t.x,y:t=>t.y};function E1(t){const e=t.split("."),s=[];let n="";for(const r of e)n+=r,n.endsWith("\\")?n=n.slice(0,-1)+".":(s.push(n),n="");return s}function T1(t){const e=E1(t);return s=>{for(const n of e){if(n==="")break;s=s&&s[n]}return s}}function Gi(t,e){return(Sf[e]||(Sf[e]=T1(e)))(t)}function Au(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Bo=t=>typeof t<"u",ln=t=>typeof t=="function",Cf=(t,e)=>{if(t.size!==e.size)return!1;for(const s of t)if(!e.has(s))return!1;return!0};function A1(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Je=Math.PI,At=2*Je,O1=At+Je,Io=Number.POSITIVE_INFINITY,R1=Je/180,Et=Je/2,vn=Je/4,Pf=Je*2/3,gd=Math.log10,Rr=Math.sign;function Ni(t,e,s){return Math.abs(t-e)<s}function Ef(t){const e=Math.round(t);t=Ni(t,e,t/1e3)?e:t;const s=Math.pow(10,Math.floor(gd(t))),n=t/s;return(n<=1?1:n<=2?2:n<=5?5:10)*s}function M1(t){const e=[],s=Math.sqrt(t);let n;for(n=1;n<s;n++)t%n===0&&(e.push(n),e.push(t/n));return s===(s|0)&&e.push(s),e.sort((r,i)=>r-i).pop(),e}function L1(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function $o(t){return!L1(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function D1(t,e){const s=Math.round(t);return s-e<=t&&s+e>=t}function B1(t,e,s){let n,r,i;for(n=0,r=t.length;n<r;n++)i=t[n][s],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function An(t){return t*(Je/180)}function Ou(t){return t*(180/Je)}function Tf(t){if(!ot(t))return;let e=1,s=0;for(;Math.round(t*e)/e!==t;)e*=10,s++;return s}function I1(t,e){const s=e.x-t.x,n=e.y-t.y,r=Math.sqrt(s*s+n*n);let i=Math.atan2(n,s);return i<-.5*Je&&(i+=At),{angle:i,distance:r}}function xd(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function $1(t,e){return(t-e+O1)%At-Je}function St(t){return(t%At+At)%At}function F0(t,e,s,n){const r=St(t),i=St(e),a=St(s),l=St(i-r),c=St(a-r),d=St(r-i),u=St(r-a);return r===i||r===a||n&&i===a||l>c&&d<u}function Ns(t,e,s){return Math.max(e,Math.min(s,t))}function z1(t){return Ns(t,-32768,32767)}function pr(t,e,s,n=1e-6){return t>=Math.min(e,s)-n&&t<=Math.max(e,s)+n}function Ru(t,e,s){s=s||(a=>t[a]<e);let n=t.length-1,r=0,i;for(;n-r>1;)i=r+n>>1,s(i)?r=i:n=i;return{lo:r,hi:n}}const yd=(t,e,s,n)=>Ru(t,s,n?r=>{const i=t[r][e];return i<s||i===s&&t[r+1][e]===s}:r=>t[r][e]<s),F1=(t,e,s)=>Ru(t,s,n=>t[n][e]>=s);function U1(t,e,s){let n=0,r=t.length;for(;n<r&&t[n]<e;)n++;for(;r>n&&t[r-1]>s;)r--;return n>0||r<t.length?t.slice(n,r):t}const U0=["push","pop","shift","splice","unshift"];function W1(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),U0.forEach(s=>{const n="_onData"+Au(s),r=t[s];Object.defineProperty(t,s,{configurable:!0,enumerable:!1,value(...i){const a=r.apply(this,i);return t._chartjs.listeners.forEach(l=>{typeof l[n]=="function"&&l[n](...i)}),a}})})}function Af(t,e){const s=t._chartjs;if(!s)return;const n=s.listeners,r=n.indexOf(e);r!==-1&&n.splice(r,1),!(n.length>0)&&(U0.forEach(i=>{delete t[i]}),delete t._chartjs)}function H1(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const W0=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function H0(t,e){let s=[],n=!1;return function(...r){s=r,n||(n=!0,W0.call(window,()=>{n=!1,t.apply(e,s)}))}}function V1(t,e){let s;return function(...n){return e?(clearTimeout(s),s=setTimeout(t,e,n)):t.apply(this,n),e}}const V0=t=>t==="start"?"left":t==="end"?"right":"center",kt=(t,e,s)=>t==="start"?e:t==="end"?s:(e+s)/2,q1=(t,e,s,n)=>t===(n?"left":"right")?s:t==="center"?(e+s)/2:e,Oa=t=>t===0||t===1,Of=(t,e,s)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*At/s)),Rf=(t,e,s)=>Math.pow(2,-10*t)*Math.sin((t-e)*At/s)+1,Si={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Et)+1,easeOutSine:t=>Math.sin(t*Et),easeInOutSine:t=>-.5*(Math.cos(Je*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Oa(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Oa(t)?t:Of(t,.075,.3),easeOutElastic:t=>Oa(t)?t:Rf(t,.075,.3),easeInOutElastic(t){return Oa(t)?t:t<.5?.5*Of(t*2,.1125,.45):.5+.5*Rf(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Si.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Si.easeInBounce(t*2)*.5:Si.easeOutBounce(t*2-1)*.5+.5};function Mu(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Mf(t){return Mu(t)?t:new Ki(t)}function tc(t){return Mu(t)?t:new Ki(t).saturate(.5).darken(.1).hexString()}const K1=["x","y","borderWidth","radius","tension"],Y1=["color","borderColor","backgroundColor"];function G1(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:Y1},numbers:{type:"number",properties:K1}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function Q1(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Lf=new Map;function J1(t,e){e=e||{};const s=t+JSON.stringify(e);let n=Lf.get(s);return n||(n=new Intl.NumberFormat(t,e),Lf.set(s,n)),n}function q0(t,e,s){return J1(e,s).format(t)}const K0={values(t){return $e(t)?t:""+t},numeric(t,e,s){if(t===0)return"0";const n=this.chart.options.locale;let r,i=t;if(s.length>1){const d=Math.max(Math.abs(s[0].value),Math.abs(s[s.length-1].value));(d<1e-4||d>1e15)&&(r="scientific"),i=X1(t,s)}const a=gd(Math.abs(i)),l=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),c={notation:r,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),q0(t,n,c)},logarithmic(t,e,s){if(t===0)return"0";const n=s[e].significand||t/Math.pow(10,Math.floor(gd(t)));return[1,2,3,5,10,15].includes(n)||e>.8*s.length?K0.numeric.call(this,t,e,s):""}};function X1(t,e){let s=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(s)>=1&&t!==Math.floor(t)&&(s=t-Math.floor(t)),s}var Y0={formatters:K0};function Z1(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,s)=>s.lineWidth,tickColor:(e,s)=>s.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Y0.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Wn=Object.create(null),vd=Object.create(null);function Ci(t,e){if(!e)return t;const s=e.split(".");for(let n=0,r=s.length;n<r;++n){const i=s[n];t=t[i]||(t[i]=Object.create(null))}return t}function sc(t,e,s){return typeof e=="string"?Yi(Ci(t,e),s):Yi(Ci(t,""),e)}class ej{constructor(e,s){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,r)=>tc(r.backgroundColor),this.hoverBorderColor=(n,r)=>tc(r.borderColor),this.hoverColor=(n,r)=>tc(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(s)}set(e,s){return sc(this,e,s)}get(e){return Ci(this,e)}describe(e,s){return sc(vd,e,s)}override(e,s){return sc(Wn,e,s)}route(e,s,n,r){const i=Ci(this,e),a=Ci(this,n),l="_"+s;Object.defineProperties(i,{[l]:{value:i[s],writable:!0},[s]:{enumerable:!0,get(){const c=this[l],d=a[r];return ve(c)?Object.assign({},d,c):ye(c,d)},set(c){this[l]=c}}})}apply(e){e.forEach(s=>s(this))}}var ze=new ej({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[G1,Q1,Z1]);function tj(t){return!t||Ae(t.size)||Ae(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function zo(t,e,s,n,r){let i=e[r];return i||(i=e[r]=t.measureText(r).width,s.push(r)),i>n&&(n=i),n}function sj(t,e,s,n){n=n||{};let r=n.data=n.data||{},i=n.garbageCollect=n.garbageCollect||[];n.font!==e&&(r=n.data={},i=n.garbageCollect=[],n.font=e),t.save(),t.font=e;let a=0;const l=s.length;let c,d,u,h,f;for(c=0;c<l;c++)if(h=s[c],h!=null&&!$e(h))a=zo(t,r,i,a,h);else if($e(h))for(d=0,u=h.length;d<u;d++)f=h[d],f!=null&&!$e(f)&&(a=zo(t,r,i,a,f));t.restore();const m=i.length/2;if(m>s.length){for(c=0;c<m;c++)delete r[i[c]];i.splice(0,m)}return a}function bn(t,e,s){const n=t.currentDevicePixelRatio,r=s!==0?Math.max(s/2,.5):0;return Math.round((e-r)*n)/n+r}function Df(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function bd(t,e,s,n){G0(t,e,s,n,null)}function G0(t,e,s,n,r){let i,a,l,c,d,u,h,f;const m=e.pointStyle,p=e.rotation,y=e.radius;let b=(p||0)*R1;if(m&&typeof m=="object"&&(i=m.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(s,n),t.rotate(b),t.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),t.restore();return}if(!(isNaN(y)||y<=0)){switch(t.beginPath(),m){default:r?t.ellipse(s,n,r/2,y,0,0,At):t.arc(s,n,y,0,At),t.closePath();break;case"triangle":u=r?r/2:y,t.moveTo(s+Math.sin(b)*u,n-Math.cos(b)*y),b+=Pf,t.lineTo(s+Math.sin(b)*u,n-Math.cos(b)*y),b+=Pf,t.lineTo(s+Math.sin(b)*u,n-Math.cos(b)*y),t.closePath();break;case"rectRounded":d=y*.516,c=y-d,a=Math.cos(b+vn)*c,h=Math.cos(b+vn)*(r?r/2-d:c),l=Math.sin(b+vn)*c,f=Math.sin(b+vn)*(r?r/2-d:c),t.arc(s-h,n-l,d,b-Je,b-Et),t.arc(s+f,n-a,d,b-Et,b),t.arc(s+h,n+l,d,b,b+Et),t.arc(s-f,n+a,d,b+Et,b+Je),t.closePath();break;case"rect":if(!p){c=Math.SQRT1_2*y,u=r?r/2:c,t.rect(s-u,n-c,2*u,2*c);break}b+=vn;case"rectRot":h=Math.cos(b)*(r?r/2:y),a=Math.cos(b)*y,l=Math.sin(b)*y,f=Math.sin(b)*(r?r/2:y),t.moveTo(s-h,n-l),t.lineTo(s+f,n-a),t.lineTo(s+h,n+l),t.lineTo(s-f,n+a),t.closePath();break;case"crossRot":b+=vn;case"cross":h=Math.cos(b)*(r?r/2:y),a=Math.cos(b)*y,l=Math.sin(b)*y,f=Math.sin(b)*(r?r/2:y),t.moveTo(s-h,n-l),t.lineTo(s+h,n+l),t.moveTo(s+f,n-a),t.lineTo(s-f,n+a);break;case"star":h=Math.cos(b)*(r?r/2:y),a=Math.cos(b)*y,l=Math.sin(b)*y,f=Math.sin(b)*(r?r/2:y),t.moveTo(s-h,n-l),t.lineTo(s+h,n+l),t.moveTo(s+f,n-a),t.lineTo(s-f,n+a),b+=vn,h=Math.cos(b)*(r?r/2:y),a=Math.cos(b)*y,l=Math.sin(b)*y,f=Math.sin(b)*(r?r/2:y),t.moveTo(s-h,n-l),t.lineTo(s+h,n+l),t.moveTo(s+f,n-a),t.lineTo(s-f,n+a);break;case"line":a=r?r/2:Math.cos(b)*y,l=Math.sin(b)*y,t.moveTo(s-a,n-l),t.lineTo(s+a,n+l);break;case"dash":t.moveTo(s,n),t.lineTo(s+Math.cos(b)*(r?r/2:y),n+Math.sin(b)*y);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Ss(t,e,s){return s=s||.5,!e||t&&t.x>e.left-s&&t.x<e.right+s&&t.y>e.top-s&&t.y<e.bottom+s}function pl(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function gl(t){t.restore()}function nj(t,e,s,n,r){if(!e)return t.lineTo(s.x,s.y);if(r==="middle"){const i=(e.x+s.x)/2;t.lineTo(i,e.y),t.lineTo(i,s.y)}else r==="after"!=!!n?t.lineTo(e.x,s.y):t.lineTo(s.x,e.y);t.lineTo(s.x,s.y)}function rj(t,e,s,n){if(!e)return t.lineTo(s.x,s.y);t.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?s.cp2x:s.cp1x,n?s.cp2y:s.cp1y,s.x,s.y)}function ij(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Ae(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function aj(t,e,s,n,r){if(r.strikethrough||r.underline){const i=t.measureText(n),a=e-i.actualBoundingBoxLeft,l=e+i.actualBoundingBoxRight,c=s-i.actualBoundingBoxAscent,d=s+i.actualBoundingBoxDescent,u=r.strikethrough?(c+d)/2:d;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(a,u),t.lineTo(l,u),t.stroke()}}function oj(t,e){const s=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=s}function Mr(t,e,s,n,r,i={}){const a=$e(e)?e:[e],l=i.strokeWidth>0&&i.strokeColor!=="";let c,d;for(t.save(),t.font=r.string,ij(t,i),c=0;c<a.length;++c)d=a[c],i.backdrop&&oj(t,i.backdrop),l&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),Ae(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(d,s,n,i.maxWidth)),t.fillText(d,s,n,i.maxWidth),aj(t,s,n,d,i),n+=Number(r.lineHeight);t.restore()}function Fo(t,e){const{x:s,y:n,w:r,h:i,radius:a}=e;t.arc(s+a.topLeft,n+a.topLeft,a.topLeft,1.5*Je,Je,!0),t.lineTo(s,n+i-a.bottomLeft),t.arc(s+a.bottomLeft,n+i-a.bottomLeft,a.bottomLeft,Je,Et,!0),t.lineTo(s+r-a.bottomRight,n+i),t.arc(s+r-a.bottomRight,n+i-a.bottomRight,a.bottomRight,Et,0,!0),t.lineTo(s+r,n+a.topRight),t.arc(s+r-a.topRight,n+a.topRight,a.topRight,0,-Et,!0),t.lineTo(s+a.topLeft,n)}const lj=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,cj=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function dj(t,e){const s=(""+t).match(lj);if(!s||s[1]==="normal")return e*1.2;switch(t=+s[2],s[3]){case"px":return t;case"%":t/=100;break}return e*t}const uj=t=>+t||0;function Q0(t,e){const s={},n=ve(e),r=n?Object.keys(e):e,i=ve(t)?n?a=>ye(t[a],t[e[a]]):a=>t[a]:()=>t;for(const a of r)s[a]=uj(i(a));return s}function hj(t){return Q0(t,{top:"y",right:"x",bottom:"y",left:"x"})}function _r(t){return Q0(t,["topLeft","topRight","bottomLeft","bottomRight"])}function ht(t){const e=hj(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Ze(t,e){t=t||{},e=e||ze.font;let s=ye(t.size,e.size);typeof s=="string"&&(s=parseInt(s,10));let n=ye(t.style,e.style);n&&!(""+n).match(cj)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const r={family:ye(t.family,e.family),lineHeight:dj(ye(t.lineHeight,e.lineHeight),s),size:s,style:n,weight:ye(t.weight,e.weight),string:""};return r.string=tj(r),r}function Ra(t,e,s,n){let r,i,a;for(r=0,i=t.length;r<i;++r)if(a=t[r],a!==void 0&&a!==void 0)return a}function fj(t,e,s){const{min:n,max:r}=t,i=S1(e,(r-n)/2),a=(l,c)=>s&&l===0?0:l+c;return{min:a(n,-Math.abs(i)),max:a(r,i)}}function mn(t,e){return Object.assign(Object.create(t),e)}function Lu(t,e=[""],s,n,r=()=>t[0]){const i=s||t;typeof n>"u"&&(n=ex("_fallback",t));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:n,_getTarget:r,override:l=>Lu([l,...t],e,i,n)};return new Proxy(a,{deleteProperty(l,c){return delete l[c],delete l._keys,delete t[0][c],!0},get(l,c){return X0(l,c,()=>wj(c,e,t,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(l,c){return If(l).includes(c)},ownKeys(l){return If(l)},set(l,c,d){const u=l._storage||(l._storage=r());return l[c]=u[c]=d,delete l._keys,!0}})}function Lr(t,e,s,n){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:s,_stack:new Set,_descriptors:J0(t,n),setContext:i=>Lr(t,i,s,n),override:i=>Lr(t.override(i),e,s,n)};return new Proxy(r,{deleteProperty(i,a){return delete i[a],delete t[a],!0},get(i,a,l){return X0(i,a,()=>pj(i,a,l))},getOwnPropertyDescriptor(i,a){return i._descriptors.allKeys?Reflect.has(t,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,a)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,a){return Reflect.has(t,a)},ownKeys(){return Reflect.ownKeys(t)},set(i,a,l){return t[a]=l,delete i[a],!0}})}function J0(t,e={scriptable:!0,indexable:!0}){const{_scriptable:s=e.scriptable,_indexable:n=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:s,indexable:n,isScriptable:ln(s)?s:()=>s,isIndexable:ln(n)?n:()=>n}}const mj=(t,e)=>t?t+Au(e):e,Du=(t,e)=>ve(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function X0(t,e,s){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const n=s();return t[e]=n,n}function pj(t,e,s){const{_proxy:n,_context:r,_subProxy:i,_descriptors:a}=t;let l=n[e];return ln(l)&&a.isScriptable(e)&&(l=gj(e,l,t,s)),$e(l)&&l.length&&(l=xj(e,l,t,a.isIndexable)),Du(e,l)&&(l=Lr(l,r,i&&i[e],a)),l}function gj(t,e,s,n){const{_proxy:r,_context:i,_subProxy:a,_stack:l}=s;if(l.has(t))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+t);l.add(t);let c=e(i,a||n);return l.delete(t),Du(t,c)&&(c=Bu(r._scopes,r,t,c)),c}function xj(t,e,s,n){const{_proxy:r,_context:i,_subProxy:a,_descriptors:l}=s;if(typeof i.index<"u"&&n(t))return e[i.index%e.length];if(ve(e[0])){const c=e,d=r._scopes.filter(u=>u!==c);e=[];for(const u of c){const h=Bu(d,r,t,u);e.push(Lr(h,i,a&&a[t],l))}}return e}function Z0(t,e,s){return ln(t)?t(e,s):t}const yj=(t,e)=>t===!0?e:typeof t=="string"?Gi(e,t):void 0;function vj(t,e,s,n,r){for(const i of e){const a=yj(s,i);if(a){t.add(a);const l=Z0(a._fallback,s,r);if(typeof l<"u"&&l!==s&&l!==n)return l}else if(a===!1&&typeof n<"u"&&s!==n)return null}return!1}function Bu(t,e,s,n){const r=e._rootScopes,i=Z0(e._fallback,s,n),a=[...t,...r],l=new Set;l.add(n);let c=Bf(l,a,s,i||s,n);return c===null||typeof i<"u"&&i!==s&&(c=Bf(l,a,i,c,n),c===null)?!1:Lu(Array.from(l),[""],r,i,()=>bj(e,s,n))}function Bf(t,e,s,n,r){for(;s;)s=vj(t,e,s,n,r);return s}function bj(t,e,s){const n=t._getTarget();e in n||(n[e]={});const r=n[e];return $e(r)&&ve(s)?s:r||{}}function wj(t,e,s,n){let r;for(const i of e)if(r=ex(mj(i,t),s),typeof r<"u")return Du(t,r)?Bu(s,n,t,r):r}function ex(t,e){for(const s of e){if(!s)continue;const n=s[t];if(typeof n<"u")return n}}function If(t){let e=t._keys;return e||(e=t._keys=_j(t._scopes)),e}function _j(t){const e=new Set;for(const s of t)for(const n of Object.keys(s).filter(r=>!r.startsWith("_")))e.add(n);return Array.from(e)}function jj(t,e,s,n){const{iScale:r}=t,{key:i="r"}=this._parsing,a=new Array(n);let l,c,d,u;for(l=0,c=n;l<c;++l)d=l+s,u=e[d],a[l]={r:r.parse(Gi(u,i),d)};return a}const kj=Number.EPSILON||1e-14,Dr=(t,e)=>e<t.length&&!t[e].skip&&t[e],tx=t=>t==="x"?"y":"x";function Nj(t,e,s,n){const r=t.skip?e:t,i=e,a=s.skip?e:s,l=xd(i,r),c=xd(a,i);let d=l/(l+c),u=c/(l+c);d=isNaN(d)?0:d,u=isNaN(u)?0:u;const h=n*d,f=n*u;return{previous:{x:i.x-h*(a.x-r.x),y:i.y-h*(a.y-r.y)},next:{x:i.x+f*(a.x-r.x),y:i.y+f*(a.y-r.y)}}}function Sj(t,e,s){const n=t.length;let r,i,a,l,c,d=Dr(t,0);for(let u=0;u<n-1;++u)if(c=d,d=Dr(t,u+1),!(!c||!d)){if(Ni(e[u],0,kj)){s[u]=s[u+1]=0;continue}r=s[u]/e[u],i=s[u+1]/e[u],l=Math.pow(r,2)+Math.pow(i,2),!(l<=9)&&(a=3/Math.sqrt(l),s[u]=r*a*e[u],s[u+1]=i*a*e[u])}}function Cj(t,e,s="x"){const n=tx(s),r=t.length;let i,a,l,c=Dr(t,0);for(let d=0;d<r;++d){if(a=l,l=c,c=Dr(t,d+1),!l)continue;const u=l[s],h=l[n];a&&(i=(u-a[s])/3,l[`cp1${s}`]=u-i,l[`cp1${n}`]=h-i*e[d]),c&&(i=(c[s]-u)/3,l[`cp2${s}`]=u+i,l[`cp2${n}`]=h+i*e[d])}}function Pj(t,e="x"){const s=tx(e),n=t.length,r=Array(n).fill(0),i=Array(n);let a,l,c,d=Dr(t,0);for(a=0;a<n;++a)if(l=c,c=d,d=Dr(t,a+1),!!c){if(d){const u=d[e]-c[e];r[a]=u!==0?(d[s]-c[s])/u:0}i[a]=l?d?Rr(r[a-1])!==Rr(r[a])?0:(r[a-1]+r[a])/2:r[a-1]:r[a]}Sj(t,r,i),Cj(t,i,e)}function Ma(t,e,s){return Math.max(Math.min(t,s),e)}function Ej(t,e){let s,n,r,i,a,l=Ss(t[0],e);for(s=0,n=t.length;s<n;++s)a=i,i=l,l=s<n-1&&Ss(t[s+1],e),i&&(r=t[s],a&&(r.cp1x=Ma(r.cp1x,e.left,e.right),r.cp1y=Ma(r.cp1y,e.top,e.bottom)),l&&(r.cp2x=Ma(r.cp2x,e.left,e.right),r.cp2y=Ma(r.cp2y,e.top,e.bottom)))}function Tj(t,e,s,n,r){let i,a,l,c;if(e.spanGaps&&(t=t.filter(d=>!d.skip)),e.cubicInterpolationMode==="monotone")Pj(t,r);else{let d=n?t[t.length-1]:t[0];for(i=0,a=t.length;i<a;++i)l=t[i],c=Nj(d,l,t[Math.min(i+1,a-(n?0:1))%a],e.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,d=l}e.capBezierPoints&&Ej(t,s)}function Iu(){return typeof window<"u"&&typeof document<"u"}function $u(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Uo(t,e,s){let n;return typeof t=="string"?(n=parseInt(t,10),t.indexOf("%")!==-1&&(n=n/100*e.parentNode[s])):n=t,n}const xl=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function Aj(t,e){return xl(t).getPropertyValue(e)}const Oj=["top","right","bottom","left"];function Ln(t,e,s){const n={};s=s?"-"+s:"";for(let r=0;r<4;r++){const i=Oj[r];n[i]=parseFloat(t[e+"-"+i+s])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const Rj=(t,e,s)=>(t>0||e>0)&&(!s||!s.shadowRoot);function Mj(t,e){const s=t.touches,n=s&&s.length?s[0]:t,{offsetX:r,offsetY:i}=n;let a=!1,l,c;if(Rj(r,i,t.target))l=r,c=i;else{const d=e.getBoundingClientRect();l=n.clientX-d.left,c=n.clientY-d.top,a=!0}return{x:l,y:c,box:a}}function Nn(t,e){if("native"in t)return t;const{canvas:s,currentDevicePixelRatio:n}=e,r=xl(s),i=r.boxSizing==="border-box",a=Ln(r,"padding"),l=Ln(r,"border","width"),{x:c,y:d,box:u}=Mj(t,s),h=a.left+(u&&l.left),f=a.top+(u&&l.top);let{width:m,height:p}=e;return i&&(m-=a.width+l.width,p-=a.height+l.height),{x:Math.round((c-h)/m*s.width/n),y:Math.round((d-f)/p*s.height/n)}}function Lj(t,e,s){let n,r;if(e===void 0||s===void 0){const i=t&&$u(t);if(!i)e=t.clientWidth,s=t.clientHeight;else{const a=i.getBoundingClientRect(),l=xl(i),c=Ln(l,"border","width"),d=Ln(l,"padding");e=a.width-d.width-c.width,s=a.height-d.height-c.height,n=Uo(l.maxWidth,i,"clientWidth"),r=Uo(l.maxHeight,i,"clientHeight")}}return{width:e,height:s,maxWidth:n||Io,maxHeight:r||Io}}const La=t=>Math.round(t*10)/10;function Dj(t,e,s,n){const r=xl(t),i=Ln(r,"margin"),a=Uo(r.maxWidth,t,"clientWidth")||Io,l=Uo(r.maxHeight,t,"clientHeight")||Io,c=Lj(t,e,s);let{width:d,height:u}=c;if(r.boxSizing==="content-box"){const f=Ln(r,"border","width"),m=Ln(r,"padding");d-=m.width+f.width,u-=m.height+f.height}return d=Math.max(0,d-i.width),u=Math.max(0,n?d/n:u-i.height),d=La(Math.min(d,a,c.maxWidth)),u=La(Math.min(u,l,c.maxHeight)),d&&!u&&(u=La(d/2)),(e!==void 0||s!==void 0)&&n&&c.height&&u>c.height&&(u=c.height,d=La(Math.floor(u*n))),{width:d,height:u}}function $f(t,e,s){const n=e||1,r=Math.floor(t.height*n),i=Math.floor(t.width*n);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const a=t.canvas;return a.style&&(s||!a.style.height&&!a.style.width)&&(a.style.height=`${t.height}px`,a.style.width=`${t.width}px`),t.currentDevicePixelRatio!==n||a.height!==r||a.width!==i?(t.currentDevicePixelRatio=n,a.height=r,a.width=i,t.ctx.setTransform(n,0,0,n,0,0),!0):!1}const Bj=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Iu()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function zf(t,e){const s=Aj(t,e),n=s&&s.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function Sn(t,e,s,n){return{x:t.x+s*(e.x-t.x),y:t.y+s*(e.y-t.y)}}function Ij(t,e,s,n){return{x:t.x+s*(e.x-t.x),y:n==="middle"?s<.5?t.y:e.y:n==="after"?s<1?t.y:e.y:s>0?e.y:t.y}}function $j(t,e,s,n){const r={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},a=Sn(t,r,s),l=Sn(r,i,s),c=Sn(i,e,s),d=Sn(a,l,s),u=Sn(l,c,s);return Sn(d,u,s)}const zj=function(t,e){return{x(s){return t+t+e-s},setWidth(s){e=s},textAlign(s){return s==="center"?s:s==="right"?"left":"right"},xPlus(s,n){return s-n},leftForLtr(s,n){return s-n}}},Fj=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function jr(t,e,s){return t?zj(e,s):Fj()}function sx(t,e){let s,n;(e==="ltr"||e==="rtl")&&(s=t.canvas.style,n=[s.getPropertyValue("direction"),s.getPropertyPriority("direction")],s.setProperty("direction",e,"important"),t.prevTextDirection=n)}function nx(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function rx(t){return t==="angle"?{between:F0,compare:$1,normalize:St}:{between:pr,compare:(e,s)=>e-s,normalize:e=>e}}function Ff({start:t,end:e,count:s,loop:n,style:r}){return{start:t%s,end:e%s,loop:n&&(e-t+1)%s===0,style:r}}function Uj(t,e,s){const{property:n,start:r,end:i}=s,{between:a,normalize:l}=rx(n),c=e.length;let{start:d,end:u,loop:h}=t,f,m;if(h){for(d+=c,u+=c,f=0,m=c;f<m&&a(l(e[d%c][n]),r,i);++f)d--,u--;d%=c,u%=c}return u<d&&(u+=c),{start:d,end:u,loop:h,style:t.style}}function ix(t,e,s){if(!s)return[t];const{property:n,start:r,end:i}=s,a=e.length,{compare:l,between:c,normalize:d}=rx(n),{start:u,end:h,loop:f,style:m}=Uj(t,e,s),p=[];let y=!1,b=null,x,g,v;const w=()=>c(r,v,x)&&l(r,v)!==0,_=()=>l(i,x)===0||c(i,v,x),S=()=>y||w(),P=()=>!y||_();for(let E=u,k=u;E<=h;++E)g=e[E%a],!g.skip&&(x=d(g[n]),x!==v&&(y=c(x,r,i),b===null&&S()&&(b=l(x,r)===0?E:k),b!==null&&P()&&(p.push(Ff({start:b,end:E,loop:f,count:a,style:m})),b=null),k=E,v=x));return b!==null&&p.push(Ff({start:b,end:h,loop:f,count:a,style:m})),p}function ax(t,e){const s=[],n=t.segments;for(let r=0;r<n.length;r++){const i=ix(n[r],t.points,e);i.length&&s.push(...i)}return s}function Wj(t,e,s,n){let r=0,i=e-1;if(s&&!n)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,s&&(i+=r);i>r&&t[i%e].skip;)i--;return i%=e,{start:r,end:i}}function Hj(t,e,s,n){const r=t.length,i=[];let a=e,l=t[e],c;for(c=e+1;c<=s;++c){const d=t[c%r];d.skip||d.stop?l.skip||(n=!1,i.push({start:e%r,end:(c-1)%r,loop:n}),e=a=d.stop?c:null):(a=c,l.skip&&(e=c)),l=d}return a!==null&&i.push({start:e%r,end:a%r,loop:n}),i}function Vj(t,e){const s=t.points,n=t.options.spanGaps,r=s.length;if(!r)return[];const i=!!t._loop,{start:a,end:l}=Wj(s,r,i,n);if(n===!0)return Uf(t,[{start:a,end:l,loop:i}],s,e);const c=l<a?l+r:l,d=!!t._fullLoop&&a===0&&l===r-1;return Uf(t,Hj(s,a,c,d),s,e)}function Uf(t,e,s,n){return!n||!n.setContext||!s?e:qj(t,e,s,n)}function qj(t,e,s,n){const r=t._chart.getContext(),i=Wf(t.options),{_datasetIndex:a,options:{spanGaps:l}}=t,c=s.length,d=[];let u=i,h=e[0].start,f=h;function m(p,y,b,x){const g=l?-1:1;if(p!==y){for(p+=c;s[p%c].skip;)p-=g;for(;s[y%c].skip;)y+=g;p%c!==y%c&&(d.push({start:p%c,end:y%c,loop:b,style:x}),u=x,h=y%c)}}for(const p of e){h=l?h:p.start;let y=s[h%c],b;for(f=h+1;f<=p.end;f++){const x=s[f%c];b=Wf(n.setContext(mn(r,{type:"segment",p0:y,p1:x,p0DataIndex:(f-1)%c,p1DataIndex:f%c,datasetIndex:a}))),Kj(b,u)&&m(h,f-1,p.loop,u),y=x,u=b}h<f-1&&m(h,f-1,p.loop,u)}return d}function Wf(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function Kj(t,e){if(!e)return!1;const s=[],n=function(r,i){return Mu(i)?(s.includes(i)||s.push(i),s.indexOf(i)):i};return JSON.stringify(t,n)!==JSON.stringify(e,n)}function Da(t,e,s){return t.options.clip?t[s]:e[s]}function Yj(t,e){const{xScale:s,yScale:n}=t;return s&&n?{left:Da(s,e,"left"),right:Da(s,e,"right"),top:Da(n,e,"top"),bottom:Da(n,e,"bottom")}:e}function ox(t,e){const s=e._clip;if(s.disabled)return!1;const n=Yj(e,t.chartArea);return{left:s.left===!1?0:n.left-(s.left===!0?0:s.left),right:s.right===!1?t.width:n.right+(s.right===!0?0:s.right),top:s.top===!1?0:n.top-(s.top===!0?0:s.top),bottom:s.bottom===!1?t.height:n.bottom+(s.bottom===!0?0:s.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class Gj{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,s,n,r){const i=s.listeners[r],a=s.duration;i.forEach(l=>l({chart:e,initial:s.initial,numSteps:a,currentStep:Math.min(n-s.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=W0.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let s=0;this._charts.forEach((n,r)=>{if(!n.running||!n.items.length)return;const i=n.items;let a=i.length-1,l=!1,c;for(;a>=0;--a)c=i[a],c._active?(c._total>n.duration&&(n.duration=c._total),c.tick(e),l=!0):(i[a]=i[i.length-1],i.pop());l&&(r.draw(),this._notify(r,n,e,"progress")),i.length||(n.running=!1,this._notify(r,n,e,"complete"),n.initial=!1),s+=i.length}),this._lastDate=e,s===0&&(this._running=!1)}_getAnims(e){const s=this._charts;let n=s.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},s.set(e,n)),n}listen(e,s,n){this._getAnims(e).listeners[s].push(n)}add(e,s){!s||!s.length||this._getAnims(e).items.push(...s)}has(e){return this._getAnims(e).items.length>0}start(e){const s=this._charts.get(e);s&&(s.running=!0,s.start=Date.now(),s.duration=s.items.reduce((n,r)=>Math.max(n,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const s=this._charts.get(e);return!(!s||!s.running||!s.items.length)}stop(e){const s=this._charts.get(e);if(!s||!s.items.length)return;const n=s.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();s.items=[],this._notify(e,s,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var gs=new Gj;const Hf="transparent",Qj={boolean(t,e,s){return s>.5?e:t},color(t,e,s){const n=Mf(t||Hf),r=n.valid&&Mf(e||Hf);return r&&r.valid?r.mix(n,s).hexString():e},number(t,e,s){return t+(e-t)*s}};class Jj{constructor(e,s,n,r){const i=s[n];r=Ra([e.to,r,i,e.from]);const a=Ra([e.from,i,r]);this._active=!0,this._fn=e.fn||Qj[e.type||typeof a],this._easing=Si[e.easing]||Si.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=s,this._prop=n,this._from=a,this._to=r,this._promises=void 0}active(){return this._active}update(e,s,n){if(this._active){this._notify(!1);const r=this._target[this._prop],i=n-this._start,a=this._duration-i;this._start=n,this._duration=Math.floor(Math.max(a,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=Ra([e.to,s,r,e.from]),this._from=Ra([e.from,r,s])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const s=e-this._start,n=this._duration,r=this._prop,i=this._from,a=this._loop,l=this._to;let c;if(this._active=i!==l&&(a||s<n),!this._active){this._target[r]=l,this._notify(!0);return}if(s<0){this._target[r]=i;return}c=s/n%2,c=a&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[r]=this._fn(i,l,c)}wait(){const e=this._promises||(this._promises=[]);return new Promise((s,n)=>{e.push({res:s,rej:n})})}_notify(e){const s=e?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][s]()}}class lx{constructor(e,s){this._chart=e,this._properties=new Map,this.configure(s)}configure(e){if(!ve(e))return;const s=Object.keys(ze.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const i=e[r];if(!ve(i))return;const a={};for(const l of s)a[l]=i[l];($e(i.properties)&&i.properties||[r]).forEach(l=>{(l===r||!n.has(l))&&n.set(l,a)})})}_animateOptions(e,s){const n=s.options,r=Zj(e,n);if(!r)return[];const i=this._createAnimations(r,n);return n.$shared&&Xj(e.options.$animations,n).then(()=>{e.options=n},()=>{}),i}_createAnimations(e,s){const n=this._properties,r=[],i=e.$animations||(e.$animations={}),a=Object.keys(s),l=Date.now();let c;for(c=a.length-1;c>=0;--c){const d=a[c];if(d.charAt(0)==="$")continue;if(d==="options"){r.push(...this._animateOptions(e,s));continue}const u=s[d];let h=i[d];const f=n.get(d);if(h)if(f&&h.active()){h.update(f,u,l);continue}else h.cancel();if(!f||!f.duration){e[d]=u;continue}i[d]=h=new Jj(f,e,d,u),r.push(h)}return r}update(e,s){if(this._properties.size===0){Object.assign(e,s);return}const n=this._createAnimations(e,s);if(n.length)return gs.add(this._chart,n),!0}}function Xj(t,e){const s=[],n=Object.keys(e);for(let r=0;r<n.length;r++){const i=t[n[r]];i&&i.active()&&s.push(i.wait())}return Promise.all(s)}function Zj(t,e){if(!e)return;let s=t.options;if(!s){t.options=e;return}return s.$shared&&(t.options=s=Object.assign({},s,{$shared:!1,$animations:{}})),s}function Vf(t,e){const s=t&&t.options||{},n=s.reverse,r=s.min===void 0?e:0,i=s.max===void 0?e:0;return{start:n?i:r,end:n?r:i}}function ek(t,e,s){if(s===!1)return!1;const n=Vf(t,s),r=Vf(e,s);return{top:r.end,right:n.end,bottom:r.start,left:n.start}}function tk(t){let e,s,n,r;return ve(t)?(e=t.top,s=t.right,n=t.bottom,r=t.left):e=s=n=r=t,{top:e,right:s,bottom:n,left:r,disabled:t===!1}}function cx(t,e){const s=[],n=t._getSortedDatasetMetas(e);let r,i;for(r=0,i=n.length;r<i;++r)s.push(n[r].index);return s}function qf(t,e,s,n={}){const r=t.keys,i=n.mode==="single";let a,l,c,d;if(e===null)return;let u=!1;for(a=0,l=r.length;a<l;++a){if(c=+r[a],c===s){if(u=!0,n.all)continue;break}d=t.values[c],ot(d)&&(i||e===0||Rr(e)===Rr(d))&&(e+=d)}return!u&&!n.all?0:e}function sk(t,e){const{iScale:s,vScale:n}=e,r=s.axis==="x"?"x":"y",i=n.axis==="x"?"x":"y",a=Object.keys(t),l=new Array(a.length);let c,d,u;for(c=0,d=a.length;c<d;++c)u=a[c],l[c]={[r]:u,[i]:t[u]};return l}function nc(t,e){const s=t&&t.options.stacked;return s||s===void 0&&e.stack!==void 0}function nk(t,e,s){return`${t.id}.${e.id}.${s.stack||s.type}`}function rk(t){const{min:e,max:s,minDefined:n,maxDefined:r}=t.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:r?s:Number.POSITIVE_INFINITY}}function ik(t,e,s){const n=t[e]||(t[e]={});return n[s]||(n[s]={})}function Kf(t,e,s,n){for(const r of e.getMatchingVisibleMetas(n).reverse()){const i=t[r.index];if(s&&i>0||!s&&i<0)return r.index}return null}function Yf(t,e){const{chart:s,_cachedMeta:n}=t,r=s._stacks||(s._stacks={}),{iScale:i,vScale:a,index:l}=n,c=i.axis,d=a.axis,u=nk(i,a,n),h=e.length;let f;for(let m=0;m<h;++m){const p=e[m],{[c]:y,[d]:b}=p,x=p._stacks||(p._stacks={});f=x[d]=ik(r,u,y),f[l]=b,f._top=Kf(f,a,!0,n.type),f._bottom=Kf(f,a,!1,n.type);const g=f._visualValues||(f._visualValues={});g[l]=b}}function rc(t,e){const s=t.scales;return Object.keys(s).filter(n=>s[n].axis===e).shift()}function ak(t,e){return mn(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function ok(t,e,s){return mn(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:s,index:e,mode:"default",type:"data"})}function Jr(t,e){const s=t.controller.index,n=t.vScale&&t.vScale.axis;if(n){e=e||t._parsed;for(const r of e){const i=r._stacks;if(!i||i[n]===void 0||i[n][s]===void 0)return;delete i[n][s],i[n]._visualValues!==void 0&&i[n]._visualValues[s]!==void 0&&delete i[n]._visualValues[s]}}}const ic=t=>t==="reset"||t==="none",Gf=(t,e)=>e?t:Object.assign({},t),lk=(t,e,s)=>t&&!e.hidden&&e._stacked&&{keys:cx(s,!0),values:null};class Pi{constructor(e,s){this.chart=e,this._ctx=e.ctx,this.index=s,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=nc(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Jr(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,s=this._cachedMeta,n=this.getDataset(),r=(h,f,m,p)=>h==="x"?f:h==="r"?p:m,i=s.xAxisID=ye(n.xAxisID,rc(e,"x")),a=s.yAxisID=ye(n.yAxisID,rc(e,"y")),l=s.rAxisID=ye(n.rAxisID,rc(e,"r")),c=s.indexAxis,d=s.iAxisID=r(c,i,a,l),u=s.vAxisID=r(c,a,i,l);s.xScale=this.getScaleForId(i),s.yScale=this.getScaleForId(a),s.rScale=this.getScaleForId(l),s.iScale=this.getScaleForId(d),s.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const s=this._cachedMeta;return e===s.iScale?s.vScale:s.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Af(this._data,this),e._stacked&&Jr(e)}_dataCheck(){const e=this.getDataset(),s=e.data||(e.data=[]),n=this._data;if(ve(s)){const r=this._cachedMeta;this._data=sk(s,r)}else if(n!==s){if(n){Af(n,this);const r=this._cachedMeta;Jr(r),r._parsed=[]}s&&Object.isExtensible(s)&&W1(s,this),this._syncList=[],this._data=s}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const s=this._cachedMeta,n=this.getDataset();let r=!1;this._dataCheck();const i=s._stacked;s._stacked=nc(s.vScale,s),s.stack!==n.stack&&(r=!0,Jr(s),s.stack=n.stack),this._resyncElements(e),(r||i!==s._stacked)&&(Yf(this,s._parsed),s._stacked=nc(s.vScale,s))}configure(){const e=this.chart.config,s=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),s,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,s){const{_cachedMeta:n,_data:r}=this,{iScale:i,_stacked:a}=n,l=i.axis;let c=e===0&&s===r.length?!0:n._sorted,d=e>0&&n._parsed[e-1],u,h,f;if(this._parsing===!1)n._parsed=r,n._sorted=!0,f=r;else{$e(r[e])?f=this.parseArrayData(n,r,e,s):ve(r[e])?f=this.parseObjectData(n,r,e,s):f=this.parsePrimitiveData(n,r,e,s);const m=()=>h[l]===null||d&&h[l]<d[l];for(u=0;u<s;++u)n._parsed[u+e]=h=f[u],c&&(m()&&(c=!1),d=h);n._sorted=c}a&&Yf(this,f)}parsePrimitiveData(e,s,n,r){const{iScale:i,vScale:a}=e,l=i.axis,c=a.axis,d=i.getLabels(),u=i===a,h=new Array(r);let f,m,p;for(f=0,m=r;f<m;++f)p=f+n,h[f]={[l]:u||i.parse(d[p],p),[c]:a.parse(s[p],p)};return h}parseArrayData(e,s,n,r){const{xScale:i,yScale:a}=e,l=new Array(r);let c,d,u,h;for(c=0,d=r;c<d;++c)u=c+n,h=s[u],l[c]={x:i.parse(h[0],u),y:a.parse(h[1],u)};return l}parseObjectData(e,s,n,r){const{xScale:i,yScale:a}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=new Array(r);let u,h,f,m;for(u=0,h=r;u<h;++u)f=u+n,m=s[f],d[u]={x:i.parse(Gi(m,l),f),y:a.parse(Gi(m,c),f)};return d}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,s,n){const r=this.chart,i=this._cachedMeta,a=s[e.axis],l={keys:cx(r,!0),values:s._stacks[e.axis]._visualValues};return qf(l,a,i.index,{mode:n})}updateRangeFromParsed(e,s,n,r){const i=n[s.axis];let a=i===null?NaN:i;const l=r&&n._stacks[s.axis];r&&l&&(r.values=l,a=qf(r,i,this._cachedMeta.index)),e.min=Math.min(e.min,a),e.max=Math.max(e.max,a)}getMinMax(e,s){const n=this._cachedMeta,r=n._parsed,i=n._sorted&&e===n.iScale,a=r.length,l=this._getOtherScale(e),c=lk(s,n,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=rk(l);let f,m;function p(){m=r[f];const y=m[l.axis];return!ot(m[e.axis])||u>y||h<y}for(f=0;f<a&&!(!p()&&(this.updateRangeFromParsed(d,e,m,c),i));++f);if(i){for(f=a-1;f>=0;--f)if(!p()){this.updateRangeFromParsed(d,e,m,c);break}}return d}getAllParsedValues(e){const s=this._cachedMeta._parsed,n=[];let r,i,a;for(r=0,i=s.length;r<i;++r)a=s[r][e.axis],ot(a)&&n.push(a);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const s=this._cachedMeta,n=s.iScale,r=s.vScale,i=this.getParsed(e);return{label:n?""+n.getLabelForValue(i[n.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(e){const s=this._cachedMeta;this.update(e||"default"),s._clip=tk(ye(this.options.clip,ek(s.xScale,s.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,s=this.chart,n=this._cachedMeta,r=n.data||[],i=s.chartArea,a=[],l=this._drawStart||0,c=this._drawCount||r.length-l,d=this.options.drawActiveElementsOnTop;let u;for(n.dataset&&n.dataset.draw(e,i,l,c),u=l;u<l+c;++u){const h=r[u];h.hidden||(h.active&&d?a.push(h):h.draw(e,i))}for(u=0;u<a.length;++u)a[u].draw(e,i)}getStyle(e,s){const n=s?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,s,n){const r=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const a=this._cachedMeta.data[e];i=a.$context||(a.$context=ok(this.getContext(),e,a)),i.parsed=this.getParsed(e),i.raw=r.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=ak(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!s,i.mode=n,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,s){return this._resolveElementOptions(this.dataElementType.id,s,e)}_resolveElementOptions(e,s="default",n){const r=s==="active",i=this._cachedDataOpts,a=e+"-"+s,l=i[a],c=this.enableOptionSharing&&Bo(n);if(l)return Gf(l,c);const d=this.chart.config,u=d.datasetElementScopeKeys(this._type,e),h=r?[`${e}Hover`,"hover",e,""]:[e,""],f=d.getOptionScopes(this.getDataset(),u),m=Object.keys(ze.elements[e]),p=()=>this.getContext(n,r,s),y=d.resolveNamedOptions(f,m,p,h);return y.$shared&&(y.$shared=c,i[a]=Object.freeze(Gf(y,c))),y}_resolveAnimations(e,s,n){const r=this.chart,i=this._cachedDataOpts,a=`animation-${s}`,l=i[a];if(l)return l;let c;if(r.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,s),f=u.getOptionScopes(this.getDataset(),h);c=u.createResolver(f,this.getContext(e,n,s))}const d=new lx(r,c&&c.animations);return c&&c._cacheable&&(i[a]=Object.freeze(d)),d}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,s){return!s||ic(e)||this.chart._animationsDisabled}_getSharedOptions(e,s){const n=this.resolveDataElementOptions(e,s),r=this._sharedOptions,i=this.getSharedOptions(n),a=this.includeOptions(s,i)||i!==r;return this.updateSharedOptions(i,s,n),{sharedOptions:i,includeOptions:a}}updateElement(e,s,n,r){ic(r)?Object.assign(e,n):this._resolveAnimations(s,r).update(e,n)}updateSharedOptions(e,s,n){e&&!ic(s)&&this._resolveAnimations(void 0,s).update(e,n)}_setStyle(e,s,n,r){e.active=r;const i=this.getStyle(s,r);this._resolveAnimations(s,n,r).update(e,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(e,s,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,s,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const s=this._data,n=this._cachedMeta.data;for(const[l,c,d]of this._syncList)this[l](c,d);this._syncList=[];const r=n.length,i=s.length,a=Math.min(i,r);a&&this.parse(0,a),i>r?this._insertElements(r,i-r,e):i<r&&this._removeElements(i,r-i)}_insertElements(e,s,n=!0){const r=this._cachedMeta,i=r.data,a=e+s;let l;const c=d=>{for(d.length+=s,l=d.length-1;l>=a;l--)d[l]=d[l-s]};for(c(i),l=e;l<a;++l)i[l]=new this.dataElementType;this._parsing&&c(r._parsed),this.parse(e,s),n&&this.updateElements(i,e,s,"reset")}updateElements(e,s,n,r){}_removeElements(e,s){const n=this._cachedMeta;if(this._parsing){const r=n._parsed.splice(e,s);n._stacked&&Jr(n,r)}n.data.splice(e,s)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[s,n,r]=e;this[s](n,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,s){s&&this._sync(["_removeElements",e,s]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}me(Pi,"defaults",{}),me(Pi,"datasetElementType",null),me(Pi,"dataElementType",null);class so extends Pi{getLabelAndValue(e){const s=this._cachedMeta.vScale,n=this.getParsed(e);return{label:s.getLabels()[e],value:""+s.getLabelForValue(n[s.axis])}}parseObjectData(e,s,n,r){return jj.bind(this)(e,s,n,r)}update(e){const s=this._cachedMeta,n=s.dataset,r=s.data||[],i=s.iScale.getLabels();if(n.points=r,e!=="resize"){const a=this.resolveDatasetElementOptions(e);this.options.showLine||(a.borderWidth=0);const l={_loop:!0,_fullLoop:i.length===r.length,options:a};this.updateElement(n,void 0,l,e)}this.updateElements(r,0,r.length,e)}updateElements(e,s,n,r){const i=this._cachedMeta.rScale,a=r==="reset";for(let l=s;l<s+n;l++){const c=e[l],d=this.resolveDataElementOptions(l,c.active?"active":r),u=i.getPointPositionForValue(l,this.getParsed(l).r),h=a?i.xCenter:u.x,f=a?i.yCenter:u.y,m={x:h,y:f,angle:u.angle,skip:isNaN(h)||isNaN(f),options:d};this.updateElement(c,l,m,r)}}}me(so,"id","radar"),me(so,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),me(so,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});function wn(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class zu{constructor(e){me(this,"options");this.options=e||{}}static override(e){Object.assign(zu.prototype,e)}init(){}formats(){return wn()}parse(){return wn()}format(){return wn()}add(){return wn()}diff(){return wn()}startOf(){return wn()}endOf(){return wn()}}var ck={_date:zu};function dk(t,e,s,n){const{controller:r,data:i,_sorted:a}=t,l=r._cachedMeta.iScale,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(l&&e===l.axis&&e!=="r"&&a&&i.length){const d=l._reversePixels?F1:yd;if(n){if(r._sharedOptions){const u=i[0],h=typeof u.getRange=="function"&&u.getRange(e);if(h){const f=d(i,e,s-h),m=d(i,e,s+h);return{lo:f.lo,hi:m.hi}}}}else{const u=d(i,e,s);if(c){const{vScale:h}=r._cachedMeta,{_parsed:f}=t,m=f.slice(0,u.lo+1).reverse().findIndex(y=>!Ae(y[h.axis]));u.lo-=Math.max(0,m);const p=f.slice(u.hi).findIndex(y=>!Ae(y[h.axis]));u.hi+=Math.max(0,p)}return u}}return{lo:0,hi:i.length-1}}function aa(t,e,s,n,r){const i=t.getSortedVisibleDatasetMetas(),a=s[e];for(let l=0,c=i.length;l<c;++l){const{index:d,data:u}=i[l],{lo:h,hi:f}=dk(i[l],e,a,r);for(let m=h;m<=f;++m){const p=u[m];p.skip||n(p,d,m)}}}function uk(t){const e=t.indexOf("x")!==-1,s=t.indexOf("y")!==-1;return function(n,r){const i=e?Math.abs(n.x-r.x):0,a=s?Math.abs(n.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(a,2))}}function ac(t,e,s,n,r){const i=[];return!r&&!t.isPointInArea(e)||aa(t,s,e,function(l,c,d){!r&&!Ss(l,t.chartArea,0)||l.inRange(e.x,e.y,n)&&i.push({element:l,datasetIndex:c,index:d})},!0),i}function hk(t,e,s,n){let r=[];function i(a,l,c){const{startAngle:d,endAngle:u}=a.getProps(["startAngle","endAngle"],n),{angle:h}=I1(a,{x:e.x,y:e.y});F0(h,d,u)&&r.push({element:a,datasetIndex:l,index:c})}return aa(t,s,e,i),r}function fk(t,e,s,n,r,i){let a=[];const l=uk(s);let c=Number.POSITIVE_INFINITY;function d(u,h,f){const m=u.inRange(e.x,e.y,r);if(n&&!m)return;const p=u.getCenterPoint(r);if(!(!!i||t.isPointInArea(p))&&!m)return;const b=l(e,p);b<c?(a=[{element:u,datasetIndex:h,index:f}],c=b):b===c&&a.push({element:u,datasetIndex:h,index:f})}return aa(t,s,e,d),a}function oc(t,e,s,n,r,i){return!i&&!t.isPointInArea(e)?[]:s==="r"&&!n?hk(t,e,s,r):fk(t,e,s,n,r,i)}function Qf(t,e,s,n,r){const i=[],a=s==="x"?"inXRange":"inYRange";let l=!1;return aa(t,s,e,(c,d,u)=>{c[a]&&c[a](e[s],r)&&(i.push({element:c,datasetIndex:d,index:u}),l=l||c.inRange(e.x,e.y,r))}),n&&!l?[]:i}var mk={evaluateInteractionItems:aa,modes:{index(t,e,s,n){const r=Nn(e,t),i=s.axis||"x",a=s.includeInvisible||!1,l=s.intersect?ac(t,r,i,n,a):oc(t,r,i,!1,n,a),c=[];return l.length?(t.getSortedVisibleDatasetMetas().forEach(d=>{const u=l[0].index,h=d.data[u];h&&!h.skip&&c.push({element:h,datasetIndex:d.index,index:u})}),c):[]},dataset(t,e,s,n){const r=Nn(e,t),i=s.axis||"xy",a=s.includeInvisible||!1;let l=s.intersect?ac(t,r,i,n,a):oc(t,r,i,!1,n,a);if(l.length>0){const c=l[0].datasetIndex,d=t.getDatasetMeta(c).data;l=[];for(let u=0;u<d.length;++u)l.push({element:d[u],datasetIndex:c,index:u})}return l},point(t,e,s,n){const r=Nn(e,t),i=s.axis||"xy",a=s.includeInvisible||!1;return ac(t,r,i,n,a)},nearest(t,e,s,n){const r=Nn(e,t),i=s.axis||"xy",a=s.includeInvisible||!1;return oc(t,r,i,s.intersect,n,a)},x(t,e,s,n){const r=Nn(e,t);return Qf(t,r,"x",s.intersect,n)},y(t,e,s,n){const r=Nn(e,t);return Qf(t,r,"y",s.intersect,n)}}};const dx=["left","top","right","bottom"];function Xr(t,e){return t.filter(s=>s.pos===e)}function Jf(t,e){return t.filter(s=>dx.indexOf(s.pos)===-1&&s.box.axis===e)}function Zr(t,e){return t.sort((s,n)=>{const r=e?n:s,i=e?s:n;return r.weight===i.weight?r.index-i.index:r.weight-i.weight})}function pk(t){const e=[];let s,n,r,i,a,l;for(s=0,n=(t||[]).length;s<n;++s)r=t[s],{position:i,options:{stack:a,stackWeight:l=1}}=r,e.push({index:s,box:r,pos:i,horizontal:r.isHorizontal(),weight:r.weight,stack:a&&i+a,stackWeight:l});return e}function gk(t){const e={};for(const s of t){const{stack:n,pos:r,stackWeight:i}=s;if(!n||!dx.includes(r))continue;const a=e[n]||(e[n]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=i}return e}function xk(t,e){const s=gk(t),{vBoxMaxWidth:n,hBoxMaxHeight:r}=e;let i,a,l;for(i=0,a=t.length;i<a;++i){l=t[i];const{fullSize:c}=l.box,d=s[l.stack],u=d&&l.stackWeight/d.weight;l.horizontal?(l.width=u?u*n:c&&e.availableWidth,l.height=r):(l.width=n,l.height=u?u*r:c&&e.availableHeight)}return s}function yk(t){const e=pk(t),s=Zr(e.filter(d=>d.box.fullSize),!0),n=Zr(Xr(e,"left"),!0),r=Zr(Xr(e,"right")),i=Zr(Xr(e,"top"),!0),a=Zr(Xr(e,"bottom")),l=Jf(e,"x"),c=Jf(e,"y");return{fullSize:s,leftAndTop:n.concat(i),rightAndBottom:r.concat(c).concat(a).concat(l),chartArea:Xr(e,"chartArea"),vertical:n.concat(r).concat(c),horizontal:i.concat(a).concat(l)}}function Xf(t,e,s,n){return Math.max(t[s],e[s])+Math.max(t[n],e[n])}function ux(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function vk(t,e,s,n){const{pos:r,box:i}=s,a=t.maxPadding;if(!ve(r)){s.size&&(t[r]-=s.size);const h=n[s.stack]||{size:0,count:1};h.size=Math.max(h.size,s.horizontal?i.height:i.width),s.size=h.size/h.count,t[r]+=s.size}i.getPadding&&ux(a,i.getPadding());const l=Math.max(0,e.outerWidth-Xf(a,t,"left","right")),c=Math.max(0,e.outerHeight-Xf(a,t,"top","bottom")),d=l!==t.w,u=c!==t.h;return t.w=l,t.h=c,s.horizontal?{same:d,other:u}:{same:u,other:d}}function bk(t){const e=t.maxPadding;function s(n){const r=Math.max(e[n]-t[n],0);return t[n]+=r,r}t.y+=s("top"),t.x+=s("left"),s("right"),s("bottom")}function wk(t,e){const s=e.maxPadding;function n(r){const i={left:0,top:0,right:0,bottom:0};return r.forEach(a=>{i[a]=Math.max(e[a],s[a])}),i}return n(t?["left","right"]:["top","bottom"])}function ci(t,e,s,n){const r=[];let i,a,l,c,d,u;for(i=0,a=t.length,d=0;i<a;++i){l=t[i],c=l.box,c.update(l.width||e.w,l.height||e.h,wk(l.horizontal,e));const{same:h,other:f}=vk(e,s,l,n);d|=h&&r.length,u=u||f,c.fullSize||r.push(l)}return d&&ci(r,e,s,n)||u}function Ba(t,e,s,n,r){t.top=s,t.left=e,t.right=e+n,t.bottom=s+r,t.width=n,t.height=r}function Zf(t,e,s,n){const r=s.padding;let{x:i,y:a}=e;for(const l of t){const c=l.box,d=n[l.stack]||{count:1,placed:0,weight:1},u=l.stackWeight/d.weight||1;if(l.horizontal){const h=e.w*u,f=d.size||c.height;Bo(d.start)&&(a=d.start),c.fullSize?Ba(c,r.left,a,s.outerWidth-r.right-r.left,f):Ba(c,e.left+d.placed,a,h,f),d.start=a,d.placed+=h,a=c.bottom}else{const h=e.h*u,f=d.size||c.width;Bo(d.start)&&(i=d.start),c.fullSize?Ba(c,i,r.top,f,s.outerHeight-r.bottom-r.top):Ba(c,i,e.top+d.placed,f,h),d.start=i,d.placed+=h,i=c.right}}e.x=i,e.y=a}var qs={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(s){e.draw(s)}}]},t.boxes.push(e)},removeBox(t,e){const s=t.boxes?t.boxes.indexOf(e):-1;s!==-1&&t.boxes.splice(s,1)},configure(t,e,s){e.fullSize=s.fullSize,e.position=s.position,e.weight=s.weight},update(t,e,s,n){if(!t)return;const r=ht(t.options.layout.padding),i=Math.max(e-r.width,0),a=Math.max(s-r.height,0),l=yk(t.boxes),c=l.vertical,d=l.horizontal;_e(t.boxes,y=>{typeof y.beforeLayout=="function"&&y.beforeLayout()});const u=c.reduce((y,b)=>b.box.options&&b.box.options.display===!1?y:y+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:s,padding:r,availableWidth:i,availableHeight:a,vBoxMaxWidth:i/2/u,hBoxMaxHeight:a/2}),f=Object.assign({},r);ux(f,ht(n));const m=Object.assign({maxPadding:f,w:i,h:a,x:r.left,y:r.top},r),p=xk(c.concat(d),h);ci(l.fullSize,m,h,p),ci(c,m,h,p),ci(d,m,h,p)&&ci(c,m,h,p),bk(m),Zf(l.leftAndTop,m,h,p),m.x+=m.w,m.y+=m.h,Zf(l.rightAndBottom,m,h,p),t.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},_e(l.chartArea,y=>{const b=y.box;Object.assign(b,t.chartArea),b.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class hx{acquireContext(e,s){}releaseContext(e){return!1}addEventListener(e,s,n){}removeEventListener(e,s,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,s,n,r){return s=Math.max(0,s||e.width),n=n||e.height,{width:s,height:Math.max(0,r?Math.floor(s/r):n)}}isAttached(e){return!0}updateConfig(e){}}class _k extends hx{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const no="$chartjs",jk={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},em=t=>t===null||t==="";function kk(t,e){const s=t.style,n=t.getAttribute("height"),r=t.getAttribute("width");if(t[no]={initial:{height:n,width:r,style:{display:s.display,height:s.height,width:s.width}}},s.display=s.display||"block",s.boxSizing=s.boxSizing||"border-box",em(r)){const i=zf(t,"width");i!==void 0&&(t.width=i)}if(em(n))if(t.style.height==="")t.height=t.width/(e||2);else{const i=zf(t,"height");i!==void 0&&(t.height=i)}return t}const fx=Bj?{passive:!0}:!1;function Nk(t,e,s){t&&t.addEventListener(e,s,fx)}function Sk(t,e,s){t&&t.canvas&&t.canvas.removeEventListener(e,s,fx)}function Ck(t,e){const s=jk[t.type]||t.type,{x:n,y:r}=Nn(t,e);return{type:s,chart:e,native:t,x:n!==void 0?n:null,y:r!==void 0?r:null}}function Wo(t,e){for(const s of t)if(s===e||s.contains(e))return!0}function Pk(t,e,s){const n=t.canvas,r=new MutationObserver(i=>{let a=!1;for(const l of i)a=a||Wo(l.addedNodes,n),a=a&&!Wo(l.removedNodes,n);a&&s()});return r.observe(document,{childList:!0,subtree:!0}),r}function Ek(t,e,s){const n=t.canvas,r=new MutationObserver(i=>{let a=!1;for(const l of i)a=a||Wo(l.removedNodes,n),a=a&&!Wo(l.addedNodes,n);a&&s()});return r.observe(document,{childList:!0,subtree:!0}),r}const Qi=new Map;let tm=0;function mx(){const t=window.devicePixelRatio;t!==tm&&(tm=t,Qi.forEach((e,s)=>{s.currentDevicePixelRatio!==t&&e()}))}function Tk(t,e){Qi.size||window.addEventListener("resize",mx),Qi.set(t,e)}function Ak(t){Qi.delete(t),Qi.size||window.removeEventListener("resize",mx)}function Ok(t,e,s){const n=t.canvas,r=n&&$u(n);if(!r)return;const i=H0((l,c)=>{const d=r.clientWidth;s(l,c),d<r.clientWidth&&s()},window),a=new ResizeObserver(l=>{const c=l[0],d=c.contentRect.width,u=c.contentRect.height;d===0&&u===0||i(d,u)});return a.observe(r),Tk(t,i),a}function lc(t,e,s){s&&s.disconnect(),e==="resize"&&Ak(t)}function Rk(t,e,s){const n=t.canvas,r=H0(i=>{t.ctx!==null&&s(Ck(i,t))},t);return Nk(n,e,r),r}class Mk extends hx{acquireContext(e,s){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(kk(e,s),n):null}releaseContext(e){const s=e.canvas;if(!s[no])return!1;const n=s[no].initial;["height","width"].forEach(i=>{const a=n[i];Ae(a)?s.removeAttribute(i):s.setAttribute(i,a)});const r=n.style||{};return Object.keys(r).forEach(i=>{s.style[i]=r[i]}),s.width=s.width,delete s[no],!0}addEventListener(e,s,n){this.removeEventListener(e,s);const r=e.$proxies||(e.$proxies={}),a={attach:Pk,detach:Ek,resize:Ok}[s]||Rk;r[s]=a(e,s,n)}removeEventListener(e,s){const n=e.$proxies||(e.$proxies={}),r=n[s];if(!r)return;({attach:lc,detach:lc,resize:lc}[s]||Sk)(e,s,r),n[s]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,s,n,r){return Dj(e,s,n,r)}isAttached(e){const s=e&&$u(e);return!!(s&&s.isConnected)}}function Lk(t){return!Iu()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?_k:Mk}class cn{constructor(){me(this,"x");me(this,"y");me(this,"active",!1);me(this,"options");me(this,"$animations")}tooltipPosition(e){const{x:s,y:n}=this.getProps(["x","y"],e);return{x:s,y:n}}hasValue(){return $o(this.x)&&$o(this.y)}getProps(e,s){const n=this.$animations;if(!s||!n)return this;const r={};return e.forEach(i=>{r[i]=n[i]&&n[i].active()?n[i]._to:this[i]}),r}}me(cn,"defaults",{}),me(cn,"defaultRoutes");function Dk(t,e){const s=t.options.ticks,n=Bk(t),r=Math.min(s.maxTicksLimit||n,n),i=s.major.enabled?$k(e):[],a=i.length,l=i[0],c=i[a-1],d=[];if(a>r)return zk(e,d,i,a/r),d;const u=Ik(i,e,r);if(a>0){let h,f;const m=a>1?Math.round((c-l)/(a-1)):null;for(Ia(e,d,u,Ae(m)?0:l-m,l),h=0,f=a-1;h<f;h++)Ia(e,d,u,i[h],i[h+1]);return Ia(e,d,u,c,Ae(m)?e.length:c+m),d}return Ia(e,d,u),d}function Bk(t){const e=t.options.offset,s=t._tickSize(),n=t._length/s+(e?0:1),r=t._maxLength/s;return Math.floor(Math.min(n,r))}function Ik(t,e,s){const n=Fk(t),r=e.length/s;if(!n)return Math.max(r,1);const i=M1(n);for(let a=0,l=i.length-1;a<l;a++){const c=i[a];if(c>r)return c}return Math.max(r,1)}function $k(t){const e=[];let s,n;for(s=0,n=t.length;s<n;s++)t[s].major&&e.push(s);return e}function zk(t,e,s,n){let r=0,i=s[0],a;for(n=Math.ceil(n),a=0;a<t.length;a++)a===i&&(e.push(t[a]),r++,i=s[r*n])}function Ia(t,e,s,n,r){const i=ye(n,0),a=Math.min(ye(r,t.length),t.length);let l=0,c,d,u;for(s=Math.ceil(s),r&&(c=r-n,s=c/Math.floor(c/s)),u=i;u<0;)l++,u=Math.round(i+l*s);for(d=Math.max(i,0);d<a;d++)d===u&&(e.push(t[d]),l++,u=Math.round(i+l*s))}function Fk(t){const e=t.length;let s,n;if(e<2)return!1;for(n=t[0],s=1;s<e;++s)if(t[s]-t[s-1]!==n)return!1;return n}const Uk=t=>t==="left"?"right":t==="right"?"left":t,sm=(t,e,s)=>e==="top"||e==="left"?t[e]+s:t[e]-s,nm=(t,e)=>Math.min(e||t,t);function rm(t,e){const s=[],n=t.length/e,r=t.length;let i=0;for(;i<r;i+=n)s.push(t[Math.floor(i)]);return s}function Wk(t,e,s){const n=t.ticks.length,r=Math.min(e,n-1),i=t._startPixel,a=t._endPixel,l=1e-6;let c=t.getPixelForTick(r),d;if(!(s&&(n===1?d=Math.max(c-i,a-c):e===0?d=(t.getPixelForTick(1)-c)/2:d=(c-t.getPixelForTick(r-1))/2,c+=r<e?d:-d,c<i-l||c>a+l)))return c}function Hk(t,e){_e(t,s=>{const n=s.gc,r=n.length/2;let i;if(r>e){for(i=0;i<r;++i)delete s.data[n[i]];n.splice(0,r)}})}function ei(t){return t.drawTicks?t.tickLength:0}function im(t,e){if(!t.display)return 0;const s=Ze(t.font,e),n=ht(t.padding);return($e(t.text)?t.text.length:1)*s.lineHeight+n.height}function Vk(t,e){return mn(t,{scale:e,type:"scale"})}function qk(t,e,s){return mn(t,{tick:s,index:e,type:"tick"})}function Kk(t,e,s){let n=V0(t);return(s&&e!=="right"||!s&&e==="right")&&(n=Uk(n)),n}function Yk(t,e,s,n){const{top:r,left:i,bottom:a,right:l,chart:c}=t,{chartArea:d,scales:u}=c;let h=0,f,m,p;const y=a-r,b=l-i;if(t.isHorizontal()){if(m=kt(n,i,l),ve(s)){const x=Object.keys(s)[0],g=s[x];p=u[x].getPixelForValue(g)+y-e}else s==="center"?p=(d.bottom+d.top)/2+y-e:p=sm(t,s,e);f=l-i}else{if(ve(s)){const x=Object.keys(s)[0],g=s[x];m=u[x].getPixelForValue(g)-b+e}else s==="center"?m=(d.left+d.right)/2-b+e:m=sm(t,s,e);p=kt(n,a,r),h=s==="left"?-Et:Et}return{titleX:m,titleY:p,maxWidth:f,rotation:h}}class oa extends cn{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,s){return e}getUserBounds(){let{_userMin:e,_userMax:s,_suggestedMin:n,_suggestedMax:r}=this;return e=is(e,Number.POSITIVE_INFINITY),s=is(s,Number.NEGATIVE_INFINITY),n=is(n,Number.POSITIVE_INFINITY),r=is(r,Number.NEGATIVE_INFINITY),{min:is(e,n),max:is(s,r),minDefined:ot(e),maxDefined:ot(s)}}getMinMax(e){let{min:s,max:n,minDefined:r,maxDefined:i}=this.getUserBounds(),a;if(r&&i)return{min:s,max:n};const l=this.getMatchingVisibleMetas();for(let c=0,d=l.length;c<d;++c)a=l[c].controller.getMinMax(this,e),r||(s=Math.min(s,a.min)),i||(n=Math.max(n,a.max));return s=i&&s>n?n:s,n=r&&s>n?s:n,{min:is(s,is(n,s)),max:is(n,is(s,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Pe(this.options.beforeUpdate,[this])}update(e,s,n){const{beginAtZero:r,grace:i,ticks:a}=this.options,l=a.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=s,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=fj(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?rm(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=Dk(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,s,n;this.isHorizontal()?(s=this.left,n=this.right):(s=this.top,n=this.bottom,e=!e),this._startPixel=s,this._endPixel=n,this._reversePixels=e,this._length=n-s,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Pe(this.options.afterUpdate,[this])}beforeSetDimensions(){Pe(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Pe(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Pe(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Pe(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const s=this.options.ticks;let n,r,i;for(n=0,r=e.length;n<r;n++)i=e[n],i.label=Pe(s.callback,[i.value,n,e],this)}afterTickToLabelConversion(){Pe(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Pe(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,s=e.ticks,n=nm(this.ticks.length,e.ticks.maxTicksLimit),r=s.minRotation||0,i=s.maxRotation;let a=r,l,c,d;if(!this._isVisible()||!s.display||r>=i||n<=1||!this.isHorizontal()){this.labelRotation=r;return}const u=this._getLabelSizes(),h=u.widest.width,f=u.highest.height,m=Ns(this.chart.width-h,0,this.maxWidth);l=e.offset?this.maxWidth/n:m/(n-1),h+6>l&&(l=m/(n-(e.offset?.5:1)),c=this.maxHeight-ei(e.grid)-s.padding-im(e.title,this.chart.options.font),d=Math.sqrt(h*h+f*f),a=Ou(Math.min(Math.asin(Ns((u.highest.height+6)/l,-1,1)),Math.asin(Ns(c/d,-1,1))-Math.asin(Ns(f/d,-1,1)))),a=Math.max(r,Math.min(i,a))),this.labelRotation=a}afterCalculateLabelRotation(){Pe(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Pe(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:s,options:{ticks:n,title:r,grid:i}}=this,a=this._isVisible(),l=this.isHorizontal();if(a){const c=im(r,s.options.font);if(l?(e.width=this.maxWidth,e.height=ei(i)+c):(e.height=this.maxHeight,e.width=ei(i)+c),n.display&&this.ticks.length){const{first:d,last:u,widest:h,highest:f}=this._getLabelSizes(),m=n.padding*2,p=An(this.labelRotation),y=Math.cos(p),b=Math.sin(p);if(l){const x=n.mirror?0:b*h.width+y*f.height;e.height=Math.min(this.maxHeight,e.height+x+m)}else{const x=n.mirror?0:y*h.width+b*f.height;e.width=Math.min(this.maxWidth,e.width+x+m)}this._calculatePadding(d,u,b,y)}}this._handleMargins(),l?(this.width=this._length=s.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=s.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,s,n,r){const{ticks:{align:i,padding:a},position:l}=this.options,c=this.labelRotation!==0,d=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,m=0;c?d?(f=r*e.width,m=n*s.height):(f=n*e.height,m=r*s.width):i==="start"?m=s.width:i==="end"?f=e.width:i!=="inner"&&(f=e.width/2,m=s.width/2),this.paddingLeft=Math.max((f-u+a)*this.width/(this.width-u),0),this.paddingRight=Math.max((m-h+a)*this.width/(this.width-h),0)}else{let u=s.height/2,h=e.height/2;i==="start"?(u=0,h=e.height):i==="end"&&(u=s.height,h=0),this.paddingTop=u+a,this.paddingBottom=h+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Pe(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:s}=this.options;return s==="top"||s==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let s,n;for(s=0,n=e.length;s<n;s++)Ae(e[s].label)&&(e.splice(s,1),n--,s--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const s=this.options.ticks.sampleSize;let n=this.ticks;s<n.length&&(n=rm(n,s)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,s,n){const{ctx:r,_longestTextCache:i}=this,a=[],l=[],c=Math.floor(s/nm(s,n));let d=0,u=0,h,f,m,p,y,b,x,g,v,w,_;for(h=0;h<s;h+=c){if(p=e[h].label,y=this._resolveTickFontOptions(h),r.font=b=y.string,x=i[b]=i[b]||{data:{},gc:[]},g=y.lineHeight,v=w=0,!Ae(p)&&!$e(p))v=zo(r,x.data,x.gc,v,p),w=g;else if($e(p))for(f=0,m=p.length;f<m;++f)_=p[f],!Ae(_)&&!$e(_)&&(v=zo(r,x.data,x.gc,v,_),w+=g);a.push(v),l.push(w),d=Math.max(v,d),u=Math.max(w,u)}Hk(i,s);const S=a.indexOf(d),P=l.indexOf(u),E=k=>({width:a[k]||0,height:l[k]||0});return{first:E(0),last:E(s-1),widest:E(S),highest:E(P),widths:a,heights:l}}getLabelForValue(e){return e}getPixelForValue(e,s){return NaN}getValueForPixel(e){}getPixelForTick(e){const s=this.ticks;return e<0||e>s.length-1?null:this.getPixelForValue(s[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const s=this._startPixel+e*this._length;return z1(this._alignToPixels?bn(this.chart,s,0):s)}getDecimalForPixel(e){const s=(e-this._startPixel)/this._length;return this._reversePixels?1-s:s}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:s}=this;return e<0&&s<0?s:e>0&&s>0?e:0}getContext(e){const s=this.ticks||[];if(e>=0&&e<s.length){const n=s[e];return n.$context||(n.$context=qk(this.getContext(),e,n))}return this.$context||(this.$context=Vk(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,s=An(this.labelRotation),n=Math.abs(Math.cos(s)),r=Math.abs(Math.sin(s)),i=this._getLabelSizes(),a=e.autoSkipPadding||0,l=i?i.widest.width+a:0,c=i?i.highest.height+a:0;return this.isHorizontal()?c*n>l*r?l/n:c/r:c*r<l*n?c/n:l/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const s=this.axis,n=this.chart,r=this.options,{grid:i,position:a,border:l}=r,c=i.offset,d=this.isHorizontal(),h=this.ticks.length+(c?1:0),f=ei(i),m=[],p=l.setContext(this.getContext()),y=p.display?p.width:0,b=y/2,x=function(z){return bn(n,z,y)};let g,v,w,_,S,P,E,k,T,R,$,G;if(a==="top")g=x(this.bottom),P=this.bottom-f,k=g-b,R=x(e.top)+b,G=e.bottom;else if(a==="bottom")g=x(this.top),R=e.top,G=x(e.bottom)-b,P=g+b,k=this.top+f;else if(a==="left")g=x(this.right),S=this.right-f,E=g-b,T=x(e.left)+b,$=e.right;else if(a==="right")g=x(this.left),T=e.left,$=x(e.right)-b,S=g+b,E=this.left+f;else if(s==="x"){if(a==="center")g=x((e.top+e.bottom)/2+.5);else if(ve(a)){const z=Object.keys(a)[0],V=a[z];g=x(this.chart.scales[z].getPixelForValue(V))}R=e.top,G=e.bottom,P=g+b,k=P+f}else if(s==="y"){if(a==="center")g=x((e.left+e.right)/2);else if(ve(a)){const z=Object.keys(a)[0],V=a[z];g=x(this.chart.scales[z].getPixelForValue(V))}S=g-b,E=S-f,T=e.left,$=e.right}const le=ye(r.ticks.maxTicksLimit,h),O=Math.max(1,Math.ceil(h/le));for(v=0;v<h;v+=O){const z=this.getContext(v),V=i.setContext(z),W=l.setContext(z),K=V.lineWidth,J=V.color,re=W.dash||[],ie=W.dashOffset,M=V.tickWidth,ee=V.tickColor,se=V.tickBorderDash||[],ae=V.tickBorderDashOffset;w=Wk(this,v,c),w!==void 0&&(_=bn(n,w,K),d?S=E=T=$=_:P=k=R=G=_,m.push({tx1:S,ty1:P,tx2:E,ty2:k,x1:T,y1:R,x2:$,y2:G,width:K,color:J,borderDash:re,borderDashOffset:ie,tickWidth:M,tickColor:ee,tickBorderDash:se,tickBorderDashOffset:ae}))}return this._ticksLength=h,this._borderValue=g,m}_computeLabelItems(e){const s=this.axis,n=this.options,{position:r,ticks:i}=n,a=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:d,padding:u,mirror:h}=i,f=ei(n.grid),m=f+u,p=h?-u:m,y=-An(this.labelRotation),b=[];let x,g,v,w,_,S,P,E,k,T,R,$,G="middle";if(r==="top")S=this.bottom-p,P=this._getXAxisLabelAlignment();else if(r==="bottom")S=this.top+p,P=this._getXAxisLabelAlignment();else if(r==="left"){const O=this._getYAxisLabelAlignment(f);P=O.textAlign,_=O.x}else if(r==="right"){const O=this._getYAxisLabelAlignment(f);P=O.textAlign,_=O.x}else if(s==="x"){if(r==="center")S=(e.top+e.bottom)/2+m;else if(ve(r)){const O=Object.keys(r)[0],z=r[O];S=this.chart.scales[O].getPixelForValue(z)+m}P=this._getXAxisLabelAlignment()}else if(s==="y"){if(r==="center")_=(e.left+e.right)/2-m;else if(ve(r)){const O=Object.keys(r)[0],z=r[O];_=this.chart.scales[O].getPixelForValue(z)}P=this._getYAxisLabelAlignment(f).textAlign}s==="y"&&(c==="start"?G="top":c==="end"&&(G="bottom"));const le=this._getLabelSizes();for(x=0,g=l.length;x<g;++x){v=l[x],w=v.label;const O=i.setContext(this.getContext(x));E=this.getPixelForTick(x)+i.labelOffset,k=this._resolveTickFontOptions(x),T=k.lineHeight,R=$e(w)?w.length:1;const z=R/2,V=O.color,W=O.textStrokeColor,K=O.textStrokeWidth;let J=P;a?(_=E,P==="inner"&&(x===g-1?J=this.options.reverse?"left":"right":x===0?J=this.options.reverse?"right":"left":J="center"),r==="top"?d==="near"||y!==0?$=-R*T+T/2:d==="center"?$=-le.highest.height/2-z*T+T:$=-le.highest.height+T/2:d==="near"||y!==0?$=T/2:d==="center"?$=le.highest.height/2-z*T:$=le.highest.height-R*T,h&&($*=-1),y!==0&&!O.showLabelBackdrop&&(_+=T/2*Math.sin(y))):(S=E,$=(1-R)*T/2);let re;if(O.showLabelBackdrop){const ie=ht(O.backdropPadding),M=le.heights[x],ee=le.widths[x];let se=$-ie.top,ae=0-ie.left;switch(G){case"middle":se-=M/2;break;case"bottom":se-=M;break}switch(P){case"center":ae-=ee/2;break;case"right":ae-=ee;break;case"inner":x===g-1?ae-=ee:x>0&&(ae-=ee/2);break}re={left:ae,top:se,width:ee+ie.width,height:M+ie.height,color:O.backdropColor}}b.push({label:w,font:k,textOffset:$,options:{rotation:y,color:V,strokeColor:W,strokeWidth:K,textAlign:J,textBaseline:G,translation:[_,S],backdrop:re}})}return b}_getXAxisLabelAlignment(){const{position:e,ticks:s}=this.options;if(-An(this.labelRotation))return e==="top"?"left":"right";let r="center";return s.align==="start"?r="left":s.align==="end"?r="right":s.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:s,ticks:{crossAlign:n,mirror:r,padding:i}}=this.options,a=this._getLabelSizes(),l=e+i,c=a.widest.width;let d,u;return s==="left"?r?(u=this.right+i,n==="near"?d="left":n==="center"?(d="center",u+=c/2):(d="right",u+=c)):(u=this.right-l,n==="near"?d="right":n==="center"?(d="center",u-=c/2):(d="left",u=this.left)):s==="right"?r?(u=this.left+i,n==="near"?d="right":n==="center"?(d="center",u-=c/2):(d="left",u-=c)):(u=this.left+l,n==="near"?d="left":n==="center"?(d="center",u+=c/2):(d="right",u=this.right)):d="right",{textAlign:d,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,s=this.options.position;if(s==="left"||s==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(s==="top"||s==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:s},left:n,top:r,width:i,height:a}=this;s&&(e.save(),e.fillStyle=s,e.fillRect(n,r,i,a),e.restore())}getLineWidthForValue(e){const s=this.options.grid;if(!this._isVisible()||!s.display)return 0;const r=this.ticks.findIndex(i=>i.value===e);return r>=0?s.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const s=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,a;const l=(c,d,u)=>{!u.width||!u.color||(n.save(),n.lineWidth=u.width,n.strokeStyle=u.color,n.setLineDash(u.borderDash||[]),n.lineDashOffset=u.borderDashOffset,n.beginPath(),n.moveTo(c.x,c.y),n.lineTo(d.x,d.y),n.stroke(),n.restore())};if(s.display)for(i=0,a=r.length;i<a;++i){const c=r[i];s.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),s.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:s,options:{border:n,grid:r}}=this,i=n.setContext(this.getContext()),a=n.display?i.width:0;if(!a)return;const l=r.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let d,u,h,f;this.isHorizontal()?(d=bn(e,this.left,a)-a/2,u=bn(e,this.right,l)+l/2,h=f=c):(h=bn(e,this.top,a)-a/2,f=bn(e,this.bottom,l)+l/2,d=u=c),s.save(),s.lineWidth=i.width,s.strokeStyle=i.color,s.beginPath(),s.moveTo(d,h),s.lineTo(u,f),s.stroke(),s.restore()}drawLabels(e){if(!this.options.ticks.display)return;const n=this.ctx,r=this._computeLabelArea();r&&pl(n,r);const i=this.getLabelItems(e);for(const a of i){const l=a.options,c=a.font,d=a.label,u=a.textOffset;Mr(n,d,0,u,c,l)}r&&gl(n)}drawTitle(){const{ctx:e,options:{position:s,title:n,reverse:r}}=this;if(!n.display)return;const i=Ze(n.font),a=ht(n.padding),l=n.align;let c=i.lineHeight/2;s==="bottom"||s==="center"||ve(s)?(c+=a.bottom,$e(n.text)&&(c+=i.lineHeight*(n.text.length-1))):c+=a.top;const{titleX:d,titleY:u,maxWidth:h,rotation:f}=Yk(this,c,s,l);Mr(e,n.text,0,0,i,{color:n.color,maxWidth:h,rotation:f,textAlign:Kk(l,s,r),textBaseline:"middle",translation:[d,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,s=e.ticks&&e.ticks.z||0,n=ye(e.grid&&e.grid.z,-1),r=ye(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==oa.prototype.draw?[{z:s,draw:i=>{this.draw(i)}}]:[{z:n,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:s,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const s=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let i,a;for(i=0,a=s.length;i<a;++i){const l=s[i];l[n]===this.id&&(!e||l.type===e)&&r.push(l)}return r}_resolveTickFontOptions(e){const s=this.options.ticks.setContext(this.getContext(e));return Ze(s.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class $a{constructor(e,s,n){this.type=e,this.scope=s,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const s=Object.getPrototypeOf(e);let n;Jk(s)&&(n=this.register(s));const r=this.items,i=e.id,a=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in r||(r[i]=e,Gk(e,a,n),this.override&&ze.override(e.id,e.overrides)),a}get(e){return this.items[e]}unregister(e){const s=this.items,n=e.id,r=this.scope;n in s&&delete s[n],r&&n in ze[r]&&(delete ze[r][n],this.override&&delete Wn[n])}}function Gk(t,e,s){const n=Yi(Object.create(null),[s?ze.get(s):{},ze.get(e),t.defaults]);ze.set(e,n),t.defaultRoutes&&Qk(e,t.defaultRoutes),t.descriptors&&ze.describe(e,t.descriptors)}function Qk(t,e){Object.keys(e).forEach(s=>{const n=s.split("."),r=n.pop(),i=[t].concat(n).join("."),a=e[s].split("."),l=a.pop(),c=a.join(".");ze.route(i,r,c,l)})}function Jk(t){return"id"in t&&"defaults"in t}class Xk{constructor(){this.controllers=new $a(Pi,"datasets",!0),this.elements=new $a(cn,"elements"),this.plugins=new $a(Object,"plugins"),this.scales=new $a(oa,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,s,n){[...s].forEach(r=>{const i=n||this._getRegistryForType(r);n||i.isForType(r)||i===this.plugins&&r.id?this._exec(e,i,r):_e(r,a=>{const l=n||this._getRegistryForType(a);this._exec(e,l,a)})})}_exec(e,s,n){const r=Au(e);Pe(n["before"+r],[],n),s[e](n),Pe(n["after"+r],[],n)}_getRegistryForType(e){for(let s=0;s<this._typedRegistries.length;s++){const n=this._typedRegistries[s];if(n.isForType(e))return n}return this.plugins}_get(e,s,n){const r=s.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+n+".");return r}}var ls=new Xk;class Zk{constructor(){this._init=[]}notify(e,s,n,r){s==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=r?this._descriptors(e).filter(r):this._descriptors(e),a=this._notify(i,e,s,n);return s==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),a}_notify(e,s,n,r){r=r||{};for(const i of e){const a=i.plugin,l=a[n],c=[s,r,i.options];if(Pe(l,c,a)===!1&&r.cancelable)return!1}return!0}invalidate(){Ae(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const s=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),s}_createDescriptors(e,s){const n=e&&e.config,r=ye(n.options&&n.options.plugins,{}),i=e2(n);return r===!1&&!s?[]:s2(e,i,r,s)}_notifyStateChanges(e){const s=this._oldCache||[],n=this._cache,r=(i,a)=>i.filter(l=>!a.some(c=>l.plugin.id===c.plugin.id));this._notify(r(s,n),e,"stop"),this._notify(r(n,s),e,"start")}}function e2(t){const e={},s=[],n=Object.keys(ls.plugins.items);for(let i=0;i<n.length;i++)s.push(ls.getPlugin(n[i]));const r=t.plugins||[];for(let i=0;i<r.length;i++){const a=r[i];s.indexOf(a)===-1&&(s.push(a),e[a.id]=!0)}return{plugins:s,localIds:e}}function t2(t,e){return!e&&t===!1?null:t===!0?{}:t}function s2(t,{plugins:e,localIds:s},n,r){const i=[],a=t.getContext();for(const l of e){const c=l.id,d=t2(n[c],r);d!==null&&i.push({plugin:l,options:n2(t.config,{plugin:l,local:s[c]},d,a)})}return i}function n2(t,{plugin:e,local:s},n,r){const i=t.pluginScopeKeys(e),a=t.getOptionScopes(n,i);return s&&e.defaults&&a.push(e.defaults),t.createResolver(a,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function wd(t,e){const s=ze.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||s.indexAxis||"x"}function r2(t,e){let s=t;return t==="_index_"?s=e:t==="_value_"&&(s=e==="x"?"y":"x"),s}function i2(t,e){return t===e?"_index_":"_value_"}function am(t){if(t==="x"||t==="y"||t==="r")return t}function a2(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function _d(t,...e){if(am(t))return t;for(const s of e){const n=s.axis||a2(s.position)||t.length>1&&am(t[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function om(t,e,s){if(s[e+"AxisID"]===t)return{axis:e}}function o2(t,e){if(e.data&&e.data.datasets){const s=e.data.datasets.filter(n=>n.xAxisID===t||n.yAxisID===t);if(s.length)return om(t,"x",s[0])||om(t,"y",s[0])}return{}}function l2(t,e){const s=Wn[t.type]||{scales:{}},n=e.scales||{},r=wd(t.type,e),i=Object.create(null);return Object.keys(n).forEach(a=>{const l=n[a];if(!ve(l))return console.error(`Invalid scale configuration for scale: ${a}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const c=_d(a,l,o2(a,t),ze.scales[l.type]),d=i2(c,r),u=s.scales||{};i[a]=ki(Object.create(null),[{axis:c},l,u[c],u[d]])}),t.data.datasets.forEach(a=>{const l=a.type||t.type,c=a.indexAxis||wd(l,e),u=(Wn[l]||{}).scales||{};Object.keys(u).forEach(h=>{const f=r2(h,c),m=a[f+"AxisID"]||f;i[m]=i[m]||Object.create(null),ki(i[m],[{axis:f},n[m],u[h]])})}),Object.keys(i).forEach(a=>{const l=i[a];ki(l,[ze.scales[l.type],ze.scale])}),i}function px(t){const e=t.options||(t.options={});e.plugins=ye(e.plugins,{}),e.scales=l2(t,e)}function gx(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function c2(t){return t=t||{},t.data=gx(t.data),px(t),t}const lm=new Map,xx=new Set;function za(t,e){let s=lm.get(t);return s||(s=e(),lm.set(t,s),xx.add(s)),s}const ti=(t,e,s)=>{const n=Gi(e,s);n!==void 0&&t.add(n)};class d2{constructor(e){this._config=c2(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=gx(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),px(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return za(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,s){return za(`${e}.transition.${s}`,()=>[[`datasets.${e}.transitions.${s}`,`transitions.${s}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,s){return za(`${e}-${s}`,()=>[[`datasets.${e}.elements.${s}`,`datasets.${e}`,`elements.${s}`,""]])}pluginScopeKeys(e){const s=e.id,n=this.type;return za(`${n}-plugin-${s}`,()=>[[`plugins.${s}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,s){const n=this._scopeCache;let r=n.get(e);return(!r||s)&&(r=new Map,n.set(e,r)),r}getOptionScopes(e,s,n){const{options:r,type:i}=this,a=this._cachedScopes(e,n),l=a.get(s);if(l)return l;const c=new Set;s.forEach(u=>{e&&(c.add(e),u.forEach(h=>ti(c,e,h))),u.forEach(h=>ti(c,r,h)),u.forEach(h=>ti(c,Wn[i]||{},h)),u.forEach(h=>ti(c,ze,h)),u.forEach(h=>ti(c,vd,h))});const d=Array.from(c);return d.length===0&&d.push(Object.create(null)),xx.has(s)&&a.set(s,d),d}chartOptionScopes(){const{options:e,type:s}=this;return[e,Wn[s]||{},ze.datasets[s]||{},{type:s},ze,vd]}resolveNamedOptions(e,s,n,r=[""]){const i={$shared:!0},{resolver:a,subPrefixes:l}=cm(this._resolverCache,e,r);let c=a;if(h2(a,s)){i.$shared=!1,n=ln(n)?n():n;const d=this.createResolver(e,n,l);c=Lr(a,n,d)}for(const d of s)i[d]=c[d];return i}createResolver(e,s,n=[""],r){const{resolver:i}=cm(this._resolverCache,e,n);return ve(s)?Lr(i,s,void 0,r):i}}function cm(t,e,s){let n=t.get(e);n||(n=new Map,t.set(e,n));const r=s.join();let i=n.get(r);return i||(i={resolver:Lu(e,s),subPrefixes:s.filter(l=>!l.toLowerCase().includes("hover"))},n.set(r,i)),i}const u2=t=>ve(t)&&Object.getOwnPropertyNames(t).some(e=>ln(t[e]));function h2(t,e){const{isScriptable:s,isIndexable:n}=J0(t);for(const r of e){const i=s(r),a=n(r),l=(a||i)&&t[r];if(i&&(ln(l)||u2(l))||a&&$e(l))return!0}return!1}var f2="4.5.0";const m2=["top","bottom","left","right","chartArea"];function dm(t,e){return t==="top"||t==="bottom"||m2.indexOf(t)===-1&&e==="x"}function um(t,e){return function(s,n){return s[t]===n[t]?s[e]-n[e]:s[t]-n[t]}}function hm(t){const e=t.chart,s=e.options.animation;e.notifyPlugins("afterRender"),Pe(s&&s.onComplete,[t],e)}function p2(t){const e=t.chart,s=e.options.animation;Pe(s&&s.onProgress,[t],e)}function yx(t){return Iu()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const ro={},fm=t=>{const e=yx(t);return Object.values(ro).filter(s=>s.canvas===e).pop()};function g2(t,e,s){const n=Object.keys(t);for(const r of n){const i=+r;if(i>=e){const a=t[r];delete t[r],(s>0||i>e)&&(t[i+s]=a)}}}function x2(t,e,s,n){return!s||t.type==="mouseout"?null:n?e:t}var Ds;let yl=(Ds=class{static register(...e){ls.add(...e),mm()}static unregister(...e){ls.remove(...e),mm()}constructor(e,s){const n=this.config=new d2(s),r=yx(e),i=fm(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const a=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||Lk(r)),this.platform.updateConfig(n);const l=this.platform.acquireContext(r,a.aspectRatio),c=l&&l.canvas,d=c&&c.height,u=c&&c.width;if(this.id=N1(),this.ctx=l,this.canvas=c,this.width=u,this.height=d,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Zk,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=V1(h=>this.update(h),a.resizeDelay||0),this._dataChanges=[],ro[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}gs.listen(this,"complete",hm),gs.listen(this,"progress",p2),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:s},width:n,height:r,_aspectRatio:i}=this;return Ae(e)?s&&i?i:r?n/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return ls}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():$f(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Df(this.canvas,this.ctx),this}stop(){return gs.stop(this),this}resize(e,s){gs.running(this)?this._resizeBeforeDraw={width:e,height:s}:this._resize(e,s)}_resize(e,s){const n=this.options,r=this.canvas,i=n.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(r,e,s,i),l=n.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,$f(this,l,!0)&&(this.notifyPlugins("resize",{size:a}),Pe(n.onResize,[this,a],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const s=this.options.scales||{};_e(s,(n,r)=>{n.id=r})}buildOrUpdateScales(){const e=this.options,s=e.scales,n=this.scales,r=Object.keys(n).reduce((a,l)=>(a[l]=!1,a),{});let i=[];s&&(i=i.concat(Object.keys(s).map(a=>{const l=s[a],c=_d(a,l),d=c==="r",u=c==="x";return{options:l,dposition:d?"chartArea":u?"bottom":"left",dtype:d?"radialLinear":u?"category":"linear"}}))),_e(i,a=>{const l=a.options,c=l.id,d=_d(c,l),u=ye(l.type,a.dtype);(l.position===void 0||dm(l.position,d)!==dm(a.dposition))&&(l.position=a.dposition),r[c]=!0;let h=null;if(c in n&&n[c].type===u)h=n[c];else{const f=ls.getScale(u);h=new f({id:c,type:u,ctx:this.ctx,chart:this}),n[h.id]=h}h.init(l,e)}),_e(r,(a,l)=>{a||delete n[l]}),_e(n,a=>{qs.configure(this,a,a.options),qs.addBox(this,a)})}_updateMetasets(){const e=this._metasets,s=this.data.datasets.length,n=e.length;if(e.sort((r,i)=>r.index-i.index),n>s){for(let r=s;r<n;++r)this._destroyDatasetMeta(r);e.splice(s,n-s)}this._sortedMetasets=e.slice(0).sort(um("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:s}}=this;e.length>s.length&&delete this._stacks,e.forEach((n,r)=>{s.filter(i=>i===n._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],s=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=s.length;n<r;n++){const i=s[n];let a=this.getDatasetMeta(n);const l=i.type||this.config.type;if(a.type&&a.type!==l&&(this._destroyDatasetMeta(n),a=this.getDatasetMeta(n)),a.type=l,a.indexAxis=i.indexAxis||wd(l,this.options),a.order=i.order||0,a.index=n,a.label=""+i.label,a.visible=this.isDatasetVisible(n),a.controller)a.controller.updateIndex(n),a.controller.linkScales();else{const c=ls.getController(l),{datasetElementType:d,dataElementType:u}=ze.datasets[l];Object.assign(c,{dataElementType:ls.getElement(u),datasetElementType:d&&ls.getElement(d)}),a.controller=new c(this,n),e.push(a.controller)}}return this._updateMetasets(),e}_resetElements(){_e(this.data.datasets,(e,s)=>{this.getDatasetMeta(s).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const s=this.config;s.update();const n=this._options=s.createResolver(s.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let d=0,u=this.data.datasets.length;d<u;d++){const{controller:h}=this.getDatasetMeta(d),f=!r&&i.indexOf(h)===-1;h.buildOrUpdateElements(f),a=Math.max(+h.getMaxOverflow(),a)}a=this._minPadding=n.layout.autoPadding?a:0,this._updateLayout(a),r||_e(i,d=>{d.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(um("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){_e(this.scales,e=>{qs.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,s=new Set(Object.keys(this._listeners)),n=new Set(e.events);(!Cf(s,n)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,s=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:i}of s){const a=n==="_removeElements"?-i:i;g2(e,r,a)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const s=this.data.datasets.length,n=i=>new Set(e.filter(a=>a[0]===i).map((a,l)=>l+","+a.splice(1).join(","))),r=n(0);for(let i=1;i<s;i++)if(!Cf(r,n(i)))return;return Array.from(r).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;qs.update(this,this.width,this.height,e);const s=this.chartArea,n=s.width<=0||s.height<=0;this._layers=[],_e(this.boxes,r=>{n&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,i)=>{r._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let s=0,n=this.data.datasets.length;s<n;++s)this.getDatasetMeta(s).controller.configure();for(let s=0,n=this.data.datasets.length;s<n;++s)this._updateDataset(s,ln(e)?e({datasetIndex:s}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,s){const n=this.getDatasetMeta(e),r={meta:n,index:e,mode:s,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(n.controller._update(s),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(gs.has(this)?this.attached&&!gs.running(this)&&gs.start(this):(this.draw(),hm({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:n,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const s=this._layers;for(e=0;e<s.length&&s[e].z<=0;++e)s[e].draw(this.chartArea);for(this._drawDatasets();e<s.length;++e)s[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const s=this._sortedMetasets,n=[];let r,i;for(r=0,i=s.length;r<i;++r){const a=s[r];(!e||a.visible)&&n.push(a)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let s=e.length-1;s>=0;--s)this._drawDataset(e[s]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const s=this.ctx,n={meta:e,index:e.index,cancelable:!0},r=ox(this,e);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(r&&pl(s,r),e.controller.draw(),r&&gl(s),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return Ss(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,s,n,r){const i=mk.modes[s];return typeof i=="function"?i(this,e,n,r):[]}getDatasetMeta(e){const s=this.data.datasets[e],n=this._metasets;let r=n.filter(i=>i&&i._dataset===s).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:s&&s.order||0,index:e,_dataset:s,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=mn(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const s=this.data.datasets[e];if(!s)return!1;const n=this.getDatasetMeta(e);return typeof n.hidden=="boolean"?!n.hidden:!s.hidden}setDatasetVisibility(e,s){const n=this.getDatasetMeta(e);n.hidden=!s}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,s,n){const r=n?"show":"hide",i=this.getDatasetMeta(e),a=i.controller._resolveAnimations(void 0,r);Bo(s)?(i.data[s].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),a.update(i,{visible:n}),this.update(l=>l.datasetIndex===e?r:void 0))}hide(e,s){this._updateVisibility(e,s,!1)}show(e,s){this._updateVisibility(e,s,!0)}_destroyDatasetMeta(e){const s=this._metasets[e];s&&s.controller&&s.controller._destroy(),delete this._metasets[e]}_stop(){let e,s;for(this.stop(),gs.remove(this),e=0,s=this.data.datasets.length;e<s;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:s}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Df(e,s),this.platform.releaseContext(s),this.canvas=null,this.ctx=null),delete ro[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,s=this.platform,n=(i,a)=>{s.addEventListener(this,i,a),e[i]=a},r=(i,a,l)=>{i.offsetX=a,i.offsetY=l,this._eventHandler(i)};_e(this.options.events,i=>n(i,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,s=this.platform,n=(c,d)=>{s.addEventListener(this,c,d),e[c]=d},r=(c,d)=>{e[c]&&(s.removeEventListener(this,c,d),delete e[c])},i=(c,d)=>{this.canvas&&this.resize(c,d)};let a;const l=()=>{r("attach",l),this.attached=!0,this.resize(),n("resize",i),n("detach",a)};a=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),n("attach",l)},s.isAttached(this.canvas)?l():a()}unbindEvents(){_e(this._listeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._listeners={},_e(this._responsiveListeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,s,n){const r=n?"set":"remove";let i,a,l,c;for(s==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),l=0,c=e.length;l<c;++l){a=e[l];const d=a&&this.getDatasetMeta(a.datasetIndex).controller;d&&d[r+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const s=this._active||[],n=e.map(({datasetIndex:i,index:a})=>{const l=this.getDatasetMeta(i);if(!l)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:l.data[a],index:a}});!Lo(n,s)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,s))}notifyPlugins(e,s,n){return this._plugins.notify(this,e,s,n)}isPluginEnabled(e){return this._plugins._cache.filter(s=>s.plugin.id===e).length===1}_updateHoverStyles(e,s,n){const r=this.options.hover,i=(c,d)=>c.filter(u=>!d.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),a=i(s,e),l=n?e:i(e,s);a.length&&this.updateHoverStyle(a,r.mode,!1),l.length&&r.mode&&this.updateHoverStyle(l,r.mode,!0)}_eventHandler(e,s){const n={event:e,replay:s,cancelable:!0,inChartArea:this.isPointInArea(e)},r=a=>(a.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",n,r)===!1)return;const i=this._handleEvent(e,s,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(i||n.changed)&&this.render(),this}_handleEvent(e,s,n){const{_active:r=[],options:i}=this,a=s,l=this._getActiveElements(e,r,n,a),c=A1(e),d=x2(e,this._lastEvent,n,c);n&&(this._lastEvent=null,Pe(i.onHover,[e,l,this],this),c&&Pe(i.onClick,[e,l,this],this));const u=!Lo(l,r);return(u||s)&&(this._active=l,this._updateHoverStyles(l,r,s)),this._lastEvent=d,u}_getActiveElements(e,s,n,r){if(e.type==="mouseout")return[];if(!n)return s;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,r)}},me(Ds,"defaults",ze),me(Ds,"instances",ro),me(Ds,"overrides",Wn),me(Ds,"registry",ls),me(Ds,"version",f2),me(Ds,"getChart",fm),Ds);function mm(){return _e(yl.instances,t=>t._plugins.invalidate())}function vx(t,e,s=e){t.lineCap=ye(s.borderCapStyle,e.borderCapStyle),t.setLineDash(ye(s.borderDash,e.borderDash)),t.lineDashOffset=ye(s.borderDashOffset,e.borderDashOffset),t.lineJoin=ye(s.borderJoinStyle,e.borderJoinStyle),t.lineWidth=ye(s.borderWidth,e.borderWidth),t.strokeStyle=ye(s.borderColor,e.borderColor)}function y2(t,e,s){t.lineTo(s.x,s.y)}function v2(t){return t.stepped?nj:t.tension||t.cubicInterpolationMode==="monotone"?rj:y2}function bx(t,e,s={}){const n=t.length,{start:r=0,end:i=n-1}=s,{start:a,end:l}=e,c=Math.max(r,a),d=Math.min(i,l),u=r<a&&i<a||r>l&&i>l;return{count:n,start:c,loop:e.loop,ilen:d<c&&!u?n+d-c:d-c}}function b2(t,e,s,n){const{points:r,options:i}=e,{count:a,start:l,loop:c,ilen:d}=bx(r,s,n),u=v2(i);let{move:h=!0,reverse:f}=n||{},m,p,y;for(m=0;m<=d;++m)p=r[(l+(f?d-m:m))%a],!p.skip&&(h?(t.moveTo(p.x,p.y),h=!1):u(t,y,p,f,i.stepped),y=p);return c&&(p=r[(l+(f?d:0))%a],u(t,y,p,f,i.stepped)),!!c}function w2(t,e,s,n){const r=e.points,{count:i,start:a,ilen:l}=bx(r,s,n),{move:c=!0,reverse:d}=n||{};let u=0,h=0,f,m,p,y,b,x;const g=w=>(a+(d?l-w:w))%i,v=()=>{y!==b&&(t.lineTo(u,b),t.lineTo(u,y),t.lineTo(u,x))};for(c&&(m=r[g(0)],t.moveTo(m.x,m.y)),f=0;f<=l;++f){if(m=r[g(f)],m.skip)continue;const w=m.x,_=m.y,S=w|0;S===p?(_<y?y=_:_>b&&(b=_),u=(h*u+w)/++h):(v(),t.lineTo(w,_),p=S,h=0,y=b=_),x=_}v()}function jd(t){const e=t.options,s=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!s?w2:b2}function _2(t){return t.stepped?Ij:t.tension||t.cubicInterpolationMode==="monotone"?$j:Sn}function j2(t,e,s,n){let r=e._path;r||(r=e._path=new Path2D,e.path(r,s,n)&&r.closePath()),vx(t,e.options),t.stroke(r)}function k2(t,e,s,n){const{segments:r,options:i}=e,a=jd(e);for(const l of r)vx(t,i,l.style),t.beginPath(),a(t,e,l,{start:s,end:s+n-1})&&t.closePath(),t.stroke()}const N2=typeof Path2D=="function";function S2(t,e,s,n){N2&&!e.options.segment?j2(t,e,s,n):k2(t,e,s,n)}class Ks extends cn{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,s){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const r=n.spanGaps?this._loop:this._fullLoop;Tj(this._points,n,e,r,s),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Vj(this,this.options.segment))}first(){const e=this.segments,s=this.points;return e.length&&s[e[0].start]}last(){const e=this.segments,s=this.points,n=e.length;return n&&s[e[n-1].end]}interpolate(e,s){const n=this.options,r=e[s],i=this.points,a=ax(this,{property:s,start:r,end:r});if(!a.length)return;const l=[],c=_2(n);let d,u;for(d=0,u=a.length;d<u;++d){const{start:h,end:f}=a[d],m=i[h],p=i[f];if(m===p){l.push(m);continue}const y=Math.abs((r-m[s])/(p[s]-m[s])),b=c(m,p,y,n.stepped);b[s]=e[s],l.push(b)}return l.length===1?l[0]:l}pathSegment(e,s,n){return jd(this)(e,this,s,n)}path(e,s,n){const r=this.segments,i=jd(this);let a=this._loop;s=s||0,n=n||this.points.length-s;for(const l of r)a&=i(e,this,l,{start:s,end:s+n-1});return!!a}draw(e,s,n,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),S2(e,this,n,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}me(Ks,"id","line"),me(Ks,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),me(Ks,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),me(Ks,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function pm(t,e,s,n){const r=t.options,{[s]:i}=t.getProps([s],n);return Math.abs(e-i)<r.radius+r.hitRadius}class io extends cn{constructor(s){super();me(this,"parsed");me(this,"skip");me(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,s&&Object.assign(this,s)}inRange(s,n,r){const i=this.options,{x:a,y:l}=this.getProps(["x","y"],r);return Math.pow(s-a,2)+Math.pow(n-l,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(s,n){return pm(this,s,"x",n)}inYRange(s,n){return pm(this,s,"y",n)}getCenterPoint(s){const{x:n,y:r}=this.getProps(["x","y"],s);return{x:n,y:r}}size(s){s=s||this.options||{};let n=s.radius||0;n=Math.max(n,n&&s.hoverRadius||0);const r=n&&s.borderWidth||0;return(n+r)*2}draw(s,n){const r=this.options;this.skip||r.radius<.1||!Ss(this,n,this.size(r)/2)||(s.strokeStyle=r.borderColor,s.lineWidth=r.borderWidth,s.fillStyle=r.backgroundColor,bd(s,r,this.x,this.y))}getRange(){const s=this.options||{};return s.radius+s.hitRadius}}me(io,"id","point"),me(io,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),me(io,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function C2(t,e,s){const n=t.segments,r=t.points,i=e.points,a=[];for(const l of n){let{start:c,end:d}=l;d=vl(c,d,r);const u=kd(s,r[c],r[d],l.loop);if(!e.segments){a.push({source:l,target:u,start:r[c],end:r[d]});continue}const h=ax(e,u);for(const f of h){const m=kd(s,i[f.start],i[f.end],f.loop),p=ix(l,r,m);for(const y of p)a.push({source:y,target:f,start:{[s]:gm(u,m,"start",Math.max)},end:{[s]:gm(u,m,"end",Math.min)}})}}return a}function kd(t,e,s,n){if(n)return;let r=e[t],i=s[t];return t==="angle"&&(r=St(r),i=St(i)),{property:t,start:r,end:i}}function P2(t,e){const{x:s=null,y:n=null}=t||{},r=e.points,i=[];return e.segments.forEach(({start:a,end:l})=>{l=vl(a,l,r);const c=r[a],d=r[l];n!==null?(i.push({x:c.x,y:n}),i.push({x:d.x,y:n})):s!==null&&(i.push({x:s,y:c.y}),i.push({x:s,y:d.y}))}),i}function vl(t,e,s){for(;e>t;e--){const n=s[e];if(!isNaN(n.x)&&!isNaN(n.y))break}return e}function gm(t,e,s,n){return t&&e?n(t[s],e[s]):t?t[s]:e?e[s]:0}function wx(t,e){let s=[],n=!1;return $e(t)?(n=!0,s=t):s=P2(t,e),s.length?new Ks({points:s,options:{tension:0},_loop:n,_fullLoop:n}):null}function xm(t){return t&&t.fill!==!1}function E2(t,e,s){let r=t[e].fill;const i=[e];let a;if(!s)return r;for(;r!==!1&&i.indexOf(r)===-1;){if(!ot(r))return r;if(a=t[r],!a)return!1;if(a.visible)return r;i.push(r),r=a.fill}return!1}function T2(t,e,s){const n=M2(t);if(ve(n))return isNaN(n.value)?!1:n;let r=parseFloat(n);return ot(r)&&Math.floor(r)===r?A2(n[0],e,r,s):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function A2(t,e,s,n){return(t==="-"||t==="+")&&(s=e+s),s===e||s<0||s>=n?!1:s}function O2(t,e){let s=null;return t==="start"?s=e.bottom:t==="end"?s=e.top:ve(t)?s=e.getPixelForValue(t.value):e.getBasePixel&&(s=e.getBasePixel()),s}function R2(t,e,s){let n;return t==="start"?n=s:t==="end"?n=e.options.reverse?e.min:e.max:ve(t)?n=t.value:n=e.getBaseValue(),n}function M2(t){const e=t.options,s=e.fill;let n=ye(s&&s.target,s);return n===void 0&&(n=!!e.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function L2(t){const{scale:e,index:s,line:n}=t,r=[],i=n.segments,a=n.points,l=D2(e,s);l.push(wx({x:null,y:e.bottom},n));for(let c=0;c<i.length;c++){const d=i[c];for(let u=d.start;u<=d.end;u++)B2(r,a[u],l)}return new Ks({points:r,options:{}})}function D2(t,e){const s=[],n=t.getMatchingVisibleMetas("line");for(let r=0;r<n.length;r++){const i=n[r];if(i.index===e)break;i.hidden||s.unshift(i.dataset)}return s}function B2(t,e,s){const n=[];for(let r=0;r<s.length;r++){const i=s[r],{first:a,last:l,point:c}=I2(i,e,"x");if(!(!c||a&&l)){if(a)n.unshift(c);else if(t.push(c),!l)break}}t.push(...n)}function I2(t,e,s){const n=t.interpolate(e,s);if(!n)return{};const r=n[s],i=t.segments,a=t.points;let l=!1,c=!1;for(let d=0;d<i.length;d++){const u=i[d],h=a[u.start][s],f=a[u.end][s];if(pr(r,h,f)){l=r===h,c=r===f;break}}return{first:l,last:c,point:n}}class _x{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,s,n){const{x:r,y:i,radius:a}=this;return s=s||{start:0,end:At},e.arc(r,i,a,s.end,s.start,!0),!n.bounds}interpolate(e){const{x:s,y:n,radius:r}=this,i=e.angle;return{x:s+Math.cos(i)*r,y:n+Math.sin(i)*r,angle:i}}}function $2(t){const{chart:e,fill:s,line:n}=t;if(ot(s))return z2(e,s);if(s==="stack")return L2(t);if(s==="shape")return!0;const r=F2(t);return r instanceof _x?r:wx(r,n)}function z2(t,e){const s=t.getDatasetMeta(e);return s&&t.isDatasetVisible(e)?s.dataset:null}function F2(t){return(t.scale||{}).getPointPositionForValue?W2(t):U2(t)}function U2(t){const{scale:e={},fill:s}=t,n=O2(s,e);if(ot(n)){const r=e.isHorizontal();return{x:r?n:null,y:r?null:n}}return null}function W2(t){const{scale:e,fill:s}=t,n=e.options,r=e.getLabels().length,i=n.reverse?e.max:e.min,a=R2(s,e,i),l=[];if(n.grid.circular){const c=e.getPointPositionForValue(0,i);return new _x({x:c.x,y:c.y,radius:e.getDistanceFromCenterForValue(a)})}for(let c=0;c<r;++c)l.push(e.getPointPositionForValue(c,a));return l}function cc(t,e,s){const n=$2(e),{chart:r,index:i,line:a,scale:l,axis:c}=e,d=a.options,u=d.fill,h=d.backgroundColor,{above:f=h,below:m=h}=u||{},p=r.getDatasetMeta(i),y=ox(r,p);n&&a.points.length&&(pl(t,s),H2(t,{line:a,target:n,above:f,below:m,area:s,scale:l,axis:c,clip:y}),gl(t))}function H2(t,e){const{line:s,target:n,above:r,below:i,area:a,scale:l,clip:c}=e,d=s._loop?"angle":e.axis;t.save();let u=i;i!==r&&(d==="x"?(ym(t,n,a.top),dc(t,{line:s,target:n,color:r,scale:l,property:d,clip:c}),t.restore(),t.save(),ym(t,n,a.bottom)):d==="y"&&(vm(t,n,a.left),dc(t,{line:s,target:n,color:i,scale:l,property:d,clip:c}),t.restore(),t.save(),vm(t,n,a.right),u=r)),dc(t,{line:s,target:n,color:u,scale:l,property:d,clip:c}),t.restore()}function ym(t,e,s){const{segments:n,points:r}=e;let i=!0,a=!1;t.beginPath();for(const l of n){const{start:c,end:d}=l,u=r[c],h=r[vl(c,d,r)];i?(t.moveTo(u.x,u.y),i=!1):(t.lineTo(u.x,s),t.lineTo(u.x,u.y)),a=!!e.pathSegment(t,l,{move:a}),a?t.closePath():t.lineTo(h.x,s)}t.lineTo(e.first().x,s),t.closePath(),t.clip()}function vm(t,e,s){const{segments:n,points:r}=e;let i=!0,a=!1;t.beginPath();for(const l of n){const{start:c,end:d}=l,u=r[c],h=r[vl(c,d,r)];i?(t.moveTo(u.x,u.y),i=!1):(t.lineTo(s,u.y),t.lineTo(u.x,u.y)),a=!!e.pathSegment(t,l,{move:a}),a?t.closePath():t.lineTo(s,h.y)}t.lineTo(s,e.first().y),t.closePath(),t.clip()}function dc(t,e){const{line:s,target:n,property:r,color:i,scale:a,clip:l}=e,c=C2(s,n,r);for(const{source:d,target:u,start:h,end:f}of c){const{style:{backgroundColor:m=i}={}}=d,p=n!==!0;t.save(),t.fillStyle=m,V2(t,a,l,p&&kd(r,h,f)),t.beginPath();const y=!!s.pathSegment(t,d);let b;if(p){y?t.closePath():bm(t,n,f,r);const x=!!n.pathSegment(t,u,{move:y,reverse:!0});b=y&&x,b||bm(t,n,h,r)}t.closePath(),t.fill(b?"evenodd":"nonzero"),t.restore()}}function V2(t,e,s,n){const r=e.chart.chartArea,{property:i,start:a,end:l}=n||{};if(i==="x"||i==="y"){let c,d,u,h;i==="x"?(c=a,d=r.top,u=l,h=r.bottom):(c=r.left,d=a,u=r.right,h=l),t.beginPath(),s&&(c=Math.max(c,s.left),u=Math.min(u,s.right),d=Math.max(d,s.top),h=Math.min(h,s.bottom)),t.rect(c,d,u-c,h-d),t.clip()}}function bm(t,e,s,n){const r=e.interpolate(s,n);r&&t.lineTo(r.x,r.y)}var q2={id:"filler",afterDatasetsUpdate(t,e,s){const n=(t.data.datasets||[]).length,r=[];let i,a,l,c;for(a=0;a<n;++a)i=t.getDatasetMeta(a),l=i.dataset,c=null,l&&l.options&&l instanceof Ks&&(c={visible:t.isDatasetVisible(a),index:a,fill:T2(l,a,n),chart:t,axis:i.controller.options.indexAxis,scale:i.vScale,line:l}),i.$filler=c,r.push(c);for(a=0;a<n;++a)c=r[a],!(!c||c.fill===!1)&&(c.fill=E2(r,a,s.propagate))},beforeDraw(t,e,s){const n=s.drawTime==="beforeDraw",r=t.getSortedVisibleDatasetMetas(),i=t.chartArea;for(let a=r.length-1;a>=0;--a){const l=r[a].$filler;l&&(l.line.updateControlPoints(i,l.axis),n&&l.fill&&cc(t.ctx,l,i))}},beforeDatasetsDraw(t,e,s){if(s.drawTime!=="beforeDatasetsDraw")return;const n=t.getSortedVisibleDatasetMetas();for(let r=n.length-1;r>=0;--r){const i=n[r].$filler;xm(i)&&cc(t.ctx,i,t.chartArea)}},beforeDatasetDraw(t,e,s){const n=e.meta.$filler;!xm(n)||s.drawTime!=="beforeDatasetDraw"||cc(t.ctx,n,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const wm=(t,e)=>{let{boxHeight:s=e,boxWidth:n=e}=t;return t.usePointStyle&&(s=Math.min(s,e),n=t.pointStyleWidth||Math.min(n,e)),{boxWidth:n,boxHeight:s,itemHeight:Math.max(e,s)}},K2=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class _m extends cn{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,s,n){this.maxWidth=e,this.maxHeight=s,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let s=Pe(e.generateLabels,[this.chart],this)||[];e.filter&&(s=s.filter(n=>e.filter(n,this.chart.data))),e.sort&&(s=s.sort((n,r)=>e.sort(n,r,this.chart.data))),this.options.reverse&&s.reverse(),this.legendItems=s}fit(){const{options:e,ctx:s}=this;if(!e.display){this.width=this.height=0;return}const n=e.labels,r=Ze(n.font),i=r.size,a=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=wm(n,i);let d,u;s.font=r.string,this.isHorizontal()?(d=this.maxWidth,u=this._fitRows(a,i,l,c)+10):(u=this.maxHeight,d=this._fitCols(a,r,l,c)+10),this.width=Math.min(d,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,s,n,r){const{ctx:i,maxWidth:a,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],d=this.lineWidths=[0],u=r+l;let h=e;i.textAlign="left",i.textBaseline="middle";let f=-1,m=-u;return this.legendItems.forEach((p,y)=>{const b=n+s/2+i.measureText(p.text).width;(y===0||d[d.length-1]+b+2*l>a)&&(h+=u,d[d.length-(y>0?0:1)]=0,m+=u,f++),c[y]={left:0,top:m,row:f,width:b,height:r},d[d.length-1]+=b+l}),h}_fitCols(e,s,n,r){const{ctx:i,maxHeight:a,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],d=this.columnSizes=[],u=a-e;let h=l,f=0,m=0,p=0,y=0;return this.legendItems.forEach((b,x)=>{const{itemWidth:g,itemHeight:v}=Y2(n,s,i,b,r);x>0&&m+v+2*l>u&&(h+=f+l,d.push({width:f,height:m}),p+=f+l,y++,f=m=0),c[x]={left:p,top:m,col:y,width:g,height:v},f=Math.max(f,g),m+=v+l}),h+=f,d.push({width:f,height:m}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:s,options:{align:n,labels:{padding:r},rtl:i}}=this,a=jr(i,this.left,this.width);if(this.isHorizontal()){let l=0,c=kt(n,this.left+r,this.right-this.lineWidths[l]);for(const d of s)l!==d.row&&(l=d.row,c=kt(n,this.left+r,this.right-this.lineWidths[l])),d.top+=this.top+e+r,d.left=a.leftForLtr(a.x(c),d.width),c+=d.width+r}else{let l=0,c=kt(n,this.top+e+r,this.bottom-this.columnSizes[l].height);for(const d of s)d.col!==l&&(l=d.col,c=kt(n,this.top+e+r,this.bottom-this.columnSizes[l].height)),d.top=c,d.left+=this.left+r,d.left=a.leftForLtr(a.x(d.left),d.width),c+=d.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;pl(e,this),this._draw(),gl(e)}}_draw(){const{options:e,columnSizes:s,lineWidths:n,ctx:r}=this,{align:i,labels:a}=e,l=ze.color,c=jr(e.rtl,this.left,this.width),d=Ze(a.font),{padding:u}=a,h=d.size,f=h/2;let m;this.drawTitle(),r.textAlign=c.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=d.string;const{boxWidth:p,boxHeight:y,itemHeight:b}=wm(a,h),x=function(S,P,E){if(isNaN(p)||p<=0||isNaN(y)||y<0)return;r.save();const k=ye(E.lineWidth,1);if(r.fillStyle=ye(E.fillStyle,l),r.lineCap=ye(E.lineCap,"butt"),r.lineDashOffset=ye(E.lineDashOffset,0),r.lineJoin=ye(E.lineJoin,"miter"),r.lineWidth=k,r.strokeStyle=ye(E.strokeStyle,l),r.setLineDash(ye(E.lineDash,[])),a.usePointStyle){const T={radius:y*Math.SQRT2/2,pointStyle:E.pointStyle,rotation:E.rotation,borderWidth:k},R=c.xPlus(S,p/2),$=P+f;G0(r,T,R,$,a.pointStyleWidth&&p)}else{const T=P+Math.max((h-y)/2,0),R=c.leftForLtr(S,p),$=_r(E.borderRadius);r.beginPath(),Object.values($).some(G=>G!==0)?Fo(r,{x:R,y:T,w:p,h:y,radius:$}):r.rect(R,T,p,y),r.fill(),k!==0&&r.stroke()}r.restore()},g=function(S,P,E){Mr(r,E.text,S,P+b/2,d,{strikethrough:E.hidden,textAlign:c.textAlign(E.textAlign)})},v=this.isHorizontal(),w=this._computeTitleHeight();v?m={x:kt(i,this.left+u,this.right-n[0]),y:this.top+u+w,line:0}:m={x:this.left+u,y:kt(i,this.top+w+u,this.bottom-s[0].height),line:0},sx(this.ctx,e.textDirection);const _=b+u;this.legendItems.forEach((S,P)=>{r.strokeStyle=S.fontColor,r.fillStyle=S.fontColor;const E=r.measureText(S.text).width,k=c.textAlign(S.textAlign||(S.textAlign=a.textAlign)),T=p+f+E;let R=m.x,$=m.y;c.setWidth(this.width),v?P>0&&R+T+u>this.right&&($=m.y+=_,m.line++,R=m.x=kt(i,this.left+u,this.right-n[m.line])):P>0&&$+_>this.bottom&&(R=m.x=R+s[m.line].width+u,m.line++,$=m.y=kt(i,this.top+w+u,this.bottom-s[m.line].height));const G=c.x(R);if(x(G,$,S),R=q1(k,R+p+f,v?R+T:this.right,e.rtl),g(c.x(R),$,S),v)m.x+=T+u;else if(typeof S.text!="string"){const le=d.lineHeight;m.y+=jx(S,le)+u}else m.y+=_}),nx(this.ctx,e.textDirection)}drawTitle(){const e=this.options,s=e.title,n=Ze(s.font),r=ht(s.padding);if(!s.display)return;const i=jr(e.rtl,this.left,this.width),a=this.ctx,l=s.position,c=n.size/2,d=r.top+c;let u,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+d,h=kt(e.align,h,this.right-f);else{const p=this.columnSizes.reduce((y,b)=>Math.max(y,b.height),0);u=d+kt(e.align,this.top,this.bottom-p-e.labels.padding-this._computeTitleHeight())}const m=kt(l,h,h+f);a.textAlign=i.textAlign(V0(l)),a.textBaseline="middle",a.strokeStyle=s.color,a.fillStyle=s.color,a.font=n.string,Mr(a,s.text,m,u,n)}_computeTitleHeight(){const e=this.options.title,s=Ze(e.font),n=ht(e.padding);return e.display?s.lineHeight+n.height:0}_getLegendItemAt(e,s){let n,r,i;if(pr(e,this.left,this.right)&&pr(s,this.top,this.bottom)){for(i=this.legendHitBoxes,n=0;n<i.length;++n)if(r=i[n],pr(e,r.left,r.left+r.width)&&pr(s,r.top,r.top+r.height))return this.legendItems[n]}return null}handleEvent(e){const s=this.options;if(!J2(e.type,s))return;const n=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,i=K2(r,n);r&&!i&&Pe(s.onLeave,[e,r,this],this),this._hoveredItem=n,n&&!i&&Pe(s.onHover,[e,n,this],this)}else n&&Pe(s.onClick,[e,n,this],this)}}function Y2(t,e,s,n,r){const i=G2(n,t,e,s),a=Q2(r,n,e.lineHeight);return{itemWidth:i,itemHeight:a}}function G2(t,e,s,n){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((i,a)=>i.length>a.length?i:a)),e+s.size/2+n.measureText(r).width}function Q2(t,e,s){let n=t;return typeof e.text!="string"&&(n=jx(e,s)),n}function jx(t,e){const s=t.text?t.text.length:0;return e*s}function J2(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var X2={id:"legend",_element:_m,start(t,e,s){const n=t.legend=new _m({ctx:t.ctx,options:s,chart:t});qs.configure(t,n,s),qs.addBox(t,n)},stop(t){qs.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,s){const n=t.legend;qs.configure(t,n,s),n.options=s},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,s){const n=e.datasetIndex,r=s.chart;r.isDatasetVisible(n)?(r.hide(n),e.hidden=!0):(r.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:s,pointStyle:n,textAlign:r,color:i,useBorderRadius:a,borderRadius:l}}=t.legend.options;return t._getSortedDatasetMetas().map(c=>{const d=c.controller.getStyle(s?0:void 0),u=ht(d.borderWidth);return{text:e[c.index].label,fillStyle:d.backgroundColor,fontColor:i,hidden:!c.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:d.borderColor,pointStyle:n||d.pointStyle,rotation:d.rotation,textAlign:r||d.textAlign,borderRadius:a&&(l||d.borderRadius),datasetIndex:c.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};const di={average(t){if(!t.length)return!1;let e,s,n=new Set,r=0,i=0;for(e=0,s=t.length;e<s;++e){const l=t[e].element;if(l&&l.hasValue()){const c=l.tooltipPosition();n.add(c.x),r+=c.y,++i}}return i===0||n.size===0?!1:{x:[...n].reduce((l,c)=>l+c)/n.size,y:r/i}},nearest(t,e){if(!t.length)return!1;let s=e.x,n=e.y,r=Number.POSITIVE_INFINITY,i,a,l;for(i=0,a=t.length;i<a;++i){const c=t[i].element;if(c&&c.hasValue()){const d=c.getCenterPoint(),u=xd(e,d);u<r&&(r=u,l=c)}}if(l){const c=l.tooltipPosition();s=c.x,n=c.y}return{x:s,y:n}}};function as(t,e){return e&&($e(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function xs(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function Z2(t,e){const{element:s,datasetIndex:n,index:r}=e,i=t.getDatasetMeta(n).controller,{label:a,value:l}=i.getLabelAndValue(r);return{chart:t,label:a,parsed:i.getParsed(r),raw:t.data.datasets[n].data[r],formattedValue:l,dataset:i.getDataset(),dataIndex:r,datasetIndex:n,element:s}}function jm(t,e){const s=t.chart.ctx,{body:n,footer:r,title:i}=t,{boxWidth:a,boxHeight:l}=e,c=Ze(e.bodyFont),d=Ze(e.titleFont),u=Ze(e.footerFont),h=i.length,f=r.length,m=n.length,p=ht(e.padding);let y=p.height,b=0,x=n.reduce((w,_)=>w+_.before.length+_.lines.length+_.after.length,0);if(x+=t.beforeBody.length+t.afterBody.length,h&&(y+=h*d.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),x){const w=e.displayColors?Math.max(l,c.lineHeight):c.lineHeight;y+=m*w+(x-m)*c.lineHeight+(x-1)*e.bodySpacing}f&&(y+=e.footerMarginTop+f*u.lineHeight+(f-1)*e.footerSpacing);let g=0;const v=function(w){b=Math.max(b,s.measureText(w).width+g)};return s.save(),s.font=d.string,_e(t.title,v),s.font=c.string,_e(t.beforeBody.concat(t.afterBody),v),g=e.displayColors?a+2+e.boxPadding:0,_e(n,w=>{_e(w.before,v),_e(w.lines,v),_e(w.after,v)}),g=0,s.font=u.string,_e(t.footer,v),s.restore(),b+=p.width,{width:b,height:y}}function eN(t,e){const{y:s,height:n}=e;return s<n/2?"top":s>t.height-n/2?"bottom":"center"}function tN(t,e,s,n){const{x:r,width:i}=n,a=s.caretSize+s.caretPadding;if(t==="left"&&r+i+a>e.width||t==="right"&&r-i-a<0)return!0}function sN(t,e,s,n){const{x:r,width:i}=s,{width:a,chartArea:{left:l,right:c}}=t;let d="center";return n==="center"?d=r<=(l+c)/2?"left":"right":r<=i/2?d="left":r>=a-i/2&&(d="right"),tN(d,t,e,s)&&(d="center"),d}function km(t,e,s){const n=s.yAlign||e.yAlign||eN(t,s);return{xAlign:s.xAlign||e.xAlign||sN(t,e,s,n),yAlign:n}}function nN(t,e){let{x:s,width:n}=t;return e==="right"?s-=n:e==="center"&&(s-=n/2),s}function rN(t,e,s){let{y:n,height:r}=t;return e==="top"?n+=s:e==="bottom"?n-=r+s:n-=r/2,n}function Nm(t,e,s,n){const{caretSize:r,caretPadding:i,cornerRadius:a}=t,{xAlign:l,yAlign:c}=s,d=r+i,{topLeft:u,topRight:h,bottomLeft:f,bottomRight:m}=_r(a);let p=nN(e,l);const y=rN(e,c,d);return c==="center"?l==="left"?p+=d:l==="right"&&(p-=d):l==="left"?p-=Math.max(u,f)+r:l==="right"&&(p+=Math.max(h,m)+r),{x:Ns(p,0,n.width-e.width),y:Ns(y,0,n.height-e.height)}}function Fa(t,e,s){const n=ht(s.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-n.right:t.x+n.left}function Sm(t){return as([],xs(t))}function iN(t,e,s){return mn(t,{tooltip:e,tooltipItems:s,type:"tooltip"})}function Cm(t,e){const s=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return s?t.override(s):t}const kx={beforeTitle:ms,title(t){if(t.length>0){const e=t[0],s=e.chart.data.labels,n=s?s.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return s[e.dataIndex]}return""},afterTitle:ms,beforeBody:ms,beforeLabel:ms,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const s=t.formattedValue;return Ae(s)||(e+=s),e},labelColor(t){const s=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:s.borderColor,backgroundColor:s.backgroundColor,borderWidth:s.borderWidth,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const s=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:s.pointStyle,rotation:s.rotation}},afterLabel:ms,afterBody:ms,beforeFooter:ms,footer:ms,afterFooter:ms};function gt(t,e,s,n){const r=t[e].call(s,n);return typeof r>"u"?kx[e].call(s,n):r}class Nd extends cn{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const s=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&s.options.animation&&n.animations,i=new lx(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=iN(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,s){const{callbacks:n}=s,r=gt(n,"beforeTitle",this,e),i=gt(n,"title",this,e),a=gt(n,"afterTitle",this,e);let l=[];return l=as(l,xs(r)),l=as(l,xs(i)),l=as(l,xs(a)),l}getBeforeBody(e,s){return Sm(gt(s.callbacks,"beforeBody",this,e))}getBody(e,s){const{callbacks:n}=s,r=[];return _e(e,i=>{const a={before:[],lines:[],after:[]},l=Cm(n,i);as(a.before,xs(gt(l,"beforeLabel",this,i))),as(a.lines,gt(l,"label",this,i)),as(a.after,xs(gt(l,"afterLabel",this,i))),r.push(a)}),r}getAfterBody(e,s){return Sm(gt(s.callbacks,"afterBody",this,e))}getFooter(e,s){const{callbacks:n}=s,r=gt(n,"beforeFooter",this,e),i=gt(n,"footer",this,e),a=gt(n,"afterFooter",this,e);let l=[];return l=as(l,xs(r)),l=as(l,xs(i)),l=as(l,xs(a)),l}_createItems(e){const s=this._active,n=this.chart.data,r=[],i=[],a=[];let l=[],c,d;for(c=0,d=s.length;c<d;++c)l.push(Z2(this.chart,s[c]));return e.filter&&(l=l.filter((u,h,f)=>e.filter(u,h,f,n))),e.itemSort&&(l=l.sort((u,h)=>e.itemSort(u,h,n))),_e(l,u=>{const h=Cm(e.callbacks,u);r.push(gt(h,"labelColor",this,u)),i.push(gt(h,"labelPointStyle",this,u)),a.push(gt(h,"labelTextColor",this,u))}),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=a,this.dataPoints=l,l}update(e,s){const n=this.options.setContext(this.getContext()),r=this._active;let i,a=[];if(!r.length)this.opacity!==0&&(i={opacity:0});else{const l=di[n.position].call(this,r,this._eventPosition);a=this._createItems(n),this.title=this.getTitle(a,n),this.beforeBody=this.getBeforeBody(a,n),this.body=this.getBody(a,n),this.afterBody=this.getAfterBody(a,n),this.footer=this.getFooter(a,n);const c=this._size=jm(this,n),d=Object.assign({},l,c),u=km(this.chart,n,d),h=Nm(n,d,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,i={opacity:1,x:h.x,y:h.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=a,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:s})}drawCaret(e,s,n,r){const i=this.getCaretPosition(e,n,r);s.lineTo(i.x1,i.y1),s.lineTo(i.x2,i.y2),s.lineTo(i.x3,i.y3)}getCaretPosition(e,s,n){const{xAlign:r,yAlign:i}=this,{caretSize:a,cornerRadius:l}=n,{topLeft:c,topRight:d,bottomLeft:u,bottomRight:h}=_r(l),{x:f,y:m}=e,{width:p,height:y}=s;let b,x,g,v,w,_;return i==="center"?(w=m+y/2,r==="left"?(b=f,x=b-a,v=w+a,_=w-a):(b=f+p,x=b+a,v=w-a,_=w+a),g=b):(r==="left"?x=f+Math.max(c,u)+a:r==="right"?x=f+p-Math.max(d,h)-a:x=this.caretX,i==="top"?(v=m,w=v-a,b=x-a,g=x+a):(v=m+y,w=v+a,b=x+a,g=x-a),_=v),{x1:b,x2:x,x3:g,y1:v,y2:w,y3:_}}drawTitle(e,s,n){const r=this.title,i=r.length;let a,l,c;if(i){const d=jr(n.rtl,this.x,this.width);for(e.x=Fa(this,n.titleAlign,n),s.textAlign=d.textAlign(n.titleAlign),s.textBaseline="middle",a=Ze(n.titleFont),l=n.titleSpacing,s.fillStyle=n.titleColor,s.font=a.string,c=0;c<i;++c)s.fillText(r[c],d.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+l,c+1===i&&(e.y+=n.titleMarginBottom-l)}}_drawColorBox(e,s,n,r,i){const a=this.labelColors[n],l=this.labelPointStyles[n],{boxHeight:c,boxWidth:d}=i,u=Ze(i.bodyFont),h=Fa(this,"left",i),f=r.x(h),m=c<u.lineHeight?(u.lineHeight-c)/2:0,p=s.y+m;if(i.usePointStyle){const y={radius:Math.min(d,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},b=r.leftForLtr(f,d)+d/2,x=p+c/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,bd(e,y,b,x),e.strokeStyle=a.borderColor,e.fillStyle=a.backgroundColor,bd(e,y,b,x)}else{e.lineWidth=ve(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,e.strokeStyle=a.borderColor,e.setLineDash(a.borderDash||[]),e.lineDashOffset=a.borderDashOffset||0;const y=r.leftForLtr(f,d),b=r.leftForLtr(r.xPlus(f,1),d-2),x=_r(a.borderRadius);Object.values(x).some(g=>g!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,Fo(e,{x:y,y:p,w:d,h:c,radius:x}),e.fill(),e.stroke(),e.fillStyle=a.backgroundColor,e.beginPath(),Fo(e,{x:b,y:p+1,w:d-2,h:c-2,radius:x}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(y,p,d,c),e.strokeRect(y,p,d,c),e.fillStyle=a.backgroundColor,e.fillRect(b,p+1,d-2,c-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,s,n){const{body:r}=this,{bodySpacing:i,bodyAlign:a,displayColors:l,boxHeight:c,boxWidth:d,boxPadding:u}=n,h=Ze(n.bodyFont);let f=h.lineHeight,m=0;const p=jr(n.rtl,this.x,this.width),y=function(E){s.fillText(E,p.x(e.x+m),e.y+f/2),e.y+=f+i},b=p.textAlign(a);let x,g,v,w,_,S,P;for(s.textAlign=a,s.textBaseline="middle",s.font=h.string,e.x=Fa(this,b,n),s.fillStyle=n.bodyColor,_e(this.beforeBody,y),m=l&&b!=="right"?a==="center"?d/2+u:d+2+u:0,w=0,S=r.length;w<S;++w){for(x=r[w],g=this.labelTextColors[w],s.fillStyle=g,_e(x.before,y),v=x.lines,l&&v.length&&(this._drawColorBox(s,e,w,p,n),f=Math.max(h.lineHeight,c)),_=0,P=v.length;_<P;++_)y(v[_]),f=h.lineHeight;_e(x.after,y)}m=0,f=h.lineHeight,_e(this.afterBody,y),e.y-=i}drawFooter(e,s,n){const r=this.footer,i=r.length;let a,l;if(i){const c=jr(n.rtl,this.x,this.width);for(e.x=Fa(this,n.footerAlign,n),e.y+=n.footerMarginTop,s.textAlign=c.textAlign(n.footerAlign),s.textBaseline="middle",a=Ze(n.footerFont),s.fillStyle=n.footerColor,s.font=a.string,l=0;l<i;++l)s.fillText(r[l],c.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+n.footerSpacing}}drawBackground(e,s,n,r){const{xAlign:i,yAlign:a}=this,{x:l,y:c}=e,{width:d,height:u}=n,{topLeft:h,topRight:f,bottomLeft:m,bottomRight:p}=_r(r.cornerRadius);s.fillStyle=r.backgroundColor,s.strokeStyle=r.borderColor,s.lineWidth=r.borderWidth,s.beginPath(),s.moveTo(l+h,c),a==="top"&&this.drawCaret(e,s,n,r),s.lineTo(l+d-f,c),s.quadraticCurveTo(l+d,c,l+d,c+f),a==="center"&&i==="right"&&this.drawCaret(e,s,n,r),s.lineTo(l+d,c+u-p),s.quadraticCurveTo(l+d,c+u,l+d-p,c+u),a==="bottom"&&this.drawCaret(e,s,n,r),s.lineTo(l+m,c+u),s.quadraticCurveTo(l,c+u,l,c+u-m),a==="center"&&i==="left"&&this.drawCaret(e,s,n,r),s.lineTo(l,c+h),s.quadraticCurveTo(l,c,l+h,c),s.closePath(),s.fill(),r.borderWidth>0&&s.stroke()}_updateAnimationTarget(e){const s=this.chart,n=this.$animations,r=n&&n.x,i=n&&n.y;if(r||i){const a=di[e.position].call(this,this._active,this._eventPosition);if(!a)return;const l=this._size=jm(this,e),c=Object.assign({},a,this._size),d=km(s,e,c),u=Nm(e,c,d,s);(r._to!==u.x||i._to!==u.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=l.width,this.height=l.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const s=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(s);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const a=ht(s.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;s.enabled&&l&&(e.save(),e.globalAlpha=n,this.drawBackground(i,e,r,s),sx(e,s.textDirection),i.y+=a.top,this.drawTitle(i,e,s),this.drawBody(i,e,s),this.drawFooter(i,e,s),nx(e,s.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,s){const n=this._active,r=e.map(({datasetIndex:l,index:c})=>{const d=this.chart.getDatasetMeta(l);if(!d)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:d.data[c],index:c}}),i=!Lo(n,r),a=this._positionChanged(r,s);(i||a)&&(this._active=r,this._eventPosition=s,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,s,n=!0){if(s&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],a=this._getActiveElements(e,i,s,n),l=this._positionChanged(a,e),c=s||!Lo(a,i)||l;return c&&(this._active=a,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,s))),c}_getActiveElements(e,s,n,r){const i=this.options;if(e.type==="mouseout")return[];if(!r)return s.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const a=this.chart.getElementsAtEventForMode(e,i.mode,i,n);return i.reverse&&a.reverse(),a}_positionChanged(e,s){const{caretX:n,caretY:r,options:i}=this,a=di[i.position].call(this,e,s);return a!==!1&&(n!==a.x||r!==a.y)}}me(Nd,"positioners",di);var aN={id:"tooltip",_element:Nd,positioners:di,afterInit(t,e,s){s&&(t.tooltip=new Nd({chart:t,options:s}))},beforeUpdate(t,e,s){t.tooltip&&t.tooltip.initialize(s)},reset(t,e,s){t.tooltip&&t.tooltip.initialize(s)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const s={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...s,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",s)}},afterEvent(t,e){if(t.tooltip){const s=e.replay;t.tooltip.handleEvent(e.event,s,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:kx},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function oN(t,e){const s=[],{bounds:r,step:i,min:a,max:l,precision:c,count:d,maxTicks:u,maxDigits:h,includeBounds:f}=t,m=i||1,p=u-1,{min:y,max:b}=e,x=!Ae(a),g=!Ae(l),v=!Ae(d),w=(b-y)/(h+1);let _=Ef((b-y)/p/m)*m,S,P,E,k;if(_<1e-14&&!x&&!g)return[{value:y},{value:b}];k=Math.ceil(b/_)-Math.floor(y/_),k>p&&(_=Ef(k*_/p/m)*m),Ae(c)||(S=Math.pow(10,c),_=Math.ceil(_*S)/S),r==="ticks"?(P=Math.floor(y/_)*_,E=Math.ceil(b/_)*_):(P=y,E=b),x&&g&&i&&D1((l-a)/i,_/1e3)?(k=Math.round(Math.min((l-a)/_,u)),_=(l-a)/k,P=a,E=l):v?(P=x?a:P,E=g?l:E,k=d-1,_=(E-P)/k):(k=(E-P)/_,Ni(k,Math.round(k),_/1e3)?k=Math.round(k):k=Math.ceil(k));const T=Math.max(Tf(_),Tf(P));S=Math.pow(10,Ae(c)?T:c),P=Math.round(P*S)/S,E=Math.round(E*S)/S;let R=0;for(x&&(f&&P!==a?(s.push({value:a}),P<a&&R++,Ni(Math.round((P+R*_)*S)/S,a,Pm(a,w,t))&&R++):P<a&&R++);R<k;++R){const $=Math.round((P+R*_)*S)/S;if(g&&$>l)break;s.push({value:$})}return g&&f&&E!==l?s.length&&Ni(s[s.length-1].value,l,Pm(l,w,t))?s[s.length-1].value=l:s.push({value:l}):(!g||E===l)&&s.push({value:E}),s}function Pm(t,e,{horizontal:s,minRotation:n}){const r=An(n),i=(s?Math.sin(r):Math.cos(r))||.001,a=.75*e*(""+t).length;return Math.min(e/i,a)}class Em extends oa{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,s){return Ae(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:s,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this;const a=c=>r=s?r:c,l=c=>i=n?i:c;if(e){const c=Rr(r),d=Rr(i);c<0&&d<0?l(0):c>0&&d>0&&a(0)}if(r===i){let c=i===0?1:Math.abs(i*.05);l(i+c),e||a(r-c)}this.min=r,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:s,stepSize:n}=e,r;return n?(r=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),s=s||11),s&&(r=Math.min(s,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,s=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const r={maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:s.precision,step:s.stepSize,count:s.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:s.minRotation||0,includeBounds:s.includeBounds!==!1},i=this._range||this,a=oN(r,i);return e.bounds==="ticks"&&B1(a,this,"value"),e.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){const e=this.ticks;let s=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const r=(n-s)/Math.max(e.length-1,1)/2;s-=r,n+=r}this._startValue=s,this._endValue=n,this._valueRange=n-s}getLabelForValue(e){return q0(e,this.chart.options.locale,this.options.ticks.format)}}function Sd(t){const e=t.ticks;if(e.display&&t.display){const s=ht(e.backdropPadding);return ye(e.font&&e.font.size,ze.font.size)+s.height}return 0}function lN(t,e,s){return s=$e(s)?s:[s],{w:sj(t,e.string,s),h:s.length*e.lineHeight}}function Tm(t,e,s,n,r){return t===n||t===r?{start:e-s/2,end:e+s/2}:t<n||t>r?{start:e-s,end:e}:{start:e,end:e+s}}function cN(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},s=Object.assign({},e),n=[],r=[],i=t._pointLabels.length,a=t.options.pointLabels,l=a.centerPointLabels?Je/i:0;for(let c=0;c<i;c++){const d=a.setContext(t.getPointLabelContext(c));r[c]=d.padding;const u=t.getPointPosition(c,t.drawingArea+r[c],l),h=Ze(d.font),f=lN(t.ctx,h,t._pointLabels[c]);n[c]=f;const m=St(t.getIndexAngle(c)+l),p=Math.round(Ou(m)),y=Tm(p,u.x,f.w,0,180),b=Tm(p,u.y,f.h,90,270);dN(s,e,m,y,b)}t.setCenterPoint(e.l-s.l,s.r-e.r,e.t-s.t,s.b-e.b),t._pointLabelItems=fN(t,n,r)}function dN(t,e,s,n,r){const i=Math.abs(Math.sin(s)),a=Math.abs(Math.cos(s));let l=0,c=0;n.start<e.l?(l=(e.l-n.start)/i,t.l=Math.min(t.l,e.l-l)):n.end>e.r&&(l=(n.end-e.r)/i,t.r=Math.max(t.r,e.r+l)),r.start<e.t?(c=(e.t-r.start)/a,t.t=Math.min(t.t,e.t-c)):r.end>e.b&&(c=(r.end-e.b)/a,t.b=Math.max(t.b,e.b+c))}function uN(t,e,s){const n=t.drawingArea,{extra:r,additionalAngle:i,padding:a,size:l}=s,c=t.getPointPosition(e,n+r+a,i),d=Math.round(Ou(St(c.angle+Et))),u=gN(c.y,l.h,d),h=mN(d),f=pN(c.x,l.w,h);return{visible:!0,x:c.x,y:u,textAlign:h,left:f,top:u,right:f+l.w,bottom:u+l.h}}function hN(t,e){if(!e)return!0;const{left:s,top:n,right:r,bottom:i}=t;return!(Ss({x:s,y:n},e)||Ss({x:s,y:i},e)||Ss({x:r,y:n},e)||Ss({x:r,y:i},e))}function fN(t,e,s){const n=[],r=t._pointLabels.length,i=t.options,{centerPointLabels:a,display:l}=i.pointLabels,c={extra:Sd(i)/2,additionalAngle:a?Je/r:0};let d;for(let u=0;u<r;u++){c.padding=s[u],c.size=e[u];const h=uN(t,u,c);n.push(h),l==="auto"&&(h.visible=hN(h,d),h.visible&&(d=h))}return n}function mN(t){return t===0||t===180?"center":t<180?"left":"right"}function pN(t,e,s){return s==="right"?t-=e:s==="center"&&(t-=e/2),t}function gN(t,e,s){return s===90||s===270?t-=e/2:(s>270||s<90)&&(t-=e),t}function xN(t,e,s){const{left:n,top:r,right:i,bottom:a}=s,{backdropColor:l}=e;if(!Ae(l)){const c=_r(e.borderRadius),d=ht(e.backdropPadding);t.fillStyle=l;const u=n-d.left,h=r-d.top,f=i-n+d.width,m=a-r+d.height;Object.values(c).some(p=>p!==0)?(t.beginPath(),Fo(t,{x:u,y:h,w:f,h:m,radius:c}),t.fill()):t.fillRect(u,h,f,m)}}function yN(t,e){const{ctx:s,options:{pointLabels:n}}=t;for(let r=e-1;r>=0;r--){const i=t._pointLabelItems[r];if(!i.visible)continue;const a=n.setContext(t.getPointLabelContext(r));xN(s,a,i);const l=Ze(a.font),{x:c,y:d,textAlign:u}=i;Mr(s,t._pointLabels[r],c,d+l.lineHeight/2,l,{color:a.color,textAlign:u,textBaseline:"middle"})}}function Nx(t,e,s,n){const{ctx:r}=t;if(s)r.arc(t.xCenter,t.yCenter,e,0,At);else{let i=t.getPointPosition(0,e);r.moveTo(i.x,i.y);for(let a=1;a<n;a++)i=t.getPointPosition(a,e),r.lineTo(i.x,i.y)}}function vN(t,e,s,n,r){const i=t.ctx,a=e.circular,{color:l,lineWidth:c}=e;!a&&!n||!l||!c||s<0||(i.save(),i.strokeStyle=l,i.lineWidth=c,i.setLineDash(r.dash||[]),i.lineDashOffset=r.dashOffset,i.beginPath(),Nx(t,s,a,n),i.closePath(),i.stroke(),i.restore())}function bN(t,e,s){return mn(t,{label:s,index:e,type:"pointLabel"})}class ui extends Em{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=ht(Sd(this.options)/2),s=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+s/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(s,n)/2)}determineDataLimits(){const{min:e,max:s}=this.getMinMax(!1);this.min=ot(e)&&!isNaN(e)?e:0,this.max=ot(s)&&!isNaN(s)?s:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Sd(this.options))}generateTickLabels(e){Em.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((s,n)=>{const r=Pe(this.options.pointLabels.callback,[s,n],this);return r||r===0?r:""}).filter((s,n)=>this.chart.getDataVisibility(n))}fit(){const e=this.options;e.display&&e.pointLabels.display?cN(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,s,n,r){this.xCenter+=Math.floor((e-s)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,s,n,r))}getIndexAngle(e){const s=At/(this._pointLabels.length||1),n=this.options.startAngle||0;return St(e*s+An(n))}getDistanceFromCenterForValue(e){if(Ae(e))return NaN;const s=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*s:(e-this.min)*s}getValueForDistanceFromCenter(e){if(Ae(e))return NaN;const s=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-s:this.min+s}getPointLabelContext(e){const s=this._pointLabels||[];if(e>=0&&e<s.length){const n=s[e];return bN(this.getContext(),e,n)}}getPointPosition(e,s,n=0){const r=this.getIndexAngle(e)-Et+n;return{x:Math.cos(r)*s+this.xCenter,y:Math.sin(r)*s+this.yCenter,angle:r}}getPointPositionForValue(e,s){return this.getPointPosition(e,this.getDistanceFromCenterForValue(s))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:s,top:n,right:r,bottom:i}=this._pointLabelItems[e];return{left:s,top:n,right:r,bottom:i}}drawBackground(){const{backgroundColor:e,grid:{circular:s}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),Nx(this,this.getDistanceFromCenterForValue(this._endValue),s,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,s=this.options,{angleLines:n,grid:r,border:i}=s,a=this._pointLabels.length;let l,c,d;if(s.pointLabels.display&&yN(this,a),r.display&&this.ticks.forEach((u,h)=>{if(h!==0||h===0&&this.min<0){c=this.getDistanceFromCenterForValue(u.value);const f=this.getContext(h),m=r.setContext(f),p=i.setContext(f);vN(this,m,c,a,p)}}),n.display){for(e.save(),l=a-1;l>=0;l--){const u=n.setContext(this.getPointLabelContext(l)),{color:h,lineWidth:f}=u;!f||!h||(e.lineWidth=f,e.strokeStyle=h,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,c=this.getDistanceFromCenterForValue(s.reverse?this.min:this.max),d=this.getPointPosition(l,c),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(d.x,d.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,s=this.options,n=s.ticks;if(!n.display)return;const r=this.getIndexAngle(0);let i,a;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((l,c)=>{if(c===0&&this.min>=0&&!s.reverse)return;const d=n.setContext(this.getContext(c)),u=Ze(d.font);if(i=this.getDistanceFromCenterForValue(this.ticks[c].value),d.showLabelBackdrop){e.font=u.string,a=e.measureText(l.label).width,e.fillStyle=d.backdropColor;const h=ht(d.backdropPadding);e.fillRect(-a/2-h.left,-i-u.size/2-h.top,a+h.width,u.size+h.height)}Mr(e,l.label,0,-i,u,{color:d.color,strokeColor:d.textStrokeColor,strokeWidth:d.textStrokeWidth})}),e.restore()}drawTitle(){}}me(ui,"id","radialLinear"),me(ui,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Y0.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),me(ui,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),me(ui,"descriptors",{angleLines:{_fallback:"grid"}});const bl={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},vt=Object.keys(bl);function Am(t,e){return t-e}function Om(t,e){if(Ae(e))return null;const s=t._adapter,{parser:n,round:r,isoWeekday:i}=t._parseOpts;let a=e;return typeof n=="function"&&(a=n(a)),ot(a)||(a=typeof n=="string"?s.parse(a,n):s.parse(a)),a===null?null:(r&&(a=r==="week"&&($o(i)||i===!0)?s.startOf(a,"isoWeek",i):s.startOf(a,r)),+a)}function Rm(t,e,s,n){const r=vt.length;for(let i=vt.indexOf(t);i<r-1;++i){const a=bl[vt[i]],l=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((s-e)/(l*a.size))<=n)return vt[i]}return vt[r-1]}function wN(t,e,s,n,r){for(let i=vt.length-1;i>=vt.indexOf(s);i--){const a=vt[i];if(bl[a].common&&t._adapter.diff(r,n,a)>=e-1)return a}return vt[s?vt.indexOf(s):0]}function _N(t){for(let e=vt.indexOf(t)+1,s=vt.length;e<s;++e)if(bl[vt[e]].common)return vt[e]}function Mm(t,e,s){if(!s)t[e]=!0;else if(s.length){const{lo:n,hi:r}=Ru(s,e),i=s[n]>=e?s[n]:s[r];t[i]=!0}}function jN(t,e,s,n){const r=t._adapter,i=+r.startOf(e[0].value,n),a=e[e.length-1].value;let l,c;for(l=i;l<=a;l=+r.add(l,1,n))c=s[l],c>=0&&(e[c].major=!0);return e}function Lm(t,e,s){const n=[],r={},i=e.length;let a,l;for(a=0;a<i;++a)l=e[a],r[l]=a,n.push({value:l,major:!1});return i===0||!s?n:jN(t,n,r,s)}class Ho extends oa{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,s={}){const n=e.time||(e.time={}),r=this._adapter=new ck._date(e.adapters.date);r.init(s),ki(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=s.normalized}parse(e,s){return e===void 0?null:Om(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,s=this._adapter,n=e.time.unit||"day";let{min:r,max:i,minDefined:a,maxDefined:l}=this.getUserBounds();function c(d){!a&&!isNaN(d.min)&&(r=Math.min(r,d.min)),!l&&!isNaN(d.max)&&(i=Math.max(i,d.max))}(!a||!l)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),r=ot(r)&&!isNaN(r)?r:+s.startOf(Date.now(),n),i=ot(i)&&!isNaN(i)?i:+s.endOf(Date.now(),n)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let s=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(s=e[0],n=e[e.length-1]),{min:s,max:n}}buildTicks(){const e=this.options,s=e.time,n=e.ticks,r=n.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,a=this.max,l=U1(r,i,a);return this._unit=s.unit||(n.autoSkip?Rm(s.minUnit,this.min,this.max,this._getLabelCapacity(i)):wN(this,l.length,s.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:_N(this._unit),this.initOffsets(r),e.reverse&&l.reverse(),Lm(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let s=0,n=0,r,i;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?s=1-r:s=(this.getDecimalForValue(e[1])-r)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?n=i:n=(i-this.getDecimalForValue(e[e.length-2]))/2);const a=e.length<3?.5:.25;s=Ns(s,0,a),n=Ns(n,0,a),this._offsets={start:s,end:n,factor:1/(s+1+n)}}_generate(){const e=this._adapter,s=this.min,n=this.max,r=this.options,i=r.time,a=i.unit||Rm(i.minUnit,s,n,this._getLabelCapacity(s)),l=ye(r.ticks.stepSize,1),c=a==="week"?i.isoWeekday:!1,d=$o(c)||c===!0,u={};let h=s,f,m;if(d&&(h=+e.startOf(h,"isoWeek",c)),h=+e.startOf(h,d?"day":a),e.diff(n,s,a)>1e5*l)throw new Error(s+" and "+n+" are too far apart with stepSize of "+l+" "+a);const p=r.ticks.source==="data"&&this.getDataTimestamps();for(f=h,m=0;f<n;f=+e.add(f,l,a),m++)Mm(u,f,p);return(f===n||r.bounds==="ticks"||m===1)&&Mm(u,f,p),Object.keys(u).sort(Am).map(y=>+y)}getLabelForValue(e){const s=this._adapter,n=this.options.time;return n.tooltipFormat?s.format(e,n.tooltipFormat):s.format(e,n.displayFormats.datetime)}format(e,s){const r=this.options.time.displayFormats,i=this._unit,a=s||r[i];return this._adapter.format(e,a)}_tickFormatFunction(e,s,n,r){const i=this.options,a=i.ticks.callback;if(a)return Pe(a,[e,s,n],this);const l=i.time.displayFormats,c=this._unit,d=this._majorUnit,u=c&&l[c],h=d&&l[d],f=n[s],m=d&&h&&f&&f.major;return this._adapter.format(e,r||(m?h:u))}generateTickLabels(e){let s,n,r;for(s=0,n=e.length;s<n;++s)r=e[s],r.label=this._tickFormatFunction(r.value,s,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const s=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((s.start+n)*s.factor)}getValueForPixel(e){const s=this._offsets,n=this.getDecimalForPixel(e)/s.factor-s.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const s=this.options.ticks,n=this.ctx.measureText(e).width,r=An(this.isHorizontal()?s.maxRotation:s.minRotation),i=Math.cos(r),a=Math.sin(r),l=this._resolveTickFontOptions(0).size;return{w:n*i+l*a,h:n*a+l*i}}_getLabelCapacity(e){const s=this.options.time,n=s.displayFormats,r=n[s.unit]||n.millisecond,i=this._tickFormatFunction(e,0,Lm(this,[e],this._majorUnit),r),a=this._getLabelSize(i),l=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return l>0?l:1}getDataTimestamps(){let e=this._cache.data||[],s,n;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(s=0,n=r.length;s<n;++s)e=e.concat(r[s].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let s,n;if(e.length)return e;const r=this.getLabels();for(s=0,n=r.length;s<n;++s)e.push(Om(this,r[s]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return H1(e.sort(Am))}}me(Ho,"id","time"),me(Ho,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Ua(t,e,s){let n=0,r=t.length-1,i,a,l,c;s?(e>=t[n].pos&&e<=t[r].pos&&({lo:n,hi:r}=yd(t,"pos",e)),{pos:i,time:l}=t[n],{pos:a,time:c}=t[r]):(e>=t[n].time&&e<=t[r].time&&({lo:n,hi:r}=yd(t,"time",e)),{time:i,pos:l}=t[n],{time:a,pos:c}=t[r]);const d=a-i;return d?l+(c-l)*(e-i)/d:l}class Dm extends Ho{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),s=this._table=this.buildLookupTable(e);this._minPos=Ua(s,this.min),this._tableRange=Ua(s,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:s,max:n}=this,r=[],i=[];let a,l,c,d,u;for(a=0,l=e.length;a<l;++a)d=e[a],d>=s&&d<=n&&r.push(d);if(r.length<2)return[{time:s,pos:0},{time:n,pos:1}];for(a=0,l=r.length;a<l;++a)u=r[a+1],c=r[a-1],d=r[a],Math.round((u+c)/2)!==d&&i.push({time:d,pos:a/(l-1)});return i}_generate(){const e=this.min,s=this.max;let n=super.getDataTimestamps();return(!n.includes(e)||!n.length)&&n.splice(0,0,e),(!n.includes(s)||n.length===1)&&n.push(s),n.sort((r,i)=>r-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const s=this.getDataTimestamps(),n=this.getLabelTimestamps();return s.length&&n.length?e=this.normalize(s.concat(n)):e=s.length?s:n,e=this._cache.all=e,e}getDecimalForValue(e){return(Ua(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const s=this._offsets,n=this.getDecimalForPixel(e)/s.factor-s.end;return Ua(this._table,n*this._tableRange+this._minPos,!0)}}me(Dm,"id","timeseries"),me(Dm,"defaults",Ho.defaults);const Sx="label";function Bm(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function kN(t,e){const s=t.options;s&&e&&Object.assign(s,e)}function Cx(t,e){t.labels=e}function Px(t,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Sx;const n=[];t.datasets=e.map(r=>{const i=t.datasets.find(a=>a[s]===r[s]);return!i||!r.data||n.includes(i)?{...r}:(n.push(i),Object.assign(i,r),i)})}function NN(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Sx;const s={labels:[],datasets:[]};return Cx(s,t.labels),Px(s,t.datasets,e),s}function SN(t,e){const{height:s=150,width:n=300,redraw:r=!1,datasetIdKey:i,type:a,data:l,options:c,plugins:d=[],fallbackContent:u,updateMode:h,...f}=t,m=N.useRef(null),p=N.useRef(null),y=()=>{m.current&&(p.current=new yl(m.current,{type:a,data:NN(l,i),options:c&&{...c},plugins:d}),Bm(e,p.current))},b=()=>{Bm(e,null),p.current&&(p.current.destroy(),p.current=null)};return N.useEffect(()=>{!r&&p.current&&c&&kN(p.current,c)},[r,c]),N.useEffect(()=>{!r&&p.current&&Cx(p.current.config.data,l.labels)},[r,l.labels]),N.useEffect(()=>{!r&&p.current&&l.datasets&&Px(p.current.config.data,l.datasets,i)},[r,l.datasets]),N.useEffect(()=>{p.current&&(r?(b(),setTimeout(y)):p.current.update(h))},[r,c,l.labels,l.datasets,h]),N.useEffect(()=>{p.current&&(b(),setTimeout(y))},[a]),N.useEffect(()=>(y(),()=>b()),[]),He.createElement("canvas",{ref:m,role:"img",height:s,width:n,...f},u)}const CN=N.forwardRef(SN);function PN(t,e){return yl.register(e),N.forwardRef((s,n)=>He.createElement(CN,{...s,ref:n,type:t}))}const EN=PN("radar",so);yl.register(ui,io,Ks,q2,aN,X2);const Im=["Spin Finish","Burst Finish","Over Finish","Extreme Finish"],uc={"Spin Finish":1,"Burst Finish":2,"Over Finish":2,"Extreme Finish":3};function TN({onBack:t}){const[e,s]=N.useState([]),[n,r]=N.useState(""),[i,a]=N.useState({}),[l,c]=N.useState(""),[d,u]=N.useState(!0),[h,f]=N.useState(!1),[m,p]=N.useState(!1),[y,b]=N.useState("player");N.useEffect(()=>{x()},[]),N.useEffect(()=>{n&&g()},[n]);const x=async()=>{try{const{data:k,error:T}=await H.from("tournaments").select("id, name, status, tournament_date").order("tournament_date",{ascending:!1});if(T)throw T;s(k||[]);const R=k==null?void 0:k.find($=>$.status==="completed");R&&r(R.id)}catch(k){console.error("Error fetching tournaments:",k)}finally{u(!1)}},g=async()=>{f(!0),a({}),c("");try{const{data:k,error:T}=await H.from("match_results").select(`
          player1_name,
          player2_name,
          player1_beyblade,
          player2_beyblade,
          winner_name,
          outcome,
          points_awarded
        `).eq("tournament_id",n);if(T)throw T;if(!k||k.length===0){a({});return}const R={};k.forEach($=>{const G=$.player1_name,le=$.player2_name,O=$.player1_beyblade,z=$.player2_beyblade,V=$.winner_name,K=($.outcome||"").split(" (")[0].trim()||"Unknown",J=$.points_awarded||uc[K]||0;if(R[G]||(R[G]={name:G,beys:[],matches:[],winFinishes:{},loseFinishes:{},beyStats:{},wins:0,losses:0,points:0}),R[le]||(R[le]={name:le,beys:[],matches:[],winFinishes:{},loseFinishes:{},beyStats:{},wins:0,losses:0,points:0}),O&&!R[G].beys.includes(O)&&R[G].beys.push(O),z&&!R[le].beys.includes(z)&&R[le].beys.push(z),!V||!G||!le)return;const re=V===G?le:G,ie=V===G?O:z,M=V===G?z:O;R[V].wins++,R[V].points+=J,R[V].winFinishes[K]=(R[V].winFinishes[K]||0)+1,R[V].matches.push({result:"win",bey:ie,outcome:K,opponent:re,opponentBey:M}),R[re].losses++,R[re].loseFinishes[K]=(R[re].loseFinishes[K]||0)+1,R[re].matches.push({result:"loss",bey:M,outcome:K,opponent:V,opponentBey:ie}),!(!ie||!M)&&(R[V].beyStats[ie]||(R[V].beyStats[ie]={win:0,loss:0,finishes:{},lossFinishes:{},points:0}),R[re].beyStats[M]||(R[re].beyStats[M]={win:0,loss:0,finishes:{},lossFinishes:{},points:0}),R[V].beyStats[ie].win++,R[V].beyStats[ie].points+=J,R[V].beyStats[ie].finishes[K]=(R[V].beyStats[ie].finishes[K]||0)+1,R[re].beyStats[M].loss++,R[re].beyStats[M].lossFinishes[K]=(R[re].beyStats[M].lossFinishes[K]||0)+1)}),a(R)}catch(k){console.error("Error fetching tournament data:",k),a({})}finally{f(!1)}},v=k=>Object.entries(k).reduce((T,[R,$])=>$>T[1]?[R,$]:T,["",-1])[0]||"N/A",w=k=>{let T="",R=-1;for(const le of k.beys){const O=k.beyStats[le]||{points:0,win:0};O.points>R&&(R=O.points,T=le)}const $=k.beyStats[T],G=$?`${$.win} wins, ${$.points} pts`:"No matches";return{bey:T||"N/A",reason:G}},_=k=>({labels:Im,datasets:[{label:"Point Contribution",data:Im.map(T=>{const R=k[T]||0,$=uc[T]||0;return R*$}),backgroundColor:"rgba(33, 150, 243, 0.2)",borderColor:"#2196f3",pointBackgroundColor:"#2196f3",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"#2196f3"}]}),S={responsive:!0,maintainAspectRatio:!1,scales:{r:{suggestedMin:0,ticks:{stepSize:2},title:{display:!0,text:"Points"}}},plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(k){const T=k.label,R=k.raw,$=winFinishes[T]||0,G=uc[T]||0;return`${T}: ${R} pts (${$}  ${G})`}}}}},P=()=>{if(!l||!i[l])return null;const k=i[l],{bey:T,reason:R}=w(k),$=k.wins+k.losses,G=$?(k.wins/$*100).toFixed(1):"0.0",le=$?(k.points/$).toFixed(2):"0.00";return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[o.jsxs("div",{className:"flex items-center mb-6",children:[o.jsx("div",{className:"w-16 h-16 bg-blue-500 rounded-full flex items-center justify-center text-white text-2xl font-bold mr-4",children:k.name.charAt(0).toUpperCase()}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:k.name}),o.jsx("p",{className:"text-gray-600",children:"Tournament Player"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Most Valuable Bey"}),o.jsx("p",{className:"text-lg font-semibold text-gray-900",children:T}),o.jsx("p",{className:"text-sm text-gray-500",children:R})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Most Common Finish (Win)"}),o.jsx("p",{className:"text-lg font-semibold text-green-600",children:v(k.winFinishes)})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Most Common Finish (Loss)"}),o.jsx("p",{className:"text-lg font-semibold text-red-600",children:v(k.loseFinishes)})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Win Rate"}),o.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[G,"% (",k.wins," of ",$,")  ",le," pts/match"]})]})]}),o.jsx("div",{className:"flex justify-center",children:o.jsx("div",{style:{width:"300px",height:"300px"},children:o.jsx(EN,{data:_(k.winFinishes),options:S})})})]}),o.jsxs("div",{className:"flex justify-center space-x-4 mt-6",children:[o.jsx("button",{onClick:()=>p(!m),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:m?"Hide Advanced":"Show Advanced"}),o.jsxs("button",{onClick:()=>b("matches"),className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors flex items-center space-x-2",children:[o.jsx(Cu,{size:16}),o.jsx("span",{children:"Show All Matches"})]})]})]}),m&&o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[o.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"Advanced Statistics"}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Win by Finish"}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Beyblade"}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Spin"}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Burst"}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Over"}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Extreme"}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Wins"}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Points"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k.beys.map(O=>{const z=k.beyStats[O]||{finishes:{},win:0,points:0};return o.jsxs("tr",{className:"bg-green-50",children:[o.jsx("td",{className:"px-4 py-2 text-sm font-medium text-gray-900",children:O}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:z.finishes["Spin Finish"]||0}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:z.finishes["Burst Finish"]||0}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:z.finishes["Over Finish"]||0}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:z.finishes["Extreme Finish"]||0}),o.jsx("td",{className:"px-4 py-2 text-sm font-semibold text-gray-900",children:z.win}),o.jsx("td",{className:"px-4 py-2 text-sm font-semibold text-gray-900",children:z.points})]},O)})})]})})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Loss by Finish"}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Beyblade"}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Spin"}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Burst"}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Over"}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Extreme"}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Losses"}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Points Given"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k.beys.map(O=>{const z=k.beyStats[O]||{lossFinishes:{},loss:0},V=z.lossFinishes||{},W=(V["Spin Finish"]||0)*1+(V["Burst Finish"]||0)*2+(V["Over Finish"]||0)*2+(V["Extreme Finish"]||0)*3;return o.jsxs("tr",{className:"bg-red-50",children:[o.jsx("td",{className:"px-4 py-2 text-sm font-medium text-gray-900",children:O}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:V["Spin Finish"]||0}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:V["Burst Finish"]||0}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:V["Over Finish"]||0}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:V["Extreme Finish"]||0}),o.jsx("td",{className:"px-4 py-2 text-sm font-semibold text-gray-900",children:z.loss}),o.jsx("td",{className:"px-4 py-2 text-sm font-semibold text-gray-900",children:W})]},O)})})]})})]})]})]})]})},E=()=>{if(!l||!i[l])return null;const k=i[l];return o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:["All Matches for ",o.jsx("strong",{children:k.name})]}),o.jsxs("button",{onClick:()=>b("player"),className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700 transition-colors flex items-center space-x-2",children:[o.jsx(ml,{size:16}),o.jsx("span",{children:"Back to Player Stats"})]})]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Result"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Your Bey"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Opponent"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Opponent's Bey"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Finish"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k.matches.map((T,R)=>o.jsxs("tr",{className:T.result==="win"?"bg-green-50":"bg-red-50",children:[o.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm font-medium ${T.result==="win"?"text-green-800":"text-red-800"}`,children:T.result==="win"?"Win":"Loss"}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:T.bey}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:T.opponent}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:T.opponentBey||"-"}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:T.outcome})]},R))})]})})]})};return d?o.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading tournaments..."})]})}):h?o.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Player Performance Analysis"}),o.jsx("p",{className:"text-gray-600",children:"Analyze individual player statistics and performance"})]}),o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading player data..."})]})]}):o.jsx("div",{className:"page-container",children:o.jsxs("div",{className:"content-wrapper",children:[o.jsx("div",{className:"page-header",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"page-title",children:"Tournament Analytics"}),o.jsx("p",{className:"page-subtitle",children:"Comprehensive tournament and player statistics"})]}),o.jsxs("div",{className:"filter-tabs",children:[o.jsx("button",{onClick:()=>{t&&t()},className:"filter-tab filter-tab-inactive",children:"Overview"}),o.jsx("button",{onClick:()=>{t&&(t(),setTimeout(()=>{const k=new CustomEvent("navigateToMetaAnalysis");window.dispatchEvent(k)},50))},className:"filter-tab filter-tab-inactive",children:"Meta Analysis"}),o.jsx("button",{className:"filter-tab filter-tab-active",children:"Player Analytics"})]})]})}),o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Tournament Selection"}),o.jsxs("div",{className:"max-w-md",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Tournament"}),o.jsxs("select",{value:n,onChange:k=>r(k.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.jsx("option",{value:"",children:"-- Select Tournament --"}),e.map(k=>o.jsxs("option",{value:k.id,children:[k.name," (",k.status,")"]},k.id))]})]})]}),n&&o.jsxs(o.Fragment,{children:[Object.keys(i).length===0&&o.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 mb-8",children:o.jsx("p",{className:"text-yellow-800",children:"No player data found for this tournament. Make sure there are completed matches with valid player names and Beyblade information."})}),Object.keys(i).length>0&&o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[o.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[o.jsx(A0,{className:"mr-2",size:24}),"Player Selection"]}),o.jsxs("div",{className:"max-w-md",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Player"}),o.jsxs("select",{value:l,onChange:k=>{c(k.target.value),b("player"),p(!1)},className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.jsx("option",{value:"",children:"-- Select Player --"}),Object.keys(i).sort().map(k=>o.jsx("option",{value:k,children:k},k))]})]})]}),l&&(y==="player"?P():E())]})]})})}function AN(){const[t,e]=He.useState("overview"),[s,n]=He.useState(!1);He.useEffect(()=>{const h=()=>{n(!0),e("meta"),setTimeout(()=>n(!1),50)},f=()=>{n(!0),e("player"),setTimeout(()=>n(!1),50)};return window.addEventListener("navigateToMetaAnalysis",h),window.addEventListener("navigateToPlayerAnalytics",f),()=>{window.removeEventListener("navigateToMetaAnalysis",h),window.removeEventListener("navigateToPlayerAnalytics",f)}},[]);const[r,i]=He.useState({totalTournaments:0,activePlayers:0,completedMatches:0,upcomingEvents:0,completedTournaments:[],activeTournaments:0,upcomingTournaments:0}),[a,l]=He.useState(!0);He.useEffect(()=>{(async()=>{try{const[f,m,p,y]=await Promise.all([H.from("tournaments").select("*"),H.from("profiles").select("*",{count:"exact",head:!0}),H.from("match_results").select("*"),H.from("tournament_registrations").select("*",{count:"exact",head:!0})]),b=f.data||[],x=p.data||[],g=b.filter(S=>S.status==="completed"),v=b.filter(S=>S.status==="active").length,w=b.filter(S=>S.status==="upcoming").length,_=x.length;i({totalTournaments:b.length,activePlayers:m.count||0,completedMatches:_,upcomingEvents:w,completedTournaments:g,activeTournaments:v,upcomingTournaments:w})}catch(f){console.error("Error fetching analytics:",f),i({totalTournaments:0,activePlayers:0,completedMatches:0,upcomingEvents:0,completedTournaments:[],activeTournaments:0,upcomingTournaments:0})}finally{l(!1)}})()},[]);const[c,d]=He.useState([]);He.useEffect(()=>{(async()=>{try{const{data:f}=await H.from("match_results").select("player1_name, player2_name, winner_name");if(!f)return;const m={};f.forEach(y=>{!y.player1_name||!y.player2_name||!y.winner_name||[y.player1_name,y.player2_name].forEach(b=>{m[b]||(m[b]={wins:0,matches:0}),m[b].matches++,y.winner_name===b&&m[b].wins++})});const p=Object.entries(m).map(([y,b])=>({player:y,wins:b.wins,matches:b.matches,winRate:Math.round(b.wins/b.matches*100)})).sort((y,b)=>b.winRate-y.winRate).slice(0,4);d(p)}catch(f){console.error("Error calculating win rates:",f),d([])}})()},[]);const u=[{icon:Zt,label:"Total Tournaments",value:r.totalTournaments,color:"text-blue-600",bgColor:"bg-blue-100"},{icon:on,label:"Active Players",value:r.activePlayers,color:"text-green-600",bgColor:"bg-green-100"},{icon:T0,label:"Completed Matches",value:r.completedMatches,color:"text-purple-600",bgColor:"bg-purple-100"},{icon:Fn,label:"Upcoming Events",value:r.upcomingEvents,color:"text-orange-600",bgColor:"bg-orange-100"}];return a?o.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading analytics..."})]})}):t==="meta"?o.jsx(s1,{onBack:()=>{n(!0),e("overview"),setTimeout(()=>n(!1),50)}}):t==="player"?o.jsx(TN,{onBack:()=>{n(!0),e("overview"),setTimeout(()=>n(!1),50)}}):s?o.jsx("div",{className:"page-container",children:o.jsx("div",{className:"content-wrapper",children:o.jsx("div",{className:"text-center py-12",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"})})})}):o.jsx("div",{className:"page-container",children:o.jsxs("div",{className:"content-wrapper",children:[o.jsx("div",{className:"page-header",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"page-title",children:"Tournament Analytics"}),o.jsx("p",{className:"page-subtitle",children:"Comprehensive tournament and player statistics"})]}),o.jsxs("div",{className:"filter-tabs",children:[o.jsx("button",{onClick:()=>e("overview"),className:`filter-tab ${t==="overview"?"filter-tab-active":"filter-tab-inactive"}`,children:"Overview"}),o.jsx("button",{onClick:()=>e("meta"),className:`filter-tab ${t==="meta"?"filter-tab-active":"filter-tab-inactive"}`,children:"Meta Analysis"}),o.jsx("button",{onClick:()=>e("player"),className:`filter-tab ${t==="player"?"filter-tab-active":"filter-tab-inactive"}`,children:"Player Analytics"})]})]})}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:u.map((h,f)=>o.jsx("div",{className:"metric-card",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"metric-label",children:h.label}),o.jsx("p",{className:"metric-value",children:h.value})]}),o.jsx("div",{className:`p-3 rounded-lg ${h.bgColor} ${h.color}`,children:o.jsx(h.icon,{size:24})})]})},f))}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[o.jsxs("div",{className:"chart-container",children:[o.jsx("h2",{className:"chart-title",children:"Tournament Status"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-gray-700 font-inter font-medium",children:"Completed"}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"w-40 bg-gray-200 rounded-full h-3",children:o.jsx("div",{className:"bg-green-500 h-3 rounded-full",style:{width:`${r.totalTournaments>0?r.completedTournaments.length/r.totalTournaments*100:0}%`}})}),o.jsx("span",{className:"text-lg font-space-grotesk font-bold text-gray-900",children:r.completedTournaments.length})]})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-gray-700 font-inter font-medium",children:"Active"}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"w-40 bg-gray-200 rounded-full h-3",children:o.jsx("div",{className:"bg-blue-500 h-3 rounded-full",style:{width:`${r.totalTournaments>0?r.activeTournaments/r.totalTournaments*100:0}%`}})}),o.jsx("span",{className:"text-lg font-space-grotesk font-bold text-gray-900",children:r.activeTournaments})]})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-gray-700 font-inter font-medium",children:"Upcoming"}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"w-40 bg-gray-200 rounded-full h-3",children:o.jsx("div",{className:"bg-orange-500 h-3 rounded-full",style:{width:`${r.totalTournaments>0?r.upcomingTournaments/r.totalTournaments*100:0}%`}})}),o.jsx("span",{className:"text-lg font-space-grotesk font-bold text-gray-900",children:r.upcomingTournaments})]})]})]})]}),o.jsxs("div",{className:"chart-container",children:[o.jsx("h2",{className:"chart-title",children:"Top Player Win Rates"}),o.jsx("div",{className:"space-y-4",children:c.map((h,f)=>o.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 bg-gray-900 rounded-full flex items-center justify-center text-white font-space-grotesk font-bold",children:f+1}),o.jsxs("div",{children:[o.jsx("p",{className:"font-space-grotesk font-bold text-gray-900",children:h.player}),o.jsxs("p",{className:"text-gray-600 font-inter",children:[h.wins,"/",h.matches," matches"]})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("p",{className:"font-space-grotesk font-bold text-xl text-gray-900",children:[h.winRate,"%"]}),o.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-3",children:o.jsx("div",{className:"bg-green-500 h-3 rounded-full",style:{width:`${h.winRate}%`}})})]})]},h.player))})]})]}),o.jsxs("div",{className:"chart-container mt-8",children:[o.jsx("h2",{className:"chart-title",children:"Match Statistics"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"metric-value text-blue-600",children:r.completedMatches}),o.jsx("p",{className:"metric-label",children:"Completed Matches"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"metric-value text-orange-600",children:"0"}),o.jsx("p",{className:"metric-label",children:"Ongoing Matches"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"metric-value text-green-600",children:"0"}),o.jsx("p",{className:"metric-label",children:"Scheduled Matches"})]})]})]})]})})}const hc={"Over Finish (2 pts)":2,"Burst Finish (2 pts)":2,"Spin Finish (1 pt)":1,"Extreme Finish (3 pts)":3},ON=()=>{const{confirm:t,alert:e}=Kn(),[s,n]=N.useState([]),[r,i]=N.useState(""),[a,l]=N.useState({}),[c,d]=N.useState({}),[u,h]=N.useState(!0),[f,m]=N.useState(!1),[p,y]=N.useState(""),[b,x]=N.useState(""),[g,v]=N.useState(1),[w,_]=N.useState(""),[S,P]=N.useState({}),[E,k]=N.useState(0),[T,R]=N.useState(0),[$,G]=N.useState(2),[le,O]=N.useState(!1),[z,V]=N.useState(!1),[W,K]=N.useState(!1),[J,re]=N.useState(""),[ie,M]=N.useState({}),[ee,se]=N.useState(null);N.useEffect(()=>{ae()},[]),N.useEffect(()=>{r&&D(r)},[r]);const ae=async()=>{try{const{data:I,error:Y}=await H.from("tournaments").select("id, name, status, tournament_date, location, beyblades_per_player").order("tournament_date",{ascending:!1});if(Y)throw Y;n(I||[]);const Z=I==null?void 0:I.find(de=>de.status==="active");Z&&i(Z.id)}catch(I){console.error("Error fetching tournaments:",I)}finally{h(!1)}},D=async I=>{m(!0);try{const{data:Y,error:Z}=await H.from("tournament_registrations").select(`
          player_name,
          tournament_beyblades(
            beyblade_name,
            blade_line
          )
        `).eq("tournament_id",I).eq("status","confirmed").order("player_name",{ascending:!0});if(Z)throw Z;const de={},Me={};Y==null||Y.forEach(Ne=>{const Se=Ne.player_name,lt=Ne.tournament_beyblades.map(Lt=>Lt.beyblade_name),We=Ne.tournament_beyblades.map(Lt=>({name:Lt.beyblade_name,blade_line:Lt.blade_line}));lt.length>0&&(de[Se]=lt,Me[Se]=We)}),l(de),d(Me),F()}catch(Y){console.error("Error fetching player data:",Y),l({})}finally{m(!1)}},F=()=>{y(""),x(""),v(1),_(""),P({}),k(0),R(0),G(2),O(!1),M({}),d({}),re("")},B=(I,Y)=>{I===1?(y(Y),Y===b&&x("")):(x(Y),Y===p&&y("")),Y&&(P({}),k(0),R(0),G(2),O(!1),M({}))},ce=(I,Y)=>{var Se,lt,We;const Z=(he==null?void 0:he.beyblades_per_player)||3,de=Math.floor(Y/Z)+1,Me=Y%Z;if(de===1)return((Se=a[I])==null?void 0:Se[Me])||"";const Ne=(lt=ie[de])==null?void 0:lt[I];return Ne?Ne[Me]||"":((We=a[I])==null?void 0:We[Me])||""},j=(I,Y)=>{var Se,lt,We,Lt,gn,ct;const Z=(he==null?void 0:he.beyblades_per_player)||3,de=Math.floor(Y/Z)+1,Me=Y%Z;if(de===1)return((lt=(Se=c[I])==null?void 0:Se[Me])==null?void 0:lt.blade_line)||"";const Ne=(We=ie[de])==null?void 0:We[I];if(Ne){const fs=Ne[Me],qt=(Lt=c[I])==null?void 0:Lt.find(Ex=>Ex.name===fs);return(qt==null?void 0:qt.blade_line)||""}return((ct=(gn=c[I])==null?void 0:gn[Me])==null?void 0:ct.blade_line)||""},C=()=>{if(le){e("Phase Required",`Click Shuffle before adding the next match (after every ${(he==null?void 0:he.beyblades_per_player)||3} matches).`);return}if(!p||!b){e("Missing Players","Please select both players first.");return}let I=0;for(;S[I]!==void 0;)I++;const Y={...S,[I]:{outcome:null,winner:null,points:0}};P(Y);const Z=(he==null?void 0:he.beyblades_per_player)||3,de=Object.keys(Y).length;de>0&&de%Z===0&&O(!0)},L=(I,Y)=>{const Z={...S};if(Z[I]){Z[I].outcome=Y;const de=Y&&Z[I].winner&&hc[Y]||0;Z[I].points=de}P(Z),X(Z)},oe=(I,Y)=>{const Z={...S};if(Z[I]){Z[I].winner=Y;const de=Z[I].outcome&&Y&&hc[Z[I].outcome]||0;Z[I].points=de}P(Z),X(Z)},X=I=>{let Y=0,Z=0;Object.values(I).forEach(de=>{de.winner&&de.outcome&&de.points>0&&(de.winner===p?Y+=de.points:de.winner===b&&(Z+=de.points))}),k(Y),R(Z)},pe=I=>{const Y={...S};delete Y[I],P(Y),X(Y),O(!1)},ke=()=>{const I=$,Y={...ie};Y[I]||(Y[I]={[p]:[...a[p]||[]],[b]:[...a[b]||[]]}),M(Y),G(Z=>Z+1),O(!1)},A=(I,Y,Z)=>{M(de=>({...de,[I]:{...de[I],[Y]:Z}}))},Q=(I,Y)=>{se(Y),I.dataTransfer.effectAllowed="move"},q=I=>{I.preventDefault(),I.dataTransfer.dropEffect="move"},ne=(I,Y,Z,de)=>{var lt;if(I.preventDefault(),!ee)return;const Me=((lt=ie[Y])==null?void 0:lt[Z])||[],Ne=Me.indexOf(ee);if(Ne===-1)return;const Se=[...Me];Se.splice(Ne,1),Se.splice(de,0,ee),A(Y,Z,Se),se(null)},we=()=>{se(null)},Ue=async()=>{if(!w.trim()){e("Please enter the Tournament Officer name before submitting.");return}const I=Object.entries(S).filter(([Y,Z])=>Z.outcome&&Z.winner);if(I.length===0){e("No complete matches to submit.");return}K(!0),re("Submitting matches...");try{const Y=I.map(([Me,Ne])=>{const Se=parseInt(Me);return{tournament_id:r,round_number:g,player1_name:p,player2_name:b,player1_beyblade:ce(p,Se),player2_beyblade:ce(b,Se),player1_blade_line:j(p,Se),player2_blade_line:j(b,Se),outcome:Ne.outcome,winner_name:Ne.winner,points_awarded:Ne.points,match_number:Se+1,phase_number:Math.floor(Se/3)+1,tournament_officer:w}}),{error:Z}=await H.from("match_results").insert(Y);if(Z)throw Z;const{error:de}=await H.from("match_sessions").insert({tournament_id:r,round_number:g,player1_name:p,player2_name:b,player1_final_score:E,player2_final_score:T,winner_name:E>T?p:b,total_matches:I.length,tournament_officer:w,match_summary:I.map(([Me,Ne])=>{const Se=parseInt(Me),lt=ce(Ne.winner,Se),We=(he==null?void 0:he.beyblades_per_player)||3,Lt=Math.floor(Se/We)+1,gn=Se%We+1;return`Phase ${Lt}, Match ${gn}: ${Ne.outcome} by ${Ne.winner} using ${lt}`}).join("; "),phases:Object.keys(ie).length+1,deck_orders:ie});if(de)throw de;re(" Matches submitted successfully!"),V(!1),setTimeout(()=>{F(),re("")},2e3)}catch(Y){console.error("Error submitting matches:",Y),re(" Failed to submit matches. Please try again.")}finally{K(!1)}},Ht=()=>Object.entries(S).filter(([Y,Z])=>Z.outcome&&Z.winner).map(([Y,Z])=>{const de=parseInt(Y),Me=ce(Z.winner,de);return`Match ${de+1}: ${Z.outcome} by ${Z.winner} using ${Me}`}),he=s.find(I=>I.id===r),Vt=Object.keys(a),Rs=Vt.filter(I=>I!==b),pn=Vt.filter(I=>I!==p);return u?o.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading tournaments..."})]})}):o.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"OBC Match Tracker"}),o.jsx("p",{className:"text-gray-600",children:"Track tournament matches in real-time"})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Tournament Selection"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Tournament"}),o.jsxs("select",{value:r,onChange:I=>i(I.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.jsx("option",{value:"",children:"-- Select Tournament --"}),s.map(I=>o.jsxs("option",{value:I.id,children:[I.name," (",I.status,")"]},I.id))]})]}),he&&o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[o.jsx("h3",{className:"font-semibold text-gray-900",children:he.name}),o.jsxs("p",{className:"text-sm text-gray-600",children:["Status: ",o.jsx("span",{className:`capitalize ${he.status==="active"?"text-green-600":he.status==="upcoming"?"text-blue-600":"text-gray-600"}`,children:he.status})]}),o.jsxs("p",{className:"text-sm text-gray-600",children:["Date: ",new Date(he.tournament_date).toLocaleDateString()]}),o.jsxs("p",{className:"text-sm text-gray-600",children:["Location: ",he.location]})]})]})]}),r&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Match Setup"}),f?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading player data..."})]}):Object.keys(a).length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx(on,{size:48,className:"mx-auto text-gray-400 mb-4"}),o.jsx("p",{className:"text-gray-500",children:"No confirmed registrations found for this tournament"})]}):o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Round #"}),o.jsx("input",{type:"number",min:"1",value:g,onChange:I=>v(parseInt(I.target.value)||1),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Player 1"}),o.jsxs("select",{value:p,onChange:I=>B(1,I.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.jsx("option",{value:"",children:"-- Select Player 1 --"}),Rs.map(I=>o.jsx("option",{value:I,children:I},I))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Player 2"}),o.jsxs("select",{value:b,onChange:I=>B(2,I.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.jsx("option",{value:"",children:"-- Select Player 2 --"}),pn.map(I=>o.jsx("option",{value:I,children:I},I))]})]})]})]}),p&&b&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"bg-white border border-gray-200 rounded-lg shadow-md p-4 mb-6",children:o.jsxs("div",{className:"max-w-7xl mx-auto flex justify-between items-center",children:[o.jsx("div",{children:o.jsx("input",{type:"text",placeholder:"Tournament Officer",value:w,onChange:I=>_(I.target.value),className:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})}),o.jsxs("div",{className:"text-lg font-bold",children:[o.jsxs("span",{className:`${E>T?"text-green-600":E<T?"text-red-600":"text-gray-600"}`,children:[p,": ",E]}),o.jsx("span",{className:"mx-4 text-gray-400",children:"|"}),o.jsxs("span",{className:`${T>E?"text-green-600":T<E?"text-red-600":"text-gray-600"}`,children:[b,": ",T]})]})]})}),o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[o.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:["Phase 1 Decks (",(he==null?void 0:he.beyblades_per_player)||3," Beyblades)"]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b",children:[o.jsx("th",{className:"text-left py-2"}),o.jsx("th",{className:"text-left py-2 font-semibold",children:p}),o.jsx("th",{className:"text-left py-2 font-semibold",children:b})]})}),o.jsx("tbody",{children:Array.from({length:(he==null?void 0:he.beyblades_per_player)||3},(I,Y)=>{var Z,de;return o.jsxs("tr",{className:"border-b",children:[o.jsxs("td",{className:"py-2 font-medium",children:["Bey ",Y+1]}),o.jsx("td",{className:"py-2",children:((Z=a[p])==null?void 0:Z[Y])||""}),o.jsx("td",{className:"py-2",children:((de=a[b])==null?void 0:de[Y])||""})]},Y)})})]})})]}),o.jsx("div",{className:"space-y-4 mb-6",children:Object.entries(S).map(([I,Y])=>{var Lt,gn;const Z=parseInt(I),de=ce(p,Z),Me=ce(b,Z),Ne=Z+1,Se=(he==null?void 0:he.beyblades_per_player)||3,lt=Ne%Se===0&&Ne>0,We=Math.floor(Ne/Se)+1;return o.jsxs("div",{children:[o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Match ",Ne,": ",de," vs ",Me]}),o.jsx("button",{onClick:()=>pe(Z),className:"text-red-600 hover:bg-red-50 p-1 rounded",children:o.jsx(hs,{size:16})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold mb-2",children:"Outcome:"}),o.jsx("div",{className:"space-y-2",children:Object.keys(hc).map(ct=>o.jsx("button",{onClick:()=>L(Z,ct),className:`w-full text-left px-3 py-2 rounded border transition-colors ${Y.outcome===ct?"bg-blue-100 border-blue-300 text-blue-700":"bg-gray-50 border-gray-200 hover:bg-gray-100"}`,children:ct},ct))})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold mb-2",children:"Winner:"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("button",{onClick:()=>oe(Z,p),className:`w-full text-left px-3 py-2 rounded border transition-colors ${Y.winner===p?"bg-green-100 border-green-300 text-green-700":"bg-gray-50 border-gray-200 hover:bg-gray-100"}`,children:p}),o.jsx("button",{onClick:()=>oe(Z,b),className:`w-full text-left px-3 py-2 rounded border transition-colors ${Y.winner===b?"bg-green-100 border-green-300 text-green-700":"bg-gray-50 border-gray-200 hover:bg-gray-100"}`,children:b})]})]})]})]}),lt&&We>1&&ie[We]&&o.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg shadow-md p-6 mt-4 border-2 border-purple-200",children:[o.jsxs("h3",{className:"text-lg font-bold text-purple-900 mb-4 flex items-center",children:[o.jsx(xf,{className:"mr-2",size:20}),"Phase ",We," Decks - Drag to Reorder"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold mb-3 text-purple-800",children:p}),o.jsx("div",{className:"space-y-2",children:(Lt=ie[We][p])==null?void 0:Lt.map((ct,fs)=>o.jsxs("div",{draggable:!0,onDragStart:qt=>Q(qt,ct),onDragOver:q,onDrop:qt=>ne(qt,We,p,fs),onDragEnd:we,className:`bg-white p-3 rounded border-2 cursor-move transition-all duration-200 flex items-center ${ee===ct?"border-purple-400 shadow-lg opacity-50":"border-gray-200 hover:border-purple-300 hover:shadow-md"}`,children:[o.jsx(gf,{size:16,className:"text-gray-400 mr-2"}),o.jsxs("span",{className:"font-medium text-gray-700",children:[fs+1,"."]}),o.jsx("span",{className:"ml-2",children:ct})]},`${We}-${p}-${fs}`))})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold mb-3 text-purple-800",children:b}),o.jsx("div",{className:"space-y-2",children:(gn=ie[We][b])==null?void 0:gn.map((ct,fs)=>o.jsxs("div",{draggable:!0,onDragStart:qt=>Q(qt,ct),onDragOver:q,onDrop:qt=>ne(qt,We,b,fs),onDragEnd:we,className:`bg-white p-3 rounded border-2 cursor-move transition-all duration-200 flex items-center ${ee===ct?"border-purple-400 shadow-lg opacity-50":"border-gray-200 hover:border-purple-300 hover:shadow-md"}`,children:[o.jsx(gf,{size:16,className:"text-gray-400 mr-2"}),o.jsxs("span",{className:"font-medium text-gray-700",children:[fs+1,"."]}),o.jsx("span",{className:"ml-2",children:ct})]},`${We}-${b}-${fs}`))})]})]})]})]},I)})}),o.jsxs("div",{className:"flex justify-center space-x-4 mb-6",children:[o.jsxs("button",{onClick:le?ke:C,className:"bg-blue-600 text-white px-6 py-3 rounded-md hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[o.jsx(Mn,{size:20}),o.jsx("span",{children:le?"Shuffle":"Add Match"})]}),o.jsxs("button",{onClick:()=>V(!0),disabled:Object.values(S).every(I=>!I.outcome||!I.winner),className:"bg-green-600 text-white px-6 py-3 rounded-md hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[o.jsx($_,{size:20}),o.jsx("span",{children:"Submit Scores"})]}),o.jsxs("button",{onClick:F,className:"bg-gray-600 text-white px-6 py-3 rounded-md hover:bg-gray-700 transition-colors flex items-center space-x-2",children:[o.jsx(xf,{size:20}),o.jsx("span",{children:"Refresh"})]})]}),J&&o.jsx("div",{className:"text-center py-4",children:o.jsx("p",{className:`font-semibold ${J.includes("")?"text-green-600":J.includes("")?"text-red-600":"text-blue-600"}`,children:J})})]})]}),z&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Match Summary"}),o.jsx("button",{onClick:()=>V(!1),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:o.jsx(Pt,{size:24})})]}),o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Final Scores"}),o.jsxs("p",{className:"text-xl",children:[o.jsxs("strong",{children:[p,":"]})," ",E," pts | ",o.jsxs("strong",{children:[b,":"]})," ",T," pts"]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Match Results"}),o.jsx("div",{className:"space-y-2",children:Ht().map((I,Y)=>o.jsx("p",{className:"text-gray-700",dangerouslySetInnerHTML:{__html:I}},Y))})]}),o.jsxs("div",{className:"flex justify-end space-x-3",children:[o.jsx("button",{onClick:()=>V(!1),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),o.jsxs("button",{onClick:Ue,disabled:W,className:"px-6 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors disabled:opacity-50 flex items-center space-x-2",children:[W&&o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),o.jsx("span",{children:"Confirm Submit"})]})]})]})]})})]})};function RN(){var B,ce;const{user:t}=ns(),[e,s]=N.useState([]),[n,r]=N.useState(!1),[i,a]=N.useState(null),[l,c]=N.useState({}),[d,u]=N.useState(null),[h,f]=N.useState([]),[m,p]=N.useState(!1),[y,b]=N.useState(!0),[x,g]=N.useState(null),[v,w]=N.useState([]),[_,S]=N.useState(!1),[P,E]=N.useState(null),[k,T]=N.useState({});N.useState(!1),N.useState([]),N.useState(!1);const R=(t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="developer";He.useEffect(()=>{O()},[]);const $=async j=>{p(!0);try{const{data:C,error:L}=await H.from("tournament_registration_details").select("*").eq("tournament_id",j).order("registered_at",{ascending:!1});if(L)throw L;const oe={};C==null||C.forEach(X=>{oe[X.registration_id]||(oe[X.registration_id]={registration_id:X.registration_id,tournament_id:X.tournament_id,player_name:X.player_name,payment_mode:X.payment_mode,registered_at:X.registered_at,status:X.status,payment_status:X.payment_status,beyblades:[]}),X.beyblade_id&&(oe[X.registration_id].beyblades.find(ke=>ke.beyblade_id===X.beyblade_id)||oe[X.registration_id].beyblades.push({beyblade_id:X.beyblade_id,beyblade_name:X.beyblade_name,blade_line:X.blade_line,parts:X.beyblade_parts||[]}))}),f(Object.values(oe))}catch(C){console.error("Error fetching registrations:",C),f([])}finally{p(!1)}},G=async(j,C)=>{try{console.log("Updating payment status:",{registrationId:j,newStatus:C});const{error:L}=await H.from("tournament_registrations").update({payment_status:C}).eq("id",j);if(L)throw console.error("Payment status update error:",L),L.code==="42501"||L.message.includes("RLS")?alert("Permission denied. You need admin or developer role to update payment status."):alert(`Failed to update payment status: ${L.message}`),L;console.log("Payment status updated successfully"),await O(),alert("Payment status updated successfully!")}catch(L){console.error("Error updating payment status:",L)}},le=(j,C)=>C==="Custom"?["Lockchip","Main Blade","Assist Blade","Ratchet","Bit"].map(oe=>j.find(X=>X.part_type===oe)).filter(Boolean):["Blade","Ratchet","Bit"].map(oe=>j.find(X=>X.part_type===oe)).filter(Boolean),O=async()=>{try{const{data:j,error:C}=await H.from("tournaments").select("*").order("tournament_date",{ascending:!1});if(C)throw C;const L=await Promise.all((j||[]).map(async oe=>{const{count:X}=await H.from("tournament_registrations").select("*",{count:"exact",head:!0}).eq("tournament_id",oe.id).eq("status","confirmed");return{...oe,current_participants:X||0}}));s(L)}catch(j){console.error("Error fetching tournaments:",j)}finally{b(!1)}},z=()=>{r(!0),c({name:"",description:"",tournament_date:"",location:"",max_participants:16,has_participant_limit:!0,status:"upcoming",registration_deadline:"",prize_pool:"",beyblades_per_player:3,players_per_team:1,is_free:!0,entry_fee:0,tournament_type:"casual"})},V=j=>{a(j.id),c(j)},W=async()=>{try{if(n){const{error:j}=await H.from("tournaments").insert([l]);if(j){console.error("Insert error:",j),j.code==="42501"||j.message.includes("RLS")?alert("Permission denied. You need admin or developer role to create tournaments."):alert(`Failed to create tournament: ${j.message}`);return}}else if(i){const{error:j}=await H.from("tournaments").update(l).eq("id",i);if(j){console.error("Update error:",j),j.code==="42501"||j.message.includes("RLS")||j.code==="42883"?alert("Permission denied. You need admin or developer role to edit tournaments."):alert(`Failed to update tournament: ${j.message}`);return}}await O(),r(!1),a(null),c({})}catch(j){console.error("Error saving tournament:",j),alert(`Failed to save tournament: ${j instanceof Error?j.message:"Unknown error"}. Please try again.`)}},K=()=>{r(!1),a(null),c({})},J=async j=>{if(confirm("Are you sure you want to delete this tournament? This will permanently delete ALL related data including registrations, beyblades, parts, matches, and sessions. This action cannot be undone."))try{const{error:C}=await H.from("tournaments").delete().eq("id",j);if(C){console.error("Delete error:",C),C.code==="42501"||C.message.includes("RLS")||C.message.includes("permission")?alert("Permission denied. You need admin or developer role to delete tournaments."):alert(`Failed to delete tournament: ${C.message}`);return}alert("Tournament deleted successfully!"),await O()}catch(C){console.error("Error deleting tournament:",C),alert(`Failed to delete tournament: ${C instanceof Error?C.message:"Unknown error"}. Please try again.`)}},re=async j=>{S(!0),g(j);try{const{data:C,error:L}=await H.from("match_results").select("*").eq("tournament_id",j).order("submitted_at",{ascending:!1});if(L)throw L;w(C||[])}catch(C){console.error("Error fetching matches:",C),alert("Failed to load matches. Please try again.")}finally{S(!1)}},ie=j=>{E(j.id),T({...j})},M=async()=>{if(!(!P||!R))try{const{error:j}=await H.from("match_results").update(k).eq("id",P);if(j){console.error("Update error:",j),alert(`Failed to update match: ${j.message}`);return}E(null),T({}),await re(x),alert("Match updated successfully!")}catch(j){console.error("Error updating match:",j),alert(`Failed to update match: ${j instanceof Error?j.message:"Unknown error"}`)}},ee=()=>{E(null),T({})},se=async j=>{if(confirm("Are you sure you want to delete this match? This action cannot be undone."))try{const{error:C}=await H.from("match_results").delete().eq("id",j);if(C){console.error("Delete error:",C),alert(`Failed to delete match: ${C.message}`);return}alert("Match deleted successfully!"),await re(x)}catch(C){console.error("Error deleting match:",C),alert(`Failed to delete match: ${C instanceof Error?C.message:"Unknown error"}`)}},ae=j=>{switch(j){case"upcoming":return"bg-blue-100 text-blue-800";case"active":return"bg-green-100 text-green-800";case"completed":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},D=j=>{u(j),$(j)},F=()=>{u(null),f([])};if(y)return o.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading tournaments..."})]})});if(d){const j=e.find(C=>C.id===d);return o.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[o.jsxs("div",{className:"mb-8",children:[o.jsxs("button",{onClick:F,className:"flex items-center space-x-2 text-blue-600 hover:text-blue-800 font-medium transition-colors mb-4",children:[o.jsx(ml,{size:20}),o.jsx("span",{children:"Back to Tournament Manager"})]}),o.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:[j==null?void 0:j.name," - Registrations"]}),o.jsx("p",{className:"text-gray-600",children:"Manage tournament registrations and payment status"})]}),m?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading registrations..."})]}):h.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx(on,{size:48,className:"mx-auto text-gray-400 mb-4"}),o.jsx("p",{className:"text-gray-500",children:"No registrations found for this tournament"})]}):o.jsx("div",{className:"space-y-6",children:h.map(C=>o.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white font-bold",children:C.player_name.charAt(0).toUpperCase()}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-lg text-gray-900",children:C.player_name}),o.jsxs("p",{className:"text-sm text-gray-600",children:["Registered: ",new Date(C.registered_at).toLocaleDateString()]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Payment Mode:"}),o.jsx("p",{className:"font-medium capitalize",children:C.payment_mode==="free"?"Free":C.payment_mode.replace("_"," ").replace(/\b\w/g,L=>L.toUpperCase())||"N/A"})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Status:"}),o.jsx("p",{className:"font-medium capitalize",children:C.status})]})]})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Payment Status"}),o.jsxs("select",{value:C.payment_status||"unpaid",onChange:L=>G(C.registration_id,L.target.value),className:"text-xs border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-1 focus:ring-blue-500 bg-white",children:[o.jsx("option",{value:"unpaid",children:"Unpaid"}),o.jsx("option",{value:"paid",children:"Paid"}),o.jsx("option",{value:"confirmed",children:"Confirmed"})]})]}),o.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${C.payment_status==="confirmed"?"bg-green-100 text-green-800":C.payment_status==="paid"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:C.payment_status||"unpaid"})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("h4",{className:"font-semibold text-gray-900 flex items-center",children:[o.jsx(Zt,{size:16,className:"mr-2 text-yellow-500"}),"Registered Beyblades (",C.beyblades.length,")"]}),C.beyblades.length===0?o.jsx("p",{className:"text-gray-500 text-sm italic",children:"No Beyblades registered"}):o.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:C.beyblades.map((L,oe)=>o.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[o.jsxs("div",{className:"flex justify-between items-center mb-3",children:[o.jsx("h5",{className:"font-semibold text-gray-900",children:L.beyblade_name}),o.jsxs("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:[L.blade_line," Line"]})]}),L.parts&&L.parts.length>0?o.jsx("div",{className:"grid grid-cols-2 gap-2",children:le(L.parts,L.blade_line).map((X,pe)=>o.jsxs("div",{className:"bg-white border border-gray-300 p-2 rounded text-xs",children:[o.jsx("div",{className:"font-medium text-gray-700",children:X.part_type}),o.jsx("div",{className:"text-gray-600",children:X.part_name})]},pe))}):o.jsx("p",{className:"text-gray-500 text-xs",children:"No parts configured"})]},L.beyblade_id))})]})]},C.registration_id))})]})}return o.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[o.jsxs("div",{className:"flex justify-between items-center mb-8",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Tournament Manager"}),o.jsx("p",{className:"text-gray-600",children:"Create and manage tournaments"})]}),o.jsx("div",{className:"flex space-x-3",children:R&&o.jsxs("button",{onClick:z,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[o.jsx(Mn,{size:20}),o.jsx("span",{children:"Create Tournament"})]})})]}),(n||i)&&o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:n?"Create New Tournament":"Edit Tournament"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tournament Name"}),o.jsx("input",{type:"text",value:l.name||"",onChange:j=>c({...l,name:j.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),o.jsx("input",{type:"text",value:l.location||"",onChange:j=>c({...l,location:j.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tournament Date"}),o.jsx("input",{type:"date",value:l.tournament_date||"",onChange:j=>c({...l,tournament_date:j.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Registration Deadline"}),o.jsx("input",{type:"date",value:l.registration_deadline||"",onChange:j=>c({...l,registration_deadline:j.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Participant Limit"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs("label",{className:"flex items-center",children:[o.jsx("input",{type:"radio",checked:l.has_participant_limit,onChange:()=>c({...l,has_participant_limit:!0}),className:"mr-2"}),o.jsx("span",{className:"text-sm text-gray-700",children:"Set participant limit"})]}),o.jsxs("label",{className:"flex items-center",children:[o.jsx("input",{type:"radio",checked:!l.has_participant_limit,onChange:()=>c({...l,has_participant_limit:!1}),className:"mr-2"}),o.jsx("span",{className:"text-sm text-gray-700",children:"No limit"})]})]}),l.has_participant_limit&&o.jsx("input",{type:"number",min:"1",value:l.max_participants,onChange:j=>c({...l,max_participants:parseInt(j.target.value)||1}),placeholder:"Maximum participants",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prize Pool"}),o.jsx("input",{type:"text",value:l.prize_pool||"",onChange:j=>c({...l,prize_pool:j.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., $500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tournament Type"}),o.jsxs("select",{value:l.tournament_type||"casual",onChange:j=>c({...l,tournament_type:j.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.jsx("option",{value:"casual",children:"Casual"}),o.jsx("option",{value:"ranked",children:"Ranked"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Entry Type"}),o.jsxs("select",{value:l.is_free?"free":"paid",onChange:j=>{const C=j.target.value==="free";c({...l,is_free:C,entry_fee:C?0:l.entry_fee||50})},className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.jsx("option",{value:"free",children:"Free Entry"}),o.jsx("option",{value:"paid",children:"Paid Entry"})]})]}),!l.is_free&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Entry Fee"}),o.jsx("input",{type:"number",step:"0.01",min:"0",value:l.entry_fee||"",onChange:j=>c({...l,entry_fee:parseFloat(j.target.value)||0}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Beyblades per Player"}),o.jsx("input",{type:"number",min:"1",max:"5",value:l.beyblades_per_player||3,onChange:j=>c({...l,beyblades_per_player:parseInt(j.target.value)}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Players per Team"}),o.jsx("input",{type:"number",min:"1",max:"4",value:l.players_per_team||1,onChange:j=>c({...l,players_per_team:parseInt(j.target.value)}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),o.jsx("textarea",{value:l.description||"",onChange:j=>c({...l,description:j.target.value}),rows:3,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),!n&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),o.jsxs("select",{value:l.status||"",onChange:j=>c({...l,status:j.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.jsx("option",{value:"upcoming",children:"Upcoming"}),o.jsx("option",{value:"active",children:"Active"}),o.jsx("option",{value:"completed",children:"Completed"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tournament Type"}),o.jsxs("select",{value:l.tournament_type||"casual",onChange:j=>c({...l,tournament_type:j.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.jsx("option",{value:"casual",children:"Casual"}),o.jsx("option",{value:"ranked",children:"Ranked"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Entry Type"}),o.jsxs("select",{value:l.is_free?"free":"paid",onChange:j=>{const C=j.target.value==="free";c({...l,is_free:C,entry_fee:C?0:l.entry_fee||50})},className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.jsx("option",{value:"free",children:"Free Entry"}),o.jsx("option",{value:"paid",children:"Paid Entry"})]})]}),!l.is_free&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Entry Fee ()"}),o.jsx("input",{type:"number",step:"0.01",min:"0",value:l.entry_fee||"",onChange:j=>c({...l,entry_fee:parseFloat(j.target.value)||0}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"50.00"})]})]})]}),o.jsxs("div",{className:"flex space-x-3 mt-6",children:[o.jsxs("button",{onClick:W,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[o.jsx(Or,{size:16}),o.jsx("span",{children:"Save"})]}),o.jsxs("button",{onClick:K,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors flex items-center space-x-2",children:[o.jsx(Pt,{size:16}),o.jsx("span",{children:"Cancel"})]})]})]}),o.jsx("div",{className:"space-y-4",children:e.map(j=>o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[o.jsx("h3",{className:"text-xl font-bold text-gray-900",children:j.name}),o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium capitalize ${ae(j.status)}`,children:j.status})]}),o.jsx("p",{className:"text-gray-600 mb-2",children:j.description}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-gray-600",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",children:"Date:"})," ",new Date(j.tournament_date).toLocaleDateString()]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",children:"Location:"})," ",j.location]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",children:"Participants:"})," ",j.current_participants,"/",j.max_participants===999999?"":j.max_participants]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",children:"Prize Pool:"})," ",j.prize_pool]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",children:"Type:"}),o.jsx("span",{className:`ml-1 capitalize ${j.tournament_type==="ranked"?"text-orange-600 font-semibold":"text-gray-600"}`,children:j.tournament_type})]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",children:"Entry:"}),o.jsx("span",{className:`ml-1 ${j.is_free?"text-green-600":"text-blue-600"} font-semibold`,children:j.is_free?"Free":`${j.entry_fee}`})]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",children:"Beyblades/Player:"})," ",j.beyblades_per_player]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",children:"Players/Team:"})," ",j.players_per_team]})]})]}),o.jsxs("div",{className:"flex space-x-2",children:[R&&o.jsx("button",{onClick:()=>V(j),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-md transition-colors",title:"Edit Tournament",children:o.jsx(Un,{size:16})}),o.jsx("button",{onClick:()=>D(j.id),className:"p-2 text-green-600 hover:bg-green-50 rounded-md transition-colors",title:"View Registrations",children:o.jsx(Cu,{size:16})}),o.jsx("button",{onClick:()=>re(j.id),className:"p-2 text-purple-600 hover:bg-purple-50 rounded-md transition-colors",title:"View Matches",children:o.jsx(yf,{size:16})}),R&&o.jsx("button",{onClick:()=>J(j.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-md transition-colors",title:"Delete Tournament",children:o.jsx(hs,{size:16})})]})]}),o.jsx("div",{className:"border-t pt-4",children:o.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[o.jsxs("span",{children:["Registration Deadline: ",new Date(j.registration_deadline).toLocaleDateString()]}),o.jsxs("span",{children:["Tournament ID: ",j.id]})]})})]},j.id))}),d&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Tournament Registrations"}),o.jsx("p",{className:"text-gray-600",children:(B=e.find(j=>j.id===d))==null?void 0:B.name})]}),o.jsx("button",{onClick:()=>u(null),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:o.jsx(Pt,{size:24})})]}),o.jsx("div",{className:"p-6",children:m?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading registrations..."})]}):h.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx(on,{size:48,className:"mx-auto text-gray-400 mb-4"}),o.jsx("p",{className:"text-gray-500",children:"No registrations yet for this tournament"})]}):o.jsx("div",{className:"space-y-6",children:h.map(j=>o.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg p-6 shadow-sm",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-gray-900",children:j.player_name}),o.jsxs("p",{className:"text-sm text-gray-600",children:["Registered: ",new Date(j.registered_at).toLocaleString()]}),o.jsxs("p",{className:"text-sm text-gray-600",children:["Payment: ",o.jsx("span",{className:"capitalize",children:j.payment_mode.replace("_"," ")})]})]}),o.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${j.status==="confirmed"?"bg-green-100 text-green-800":j.status==="cancelled"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:j.status})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h4",{className:"font-semibold text-gray-900",children:"Registered Beyblades:"}),j.beyblades.map(C=>o.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsx("h5",{className:"font-medium text-gray-900",children:C.beyblade_name}),o.jsxs("span",{className:"text-sm text-gray-600 bg-white px-2 py-1 rounded",children:[C.blade_line," Line"]})]}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-2 text-sm",children:C.parts.map((L,oe)=>o.jsxs("div",{className:"bg-white border border-gray-300 p-2 rounded",children:[o.jsx("div",{className:"font-medium text-gray-700",children:L.part_type}),o.jsx("div",{className:"text-gray-600",children:L.part_name})]},oe))})]},C.beyblade_id))]})]},j.registration_id))})})]})}),x&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-7xl w-full max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Tournament Matches"}),o.jsx("p",{className:"text-gray-600",children:(ce=e.find(j=>j.id===x))==null?void 0:ce.name})]}),o.jsx("button",{onClick:()=>{g(null),E(null),T({})},className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:o.jsx(Pt,{size:24})})]}),o.jsx("div",{className:"p-6",children:_?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading matches..."})]}):v.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx(yf,{size:48,className:"mx-auto text-gray-400 mb-4"}),o.jsx("p",{className:"text-gray-500",children:"No matches found for this tournament"})]}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Round"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Match #"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Player 1"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Player 1 Bey"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Player 2"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Player 2 Bey"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Winner"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Outcome"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Points"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Officer"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),R&&o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:v.map(j=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:P===j.id?o.jsx("input",{type:"number",value:k.round_number||"",onChange:C=>T({...k,round_number:parseInt(C.target.value)}),className:"w-16 border border-gray-300 rounded px-2 py-1 text-sm"}):j.round_number}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:P===j.id?o.jsx("input",{type:"number",value:k.match_number||"",onChange:C=>T({...k,match_number:parseInt(C.target.value)}),className:"w-16 border border-gray-300 rounded px-2 py-1 text-sm"}):j.match_number}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:P===j.id?o.jsx("input",{type:"text",value:k.player1_name||"",onChange:C=>T({...k,player1_name:C.target.value}),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm"}):j.player1_name}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:P===j.id?o.jsx("input",{type:"text",value:k.player1_beyblade||"",onChange:C=>T({...k,player1_beyblade:C.target.value}),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm"}):j.player1_beyblade}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:P===j.id?o.jsx("input",{type:"text",value:k.player2_name||"",onChange:C=>T({...k,player2_name:C.target.value}),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm"}):j.player2_name}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:P===j.id?o.jsx("input",{type:"text",value:k.player2_beyblade||"",onChange:C=>T({...k,player2_beyblade:C.target.value}),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm"}):j.player2_beyblade}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:P===j.id?o.jsxs("select",{value:k.winner_name||"",onChange:C=>T({...k,winner_name:C.target.value}),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm",children:[o.jsx("option",{value:"",children:"Select Winner"}),o.jsx("option",{value:k.player1_name,children:k.player1_name}),o.jsx("option",{value:k.player2_name,children:k.player2_name})]}):o.jsx("span",{className:`font-medium ${j.winner_name===j.player1_name?"text-green-600":"text-blue-600"}`,children:j.winner_name})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:P===j.id?o.jsxs("select",{value:k.outcome||"",onChange:C=>T({...k,outcome:C.target.value}),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm",children:[o.jsx("option",{value:"",children:"Select Outcome"}),o.jsx("option",{value:"Spin Finish (1 pt)",children:"Spin Finish (1 pt)"}),o.jsx("option",{value:"Burst Finish (2 pts)",children:"Burst Finish (2 pts)"}),o.jsx("option",{value:"Over Finish (2 pts)",children:"Over Finish (2 pts)"}),o.jsx("option",{value:"Extreme Finish (3 pts)",children:"Extreme Finish (3 pts)"})]}):j.outcome}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:P===j.id?o.jsx("input",{type:"number",value:k.points_awarded||"",onChange:C=>T({...k,points_awarded:parseInt(C.target.value)}),className:"w-16 border border-gray-300 rounded px-2 py-1 text-sm"}):j.points_awarded}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:P===j.id?o.jsx("input",{type:"text",value:k.tournament_officer||"",onChange:C=>T({...k,tournament_officer:C.target.value}),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm"}):j.tournament_officer}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(Fn,{size:12,className:"mr-1"}),new Date(j.created_at).toLocaleDateString()]})}),R&&o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:o.jsx("div",{className:"flex space-x-2",children:P===j.id?o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:M,className:"text-green-600 hover:text-green-900 p-1 rounded hover:bg-green-50",title:"Save Changes",children:o.jsx(Or,{size:16})}),o.jsx("button",{onClick:ee,className:"text-gray-600 hover:text-gray-900 p-1 rounded hover:bg-gray-50",title:"Cancel",children:o.jsx(Pt,{size:16})})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>ie(j),className:"text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-50",title:"Edit Match",children:o.jsx(Un,{size:16})}),o.jsx("button",{onClick:()=>se(j.id),className:"text-red-600 hover:text-red-900 p-1 rounded hover:bg-red-50",title:"Delete Match",children:o.jsx(hs,{size:16})})]})})})]},j.id))})]})})})]})})]})}function MN(){const{user:t}=ns(),{confirm:e,alert:s}=Kn(),[n,r]=N.useState([]),[i,a]=N.useState("all"),[l,c]=N.useState("all"),[d,u]=N.useState(!0),h=(t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="developer";He.useEffect(()=>{f()},[]);const f=async()=>{try{console.log(" USER MANAGEMENT: Fetching profiles...");const{data:g,error:v}=await H.from("profiles").select("*").order("created_at",{ascending:!1});if(v)throw console.error(" USER MANAGEMENT: Error fetching profiles:",v),v;console.log(" USER MANAGEMENT: Raw profiles data:",{count:(g==null?void 0:g.length)||0,sample:(g==null?void 0:g.slice(0,3))||[],allProfiles:g||[]});const w=(g||[]).map(_=>({id:_.id,username:_.username,email:_.email||"",role:_.role,joinedDate:_.created_at,status:"active",lastLogin:null}));console.log(" USER MANAGEMENT: Formatted profiles as users:",{count:w.length,sample:w.slice(0,3),roles:w.map(_=>_.role),statuses:w.map(_=>_.status)}),r(w),console.log(" USER MANAGEMENT: Profiles loaded successfully as users")}catch(g){console.error("Error fetching profiles:",g)}finally{u(!1)}},m=n.filter(g=>{const v=i==="all"||g.status===i,w=l==="all"||g.role===l;return v&&w}),p=async(g,v)=>{try{const{error:w}=await H.from("profiles").update(v).eq("id",g);if(w){const _=w.code==="42501"||w.message.includes("RLS")?"Permission denied. You need admin or developer role to update users.":`Failed to update user: ${w.message}`;await s("Update Failed",_);return}await f()}catch(w){console.error("Error updating user:",w),await s("Update Failed",`Failed to update user: ${w instanceof Error?w.message:"Unknown error"}`)}},y=async g=>{if(await e("Delete User","Are you sure you want to delete this user? This will also delete all their registrations and data. This action cannot be undone."))try{const{data:w,error:_}=await H.rpc("delete_user_completely",{user_id_to_delete:g});if(_){console.error("Delete error:",_),_.code==="42501"||_.message.includes("RLS")?await s("Permission Denied","You need admin or developer role to delete users."):_.message.includes("cannot delete themselves")?await s("Cannot Delete","You cannot delete your own account."):await s("Delete Failed",`Failed to delete user: ${_.message}`);return}await s("Success","User deleted successfully!"),await f()}catch(w){console.error("Error deleting user:",w),await s("Delete Failed",`Failed to delete user: ${w instanceof Error?w.message:"Unknown error"}. Please try again.`)}},b=g=>{switch(g){case"active":return"bg-green-100 text-green-800";case"suspended":return"bg-red-100 text-red-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},x=g=>{switch(g){case"admin":return"bg-red-100 text-red-800";case"developer":return"bg-purple-100 text-purple-800";case"technical_officer":return"bg-blue-100 text-blue-800";case"user":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return d?o.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading users..."})]})}):o.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"User Management"}),o.jsx("p",{className:"text-gray-600",children:"Manage user accounts and permissions"})]}),o.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Status"}),o.jsxs("select",{value:i,onChange:g=>a(g.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.jsx("option",{value:"all",children:"All Status"}),o.jsx("option",{value:"active",children:"Active"}),o.jsx("option",{value:"suspended",children:"Suspended"}),o.jsx("option",{value:"pending",children:"Pending"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Role"}),o.jsxs("select",{value:l,onChange:g=>c(g.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.jsx("option",{value:"all",children:"All Roles"}),o.jsx("option",{value:"user",children:"User"}),o.jsx("option",{value:"technical_officer",children:"Technical Officer"}),o.jsx("option",{value:"admin",children:"Admin"}),o.jsx("option",{value:"developer",children:"Developer"})]})]})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[o.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-3 rounded-lg bg-blue-100 text-blue-600",children:o.jsx(on,{size:24})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),o.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.length})]})]})}),o.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-3 rounded-lg bg-green-100 text-green-600",children:o.jsx(ji,{size:24})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Users"}),o.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.length})]})]})}),o.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-3 rounded-lg bg-red-100 text-red-600",children:o.jsx(ji,{size:24})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Suspended"}),o.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"0"})]})]})}),o.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-3 rounded-lg bg-purple-100 text-purple-600",children:o.jsx(ji,{size:24})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Admins"}),o.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.filter(g=>g.role==="admin"||g.role==="developer").length})]})]})})]}),o.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Joined"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Login"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m.map(g=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold",children:g.username.charAt(0).toUpperCase()}),o.jsxs("div",{className:"ml-4",children:[o.jsx("div",{className:"text-sm font-medium text-gray-900",children:g.username}),o.jsxs("div",{className:"text-sm text-gray-500 flex items-center",children:[o.jsx(R_,{size:12,className:"mr-1"}),g.email]})]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("select",{value:g.role,onChange:v=>p(g.id,{role:v.target.value}),disabled:!h,className:`text-xs font-medium px-2 py-1 rounded-full border-0 ${x(g.role)}`,children:[o.jsx("option",{value:"user",children:"User"}),o.jsx("option",{value:"technical_officer",children:"Technical Officer"}),o.jsx("option",{value:"admin",children:"Admin"}),o.jsx("option",{value:"developer",children:"Developer"})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("select",{value:"active",disabled:!h,className:`text-xs font-medium px-2 py-1 rounded-full border-0 ${b("active")}`,children:o.jsx("option",{value:"active",children:"Active"})})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(Fn,{size:12,className:"mr-1"}),new Date(g.joinedDate).toLocaleDateString()]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:"Never"}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:o.jsx("div",{className:"flex space-x-2",children:h&&o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-50",children:o.jsx(Un,{size:16})}),o.jsx("button",{onClick:()=>y(g.id),className:"text-red-600 hover:text-red-900 p-1 rounded hover:bg-red-50",children:o.jsx(hs,{size:16})})]})})})]},g.id))})]})})})]})}function LN(){var B,ce,j;const{user:t}=ns(),{confirm:e,alert:s}=Kn(),[n,r]=N.useState("tournaments"),[i,a]=N.useState(null),[l,c]=N.useState(!1),[d,u]=N.useState([]),[h,f]=N.useState(!1),[m,p]=N.useState(null),[y,b]=N.useState([]),[x,g]=N.useState(null),[v,w]=N.useState({}),[_,S]=N.useState(null),[P,E]=N.useState([]),[k,T]=N.useState(""),[R,$]=N.useState(1),[G]=N.useState(10);He.useEffect(()=>{a(null),S(null),g(null),w({}),T(""),$(1)},[n]);const le=(t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="developer",O=async()=>{try{console.log(" DATABASE: Fetching table counts...");const[C,L,oe,X]=await Promise.all([H.from("profiles").select("*",{count:"exact",head:!0}),H.from("tournaments").select("*",{count:"exact",head:!0}),H.from("match_results").select("*",{count:"exact",head:!0}),H.from("tournament_registrations").select("*",{count:"exact",head:!0})]);b([{name:"users",records:C.count||0,icon:o.jsx(on,{size:20}),description:"User accounts and profiles",color:"from-blue-500 to-blue-600"},{name:"tournaments",records:L.count||0,icon:o.jsx(Zt,{size:20}),description:"Tournament information",color:"from-yellow-500 to-orange-500"},{name:"matches",records:oe.count||0,icon:o.jsx(Fn,{size:20}),description:"Match results and schedules",color:"from-green-500 to-emerald-500"},{name:"registrations",records:X.count||0,icon:o.jsx(z_,{size:20}),description:"Tournament registrations with Beyblades",color:"from-purple-500 to-violet-500"}]);const{data:pe}=await H.from("tournaments").select("id, name").order("name");E(pe||[]),console.log(" DATABASE: Table counts loaded successfully")}catch(C){console.error("Error fetching table counts:",C)}},z=async(C,L)=>{f(!0),p(null),console.log(" DATABASE: Fetching table data for:",{tableName:C,tournamentId:L});try{let oe=[];if(C==="registrations"&&L){const{data:X,error:pe}=await H.from("tournament_registration_details").select("*").eq("tournament_id",L).order("registered_at",{ascending:!1});if(pe)throw pe;const ke={};X==null||X.forEach(A=>{var Q;ke[A.registration_id]||(ke[A.registration_id]={registration_id:A.registration_id,tournament_id:A.tournament_id,tournament_name:((Q=P.find(q=>q.id===A.tournament_id))==null?void 0:Q.name)||"Unknown Tournament",player_name:A.player_name,payment_mode:A.payment_mode,registered_at:A.registered_at,status:A.status,beyblades:[]}),A.beyblade_id&&(ke[A.registration_id].beyblades.find(ne=>ne.beyblade_id===A.beyblade_id)||ke[A.registration_id].beyblades.push({beyblade_id:A.beyblade_id,beyblade_name:A.beyblade_name,blade_line:A.blade_line,parts:A.beyblade_parts||[]}))}),oe=Object.values(ke)}else if(C==="registrations"&&!L)oe=P;else{let X=C;C==="registrations"?X="tournament_registrations":C==="users"?X="profiles":C==="matches"&&(X="match_results");const{data:pe,error:ke}=await H.from(X).select("*").order(C==="tournaments"?"tournament_date":C==="matches"?"submitted_at":"created_at",{ascending:!1});if(ke)throw console.error(` DATABASE: Error fetching ${C}:`,ke),ke;oe=pe||[]}(C!=="registrations"||L)&&oe.sort((X,pe)=>{const ke=Object.values(X).find(Q=>typeof Q=="string")||"",A=Object.values(pe).find(Q=>typeof Q=="string")||"";return ke.localeCompare(A)}),u(oe),console.log(` DATABASE: Table data loaded for ${C}:`,{finalCount:oe.length,hasData:oe.length>0})}catch(oe){console.error("Error fetching table data:",oe),p(`Failed to load ${C} data. Please try again.`)}finally{f(!1)}},V=async()=>{c(!0),await Promise.all([O(),z(n,i||void 0)]),c(!1)},W=C=>{const L=JSON.stringify(d,null,2),oe=new Blob([L],{type:"application/json"}),X=URL.createObjectURL(oe),pe=document.createElement("a");pe.href=X,pe.download=`${C}_export_${new Date().toISOString().split("T")[0]}.json`,pe.click(),URL.revokeObjectURL(X)},K=C=>{g(C.id||C.registration_id||C.tournament_id),w({...C})},J=async()=>{if(!(!x||!le))try{let C=n;n==="registrations"?C="tournament_registrations":n==="users"?C="profiles":n==="matches"&&(C="match_results");const{error:L}=await H.from(C).update(v).eq("id",x);if(L){console.error("Update error:",L),L.code==="42501"||L.message.includes("RLS")?await s("Permission Denied","You need admin or developer role to edit records."):await s("Update Failed",`Failed to update record: ${L.message}`);return}g(null),w({}),await z(n)}catch(C){console.error("Error updating row:",C),await s("Update Failed",`Failed to update record: ${C instanceof Error?C.message:"Unknown error"}. Please try again.`)}},re=async C=>{if(await e("Delete Record","Are you sure you want to delete this record? This action cannot be undone."))try{let oe=n;n==="registrations"?oe="tournament_registrations":n==="users"?oe="profiles":n==="matches"&&(oe="match_results");const{error:X}=await H.from(oe).delete().eq("id",C);if(X){console.error("Delete error:",X),X.code==="42501"||X.message.includes("RLS")?s("Permission denied. You need admin or developer role to delete records."):s(`Failed to delete record: ${X.message}`);return}await Promise.all([O(),z(n,i||void 0)])}catch(oe){console.error("Error deleting row:",oe),await s("Delete Failed",`Failed to delete record: ${oe instanceof Error?oe.message:"Unknown error"}. Please try again.`)}},ie=C=>{a(C),z("registrations",C)},M=()=>{a(null),z("registrations")},ee=C=>{S(C)};N.useEffect(()=>{O()},[]),N.useEffect(()=>{n==="registrations"&&a(null),z(n)},[n]);const se=d.filter(C=>k?Object.values(C).filter(oe=>typeof oe=="string").join(" ").toLowerCase().includes(k.toLowerCase()):!0),ae=Math.ceil(se.length/G),D=se.slice((R-1)*G,R*G),F=()=>{var C;return h?o.jsx("div",{className:"flex items-center justify-center py-16",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-500 border-t-transparent mx-auto mb-4"}),o.jsxs("p",{className:"text-gray-600 font-medium",children:["Loading ",n==="registrations"&&i?"registration":n," data..."]})]})}):m?o.jsx("div",{className:"flex items-center justify-center py-16",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx("span",{className:"text-red-500 text-2xl",children:""})}),o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Error Loading Data"}),o.jsx("p",{className:"text-red-600 mb-4",children:m}),o.jsx("button",{onClick:()=>z(n,i||void 0),className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"Try Again"})]})}):d.length===0?o.jsx("div",{className:"flex items-center justify-center py-16",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(to,{size:32,className:"text-gray-400"})}),o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Data Available"}),o.jsxs("p",{className:"text-gray-500",children:["No data available for ",n==="registrations"&&i?"this tournament":n]})]})}):n==="registrations"&&!i?o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-500 to-violet-500 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(Zt,{size:32,className:"text-white"})}),o.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Select Tournament"}),o.jsx("p",{className:"text-gray-600",children:"Choose a tournament to view its registrations and participant details"})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.map(L=>o.jsxs("button",{onClick:()=>ie(L.id),className:"group text-left p-6 bg-white border-2 border-gray-200 rounded-xl hover:border-purple-300 hover:shadow-lg transition-all duration-200 transform hover:-translate-y-1",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h4",{className:"font-semibold text-gray-900 group-hover:text-purple-700 transition-colors",children:L.name}),o.jsx(N0,{size:20,className:"text-gray-400 group-hover:text-purple-500 transition-colors"})]}),o.jsx("p",{className:"text-sm text-gray-600 mb-2",children:L.location}),o.jsx("p",{className:"text-sm text-gray-500",children:new Date(L.tournament_date).toLocaleDateString()}),o.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:o.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${L.status==="upcoming"?"bg-blue-100 text-blue-800":L.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:L.status})})]},L.id))})]}):n==="registrations"&&i?o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("button",{onClick:M,className:"flex items-center space-x-2 text-purple-600 hover:text-purple-800 font-medium transition-colors",children:[o.jsx(ml,{size:20}),o.jsx("span",{children:"Back to Tournaments"})]}),o.jsxs("h3",{className:"text-xl font-semibold text-gray-900",children:[((C=P.find(L=>L.id===i))==null?void 0:C.name)||"Tournament"," Registrations"]})]}),o.jsx("div",{className:"space-y-4",children:d.map(L=>{var oe;return o.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 hover:shadow-md transition-all duration-200",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white font-bold",children:L.player_name.charAt(0).toUpperCase()}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-lg text-gray-900",children:L.player_name}),o.jsx("p",{className:"text-sm text-gray-600",children:L.tournament_name})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Registered:"}),o.jsx("p",{className:"font-medium",children:new Date(L.registered_at).toLocaleDateString()})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Payment:"}),o.jsx("p",{className:"font-medium capitalize",children:((oe=L.payment_mode)==null?void 0:oe.replace("_"," "))||"N/A"})]})]})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${L.status==="confirmed"?"bg-green-100 text-green-800":L.status==="cancelled"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:L.status}),o.jsxs("div",{className:"flex space-x-1",children:[o.jsx("button",{onClick:()=>ee(L),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"View Details",children:o.jsx(Cu,{size:16})}),le&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>K(L),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Edit",children:o.jsx(Un,{size:16})}),o.jsx("button",{onClick:()=>re(L.registration_id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:o.jsx(hs,{size:16})})]})]})]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Beyblades:"}),o.jsxs("span",{className:"text-sm text-gray-600",children:[L.beyblades.length," registered"]})]}),o.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:L.beyblades.length>0?L.beyblades.map((X,pe)=>o.jsx("span",{className:"inline-block bg-white px-3 py-1 rounded-full text-xs font-medium text-gray-700 border",children:X.beyblade_name},pe)):o.jsx("span",{className:"text-sm text-gray-500 italic",children:"No Beyblades registered"})})]})]},L.registration_id)})})]}):o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-6 space-y-4 sm:space-y-0",children:[o.jsxs("div",{className:"relative",children:[o.jsx(C0,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),o.jsx("input",{type:"text",placeholder:`Search ${n}...`,value:k,onChange:L=>{T(L.target.value),$(1)},className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 w-64"})]}),o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs("span",{className:"text-sm text-gray-600",children:["Showing ",D.length," of ",se.length," records"]}),ae>1&&o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("button",{onClick:()=>$(Math.max(1,R-1)),disabled:R===1,className:"px-3 py-1 border border-gray-300 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors",children:"Previous"}),o.jsxs("span",{className:"text-sm text-gray-600",children:["Page ",R," of ",ae]}),o.jsx("button",{onClick:()=>$(Math.min(ae,R+1)),disabled:R===ae,className:"px-3 py-1 border border-gray-300 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors",children:"Next"})]})]})]}),o.jsx("div",{className:"bg-white border border-gray-200 rounded-xl overflow-hidden",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[D.length>0&&D[0]&&Object.keys(D[0]).map(L=>o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:L.replace(/_/g," ")},L)),le&&o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:D.map((L,oe)=>o.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[Object.entries(L).map(([X,pe],ke)=>o.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:x===(L.id||L.registration_id||L.tournament_id)&&le?o.jsx("input",{type:"text",value:v[X]||"",onChange:A=>w({...v,[X]:A.target.value}),className:"w-full border border-gray-300 rounded-md px-2 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}):o.jsx("div",{className:"max-w-xs",children:typeof pe=="object"&&pe!==null?o.jsx("div",{className:"bg-gray-100 rounded-md px-2 py-1 text-xs font-mono",children:JSON.stringify(pe).length>50?JSON.stringify(pe).substring(0,50)+"...":JSON.stringify(pe)}):pe instanceof Date?pe.toLocaleString():o.jsx("span",{className:X.includes("email")?"font-mono text-blue-600":"",children:String(pe||"")})})},ke)),le&&o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"flex items-center space-x-2",children:x===(L.id||L.registration_id||L.tournament_id)?o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:J,className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Save Changes",children:o.jsx(Or,{size:16})}),o.jsx("button",{onClick:()=>{g(null),w({})},className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",title:"Cancel",children:o.jsx(Pt,{size:16})})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>K(L),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit Record",children:o.jsx(Un,{size:16})}),o.jsx("button",{onClick:()=>re(L.id||L.registration_id||L.tournament_id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete Record",children:o.jsx(hs,{size:16})})]})})})]},L.id||oe))})]})})})]})};return o.jsx("div",{className:"page-container",children:o.jsxs("div",{className:"content-wrapper",children:[o.jsx("div",{className:"page-header",children:o.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center space-y-4 lg:space-y-0",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"page-title flex items-center",children:[o.jsx(to,{size:32,className:"mr-3 text-blue-600"}),"Database Management"]}),o.jsx("p",{className:"page-subtitle",children:"Monitor and manage application data from Supabase"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs("button",{onClick:V,disabled:l,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2 disabled:opacity-50",children:[o.jsx(I_,{size:16,className:l?"animate-spin":""}),o.jsx("span",{children:"Refresh"})]}),o.jsxs("button",{onClick:()=>W(n),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2",children:[o.jsx(E_,{size:16}),o.jsx("span",{children:"Export"})]})]})]})}),o.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-4 gap-8",children:[o.jsxs("div",{className:"xl:col-span-1",children:[o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[o.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 px-6 py-4 border-b border-gray-200",children:o.jsxs("h2",{className:"text-lg font-bold text-gray-900 flex items-center",children:[o.jsx(to,{size:20,className:"mr-2 text-gray-700"}),"Database Tables"]})}),o.jsx("div",{className:"p-4 space-y-2",children:y.map(C=>o.jsxs("button",{onClick:()=>r(C.name),className:`w-full text-left p-4 rounded-xl transition-all duration-200 group ${n===C.name?"bg-gradient-to-r "+C.color+" text-white shadow-lg transform scale-105":"hover:bg-gray-50 border border-gray-200"}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:`p-2 rounded-lg ${n===C.name?"bg-white/20":"bg-gray-100 group-hover:bg-gray-200"} transition-colors`,children:He.cloneElement(C.icon,{className:n===C.name?"text-white":"text-gray-600"})}),o.jsx("span",{className:`font-semibold capitalize ${n===C.name?"text-white":"text-gray-900"}`,children:C.name})]}),o.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-bold ${n===C.name?"bg-white/20 text-white":"bg-gray-100 text-gray-600"}`,children:C.records})]}),o.jsx("p",{className:`text-xs ${n===C.name?"text-white/80":"text-gray-600"}`,children:C.description})]},C.name))})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 mt-6 overflow-hidden",children:[o.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 px-6 py-4 border-b border-gray-200",children:o.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center",children:[o.jsx(Mo,{size:20,className:"mr-2 text-gray-700"}),"Database Stats"]})}),o.jsxs("div",{className:"p-6 space-y-4",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-gray-600 font-medium",children:"Total Records"}),o.jsx("span",{className:"text-2xl font-bold text-gray-900",children:y.reduce((C,L)=>C+L.records,0)})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-gray-600 font-medium",children:"Active Tables"}),o.jsx("span",{className:"text-2xl font-bold text-gray-900",children:y.length})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-gray-600 font-medium",children:"Database"}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),o.jsx("span",{className:"text-green-600 font-bold",children:"Supabase"})]})]}),o.jsx("div",{className:"pt-4 border-t border-gray-100",children:o.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["Last updated: ",new Date().toLocaleTimeString()]})})]})]})]}),o.jsx("div",{className:"xl:col-span-3",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[o.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 px-6 py-4 border-b border-gray-200",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsxs("h2",{className:"text-xl font-bold text-gray-900 capitalize flex items-center",children:[((B=y.find(C=>C.name===n))==null?void 0:B.icon)&&He.cloneElement(y.find(C=>C.name===n).icon,{className:"mr-2 text-gray-700",size:24}),n==="registrations"&&i?`${((ce=P.find(C=>C.id===i))==null?void 0:ce.name)||"Tournament"} Registrations`:n==="registrations"?"Tournament Selection":`${n} Management`]}),o.jsx("p",{className:"text-gray-600 mt-1",children:(j=y.find(C=>C.name===n))==null?void 0:j.description})]}),o.jsx("div",{className:"flex items-center space-x-2",children:o.jsx("span",{className:"text-sm text-gray-500 bg-gray-100 px-3 py-1 rounded-full",children:n==="registrations"&&!i?`${P.length} tournaments`:`${se.length} records`})})]})}),F()]})})]}),_&&o.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-5xl w-full max-h-[90vh] overflow-hidden",children:[o.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-violet-500 px-6 py-4 text-white",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Registration Details"}),o.jsx("p",{className:"text-purple-100",children:_.player_name})]}),o.jsx("button",{onClick:()=>S(null),className:"p-2 hover:bg-white/20 rounded-full transition-colors",children:o.jsx(Pt,{size:24})})]})}),o.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-80px)]",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Player Name"}),o.jsx("p",{className:"text-xl font-bold text-gray-900",children:_.player_name})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Tournament"}),o.jsx("p",{className:"text-lg text-gray-900",children:_.tournament_name})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Payment Mode"}),o.jsx("span",{className:"inline-block bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium capitalize",children:_.payment_mode.replace("_"," ")})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Status"}),o.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-sm font-medium ${_.status==="confirmed"?"bg-green-100 text-green-800":_.status==="cancelled"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:_.status})]})]})]}),o.jsx("div",{className:"bg-gray-50 rounded-xl p-4 mb-8",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Fn,{size:16,className:"text-gray-600"}),o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Registered on:"}),o.jsx("span",{className:"text-sm text-gray-900 font-semibold",children:new Date(_.registered_at).toLocaleString()})]})}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("h3",{className:"text-xl font-bold text-gray-900 flex items-center",children:[o.jsx(Zt,{size:24,className:"mr-2 text-yellow-500"}),"Registered Beyblades"]}),o.jsxs("span",{className:"bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm font-medium",children:[_.beyblades.length," Beyblades"]})]}),_.beyblades.length===0?o.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-xl",children:[o.jsx(Zt,{size:48,className:"mx-auto text-gray-400 mb-4"}),o.jsx("p",{className:"text-gray-500 font-medium",children:"No Beyblades registered"})]}):o.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:_.beyblades.map((C,L)=>o.jsxs("div",{className:"border-2 border-gray-200 rounded-xl p-6 hover:border-purple-300 transition-colors",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-lg text-gray-900",children:C.beyblade_name}),o.jsxs("span",{className:"inline-block bg-gradient-to-r from-blue-500 to-purple-500 text-white px-3 py-1 rounded-full text-sm font-medium mt-2",children:[C.blade_line," Line"]})]}),o.jsx("div",{className:"text-right",children:o.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full flex items-center justify-center text-white font-bold text-lg",children:L+1})})]}),C.parts.length>0?o.jsxs("div",{className:"space-y-3",children:[o.jsx("h5",{className:"font-semibold text-gray-700 text-sm uppercase tracking-wide",children:"Parts Configuration"}),o.jsx("div",{className:"grid grid-cols-1 gap-2",children:C.parts.map((oe,X)=>o.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3 flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold text-gray-900 text-sm",children:oe.part_type}),o.jsx("div",{className:"text-gray-600 text-xs",children:oe.part_name})]}),o.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-blue-600 text-xs font-bold",children:X+1})})]},X))})]}):o.jsx("div",{className:"text-center py-4 bg-gray-50 rounded-lg",children:o.jsx("p",{className:"text-gray-500 text-sm",children:"No parts configured"})})]},C.beyblade_id))})]})]})]})})]})})}function DN({showHeader:t=!0}){const{user:e}=ns(),{confirm:s,alert:n}=Kn();if(!e||e.id.startsWith("guest-"))return o.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Deck Builder"}),o.jsx("p",{className:"text-gray-600",children:"Create and save Beyblade deck presets"})]}),o.jsxs("div",{className:"text-center py-12",children:[o.jsx(sn,{size:64,className:"mx-auto text-gray-400 mb-6"}),o.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Advanced Deck Builder"}),o.jsx("p",{className:"text-gray-600 mb-8 max-w-2xl mx-auto",children:"Create powerful Beyblade combinations from your inventory. Build multiple deck presets, analyze stats, and save your favorite combinations for quick tournament registration."}),o.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-xl p-8 max-w-md mx-auto mb-8",children:[o.jsx("div",{className:"flex items-center justify-center mb-6",children:o.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-600 rounded-full flex items-center justify-center text-white text-2xl font-bold shadow-lg",children:""})}),o.jsx("h3",{className:"text-xl font-bold text-purple-900 mb-3",children:"Login to Start Building"}),o.jsx("p",{className:"text-purple-800 text-sm mb-6",children:"Create a free account to access the advanced deck builder and save your custom combinations!"}),o.jsxs("div",{className:"space-y-2 text-sm text-purple-700",children:[o.jsxs("div",{className:"flex items-center justify-center",children:[o.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full mr-2"}),"Build from your inventory"]}),o.jsxs("div",{className:"flex items-center justify-center",children:[o.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full mr-2"}),"Save unlimited deck presets"]}),o.jsxs("div",{className:"flex items-center justify-center",children:[o.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full mr-2"}),"Analyze combined stats"]})]})]}),o.jsx("div",{className:"bg-gray-50 rounded-lg p-6 max-w-lg mx-auto",children:o.jsxs("p",{className:"text-gray-600 text-sm",children:[o.jsx("strong",{children:"Ready to build?"}),' Click the "Login" button in the top right corner to create your account and start building powerful deck combinations.']})})]})]});const[r,i]=N.useState([]),[a,l]=N.useState([]),[c,d]=N.useState(!0),[u,h]=N.useState(!1),[f,m]=N.useState(null),[p,y]=N.useState(!0),[b,x]=N.useState({blades:[],ratchets:[],bits:[],lockchips:[],assistBlades:[]}),[g,v]=N.useState(""),[w,_]=N.useState(""),[S,P]=N.useState(3),[E,k]=N.useState([{id:"1",name:"",blade_line:"Basic",parts:{}}]);N.useEffect(()=>{T(),p&&$(),R()},[e]);const T=async()=>{try{const{data:D,error:F}=await H.from("deck_presets").select("*").eq("user_id",e.id).order("updated_at",{ascending:!1});if(F)throw F;i(D||[])}catch(D){console.error("Error fetching presets:",D)}finally{d(!1)}};N.useEffect(()=>{p||R()},[p]);const R=async()=>{try{const[D,F,B,ce,j]=await Promise.all([H.from("beypart_blade").select("*"),H.from("beypart_ratchet").select("*"),H.from("beypart_bit").select("*"),H.from("beypart_lockchip").select("*"),H.from("beypart_assistblade").select("*")]);x({blades:D.data||[],ratchets:F.data||[],bits:B.data||[],lockchips:ce.data||[],assistBlades:j.data||[]})}catch(D){console.error("Error fetching parts data:",D)}},$=async()=>{try{const{data:D,error:F}=await H.from("user_inventory").select("*").eq("user_id",e.id).gt("quantity",0);if(F)throw F;l(D||[])}catch(D){console.error("Error fetching inventory:",D)}},G=D=>{switch(D){case"Basic":case"Unique":case"X-Over":return["Blade","Ratchet","Bit"];case"Custom":return["Lockchip","Main Blade","Assist Blade","Ratchet","Bit"];default:return[]}},le=D=>{if(!p)switch(D==="Main Blade"?"Blade":D){case"Blade":return b.blades.map(B=>({id:`db-${B.Blades}`,part_type:"Blade",part_name:B.Blades,part_data:B,quantity:999}));case"Ratchet":return b.ratchets.map(B=>({id:`db-${B.Ratchet}`,part_type:"Ratchet",part_name:B.Ratchet,part_data:B,quantity:999}));case"Bit":return b.bits.map(B=>({id:`db-${B.Bit}`,part_type:"Bit",part_name:`${B.Bit} (${B.Shortcut})`,part_data:B,quantity:999}));case"Lockchip":return b.lockchips.map(B=>({id:`db-${B.Lockchip}`,part_type:"Lockchip",part_name:B.Lockchip,part_data:B,quantity:999}));case"Assist Blade":return b.assistBlades.map(B=>({id:`db-${B["Assist Blade"]}`,part_type:"Assist Blade",part_name:`${B["Assist Blade Name"]} (${B["Assist Blade"]})`,part_data:B,quantity:999}));default:return[]}return D==="Blade"||D==="Main Blade"?a.filter(B=>B.part_type.startsWith("Blade (")&&B.part_type===`Blade (${D==="Main Blade"?"Custom":"Basic"})`):a.filter(B=>B.part_type===D)},O=(D,F)=>{var j,C,L,oe,X,pe,ke,A;if(!D||!G(D).every(Q=>F[Q]))return"";if(D==="Custom"){const Q=((j=F.Lockchip)==null?void 0:j.Lockchip)||"",q=((C=F["Main Blade"])==null?void 0:C.Blades)||"",ne=((L=F["Assist Blade"])==null?void 0:L["Assist Blade"])||"",we=((oe=F.Ratchet)==null?void 0:oe.Ratchet)||"",Ue=((X=F.Bit)==null?void 0:X.Shortcut)||"";return`${Q}${q} ${ne}${we}${Ue}`}else{const Q=((pe=F.Blade)==null?void 0:pe.Blades)||"",q=((ke=F.Ratchet)==null?void 0:ke.Ratchet)||"",ne=((A=F.Bit)==null?void 0:A.Shortcut)||"";return`${Q} ${q}${ne}`}},z=D=>{let F={attack:0,defense:0,stamina:0,dash:0,burstRes:0};return Object.values(D).forEach(B=>{B&&(F.attack+=B.Attack||0,F.defense+=B.Defense||0,F.stamina+=B.Stamina||0,F.dash+=B.Dash||0,F.burstRes+=B["Burst Res"]||0)}),F},V=()=>{h(!0),v(""),_(""),P(3),k([{id:"1",name:"",blade_line:"Basic",parts:{}}])},W=D=>{m(D.id),v(D.name),_(D.description||""),P(D.beyblades.length),k(D.beyblades)},K=()=>{E.length<S&&k([...E,{id:Date.now().toString(),name:"",blade_line:"Basic",parts:{}}])},J=D=>{E.length>1&&k(E.filter(F=>F.id!==D))},re=(D,F,B)=>{k(E.map(ce=>{if(ce.id===D){const j={...ce,[F]:B,parts:{}};return j.name=O(B,{}),j}return ce}))},ie=(D,F,B)=>{k(E.map(ce=>{if(ce.id===D){const j={...ce.parts,[F]:B},C=O(ce.blade_line,j);return{...ce,parts:j,name:C}}return ce}))},M=async()=>{if(!g.trim()){await n("Missing Information","Please enter a deck name.");return}const D=E.filter(F=>{const B=G(F.blade_line);return F.blade_line&&B.every(ce=>F.parts[ce])});if(D.length===0){await n("Missing Information","Please configure at least one complete Beyblade.");return}try{const F={user_id:e.id,name:g.trim(),description:w.trim()||null,beyblades:D};if(u){const{error:B}=await H.from("deck_presets").insert([F]);if(B)throw B}else if(f){const{error:B}=await H.from("deck_presets").update({...F,updated_at:new Date().toISOString()}).eq("id",f);if(B)throw B}await T(),se(),await n("Success","Deck preset saved successfully!")}catch(F){console.error("Error saving preset:",F),await n("Error","Failed to save deck preset. Please try again.")}},ee=async D=>{if(await s("Delete Deck Preset","Are you sure you want to delete this deck preset?"))try{const{error:B}=await H.from("deck_presets").delete().eq("id",D);if(B)throw B;await T()}catch(B){console.error("Error deleting preset:",B),await n("Error","Failed to delete deck preset. Please try again.")}},se=()=>{h(!1),m(null),v(""),_(""),P(3),k([{id:"1",name:"",blade_line:"Basic",parts:{}}])},ae=D=>{switch(D){case"attack":return o.jsx(O0,{size:12,className:"text-red-500"});case"defense":return o.jsx(ji,{size:12,className:"text-blue-500"});case"stamina":return o.jsx(Su,{size:12,className:"text-green-500"});case"dash":return o.jsx(Ro,{size:12,className:"text-yellow-500"});case"burstRes":return o.jsx(E0,{size:12,className:"text-purple-500"});default:return null}};return c?o.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading deck builder..."})]})}):o.jsxs("div",{className:t?"p-6 max-w-7xl mx-auto":"",children:[t&&o.jsxs("div",{className:"flex justify-between items-center mb-8",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Deck Builder"}),o.jsx("p",{className:"text-gray-600",children:"Create and save Beyblade deck presets from your inventory"})]}),o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Build Mode:"}),o.jsxs("div",{className:"flex items-center space-x-2 bg-gray-100 rounded-lg p-1",children:[o.jsx("button",{onClick:()=>y(!0),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors ${p?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Use Inventory"}),o.jsx("button",{onClick:()=>y(!1),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors ${p?"text-gray-600 hover:text-gray-900":"bg-white text-gray-900 shadow-sm"}`,children:"Free Build"})]})]}),o.jsxs("button",{onClick:V,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[o.jsx(Mn,{size:20}),o.jsx("span",{children:"New Deck"})]})]})]}),!t&&o.jsxs("div",{className:"flex justify-between items-center mb-8",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Build Mode:"}),o.jsxs("div",{className:"flex items-center space-x-2 bg-gray-100 rounded-lg p-1",children:[o.jsx("button",{onClick:()=>y(!0),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors ${p?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Use Inventory"}),o.jsx("button",{onClick:()=>y(!1),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors ${p?"text-gray-600 hover:text-gray-900":"bg-white text-gray-900 shadow-sm"}`,children:"Free Build"})]})]}),o.jsxs("button",{onClick:V,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[o.jsx(Mn,{size:20}),o.jsx("span",{children:"New Deck"})]})]}),(u||f)&&o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:u?"Create New Deck":"Edit Deck"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Deck Name"}),o.jsx("input",{type:"text",value:g,onChange:D=>v(D.target.value),placeholder:"Enter deck name",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description (Optional)"}),o.jsx("input",{type:"text",value:w,onChange:D=>_(D.target.value),placeholder:"Deck strategy or notes",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),o.jsx("div",{className:"space-y-6",children:E.map((D,F)=>o.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Beyblade #",F+1]}),E.length>1&&o.jsx("button",{onClick:()=>J(D.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-full transition-colors",children:o.jsx(hs,{size:16})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Blade Line"}),o.jsxs("select",{value:D.blade_line,onChange:B=>re(D.id,"blade_line",B.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.jsx("option",{value:"Basic",children:"Basic"}),o.jsx("option",{value:"Unique",children:"Unique"}),o.jsx("option",{value:"Custom",children:"Custom"}),o.jsx("option",{value:"X-Over",children:"X-Over"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Generated Name"}),o.jsx("div",{className:"w-full border border-gray-200 rounded-md px-3 py-2 bg-gray-50 text-gray-700 font-mono",children:D.name||"Select all parts to generate name"})]})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4",children:G(D.blade_line).map(B=>o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:B}),o.jsxs("select",{value:D.parts[B]?JSON.stringify(D.parts[B]):"",onChange:ce=>{if(ce.target.value){const j=JSON.parse(ce.target.value);ie(D.id,B,j)}},className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.jsxs("option",{value:"",children:["Select ",B]}),le(B).filter(ce=>{var j;return!p&&(B==="Blade"||B==="Main Blade")&&((j=ce.part_data)!=null&&j.Line)?ce.part_data.Line===(B==="Main Blade"?"Custom":D.blade_line):!0}).map(ce=>o.jsxs("option",{value:JSON.stringify(ce.part_data),children:[ce.part_name," ",p?`(Qty: ${ce.quantity})`:""]},ce.id))]})]},B))}),Object.keys(D.parts).length>0&&o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[o.jsxs("h5",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center",children:[o.jsx(Ro,{size:16,className:"mr-2"}),"Combined Stats"]}),o.jsx("div",{className:"grid grid-cols-5 gap-4",children:Object.entries(z(D.parts)).map(([B,ce])=>o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"flex items-center justify-center mb-1",children:ae(B)}),o.jsx("div",{className:"text-xs font-medium text-gray-600 capitalize",children:B==="burstRes"?"Burst Res":B}),o.jsx("div",{className:"text-lg font-bold text-gray-900",children:ce})]},B))})]})]},D.id))}),E.length<5&&o.jsxs("button",{onClick:K,className:"mt-4 w-full border-2 border-dashed border-gray-300 rounded-lg p-4 text-gray-600 hover:border-blue-400 hover:text-blue-600 transition-colors flex items-center justify-center space-x-2",children:[o.jsx(Mn,{size:20}),o.jsxs("span",{children:["Add Another Beyblade (",E.length,"/5)"]})]}),o.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[o.jsxs("button",{onClick:se,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors flex items-center space-x-2",children:[o.jsx(Pt,{size:16}),o.jsx("span",{children:"Cancel"})]}),o.jsxs("button",{onClick:M,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[o.jsx(Or,{size:16}),o.jsx("span",{children:"Save Preset"})]})]})]}),r.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx(sn,{size:48,className:"mx-auto text-gray-400 mb-4"}),o.jsx("p",{className:"text-gray-500",children:"No deck presets yet"}),o.jsx("button",{onClick:V,className:"mt-4 text-blue-600 hover:text-blue-800 underline",children:"Create your first deck preset"})]}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(D=>o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:D.name}),D.description&&o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:D.description})]}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("button",{onClick:()=>W(D),className:"p-1 text-blue-600 hover:bg-blue-50 rounded",children:o.jsx(Un,{size:16})}),o.jsx("button",{onClick:()=>ee(D.id),className:"p-1 text-red-600 hover:bg-red-50 rounded",children:o.jsx(hs,{size:16})})]})]}),o.jsxs("div",{className:"space-y-2 mb-4",children:[o.jsxs("div",{className:"text-sm text-gray-600",children:[o.jsx("span",{className:"font-medium",children:D.beyblades.length})," Beyblades configured"]}),o.jsxs("div",{className:"space-y-1",children:[D.beyblades.slice(0,3).map((F,B)=>o.jsx("div",{className:"text-xs text-gray-500 font-mono",children:F.name||`Beyblade ${B+1}`},B)),D.beyblades.length>3&&o.jsxs("div",{className:"text-xs text-gray-400",children:["+",D.beyblades.length-3," more..."]})]})]}),o.jsxs("div",{className:"text-xs text-gray-500 pt-2 border-t",children:["Updated: ",new Date(D.updated_at).toLocaleDateString()]})]},D.id))})]})}function BN(){const{user:t}=ns(),{confirm:e,alert:s}=Kn(),[n,r]=N.useState("inventory");if(!t||t.id.startsWith("guest-"))return o.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Inventory & Deck Builder"}),o.jsx("p",{className:"text-gray-600",children:"Track your parts and build custom decks"})]}),o.jsxs("div",{className:"text-center py-12",children:[o.jsxs("div",{className:"flex justify-center space-x-4 mb-6",children:[o.jsx(oi,{size:64,className:"text-gray-400"}),o.jsx(sn,{size:64,className:"text-gray-400"})]}),o.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Inventory & Deck Builder"}),o.jsx("p",{className:"text-gray-600 mb-8 max-w-2xl mx-auto",children:"Track your Beyblade parts collection and build powerful custom decks. Save deck presets for quick tournament registration."}),o.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-xl p-8 max-w-md mx-auto mb-8",children:[o.jsx("div",{className:"flex items-center justify-center mb-6",children:o.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white text-2xl font-bold shadow-lg",children:""})}),o.jsx("h3",{className:"text-xl font-bold text-blue-900 mb-3",children:"Login to Access Tools"}),o.jsx("p",{className:"text-blue-800 text-sm mb-6",children:"Create a free account to access inventory tracking and deck building tools!"}),o.jsxs("div",{className:"space-y-2 text-sm text-blue-700",children:[o.jsxs("div",{className:"flex items-center justify-center",children:[o.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full mr-2"}),"Track unlimited Beyblade parts"]}),o.jsxs("div",{className:"flex items-center justify-center",children:[o.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full mr-2"}),"Build and save custom decks"]}),o.jsxs("div",{className:"flex items-center justify-center",children:[o.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full mr-2"}),"Quick tournament registration"]})]})]}),o.jsx("div",{className:"bg-gray-50 rounded-lg p-6 max-w-lg mx-auto",children:o.jsxs("p",{className:"text-gray-600 text-sm",children:[o.jsx("strong",{children:"Ready to start?"}),' Click the "Login" button to create your account and unlock inventory & deck building features.']})})]})]});const[i,a]=N.useState([]),[l,c]=N.useState(!0),[d,u]=N.useState(!1),[h,f]=N.useState(null),[m,p]=N.useState(""),[y,b]=N.useState("all"),[x,g]=N.useState({part_type:"Blade (Basic)",part_name:"",part_data:null,quantity:1,notes:""}),[v,w]=N.useState({blades:[],ratchets:[],bits:[],lockchips:[],assistBlades:[]});N.useEffect(()=>{_(),S()},[t]);const _=async()=>{try{const{data:O,error:z}=await H.from("user_inventory").select("*").eq("user_id",t.id).order("created_at",{ascending:!1});if(z)throw z;a(O||[])}catch(O){console.error("Error fetching inventory:",O)}finally{c(!1)}},S=async()=>{try{const[O,z,V,W,K]=await Promise.all([H.from("beypart_blade").select("*"),H.from("beypart_ratchet").select("*"),H.from("beypart_bit").select("*"),H.from("beypart_lockchip").select("*"),H.from("beypart_assistblade").select("*")]);w({blades:O.data||[],ratchets:z.data||[],bits:V.data||[],lockchips:W.data||[],assistBlades:K.data||[]})}catch(O){console.error("Error fetching parts data:",O)}},P=O=>{let z=[];if(O.startsWith("Blade (")){const V=O.replace("Blade (","").replace(")","");z=v.blades.filter(W=>W.Line===V)}else O==="Ratchet"?z=v.ratchets:O==="Bit"?z=v.bits:O==="Lockchip"?z=v.lockchips:O==="Assist Blade"&&(z=v.assistBlades);return O==="Blade"?z=v.blades.filter(V=>V.Line!=="Custom"):O==="Blade (Custom)"?z=v.blades.filter(V=>V.Line==="Custom"):O==="Ratchet"?z=v.ratchets:O==="Bit"?z=v.bits:O==="Lockchip"?z=v.lockchips:O==="Assist Blade"&&(z=v.assistBlades),z},E=(O,z)=>{if(z.startsWith("Blade ("))return O.Blades;switch(z){case"Ratchet":return O.Ratchet;case"Bit":return`${O.Bit} (${O.Shortcut})`;case"Lockchip":return O.Lockchip;case"Assist Blade":return`${O["Assist Blade Name"]} (${O["Assist Blade"]})`;default:return""}},k=()=>{u(!0),g({part_type:"Blade (Basic)",part_name:"",part_data:null,quantity:1,notes:""})},T=O=>{f(O.id),g({part_type:O.part_type,part_name:O.part_name,part_data:O.part_data,quantity:O.quantity,notes:O.notes||""})},R=async()=>{if(!x.part_name||!x.part_data){await s("Missing Information","Please select a part before saving.");return}try{const O={user_id:t.id,part_type:x.part_type,part_name:x.part_name,part_data:x.part_data,quantity:x.quantity,notes:x.notes||null};if(d){const{error:z}=await H.from("user_inventory").insert([O]);if(z)throw z}else if(h){const{error:z}=await H.from("user_inventory").update(O).eq("id",h);if(z)throw z}await _()}catch(O){console.error("Error saving inventory item:",O),await s("Error","Failed to save inventory item. Please try again.")}},$=async O=>{if(await e("Delete Inventory Item","Are you sure you want to delete this inventory item? This action cannot be undone."))try{const{error:V}=await H.from("user_inventory").delete().eq("id",O);if(V)throw V;await _()}catch(V){console.error("Error deleting inventory item:",V),await s("Error","Failed to delete inventory item. Please try again.")}},G=()=>{u(!1),f(null),g({part_type:"Blade (Basic)",part_name:"",part_data:null,quantity:1,notes:""})},le=i.filter(O=>{var W;const z=O.part_name.toLowerCase().includes(m.toLowerCase())||O.notes&&O.notes.toLowerCase().includes(m.toLowerCase());let V=!1;if(y==="all")V=!0;else if(y.startsWith("Blade (")){const K=y.replace("Blade (","").replace(")","");V=O.part_type==="Blade"&&((W=O.part_data)==null?void 0:W.Line)===K}else V=O.part_type===y;return z&&V});return l?o.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading inventory..."})]})}):n==="deck-builder"?o.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[o.jsx("div",{className:"mb-8",children:o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Inventory & Deck Builder"}),o.jsx("p",{className:"text-gray-600",children:"Track your parts and build custom decks"})]}),o.jsxs("div",{className:"filter-tabs",children:[o.jsxs("button",{onClick:()=>r("inventory"),className:`filter-tab ${n==="inventory"?"filter-tab-active":"filter-tab-inactive"}`,children:[o.jsx(oi,{size:16,className:"mr-2"}),"Inventory"]}),o.jsxs("button",{onClick:()=>r("deck-builder"),className:`filter-tab ${n==="deck-builder"?"filter-tab-active":"filter-tab-inactive"}`,children:[o.jsx(sn,{size:16,className:"mr-2"}),"Deck Builder"]})]})]})}),o.jsx(DN,{})]}):o.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("div",{children:o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Inventory & Deck Builder"}),o.jsx("p",{className:"text-gray-600",children:"Track your parts and build custom decks"})]}),o.jsxs("div",{className:"filter-tabs",children:[o.jsxs("button",{onClick:()=>r("inventory"),className:`filter-tab ${n==="inventory"?"filter-tab-active":"filter-tab-inactive"}`,children:[o.jsx(oi,{size:16,className:"mr-2"}),"Inventory"]}),o.jsxs("button",{onClick:()=>r("deck-builder"),className:`filter-tab ${n==="deck-builder"?"filter-tab-active":"filter-tab-inactive"}`,children:[o.jsx(sn,{size:16,className:"mr-2"}),"Deck Builder"]})]})]})}),o.jsx("div",{className:"flex justify-end",children:o.jsxs("button",{onClick:k,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[o.jsx(Mn,{size:20}),o.jsx("span",{children:"Add Part"})]})})]}),o.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx(C0,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),o.jsx("input",{type:"text",placeholder:"Search parts or notes...",value:m,onChange:O=>p(O.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),o.jsxs("div",{className:"relative",children:[o.jsx(T_,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),o.jsxs("select",{value:y,onChange:O=>b(O.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.jsx("option",{value:"all",children:"All Parts"}),o.jsx("option",{value:"Blade (Basic)",children:"Blades (Basic)"}),o.jsx("option",{value:"Blade (Unique)",children:"Blades (Unique)"}),o.jsx("option",{value:"Blade (X-Over)",children:"Blades (X-Over)"}),o.jsx("option",{value:"Blade (Custom)",children:"Blades (Custom)"}),o.jsx("option",{value:"Ratchet",children:"Ratchets"}),o.jsx("option",{value:"Bit",children:"Bits"}),o.jsx("option",{value:"Blade (Basic)",children:"Blade (Basic)"}),o.jsx("option",{value:"Blade (Unique)",children:"Blade (Unique)"}),o.jsx("option",{value:"Blade (X-Over)",children:"Blade (X-Over)"}),o.jsx("option",{value:"Blade (Custom)",children:"Blade (Custom)"}),o.jsx("option",{value:"Assist Blade",children:"Assist Blades"})]})]})]})}),(d||h)&&o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:d?"Add New Part":"Edit Part"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Part Type"}),o.jsxs("select",{value:x.part_type,onChange:O=>g({...x,part_type:O.target.value,part_name:"",part_data:null}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.jsx("option",{value:"Blade (Basic)",children:"Blade (Basic)"}),o.jsx("option",{value:"Blade (Unique)",children:"Blade (Unique)"}),o.jsx("option",{value:"Blade (X-Over)",children:"Blade (X-Over)"}),o.jsx("option",{value:"Blade (Custom)",children:"Blade (Custom)"}),o.jsx("option",{value:"Ratchet",children:"Ratchet"}),o.jsx("option",{value:"Bit",children:"Bit"}),o.jsx("option",{value:"Lockchip",children:"Lockchip"}),o.jsx("option",{value:"Assist Blade",children:"Assist Blade"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Part"}),o.jsxs("select",{value:x.part_data?JSON.stringify(x.part_data):"",onChange:O=>{if(O.target.value){const z=JSON.parse(O.target.value);g({...x,part_name:E(z,x.part_type),part_data:z})}},className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.jsx("option",{value:"",children:"Select Part"}),P(x.part_type).map((O,z)=>o.jsx("option",{value:JSON.stringify(O),children:E(O,x.part_type)},z))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantity"}),o.jsx("input",{type:"number",min:"1",value:x.quantity,onChange:O=>g({...x,quantity:parseInt(O.target.value)||1}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes (Optional)"}),o.jsx("input",{type:"text",value:x.notes,onChange:O=>g({...x,notes:O.target.value}),placeholder:"e.g., condition, source, etc.",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),o.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[o.jsxs("button",{onClick:G,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors flex items-center space-x-2",children:[o.jsx(Pt,{size:16}),o.jsx("span",{children:"Cancel"})]}),o.jsxs("button",{onClick:R,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[o.jsx(Or,{size:16}),o.jsx("span",{children:"Save"})]})]})]}),le.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx(oi,{size:48,className:"mx-auto text-gray-400 mb-4"}),o.jsx("p",{className:"text-gray-500",children:i.length===0?"No parts in your inventory yet":"No parts match your search"}),i.length===0&&o.jsx("button",{onClick:k,className:"mt-4 text-blue-600 hover:text-blue-800 underline",children:"Add your first part"})]}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:le.map(O=>o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsxs("div",{children:[o.jsx("span",{className:"inline-block px-2 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded-full mb-2",children:O.part_type}),o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:O.part_name})]}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("button",{onClick:()=>T(O),className:"p-1 text-blue-600 hover:bg-blue-50 rounded",children:o.jsx(Un,{size:16})}),o.jsx("button",{onClick:()=>$(O.id),className:"p-1 text-red-600 hover:bg-red-50 rounded",children:o.jsx(hs,{size:16})})]})]}),o.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Quantity:"}),o.jsx("span",{className:"font-medium",children:O.quantity})]}),O.notes&&o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",children:"Notes:"}),o.jsx("p",{className:"text-gray-700 mt-1",children:O.notes})]}),o.jsxs("div",{className:"text-xs text-gray-500 pt-2 border-t",children:["Added: ",new Date(O.created_at).toLocaleDateString()]})]}),O.part_data&&o.jsx("div",{className:"mt-4 pt-4 border-t",children:o.jsx("div",{className:"grid grid-cols-2 gap-2 text-xs",children:Object.entries(O.part_data).map(([z,V])=>typeof V=="number"&&V>0&&["Attack","Defense","Stamina","Dash","Burst Res"].includes(z)?o.jsxs("div",{className:"flex justify-between",children:[o.jsxs("span",{className:"text-gray-600",children:[z,":"]}),o.jsx("span",{className:"font-medium",children:V})]},z):null)})})]},O.id))})]})}function IN(){const[t,e]=N.useState("dashboard"),[s,n]=N.useState(!1),r=()=>{n(!s)},i=()=>{switch(t){case"dashboard":return o.jsx(vf,{onViewChange:e});case"tournaments":return o.jsx(J_,{});case"inventory":return o.jsx(BN,{});case"analytics":return o.jsx(AN,{});case"match-tracker":return o.jsx(ON,{});case"tournament-manager":return o.jsx(RN,{});case"user-management":return o.jsx(MN,{});case"database":return o.jsx(LN,{});default:return o.jsx(vf,{})}};return o.jsxs("div",{className:"min-h-screen bg-gray-50",children:[!s&&o.jsx("button",{onClick:r,className:`fixed top-6 left-0 z-50 p-3 rounded-r-xl shadow-lg backdrop-blur-sm transition-all duration-300 hover:scale-105 ${t==="dashboard"?"bg-slate-800/90 hover:bg-slate-700/90 text-white":"bg-white/90 hover:bg-white text-gray-800 border border-gray-200"}`,children:o.jsx(L_,{size:24})}),o.jsx(H_,{isOpen:s,currentView:t,onViewChange:e,onToggle:r}),o.jsx("div",{className:`${s?"lg:ml-64":"lg:ml-0"} transition-all duration-300`,children:o.jsx("main",{className:"flex-1",children:i()})})]})}function $N(){return o.jsx(__,{children:o.jsx(j_,{children:o.jsx(IN,{})})})}Jg(document.getElementById("root")).render(o.jsx(N.StrictMode,{children:o.jsx($N,{})}));
