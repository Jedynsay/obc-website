var Nx=Object.defineProperty;var Sx=(t,e,s)=>e in t?Nx(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var he=(t,e,s)=>Sx(t,typeof e!="symbol"?e+"":e,s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=s(r);fetch(r.href,i)}})();var $t=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Cx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Px(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var s=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(s,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}),s}var Dm={exports:{}},$o={},Im={exports:{}},me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ki=Symbol.for("react.element"),Ex=Symbol.for("react.portal"),Tx=Symbol.for("react.fragment"),Ax=Symbol.for("react.strict_mode"),Ox=Symbol.for("react.profiler"),Rx=Symbol.for("react.provider"),Mx=Symbol.for("react.context"),Lx=Symbol.for("react.forward_ref"),Dx=Symbol.for("react.suspense"),Ix=Symbol.for("react.memo"),zx=Symbol.for("react.lazy"),zu=Symbol.iterator;function Bx(t){return t===null||typeof t!="object"?null:(t=zu&&t[zu]||t["@@iterator"],typeof t=="function"?t:null)}var zm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Bm=Object.assign,$m={};function Or(t,e,s){this.props=t,this.context=e,this.refs=$m,this.updater=s||zm}Or.prototype.isReactComponent={};Or.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Or.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Fm(){}Fm.prototype=Or.prototype;function jd(t,e,s){this.props=t,this.context=e,this.refs=$m,this.updater=s||zm}var kd=jd.prototype=new Fm;kd.constructor=jd;Bm(kd,Or.prototype);kd.isPureReactComponent=!0;var Bu=Array.isArray,Um=Object.prototype.hasOwnProperty,Nd={current:null},Wm={key:!0,ref:!0,__self:!0,__source:!0};function Hm(t,e,s){var n,r={},i=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Um.call(e,n)&&!Wm.hasOwnProperty(n)&&(r[n]=e[n]);var l=arguments.length-2;if(l===1)r.children=s;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];r.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)r[n]===void 0&&(r[n]=l[n]);return{$$typeof:Ki,type:t,key:i,ref:o,props:r,_owner:Nd.current}}function $x(t,e){return{$$typeof:Ki,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Sd(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ki}function Fx(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(s){return e[s]})}var $u=/\/+/g;function xl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Fx(""+t.key):e.toString(36)}function za(t,e,s,n,r){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ki:case Ex:o=!0}}if(o)return o=t,r=r(o),t=n===""?"."+xl(o,0):n,Bu(r)?(s="",t!=null&&(s=t.replace($u,"$&/")+"/"),za(r,e,s,"",function(d){return d})):r!=null&&(Sd(r)&&(r=$x(r,s+(!r.key||o&&o.key===r.key?"":(""+r.key).replace($u,"$&/")+"/")+t)),e.push(r)),1;if(o=0,n=n===""?".":n+":",Bu(t))for(var l=0;l<t.length;l++){i=t[l];var c=n+xl(i,l);o+=za(i,e,s,c,r)}else if(c=Bx(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=n+xl(i,l++),o+=za(i,e,s,c,r);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ra(t,e,s){if(t==null)return t;var n=[],r=0;return za(t,n,"","",function(i){return e.call(s,i,r++)}),n}function Ux(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(s){(t._status===0||t._status===-1)&&(t._status=1,t._result=s)},function(s){(t._status===0||t._status===-1)&&(t._status=2,t._result=s)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ht={current:null},Ba={transition:null},Wx={ReactCurrentDispatcher:ht,ReactCurrentBatchConfig:Ba,ReactCurrentOwner:Nd};function Vm(){throw Error("act(...) is not supported in production builds of React.")}me.Children={map:ra,forEach:function(t,e,s){ra(t,function(){e.apply(this,arguments)},s)},count:function(t){var e=0;return ra(t,function(){e++}),e},toArray:function(t){return ra(t,function(e){return e})||[]},only:function(t){if(!Sd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};me.Component=Or;me.Fragment=Tx;me.Profiler=Ox;me.PureComponent=jd;me.StrictMode=Ax;me.Suspense=Dx;me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Wx;me.act=Vm;me.cloneElement=function(t,e,s){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Bm({},t.props),r=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Nd.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)Um.call(e,c)&&!Wm.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=s;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:Ki,type:t.type,key:r,ref:i,props:n,_owner:o}};me.createContext=function(t){return t={$$typeof:Mx,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Rx,_context:t},t.Consumer=t};me.createElement=Hm;me.createFactory=function(t){var e=Hm.bind(null,t);return e.type=t,e};me.createRef=function(){return{current:null}};me.forwardRef=function(t){return{$$typeof:Lx,render:t}};me.isValidElement=Sd;me.lazy=function(t){return{$$typeof:zx,_payload:{_status:-1,_result:t},_init:Ux}};me.memo=function(t,e){return{$$typeof:Ix,type:t,compare:e===void 0?null:e}};me.startTransition=function(t){var e=Ba.transition;Ba.transition={};try{t()}finally{Ba.transition=e}};me.unstable_act=Vm;me.useCallback=function(t,e){return ht.current.useCallback(t,e)};me.useContext=function(t){return ht.current.useContext(t)};me.useDebugValue=function(){};me.useDeferredValue=function(t){return ht.current.useDeferredValue(t)};me.useEffect=function(t,e){return ht.current.useEffect(t,e)};me.useId=function(){return ht.current.useId()};me.useImperativeHandle=function(t,e,s){return ht.current.useImperativeHandle(t,e,s)};me.useInsertionEffect=function(t,e){return ht.current.useInsertionEffect(t,e)};me.useLayoutEffect=function(t,e){return ht.current.useLayoutEffect(t,e)};me.useMemo=function(t,e){return ht.current.useMemo(t,e)};me.useReducer=function(t,e,s){return ht.current.useReducer(t,e,s)};me.useRef=function(t){return ht.current.useRef(t)};me.useState=function(t){return ht.current.useState(t)};me.useSyncExternalStore=function(t,e,s){return ht.current.useSyncExternalStore(t,e,s)};me.useTransition=function(){return ht.current.useTransition()};me.version="18.3.1";Im.exports=me;var k=Im.exports;const Ke=Cx(k);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hx=k,Vx=Symbol.for("react.element"),qx=Symbol.for("react.fragment"),Kx=Object.prototype.hasOwnProperty,Yx=Hx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Gx={key:!0,ref:!0,__self:!0,__source:!0};function qm(t,e,s){var n,r={},i=null,o=null;s!==void 0&&(i=""+s),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)Kx.call(e,n)&&!Gx.hasOwnProperty(n)&&(r[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)r[n]===void 0&&(r[n]=e[n]);return{$$typeof:Vx,type:t,key:i,ref:o,props:r,_owner:Yx.current}}$o.Fragment=qx;$o.jsx=qm;$o.jsxs=qm;Dm.exports=$o;var a=Dm.exports,Km={exports:{}},Ot={},Ym={exports:{}},Gm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(W,I){var E=W.length;W.push(I);e:for(;0<E;){var z=E-1>>>1,B=W[z];if(0<r(B,I))W[z]=I,W[E]=B,E=z;else break e}}function s(W){return W.length===0?null:W[0]}function n(W){if(W.length===0)return null;var I=W[0],E=W.pop();if(E!==I){W[0]=E;e:for(var z=0,B=W.length,C=B>>>1;z<C;){var q=2*(z+1)-1,X=W[q],se=q+1,pe=W[se];if(0>r(X,E))se<B&&0>r(pe,X)?(W[z]=pe,W[se]=E,z=se):(W[z]=X,W[q]=E,z=q);else if(se<B&&0>r(pe,E))W[z]=pe,W[se]=E,z=se;else break e}}return I}function r(W,I){var E=W.sortIndex-I.sortIndex;return E!==0?E:W.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,f=3,m=!1,x=!1,y=!1,b=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(W){for(var I=s(d);I!==null;){if(I.callback===null)n(d);else if(I.startTime<=W)n(d),I.sortIndex=I.expirationTime,e(c,I);else break;I=s(d)}}function w(W){if(y=!1,v(W),!x)if(s(c)!==null)x=!0,ne(j);else{var I=s(d);I!==null&&G(w,I.startTime-W)}}function j(W,I){x=!1,y&&(y=!1,g(A),A=-1),m=!0;var E=f;try{for(v(I),h=s(c);h!==null&&(!(h.expirationTime>I)||W&&!L());){var z=h.callback;if(typeof z=="function"){h.callback=null,f=h.priorityLevel;var B=z(h.expirationTime<=I);I=t.unstable_now(),typeof B=="function"?h.callback=B:h===s(c)&&n(c),v(I)}else n(c);h=s(c)}if(h!==null)var C=!0;else{var q=s(d);q!==null&&G(w,q.startTime-I),C=!1}return C}finally{h=null,f=E,m=!1}}var N=!1,P=null,A=-1,S=5,R=-1;function L(){return!(t.unstable_now()-R<S)}function V(){if(P!==null){var W=t.unstable_now();R=W;var I=!0;try{I=P(!0,W)}finally{I?M():(N=!1,P=null)}}else N=!1}var M;if(typeof p=="function")M=function(){p(V)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,J=K.port2;K.port1.onmessage=V,M=function(){J.postMessage(null)}}else M=function(){b(V,0)};function ne(W){P=W,N||(N=!0,M())}function G(W,I){A=b(function(){W(t.unstable_now())},I)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){x||m||(x=!0,ne(j))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return s(c)},t.unstable_next=function(W){switch(f){case 1:case 2:case 3:var I=3;break;default:I=f}var E=f;f=I;try{return W()}finally{f=E}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,I){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var E=f;f=W;try{return I()}finally{f=E}},t.unstable_scheduleCallback=function(W,I,E){var z=t.unstable_now();switch(typeof E=="object"&&E!==null?(E=E.delay,E=typeof E=="number"&&0<E?z+E:z):E=z,W){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=E+B,W={id:u++,callback:I,priorityLevel:W,startTime:E,expirationTime:B,sortIndex:-1},E>z?(W.sortIndex=E,e(d,W),s(c)===null&&W===s(d)&&(y?(g(A),A=-1):y=!0,G(w,E-z))):(W.sortIndex=B,e(c,W),x||m||(x=!0,ne(j))),W},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(W){var I=f;return function(){var E=f;f=I;try{return W.apply(this,arguments)}finally{f=E}}}})(Gm);Ym.exports=Gm;var Qx=Ym.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jx=k,At=Qx;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)e+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Qm=new Set,Ni={};function $n(t,e){vr(t,e),vr(t+"Capture",e)}function vr(t,e){for(Ni[t]=e,t=0;t<e.length;t++)Qm.add(e[t])}var Cs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cc=Object.prototype.hasOwnProperty,Xx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Fu={},Uu={};function Zx(t){return cc.call(Uu,t)?!0:cc.call(Fu,t)?!1:Xx.test(t)?Uu[t]=!0:(Fu[t]=!0,!1)}function ey(t,e,s,n){if(s!==null&&s.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:s!==null?!s.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function ty(t,e,s,n){if(e===null||typeof e>"u"||ey(t,e,s,n))return!0;if(n)return!1;if(s!==null)switch(s.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ft(t,e,s,n,r,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=r,this.mustUseProperty=s,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var et={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){et[t]=new ft(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];et[e]=new ft(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){et[t]=new ft(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){et[t]=new ft(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){et[t]=new ft(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){et[t]=new ft(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){et[t]=new ft(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){et[t]=new ft(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){et[t]=new ft(t,5,!1,t.toLowerCase(),null,!1,!1)});var Cd=/[\-:]([a-z])/g;function Pd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Cd,Pd);et[e]=new ft(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Cd,Pd);et[e]=new ft(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Cd,Pd);et[e]=new ft(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){et[t]=new ft(t,1,!1,t.toLowerCase(),null,!1,!1)});et.xlinkHref=new ft("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){et[t]=new ft(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ed(t,e,s,n){var r=et.hasOwnProperty(e)?et[e]:null;(r!==null?r.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(ty(e,s,r,n)&&(s=null),n||r===null?Zx(e)&&(s===null?t.removeAttribute(e):t.setAttribute(e,""+s)):r.mustUseProperty?t[r.propertyName]=s===null?r.type===3?!1:"":s:(e=r.attributeName,n=r.attributeNamespace,s===null?t.removeAttribute(e):(r=r.type,s=r===3||r===4&&s===!0?"":""+s,n?t.setAttributeNS(n,e,s):t.setAttribute(e,s))))}var As=Jx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ia=Symbol.for("react.element"),Xn=Symbol.for("react.portal"),Zn=Symbol.for("react.fragment"),Td=Symbol.for("react.strict_mode"),dc=Symbol.for("react.profiler"),Jm=Symbol.for("react.provider"),Xm=Symbol.for("react.context"),Ad=Symbol.for("react.forward_ref"),uc=Symbol.for("react.suspense"),hc=Symbol.for("react.suspense_list"),Od=Symbol.for("react.memo"),Ds=Symbol.for("react.lazy"),Zm=Symbol.for("react.offscreen"),Wu=Symbol.iterator;function Ir(t){return t===null||typeof t!="object"?null:(t=Wu&&t[Wu]||t["@@iterator"],typeof t=="function"?t:null)}var Le=Object.assign,yl;function Xr(t){if(yl===void 0)try{throw Error()}catch(s){var e=s.stack.trim().match(/\n( *(at )?)/);yl=e&&e[1]||""}return`
`+yl+t}var vl=!1;function bl(t,e){if(!t||vl)return"";vl=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var n=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){n=d}t.call(e.prototype)}else{try{throw Error()}catch(d){n=d}t()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var r=d.stack.split(`
`),i=n.stack.split(`
`),o=r.length-1,l=i.length-1;1<=o&&0<=l&&r[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(r[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||r[o]!==i[l]){var c=`
`+r[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{vl=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?Xr(t):""}function sy(t){switch(t.tag){case 5:return Xr(t.type);case 16:return Xr("Lazy");case 13:return Xr("Suspense");case 19:return Xr("SuspenseList");case 0:case 2:case 15:return t=bl(t.type,!1),t;case 11:return t=bl(t.type.render,!1),t;case 1:return t=bl(t.type,!0),t;default:return""}}function fc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Zn:return"Fragment";case Xn:return"Portal";case dc:return"Profiler";case Td:return"StrictMode";case uc:return"Suspense";case hc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Xm:return(t.displayName||"Context")+".Consumer";case Jm:return(t._context.displayName||"Context")+".Provider";case Ad:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Od:return e=t.displayName||null,e!==null?e:fc(t.type)||"Memo";case Ds:e=t._payload,t=t._init;try{return fc(t(e))}catch{}}return null}function ny(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fc(e);case 8:return e===Td?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function sn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ep(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ry(t){var e=ep(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var r=s.get,i=s.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function aa(t){t._valueTracker||(t._valueTracker=ry(t))}function tp(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var s=e.getValue(),n="";return t&&(n=ep(t)?t.checked?"true":"false":t.value),t=n,t!==s?(e.setValue(t),!0):!1}function to(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function mc(t,e){var s=e.checked;return Le({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??t._wrapperState.initialChecked})}function Hu(t,e){var s=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;s=sn(e.value!=null?e.value:s),t._wrapperState={initialChecked:n,initialValue:s,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function sp(t,e){e=e.checked,e!=null&&Ed(t,"checked",e,!1)}function pc(t,e){sp(t,e);var s=sn(e.value),n=e.type;if(s!=null)n==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+s):t.value!==""+s&&(t.value=""+s);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?gc(t,e.type,s):e.hasOwnProperty("defaultValue")&&gc(t,e.type,sn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Vu(t,e,s){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,s||e===t.value||(t.value=e),t.defaultValue=e}s=t.name,s!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,s!==""&&(t.name=s)}function gc(t,e,s){(e!=="number"||to(t.ownerDocument)!==t)&&(s==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+s&&(t.defaultValue=""+s))}var Zr=Array.isArray;function ur(t,e,s,n){if(t=t.options,e){e={};for(var r=0;r<s.length;r++)e["$"+s[r]]=!0;for(s=0;s<t.length;s++)r=e.hasOwnProperty("$"+t[s].value),t[s].selected!==r&&(t[s].selected=r),r&&n&&(t[s].defaultSelected=!0)}else{for(s=""+sn(s),e=null,r=0;r<t.length;r++){if(t[r].value===s){t[r].selected=!0,n&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function xc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Le({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function qu(t,e){var s=e.value;if(s==null){if(s=e.children,e=e.defaultValue,s!=null){if(e!=null)throw Error(U(92));if(Zr(s)){if(1<s.length)throw Error(U(93));s=s[0]}e=s}e==null&&(e=""),s=e}t._wrapperState={initialValue:sn(s)}}function np(t,e){var s=sn(e.value),n=sn(e.defaultValue);s!=null&&(s=""+s,s!==t.value&&(t.value=s),e.defaultValue==null&&t.defaultValue!==s&&(t.defaultValue=s)),n!=null&&(t.defaultValue=""+n)}function Ku(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function rp(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?rp(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var oa,ip=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,s,n,r){MSApp.execUnsafeLocalFunction(function(){return t(e,s,n,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(oa=oa||document.createElement("div"),oa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=oa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Si(t,e){if(e){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=e;return}}t.textContent=e}var li={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},iy=["Webkit","ms","Moz","O"];Object.keys(li).forEach(function(t){iy.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),li[e]=li[t]})});function ap(t,e,s){return e==null||typeof e=="boolean"||e===""?"":s||typeof e!="number"||e===0||li.hasOwnProperty(t)&&li[t]?(""+e).trim():e+"px"}function op(t,e){t=t.style;for(var s in e)if(e.hasOwnProperty(s)){var n=s.indexOf("--")===0,r=ap(s,e[s],n);s==="float"&&(s="cssFloat"),n?t.setProperty(s,r):t[s]=r}}var ay=Le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vc(t,e){if(e){if(ay[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function bc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wc=null;function Rd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _c=null,hr=null,fr=null;function Yu(t){if(t=Qi(t)){if(typeof _c!="function")throw Error(U(280));var e=t.stateNode;e&&(e=Vo(e),_c(t.stateNode,t.type,e))}}function lp(t){hr?fr?fr.push(t):fr=[t]:hr=t}function cp(){if(hr){var t=hr,e=fr;if(fr=hr=null,Yu(t),e)for(t=0;t<e.length;t++)Yu(e[t])}}function dp(t,e){return t(e)}function up(){}var wl=!1;function hp(t,e,s){if(wl)return t(e,s);wl=!0;try{return dp(t,e,s)}finally{wl=!1,(hr!==null||fr!==null)&&(up(),cp())}}function Ci(t,e){var s=t.stateNode;if(s===null)return null;var n=Vo(s);if(n===null)return null;s=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(U(231,e,typeof s));return s}var jc=!1;if(Cs)try{var zr={};Object.defineProperty(zr,"passive",{get:function(){jc=!0}}),window.addEventListener("test",zr,zr),window.removeEventListener("test",zr,zr)}catch{jc=!1}function oy(t,e,s,n,r,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(s,d)}catch(u){this.onError(u)}}var ci=!1,so=null,no=!1,kc=null,ly={onError:function(t){ci=!0,so=t}};function cy(t,e,s,n,r,i,o,l,c){ci=!1,so=null,oy.apply(ly,arguments)}function dy(t,e,s,n,r,i,o,l,c){if(cy.apply(this,arguments),ci){if(ci){var d=so;ci=!1,so=null}else throw Error(U(198));no||(no=!0,kc=d)}}function Fn(t){var e=t,s=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(s=e.return),t=e.return;while(t)}return e.tag===3?s:null}function fp(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Gu(t){if(Fn(t)!==t)throw Error(U(188))}function uy(t){var e=t.alternate;if(!e){if(e=Fn(t),e===null)throw Error(U(188));return e!==t?null:t}for(var s=t,n=e;;){var r=s.return;if(r===null)break;var i=r.alternate;if(i===null){if(n=r.return,n!==null){s=n;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===s)return Gu(r),t;if(i===n)return Gu(r),e;i=i.sibling}throw Error(U(188))}if(s.return!==n.return)s=r,n=i;else{for(var o=!1,l=r.child;l;){if(l===s){o=!0,s=r,n=i;break}if(l===n){o=!0,n=r,s=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===s){o=!0,s=i,n=r;break}if(l===n){o=!0,n=i,s=r;break}l=l.sibling}if(!o)throw Error(U(189))}}if(s.alternate!==n)throw Error(U(190))}if(s.tag!==3)throw Error(U(188));return s.stateNode.current===s?t:e}function mp(t){return t=uy(t),t!==null?pp(t):null}function pp(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=pp(t);if(e!==null)return e;t=t.sibling}return null}var gp=At.unstable_scheduleCallback,Qu=At.unstable_cancelCallback,hy=At.unstable_shouldYield,fy=At.unstable_requestPaint,Fe=At.unstable_now,my=At.unstable_getCurrentPriorityLevel,Md=At.unstable_ImmediatePriority,xp=At.unstable_UserBlockingPriority,ro=At.unstable_NormalPriority,py=At.unstable_LowPriority,yp=At.unstable_IdlePriority,Fo=null,cs=null;function gy(t){if(cs&&typeof cs.onCommitFiberRoot=="function")try{cs.onCommitFiberRoot(Fo,t,void 0,(t.current.flags&128)===128)}catch{}}var Jt=Math.clz32?Math.clz32:vy,xy=Math.log,yy=Math.LN2;function vy(t){return t>>>=0,t===0?32:31-(xy(t)/yy|0)|0}var la=64,ca=4194304;function ei(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function io(t,e){var s=t.pendingLanes;if(s===0)return 0;var n=0,r=t.suspendedLanes,i=t.pingedLanes,o=s&268435455;if(o!==0){var l=o&~r;l!==0?n=ei(l):(i&=o,i!==0&&(n=ei(i)))}else o=s&~r,o!==0?n=ei(o):i!==0&&(n=ei(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&r)&&(r=n&-n,i=e&-e,r>=i||r===16&&(i&4194240)!==0))return e;if(n&4&&(n|=s&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)s=31-Jt(e),r=1<<s,n|=t[s],e&=~r;return n}function by(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wy(t,e){for(var s=t.suspendedLanes,n=t.pingedLanes,r=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Jt(i),l=1<<o,c=r[o];c===-1?(!(l&s)||l&n)&&(r[o]=by(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function Nc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function vp(){var t=la;return la<<=1,!(la&4194240)&&(la=64),t}function _l(t){for(var e=[],s=0;31>s;s++)e.push(t);return e}function Yi(t,e,s){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Jt(e),t[e]=s}function _y(t,e){var s=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<s;){var r=31-Jt(s),i=1<<r;e[r]=0,n[r]=-1,t[r]=-1,s&=~i}}function Ld(t,e){var s=t.entangledLanes|=e;for(t=t.entanglements;s;){var n=31-Jt(s),r=1<<n;r&e|t[n]&e&&(t[n]|=e),s&=~r}}var _e=0;function bp(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var wp,Dd,_p,jp,kp,Sc=!1,da=[],qs=null,Ks=null,Ys=null,Pi=new Map,Ei=new Map,zs=[],jy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ju(t,e){switch(t){case"focusin":case"focusout":qs=null;break;case"dragenter":case"dragleave":Ks=null;break;case"mouseover":case"mouseout":Ys=null;break;case"pointerover":case"pointerout":Pi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ei.delete(e.pointerId)}}function Br(t,e,s,n,r,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:s,eventSystemFlags:n,nativeEvent:i,targetContainers:[r]},e!==null&&(e=Qi(e),e!==null&&Dd(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function ky(t,e,s,n,r){switch(e){case"focusin":return qs=Br(qs,t,e,s,n,r),!0;case"dragenter":return Ks=Br(Ks,t,e,s,n,r),!0;case"mouseover":return Ys=Br(Ys,t,e,s,n,r),!0;case"pointerover":var i=r.pointerId;return Pi.set(i,Br(Pi.get(i)||null,t,e,s,n,r)),!0;case"gotpointercapture":return i=r.pointerId,Ei.set(i,Br(Ei.get(i)||null,t,e,s,n,r)),!0}return!1}function Np(t){var e=kn(t.target);if(e!==null){var s=Fn(e);if(s!==null){if(e=s.tag,e===13){if(e=fp(s),e!==null){t.blockedOn=e,kp(t.priority,function(){_p(s)});return}}else if(e===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function $a(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var s=Cc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(s===null){s=t.nativeEvent;var n=new s.constructor(s.type,s);wc=n,s.target.dispatchEvent(n),wc=null}else return e=Qi(s),e!==null&&Dd(e),t.blockedOn=s,!1;e.shift()}return!0}function Xu(t,e,s){$a(t)&&s.delete(e)}function Ny(){Sc=!1,qs!==null&&$a(qs)&&(qs=null),Ks!==null&&$a(Ks)&&(Ks=null),Ys!==null&&$a(Ys)&&(Ys=null),Pi.forEach(Xu),Ei.forEach(Xu)}function $r(t,e){t.blockedOn===e&&(t.blockedOn=null,Sc||(Sc=!0,At.unstable_scheduleCallback(At.unstable_NormalPriority,Ny)))}function Ti(t){function e(r){return $r(r,t)}if(0<da.length){$r(da[0],t);for(var s=1;s<da.length;s++){var n=da[s];n.blockedOn===t&&(n.blockedOn=null)}}for(qs!==null&&$r(qs,t),Ks!==null&&$r(Ks,t),Ys!==null&&$r(Ys,t),Pi.forEach(e),Ei.forEach(e),s=0;s<zs.length;s++)n=zs[s],n.blockedOn===t&&(n.blockedOn=null);for(;0<zs.length&&(s=zs[0],s.blockedOn===null);)Np(s),s.blockedOn===null&&zs.shift()}var mr=As.ReactCurrentBatchConfig,ao=!0;function Sy(t,e,s,n){var r=_e,i=mr.transition;mr.transition=null;try{_e=1,Id(t,e,s,n)}finally{_e=r,mr.transition=i}}function Cy(t,e,s,n){var r=_e,i=mr.transition;mr.transition=null;try{_e=4,Id(t,e,s,n)}finally{_e=r,mr.transition=i}}function Id(t,e,s,n){if(ao){var r=Cc(t,e,s,n);if(r===null)Ol(t,e,n,oo,s),Ju(t,n);else if(ky(r,t,e,s,n))n.stopPropagation();else if(Ju(t,n),e&4&&-1<jy.indexOf(t)){for(;r!==null;){var i=Qi(r);if(i!==null&&wp(i),i=Cc(t,e,s,n),i===null&&Ol(t,e,n,oo,s),i===r)break;r=i}r!==null&&n.stopPropagation()}else Ol(t,e,n,null,s)}}var oo=null;function Cc(t,e,s,n){if(oo=null,t=Rd(n),t=kn(t),t!==null)if(e=Fn(t),e===null)t=null;else if(s=e.tag,s===13){if(t=fp(e),t!==null)return t;t=null}else if(s===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return oo=t,null}function Sp(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(my()){case Md:return 1;case xp:return 4;case ro:case py:return 16;case yp:return 536870912;default:return 16}default:return 16}}var Fs=null,zd=null,Fa=null;function Cp(){if(Fa)return Fa;var t,e=zd,s=e.length,n,r="value"in Fs?Fs.value:Fs.textContent,i=r.length;for(t=0;t<s&&e[t]===r[t];t++);var o=s-t;for(n=1;n<=o&&e[s-n]===r[i-n];n++);return Fa=r.slice(t,1<n?1-n:void 0)}function Ua(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ua(){return!0}function Zu(){return!1}function Rt(t){function e(s,n,r,i,o){this._reactName=s,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(s=t[l],this[l]=s?s(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ua:Zu,this.isPropagationStopped=Zu,this}return Le(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=ua)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=ua)},persist:function(){},isPersistent:ua}),e}var Rr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bd=Rt(Rr),Gi=Le({},Rr,{view:0,detail:0}),Py=Rt(Gi),jl,kl,Fr,Uo=Le({},Gi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$d,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Fr&&(Fr&&t.type==="mousemove"?(jl=t.screenX-Fr.screenX,kl=t.screenY-Fr.screenY):kl=jl=0,Fr=t),jl)},movementY:function(t){return"movementY"in t?t.movementY:kl}}),eh=Rt(Uo),Ey=Le({},Uo,{dataTransfer:0}),Ty=Rt(Ey),Ay=Le({},Gi,{relatedTarget:0}),Nl=Rt(Ay),Oy=Le({},Rr,{animationName:0,elapsedTime:0,pseudoElement:0}),Ry=Rt(Oy),My=Le({},Rr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ly=Rt(My),Dy=Le({},Rr,{data:0}),th=Rt(Dy),Iy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},By={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $y(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=By[t])?!!e[t]:!1}function $d(){return $y}var Fy=Le({},Gi,{key:function(t){if(t.key){var e=Iy[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ua(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?zy[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$d,charCode:function(t){return t.type==="keypress"?Ua(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ua(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Uy=Rt(Fy),Wy=Le({},Uo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sh=Rt(Wy),Hy=Le({},Gi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$d}),Vy=Rt(Hy),qy=Le({},Rr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ky=Rt(qy),Yy=Le({},Uo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Gy=Rt(Yy),Qy=[9,13,27,32],Fd=Cs&&"CompositionEvent"in window,di=null;Cs&&"documentMode"in document&&(di=document.documentMode);var Jy=Cs&&"TextEvent"in window&&!di,Pp=Cs&&(!Fd||di&&8<di&&11>=di),nh=" ",rh=!1;function Ep(t,e){switch(t){case"keyup":return Qy.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tp(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var er=!1;function Xy(t,e){switch(t){case"compositionend":return Tp(e);case"keypress":return e.which!==32?null:(rh=!0,nh);case"textInput":return t=e.data,t===nh&&rh?null:t;default:return null}}function Zy(t,e){if(er)return t==="compositionend"||!Fd&&Ep(t,e)?(t=Cp(),Fa=zd=Fs=null,er=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Pp&&e.locale!=="ko"?null:e.data;default:return null}}var ev={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ih(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ev[t.type]:e==="textarea"}function Ap(t,e,s,n){lp(n),e=lo(e,"onChange"),0<e.length&&(s=new Bd("onChange","change",null,s,n),t.push({event:s,listeners:e}))}var ui=null,Ai=null;function tv(t){Up(t,0)}function Wo(t){var e=nr(t);if(tp(e))return t}function sv(t,e){if(t==="change")return e}var Op=!1;if(Cs){var Sl;if(Cs){var Cl="oninput"in document;if(!Cl){var ah=document.createElement("div");ah.setAttribute("oninput","return;"),Cl=typeof ah.oninput=="function"}Sl=Cl}else Sl=!1;Op=Sl&&(!document.documentMode||9<document.documentMode)}function oh(){ui&&(ui.detachEvent("onpropertychange",Rp),Ai=ui=null)}function Rp(t){if(t.propertyName==="value"&&Wo(Ai)){var e=[];Ap(e,Ai,t,Rd(t)),hp(tv,e)}}function nv(t,e,s){t==="focusin"?(oh(),ui=e,Ai=s,ui.attachEvent("onpropertychange",Rp)):t==="focusout"&&oh()}function rv(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Wo(Ai)}function iv(t,e){if(t==="click")return Wo(e)}function av(t,e){if(t==="input"||t==="change")return Wo(e)}function ov(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Zt=typeof Object.is=="function"?Object.is:ov;function Oi(t,e){if(Zt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var s=Object.keys(t),n=Object.keys(e);if(s.length!==n.length)return!1;for(n=0;n<s.length;n++){var r=s[n];if(!cc.call(e,r)||!Zt(t[r],e[r]))return!1}return!0}function lh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ch(t,e){var s=lh(t);t=0;for(var n;s;){if(s.nodeType===3){if(n=t+s.textContent.length,t<=e&&n>=e)return{node:s,offset:e-t};t=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=lh(s)}}function Mp(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Mp(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Lp(){for(var t=window,e=to();e instanceof t.HTMLIFrameElement;){try{var s=typeof e.contentWindow.location.href=="string"}catch{s=!1}if(s)t=e.contentWindow;else break;e=to(t.document)}return e}function Ud(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function lv(t){var e=Lp(),s=t.focusedElem,n=t.selectionRange;if(e!==s&&s&&s.ownerDocument&&Mp(s.ownerDocument.documentElement,s)){if(n!==null&&Ud(s)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in s)s.selectionStart=e,s.selectionEnd=Math.min(t,s.value.length);else if(t=(e=s.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=s.textContent.length,i=Math.min(n.start,r);n=n.end===void 0?i:Math.min(n.end,r),!t.extend&&i>n&&(r=n,n=i,i=r),r=ch(s,i);var o=ch(s,n);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=s;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<e.length;s++)t=e[s],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var cv=Cs&&"documentMode"in document&&11>=document.documentMode,tr=null,Pc=null,hi=null,Ec=!1;function dh(t,e,s){var n=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Ec||tr==null||tr!==to(n)||(n=tr,"selectionStart"in n&&Ud(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),hi&&Oi(hi,n)||(hi=n,n=lo(Pc,"onSelect"),0<n.length&&(e=new Bd("onSelect","select",null,e,s),t.push({event:e,listeners:n}),e.target=tr)))}function ha(t,e){var s={};return s[t.toLowerCase()]=e.toLowerCase(),s["Webkit"+t]="webkit"+e,s["Moz"+t]="moz"+e,s}var sr={animationend:ha("Animation","AnimationEnd"),animationiteration:ha("Animation","AnimationIteration"),animationstart:ha("Animation","AnimationStart"),transitionend:ha("Transition","TransitionEnd")},Pl={},Dp={};Cs&&(Dp=document.createElement("div").style,"AnimationEvent"in window||(delete sr.animationend.animation,delete sr.animationiteration.animation,delete sr.animationstart.animation),"TransitionEvent"in window||delete sr.transitionend.transition);function Ho(t){if(Pl[t])return Pl[t];if(!sr[t])return t;var e=sr[t],s;for(s in e)if(e.hasOwnProperty(s)&&s in Dp)return Pl[t]=e[s];return t}var Ip=Ho("animationend"),zp=Ho("animationiteration"),Bp=Ho("animationstart"),$p=Ho("transitionend"),Fp=new Map,uh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function on(t,e){Fp.set(t,e),$n(e,[t])}for(var El=0;El<uh.length;El++){var Tl=uh[El],dv=Tl.toLowerCase(),uv=Tl[0].toUpperCase()+Tl.slice(1);on(dv,"on"+uv)}on(Ip,"onAnimationEnd");on(zp,"onAnimationIteration");on(Bp,"onAnimationStart");on("dblclick","onDoubleClick");on("focusin","onFocus");on("focusout","onBlur");on($p,"onTransitionEnd");vr("onMouseEnter",["mouseout","mouseover"]);vr("onMouseLeave",["mouseout","mouseover"]);vr("onPointerEnter",["pointerout","pointerover"]);vr("onPointerLeave",["pointerout","pointerover"]);$n("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$n("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$n("onBeforeInput",["compositionend","keypress","textInput","paste"]);$n("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$n("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$n("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ti="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hv=new Set("cancel close invalid load scroll toggle".split(" ").concat(ti));function hh(t,e,s){var n=t.type||"unknown-event";t.currentTarget=s,dy(n,e,void 0,t),t.currentTarget=null}function Up(t,e){e=(e&4)!==0;for(var s=0;s<t.length;s++){var n=t[s],r=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&r.isPropagationStopped())break e;hh(r,l,d),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&r.isPropagationStopped())break e;hh(r,l,d),i=c}}}if(no)throw t=kc,no=!1,kc=null,t}function Ee(t,e){var s=e[Mc];s===void 0&&(s=e[Mc]=new Set);var n=t+"__bubble";s.has(n)||(Wp(e,t,2,!1),s.add(n))}function Al(t,e,s){var n=0;e&&(n|=4),Wp(s,t,n,e)}var fa="_reactListening"+Math.random().toString(36).slice(2);function Ri(t){if(!t[fa]){t[fa]=!0,Qm.forEach(function(s){s!=="selectionchange"&&(hv.has(s)||Al(s,!1,t),Al(s,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[fa]||(e[fa]=!0,Al("selectionchange",!1,e))}}function Wp(t,e,s,n){switch(Sp(e)){case 1:var r=Sy;break;case 4:r=Cy;break;default:r=Id}s=r.bind(null,e,s,t),r=void 0,!jc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),n?r!==void 0?t.addEventListener(e,s,{capture:!0,passive:r}):t.addEventListener(e,s,!0):r!==void 0?t.addEventListener(e,s,{passive:r}):t.addEventListener(e,s,!1)}function Ol(t,e,s,n,r){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;o=o.return}for(;l!==null;){if(o=kn(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}hp(function(){var d=i,u=Rd(s),h=[];e:{var f=Fp.get(t);if(f!==void 0){var m=Bd,x=t;switch(t){case"keypress":if(Ua(s)===0)break e;case"keydown":case"keyup":m=Uy;break;case"focusin":x="focus",m=Nl;break;case"focusout":x="blur",m=Nl;break;case"beforeblur":case"afterblur":m=Nl;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=eh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Ty;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Vy;break;case Ip:case zp:case Bp:m=Ry;break;case $p:m=Ky;break;case"scroll":m=Py;break;case"wheel":m=Gy;break;case"copy":case"cut":case"paste":m=Ly;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=sh}var y=(e&4)!==0,b=!y&&t==="scroll",g=y?f!==null?f+"Capture":null:f;y=[];for(var p=d,v;p!==null;){v=p;var w=v.stateNode;if(v.tag===5&&w!==null&&(v=w,g!==null&&(w=Ci(p,g),w!=null&&y.push(Mi(p,w,v)))),b)break;p=p.return}0<y.length&&(f=new m(f,x,null,s,u),h.push({event:f,listeners:y}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&s!==wc&&(x=s.relatedTarget||s.fromElement)&&(kn(x)||x[Ps]))break e;if((m||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,m?(x=s.relatedTarget||s.toElement,m=d,x=x?kn(x):null,x!==null&&(b=Fn(x),x!==b||x.tag!==5&&x.tag!==6)&&(x=null)):(m=null,x=d),m!==x)){if(y=eh,w="onMouseLeave",g="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(y=sh,w="onPointerLeave",g="onPointerEnter",p="pointer"),b=m==null?f:nr(m),v=x==null?f:nr(x),f=new y(w,p+"leave",m,s,u),f.target=b,f.relatedTarget=v,w=null,kn(u)===d&&(y=new y(g,p+"enter",x,s,u),y.target=v,y.relatedTarget=b,w=y),b=w,m&&x)t:{for(y=m,g=x,p=0,v=y;v;v=Wn(v))p++;for(v=0,w=g;w;w=Wn(w))v++;for(;0<p-v;)y=Wn(y),p--;for(;0<v-p;)g=Wn(g),v--;for(;p--;){if(y===g||g!==null&&y===g.alternate)break t;y=Wn(y),g=Wn(g)}y=null}else y=null;m!==null&&fh(h,f,m,y,!1),x!==null&&b!==null&&fh(h,b,x,y,!0)}}e:{if(f=d?nr(d):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var j=sv;else if(ih(f))if(Op)j=av;else{j=rv;var N=nv}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(j=iv);if(j&&(j=j(t,d))){Ap(h,j,s,u);break e}N&&N(t,f,d),t==="focusout"&&(N=f._wrapperState)&&N.controlled&&f.type==="number"&&gc(f,"number",f.value)}switch(N=d?nr(d):window,t){case"focusin":(ih(N)||N.contentEditable==="true")&&(tr=N,Pc=d,hi=null);break;case"focusout":hi=Pc=tr=null;break;case"mousedown":Ec=!0;break;case"contextmenu":case"mouseup":case"dragend":Ec=!1,dh(h,s,u);break;case"selectionchange":if(cv)break;case"keydown":case"keyup":dh(h,s,u)}var P;if(Fd)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else er?Ep(t,s)&&(A="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(A="onCompositionStart");A&&(Pp&&s.locale!=="ko"&&(er||A!=="onCompositionStart"?A==="onCompositionEnd"&&er&&(P=Cp()):(Fs=u,zd="value"in Fs?Fs.value:Fs.textContent,er=!0)),N=lo(d,A),0<N.length&&(A=new th(A,t,null,s,u),h.push({event:A,listeners:N}),P?A.data=P:(P=Tp(s),P!==null&&(A.data=P)))),(P=Jy?Xy(t,s):Zy(t,s))&&(d=lo(d,"onBeforeInput"),0<d.length&&(u=new th("onBeforeInput","beforeinput",null,s,u),h.push({event:u,listeners:d}),u.data=P))}Up(h,e)})}function Mi(t,e,s){return{instance:t,listener:e,currentTarget:s}}function lo(t,e){for(var s=e+"Capture",n=[];t!==null;){var r=t,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=Ci(t,s),i!=null&&n.unshift(Mi(t,i,r)),i=Ci(t,e),i!=null&&n.push(Mi(t,i,r))),t=t.return}return n}function Wn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function fh(t,e,s,n,r){for(var i=e._reactName,o=[];s!==null&&s!==n;){var l=s,c=l.alternate,d=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&d!==null&&(l=d,r?(c=Ci(s,i),c!=null&&o.unshift(Mi(s,c,l))):r||(c=Ci(s,i),c!=null&&o.push(Mi(s,c,l)))),s=s.return}o.length!==0&&t.push({event:e,listeners:o})}var fv=/\r\n?/g,mv=/\u0000|\uFFFD/g;function mh(t){return(typeof t=="string"?t:""+t).replace(fv,`
`).replace(mv,"")}function ma(t,e,s){if(e=mh(e),mh(t)!==e&&s)throw Error(U(425))}function co(){}var Tc=null,Ac=null;function Oc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Rc=typeof setTimeout=="function"?setTimeout:void 0,pv=typeof clearTimeout=="function"?clearTimeout:void 0,ph=typeof Promise=="function"?Promise:void 0,gv=typeof queueMicrotask=="function"?queueMicrotask:typeof ph<"u"?function(t){return ph.resolve(null).then(t).catch(xv)}:Rc;function xv(t){setTimeout(function(){throw t})}function Rl(t,e){var s=e,n=0;do{var r=s.nextSibling;if(t.removeChild(s),r&&r.nodeType===8)if(s=r.data,s==="/$"){if(n===0){t.removeChild(r),Ti(e);return}n--}else s!=="$"&&s!=="$?"&&s!=="$!"||n++;s=r}while(s);Ti(e)}function Gs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function gh(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(e===0)return t;e--}else s==="/$"&&e++}t=t.previousSibling}return null}var Mr=Math.random().toString(36).slice(2),os="__reactFiber$"+Mr,Li="__reactProps$"+Mr,Ps="__reactContainer$"+Mr,Mc="__reactEvents$"+Mr,yv="__reactListeners$"+Mr,vv="__reactHandles$"+Mr;function kn(t){var e=t[os];if(e)return e;for(var s=t.parentNode;s;){if(e=s[Ps]||s[os]){if(s=e.alternate,e.child!==null||s!==null&&s.child!==null)for(t=gh(t);t!==null;){if(s=t[os])return s;t=gh(t)}return e}t=s,s=t.parentNode}return null}function Qi(t){return t=t[os]||t[Ps],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function nr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function Vo(t){return t[Li]||null}var Lc=[],rr=-1;function ln(t){return{current:t}}function Ae(t){0>rr||(t.current=Lc[rr],Lc[rr]=null,rr--)}function Ce(t,e){rr++,Lc[rr]=t.current,t.current=e}var nn={},it=ln(nn),wt=ln(!1),On=nn;function br(t,e){var s=t.type.contextTypes;if(!s)return nn;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in s)r[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function _t(t){return t=t.childContextTypes,t!=null}function uo(){Ae(wt),Ae(it)}function xh(t,e,s){if(it.current!==nn)throw Error(U(168));Ce(it,e),Ce(wt,s)}function Hp(t,e,s){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return s;n=n.getChildContext();for(var r in n)if(!(r in e))throw Error(U(108,ny(t)||"Unknown",r));return Le({},s,n)}function ho(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||nn,On=it.current,Ce(it,t),Ce(wt,wt.current),!0}function yh(t,e,s){var n=t.stateNode;if(!n)throw Error(U(169));s?(t=Hp(t,e,On),n.__reactInternalMemoizedMergedChildContext=t,Ae(wt),Ae(it),Ce(it,t)):Ae(wt),Ce(wt,s)}var bs=null,qo=!1,Ml=!1;function Vp(t){bs===null?bs=[t]:bs.push(t)}function bv(t){qo=!0,Vp(t)}function cn(){if(!Ml&&bs!==null){Ml=!0;var t=0,e=_e;try{var s=bs;for(_e=1;t<s.length;t++){var n=s[t];do n=n(!0);while(n!==null)}bs=null,qo=!1}catch(r){throw bs!==null&&(bs=bs.slice(t+1)),gp(Md,cn),r}finally{_e=e,Ml=!1}}return null}var ir=[],ar=0,fo=null,mo=0,Dt=[],It=0,Rn=null,_s=1,js="";function yn(t,e){ir[ar++]=mo,ir[ar++]=fo,fo=t,mo=e}function qp(t,e,s){Dt[It++]=_s,Dt[It++]=js,Dt[It++]=Rn,Rn=t;var n=_s;t=js;var r=32-Jt(n)-1;n&=~(1<<r),s+=1;var i=32-Jt(e)+r;if(30<i){var o=r-r%5;i=(n&(1<<o)-1).toString(32),n>>=o,r-=o,_s=1<<32-Jt(e)+r|s<<r|n,js=i+t}else _s=1<<i|s<<r|n,js=t}function Wd(t){t.return!==null&&(yn(t,1),qp(t,1,0))}function Hd(t){for(;t===fo;)fo=ir[--ar],ir[ar]=null,mo=ir[--ar],ir[ar]=null;for(;t===Rn;)Rn=Dt[--It],Dt[It]=null,js=Dt[--It],Dt[It]=null,_s=Dt[--It],Dt[It]=null}var Et=null,Ct=null,Oe=!1,Gt=null;function Kp(t,e){var s=zt(5,null,null,0);s.elementType="DELETED",s.stateNode=e,s.return=t,e=t.deletions,e===null?(t.deletions=[s],t.flags|=16):e.push(s)}function vh(t,e){switch(t.tag){case 5:var s=t.type;return e=e.nodeType!==1||s.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Et=t,Ct=Gs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Et=t,Ct=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(s=Rn!==null?{id:_s,overflow:js}:null,t.memoizedState={dehydrated:e,treeContext:s,retryLane:1073741824},s=zt(18,null,null,0),s.stateNode=e,s.return=t,t.child=s,Et=t,Ct=null,!0):!1;default:return!1}}function Dc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ic(t){if(Oe){var e=Ct;if(e){var s=e;if(!vh(t,e)){if(Dc(t))throw Error(U(418));e=Gs(s.nextSibling);var n=Et;e&&vh(t,e)?Kp(n,s):(t.flags=t.flags&-4097|2,Oe=!1,Et=t)}}else{if(Dc(t))throw Error(U(418));t.flags=t.flags&-4097|2,Oe=!1,Et=t}}}function bh(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Et=t}function pa(t){if(t!==Et)return!1;if(!Oe)return bh(t),Oe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Oc(t.type,t.memoizedProps)),e&&(e=Ct)){if(Dc(t))throw Yp(),Error(U(418));for(;e;)Kp(t,e),e=Gs(e.nextSibling)}if(bh(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"){if(e===0){Ct=Gs(t.nextSibling);break e}e--}else s!=="$"&&s!=="$!"&&s!=="$?"||e++}t=t.nextSibling}Ct=null}}else Ct=Et?Gs(t.stateNode.nextSibling):null;return!0}function Yp(){for(var t=Ct;t;)t=Gs(t.nextSibling)}function wr(){Ct=Et=null,Oe=!1}function Vd(t){Gt===null?Gt=[t]:Gt.push(t)}var wv=As.ReactCurrentBatchConfig;function Ur(t,e,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(U(309));var n=s.stateNode}if(!n)throw Error(U(147,t));var r=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=r.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(U(284));if(!s._owner)throw Error(U(290,t))}return t}function ga(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function wh(t){var e=t._init;return e(t._payload)}function Gp(t){function e(g,p){if(t){var v=g.deletions;v===null?(g.deletions=[p],g.flags|=16):v.push(p)}}function s(g,p){if(!t)return null;for(;p!==null;)e(g,p),p=p.sibling;return null}function n(g,p){for(g=new Map;p!==null;)p.key!==null?g.set(p.key,p):g.set(p.index,p),p=p.sibling;return g}function r(g,p){return g=Zs(g,p),g.index=0,g.sibling=null,g}function i(g,p,v){return g.index=v,t?(v=g.alternate,v!==null?(v=v.index,v<p?(g.flags|=2,p):v):(g.flags|=2,p)):(g.flags|=1048576,p)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function l(g,p,v,w){return p===null||p.tag!==6?(p=Fl(v,g.mode,w),p.return=g,p):(p=r(p,v),p.return=g,p)}function c(g,p,v,w){var j=v.type;return j===Zn?u(g,p,v.props.children,w,v.key):p!==null&&(p.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Ds&&wh(j)===p.type)?(w=r(p,v.props),w.ref=Ur(g,p,v),w.return=g,w):(w=Ga(v.type,v.key,v.props,null,g.mode,w),w.ref=Ur(g,p,v),w.return=g,w)}function d(g,p,v,w){return p===null||p.tag!==4||p.stateNode.containerInfo!==v.containerInfo||p.stateNode.implementation!==v.implementation?(p=Ul(v,g.mode,w),p.return=g,p):(p=r(p,v.children||[]),p.return=g,p)}function u(g,p,v,w,j){return p===null||p.tag!==7?(p=En(v,g.mode,w,j),p.return=g,p):(p=r(p,v),p.return=g,p)}function h(g,p,v){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Fl(""+p,g.mode,v),p.return=g,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case ia:return v=Ga(p.type,p.key,p.props,null,g.mode,v),v.ref=Ur(g,null,p),v.return=g,v;case Xn:return p=Ul(p,g.mode,v),p.return=g,p;case Ds:var w=p._init;return h(g,w(p._payload),v)}if(Zr(p)||Ir(p))return p=En(p,g.mode,v,null),p.return=g,p;ga(g,p)}return null}function f(g,p,v,w){var j=p!==null?p.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return j!==null?null:l(g,p,""+v,w);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ia:return v.key===j?c(g,p,v,w):null;case Xn:return v.key===j?d(g,p,v,w):null;case Ds:return j=v._init,f(g,p,j(v._payload),w)}if(Zr(v)||Ir(v))return j!==null?null:u(g,p,v,w,null);ga(g,v)}return null}function m(g,p,v,w,j){if(typeof w=="string"&&w!==""||typeof w=="number")return g=g.get(v)||null,l(p,g,""+w,j);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ia:return g=g.get(w.key===null?v:w.key)||null,c(p,g,w,j);case Xn:return g=g.get(w.key===null?v:w.key)||null,d(p,g,w,j);case Ds:var N=w._init;return m(g,p,v,N(w._payload),j)}if(Zr(w)||Ir(w))return g=g.get(v)||null,u(p,g,w,j,null);ga(p,w)}return null}function x(g,p,v,w){for(var j=null,N=null,P=p,A=p=0,S=null;P!==null&&A<v.length;A++){P.index>A?(S=P,P=null):S=P.sibling;var R=f(g,P,v[A],w);if(R===null){P===null&&(P=S);break}t&&P&&R.alternate===null&&e(g,P),p=i(R,p,A),N===null?j=R:N.sibling=R,N=R,P=S}if(A===v.length)return s(g,P),Oe&&yn(g,A),j;if(P===null){for(;A<v.length;A++)P=h(g,v[A],w),P!==null&&(p=i(P,p,A),N===null?j=P:N.sibling=P,N=P);return Oe&&yn(g,A),j}for(P=n(g,P);A<v.length;A++)S=m(P,g,A,v[A],w),S!==null&&(t&&S.alternate!==null&&P.delete(S.key===null?A:S.key),p=i(S,p,A),N===null?j=S:N.sibling=S,N=S);return t&&P.forEach(function(L){return e(g,L)}),Oe&&yn(g,A),j}function y(g,p,v,w){var j=Ir(v);if(typeof j!="function")throw Error(U(150));if(v=j.call(v),v==null)throw Error(U(151));for(var N=j=null,P=p,A=p=0,S=null,R=v.next();P!==null&&!R.done;A++,R=v.next()){P.index>A?(S=P,P=null):S=P.sibling;var L=f(g,P,R.value,w);if(L===null){P===null&&(P=S);break}t&&P&&L.alternate===null&&e(g,P),p=i(L,p,A),N===null?j=L:N.sibling=L,N=L,P=S}if(R.done)return s(g,P),Oe&&yn(g,A),j;if(P===null){for(;!R.done;A++,R=v.next())R=h(g,R.value,w),R!==null&&(p=i(R,p,A),N===null?j=R:N.sibling=R,N=R);return Oe&&yn(g,A),j}for(P=n(g,P);!R.done;A++,R=v.next())R=m(P,g,A,R.value,w),R!==null&&(t&&R.alternate!==null&&P.delete(R.key===null?A:R.key),p=i(R,p,A),N===null?j=R:N.sibling=R,N=R);return t&&P.forEach(function(V){return e(g,V)}),Oe&&yn(g,A),j}function b(g,p,v,w){if(typeof v=="object"&&v!==null&&v.type===Zn&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case ia:e:{for(var j=v.key,N=p;N!==null;){if(N.key===j){if(j=v.type,j===Zn){if(N.tag===7){s(g,N.sibling),p=r(N,v.props.children),p.return=g,g=p;break e}}else if(N.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Ds&&wh(j)===N.type){s(g,N.sibling),p=r(N,v.props),p.ref=Ur(g,N,v),p.return=g,g=p;break e}s(g,N);break}else e(g,N);N=N.sibling}v.type===Zn?(p=En(v.props.children,g.mode,w,v.key),p.return=g,g=p):(w=Ga(v.type,v.key,v.props,null,g.mode,w),w.ref=Ur(g,p,v),w.return=g,g=w)}return o(g);case Xn:e:{for(N=v.key;p!==null;){if(p.key===N)if(p.tag===4&&p.stateNode.containerInfo===v.containerInfo&&p.stateNode.implementation===v.implementation){s(g,p.sibling),p=r(p,v.children||[]),p.return=g,g=p;break e}else{s(g,p);break}else e(g,p);p=p.sibling}p=Ul(v,g.mode,w),p.return=g,g=p}return o(g);case Ds:return N=v._init,b(g,p,N(v._payload),w)}if(Zr(v))return x(g,p,v,w);if(Ir(v))return y(g,p,v,w);ga(g,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,p!==null&&p.tag===6?(s(g,p.sibling),p=r(p,v),p.return=g,g=p):(s(g,p),p=Fl(v,g.mode,w),p.return=g,g=p),o(g)):s(g,p)}return b}var _r=Gp(!0),Qp=Gp(!1),po=ln(null),go=null,or=null,qd=null;function Kd(){qd=or=go=null}function Yd(t){var e=po.current;Ae(po),t._currentValue=e}function zc(t,e,s){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===s)break;t=t.return}}function pr(t,e){go=t,qd=or=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(bt=!0),t.firstContext=null)}function Ft(t){var e=t._currentValue;if(qd!==t)if(t={context:t,memoizedValue:e,next:null},or===null){if(go===null)throw Error(U(308));or=t,go.dependencies={lanes:0,firstContext:t}}else or=or.next=t;return e}var Nn=null;function Gd(t){Nn===null?Nn=[t]:Nn.push(t)}function Jp(t,e,s,n){var r=e.interleaved;return r===null?(s.next=s,Gd(e)):(s.next=r.next,r.next=s),e.interleaved=s,Es(t,n)}function Es(t,e){t.lanes|=e;var s=t.alternate;for(s!==null&&(s.lanes|=e),s=t,t=t.return;t!==null;)t.childLanes|=e,s=t.alternate,s!==null&&(s.childLanes|=e),s=t,t=t.return;return s.tag===3?s.stateNode:null}var Is=!1;function Qd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Xp(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ss(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Qs(t,e,s){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,be&2){var r=n.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),n.pending=e,Es(t,s)}return r=n.interleaved,r===null?(e.next=e,Gd(n)):(e.next=r.next,r.next=e),n.interleaved=e,Es(t,s)}function Wa(t,e,s){if(e=e.updateQueue,e!==null&&(e=e.shared,(s&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,s|=n,e.lanes=s,Ld(t,s)}}function _h(t,e){var s=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,s===n)){var r=null,i=null;if(s=s.firstBaseUpdate,s!==null){do{var o={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};i===null?r=i=o:i=i.next=o,s=s.next}while(s!==null);i===null?r=i=e:i=i.next=e}else r=i=e;s={baseState:n.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=e:t.next=e,s.lastBaseUpdate=e}function xo(t,e,s,n){var r=t.updateQueue;Is=!1;var i=r.firstBaseUpdate,o=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(i!==null){var h=r.baseState;o=0,u=d=c=null,l=i;do{var f=l.lane,m=l.eventTime;if((n&f)===f){u!==null&&(u=u.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=t,y=l;switch(f=e,m=s,y.tag){case 1:if(x=y.payload,typeof x=="function"){h=x.call(m,h,f);break e}h=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=y.payload,f=typeof x=="function"?x.call(m,h,f):x,f==null)break e;h=Le({},h,f);break e;case 2:Is=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[l]:f.push(l))}else m={eventTime:m,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=m,c=h):u=u.next=m,o|=f;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;f=l,l=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(u===null&&(c=h),r.baseState=c,r.firstBaseUpdate=d,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else i===null&&(r.shared.lanes=0);Ln|=o,t.lanes=o,t.memoizedState=h}}function jh(t,e,s){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],r=n.callback;if(r!==null){if(n.callback=null,n=s,typeof r!="function")throw Error(U(191,r));r.call(n)}}}var Ji={},ds=ln(Ji),Di=ln(Ji),Ii=ln(Ji);function Sn(t){if(t===Ji)throw Error(U(174));return t}function Jd(t,e){switch(Ce(Ii,e),Ce(Di,t),Ce(ds,Ji),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:yc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=yc(e,t)}Ae(ds),Ce(ds,e)}function jr(){Ae(ds),Ae(Di),Ae(Ii)}function Zp(t){Sn(Ii.current);var e=Sn(ds.current),s=yc(e,t.type);e!==s&&(Ce(Di,t),Ce(ds,s))}function Xd(t){Di.current===t&&(Ae(ds),Ae(Di))}var Re=ln(0);function yo(t){for(var e=t;e!==null;){if(e.tag===13){var s=e.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ll=[];function Zd(){for(var t=0;t<Ll.length;t++)Ll[t]._workInProgressVersionPrimary=null;Ll.length=0}var Ha=As.ReactCurrentDispatcher,Dl=As.ReactCurrentBatchConfig,Mn=0,Me=null,He=null,Ye=null,vo=!1,fi=!1,zi=0,_v=0;function tt(){throw Error(U(321))}function eu(t,e){if(e===null)return!1;for(var s=0;s<e.length&&s<t.length;s++)if(!Zt(t[s],e[s]))return!1;return!0}function tu(t,e,s,n,r,i){if(Mn=i,Me=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ha.current=t===null||t.memoizedState===null?Sv:Cv,t=s(n,r),fi){i=0;do{if(fi=!1,zi=0,25<=i)throw Error(U(301));i+=1,Ye=He=null,e.updateQueue=null,Ha.current=Pv,t=s(n,r)}while(fi)}if(Ha.current=bo,e=He!==null&&He.next!==null,Mn=0,Ye=He=Me=null,vo=!1,e)throw Error(U(300));return t}function su(){var t=zi!==0;return zi=0,t}function is(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ye===null?Me.memoizedState=Ye=t:Ye=Ye.next=t,Ye}function Ut(){if(He===null){var t=Me.alternate;t=t!==null?t.memoizedState:null}else t=He.next;var e=Ye===null?Me.memoizedState:Ye.next;if(e!==null)Ye=e,He=t;else{if(t===null)throw Error(U(310));He=t,t={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},Ye===null?Me.memoizedState=Ye=t:Ye=Ye.next=t}return Ye}function Bi(t,e){return typeof e=="function"?e(t):e}function Il(t){var e=Ut(),s=e.queue;if(s===null)throw Error(U(311));s.lastRenderedReducer=t;var n=He,r=n.baseQueue,i=s.pending;if(i!==null){if(r!==null){var o=r.next;r.next=i.next,i.next=o}n.baseQueue=r=i,s.pending=null}if(r!==null){i=r.next,n=n.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((Mn&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:t(n,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=h,o=n):c=c.next=h,Me.lanes|=u,Ln|=u}d=d.next}while(d!==null&&d!==i);c===null?o=n:c.next=l,Zt(n,e.memoizedState)||(bt=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=c,s.lastRenderedState=n}if(t=s.interleaved,t!==null){r=t;do i=r.lane,Me.lanes|=i,Ln|=i,r=r.next;while(r!==t)}else r===null&&(s.lanes=0);return[e.memoizedState,s.dispatch]}function zl(t){var e=Ut(),s=e.queue;if(s===null)throw Error(U(311));s.lastRenderedReducer=t;var n=s.dispatch,r=s.pending,i=e.memoizedState;if(r!==null){s.pending=null;var o=r=r.next;do i=t(i,o.action),o=o.next;while(o!==r);Zt(i,e.memoizedState)||(bt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),s.lastRenderedState=i}return[i,n]}function eg(){}function tg(t,e){var s=Me,n=Ut(),r=e(),i=!Zt(n.memoizedState,r);if(i&&(n.memoizedState=r,bt=!0),n=n.queue,nu(rg.bind(null,s,n,t),[t]),n.getSnapshot!==e||i||Ye!==null&&Ye.memoizedState.tag&1){if(s.flags|=2048,$i(9,ng.bind(null,s,n,r,e),void 0,null),Ge===null)throw Error(U(349));Mn&30||sg(s,e,r)}return r}function sg(t,e,s){t.flags|=16384,t={getSnapshot:e,value:s},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.stores=[t]):(s=e.stores,s===null?e.stores=[t]:s.push(t))}function ng(t,e,s,n){e.value=s,e.getSnapshot=n,ig(e)&&ag(t)}function rg(t,e,s){return s(function(){ig(e)&&ag(t)})}function ig(t){var e=t.getSnapshot;t=t.value;try{var s=e();return!Zt(t,s)}catch{return!0}}function ag(t){var e=Es(t,1);e!==null&&Xt(e,t,1,-1)}function kh(t){var e=is();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bi,lastRenderedState:t},e.queue=t,t=t.dispatch=Nv.bind(null,Me,t),[e.memoizedState,t]}function $i(t,e,s,n){return t={tag:t,create:e,destroy:s,deps:n,next:null},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.lastEffect=t.next=t):(s=e.lastEffect,s===null?e.lastEffect=t.next=t:(n=s.next,s.next=t,t.next=n,e.lastEffect=t)),t}function og(){return Ut().memoizedState}function Va(t,e,s,n){var r=is();Me.flags|=t,r.memoizedState=$i(1|e,s,void 0,n===void 0?null:n)}function Ko(t,e,s,n){var r=Ut();n=n===void 0?null:n;var i=void 0;if(He!==null){var o=He.memoizedState;if(i=o.destroy,n!==null&&eu(n,o.deps)){r.memoizedState=$i(e,s,i,n);return}}Me.flags|=t,r.memoizedState=$i(1|e,s,i,n)}function Nh(t,e){return Va(8390656,8,t,e)}function nu(t,e){return Ko(2048,8,t,e)}function lg(t,e){return Ko(4,2,t,e)}function cg(t,e){return Ko(4,4,t,e)}function dg(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function ug(t,e,s){return s=s!=null?s.concat([t]):null,Ko(4,4,dg.bind(null,e,t),s)}function ru(){}function hg(t,e){var s=Ut();e=e===void 0?null:e;var n=s.memoizedState;return n!==null&&e!==null&&eu(e,n[1])?n[0]:(s.memoizedState=[t,e],t)}function fg(t,e){var s=Ut();e=e===void 0?null:e;var n=s.memoizedState;return n!==null&&e!==null&&eu(e,n[1])?n[0]:(t=t(),s.memoizedState=[t,e],t)}function mg(t,e,s){return Mn&21?(Zt(s,e)||(s=vp(),Me.lanes|=s,Ln|=s,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,bt=!0),t.memoizedState=s)}function jv(t,e){var s=_e;_e=s!==0&&4>s?s:4,t(!0);var n=Dl.transition;Dl.transition={};try{t(!1),e()}finally{_e=s,Dl.transition=n}}function pg(){return Ut().memoizedState}function kv(t,e,s){var n=Xs(t);if(s={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null},gg(t))xg(e,s);else if(s=Jp(t,e,s,n),s!==null){var r=dt();Xt(s,t,n,r),yg(s,e,n)}}function Nv(t,e,s){var n=Xs(t),r={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null};if(gg(t))xg(e,r);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,s);if(r.hasEagerState=!0,r.eagerState=l,Zt(l,o)){var c=e.interleaved;c===null?(r.next=r,Gd(e)):(r.next=c.next,c.next=r),e.interleaved=r;return}}catch{}finally{}s=Jp(t,e,r,n),s!==null&&(r=dt(),Xt(s,t,n,r),yg(s,e,n))}}function gg(t){var e=t.alternate;return t===Me||e!==null&&e===Me}function xg(t,e){fi=vo=!0;var s=t.pending;s===null?e.next=e:(e.next=s.next,s.next=e),t.pending=e}function yg(t,e,s){if(s&4194240){var n=e.lanes;n&=t.pendingLanes,s|=n,e.lanes=s,Ld(t,s)}}var bo={readContext:Ft,useCallback:tt,useContext:tt,useEffect:tt,useImperativeHandle:tt,useInsertionEffect:tt,useLayoutEffect:tt,useMemo:tt,useReducer:tt,useRef:tt,useState:tt,useDebugValue:tt,useDeferredValue:tt,useTransition:tt,useMutableSource:tt,useSyncExternalStore:tt,useId:tt,unstable_isNewReconciler:!1},Sv={readContext:Ft,useCallback:function(t,e){return is().memoizedState=[t,e===void 0?null:e],t},useContext:Ft,useEffect:Nh,useImperativeHandle:function(t,e,s){return s=s!=null?s.concat([t]):null,Va(4194308,4,dg.bind(null,e,t),s)},useLayoutEffect:function(t,e){return Va(4194308,4,t,e)},useInsertionEffect:function(t,e){return Va(4,2,t,e)},useMemo:function(t,e){var s=is();return e=e===void 0?null:e,t=t(),s.memoizedState=[t,e],t},useReducer:function(t,e,s){var n=is();return e=s!==void 0?s(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=kv.bind(null,Me,t),[n.memoizedState,t]},useRef:function(t){var e=is();return t={current:t},e.memoizedState=t},useState:kh,useDebugValue:ru,useDeferredValue:function(t){return is().memoizedState=t},useTransition:function(){var t=kh(!1),e=t[0];return t=jv.bind(null,t[1]),is().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,s){var n=Me,r=is();if(Oe){if(s===void 0)throw Error(U(407));s=s()}else{if(s=e(),Ge===null)throw Error(U(349));Mn&30||sg(n,e,s)}r.memoizedState=s;var i={value:s,getSnapshot:e};return r.queue=i,Nh(rg.bind(null,n,i,t),[t]),n.flags|=2048,$i(9,ng.bind(null,n,i,s,e),void 0,null),s},useId:function(){var t=is(),e=Ge.identifierPrefix;if(Oe){var s=js,n=_s;s=(n&~(1<<32-Jt(n)-1)).toString(32)+s,e=":"+e+"R"+s,s=zi++,0<s&&(e+="H"+s.toString(32)),e+=":"}else s=_v++,e=":"+e+"r"+s.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Cv={readContext:Ft,useCallback:hg,useContext:Ft,useEffect:nu,useImperativeHandle:ug,useInsertionEffect:lg,useLayoutEffect:cg,useMemo:fg,useReducer:Il,useRef:og,useState:function(){return Il(Bi)},useDebugValue:ru,useDeferredValue:function(t){var e=Ut();return mg(e,He.memoizedState,t)},useTransition:function(){var t=Il(Bi)[0],e=Ut().memoizedState;return[t,e]},useMutableSource:eg,useSyncExternalStore:tg,useId:pg,unstable_isNewReconciler:!1},Pv={readContext:Ft,useCallback:hg,useContext:Ft,useEffect:nu,useImperativeHandle:ug,useInsertionEffect:lg,useLayoutEffect:cg,useMemo:fg,useReducer:zl,useRef:og,useState:function(){return zl(Bi)},useDebugValue:ru,useDeferredValue:function(t){var e=Ut();return He===null?e.memoizedState=t:mg(e,He.memoizedState,t)},useTransition:function(){var t=zl(Bi)[0],e=Ut().memoizedState;return[t,e]},useMutableSource:eg,useSyncExternalStore:tg,useId:pg,unstable_isNewReconciler:!1};function qt(t,e){if(t&&t.defaultProps){e=Le({},e),t=t.defaultProps;for(var s in t)e[s]===void 0&&(e[s]=t[s]);return e}return e}function Bc(t,e,s,n){e=t.memoizedState,s=s(n,e),s=s==null?e:Le({},e,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var Yo={isMounted:function(t){return(t=t._reactInternals)?Fn(t)===t:!1},enqueueSetState:function(t,e,s){t=t._reactInternals;var n=dt(),r=Xs(t),i=Ss(n,r);i.payload=e,s!=null&&(i.callback=s),e=Qs(t,i,r),e!==null&&(Xt(e,t,r,n),Wa(e,t,r))},enqueueReplaceState:function(t,e,s){t=t._reactInternals;var n=dt(),r=Xs(t),i=Ss(n,r);i.tag=1,i.payload=e,s!=null&&(i.callback=s),e=Qs(t,i,r),e!==null&&(Xt(e,t,r,n),Wa(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var s=dt(),n=Xs(t),r=Ss(s,n);r.tag=2,e!=null&&(r.callback=e),e=Qs(t,r,n),e!==null&&(Xt(e,t,n,s),Wa(e,t,n))}};function Sh(t,e,s,n,r,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,o):e.prototype&&e.prototype.isPureReactComponent?!Oi(s,n)||!Oi(r,i):!0}function vg(t,e,s){var n=!1,r=nn,i=e.contextType;return typeof i=="object"&&i!==null?i=Ft(i):(r=_t(e)?On:it.current,n=e.contextTypes,i=(n=n!=null)?br(t,r):nn),e=new e(s,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Yo,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=i),e}function Ch(t,e,s,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(s,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(s,n),e.state!==t&&Yo.enqueueReplaceState(e,e.state,null)}function $c(t,e,s,n){var r=t.stateNode;r.props=s,r.state=t.memoizedState,r.refs={},Qd(t);var i=e.contextType;typeof i=="object"&&i!==null?r.context=Ft(i):(i=_t(e)?On:it.current,r.context=br(t,i)),r.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Bc(t,e,i,s),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Yo.enqueueReplaceState(r,r.state,null),xo(t,s,r,n),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function kr(t,e){try{var s="",n=e;do s+=sy(n),n=n.return;while(n);var r=s}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:r,digest:null}}function Bl(t,e,s){return{value:t,source:null,stack:s??null,digest:e??null}}function Fc(t,e){try{console.error(e.value)}catch(s){setTimeout(function(){throw s})}}var Ev=typeof WeakMap=="function"?WeakMap:Map;function bg(t,e,s){s=Ss(-1,s),s.tag=3,s.payload={element:null};var n=e.value;return s.callback=function(){_o||(_o=!0,Jc=n),Fc(t,e)},s}function wg(t,e,s){s=Ss(-1,s),s.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var r=e.value;s.payload=function(){return n(r)},s.callback=function(){Fc(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(s.callback=function(){Fc(t,e),typeof n!="function"&&(Js===null?Js=new Set([this]):Js.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),s}function Ph(t,e,s){var n=t.pingCache;if(n===null){n=t.pingCache=new Ev;var r=new Set;n.set(e,r)}else r=n.get(e),r===void 0&&(r=new Set,n.set(e,r));r.has(s)||(r.add(s),t=Wv.bind(null,t,e,s),e.then(t,t))}function Eh(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Th(t,e,s,n,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(e=Ss(-1,1),e.tag=2,Qs(s,e,1))),s.lanes|=1),t)}var Tv=As.ReactCurrentOwner,bt=!1;function ct(t,e,s,n){e.child=t===null?Qp(e,null,s,n):_r(e,t.child,s,n)}function Ah(t,e,s,n,r){s=s.render;var i=e.ref;return pr(e,r),n=tu(t,e,s,n,i,r),s=su(),t!==null&&!bt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Ts(t,e,r)):(Oe&&s&&Wd(e),e.flags|=1,ct(t,e,n,r),e.child)}function Oh(t,e,s,n,r){if(t===null){var i=s.type;return typeof i=="function"&&!hu(i)&&i.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(e.tag=15,e.type=i,_g(t,e,i,n,r)):(t=Ga(s.type,null,n,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&r)){var o=i.memoizedProps;if(s=s.compare,s=s!==null?s:Oi,s(o,n)&&t.ref===e.ref)return Ts(t,e,r)}return e.flags|=1,t=Zs(i,n),t.ref=e.ref,t.return=e,e.child=t}function _g(t,e,s,n,r){if(t!==null){var i=t.memoizedProps;if(Oi(i,n)&&t.ref===e.ref)if(bt=!1,e.pendingProps=n=i,(t.lanes&r)!==0)t.flags&131072&&(bt=!0);else return e.lanes=t.lanes,Ts(t,e,r)}return Uc(t,e,s,n,r)}function jg(t,e,s){var n=e.pendingProps,r=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ce(cr,Nt),Nt|=s;else{if(!(s&1073741824))return t=i!==null?i.baseLanes|s:s,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ce(cr,Nt),Nt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:s,Ce(cr,Nt),Nt|=n}else i!==null?(n=i.baseLanes|s,e.memoizedState=null):n=s,Ce(cr,Nt),Nt|=n;return ct(t,e,r,s),e.child}function kg(t,e){var s=e.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(e.flags|=512,e.flags|=2097152)}function Uc(t,e,s,n,r){var i=_t(s)?On:it.current;return i=br(e,i),pr(e,r),s=tu(t,e,s,n,i,r),n=su(),t!==null&&!bt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Ts(t,e,r)):(Oe&&n&&Wd(e),e.flags|=1,ct(t,e,s,r),e.child)}function Rh(t,e,s,n,r){if(_t(s)){var i=!0;ho(e)}else i=!1;if(pr(e,r),e.stateNode===null)qa(t,e),vg(e,s,n),$c(e,s,n,r),n=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,d=s.contextType;typeof d=="object"&&d!==null?d=Ft(d):(d=_t(s)?On:it.current,d=br(e,d));var u=s.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==d)&&Ch(e,o,n,d),Is=!1;var f=e.memoizedState;o.state=f,xo(e,n,o,r),c=e.memoizedState,l!==n||f!==c||wt.current||Is?(typeof u=="function"&&(Bc(e,s,u,n),c=e.memoizedState),(l=Is||Sh(e,s,l,n,f,c,d))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),o.props=n,o.state=c,o.context=d,n=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,Xp(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:qt(e.type,l),o.props=d,h=e.pendingProps,f=o.context,c=s.contextType,typeof c=="object"&&c!==null?c=Ft(c):(c=_t(s)?On:it.current,c=br(e,c));var m=s.getDerivedStateFromProps;(u=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==c)&&Ch(e,o,n,c),Is=!1,f=e.memoizedState,o.state=f,xo(e,n,o,r);var x=e.memoizedState;l!==h||f!==x||wt.current||Is?(typeof m=="function"&&(Bc(e,s,m,n),x=e.memoizedState),(d=Is||Sh(e,s,d,n,f,x,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,x,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,x,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=x),o.props=n,o.state=x,o.context=c,n=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return Wc(t,e,s,n,i,r)}function Wc(t,e,s,n,r,i){kg(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return r&&yh(e,s,!1),Ts(t,e,i);n=e.stateNode,Tv.current=e;var l=o&&typeof s.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=_r(e,t.child,null,i),e.child=_r(e,null,l,i)):ct(t,e,l,i),e.memoizedState=n.state,r&&yh(e,s,!0),e.child}function Ng(t){var e=t.stateNode;e.pendingContext?xh(t,e.pendingContext,e.pendingContext!==e.context):e.context&&xh(t,e.context,!1),Jd(t,e.containerInfo)}function Mh(t,e,s,n,r){return wr(),Vd(r),e.flags|=256,ct(t,e,s,n),e.child}var Hc={dehydrated:null,treeContext:null,retryLane:0};function Vc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Sg(t,e,s){var n=e.pendingProps,r=Re.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(r&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Ce(Re,r&1),t===null)return Ic(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,i?(n=e.mode,i=e.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Jo(o,n,0,null),t=En(t,n,s,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Vc(s),e.memoizedState=Hc,t):iu(e,o));if(r=t.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return Av(t,e,o,n,l,r,s);if(i){i=n.fallback,o=e.mode,r=t.child,l=r.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&e.child!==r?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=Zs(r,c),n.subtreeFlags=r.subtreeFlags&14680064),l!==null?i=Zs(l,i):(i=En(i,o,s,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,o=t.child.memoizedState,o=o===null?Vc(s):{baseLanes:o.baseLanes|s,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~s,e.memoizedState=Hc,n}return i=t.child,t=i.sibling,n=Zs(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=s),n.return=e,n.sibling=null,t!==null&&(s=e.deletions,s===null?(e.deletions=[t],e.flags|=16):s.push(t)),e.child=n,e.memoizedState=null,n}function iu(t,e){return e=Jo({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function xa(t,e,s,n){return n!==null&&Vd(n),_r(e,t.child,null,s),t=iu(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Av(t,e,s,n,r,i,o){if(s)return e.flags&256?(e.flags&=-257,n=Bl(Error(U(422))),xa(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,r=e.mode,n=Jo({mode:"visible",children:n.children},r,0,null),i=En(i,r,o,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&_r(e,t.child,null,o),e.child.memoizedState=Vc(o),e.memoizedState=Hc,i);if(!(e.mode&1))return xa(t,e,o,null);if(r.data==="$!"){if(n=r.nextSibling&&r.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(U(419)),n=Bl(i,n,void 0),xa(t,e,o,n)}if(l=(o&t.childLanes)!==0,bt||l){if(n=Ge,n!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(n.suspendedLanes|o)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,Es(t,r),Xt(n,t,r,-1))}return uu(),n=Bl(Error(U(421))),xa(t,e,o,n)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=Hv.bind(null,t),r._reactRetry=e,null):(t=i.treeContext,Ct=Gs(r.nextSibling),Et=e,Oe=!0,Gt=null,t!==null&&(Dt[It++]=_s,Dt[It++]=js,Dt[It++]=Rn,_s=t.id,js=t.overflow,Rn=e),e=iu(e,n.children),e.flags|=4096,e)}function Lh(t,e,s){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),zc(t.return,e,s)}function $l(t,e,s,n,r){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:s,tailMode:r}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=s,i.tailMode=r)}function Cg(t,e,s){var n=e.pendingProps,r=n.revealOrder,i=n.tail;if(ct(t,e,n.children,s),n=Re.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Lh(t,s,e);else if(t.tag===19)Lh(t,s,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Ce(Re,n),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(s=e.child,r=null;s!==null;)t=s.alternate,t!==null&&yo(t)===null&&(r=s),s=s.sibling;s=r,s===null?(r=e.child,e.child=null):(r=s.sibling,s.sibling=null),$l(e,!1,r,s,i);break;case"backwards":for(s=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&yo(t)===null){e.child=r;break}t=r.sibling,r.sibling=s,s=r,r=t}$l(e,!0,s,null,i);break;case"together":$l(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function qa(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ts(t,e,s){if(t!==null&&(e.dependencies=t.dependencies),Ln|=e.lanes,!(s&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,s=Zs(t,t.pendingProps),e.child=s,s.return=e;t.sibling!==null;)t=t.sibling,s=s.sibling=Zs(t,t.pendingProps),s.return=e;s.sibling=null}return e.child}function Ov(t,e,s){switch(e.tag){case 3:Ng(e),wr();break;case 5:Zp(e);break;case 1:_t(e.type)&&ho(e);break;case 4:Jd(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,r=e.memoizedProps.value;Ce(po,n._currentValue),n._currentValue=r;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Ce(Re,Re.current&1),e.flags|=128,null):s&e.child.childLanes?Sg(t,e,s):(Ce(Re,Re.current&1),t=Ts(t,e,s),t!==null?t.sibling:null);Ce(Re,Re.current&1);break;case 19:if(n=(s&e.childLanes)!==0,t.flags&128){if(n)return Cg(t,e,s);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Ce(Re,Re.current),n)break;return null;case 22:case 23:return e.lanes=0,jg(t,e,s)}return Ts(t,e,s)}var Pg,qc,Eg,Tg;Pg=function(t,e){for(var s=e.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};qc=function(){};Eg=function(t,e,s,n){var r=t.memoizedProps;if(r!==n){t=e.stateNode,Sn(ds.current);var i=null;switch(s){case"input":r=mc(t,r),n=mc(t,n),i=[];break;case"select":r=Le({},r,{value:void 0}),n=Le({},n,{value:void 0}),i=[];break;case"textarea":r=xc(t,r),n=xc(t,n),i=[];break;default:typeof r.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=co)}vc(s,n);var o;s=null;for(d in r)if(!n.hasOwnProperty(d)&&r.hasOwnProperty(d)&&r[d]!=null)if(d==="style"){var l=r[d];for(o in l)l.hasOwnProperty(o)&&(s||(s={}),s[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Ni.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(l=r!=null?r[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(s||(s={}),s[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(s||(s={}),s[o]=c[o])}else s||(i||(i=[]),i.push(d,s)),s=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Ni.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Ee("scroll",t),i||l===c||(i=[])):(i=i||[]).push(d,c))}s&&(i=i||[]).push("style",s);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};Tg=function(t,e,s,n){s!==n&&(e.flags|=4)};function Wr(t,e){if(!Oe)switch(t.tailMode){case"hidden":e=t.tail;for(var s=null;e!==null;)e.alternate!==null&&(s=e),e=e.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function st(t){var e=t.alternate!==null&&t.alternate.child===t.child,s=0,n=0;if(e)for(var r=t.child;r!==null;)s|=r.lanes|r.childLanes,n|=r.subtreeFlags&14680064,n|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)s|=r.lanes|r.childLanes,n|=r.subtreeFlags,n|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=n,t.childLanes=s,e}function Rv(t,e,s){var n=e.pendingProps;switch(Hd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return st(e),null;case 1:return _t(e.type)&&uo(),st(e),null;case 3:return n=e.stateNode,jr(),Ae(wt),Ae(it),Zd(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(pa(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Gt!==null&&(ed(Gt),Gt=null))),qc(t,e),st(e),null;case 5:Xd(e);var r=Sn(Ii.current);if(s=e.type,t!==null&&e.stateNode!=null)Eg(t,e,s,n,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(U(166));return st(e),null}if(t=Sn(ds.current),pa(e)){n=e.stateNode,s=e.type;var i=e.memoizedProps;switch(n[os]=e,n[Li]=i,t=(e.mode&1)!==0,s){case"dialog":Ee("cancel",n),Ee("close",n);break;case"iframe":case"object":case"embed":Ee("load",n);break;case"video":case"audio":for(r=0;r<ti.length;r++)Ee(ti[r],n);break;case"source":Ee("error",n);break;case"img":case"image":case"link":Ee("error",n),Ee("load",n);break;case"details":Ee("toggle",n);break;case"input":Hu(n,i),Ee("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Ee("invalid",n);break;case"textarea":qu(n,i),Ee("invalid",n)}vc(s,i),r=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&ma(n.textContent,l,t),r=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&ma(n.textContent,l,t),r=["children",""+l]):Ni.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ee("scroll",n)}switch(s){case"input":aa(n),Vu(n,i,!0);break;case"textarea":aa(n),Ku(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=co)}n=r,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=rp(s)),t==="http://www.w3.org/1999/xhtml"?s==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(s,{is:n.is}):(t=o.createElement(s),s==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,s),t[os]=e,t[Li]=n,Pg(t,e,!1,!1),e.stateNode=t;e:{switch(o=bc(s,n),s){case"dialog":Ee("cancel",t),Ee("close",t),r=n;break;case"iframe":case"object":case"embed":Ee("load",t),r=n;break;case"video":case"audio":for(r=0;r<ti.length;r++)Ee(ti[r],t);r=n;break;case"source":Ee("error",t),r=n;break;case"img":case"image":case"link":Ee("error",t),Ee("load",t),r=n;break;case"details":Ee("toggle",t),r=n;break;case"input":Hu(t,n),r=mc(t,n),Ee("invalid",t);break;case"option":r=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},r=Le({},n,{value:void 0}),Ee("invalid",t);break;case"textarea":qu(t,n),r=xc(t,n),Ee("invalid",t);break;default:r=n}vc(s,r),l=r;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?op(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&ip(t,c)):i==="children"?typeof c=="string"?(s!=="textarea"||c!=="")&&Si(t,c):typeof c=="number"&&Si(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ni.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ee("scroll",t):c!=null&&Ed(t,i,c,o))}switch(s){case"input":aa(t),Vu(t,n,!1);break;case"textarea":aa(t),Ku(t);break;case"option":n.value!=null&&t.setAttribute("value",""+sn(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?ur(t,!!n.multiple,i,!1):n.defaultValue!=null&&ur(t,!!n.multiple,n.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=co)}switch(s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return st(e),null;case 6:if(t&&e.stateNode!=null)Tg(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(U(166));if(s=Sn(Ii.current),Sn(ds.current),pa(e)){if(n=e.stateNode,s=e.memoizedProps,n[os]=e,(i=n.nodeValue!==s)&&(t=Et,t!==null))switch(t.tag){case 3:ma(n.nodeValue,s,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ma(n.nodeValue,s,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(s.nodeType===9?s:s.ownerDocument).createTextNode(n),n[os]=e,e.stateNode=n}return st(e),null;case 13:if(Ae(Re),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Oe&&Ct!==null&&e.mode&1&&!(e.flags&128))Yp(),wr(),e.flags|=98560,i=!1;else if(i=pa(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(U(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(U(317));i[os]=e}else wr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;st(e),i=!1}else Gt!==null&&(ed(Gt),Gt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=s,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Re.current&1?Ve===0&&(Ve=3):uu())),e.updateQueue!==null&&(e.flags|=4),st(e),null);case 4:return jr(),qc(t,e),t===null&&Ri(e.stateNode.containerInfo),st(e),null;case 10:return Yd(e.type._context),st(e),null;case 17:return _t(e.type)&&uo(),st(e),null;case 19:if(Ae(Re),i=e.memoizedState,i===null)return st(e),null;if(n=(e.flags&128)!==0,o=i.rendering,o===null)if(n)Wr(i,!1);else{if(Ve!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=yo(t),o!==null){for(e.flags|=128,Wr(i,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=s,s=e.child;s!==null;)i=s,t=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s=s.sibling;return Ce(Re,Re.current&1|2),e.child}t=t.sibling}i.tail!==null&&Fe()>Nr&&(e.flags|=128,n=!0,Wr(i,!1),e.lanes=4194304)}else{if(!n)if(t=yo(o),t!==null){if(e.flags|=128,n=!0,s=t.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),Wr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Oe)return st(e),null}else 2*Fe()-i.renderingStartTime>Nr&&s!==1073741824&&(e.flags|=128,n=!0,Wr(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(s=i.last,s!==null?s.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Fe(),e.sibling=null,s=Re.current,Ce(Re,n?s&1|2:s&1),e):(st(e),null);case 22:case 23:return du(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Nt&1073741824&&(st(e),e.subtreeFlags&6&&(e.flags|=8192)):st(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function Mv(t,e){switch(Hd(e),e.tag){case 1:return _t(e.type)&&uo(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return jr(),Ae(wt),Ae(it),Zd(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Xd(e),null;case 13:if(Ae(Re),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));wr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ae(Re),null;case 4:return jr(),null;case 10:return Yd(e.type._context),null;case 22:case 23:return du(),null;case 24:return null;default:return null}}var ya=!1,rt=!1,Lv=typeof WeakSet=="function"?WeakSet:Set,Z=null;function lr(t,e){var s=t.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(n){De(t,e,n)}else s.current=null}function Kc(t,e,s){try{s()}catch(n){De(t,e,n)}}var Dh=!1;function Dv(t,e){if(Tc=ao,t=Lp(),Ud(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var n=s.getSelection&&s.getSelection();if(n&&n.rangeCount!==0){s=n.anchorNode;var r=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{s.nodeType,i.nodeType}catch{s=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=t,f=null;t:for(;;){for(var m;h!==s||r!==0&&h.nodeType!==3||(l=o+r),h!==i||n!==0&&h.nodeType!==3||(c=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===t)break t;if(f===s&&++d===r&&(l=o),f===i&&++u===n&&(c=o),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}s=l===-1||c===-1?null:{start:l,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(Ac={focusedElem:t,selectionRange:s},ao=!1,Z=e;Z!==null;)if(e=Z,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Z=t;else for(;Z!==null;){e=Z;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var y=x.memoizedProps,b=x.memoizedState,g=e.stateNode,p=g.getSnapshotBeforeUpdate(e.elementType===e.type?y:qt(e.type,y),b);g.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(w){De(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,Z=t;break}Z=e.return}return x=Dh,Dh=!1,x}function mi(t,e,s){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var r=n=n.next;do{if((r.tag&t)===t){var i=r.destroy;r.destroy=void 0,i!==void 0&&Kc(e,s,i)}r=r.next}while(r!==n)}}function Go(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var s=e=e.next;do{if((s.tag&t)===t){var n=s.create;s.destroy=n()}s=s.next}while(s!==e)}}function Yc(t){var e=t.ref;if(e!==null){var s=t.stateNode;switch(t.tag){case 5:t=s;break;default:t=s}typeof e=="function"?e(t):e.current=t}}function Ag(t){var e=t.alternate;e!==null&&(t.alternate=null,Ag(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[os],delete e[Li],delete e[Mc],delete e[yv],delete e[vv])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Og(t){return t.tag===5||t.tag===3||t.tag===4}function Ih(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Og(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Gc(t,e,s){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?s.nodeType===8?s.parentNode.insertBefore(t,e):s.insertBefore(t,e):(s.nodeType===8?(e=s.parentNode,e.insertBefore(t,s)):(e=s,e.appendChild(t)),s=s._reactRootContainer,s!=null||e.onclick!==null||(e.onclick=co));else if(n!==4&&(t=t.child,t!==null))for(Gc(t,e,s),t=t.sibling;t!==null;)Gc(t,e,s),t=t.sibling}function Qc(t,e,s){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?s.insertBefore(t,e):s.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Qc(t,e,s),t=t.sibling;t!==null;)Qc(t,e,s),t=t.sibling}var Je=null,Kt=!1;function Os(t,e,s){for(s=s.child;s!==null;)Rg(t,e,s),s=s.sibling}function Rg(t,e,s){if(cs&&typeof cs.onCommitFiberUnmount=="function")try{cs.onCommitFiberUnmount(Fo,s)}catch{}switch(s.tag){case 5:rt||lr(s,e);case 6:var n=Je,r=Kt;Je=null,Os(t,e,s),Je=n,Kt=r,Je!==null&&(Kt?(t=Je,s=s.stateNode,t.nodeType===8?t.parentNode.removeChild(s):t.removeChild(s)):Je.removeChild(s.stateNode));break;case 18:Je!==null&&(Kt?(t=Je,s=s.stateNode,t.nodeType===8?Rl(t.parentNode,s):t.nodeType===1&&Rl(t,s),Ti(t)):Rl(Je,s.stateNode));break;case 4:n=Je,r=Kt,Je=s.stateNode.containerInfo,Kt=!0,Os(t,e,s),Je=n,Kt=r;break;case 0:case 11:case 14:case 15:if(!rt&&(n=s.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){r=n=n.next;do{var i=r,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Kc(s,e,o),r=r.next}while(r!==n)}Os(t,e,s);break;case 1:if(!rt&&(lr(s,e),n=s.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=s.memoizedProps,n.state=s.memoizedState,n.componentWillUnmount()}catch(l){De(s,e,l)}Os(t,e,s);break;case 21:Os(t,e,s);break;case 22:s.mode&1?(rt=(n=rt)||s.memoizedState!==null,Os(t,e,s),rt=n):Os(t,e,s);break;default:Os(t,e,s)}}function zh(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new Lv),e.forEach(function(n){var r=Vv.bind(null,t,n);s.has(n)||(s.add(n),n.then(r,r))})}}function Ht(t,e){var s=e.deletions;if(s!==null)for(var n=0;n<s.length;n++){var r=s[n];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Je=l.stateNode,Kt=!1;break e;case 3:Je=l.stateNode.containerInfo,Kt=!0;break e;case 4:Je=l.stateNode.containerInfo,Kt=!0;break e}l=l.return}if(Je===null)throw Error(U(160));Rg(i,o,r),Je=null,Kt=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(d){De(r,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Mg(e,t),e=e.sibling}function Mg(t,e){var s=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ht(e,t),ss(t),n&4){try{mi(3,t,t.return),Go(3,t)}catch(y){De(t,t.return,y)}try{mi(5,t,t.return)}catch(y){De(t,t.return,y)}}break;case 1:Ht(e,t),ss(t),n&512&&s!==null&&lr(s,s.return);break;case 5:if(Ht(e,t),ss(t),n&512&&s!==null&&lr(s,s.return),t.flags&32){var r=t.stateNode;try{Si(r,"")}catch(y){De(t,t.return,y)}}if(n&4&&(r=t.stateNode,r!=null)){var i=t.memoizedProps,o=s!==null?s.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&sp(r,i),bc(l,o);var d=bc(l,i);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];u==="style"?op(r,h):u==="dangerouslySetInnerHTML"?ip(r,h):u==="children"?Si(r,h):Ed(r,u,h,d)}switch(l){case"input":pc(r,i);break;case"textarea":np(r,i);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?ur(r,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?ur(r,!!i.multiple,i.defaultValue,!0):ur(r,!!i.multiple,i.multiple?[]:"",!1))}r[Li]=i}catch(y){De(t,t.return,y)}}break;case 6:if(Ht(e,t),ss(t),n&4){if(t.stateNode===null)throw Error(U(162));r=t.stateNode,i=t.memoizedProps;try{r.nodeValue=i}catch(y){De(t,t.return,y)}}break;case 3:if(Ht(e,t),ss(t),n&4&&s!==null&&s.memoizedState.isDehydrated)try{Ti(e.containerInfo)}catch(y){De(t,t.return,y)}break;case 4:Ht(e,t),ss(t);break;case 13:Ht(e,t),ss(t),r=t.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(lu=Fe())),n&4&&zh(t);break;case 22:if(u=s!==null&&s.memoizedState!==null,t.mode&1?(rt=(d=rt)||u,Ht(e,t),rt=d):Ht(e,t),ss(t),n&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!u&&t.mode&1)for(Z=t,u=t.child;u!==null;){for(h=Z=u;Z!==null;){switch(f=Z,m=f.child,f.tag){case 0:case 11:case 14:case 15:mi(4,f,f.return);break;case 1:lr(f,f.return);var x=f.stateNode;if(typeof x.componentWillUnmount=="function"){n=f,s=f.return;try{e=n,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(y){De(n,s,y)}}break;case 5:lr(f,f.return);break;case 22:if(f.memoizedState!==null){$h(h);continue}}m!==null?(m.return=f,Z=m):$h(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{r=h.stateNode,d?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=ap("display",o))}catch(y){De(t,t.return,y)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(y){De(t,t.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Ht(e,t),ss(t),n&4&&zh(t);break;case 21:break;default:Ht(e,t),ss(t)}}function ss(t){var e=t.flags;if(e&2){try{e:{for(var s=t.return;s!==null;){if(Og(s)){var n=s;break e}s=s.return}throw Error(U(160))}switch(n.tag){case 5:var r=n.stateNode;n.flags&32&&(Si(r,""),n.flags&=-33);var i=Ih(t);Qc(t,i,r);break;case 3:case 4:var o=n.stateNode.containerInfo,l=Ih(t);Gc(t,l,o);break;default:throw Error(U(161))}}catch(c){De(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Iv(t,e,s){Z=t,Lg(t)}function Lg(t,e,s){for(var n=(t.mode&1)!==0;Z!==null;){var r=Z,i=r.child;if(r.tag===22&&n){var o=r.memoizedState!==null||ya;if(!o){var l=r.alternate,c=l!==null&&l.memoizedState!==null||rt;l=ya;var d=rt;if(ya=o,(rt=c)&&!d)for(Z=r;Z!==null;)o=Z,c=o.child,o.tag===22&&o.memoizedState!==null?Fh(r):c!==null?(c.return=o,Z=c):Fh(r);for(;i!==null;)Z=i,Lg(i),i=i.sibling;Z=r,ya=l,rt=d}Bh(t)}else r.subtreeFlags&8772&&i!==null?(i.return=r,Z=i):Bh(t)}}function Bh(t){for(;Z!==null;){var e=Z;if(e.flags&8772){var s=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:rt||Go(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!rt)if(s===null)n.componentDidMount();else{var r=e.elementType===e.type?s.memoizedProps:qt(e.type,s.memoizedProps);n.componentDidUpdate(r,s.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&jh(e,i,n);break;case 3:var o=e.updateQueue;if(o!==null){if(s=null,e.child!==null)switch(e.child.tag){case 5:s=e.child.stateNode;break;case 1:s=e.child.stateNode}jh(e,o,s)}break;case 5:var l=e.stateNode;if(s===null&&e.flags&4){s=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Ti(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}rt||e.flags&512&&Yc(e)}catch(f){De(e,e.return,f)}}if(e===t){Z=null;break}if(s=e.sibling,s!==null){s.return=e.return,Z=s;break}Z=e.return}}function $h(t){for(;Z!==null;){var e=Z;if(e===t){Z=null;break}var s=e.sibling;if(s!==null){s.return=e.return,Z=s;break}Z=e.return}}function Fh(t){for(;Z!==null;){var e=Z;try{switch(e.tag){case 0:case 11:case 15:var s=e.return;try{Go(4,e)}catch(c){De(e,s,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var r=e.return;try{n.componentDidMount()}catch(c){De(e,r,c)}}var i=e.return;try{Yc(e)}catch(c){De(e,i,c)}break;case 5:var o=e.return;try{Yc(e)}catch(c){De(e,o,c)}}}catch(c){De(e,e.return,c)}if(e===t){Z=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Z=l;break}Z=e.return}}var zv=Math.ceil,wo=As.ReactCurrentDispatcher,au=As.ReactCurrentOwner,Bt=As.ReactCurrentBatchConfig,be=0,Ge=null,We=null,Ze=0,Nt=0,cr=ln(0),Ve=0,Fi=null,Ln=0,Qo=0,ou=0,pi=null,gt=null,lu=0,Nr=1/0,xs=null,_o=!1,Jc=null,Js=null,va=!1,Us=null,jo=0,gi=0,Xc=null,Ka=-1,Ya=0;function dt(){return be&6?Fe():Ka!==-1?Ka:Ka=Fe()}function Xs(t){return t.mode&1?be&2&&Ze!==0?Ze&-Ze:wv.transition!==null?(Ya===0&&(Ya=vp()),Ya):(t=_e,t!==0||(t=window.event,t=t===void 0?16:Sp(t.type)),t):1}function Xt(t,e,s,n){if(50<gi)throw gi=0,Xc=null,Error(U(185));Yi(t,s,n),(!(be&2)||t!==Ge)&&(t===Ge&&(!(be&2)&&(Qo|=s),Ve===4&&Bs(t,Ze)),jt(t,n),s===1&&be===0&&!(e.mode&1)&&(Nr=Fe()+500,qo&&cn()))}function jt(t,e){var s=t.callbackNode;wy(t,e);var n=io(t,t===Ge?Ze:0);if(n===0)s!==null&&Qu(s),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(s!=null&&Qu(s),e===1)t.tag===0?bv(Uh.bind(null,t)):Vp(Uh.bind(null,t)),gv(function(){!(be&6)&&cn()}),s=null;else{switch(bp(n)){case 1:s=Md;break;case 4:s=xp;break;case 16:s=ro;break;case 536870912:s=yp;break;default:s=ro}s=Wg(s,Dg.bind(null,t))}t.callbackPriority=e,t.callbackNode=s}}function Dg(t,e){if(Ka=-1,Ya=0,be&6)throw Error(U(327));var s=t.callbackNode;if(gr()&&t.callbackNode!==s)return null;var n=io(t,t===Ge?Ze:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=ko(t,n);else{e=n;var r=be;be|=2;var i=zg();(Ge!==t||Ze!==e)&&(xs=null,Nr=Fe()+500,Pn(t,e));do try{Fv();break}catch(l){Ig(t,l)}while(!0);Kd(),wo.current=i,be=r,We!==null?e=0:(Ge=null,Ze=0,e=Ve)}if(e!==0){if(e===2&&(r=Nc(t),r!==0&&(n=r,e=Zc(t,r))),e===1)throw s=Fi,Pn(t,0),Bs(t,n),jt(t,Fe()),s;if(e===6)Bs(t,n);else{if(r=t.current.alternate,!(n&30)&&!Bv(r)&&(e=ko(t,n),e===2&&(i=Nc(t),i!==0&&(n=i,e=Zc(t,i))),e===1))throw s=Fi,Pn(t,0),Bs(t,n),jt(t,Fe()),s;switch(t.finishedWork=r,t.finishedLanes=n,e){case 0:case 1:throw Error(U(345));case 2:vn(t,gt,xs);break;case 3:if(Bs(t,n),(n&130023424)===n&&(e=lu+500-Fe(),10<e)){if(io(t,0)!==0)break;if(r=t.suspendedLanes,(r&n)!==n){dt(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Rc(vn.bind(null,t,gt,xs),e);break}vn(t,gt,xs);break;case 4:if(Bs(t,n),(n&4194240)===n)break;for(e=t.eventTimes,r=-1;0<n;){var o=31-Jt(n);i=1<<o,o=e[o],o>r&&(r=o),n&=~i}if(n=r,n=Fe()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*zv(n/1960))-n,10<n){t.timeoutHandle=Rc(vn.bind(null,t,gt,xs),n);break}vn(t,gt,xs);break;case 5:vn(t,gt,xs);break;default:throw Error(U(329))}}}return jt(t,Fe()),t.callbackNode===s?Dg.bind(null,t):null}function Zc(t,e){var s=pi;return t.current.memoizedState.isDehydrated&&(Pn(t,e).flags|=256),t=ko(t,e),t!==2&&(e=gt,gt=s,e!==null&&ed(e)),t}function ed(t){gt===null?gt=t:gt.push.apply(gt,t)}function Bv(t){for(var e=t;;){if(e.flags&16384){var s=e.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var n=0;n<s.length;n++){var r=s[n],i=r.getSnapshot;r=r.value;try{if(!Zt(i(),r))return!1}catch{return!1}}}if(s=e.child,e.subtreeFlags&16384&&s!==null)s.return=e,e=s;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Bs(t,e){for(e&=~ou,e&=~Qo,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var s=31-Jt(e),n=1<<s;t[s]=-1,e&=~n}}function Uh(t){if(be&6)throw Error(U(327));gr();var e=io(t,0);if(!(e&1))return jt(t,Fe()),null;var s=ko(t,e);if(t.tag!==0&&s===2){var n=Nc(t);n!==0&&(e=n,s=Zc(t,n))}if(s===1)throw s=Fi,Pn(t,0),Bs(t,e),jt(t,Fe()),s;if(s===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,vn(t,gt,xs),jt(t,Fe()),null}function cu(t,e){var s=be;be|=1;try{return t(e)}finally{be=s,be===0&&(Nr=Fe()+500,qo&&cn())}}function Dn(t){Us!==null&&Us.tag===0&&!(be&6)&&gr();var e=be;be|=1;var s=Bt.transition,n=_e;try{if(Bt.transition=null,_e=1,t)return t()}finally{_e=n,Bt.transition=s,be=e,!(be&6)&&cn()}}function du(){Nt=cr.current,Ae(cr)}function Pn(t,e){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==-1&&(t.timeoutHandle=-1,pv(s)),We!==null)for(s=We.return;s!==null;){var n=s;switch(Hd(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&uo();break;case 3:jr(),Ae(wt),Ae(it),Zd();break;case 5:Xd(n);break;case 4:jr();break;case 13:Ae(Re);break;case 19:Ae(Re);break;case 10:Yd(n.type._context);break;case 22:case 23:du()}s=s.return}if(Ge=t,We=t=Zs(t.current,null),Ze=Nt=e,Ve=0,Fi=null,ou=Qo=Ln=0,gt=pi=null,Nn!==null){for(e=0;e<Nn.length;e++)if(s=Nn[e],n=s.interleaved,n!==null){s.interleaved=null;var r=n.next,i=s.pending;if(i!==null){var o=i.next;i.next=r,n.next=o}s.pending=n}Nn=null}return t}function Ig(t,e){do{var s=We;try{if(Kd(),Ha.current=bo,vo){for(var n=Me.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}vo=!1}if(Mn=0,Ye=He=Me=null,fi=!1,zi=0,au.current=null,s===null||s.return===null){Ve=1,Fi=e,We=null;break}e:{var i=t,o=s.return,l=s,c=e;if(e=Ze,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=Eh(o);if(m!==null){m.flags&=-257,Th(m,o,l,i,e),m.mode&1&&Ph(i,d,e),e=m,c=d;var x=e.updateQueue;if(x===null){var y=new Set;y.add(c),e.updateQueue=y}else x.add(c);break e}else{if(!(e&1)){Ph(i,d,e),uu();break e}c=Error(U(426))}}else if(Oe&&l.mode&1){var b=Eh(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),Th(b,o,l,i,e),Vd(kr(c,l));break e}}i=c=kr(c,l),Ve!==4&&(Ve=2),pi===null?pi=[i]:pi.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var g=bg(i,c,e);_h(i,g);break e;case 1:l=c;var p=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Js===null||!Js.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var w=wg(i,l,e);_h(i,w);break e}}i=i.return}while(i!==null)}$g(s)}catch(j){e=j,We===s&&s!==null&&(We=s=s.return);continue}break}while(!0)}function zg(){var t=wo.current;return wo.current=bo,t===null?bo:t}function uu(){(Ve===0||Ve===3||Ve===2)&&(Ve=4),Ge===null||!(Ln&268435455)&&!(Qo&268435455)||Bs(Ge,Ze)}function ko(t,e){var s=be;be|=2;var n=zg();(Ge!==t||Ze!==e)&&(xs=null,Pn(t,e));do try{$v();break}catch(r){Ig(t,r)}while(!0);if(Kd(),be=s,wo.current=n,We!==null)throw Error(U(261));return Ge=null,Ze=0,Ve}function $v(){for(;We!==null;)Bg(We)}function Fv(){for(;We!==null&&!hy();)Bg(We)}function Bg(t){var e=Ug(t.alternate,t,Nt);t.memoizedProps=t.pendingProps,e===null?$g(t):We=e,au.current=null}function $g(t){var e=t;do{var s=e.alternate;if(t=e.return,e.flags&32768){if(s=Mv(s,e),s!==null){s.flags&=32767,We=s;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ve=6,We=null;return}}else if(s=Rv(s,e,Nt),s!==null){We=s;return}if(e=e.sibling,e!==null){We=e;return}We=e=t}while(e!==null);Ve===0&&(Ve=5)}function vn(t,e,s){var n=_e,r=Bt.transition;try{Bt.transition=null,_e=1,Uv(t,e,s,n)}finally{Bt.transition=r,_e=n}return null}function Uv(t,e,s,n){do gr();while(Us!==null);if(be&6)throw Error(U(327));s=t.finishedWork;var r=t.finishedLanes;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var i=s.lanes|s.childLanes;if(_y(t,i),t===Ge&&(We=Ge=null,Ze=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||va||(va=!0,Wg(ro,function(){return gr(),null})),i=(s.flags&15990)!==0,s.subtreeFlags&15990||i){i=Bt.transition,Bt.transition=null;var o=_e;_e=1;var l=be;be|=4,au.current=null,Dv(t,s),Mg(s,t),lv(Ac),ao=!!Tc,Ac=Tc=null,t.current=s,Iv(s),fy(),be=l,_e=o,Bt.transition=i}else t.current=s;if(va&&(va=!1,Us=t,jo=r),i=t.pendingLanes,i===0&&(Js=null),gy(s.stateNode),jt(t,Fe()),e!==null)for(n=t.onRecoverableError,s=0;s<e.length;s++)r=e[s],n(r.value,{componentStack:r.stack,digest:r.digest});if(_o)throw _o=!1,t=Jc,Jc=null,t;return jo&1&&t.tag!==0&&gr(),i=t.pendingLanes,i&1?t===Xc?gi++:(gi=0,Xc=t):gi=0,cn(),null}function gr(){if(Us!==null){var t=bp(jo),e=Bt.transition,s=_e;try{if(Bt.transition=null,_e=16>t?16:t,Us===null)var n=!1;else{if(t=Us,Us=null,jo=0,be&6)throw Error(U(331));var r=be;for(be|=4,Z=t.current;Z!==null;){var i=Z,o=i.child;if(Z.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(Z=d;Z!==null;){var u=Z;switch(u.tag){case 0:case 11:case 15:mi(8,u,i)}var h=u.child;if(h!==null)h.return=u,Z=h;else for(;Z!==null;){u=Z;var f=u.sibling,m=u.return;if(Ag(u),u===d){Z=null;break}if(f!==null){f.return=m,Z=f;break}Z=m}}}var x=i.alternate;if(x!==null){var y=x.child;if(y!==null){x.child=null;do{var b=y.sibling;y.sibling=null,y=b}while(y!==null)}}Z=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Z=o;else e:for(;Z!==null;){if(i=Z,i.flags&2048)switch(i.tag){case 0:case 11:case 15:mi(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,Z=g;break e}Z=i.return}}var p=t.current;for(Z=p;Z!==null;){o=Z;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,Z=v;else e:for(o=p;Z!==null;){if(l=Z,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Go(9,l)}}catch(j){De(l,l.return,j)}if(l===o){Z=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,Z=w;break e}Z=l.return}}if(be=r,cn(),cs&&typeof cs.onPostCommitFiberRoot=="function")try{cs.onPostCommitFiberRoot(Fo,t)}catch{}n=!0}return n}finally{_e=s,Bt.transition=e}}return!1}function Wh(t,e,s){e=kr(s,e),e=bg(t,e,1),t=Qs(t,e,1),e=dt(),t!==null&&(Yi(t,1,e),jt(t,e))}function De(t,e,s){if(t.tag===3)Wh(t,t,s);else for(;e!==null;){if(e.tag===3){Wh(e,t,s);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Js===null||!Js.has(n))){t=kr(s,t),t=wg(e,t,1),e=Qs(e,t,1),t=dt(),e!==null&&(Yi(e,1,t),jt(e,t));break}}e=e.return}}function Wv(t,e,s){var n=t.pingCache;n!==null&&n.delete(e),e=dt(),t.pingedLanes|=t.suspendedLanes&s,Ge===t&&(Ze&s)===s&&(Ve===4||Ve===3&&(Ze&130023424)===Ze&&500>Fe()-lu?Pn(t,0):ou|=s),jt(t,e)}function Fg(t,e){e===0&&(t.mode&1?(e=ca,ca<<=1,!(ca&130023424)&&(ca=4194304)):e=1);var s=dt();t=Es(t,e),t!==null&&(Yi(t,e,s),jt(t,s))}function Hv(t){var e=t.memoizedState,s=0;e!==null&&(s=e.retryLane),Fg(t,s)}function Vv(t,e){var s=0;switch(t.tag){case 13:var n=t.stateNode,r=t.memoizedState;r!==null&&(s=r.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(U(314))}n!==null&&n.delete(e),Fg(t,s)}var Ug;Ug=function(t,e,s){if(t!==null)if(t.memoizedProps!==e.pendingProps||wt.current)bt=!0;else{if(!(t.lanes&s)&&!(e.flags&128))return bt=!1,Ov(t,e,s);bt=!!(t.flags&131072)}else bt=!1,Oe&&e.flags&1048576&&qp(e,mo,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;qa(t,e),t=e.pendingProps;var r=br(e,it.current);pr(e,s),r=tu(null,e,n,t,r,s);var i=su();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,_t(n)?(i=!0,ho(e)):i=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Qd(e),r.updater=Yo,e.stateNode=r,r._reactInternals=e,$c(e,n,t,s),e=Wc(null,e,n,!0,i,s)):(e.tag=0,Oe&&i&&Wd(e),ct(null,e,r,s),e=e.child),e;case 16:n=e.elementType;e:{switch(qa(t,e),t=e.pendingProps,r=n._init,n=r(n._payload),e.type=n,r=e.tag=Kv(n),t=qt(n,t),r){case 0:e=Uc(null,e,n,t,s);break e;case 1:e=Rh(null,e,n,t,s);break e;case 11:e=Ah(null,e,n,t,s);break e;case 14:e=Oh(null,e,n,qt(n.type,t),s);break e}throw Error(U(306,n,""))}return e;case 0:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:qt(n,r),Uc(t,e,n,r,s);case 1:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:qt(n,r),Rh(t,e,n,r,s);case 3:e:{if(Ng(e),t===null)throw Error(U(387));n=e.pendingProps,i=e.memoizedState,r=i.element,Xp(t,e),xo(e,n,null,s);var o=e.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){r=kr(Error(U(423)),e),e=Mh(t,e,n,s,r);break e}else if(n!==r){r=kr(Error(U(424)),e),e=Mh(t,e,n,s,r);break e}else for(Ct=Gs(e.stateNode.containerInfo.firstChild),Et=e,Oe=!0,Gt=null,s=Qp(e,null,n,s),e.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(wr(),n===r){e=Ts(t,e,s);break e}ct(t,e,n,s)}e=e.child}return e;case 5:return Zp(e),t===null&&Ic(e),n=e.type,r=e.pendingProps,i=t!==null?t.memoizedProps:null,o=r.children,Oc(n,r)?o=null:i!==null&&Oc(n,i)&&(e.flags|=32),kg(t,e),ct(t,e,o,s),e.child;case 6:return t===null&&Ic(e),null;case 13:return Sg(t,e,s);case 4:return Jd(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=_r(e,null,n,s):ct(t,e,n,s),e.child;case 11:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:qt(n,r),Ah(t,e,n,r,s);case 7:return ct(t,e,e.pendingProps,s),e.child;case 8:return ct(t,e,e.pendingProps.children,s),e.child;case 12:return ct(t,e,e.pendingProps.children,s),e.child;case 10:e:{if(n=e.type._context,r=e.pendingProps,i=e.memoizedProps,o=r.value,Ce(po,n._currentValue),n._currentValue=o,i!==null)if(Zt(i.value,o)){if(i.children===r.children&&!wt.current){e=Ts(t,e,s);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=Ss(-1,s&-s),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=s,c=i.alternate,c!==null&&(c.lanes|=s),zc(i.return,s,e),l.lanes|=s;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(U(341));o.lanes|=s,l=o.alternate,l!==null&&(l.lanes|=s),zc(o,s,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ct(t,e,r.children,s),e=e.child}return e;case 9:return r=e.type,n=e.pendingProps.children,pr(e,s),r=Ft(r),n=n(r),e.flags|=1,ct(t,e,n,s),e.child;case 14:return n=e.type,r=qt(n,e.pendingProps),r=qt(n.type,r),Oh(t,e,n,r,s);case 15:return _g(t,e,e.type,e.pendingProps,s);case 17:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:qt(n,r),qa(t,e),e.tag=1,_t(n)?(t=!0,ho(e)):t=!1,pr(e,s),vg(e,n,r),$c(e,n,r,s),Wc(null,e,n,!0,t,s);case 19:return Cg(t,e,s);case 22:return jg(t,e,s)}throw Error(U(156,e.tag))};function Wg(t,e){return gp(t,e)}function qv(t,e,s,n){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zt(t,e,s,n){return new qv(t,e,s,n)}function hu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Kv(t){if(typeof t=="function")return hu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ad)return 11;if(t===Od)return 14}return 2}function Zs(t,e){var s=t.alternate;return s===null?(s=zt(t.tag,e,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=e,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&14680064,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,e=t.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function Ga(t,e,s,n,r,i){var o=2;if(n=t,typeof t=="function")hu(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Zn:return En(s.children,r,i,e);case Td:o=8,r|=8;break;case dc:return t=zt(12,s,e,r|2),t.elementType=dc,t.lanes=i,t;case uc:return t=zt(13,s,e,r),t.elementType=uc,t.lanes=i,t;case hc:return t=zt(19,s,e,r),t.elementType=hc,t.lanes=i,t;case Zm:return Jo(s,r,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Jm:o=10;break e;case Xm:o=9;break e;case Ad:o=11;break e;case Od:o=14;break e;case Ds:o=16,n=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=zt(o,s,e,r),e.elementType=t,e.type=n,e.lanes=i,e}function En(t,e,s,n){return t=zt(7,t,n,e),t.lanes=s,t}function Jo(t,e,s,n){return t=zt(22,t,n,e),t.elementType=Zm,t.lanes=s,t.stateNode={isHidden:!1},t}function Fl(t,e,s){return t=zt(6,t,null,e),t.lanes=s,t}function Ul(t,e,s){return e=zt(4,t.children!==null?t.children:[],t.key,e),e.lanes=s,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Yv(t,e,s,n,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_l(0),this.expirationTimes=_l(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_l(0),this.identifierPrefix=n,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function fu(t,e,s,n,r,i,o,l,c){return t=new Yv(t,e,s,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=zt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qd(i),t}function Gv(t,e,s){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Xn,key:n==null?null:""+n,children:t,containerInfo:e,implementation:s}}function Hg(t){if(!t)return nn;t=t._reactInternals;e:{if(Fn(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(_t(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var s=t.type;if(_t(s))return Hp(t,s,e)}return e}function Vg(t,e,s,n,r,i,o,l,c){return t=fu(s,n,!0,t,r,i,o,l,c),t.context=Hg(null),s=t.current,n=dt(),r=Xs(s),i=Ss(n,r),i.callback=e??null,Qs(s,i,r),t.current.lanes=r,Yi(t,r,n),jt(t,n),t}function Xo(t,e,s,n){var r=e.current,i=dt(),o=Xs(r);return s=Hg(s),e.context===null?e.context=s:e.pendingContext=s,e=Ss(i,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Qs(r,e,o),t!==null&&(Xt(t,r,o,i),Wa(t,r,o)),o}function No(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Hh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<e?s:e}}function mu(t,e){Hh(t,e),(t=t.alternate)&&Hh(t,e)}function Qv(){return null}var qg=typeof reportError=="function"?reportError:function(t){console.error(t)};function pu(t){this._internalRoot=t}Zo.prototype.render=pu.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));Xo(t,e,null,null)};Zo.prototype.unmount=pu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Dn(function(){Xo(null,t,null,null)}),e[Ps]=null}};function Zo(t){this._internalRoot=t}Zo.prototype.unstable_scheduleHydration=function(t){if(t){var e=jp();t={blockedOn:null,target:t,priority:e};for(var s=0;s<zs.length&&e!==0&&e<zs[s].priority;s++);zs.splice(s,0,t),s===0&&Np(t)}};function gu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function el(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Vh(){}function Jv(t,e,s,n,r){if(r){if(typeof n=="function"){var i=n;n=function(){var d=No(o);i.call(d)}}var o=Vg(e,n,t,0,null,!1,!1,"",Vh);return t._reactRootContainer=o,t[Ps]=o.current,Ri(t.nodeType===8?t.parentNode:t),Dn(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof n=="function"){var l=n;n=function(){var d=No(c);l.call(d)}}var c=fu(t,0,!1,null,null,!1,!1,"",Vh);return t._reactRootContainer=c,t[Ps]=c.current,Ri(t.nodeType===8?t.parentNode:t),Dn(function(){Xo(e,c,s,n)}),c}function tl(t,e,s,n,r){var i=s._reactRootContainer;if(i){var o=i;if(typeof r=="function"){var l=r;r=function(){var c=No(o);l.call(c)}}Xo(e,o,t,r)}else o=Jv(s,e,t,r,n);return No(o)}wp=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var s=ei(e.pendingLanes);s!==0&&(Ld(e,s|1),jt(e,Fe()),!(be&6)&&(Nr=Fe()+500,cn()))}break;case 13:Dn(function(){var n=Es(t,1);if(n!==null){var r=dt();Xt(n,t,1,r)}}),mu(t,1)}};Dd=function(t){if(t.tag===13){var e=Es(t,134217728);if(e!==null){var s=dt();Xt(e,t,134217728,s)}mu(t,134217728)}};_p=function(t){if(t.tag===13){var e=Xs(t),s=Es(t,e);if(s!==null){var n=dt();Xt(s,t,e,n)}mu(t,e)}};jp=function(){return _e};kp=function(t,e){var s=_e;try{return _e=t,e()}finally{_e=s}};_c=function(t,e,s){switch(e){case"input":if(pc(t,s),e=s.name,s.type==="radio"&&e!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<s.length;e++){var n=s[e];if(n!==t&&n.form===t.form){var r=Vo(n);if(!r)throw Error(U(90));tp(n),pc(n,r)}}}break;case"textarea":np(t,s);break;case"select":e=s.value,e!=null&&ur(t,!!s.multiple,e,!1)}};dp=cu;up=Dn;var Xv={usingClientEntryPoint:!1,Events:[Qi,nr,Vo,lp,cp,cu]},Hr={findFiberByHostInstance:kn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Zv={bundleType:Hr.bundleType,version:Hr.version,rendererPackageName:Hr.rendererPackageName,rendererConfig:Hr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:As.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=mp(t),t===null?null:t.stateNode},findFiberByHostInstance:Hr.findFiberByHostInstance||Qv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ba=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ba.isDisabled&&ba.supportsFiber)try{Fo=ba.inject(Zv),cs=ba}catch{}}Ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xv;Ot.createPortal=function(t,e){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gu(e))throw Error(U(200));return Gv(t,e,null,s)};Ot.createRoot=function(t,e){if(!gu(t))throw Error(U(299));var s=!1,n="",r=qg;return e!=null&&(e.unstable_strictMode===!0&&(s=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=fu(t,1,!1,null,null,s,!1,n,r),t[Ps]=e.current,Ri(t.nodeType===8?t.parentNode:t),new pu(e)};Ot.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=mp(e),t=t===null?null:t.stateNode,t};Ot.flushSync=function(t){return Dn(t)};Ot.hydrate=function(t,e,s){if(!el(e))throw Error(U(200));return tl(null,t,e,!0,s)};Ot.hydrateRoot=function(t,e,s){if(!gu(t))throw Error(U(405));var n=s!=null&&s.hydratedSources||null,r=!1,i="",o=qg;if(s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(i=s.identifierPrefix),s.onRecoverableError!==void 0&&(o=s.onRecoverableError)),e=Vg(e,null,t,1,s??null,r,!1,i,o),t[Ps]=e.current,Ri(t),n)for(t=0;t<n.length;t++)s=n[t],r=s._getVersion,r=r(s._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[s,r]:e.mutableSourceEagerHydrationData.push(s,r);return new Zo(e)};Ot.render=function(t,e,s){if(!el(e))throw Error(U(200));return tl(null,t,e,!1,s)};Ot.unmountComponentAtNode=function(t){if(!el(t))throw Error(U(40));return t._reactRootContainer?(Dn(function(){tl(null,null,t,!1,function(){t._reactRootContainer=null,t[Ps]=null})}),!0):!1};Ot.unstable_batchedUpdates=cu;Ot.unstable_renderSubtreeIntoContainer=function(t,e,s,n){if(!el(s))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return tl(t,e,s,!1,n)};Ot.version="18.3.1-next-f1338f8080-20240426";function Kg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Kg)}catch(t){console.error(t)}}Kg(),Km.exports=Ot;var eb=Km.exports,Yg,qh=eb;Yg=qh.createRoot,qh.hydrateRoot;const tb="modulepreload",sb=function(t){return"/"+t},Kh={},Xi=function(e,s,n){let r=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(s.map(c=>{if(c=sb(c),c in Kh)return;Kh[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":tb,d||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return r.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},nb=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>Xi(async()=>{const{default:n}=await Promise.resolve().then(()=>Lr);return{default:n}},void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)};class xu extends Error{constructor(e,s="FunctionsError",n){super(e),this.name=s,this.context=n}}class rb extends xu{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Yh extends xu{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Gh extends xu{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var td;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(td||(td={}));var ib=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};class ab{constructor(e,{headers:s={},customFetch:n,region:r=td.Any}={}){this.url=e,this.headers=s,this.region=r,this.fetch=nb(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,s={}){var n;return ib(this,void 0,void 0,function*(){try{const{headers:r,method:i,body:o}=s;let l={},{region:c}=s;c||(c=this.region);const d=new URL(`${this.url}/${e}`);c&&c!=="any"&&(l["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let u;o&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(l["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(l["Content-Type"]="application/json",u=JSON.stringify(o)));const h=yield this.fetch(d.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),r),body:u}).catch(y=>{throw new rb(y)}),f=h.headers.get("x-relay-error");if(f&&f==="true")throw new Yh(h);if(!h.ok)throw new Gh(h);let m=((n=h.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),x;return m==="application/json"?x=yield h.json():m==="application/octet-stream"?x=yield h.blob():m==="text/event-stream"?x=h:m==="multipart/form-data"?x=yield h.formData():x=yield h.text(),{data:x,error:null,response:h}}catch(r){return{data:null,error:r,response:r instanceof Gh||r instanceof Yh?r.context:void 0}}})}}var xt={},yu={},sl={},Zi={},nl={},rl={},ob=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Sr=ob();const lb=Sr.fetch,Gg=Sr.fetch.bind(Sr),Qg=Sr.Headers,cb=Sr.Request,db=Sr.Response,Lr=Object.freeze(Object.defineProperty({__proto__:null,Headers:Qg,Request:cb,Response:db,default:Gg,fetch:lb},Symbol.toStringTag,{value:"Module"})),ub=Px(Lr);var il={};Object.defineProperty(il,"__esModule",{value:!0});let hb=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};il.default=hb;var Jg=$t&&$t.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(rl,"__esModule",{value:!0});const fb=Jg(ub),mb=Jg(il);let pb=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=fb.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,s){return this.headers=Object.assign({},this.headers),this.headers[e]=s,this}then(e,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let r=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c;let d=null,u=null,h=null,f=i.status,m=i.statusText;if(i.ok){if(this.method!=="HEAD"){const g=await i.text();g===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=g:u=JSON.parse(g))}const y=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),b=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");y&&b&&b.length>1&&(h=parseInt(b[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(d={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,f=406,m="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const y=await i.text();try{d=JSON.parse(y),Array.isArray(d)&&i.status===404&&(u=[],d=null,f=200,m="OK")}catch{i.status===404&&y===""?(f=204,m="No Content"):d={message:y}}if(d&&this.isMaybeSingle&&(!((c=d==null?void 0:d.details)===null||c===void 0)&&c.includes("0 rows"))&&(d=null,f=200,m="OK"),d&&this.shouldThrowOnError)throw new mb.default(d)}return{error:d,data:u,count:h,status:f,statusText:m}});return this.shouldThrowOnError||(r=r.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,s)}returns(){return this}overrideTypes(){return this}};rl.default=pb;var gb=$t&&$t.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(nl,"__esModule",{value:!0});const xb=gb(rl);let yb=class extends xb.default{select(e){let s=!1;const n=(e??"*").split("").map(r=>/\s/.test(r)&&!s?"":(r==='"'&&(s=!s),r)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:s=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${s?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:s,referencedTable:n=s}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,s,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${s-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:s=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:o="text"}={}){var l;const c=[e?"analyze":null,s?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${d}"; options=${c};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};nl.default=yb;var vb=$t&&$t.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Zi,"__esModule",{value:!0});const bb=vb(nl);let wb=class extends bb.default{eq(e,s){return this.url.searchParams.append(e,`eq.${s}`),this}neq(e,s){return this.url.searchParams.append(e,`neq.${s}`),this}gt(e,s){return this.url.searchParams.append(e,`gt.${s}`),this}gte(e,s){return this.url.searchParams.append(e,`gte.${s}`),this}lt(e,s){return this.url.searchParams.append(e,`lt.${s}`),this}lte(e,s){return this.url.searchParams.append(e,`lte.${s}`),this}like(e,s){return this.url.searchParams.append(e,`like.${s}`),this}likeAllOf(e,s){return this.url.searchParams.append(e,`like(all).{${s.join(",")}}`),this}likeAnyOf(e,s){return this.url.searchParams.append(e,`like(any).{${s.join(",")}}`),this}ilike(e,s){return this.url.searchParams.append(e,`ilike.${s}`),this}ilikeAllOf(e,s){return this.url.searchParams.append(e,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(e,s){return this.url.searchParams.append(e,`ilike(any).{${s.join(",")}}`),this}is(e,s){return this.url.searchParams.append(e,`is.${s}`),this}in(e,s){const n=Array.from(new Set(s)).map(r=>typeof r=="string"&&new RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cs.{${s.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(s)}`),this}containedBy(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cd.{${s.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(s)}`),this}rangeGt(e,s){return this.url.searchParams.append(e,`sr.${s}`),this}rangeGte(e,s){return this.url.searchParams.append(e,`nxl.${s}`),this}rangeLt(e,s){return this.url.searchParams.append(e,`sl.${s}`),this}rangeLte(e,s){return this.url.searchParams.append(e,`nxr.${s}`),this}rangeAdjacent(e,s){return this.url.searchParams.append(e,`adj.${s}`),this}overlaps(e,s){return typeof s=="string"?this.url.searchParams.append(e,`ov.${s}`):this.url.searchParams.append(e,`ov.{${s.join(",")}}`),this}textSearch(e,s,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${o}.${s}`),this}match(e){return Object.entries(e).forEach(([s,n])=>{this.url.searchParams.append(s,`eq.${n}`)}),this}not(e,s,n){return this.url.searchParams.append(e,`not.${s}.${n}`),this}or(e,{foreignTable:s,referencedTable:n=s}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,s,n){return this.url.searchParams.append(e,`${s}.${n}`),this}};Zi.default=wb;var _b=$t&&$t.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(sl,"__esModule",{value:!0});const Vr=_b(Zi);let jb=class{constructor(e,{headers:s={},schema:n,fetch:r}){this.url=e,this.headers=s,this.schema=n,this.fetch=r}select(e,{head:s=!1,count:n}={}){const r=s?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new Vr.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:s,defaultToNull:n=!0}={}){const r="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),s&&i.push(`count=${s}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Vr.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:s,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&l.push(this.headers.Prefer),r&&l.push(`count=${r}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const c=e.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(c.length>0){const d=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new Vr.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:s}={}){const n="PATCH",r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),s&&r.push(`count=${s}`),this.headers.Prefer=r.join(","),new Vr.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const s="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Vr.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};sl.default=jb;var al={},ol={};Object.defineProperty(ol,"__esModule",{value:!0});ol.version=void 0;ol.version="0.0.0-automated";Object.defineProperty(al,"__esModule",{value:!0});al.DEFAULT_HEADERS=void 0;const kb=ol;al.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${kb.version}`};var Xg=$t&&$t.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(yu,"__esModule",{value:!0});const Nb=Xg(sl),Sb=Xg(Zi),Cb=al;let Pb=class Zg{constructor(e,{headers:s={},schema:n,fetch:r}={}){this.url=e,this.headers=Object.assign(Object.assign({},Cb.DEFAULT_HEADERS),s),this.schemaName=n,this.fetch=r}from(e){const s=new URL(`${this.url}/${e}`);return new Nb.default(s,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Zg(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,s={},{head:n=!1,get:r=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${e}`);let c;n||r?(o=n?"HEAD":"GET",Object.entries(s).filter(([u,h])=>h!==void 0).map(([u,h])=>[u,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([u,h])=>{l.searchParams.append(u,h)})):(o="POST",c=s);const d=Object.assign({},this.headers);return i&&(d.Prefer=`count=${i}`),new Sb.default({method:o,url:l,headers:d,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};yu.default=Pb;var Dr=$t&&$t.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xt,"__esModule",{value:!0});xt.PostgrestError=xt.PostgrestBuilder=xt.PostgrestTransformBuilder=xt.PostgrestFilterBuilder=xt.PostgrestQueryBuilder=xt.PostgrestClient=void 0;const e0=Dr(yu);xt.PostgrestClient=e0.default;const t0=Dr(sl);xt.PostgrestQueryBuilder=t0.default;const s0=Dr(Zi);xt.PostgrestFilterBuilder=s0.default;const n0=Dr(nl);xt.PostgrestTransformBuilder=n0.default;const r0=Dr(rl);xt.PostgrestBuilder=r0.default;const i0=Dr(il);xt.PostgrestError=i0.default;var Eb=xt.default={PostgrestClient:e0.default,PostgrestQueryBuilder:t0.default,PostgrestFilterBuilder:s0.default,PostgrestTransformBuilder:n0.default,PostgrestBuilder:r0.default,PostgrestError:i0.default};const{PostgrestClient:Tb,PostgrestQueryBuilder:BN,PostgrestFilterBuilder:$N,PostgrestTransformBuilder:FN,PostgrestBuilder:UN,PostgrestError:WN}=Eb;function Ab(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const Ob=Ab(),Rb="2.11.15",Mb=`realtime-js/${Rb}`,Lb="1.0.0",a0=1e4,Db=1e3;var xi;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(xi||(xi={}));var nt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(nt||(nt={}));var Yt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Yt||(Yt={}));var sd;(function(t){t.websocket="websocket"})(sd||(sd={}));var jn;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(jn||(jn={}));class Ib{constructor(){this.HEADER_LENGTH=1}decode(e,s){return e.constructor===ArrayBuffer?s(this._binaryDecode(e)):s(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const s=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,s,n)}_decodeBroadcast(e,s,n){const r=s.getUint8(1),i=s.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(e.slice(o,o+r));o=o+r;const c=n.decode(e.slice(o,o+i));o=o+i;const d=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class o0{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ne;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ne||(Ne={}));const Qh=(t,e,s={})=>{var n;const r=(n=s.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((i,o)=>(i[o]=zb(o,t,e,r),i),{})},zb=(t,e,s,n)=>{const r=e.find(l=>l.name===t),i=r==null?void 0:r.type,o=s[t];return i&&!n.includes(i)?l0(i,o):nd(o)},l0=(t,e)=>{if(t.charAt(0)==="_"){const s=t.slice(1,t.length);return Ub(e,s)}switch(t){case Ne.bool:return Bb(e);case Ne.float4:case Ne.float8:case Ne.int2:case Ne.int4:case Ne.int8:case Ne.numeric:case Ne.oid:return $b(e);case Ne.json:case Ne.jsonb:return Fb(e);case Ne.timestamp:return Wb(e);case Ne.abstime:case Ne.date:case Ne.daterange:case Ne.int4range:case Ne.int8range:case Ne.money:case Ne.reltime:case Ne.text:case Ne.time:case Ne.timestamptz:case Ne.timetz:case Ne.tsrange:case Ne.tstzrange:return nd(e);default:return nd(e)}},nd=t=>t,Bb=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},$b=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Fb=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Ub=(t,e)=>{if(typeof t!="string")return t;const s=t.length-1,n=t[s];if(t[0]==="{"&&n==="}"){let i;const o=t.slice(1,s);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>l0(e,l))}return t},Wb=t=>typeof t=="string"?t.replace(" ","T"):t,c0=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Wl{constructor(e,s,n={},r=a0){this.channel=e,this.event=s,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var n;return this._hasReceived(e)&&s((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Jh;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Jh||(Jh={}));class yi{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},r=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=yi.syncState(this.state,r,i,o),this.pendingDiffs.forEach(c=>{this.state=yi.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},r=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=yi.syncDiff(this.state,r,i,o),l())}),this.onJoin((r,i,o)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:i,newPresences:o})}),this.onLeave((r,i,o)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,n,r){const i=this.cloneDeep(e),o=this.transformState(s),l={},c={};return this.map(i,(d,u)=>{o[d]||(c[d]=u)}),this.map(o,(d,u)=>{const h=i[d];if(h){const f=u.map(b=>b.presence_ref),m=h.map(b=>b.presence_ref),x=u.filter(b=>m.indexOf(b.presence_ref)<0),y=h.filter(b=>f.indexOf(b.presence_ref)<0);x.length>0&&(l[d]=x),y.length>0&&(c[d]=y)}else l[d]=u}),this.syncDiff(i,{joins:l,leaves:c},n,r)}static syncDiff(e,s,n,r){const{joins:i,leaves:o}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(i,(l,c)=>{var d;const u=(d=e[l])!==null&&d!==void 0?d:[];if(e[l]=this.cloneDeep(c),u.length>0){const h=e[l].map(m=>m.presence_ref),f=u.filter(m=>h.indexOf(m.presence_ref)<0);e[l].unshift(...f)}n(l,u,c)}),this.map(o,(l,c)=>{let d=e[l];if(!d)return;const u=c.map(h=>h.presence_ref);d=d.filter(h=>u.indexOf(h.presence_ref)<0),e[l]=d,r(l,d,c),d.length===0&&delete e[l]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(n=>s(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,n)=>{const r=e[n];return"metas"in r?s[n]=r.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):s[n]=r,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Xh;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Xh||(Xh={}));var Zh;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Zh||(Zh={}));var ys;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(ys||(ys={}));class vu{constructor(e,s={config:{}},n){this.topic=e,this.params=s,this.socket=n,this.bindings={},this.state=nt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Wl(this,Yt.join,this.params,this.timeout),this.rejoinTimer=new o0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=nt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=nt.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=nt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=nt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Yt.reply,{},(r,i)=>{this._trigger(this._replyEventName(i),r)}),this.presence=new yi(this),this.broadcastEndpointURL=c0(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,s=this.timeout){var n,r;if(this.socket.isConnected()||this.socket.connect(),this.state==nt.closed){const{config:{broadcast:i,presence:o,private:l}}=this.params;this._onError(u=>e==null?void 0:e(ys.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(ys.CLOSED));const c={},d={broadcast:i,presence:o,postgres_changes:(r=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(u=>u.filter))!==null&&r!==void 0?r:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:u})=>{var h;if(this.socket.setAuth(),u===void 0){e==null||e(ys.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,m=(h=f==null?void 0:f.length)!==null&&h!==void 0?h:0,x=[];for(let y=0;y<m;y++){const b=f[y],{filter:{event:g,schema:p,table:v,filter:w}}=b,j=u&&u[y];if(j&&j.event===g&&j.schema===p&&j.table===v&&j.filter===w)x.push(Object.assign(Object.assign({},b),{id:j.id}));else{this.unsubscribe(),this.state=nt.errored,e==null||e(ys.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,e&&e(ys.SUBSCRIBED);return}}).receive("error",u=>{this.state=nt.errored,e==null||e(ys.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ys.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,n){return this._on(e,s,n)}async send(e,s={}){var n,r;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=s.timeout)!==null&&n!==void 0?n:this.timeout);return await((r=d.body)===null||r===void 0?void 0:r.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const d=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=nt.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Yt.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(r=>{n=new Wl(this,Yt.leave,{},e),n.receive("ok",()=>{s(),r("ok")}).receive("timeout",()=>{s(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,s,n){const r=new AbortController,i=setTimeout(()=>r.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:r.signal}));return clearTimeout(i),o}_push(e,s,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new Wl(this,e,s,n);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,s,n){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,n){var r,i;const o=e.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=Yt;if(n&&[l,c,d,u].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,s,n);if(s&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(m=>{var x,y,b;return((x=m.filter)===null||x===void 0?void 0:x.event)==="*"||((b=(y=m.filter)===null||y===void 0?void 0:y.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(m=>m.callback(f,n)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var x,y,b,g,p,v;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const w=m.id,j=(x=m.filter)===null||x===void 0?void 0:x.event;return w&&((y=s.ids)===null||y===void 0?void 0:y.includes(w))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((b=s.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const w=(p=(g=m==null?void 0:m.filter)===null||g===void 0?void 0:g.event)===null||p===void 0?void 0:p.toLocaleLowerCase();return w==="*"||w===((v=s==null?void 0:s.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof f=="object"&&"ids"in f){const x=f.data,{schema:y,table:b,commit_timestamp:g,type:p,errors:v}=x;f=Object.assign(Object.assign({},{schema:y,table:b,commit_timestamp:g,eventType:p,new:{},old:{},errors:v}),this._getPayloadRecords(x))}m.callback(f,n)})}_isClosed(){return this.state===nt.closed}_isJoined(){return this.state===nt.joined}_isJoining(){return this.state===nt.joining}_isLeaving(){return this.state===nt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,n){const r=e.toLocaleLowerCase(),i={type:r,filter:s,callback:n};return this.bindings[r]?this.bindings[r].push(i):this.bindings[r]=[i],this}_off(e,s){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(r=>{var i;return!(((i=r.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&vu.isEqual(r.filter,s))}),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const n in e)if(e[n]!==s[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Yt.close,{},e)}_onError(e){this._on(Yt.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=nt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=Qh(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=Qh(e.columns,e.old_record)),s}}const ef=()=>{},Hb=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Vb{constructor(e,s){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=a0,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ef,this.ref=0,this.logger=ef,this.conn=null,this.sendBuffer=[],this.serializer=new Ib,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>Xi(async()=>{const{default:c}=await Promise.resolve().then(()=>Lr);return{default:c}},void 0).then(({default:c})=>c(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${e}/${sd.websocket}`,this.httpEndpoint=c0(e),s!=null&&s.transport?this.transport=s.transport:this.transport=null,s!=null&&s.params&&(this.params=s.params),s!=null&&s.timeout&&(this.timeout=s.timeout),s!=null&&s.logger&&(this.logger=s.logger),(s!=null&&s.logLevel||s!=null&&s.log_level)&&(this.logLevel=s.logLevel||s.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),s!=null&&s.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const r=(n=s==null?void 0:s.params)===null||n===void 0?void 0:n.apikey;if(r&&(this.accessTokenValue=r,this.apiKey=r),this.reconnectAfterMs=s!=null&&s.reconnectAfterMs?s.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=s!=null&&s.encode?s.encode:(i,o)=>o(JSON.stringify(i)),this.decode=s!=null&&s.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new o0(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s==null?void 0:s.fetch),s!=null&&s.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(s==null?void 0:s.worker)||!1,this.workerUrl=s==null?void 0:s.workerUrl}this.accessToken=(s==null?void 0:s.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=Ob),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Lb}))}disconnect(e,s){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,s,n){this.logger(e,s,n)}connectionState(){switch(this.conn&&this.conn.readyState){case xi.connecting:return jn.Connecting;case xi.open:return jn.Open;case xi.closing:return jn.Closing;default:return jn.Closed}}isConnected(){return this.connectionState()===jn.Open}channel(e,s={config:{}}){const n=`realtime:${e}`,r=this.getChannels().find(i=>i.topic===n);if(r)return r;{const i=new vu(`realtime:${e}`,s,this);return this.channels.push(i),i}}push(e){const{topic:s,event:n,payload:r,ref:i}=e,o=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${s} ${n} (${i})`,r),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let s=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(n=>{const r={access_token:s,version:Mb};s&&n.updateJoinPayload(r),n.joinedOnce&&n._isJoined()&&n._push(Yt.access_token,{access_token:s})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(Db,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,s=>{let{topic:n,event:r,payload:i,ref:o}=s;n==="phoenix"&&r==="phx_reply"&&this.heartbeatCallback(s.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${r} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(l=>l._isMember(n)).forEach(l=>l._trigger(r,i,o)),this.stateChangeCallbacks.message.forEach(l=>l(s))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Yt.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const n=e.match(/\?/)?"&":"?",r=new URLSearchParams(s);return`${e}${n}${r}`}_workerObjectUrl(e){let s;if(e)s=e;else{const n=new Blob([Hb],{type:"application/javascript"});s=URL.createObjectURL(n)}return s}}class bu extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function qe(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class qb extends bu{constructor(e,s,n){super(e),this.name="StorageApiError",this.status=s,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class rd extends bu{constructor(e,s){super(e),this.name="StorageUnknownError",this.originalError=s}}var Kb=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};const d0=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>Xi(async()=>{const{default:n}=await Promise.resolve().then(()=>Lr);return{default:n}},void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)},Yb=()=>Kb(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Xi(()=>Promise.resolve().then(()=>Lr),void 0)).Response:Response}),id=t=>{if(Array.isArray(t))return t.map(s=>id(s));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([s,n])=>{const r=s.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[r]=id(n)}),e},Gb=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var Un=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};const Hl=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Qb=(t,e,s)=>Un(void 0,void 0,void 0,function*(){const n=yield Yb();t instanceof n&&!(s!=null&&s.noResolveJson)?t.json().then(r=>{const i=t.status||500,o=(r==null?void 0:r.statusCode)||i+"";e(new qb(Hl(r),i,o))}).catch(r=>{e(new rd(Hl(r),r))}):e(new rd(Hl(t),t))}),Jb=(t,e,s,n)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?r:(Gb(n)?(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r.body=JSON.stringify(n)):r.body=n,Object.assign(Object.assign({},r),s))};function ea(t,e,s,n,r,i){return Un(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(s,Jb(e,n,r,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>Qb(c,l,n))})})}function So(t,e,s,n){return Un(this,void 0,void 0,function*(){return ea(t,"GET",e,s,n)})}function vs(t,e,s,n,r){return Un(this,void 0,void 0,function*(){return ea(t,"POST",e,n,r,s)})}function ad(t,e,s,n,r){return Un(this,void 0,void 0,function*(){return ea(t,"PUT",e,n,r,s)})}function Xb(t,e,s,n){return Un(this,void 0,void 0,function*(){return ea(t,"HEAD",e,Object.assign(Object.assign({},s),{noResolveJson:!0}),n)})}function u0(t,e,s,n,r){return Un(this,void 0,void 0,function*(){return ea(t,"DELETE",e,n,r,s)})}var mt=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};const Zb={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},tf={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class ew{constructor(e,s={},n,r){this.url=e,this.headers=s,this.bucketId=n,this.fetch=d0(r)}uploadOrUpdate(e,s,n,r){return mt(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},tf),r);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),r!=null&&r.headers&&(l=Object.assign(Object.assign({},l),r.headers));const d=this._removeEmptyFolders(s),u=this._getFinalPath(d),h=yield(e=="PUT"?ad:vs)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:d,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(qe(i))return{data:null,error:i};throw i}})}upload(e,s,n){return mt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,s,n)})}uploadToSignedUrl(e,s,n,r){return mt(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",s);try{let c;const d=Object.assign({upsert:tf.upsert},r),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",d.cacheControl)):(c=n,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const h=yield ad(this.fetch,l.toString(),c,{headers:u});return{data:{path:i,fullPath:h.Key},error:null}}catch(c){if(qe(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,s){return mt(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const r=Object.assign({},this.headers);s!=null&&s.upsert&&(r["x-upsert"]="true");const i=yield vs(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:r}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new bu("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(n){if(qe(n))return{data:null,error:n};throw n}})}update(e,s,n){return mt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,s,n)})}move(e,s,n){return mt(this,void 0,void 0,function*(){try{return{data:yield vs(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(qe(r))return{data:null,error:r};throw r}})}copy(e,s,n){return mt(this,void 0,void 0,function*(){try{return{data:{path:(yield vs(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(qe(r))return{data:null,error:r};throw r}})}createSignedUrl(e,s,n){return mt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),i=yield vs(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:s},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(r){if(qe(r))return{data:null,error:r};throw r}})}createSignedUrls(e,s,n){return mt(this,void 0,void 0,function*(){try{const r=yield vs(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:e},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:r.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(r){if(qe(r))return{data:null,error:r};throw r}})}download(e,s){return mt(this,void 0,void 0,function*(){const r=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield So(this.fetch,`${this.url}/${r}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(qe(l))return{data:null,error:l};throw l}})}info(e){return mt(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{const n=yield So(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:id(n),error:null}}catch(n){if(qe(n))return{data:null,error:n};throw n}})}exists(e){return mt(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{return yield Xb(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(qe(n)&&n instanceof rd){const r=n.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,s){const n=this._getFinalPath(e),r=[],i=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";i!==""&&r.push(i);const l=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});c!==""&&r.push(c);let d=r.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${d}`)}}}remove(e){return mt(this,void 0,void 0,function*(){try{return{data:yield u0(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(s){if(qe(s))return{data:null,error:s};throw s}})}list(e,s,n){return mt(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},Zb),s),{prefix:e||""});return{data:yield vs(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(qe(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const s=[];return e.width&&s.push(`width=${e.width}`),e.height&&s.push(`height=${e.height}`),e.resize&&s.push(`resize=${e.resize}`),e.format&&s.push(`format=${e.format}`),e.quality&&s.push(`quality=${e.quality}`),s.join("&")}}const tw="2.10.4",sw={"X-Client-Info":`storage-js/${tw}`};var Hn=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};class nw{constructor(e,s={},n,r){const i=new URL(e);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},sw),s),this.fetch=d0(n)}listBuckets(){return Hn(this,void 0,void 0,function*(){try{return{data:yield So(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(qe(e))return{data:null,error:e};throw e}})}getBucket(e){return Hn(this,void 0,void 0,function*(){try{return{data:yield So(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(s){if(qe(s))return{data:null,error:s};throw s}})}createBucket(e,s={public:!1}){return Hn(this,void 0,void 0,function*(){try{return{data:yield vs(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(qe(n))return{data:null,error:n};throw n}})}updateBucket(e,s){return Hn(this,void 0,void 0,function*(){try{return{data:yield ad(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(qe(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Hn(this,void 0,void 0,function*(){try{return{data:yield vs(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(qe(s))return{data:null,error:s};throw s}})}deleteBucket(e){return Hn(this,void 0,void 0,function*(){try{return{data:yield u0(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(qe(s))return{data:null,error:s};throw s}})}}class rw extends nw{constructor(e,s={},n,r){super(e,s,n,r)}from(e){return new ew(this.url,this.headers,e,this.fetch)}}const iw="2.53.0";let si="";typeof Deno<"u"?si="deno":typeof document<"u"?si="web":typeof navigator<"u"&&navigator.product==="ReactNative"?si="react-native":si="node";const aw={"X-Client-Info":`supabase-js-${si}/${iw}`},ow={headers:aw},lw={schema:"public"},cw={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},dw={};var uw=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};const hw=t=>{let e;return t?e=t:typeof fetch>"u"?e=Gg:e=fetch,(...s)=>e(...s)},fw=()=>typeof Headers>"u"?Qg:Headers,mw=(t,e,s)=>{const n=hw(s),r=fw();return(i,o)=>uw(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:t;let d=new r(o==null?void 0:o.headers);return d.has("apikey")||d.set("apikey",t),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},o),{headers:d}))})};var pw=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};function gw(t){return t.endsWith("/")?t:t+"/"}function xw(t,e){var s,n;const{db:r,auth:i,realtime:o,global:l}=t,{db:c,auth:d,realtime:u,global:h}=e,f={db:Object.assign(Object.assign({},c),r),auth:Object.assign(Object.assign({},d),i),realtime:Object.assign(Object.assign({},u),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(s=h==null?void 0:h.headers)!==null&&s!==void 0?s:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>pw(this,void 0,void 0,function*(){return""})};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}const h0="2.71.1",Qn=30*1e3,od=3,Vl=od*Qn,yw="http://localhost:9999",vw="supabase.auth.token",bw={"X-Client-Info":`gotrue-js/${h0}`},ld="X-Supabase-Api-Version",f0={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},ww=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,_w=10*60*1e3;class wu extends Error{constructor(e,s,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=n}}function ce(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class jw extends wu{constructor(e,s,n){super(e,s,n),this.name="AuthApiError",this.status=s,this.code=n}}function kw(t){return ce(t)&&t.name==="AuthApiError"}class m0 extends wu{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class dn extends wu{constructor(e,s,n,r){super(e,n,r),this.name=s,this.status=n}}class Ls extends dn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Nw(t){return ce(t)&&t.name==="AuthSessionMissingError"}class wa extends dn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class _a extends dn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class ja extends dn{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Sw(t){return ce(t)&&t.name==="AuthImplicitGrantRedirectError"}class sf extends dn{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class cd extends dn{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function ql(t){return ce(t)&&t.name==="AuthRetryableFetchError"}class nf extends dn{constructor(e,s,n){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=n}}class dd extends dn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Co="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),rf=` 	
\r=`.split(""),Cw=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<rf.length;e+=1)t[rf[e].charCodeAt(0)]=-2;for(let e=0;e<Co.length;e+=1)t[Co[e].charCodeAt(0)]=e;return t})();function af(t,e,s){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;s(Co[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;s(Co[n]),e.queuedBits-=6}}function p0(t,e,s){const n=Cw[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)s(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function of(t){const e=[],s=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},i=o=>{Tw(o,n,s)};for(let o=0;o<t.length;o+=1)p0(t.charCodeAt(o),r,i);return e.join("")}function Pw(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Ew(t,e){for(let s=0;s<t.length;s+=1){let n=t.charCodeAt(s);if(n>55295&&n<=56319){const r=(n-55296)*1024&65535;n=(t.charCodeAt(s+1)-56320&65535|r)+65536,s+=1}Pw(n,e)}}function Tw(t,e,s){if(e.utf8seq===0){if(t<=127){s(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&s(e.codepoint)}}function Aw(t){const e=[],s={queue:0,queuedBits:0},n=r=>{e.push(r)};for(let r=0;r<t.length;r+=1)p0(t.charCodeAt(r),s,n);return new Uint8Array(e)}function Ow(t){const e=[];return Ew(t,s=>e.push(s)),new Uint8Array(e)}function Rw(t){const e=[],s={queue:0,queuedBits:0},n=r=>{e.push(r)};return t.forEach(r=>af(r,s,n)),af(null,s,n),e.join("")}function Mw(t){return Math.round(Date.now()/1e3)+t}function Lw(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Vt=()=>typeof window<"u"&&typeof document<"u",fn={tested:!1,writable:!1},g0=()=>{if(!Vt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(fn.tested)return fn.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),fn.tested=!0,fn.writable=!0}catch{fn.tested=!0,fn.writable=!1}return fn.writable};function Dw(t){const e={},s=new URL(t);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((r,i)=>{e[i]=r})}catch{}return s.searchParams.forEach((n,r)=>{e[r]=n}),e}const x0=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>Xi(async()=>{const{default:n}=await Promise.resolve().then(()=>Lr);return{default:n}},void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)},Iw=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Jn=async(t,e,s)=>{await t.setItem(e,JSON.stringify(s))},mn=async(t,e)=>{const s=await t.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},Rs=async(t,e)=>{await t.removeItem(e)};class ll{constructor(){this.promise=new ll.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}ll.promiseConstructor=Promise;function Kl(t){const e=t.split(".");if(e.length!==3)throw new dd("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!ww.test(e[n]))throw new dd("JWT not in base64url format");return{header:JSON.parse(of(e[0])),payload:JSON.parse(of(e[1])),signature:Aw(e[2]),raw:{header:e[0],payload:e[1]}}}async function zw(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Bw(t,e){return new Promise((n,r)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){n(o);return}}catch(o){if(!e(i,o)){r(o);return}}})()})}function $w(t){return("0"+t.toString(16)).substr(-2)}function Fw(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=s.length;let r="";for(let i=0;i<56;i++)r+=s.charAt(Math.floor(Math.random()*n));return r}return crypto.getRandomValues(e),Array.from(e,$w).join("")}async function Uw(t){const s=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",s),r=new Uint8Array(n);return Array.from(r).map(i=>String.fromCharCode(i)).join("")}async function Ww(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const s=await Uw(t);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Vn(t,e,s=!1){const n=Fw();let r=n;s&&(r+="/PASSWORD_RECOVERY"),await Jn(t,`${e}-code-verifier`,r);const i=await Ww(n);return[i,n===i?"plain":"s256"]}const Hw=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Vw(t){const e=t.headers.get(ld);if(!e||!e.match(Hw))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function qw(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Kw(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Yw=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function qn(t){if(!Yw.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Yl(){const t={};return new Proxy(t,{get:(e,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const n=s.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function lf(t){return JSON.parse(JSON.stringify(t))}var Gw=function(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(s[n[r]]=t[n[r]]);return s};const bn=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Qw=[502,503,504];async function cf(t){var e;if(!Iw(t))throw new cd(bn(t),0);if(Qw.includes(t.status))throw new cd(bn(t),t.status);let s;try{s=await t.json()}catch(i){throw new m0(bn(i),i)}let n;const r=Vw(t);if(r&&r.getTime()>=f0["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?n=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(n=s.error_code),n){if(n==="weak_password")throw new nf(bn(s),t.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Ls}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new nf(bn(s),t.status,s.weak_password.reasons);throw new jw(bn(s),t.status||500,n)}const Jw=(t,e,s,n)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(n),Object.assign(Object.assign({},r),s))};async function fe(t,e,s,n){var r;const i=Object.assign({},n==null?void 0:n.headers);i[ld]||(i[ld]=f0["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(r=n==null?void 0:n.query)!==null&&r!==void 0?r:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await Xw(t,e,s+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function Xw(t,e,s,n,r,i){const o=Jw(e,n,r,i);let l;try{l=await t(s,Object.assign({},o))}catch(c){throw console.error(c),new cd(bn(c),0)}if(l.ok||await cf(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await cf(c)}}function ms(t){var e;let s=null;s_(t)&&(s=Object.assign({},t),t.expires_at||(s.expires_at=Mw(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:s,user:n},error:null}}function df(t){const e=ms(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((s,n)=>s&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function $s(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Zw(t){return{data:t,error:null}}function e_(t){const{action_link:e,email_otp:s,hashed_token:n,redirect_to:r,verification_type:i}=t,o=Gw(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:s,hashed_token:n,redirect_to:r,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function t_(t){return t}function s_(t){return t.access_token&&t.refresh_token&&t.expires_in}const Gl=["global","local","others"];var n_=function(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(s[n[r]]=t[n[r]]);return s};class r_{constructor({url:e="",headers:s={},fetch:n}){this.url=e,this.headers=s,this.fetch=x0(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,s=Gl[0]){if(Gl.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Gl.join(", ")}`);try{return await fe(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ce(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,s={}){try{return await fe(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:$s})}catch(n){if(ce(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:s}=e,n=n_(e,["options"]),r=Object.assign(Object.assign({},n),s);return"newEmail"in n&&(r.new_email=n==null?void 0:n.newEmail,delete r.newEmail),await fe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:e_,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(ce(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await fe(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:$s})}catch(s){if(ce(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,n,r,i,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await fe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&n!==void 0?n:"",per_page:(i=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:""},xform:t_});if(u.error)throw u.error;const h=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(x=>{const y=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(x.split(";")[1].split("=")[1]);d[`${b}Page`]=y}),d.total=parseInt(f)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(ce(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){qn(e);try{return await fe(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:$s})}catch(s){if(ce(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){qn(e);try{return await fe(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:$s})}catch(n){if(ce(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,s=!1){qn(e);try{return await fe(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:$s})}catch(n){if(ce(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){qn(e.userId);try{const{data:s,error:n}=await fe(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:s,error:n}}catch(s){if(ce(s))return{data:null,error:s};throw s}}async _deleteFactor(e){qn(e.userId),qn(e.id);try{return{data:await fe(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(ce(s))return{data:null,error:s};throw s}}}function uf(t={}){return{getItem:e=>t[e]||null,setItem:(e,s)=>{t[e]=s},removeItem:e=>{delete t[e]}}}function i_(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Kn={debug:!!(globalThis&&g0()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class y0 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class a_ extends y0{}async function o_(t,e,s){Kn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Kn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async r=>{if(r){Kn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,r.name);try{return await s()}finally{Kn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,r.name)}}else{if(e===0)throw Kn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new a_(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Kn.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}i_();const l_={url:yw,storageKey:vw,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:bw,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function hf(t,e,s){return await s()}const Yn={};class Ui{constructor(e){var s,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ui.nextInstanceID,Ui.nextInstanceID+=1,this.instanceID>0&&Vt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},l_),e);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new r_({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=x0(r.fetch),this.lock=r.lock||hf,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:Vt()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=o_:this.lock=hf,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(r.storage?this.storage=r.storage:g0()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=uf(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=uf(this.memoryStorage)),Vt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,s;return(s=(e=Yn[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(e){Yn[this.storageKey]=Object.assign(Object.assign({},Yn[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,s;return(s=(e=Yn[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Yn[this.storageKey]=Object.assign(Object.assign({},Yn[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${h0}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const s=Dw(window.location.href);let n="none";if(this._isImplicitGrantCallback(s)?n="implicit":await this._isPKCECallback(s)&&(n="pkce"),Vt()&&this.detectSessionInUrl&&n!=="none"){const{data:r,error:i}=await this._getSessionFromURL(s,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Sw(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=r;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return ce(s)?{error:s}:{error:new m0("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,n,r;try{const i=await fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:ms}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(ce(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var s,n,r;try{let i;if("email"in e){const{email:u,password:h,options:f}=e;let m=null,x=null;this.flowType==="pkce"&&([m,x]=await Vn(this.storage,this.storageKey)),i=await fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:h,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:m,code_challenge_method:x},xform:ms})}else if("phone"in e){const{phone:u,password:h,options:f}=e;i=await fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(r=f==null?void 0:f.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:ms})}else throw new _a("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(ce(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let s;if("email"in e){const{email:i,password:o,options:l}=e;s=await fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:df})}else if("phone"in e){const{phone:i,password:o,options:l}=e;s=await fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:df})}else throw new _a("You must provide either an email or phone number and a password");const{data:n,error:r}=s;return r?{data:{user:null,session:null},error:r}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new wa}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r})}catch(s){if(ce(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(e){var s,n,r,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:s}=e;if(s==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}async signInWithSolana(e){var s,n,r,i,o,l,c,d,u,h,f,m;let x,y;if("message"in e)x=e.message,y=e.signature;else{const{chain:b,wallet:g,statement:p,options:v}=e;let w;if(Vt())if(typeof g=="object")w=g;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))w=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=g}const j=new URL((s=v==null?void 0:v.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in w&&w.signIn){const N=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),p?{statement:p}:null));let P;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")P=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)P=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in P&&"signature"in P&&(typeof P.signedMessage=="string"||P.signedMessage instanceof Uint8Array)&&P.signature instanceof Uint8Array)x=typeof P.signedMessage=="string"?P.signedMessage:new TextDecoder().decode(P.signedMessage),y=P.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${j.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...p?["",p,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(r=(n=v==null?void 0:v.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&r!==void 0?r:new Date().toISOString()}`,...!((i=v==null?void 0:v.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((o=v==null?void 0:v.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((l=v==null?void 0:v.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((c=v==null?void 0:v.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((d=v==null?void 0:v.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((h=(u=v==null?void 0:v.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...v.signInWithSolana.resources.map(P=>`- ${P}`)]:[]].join(`
`);const N=await w.signMessage(new TextEncoder().encode(x),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=N}}try{const{data:b,error:g}=await fe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:Rw(y)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:ms});if(g)throw g;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new wa}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:g})}catch(b){if(ce(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(e){const s=await mn(this.storage,`${this.storageKey}-code-verifier`),[n,r]=(s??"").split("/");try{const{data:i,error:o}=await fe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:ms});if(await Rs(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new wa}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:r??null}),error:o})}catch(i){if(ce(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:s,provider:n,token:r,access_token:i,nonce:o}=e,l=await fe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:r,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:ms}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new wa}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(s){if(ce(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(e){var s,n,r,i,o;try{if("email"in e){const{email:l,options:c}=e;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await Vn(this.storage,this.storageKey));const{error:h}=await fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:c}=e,{data:d,error:u}=await fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new _a("You must provide either an email or phone number.")}catch(l){if(ce(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var s,n;try{let r,i;"options"in e&&(r=(s=e.options)===null||s===void 0?void 0:s.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await fe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:r,xform:ms});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,d=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(r){if(ce(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var s,n,r;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Vn(this.storage,this.storageKey)),await fe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&n!==void 0?n:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:Zw})}catch(i){if(ce(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:n}=e;if(n)throw n;if(!s)throw new Ls;const{error:r}=await fe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(ce(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const s=`${this.url}/resend`;if("email"in e){const{email:n,type:r,options:i}=e,{error:o}=await fe(this.fetch,"POST",s,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:r,options:i}=e,{data:o,error:l}=await fe(this.fetch,"POST",s,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new _a("You must provide either an email or phone number and a type")}catch(s){if(ce(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await n,await s()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=s();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await mn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Vl:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const o=await mn(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=Yl()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,d,u)=>(!o&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:e},error:null}}const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:$s}):await this._useSession(async s=>{var n,r,i;const{data:o,error:l}=s;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ls}:await fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0,xform:$s})})}catch(s){if(ce(s))return Nw(s)&&(await this._removeSession(),await Rs(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async n=>{const{data:r,error:i}=n;if(i)throw i;if(!r.session)throw new Ls;const o=r.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await Vn(this.storage,this.storageKey));const{data:d,error:u}=await fe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:$s});if(u)throw u;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(ce(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ls;const s=Date.now()/1e3;let n=s,r=!0,i=null;const{payload:o}=Kl(e.access_token);if(o.exp&&(n=o.exp,r=n<=s),r){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-s,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(s){if(ce(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var n;if(!e){const{data:o,error:l}=s;if(l)throw l;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Ls;const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(ce(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(e,s){try{if(!Vt())throw new ja("No browser detected.");if(e.error||e.error_description||e.error_code)throw new ja(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new sf("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ja("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new sf("No code detected.");const{data:p,error:v}=await this._exchangeCodeForSession(e.code);if(v)throw v;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:p.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:d}=e;if(!i||!l||!o||!d)throw new ja("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(l);let f=u+h;c&&(f=parseInt(c));const m=f-u;m*1e3<=Qn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const x=f-h;u-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,f,u):u-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,f,u);const{data:y,error:b}=await this._getUser(i);if(b)throw b;const g={provider_token:n,provider_refresh_token:r,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:d,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:e.type},error:null}}catch(n){if(ce(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const s=await mn(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var n;const{data:r,error:i}=s;if(i)return{error:i};const o=(n=r.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(kw(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Rs(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const s=Lw(),n={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async s=>{var n,r;try{const{data:{session:i},error:o}=s;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,s={}){let n=null,r=null;this.flowType==="pkce"&&([n,r]=await Vn(this.storage,this.storageKey,!0));try{return await fe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(i){if(ce(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:s,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(s){if(ce(s))return{data:null,error:s};throw s}}async linkIdentity(e){var s;try{const{data:n,error:r}=await this._useSession(async i=>{var o,l,c,d,u;const{data:h,error:f}=i;if(f)throw f;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await fe(this.fetch,"GET",m,{headers:this.headers,jwt:(u=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(r)throw r;return Vt()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(ce(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async s=>{var n,r;const{data:i,error:o}=s;if(o)throw o;return await fe(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&r!==void 0?r:void 0})})}catch(s){if(ce(s))return{data:null,error:s};throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const n=Date.now();return await Bw(async r=>(r>0&&await zw(200*Math.pow(2,r-1)),this._debug(s,"refreshing attempt",r),await fe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ms})),(r,i)=>{const o=200*Math.pow(2,r);return i&&ql(i)&&Date.now()+o-n<Qn})}catch(n){if(this._debug(s,"error",n),ce(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",n),Vt()&&!s.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,s;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await mn(this.storage,this.storageKey);if(r&&this.userStorage){let o=await mn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:r.user},await Jn(this.userStorage,this.storageKey+"-user",o)),r.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:Yl()}else if(r&&!r.user&&!r.user){const o=await mn(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(r.user=o.user,await Rs(this.storage,this.storageKey+"-user"),await Jn(this.storage,this.storageKey,r)):r.user=Yl()}if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const i=((s=r.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<Vl;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Vl}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:o}=await this._callRefreshToken(r.refresh_token);o&&(console.error(o),ql(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(r.user&&r.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(r.access_token);!l&&(o!=null&&o.user)?(r.user=o.user,await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var s,n;if(!e)throw new Ls;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new ll;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Ls;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(r,"error",i),ce(i)){const o={session:null,error:i};return ql(i)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,s,n=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",s,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:s});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,s)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const s=Object.assign({},e),n=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&s.user&&await Jn(this.userStorage,this.storageKey+"-user",{user:s.user});const r=Object.assign({},s);delete r.user;const i=lf(r);await Jn(this.storage,this.storageKey,i)}else{const r=lf(s);await Jn(this.storage,this.storageKey,r)}}async _removeSession(){this._debug("#_removeSession()"),await Rs(this.storage,this.storageKey),await Rs(this.storage,this.storageKey+"-code-verifier"),await Rs(this.storage,this.storageKey+"-user"),this.userStorage&&await Rs(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Vt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Qn);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:n}}=s;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((n.expires_at*1e3-e)/Qn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${Qn}ms, refresh threshold is ${od} ticks`),r<=od&&await this._callRefreshToken(n.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof y0)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Vt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,n){const r=[`provider=${encodeURIComponent(s)}`];if(n!=null&&n.redirectTo&&r.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&r.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Vn(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});r.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);r.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&r.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var n;const{data:r,error:i}=s;return i?{data:null,error:i}:await fe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(ce(s))return{data:null,error:s};throw s}}async _enroll(e){try{return await this._useSession(async s=>{var n,r;const{data:i,error:o}=s;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:d}=await fe(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((r=c==null?void 0:c.totp)===null||r===void 0)&&r.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(s){if(ce(s))return{data:null,error:s};throw s}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:r,error:i}=s;if(i)return{data:null,error:i};const{data:o,error:l}=await fe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(s){if(ce(s))return{data:null,error:s};throw s}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:r,error:i}=s;return i?{data:null,error:i}:await fe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(ce(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(e){const{data:s,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){const{data:{user:e},error:s}=await this.getUser();if(s)return{data:null,error:s};const n=(e==null?void 0:e.factors)||[],r=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:r,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var s,n;const{data:{session:r},error:i}=e;if(i)return{data:null,error:i};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Kl(r.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(s=r.user.factors)===null||s===void 0?void 0:s.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const u=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,s={keys:[]}){let n=s.keys.find(l=>l.kid===e);if(n)return n;const r=Date.now();if(n=this.jwks.keys.find(l=>l.kid===e),n&&this.jwks_cached_at+_w>r)return n;const{data:i,error:o}=await fe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=r,n=i.keys.find(l=>l.kid===e),!n)?null:n}async getClaims(e,s={}){try{let n=e;if(!n){const{data:m,error:x}=await this.getSession();if(x||!m.session)return{data:null,error:x};n=m.session.access_token}const{header:r,payload:i,signature:o,raw:{header:l,payload:c}}=Kl(n);s!=null&&s.allowExpired||qw(i.exp);const d=!r.alg||r.alg.startsWith("HS")||!r.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(r.kid,s!=null&&s.keys?{keys:s.keys}:s==null?void 0:s.jwks);if(!d){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:i,header:r,signature:o},error:null}}const u=Kw(r.alg),h=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,o,Ow(`${l}.${c}`)))throw new dd("Invalid JWT signature");return{data:{claims:i,header:r,signature:o},error:null}}catch(n){if(ce(n))return{data:null,error:n};throw n}}}Ui.nextInstanceID=0;const c_=Ui;class d_ extends c_{constructor(e){super(e)}}var u_=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};class h_{constructor(e,s,n){var r,i,o;if(this.supabaseUrl=e,this.supabaseKey=s,!e)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const l=gw(e),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:lw,realtime:dw,auth:Object.assign(Object.assign({},cw),{storageKey:d}),global:ow},h=xw(n??{},u);this.storageKey=(r=h.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=mw(s,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new Tb(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new rw(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new ab(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,s={},n={}){return this.rest.rpc(e,s,n)}channel(e,s={config:{}}){return this.realtime.channel(e,s)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,s;return u_(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(s=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:s,detectSessionInUrl:n,storage:r,storageKey:i,flowType:o,lock:l,debug:c},d,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new d_({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),d),storageKey:i,autoRefreshToken:e,persistSession:s,detectSessionInUrl:n,storage:r,flowType:o,lock:l,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Vb(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,n)=>{this._handleTokenChanged(s,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,s,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const f_=(t,e,s)=>new h_(t,e,s);function m_(){if(typeof window<"u"||typeof process>"u"||process.version===void 0||process.version===null)return!1;const t=process.version.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}m_()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const p_="https://eymxpphofhhfeuvaqfad.supabase.co",g_="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImV5bXhwcGhvZmhoZmV1dmFxZmFkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMzNTAwMTIsImV4cCI6MjA2ODkyNjAxMn0.mR-TxkFP6b48BB_s_W7mD7NFV3oEZIweAQk7EefzssY",Y=f_(p_,g_),v0=k.createContext(void 0);function x_({children:t}){const[e,s]=k.useState(null),[n,r]=k.useState(!1);k.useEffect(()=>{(async()=>{r(!0);try{const{data:{session:d}}=await Y.auth.getSession();if(d!=null&&d.user){const{data:u}=await Y.from("profiles").select("*").eq("id",d.user.id).limit(1);u&&u.length>0&&s({id:u[0].id,username:u[0].username,email:u[0].email||"",role:u[0].role||"user",joinedDate:u[0].created_at})}}catch(d){console.error("Session check error:",d)}finally{r(!1)}})()},[]);const i=async(c,d)=>{try{console.log(" LOGIN ATTEMPT - Username:",c);const{data:u,error:h}=await Y.from("profiles").select("*").eq("username",c).limit(1);if(h)return console.error(" LOGIN FAILED - Database error:",h),!1;if(!u||u.length===0)return console.error(" LOGIN FAILED - No profile found for username:",c),!1;const f=u[0];if(!f.email)return console.error(" LOGIN FAILED - Profile has no email:",f),!1;console.log(" Profile found - Email:",f.email,"Role:",f.role);const{data:m,error:x}=await Y.auth.signInWithPassword({email:f.email,password:d});return x?(console.error(" SUPABASE AUTH ERROR:",x.message),!1):(s({id:f.id,username:f.username,email:f.email||"",role:f.role||"user",joinedDate:f.created_at}),!0)}catch(u){return console.error("Login error:",u),!1}},o=async(c,d,u,h)=>{var f,m,x,y;try{console.log(" SIGNUP ATTEMPT - Username:",c,"Email:",d);const{data:b,error:g}=await Y.auth.signUp({email:d,password:u,options:{data:{username:c}}});if(g)return console.error(" SUPABASE SIGNUP ERROR:",g.message,"Code:",g.status),!1;if(console.log(" SUPABASE SIGNUP SUCCESS:",{user_id:(f=b.user)==null?void 0:f.id,email:(m=b.user)==null?void 0:m.email,email_confirmed:(x=b.user)==null?void 0:x.email_confirmed_at,user_metadata:(y=b.user)==null?void 0:y.user_metadata}),b.user){const{error:p}=await Y.from("profiles").insert({id:b.user.id,username:c,email:d,role:h});p?console.error(" PROFILE CREATION ERROR:",p.message):console.log(" PROFILE CREATED SUCCESSFULLY")}return!0}catch(b){return console.error("Signup error:",b),!1}},l=async()=>{try{console.log(" LOGOUT: Starting logout process...");const{error:c}=await Y.auth.signOut();c?console.error(" LOGOUT: Supabase signout error:",c):console.log(" LOGOUT: Supabase signout successful"),s(null),console.log(" LOGOUT: User state cleared - Back to guest mode"),window.location.reload()}catch(c){console.error(" LOGOUT: Unexpected error:",c),s(null),window.location.reload()}};return a.jsx(v0.Provider,{value:{user:e,login:i,signup:o,logout:l,loading:n,setUser:s},children:t})}function es(){const t=k.useContext(v0);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var y_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v_=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ae=(t,e)=>{const s=k.forwardRef(({color:n="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...d},u)=>k.createElement("svg",{ref:u,...y_,width:r,height:r,stroke:n,strokeWidth:o?Number(i)*24/Number(r):i,className:["lucide",`lucide-${v_(t)}`,l].join(" "),...d},[...e.map(([h,f])=>k.createElement(h,f)),...Array.isArray(c)?c:[c]]));return s.displayName=`${t}`,s};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Po=ae("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cl=ae("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=ae("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eo=ae("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const In=ae("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b_=ae("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w_=ae("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b0=ae("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __=ae("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _u=ae("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j_=ae("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k_=ae("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qa=ae("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N_=ae("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ju=ae("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S_=ae("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C_=ae("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ff=ae("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P_=ae("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const en=ae("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E_=ae("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w0=ae("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T_=ae("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A_=ae("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O_=ae("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R_=ae("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ni=ae("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M_=ae("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tn=ae("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L_=ae("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mf=ae("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=ae("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _0=ae("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D_=ae("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j0=ae("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k0=ae("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vi=ae("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zn=ae("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I_=ae("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pf=ae("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z_=ae("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N0=ae("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=ae("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B_=ae("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=ae("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S0=ae("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=ae("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=ae("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ku=ae("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function $_({onBackToLogin:t,onSignupSuccess:e}){const[s,n]=k.useState(""),[r,i]=k.useState(""),[o,l]=k.useState(""),[c,d]=k.useState(""),[u,h]=k.useState(""),[f,m]=k.useState(!1),[x,y]=k.useState(!1),{signup:b}=es(),g=async p=>{if(p.preventDefault(),m(!0),h(""),y(!1),o!==c){h("Passwords do not match."),m(!1);return}if(o.length<6){h("Password must be at least 6 characters long."),m(!1);return}if(s.trim().length<3){h("Username must be at least 3 characters long."),m(!1);return}if(!/^[a-zA-Z0-9_-]+$/.test(s.trim())){h("Username can only contain letters, numbers, hyphens, and underscores."),m(!1);return}await b(s.trim(),r.trim(),o,"user")?y(!0):h("Failed to create account. Username might already be taken or there was a server error. Please try a different username."),m(!1)};return x?a.jsx("div",{className:"w-full max-w-md bg-white rounded-xl shadow-2xl p-8 mx-auto",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx("span",{className:"text-white text-2xl",children:""})}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Account Created!"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Your account has been successfully created! You can now sign in to access the system."}),a.jsx("button",{onClick:t,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors",children:"Back to Login"})]})}):a.jsxs("div",{className:"w-full max-w-md bg-white rounded-xl shadow-2xl p-8 mx-auto",children:[a.jsxs("div",{className:"flex items-center mb-6",children:[a.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full transition-colors mr-3",children:a.jsx(cl,{size:20})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Create Account"}),a.jsx("p",{className:"text-gray-600",children:"Join the Beyblade community"})]})]}),a.jsxs("form",{onSubmit:g,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700",children:"Username"}),a.jsx("input",{type:"text",id:"username",value:s,onChange:p=>n(p.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,minLength:3,placeholder:"Choose a unique username"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),a.jsx("input",{type:"email",id:"email",value:r,onChange:p=>i(p.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,placeholder:"your.email@example.com"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),a.jsx("input",{type:"password",id:"password",value:o,onChange:p=>l(p.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,minLength:6,placeholder:"At least 6 characters"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),a.jsx("input",{type:"password",id:"confirmPassword",value:c,onChange:p=>d(p.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,minLength:6,placeholder:"Confirm your password"})]}),u&&a.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-md",children:u}),a.jsx("button",{type:"submit",disabled:f,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50",children:f?"Creating Account...":"Create Account"})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsx("p",{className:"text-xs text-gray-500",children:"By creating an account, you agree to participate in tournaments and follow community guidelines. All new accounts start with basic user permissions."})})]})}function C0({onLoginSuccess:t}){const[e,s]=k.useState(""),[n,r]=k.useState(""),[i,o]=k.useState(""),[l,c]=k.useState(!1),[d,u]=k.useState("login"),{login:h}=es(),f=async m=>{m.preventDefault(),c(!0),o(""),await h(e,n)?(s(""),r(""),o(""),t==null||t()):o("Invalid username or password. Please check your credentials and try again."),c(!1)};return d==="signup"?a.jsx($_,{onBackToLogin:()=>u("login"),onSignupSuccess:t}):a.jsxs("div",{className:"w-full max-w-md p-8 mx-auto",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"w-16 h-16 bg-gray-900 rounded-lg flex items-center justify-center mx-auto mb-4",children:a.jsx("span",{className:"text-white text-2xl font-bold font-space-grotesk",children:"B"})}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 font-space-grotesk",children:"OBC Portal"}),a.jsx("p",{className:"text-gray-600 mt-2 font-inter",children:"Sign in to access your account"})]}),a.jsxs("form",{onSubmit:f,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"username",className:"form-label",children:"Username"}),a.jsx("input",{type:"text",id:"username",value:e,onChange:m=>s(m.target.value),className:"input-field w-full",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"form-label",children:"Password"}),a.jsx("input",{type:"password",id:"password",value:n,onChange:m=>r(m.target.value),className:"input-field w-full",required:!0})]}),i&&a.jsx("div",{className:"text-red-600 text-sm font-inter text-center",children:i}),a.jsx("button",{type:"submit",disabled:l,className:"primary-button w-full disabled:opacity-50 text-center",children:l?"Signing in...":"Sign In"})]}),a.jsxs("div",{className:"mt-6",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-gray-300"})}),a.jsx("div",{className:"relative flex justify-center text-sm",children:a.jsx("span",{className:"px-2 bg-white text-gray-500 font-inter",children:"Or"})})]}),a.jsx("div",{className:"mt-6",children:a.jsx("button",{onClick:()=>u("signup"),className:"secondary-button w-full text-center",children:"Create New Account"})})]}),a.jsx("div",{className:"mt-6 text-center px-4",children:a.jsx("p",{className:"text-xs text-gray-500 font-inter",children:"Create an account to participate in tournaments and access all features."})})]})}const F_=[{id:"dashboard",label:"Dashboard",icon:a.jsx(P_,{size:20}),roles:["user","technical_officer","admin","developer"]},{id:"tournaments",label:"Tournaments",icon:a.jsx(Qt,{size:20}),roles:["user","technical_officer","admin","developer"]},{id:"analytics",label:"Analytics",icon:a.jsx(Eo,{size:20}),roles:["user","technical_officer","admin","developer"]},{id:"inventory",label:"Inventory & Decks",icon:a.jsx(ni,{size:20}),roles:["user","technical_officer","admin","developer"]},{id:"match-tracker",label:"Match Tracker",icon:a.jsx(In,{size:20}),roles:["technical_officer","admin","developer"]},{id:"tournament-manager",label:"Tournament Manager",icon:a.jsx(j0,{size:20}),roles:["admin","developer"]},{id:"user-management",label:"User Management",icon:a.jsx(ls,{size:20}),roles:["admin","developer"]},{id:"database",label:"Database",icon:a.jsx(Qa,{size:20}),roles:["developer"]}];function U_({isOpen:t,currentView:e,onViewChange:s,onToggle:n}){const{user:r,logout:i}=es(),[o,l]=Ke.useState(!1),c=F_.filter(u=>r?u.roles.includes(r.role||"user"):!u.requiresAuth&&u.roles.includes("user")),d=async()=>{await i(),n()};return a.jsxs(a.Fragment,{children:[a.jsxs("aside",{className:`fixed left-0 top-0 z-40 h-screen flex flex-col 
        transition-transform ${t?"translate-x-0":"-translate-x-full"} 
        bg-white border-r border-gray-200 ${t?"w-64":"w-16"}`,children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-10 h-10 bg-gray-900 rounded-lg flex items-center justify-center font-space-grotesk font-bold text-lg text-white",children:"B"}),t&&a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-space-grotesk font-bold text-gray-900",children:"OBC Portal"}),a.jsx("p",{className:"text-xs text-gray-500 font-inter",children:"Beyblade Community"})]})]}),t&&a.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(yt,{size:20})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto px-4 py-6",children:a.jsx("ul",{className:"space-y-2",children:c.map(u=>a.jsx("li",{children:a.jsxs("button",{onClick:()=>s(u.id),className:e===u.id?"sidebar-item-active":"sidebar-item",children:[a.jsx("div",{className:"transition-colors",children:u.icon}),t&&a.jsx("span",{className:"ml-3 font-inter",children:u.label})]})},u.id))})}),a.jsx("div",{className:"px-4 border-t border-gray-200 py-4",children:r&&!r.id.startsWith("guest-")?a.jsxs("button",{onClick:d,className:"sidebar-item w-full text-red-600 hover:text-red-700 hover:bg-red-50",children:[a.jsx("div",{className:"transition-colors",children:a.jsx(w0,{size:20})}),t&&a.jsx("span",{className:"ml-3 font-inter",children:"Logout"})]}):a.jsxs("button",{onClick:()=>l(!0),className:"sidebar-item w-full text-blue-600 hover:text-blue-700 hover:bg-blue-50",children:[a.jsx("div",{className:"transition-colors",children:a.jsx(E_,{size:20})}),t&&a.jsx("span",{className:"ml-3 font-inter",children:"Login"})]})}),t&&a.jsx("div",{className:"px-2 pb-4",children:a.jsxs("div",{className:"bg-gray-100 rounded-lg p-4 border border-gray-200",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx("div",{className:"w-6 h-6 bg-blue-600 rounded flex items-center justify-center",children:a.jsx("span",{className:"text-xs text-white",children:"J"})}),a.jsx("h3",{className:"font-space-grotesk font-semibold text-sm text-gray-900",children:"Created by Jedynsay"})]}),a.jsx("p",{className:"text-xs text-gray-600 font-inter mb-2",children:"Powered by Supabase"})]})})]}),o&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-overlay",style:{zIndex:50},onClick:()=>l(!1)}),a.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4 pointer-events-none z-50",children:a.jsxs("div",{className:"relative pointer-events-auto bg-white rounded-xl shadow-2xl max-w-md w-full mx-4 max-h-[90vh]",children:[a.jsx(C0,{onLoginSuccess:()=>l(!1)}),a.jsx("button",{onClick:()=>l(!1),className:"absolute top-4 right-4 w-8 h-8 bg-gray-100 hover:bg-gray-200 rounded-full flex items-center justify-center text-gray-600 hover:text-gray-800 transition-colors",children:a.jsx(yt,{size:16})})]})})]})]})}function gf({onViewChange:t}){var M,K,J,ne,G,W;const{user:e,logout:s}=es(),[n,r]=k.useState(!1),[i,o]=k.useState(!1),[l,c]=k.useState({totalTournaments:0,activePlayers:0,upcomingEvents:0,completedMatches:0}),[d,u]=k.useState([]),[h,f]=k.useState([]),[m,x]=k.useState([]),[y,b]=k.useState([]),[g,p]=k.useState(!0),[v,w]=k.useState(0),[j,N]=k.useState("all"),[P,A]=k.useState([]);k.useEffect(()=>{S(),e&&!e.id.startsWith("guest-")&&V()},[e]),k.useEffect(()=>{if(h.length>1){const I=setInterval(()=>{w(E=>(E+1)%h.length)},5e3);return()=>clearInterval(I)}},[h.length]);const S=async()=>{try{const[I,E,z]=await Promise.all([Y.from("tournaments").select("*"),Y.from("profiles").select("*",{count:"exact",head:!0}),Y.from("match_results").select("*",{count:"exact",head:!0})]),B=I.data||[];A(B);const C=B.filter(q=>q.status==="upcoming").slice(0,3);u(C),c({totalTournaments:B.length,activePlayers:E.count||0,upcomingEvents:B.filter(q=>q.status==="upcoming").length,completedMatches:z.count||0}),await R(),await L()}catch(I){console.error("Error fetching dashboard data:",I)}finally{p(!1)}},R=async()=>{try{const{data:I}=await Y.from("match_results").select("player1_name, player2_name, winner_name");if(!I)return;const E={};I.forEach(B=>{[B.player1_name,B.player2_name].forEach(C=>{C&&(E[C]||(E[C]={wins:0,matches:0}),E[C].matches++,B.winner_name===C&&E[C].wins++)})});const z=Object.entries(E).map(([B,C])=>({name:B,wins:C.wins,tournaments:Math.ceil(C.matches/10),winRate:Math.round(C.wins/C.matches*100)})).sort((B,C)=>C.winRate-B.winRate).slice(0,5);f(z)}catch(I){console.error("Error fetching top players:",I)}},L=async()=>{try{let I=Y.from("match_results").select("player1_name, player2_name, player1_beyblade, player2_beyblade, winner_name, outcome, submitted_at, tournament_id").order("submitted_at",{ascending:!1}).limit(10);j!=="all"&&(I=I.eq("tournament_id",j));const{data:E}=await I;b(E||[])}catch(I){console.error("Error fetching recent matches:",I)}};k.useEffect(()=>{g||L()},[j]);const V=async()=>{if(!(!e||e.id.startsWith("guest-")))try{const{data:I}=await Y.from("deck_presets").select("*").eq("user_id",e.id);x(I||[])}catch(I){console.error("Error fetching deck presets:",I)}};return g?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-blue-500 border-t-transparent mx-auto mb-4"}),a.jsx("p",{className:"text-blue-200 text-lg",children:"Loading battle arena..."})]})}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900",children:[a.jsxs("section",{className:"relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/20 to-purple-600/20",children:a.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml,%3Csvg%20width%3D%2260%22%20height%3D%2260%22%20viewBox%3D%220%200%2060%2060%22%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%3E%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%3Cg%20fill%3D%22%239C92AC%22%20fill-opacity%3D%220.1%22%3E%3Ccircle%20cx%3D%2230%22%20cy%3D%2230%22%20r%3D%222%22/%3E%3C/g%3E%3C/g%3E%3C/svg%3E')] animate-pulse"})}),a.jsxs("div",{className:"relative max-w-7xl mx-auto px-6 py-20",children:[e&&!e.id.startsWith("guest-")&&a.jsx("div",{className:"absolute top-4 right-4",children:a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>r(!n),className:"flex items-center space-x-3 bg-slate-800/90 backdrop-blur-sm rounded-xl px-4 py-2 shadow-lg hover:bg-slate-700/90 transition-all duration-200 cursor-pointer",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold",children:e.username.charAt(0).toUpperCase()}),a.jsxs("div",{className:"text-white",children:[a.jsx("p",{className:"font-semibold text-sm",children:e.username}),a.jsx("p",{className:"text-xs text-blue-200 capitalize",children:e.role})]})]}),n&&a.jsx("div",{className:"absolute top-full right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50",children:a.jsxs("div",{className:"py-1",children:[a.jsxs("div",{className:"px-4 py-3 border-b border-gray-200",children:[a.jsx("p",{className:"font-semibold text-gray-900",children:e.username}),a.jsx("p",{className:"text-sm text-gray-600 capitalize",children:e.role})]}),a.jsxs("button",{onClick:()=>{r(!1)},className:"w-full text-left px-4 py-3 hover:bg-gray-50 flex items-center space-x-2 text-gray-700 hover:text-gray-900 transition-colors",children:[a.jsx(j0,{size:16}),a.jsx("span",{children:"Settings"})]}),a.jsxs("button",{onClick:async()=>{r(!1),await s()},className:"w-full text-left px-4 py-3 hover:bg-red-50 flex items-center space-x-2 text-red-600 hover:text-red-700 transition-colors",children:[a.jsx(w0,{size:16}),a.jsx("span",{children:"Logout"})]})]})})]})}),n&&a.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>r(!1)}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center space-x-2 text-yellow-400",children:[a.jsx(C_,{size:24}),a.jsx("span",{className:"text-sm font-semibold uppercase tracking-wider",children:"Battle Ready"})]}),a.jsxs("h1",{className:"text-5xl lg:text-6xl font-bold text-white leading-tight",children:["Welcome back,"," ",a.jsx("span",{className:"bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:e?e.username:"Blader"}),"!"]}),a.jsx("p",{className:"text-xl text-blue-200 leading-relaxed",children:"Gear up and join the next battle. The arena awaits your ultimate Beyblade combination."})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[a.jsxs("button",{onClick:()=>t==null?void 0:t("tournaments"),className:"group bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white px-8 py-4 rounded-xl font-semibold text-lg transition-all duration-300 transform hover:scale-105 hover:shadow-xl hover:shadow-blue-500/25 flex items-center justify-center space-x-2 cursor-pointer",children:[a.jsx(Qt,{size:24}),a.jsx("span",{children:"Check Tournaments"}),a.jsx(qr,{size:20,className:"group-hover:translate-x-1 transition-transform"})]}),a.jsxs("button",{onClick:()=>t==null?void 0:t("inventory"),className:"group bg-slate-800/50 hover:bg-slate-700/50 text-white border border-slate-600 hover:border-slate-500 px-8 py-4 rounded-xl font-semibold text-lg transition-all duration-300 flex items-center justify-center space-x-2 cursor-pointer",children:[a.jsx(en,{size:24}),a.jsx("span",{children:"Deck Builder"}),a.jsx(b0,{size:20,className:"group-hover:translate-x-1 transition-transform"})]})]})]}),e&&!e.id.startsWith("guest-")?a.jsx(a.Fragment,{children:a.jsx("div",{className:"relative",children:a.jsxs("div",{className:"relative w-80 h-80 mx-auto",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full animate-spin-slow opacity-20"}),a.jsx("div",{className:"absolute inset-4 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full animate-pulse"}),a.jsx("div",{className:"absolute inset-8 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-full flex items-center justify-center",children:a.jsx(ku,{size:120,className:"text-white animate-pulse"})}),a.jsx("div",{className:"absolute -top-4 -right-4 w-8 h-8 bg-yellow-400 rounded-full animate-ping"}),a.jsx("div",{className:"absolute -bottom-4 -left-4 w-6 h-6 bg-blue-400 rounded-full animate-ping delay-1000"}),a.jsx("div",{className:"absolute top-1/2 -left-8 w-4 h-4 bg-purple-400 rounded-full animate-ping delay-500"})]})})}):a.jsx(a.Fragment,{children:a.jsx("div",{className:"absolute top-4 right-4",children:a.jsx("button",{onClick:()=>o(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-xl font-semibold transition-all duration-200 flex items-center space-x-2",children:a.jsx("span",{children:"Login"})})})})]})]})]}),a.jsx("section",{className:"max-w-7xl mx-auto px-6 py-16",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsxs("button",{onClick:()=>t==null?void 0:t("tournaments"),className:"group bg-gradient-to-br from-slate-800 to-slate-900 border border-slate-700 rounded-2xl p-6 hover:border-blue-500 transition-all duration-300 hover:shadow-xl hover:shadow-blue-500/10 hover:-translate-y-1 cursor-pointer text-left w-full",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:"p-3 bg-blue-600 rounded-xl",children:a.jsx(Qt,{size:24,className:"text-white"})}),a.jsxs("span",{className:"text-xs bg-yellow-500 text-black px-2 py-1 rounded-full font-semibold",children:[l.upcomingEvents," LIVE"]})]}),a.jsx("h3",{className:"text-white font-bold text-lg mb-2",children:"Next Tournament"}),d.length>0?a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-blue-300 font-semibold",children:d[0].name}),a.jsx("p",{className:"text-slate-400 text-sm",children:new Date(d[0].tournament_date).toLocaleDateString()}),a.jsx("p",{className:"text-slate-400 text-sm",children:d[0].location}),a.jsxs("div",{className:"flex justify-between items-center mt-4",children:[a.jsxs("span",{className:"text-xs text-slate-500",children:[d[0].current_participants,"/",d[0].max_participants," spots"]}),a.jsxs("span",{className:"text-blue-400 hover:text-blue-300 text-sm font-semibold flex items-center space-x-1 group-hover:translate-x-1 transition-transform",children:[a.jsx("span",{children:"Register"}),a.jsx(qr,{size:14})]})]})]}):a.jsx("p",{className:"text-slate-400",children:"No upcoming tournaments"})]}),a.jsxs("button",{onClick:()=>t==null?void 0:t("analytics"),className:"group bg-gradient-to-br from-slate-800 to-slate-900 border border-slate-700 rounded-2xl p-6 hover:border-purple-500 transition-all duration-300 hover:shadow-xl hover:shadow-purple-500/10 hover:-translate-y-1 cursor-pointer text-left w-full",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:"p-3 bg-purple-600 rounded-xl",children:a.jsx(B_,{size:24,className:"text-white"})}),a.jsx("span",{className:"text-xs bg-green-500 text-black px-2 py-1 rounded-full font-semibold",children:"UPDATED"})]}),a.jsx("h3",{className:"text-white font-bold text-lg mb-2",children:"Meta Analysis"}),a.jsx("p",{className:"text-purple-300 text-sm mb-2",children:"Latest tier rankings"}),a.jsx("p",{className:"text-slate-400 text-xs mb-4",children:"Updated 2 hours ago"}),a.jsxs("span",{className:"text-purple-400 hover:text-purple-300 text-sm font-semibold flex items-center space-x-1 group-hover:translate-x-1 transition-transform",children:[a.jsx("span",{children:"View Stats"}),a.jsx(qr,{size:14})]})]}),a.jsxs("button",{onClick:()=>{alert("News section is currently under construction. Stay tuned for updates!")},className:"group bg-gradient-to-br from-slate-800 to-slate-900 border border-slate-700 rounded-2xl p-6 hover:border-green-500 transition-all duration-300 hover:shadow-xl hover:shadow-green-500/10 hover:-translate-y-1 cursor-pointer text-left w-full",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:"p-3 bg-green-600 rounded-xl",children:a.jsx(R_,{size:24,className:"text-white"})}),a.jsx("span",{className:"text-xs bg-yellow-500 text-black px-2 py-1 rounded-full font-semibold",children:"SOON"})]}),a.jsx("h3",{className:"text-white font-bold text-lg mb-2",children:"Under Construction"}),a.jsx("p",{className:"text-green-300 text-sm mb-2",children:"News & Updates"}),a.jsx("p",{className:"text-slate-400 text-xs mb-4",children:"Coming soon to keep you informed"}),a.jsxs("span",{className:"text-green-400 hover:text-green-300 text-sm font-semibold flex items-center space-x-1 group-hover:translate-x-1 transition-transform",children:[a.jsx("span",{children:"Coming Soon"}),a.jsx(qr,{size:14})]})]}),a.jsxs("button",{onClick:()=>t==null?void 0:t("inventory"),className:"group bg-gradient-to-br from-slate-800 to-slate-900 border border-slate-700 rounded-2xl p-6 hover:border-orange-500 transition-all duration-300 hover:shadow-xl hover:shadow-orange-500/10 hover:-translate-y-1 cursor-pointer text-left w-full",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:"p-3 bg-orange-600 rounded-xl",children:a.jsx(en,{size:24,className:"text-white"})}),a.jsx("span",{className:"text-xs bg-blue-500 text-white px-2 py-1 rounded-full font-semibold",children:m.length})]}),a.jsx("h3",{className:"text-white font-bold text-lg mb-2",children:"Your Decks"}),a.jsx("p",{className:"text-orange-300 text-sm mb-2",children:"Saved combinations"}),a.jsxs("p",{className:"text-slate-400 text-xs mb-4",children:[m.length," presets ready"]}),a.jsxs("span",{className:"text-orange-400 hover:text-orange-300 text-sm font-semibold flex items-center space-x-1 group-hover:translate-x-1 transition-transform",children:[a.jsx("span",{children:"Manage"}),a.jsx(qr,{size:14})]})]})]})}),a.jsxs("section",{className:"max-w-7xl mx-auto px-6 py-16",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h2",{className:"text-4xl font-bold text-white mb-4",children:"Community Champions"}),a.jsx("p",{className:"text-blue-200 text-lg",children:"Meet the top bladers dominating the arena"})]}),h.length>0&&a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-900 border border-slate-700 rounded-3xl p-8 text-center",children:[a.jsx("div",{className:"flex items-center justify-center mb-6",children:a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"w-24 h-24 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full flex items-center justify-center text-4xl font-bold text-black",children:(M=h[v])==null?void 0:M.name.charAt(0).toUpperCase()}),a.jsx("div",{className:"absolute -top-2 -right-2 bg-yellow-400 rounded-full p-2",children:a.jsx(k_,{size:16,className:"text-black"})})]})}),a.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:(K=h[v])==null?void 0:K.name}),a.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[a.jsx(I_,{className:"text-yellow-400",size:20}),a.jsx("span",{className:"text-yellow-400 font-semibold",children:"Top Player"})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-6 max-w-md mx-auto",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-blue-400",children:(J=h[v])==null?void 0:J.wins}),a.jsx("div",{className:"text-slate-400 text-sm",children:"Wins"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-purple-400",children:(ne=h[v])==null?void 0:ne.tournaments}),a.jsx("div",{className:"text-slate-400 text-sm",children:"Tournaments"})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"text-2xl font-bold text-green-400",children:[(G=h[v])==null?void 0:G.winRate,"%"]}),a.jsx("div",{className:"text-slate-400 text-sm",children:"Win Rate"})]})]})]}),a.jsx("div",{className:"flex justify-center space-x-2 mt-6",children:h.map((I,E)=>a.jsx("button",{onClick:()=>w(E),className:`w-3 h-3 rounded-full transition-all duration-300 ${E===v?"bg-blue-500 scale-125":"bg-slate-600 hover:bg-slate-500"}`},E))})]}),j!=="all"||y.length>0?a.jsxs("div",{className:"mt-12 bg-slate-800/50 border border-slate-700 rounded-2xl p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"text-white font-bold text-lg flex items-center space-x-2",children:[a.jsx(M_,{size:20,className:"text-green-400"}),a.jsx("span",{children:"Live Results"})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("select",{value:j,onChange:I=>N(I.target.value),className:"text-xs bg-slate-700 text-white border border-slate-600 rounded px-2 py-1 focus:outline-none focus:ring-1 focus:ring-blue-500",children:[a.jsx("option",{value:"all",children:"All Tournaments"}),P.map(I=>a.jsx("option",{value:I.id,children:I.name},I.id))]}),a.jsx("span",{className:"text-xs bg-green-500 text-black px-2 py-1 rounded-full font-semibold animate-pulse",children:"LIVE"})]})]}),y.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"text-slate-400 text-4xl mb-4",children:""}),a.jsx("p",{className:"text-slate-400 font-medium",children:"No matches found"}),a.jsx("p",{className:"text-slate-500 text-sm mt-1",children:j==="all"?"No recent matches across all tournaments":`No matches found for ${((W=P.find(I=>I.id===j))==null?void 0:W.name)||"this tournament"}`})]}):a.jsx("div",{className:"space-y-3 max-h-48 overflow-y-auto",children:y.slice(0,5).map((I,E)=>{var z;return a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-white font-semibold",children:I.winner_name}),a.jsx("span",{className:"text-slate-400",children:"defeated"}),a.jsx("span",{className:"text-slate-300",children:I.winner_name===I.player1_name?I.player2_name:I.player1_name})]}),(I.player1_beyblade||I.player2_beyblade)&&a.jsx("div",{className:"text-xs text-slate-500 font-mono mt-1",children:I.winner_name===I.player1_name?`${I.player1_beyblade||"Unknown"} vs ${I.player2_beyblade||"Unknown"}`:`${I.player2_beyblade||"Unknown"} vs ${I.player1_beyblade||"Unknown"}`})]})]}),a.jsx("div",{className:"text-slate-500 text-xs",children:((z=I.outcome)==null?void 0:z.split(" (")[0])||"Victory"})]},E)})})]}):null]}),a.jsx("footer",{className:"border-t border-slate-800 bg-slate-900/50",children:a.jsx("div",{className:"max-w-7xl mx-auto px-6 py-8",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 items-center",children:[a.jsxs("div",{className:"text-slate-400 text-sm",children:[a.jsx("p",{className:"font-semibold text-white mb-1",children:"Created by Jedynsay"}),a.jsx("p",{children:"Powered by Supabase"})]}),a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"flex items-center justify-center space-x-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-3 h-3 bg-green-400 rounded-full animate-pulse"}),a.jsx("span",{className:"text-green-400 font-semibold",children:"System Online"})]})})}),a.jsx("div",{className:"flex justify-end",children:a.jsx("div",{className:"text-slate-400 text-sm",children:"OBC Portal v1.0"})})]})})}),i&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-overlay",style:{zIndex:50},onClick:()=>o(!1)}),a.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4 pointer-events-none z-50",children:a.jsxs("div",{className:"relative pointer-events-auto bg-white rounded-xl shadow-2xl max-w-md w-full mx-4 max-h-[90vh]",children:[a.jsx(C0,{onLoginSuccess:()=>o(!1)}),a.jsx("button",{onClick:()=>o(!1),className:"absolute top-4 right-4 w-8 h-8 bg-gray-100 hover:bg-gray-200 rounded-full flex items-center justify-center text-gray-600 hover:text-gray-800 transition-colors",children:a.jsx(yt,{size:16})})]})})]})]})}function W_({tournament:t,onClose:e,onSubmit:s}){var se,pe,re;const{user:n}=es(),[r,i]=k.useState(""),[o,l]=k.useState("free"),[c,d]=k.useState([{id:"1",bladeLine:"",parts:{}}]),[u,h]=k.useState({blades:[],ratchets:[],bits:[],lockchips:[],assistBlades:[]}),[f,m]=k.useState(!1),[x,y]=k.useState(null),[b,g]=k.useState(!1),[p,v]=k.useState([]),[w,j]=k.useState(""),[N,P]=k.useState(!1);k.useState("");const A=async()=>{m(!0),y(null);try{const[D,T,O,H,te]=await Promise.all([Y.from("beypart_blade").select("*"),Y.from("beypart_ratchet").select("*"),Y.from("beypart_bit").select("*"),Y.from("beypart_lockchip").select("*"),Y.from("beypart_assistblade").select("*")]);if(D.error)throw D.error;if(T.error)throw T.error;if(O.error)throw O.error;if(H.error)throw H.error;if(te.error)throw te.error;h({blades:D.data||[],ratchets:T.data||[],bits:O.data||[],lockchips:H.data||[],assistBlades:te.data||[]})}catch(D){console.error("Error fetching parts data:",D),y("Failed to load Beyblade parts. Please try again.")}finally{m(!1)}};Ke.useEffect(()=>{A(),n&&!n.id.startsWith("guest-")&&S()},[]);const S=async()=>{if(!(!n||n.id.startsWith("guest-")))try{const{data:D,error:T}=await Y.from("deck_presets").select("*").eq("user_id",n.id).order("updated_at",{ascending:!1});if(T)throw T;v(D||[])}catch(D){console.error("Error fetching deck presets:",D)}},R=D=>{const T=p.find(O=>O.id===D);if(T){const O=T.beyblades.slice(0,t.beyblades_per_player).map((H,te)=>({id:(te+1).toString(),bladeLine:H.blade_line,parts:H.parts}));d(O),d(O.map(H=>({...H,name:K(H.bladeLine,H.parts)}))),P(!1),j("")}},L=D=>{switch(D){case"Basic":case"Unique":case"X-Over":return["Blade","Ratchet","Bit"];case"Custom":return["Lockchip","Main Blade","Assist Blade","Ratchet","Bit"];default:return[]}},V=(D,T)=>{if(!D)return[];let O=[];switch(T){case"Blade":case"Main Blade":O=u.blades.filter(H=>T==="Main Blade"?H.Line==="Custom":H.Line===D);break;case"Ratchet":O=u.ratchets;break;case"Bit":O=u.bits;break;case"Lockchip":O=u.lockchips;break;case"Assist Blade":O=u.assistBlades;break;default:O=[]}return O.sort((H,te)=>{const le=M(H,T),je=M(te,T);return le.localeCompare(je)})},M=(D,T)=>{switch(T){case"Blade":case"Main Blade":return D.Blades;case"Ratchet":return D.Ratchet;case"Bit":return`${D.Bit} (${D.Shortcut})`;case"Lockchip":return D.Lockchip;case"Assist Blade":return`${D["Assist Blade Name"]} (${D["Assist Blade"]})`;default:return""}},K=(D,T)=>{var te,le,je,ue,Be,_,$,xe;if(!D||!L(D).every(ie=>T[ie]))return"";if(D==="Custom"){const ie=((te=T.Lockchip)==null?void 0:te.Lockchip)||"",ye=((le=T["Main Blade"])==null?void 0:le.Blades)||"",oe=((je=T["Assist Blade"])==null?void 0:je["Assist Blade"])||"",ts=((ue=T.Ratchet)==null?void 0:ue.Ratchet)||"",gl=((Be=T.Bit)==null?void 0:Be.Shortcut)||"";return`${ie}${ye} ${oe}${ts}${gl}`}else{const ie=((_=T.Blade)==null?void 0:_.Blades)||"",ye=(($=T.Ratchet)==null?void 0:$.Ratchet)||"",oe=((xe=T.Bit)==null?void 0:xe.Shortcut)||"";return`${ie} ${ye}${oe}`}},J=D=>{let T={attack:0,defense:0,stamina:0,dash:0,burstRes:0};return Object.values(D).forEach(O=>{O&&(T.attack+=O.Attack||0,T.defense+=O.Defense||0,T.stamina+=O.Stamina||0,T.dash+=O.Dash||0,T.burstRes+=O["Burst Res"]||0)}),T},ne=()=>{c.length<t.beyblades_per_player?d([...c,{id:Date.now().toString(),bladeLine:"",parts:{}}]):alert(`Maximum ${t.beyblades_per_player} Beyblades allowed for this tournament.`)},G=D=>{c.length>1&&d(c.filter(T=>T.id!==D))},W=(D,T,O)=>{d(c.map(H=>H.id===D?{...H,[T]:O,parts:{}}:H))},I=(D,T,O)=>{d(c.map(H=>H.id===D?{...H,parts:{...H.parts,[T]:O}}:H))},E=()=>!r.trim()||!o?!1:c.every(D=>D.bladeLine?L(D.bladeLine).every(O=>D.parts[O]):!1),z=async()=>{var D,T;if(!E()){alert("Please fill in all required fields to register for the tournament.");return}g(!0);try{const O=await Y.from("tournaments").select("is_free").eq("id",t.id).single(),H=(D=O.data)!=null&&D.is_free?"confirmed":"unpaid",{data:te,error:le}=await Y.from("tournament_registrations").insert({tournament_id:t.id,player_name:r.trim(),payment_mode:o,status:"confirmed",payment_status:H}).select().single();if(le)throw new Error(`Registration failed: ${le.message}`);for(const ue of c){const Be=K(ue.bladeLine,ue.parts),{data:_,error:$}=await Y.from("tournament_beyblades").insert({registration_id:te.id,beyblade_name:Be,blade_line:ue.bladeLine}).select().single();if($)throw new Error(`Beyblade registration failed: ${$.message}`);const xe=Object.entries(ue.parts).map(([ye,oe])=>({beyblade_id:_.id,part_type:ye,part_name:M(oe,ye),part_data:oe})),{error:ie}=await Y.from("tournament_beyblade_parts").insert(xe);if(ie)throw new Error(`Parts registration failed: ${ie.message}`)}const je=(T=O.data)!=null&&T.is_free?`Successfully registered ${r} for ${t.name}! You're confirmed and ready to compete.`:`Successfully registered ${r} for ${t.name}! Please complete payment to confirm your spot. Registration ID: ${te.id}`;alert(je),s(r,c)}catch(O){console.error("Registration error:",O),alert(`Failed to register for tournament: ${O instanceof Error?O.message:"Unknown error"}. Please try again.`)}finally{g(!1)}},B=D=>{switch(D){case"Basic":return"text-blue-600 bg-blue-50 border-blue-200";case"Unique":return"text-purple-600 bg-purple-50 border-purple-200";case"Custom":return"text-orange-600 bg-orange-50 border-orange-200";case"X-Over":return"text-green-600 bg-green-50 border-green-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},C=D=>{switch(D){case"attack":return a.jsx(ku,{size:12,className:"text-red-500"});case"defense":return a.jsx(vi,{size:12,className:"text-blue-500"});case"stamina":return a.jsx(_u,{size:12,className:"text-green-500"});case"dash":return a.jsx(Po,{size:12,className:"text-yellow-500"});case"burstRes":return a.jsx(k0,{size:12,className:"text-purple-500"});default:return null}},q=D=>{switch(D){case"attack":return"bg-red-500";case"defense":return"bg-blue-500";case"stamina":return"bg-green-500";case"dash":return"bg-yellow-500";case"burstRes":return"bg-purple-500";default:return"bg-gray-500"}},X=({stats:D})=>{const T=H=>{switch(H){case"attack":case"defense":case"stamina":return 200;case"dash":return 50;case"burstRes":return 80;default:return 100}},O=[{key:"attack",label:"Attack",value:D.attack},{key:"defense",label:"Defense",value:D.defense},{key:"stamina",label:"Stamina",value:D.stamina},{key:"dash",label:"Dash",value:D.dash},{key:"burstRes",label:"Burst Res",value:D.burstRes}];return a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mt-4",children:[a.jsxs("h5",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center",children:[a.jsx(Po,{size:16,className:"mr-2"}),"Combined Stats"]}),a.jsx("div",{className:"space-y-2",children:O.map(({key:H,label:te,value:le})=>a.jsxs("div",{className:"flex items-center",children:[a.jsxs("div",{className:"flex items-center w-20 text-xs font-medium text-gray-600",children:[C(H),a.jsx("span",{className:"ml-1",children:te})]}),a.jsx("div",{className:"flex-1 mx-3",children:a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${q(H)}`,style:{width:`${Math.min(le/T(H)*100,100)}%`}})})}),a.jsx("div",{className:"w-8 text-xs font-bold text-gray-700 text-right",children:le})]},H))})]})};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(f||b)&&a.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center z-10 rounded-lg",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:f?"Loading Beyblade parts...":"Registering for tournament..."})]})}),a.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Tournament Registration"}),a.jsx("p",{className:"text-gray-600",children:t.name}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Configure your Beyblades for this tournament. You can register up to ",t.beyblades_per_player," Beyblades."]})]}),a.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:a.jsx(yt,{size:24})})]}),a.jsxs("div",{className:"p-6",children:[x&&a.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"text-red-600 mr-3",children:""}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-red-800 font-medium",children:"Error Loading Parts"}),a.jsx("p",{className:"text-red-700 text-sm mt-1",children:x}),a.jsx("button",{onClick:A,className:"mt-2 text-red-600 hover:text-red-800 text-sm underline",children:"Try Again"})]})]})}),a.jsxs("div",{className:"mb-8 bg-blue-50 border border-blue-200 rounded-lg p-6",children:[a.jsxs("div",{className:"flex items-center mb-4",children:[a.jsx(S0,{className:"text-blue-600 mr-2",size:20}),a.jsx("h3",{className:"text-lg font-semibold text-blue-900",children:"Player Information"})]}),a.jsx("div",{className:"mb-4 p-3 bg-white rounded-lg border border-blue-200",children:a.jsxs("p",{className:"text-sm text-blue-800",children:[a.jsx("strong",{children:"No account required!"})," Simply provide your blader name and Beyblade details to register for this tournament. Your registration will be saved for tournament organizers."]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"playerName",className:"block text-sm font-medium text-gray-700 mb-2",children:"Player Name *"}),a.jsx("input",{type:"text",id:"playerName",value:r,onChange:D=>i(D.target.value),placeholder:"Enter your player name for this tournament",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This is your blader name that will appear in tournament brackets and match results."})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"paymentMode",className:"block text-sm font-medium text-gray-700 mb-2",children:"Mode of Payment *"}),a.jsxs("select",{id:"paymentMode",value:o,onChange:D=>l(D.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[t.is_free&&a.jsx("option",{value:"free",children:"Free Entry"}),a.jsx("option",{value:"cash",children:"Cash"}),a.jsx("option",{value:"gcash",children:"GCash"}),a.jsx("option",{value:"bank_transfer",children:"Bank Transfer"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t.is_free&&o==="free"?"This tournament has no entry fee.":o==="cash"?"Pay at the venue on tournament day.":o==="gcash"?"Payment details will be provided after registration.":"Bank details will be provided after registration."})]})]})]}),!(n!=null&&n.id.startsWith("guest-"))&&p.length>0&&a.jsxs("div",{className:"mb-8 bg-green-50 border border-green-200 rounded-lg p-6",children:[a.jsxs("div",{className:"flex items-center mb-4",children:[a.jsx(en,{className:"text-green-600 mr-2",size:20}),a.jsx("h3",{className:"text-lg font-semibold text-green-900",children:"Quick Setup with Deck Presets"})]}),a.jsx("div",{className:"mb-4 p-3 bg-white rounded-lg border border-green-200",children:a.jsxs("p",{className:"text-sm text-green-800",children:[a.jsx("strong",{children:"Save time!"})," Use one of your saved deck presets to quickly configure your Beyblades for this tournament."]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Deck Preset"}),a.jsxs("select",{value:w,onChange:D=>j(D.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500",children:[a.jsx("option",{value:"",children:"-- Select a preset --"}),p.map(D=>a.jsxs("option",{value:D.id,children:[D.name," (",D.beyblades.length," Beyblades)"]},D.id))]})]}),a.jsx("div",{className:"flex items-end",children:a.jsx("button",{type:"button",onClick:()=>w&&R(w),disabled:!w,className:"w-full bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Load Preset"})})]}),w&&a.jsx("div",{className:"mt-4 p-3 bg-white rounded-lg border border-green-200",children:a.jsxs("div",{className:"text-sm text-green-800",children:[a.jsx("strong",{children:"Preview:"}),(se=p.find(D=>D.id===w))==null?void 0:se.beyblades.slice(0,3).map((D,T)=>a.jsxs("div",{className:"font-mono text-xs mt-1",children:[" ",D.name||`Beyblade ${T+1}`]},T)),((pe=p.find(D=>D.id===w))==null?void 0:pe.beyblades.length)>3&&a.jsxs("div",{className:"text-xs mt-1 text-green-600",children:["+",((re=p.find(D=>D.id===w))==null?void 0:re.beyblades.length)-3," more..."]})]})})]}),o!=="free"&&a.jsxs("div",{className:"mb-8 bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:[a.jsxs("div",{className:"flex items-center mb-4",children:[a.jsx("div",{className:"w-6 h-6 bg-yellow-500 rounded-full flex items-center justify-center mr-2",children:a.jsx("span",{className:"text-white text-sm font-bold",children:""})}),a.jsx("h3",{className:"text-lg font-semibold text-yellow-900",children:"Payment Information"})]}),a.jsxs("div",{className:"bg-white rounded-lg p-4 border border-yellow-200",children:[o==="cash"&&a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Cash Payment"}),a.jsx("p",{className:"text-gray-700 text-sm",children:"Please bring the exact tournament entry fee on the day of the tournament. Payment will be collected during registration at the venue."})]}),o==="gcash"&&a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"GCash Payment"}),a.jsx("p",{className:"text-gray-700 text-sm mb-2",children:"GCash payment details will be sent to you after registration confirmation."}),a.jsxs("div",{className:"bg-gray-50 p-3 rounded text-sm",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"GCash Number:"})," [Will be provided]"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Account Name:"})," [Will be provided]"]})]})]}),o==="bank_transfer"&&a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Bank Transfer"}),a.jsx("p",{className:"text-gray-700 text-sm mb-2",children:"Bank transfer details will be sent to you after registration confirmation."}),a.jsxs("div",{className:"bg-gray-50 p-3 rounded text-sm",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Bank:"})," [Will be provided]"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Account Number:"})," [Will be provided]"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Account Name:"})," [Will be provided]"]})]})]})]})]}),a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("label",{htmlFor:"playerName",className:"block text-sm font-medium text-gray-700 mb-2",children:"Beyblade Registration"}),a.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Configure your Beyblades for this tournament. You can register up to ",t.beyblades_per_player," Beyblades."]})]}),c.map((D,T)=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Beyblade #",T+1]}),c.length>1&&a.jsx("button",{onClick:()=>G(D.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-full transition-colors",children:a.jsx(us,{size:16})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Blade Line *"}),a.jsxs("select",{value:D.bladeLine,onChange:O=>W(D.id,"bladeLine",O.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Select Blade Line"}),a.jsx("option",{value:"Basic",children:"Basic"}),a.jsx("option",{value:"Unique",children:"Unique"}),a.jsx("option",{value:"Custom",children:"Custom"}),a.jsx("option",{value:"X-Over",children:"X-Over"})]})]}),D.bladeLine&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Generated Name"}),a.jsx("div",{className:"w-full border border-gray-200 rounded-md px-3 py-2 bg-gray-50 text-gray-700 font-mono",children:K(D.bladeLine,D.parts)||"Select all parts to generate name"})]})]}),D.bladeLine&&a.jsxs("div",{className:`border rounded-lg p-4 ${B(D.bladeLine)}`,children:[a.jsxs("h4",{className:"font-semibold mb-3 flex items-center",children:[a.jsxs("span",{className:"mr-2",children:[D.bladeLine," Line Parts"]}),a.jsxs("span",{className:"text-xs px-2 py-1 rounded-full bg-white bg-opacity-50",children:[L(D.bladeLine).length," parts required"]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:L(D.bladeLine).map(O=>a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium mb-2",children:[O," *"]}),a.jsxs("select",{value:D.parts[O]?JSON.stringify(D.parts[O]):"",onChange:H=>{if(H.target.value){const te=JSON.parse(H.target.value);I(D.id,O,te)}},className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white disabled:bg-gray-100 disabled:cursor-not-allowed",disabled:f||!!x,children:[a.jsxs("option",{value:"",children:["Select ",O]}),V(D.bladeLine,O).map((H,te)=>a.jsx("option",{value:JSON.stringify(H),children:M(H,O)},te))]}),D.parts[O]&&a.jsx("div",{className:"mt-2",children:a.jsx("div",{className:"flex flex-wrap gap-2 text-xs",children:Object.entries(D.parts[O]).map(([H,te])=>typeof te=="number"&&te>0&&["Attack","Defense","Stamina","Dash","Burst Res"].includes(H)?a.jsxs("div",{className:"flex items-center space-x-1 bg-white bg-opacity-50 px-2 py-1 rounded",children:[C(H.toLowerCase().replace(" ","")),a.jsxs("span",{children:[H,": ",te]})]},H):null)})})]},O))})]}),D.bladeLine&&Object.keys(D.parts).length>0&&a.jsx(X,{stats:J(D.parts)})]},D.id))]}),c.length<t.beyblades_per_player&&a.jsxs("button",{onClick:ne,className:"mt-6 w-full border-2 border-dashed border-gray-300 rounded-lg p-4 text-gray-600 hover:border-blue-400 hover:text-blue-600 transition-colors flex items-center justify-center space-x-2",children:[a.jsx(Tn,{size:20}),a.jsxs("span",{children:["Add Another Beyblade (",c.length,"/",t.beyblades_per_player,")"]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 mt-8 pt-6 border-t border-gray-200",children:[a.jsx("button",{onClick:e,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsxs("button",{onClick:z,disabled:!E()||f||!!x||b,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[a.jsx(Cr,{size:16}),a.jsx("span",{children:"Register for Tournament"})]})]})]})]})})}function H_(){es();const[t,e]=k.useState("all"),[s,n]=k.useState(null),[r,i]=k.useState([]),[o,l]=k.useState(!0);Ke.useEffect(()=>{(async()=>{try{const{data:f,error:m}=await Y.from("tournaments").select("*").order("tournament_date",{ascending:!0});if(m)throw m;i(f||[])}catch(f){console.error("Error fetching tournaments:",f),i([])}finally{l(!1)}})()},[]);const c=r.filter(h=>t==="all"||h.status===t),d=(h,f)=>{console.log("Tournament registration:",{playerName:h,beyblades:f}),alert(`Successfully registered ${h} with ${f.length} Beyblades for the tournament!`),n(null)},u=h=>{switch(h){case"upcoming":return"tournament-status-upcoming";case"active":return"tournament-status-active";case"completed":return"tournament-status-completed";default:return"tournament-status-completed"}};return a.jsx("div",{className:"page-container",children:a.jsxs("div",{className:"content-wrapper",children:[a.jsxs("div",{className:"page-header",children:[a.jsx("h1",{className:"page-title",children:"Tournaments"}),a.jsx("p",{className:"page-subtitle",children:"Join the ultimate Beyblade battles"})]}),a.jsx("div",{className:"mb-8",children:a.jsx("div",{className:"filter-tabs",children:["all","upcoming","active","completed"].map(h=>a.jsx("button",{onClick:()=>e(h),className:`filter-tab capitalize ${t===h?"filter-tab-active":"filter-tab-inactive"}`,children:h},h))})}),o?a.jsxs("div",{className:"empty-state",children:[a.jsx("div",{className:"loading-spinner h-12 w-12 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading tournaments..."})]}):c.length===0?a.jsxs("div",{className:"empty-state",children:[a.jsx(Qt,{className:"empty-icon"}),a.jsx("h3",{className:"empty-title",children:"No tournaments found"}),a.jsx("p",{className:"empty-description",children:"Check back later for upcoming events"})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(h=>a.jsxs("div",{className:"card p-6 hover:shadow-lg transition-all duration-200",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("h3",{className:"text-xl font-space-grotesk font-bold text-gray-900",children:h.name}),a.jsx("span",{className:`badge capitalize ${u(h.status)}`,children:h.status})]}),a.jsx("p",{className:"text-gray-600 mb-6 font-inter",children:h.description}),a.jsxs("div",{className:"space-y-3 mb-6",children:[a.jsxs("div",{className:"flex items-center text-gray-600 font-inter",children:[a.jsx(In,{size:16,className:"mr-2"}),new Date(h.tournament_date).toLocaleDateString()]}),a.jsxs("div",{className:"flex items-center text-gray-600 font-inter",children:[a.jsx(A_,{size:16,className:"mr-2"}),h.location]}),a.jsxs("div",{className:"flex items-center text-gray-600 font-inter",children:[a.jsx(ls,{size:16,className:"mr-2"}),h.current_participants,"/",h.max_participants," participants"]}),h.prize_pool&&a.jsxs("div",{className:"flex items-center text-gray-600 font-inter",children:[a.jsx(Qt,{size:16,className:"mr-2"}),"Prize Pool: ",h.prize_pool]}),a.jsxs("div",{className:"flex items-center text-gray-600 font-inter",children:[a.jsx(_u,{size:16,className:"mr-2"}),"Registration ends: ",new Date(h.registration_deadline).toLocaleDateString()]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"flex justify-between text-gray-600 font-inter mb-2",children:[a.jsx("span",{children:"Registration Progress"}),a.jsxs("span",{children:[Math.round(h.current_participants/h.max_participants*100),"%"]})]}),a.jsx("div",{className:"progress-bar",children:a.jsx("div",{className:"progress-fill",style:{width:`${h.current_participants/h.max_participants*100}%`}})})]}),h.status==="upcoming"&&a.jsx("button",{onClick:()=>n(h.id),disabled:h.current_participants>=h.max_participants,className:"primary-button w-full disabled:opacity-50 disabled:cursor-not-allowed",children:h.current_participants>=h.max_participants?"Tournament Full":"Register for Tournament"})]},h.id))}),s&&a.jsx(W_,{tournament:c.find(h=>h.id===s),onClose:()=>n(null),onSubmit:d})]})})}function xf(t,e,s=1.96){if(e===0)return 0;const n=t/e,r=1+s*s/e,i=n+s*s/(2*e),o=s*Math.sqrt((n*(1-n)+s*s/(4*e))/e);return(i-o)/r}function V_(t,e,s){console.log(` PARSER: Attempting ${e} parsing for: "${t}"`);let n=t;const r=P0(n,s.bits);if(!r)return console.log(` PARSER: ${e} parsing failed - no bit found`),null;n=n.slice(0,n.length-r.bitName.length).trim(),console.log(` PARSER: After bit removal: "${n}"`);const i=E0(n,s.ratchets);if(!i)return console.log(` PARSER: ${e} parsing failed - no ratchet found`),null;n=n.slice(0,n.length-i.ratchetName.length).trim(),console.log(` PARSER: After ratchet removal: "${n}"`),console.log(` PARSER: Looking for ${e} blade: "${n}"`);const o=T0(n,s.blades.filter(c=>c.Line===e));if(!o)return console.log(` PARSER: ${e} parsing failed - no ${e} blade found for "${n}"`),null;const l={isCustom:!1,blade:o.bladeName,ratchet:i.ratchetName,bit:r.bitName};return console.log(` PARSER: ${e} parsing successful:`,l),l}function q_(t,e){console.log(` PARSER: Attempting Custom parsing for: "${t}"`);let s=t;const n=K_(t,e.lockchips);if(!n)return console.log(" PARSER: Custom parsing failed - no lockchip found"),null;s=t.slice(n.lockchipName.length),console.log(` PARSER: After lockchip removal: "${s}"`);const r=P0(s,e.bits);if(!r)return console.log(" PARSER: Custom parsing failed - no bit found"),null;s=s.slice(0,s.length-r.bitName.length).trim(),console.log(` PARSER: After bit removal: "${s}"`);const i=E0(s,e.ratchets);if(!i)return console.log(" PARSER: Custom parsing failed - no ratchet found"),null;s=s.slice(0,s.length-i.ratchetName.length).trim(),console.log(` PARSER: After ratchet removal: "${s}"`);const o=Y_(s,e.assistBlades);if(!o)return console.log(" PARSER: Custom parsing failed - no assist blade found"),null;s=s.slice(0,s.length-o.assistBladeName.length).trim(),console.log(` PARSER: After assist blade removal: "${s}"`);const l=T0(s,e.blades.filter(d=>d.Line==="Custom"));if(!l)return console.log(` PARSER: Custom parsing failed - no Custom main blade found for "${s}"`),null;const c={isCustom:!0,lockchip:n.lockchipName,mainBlade:l.bladeName,assistBlade:o.assistBladeName,ratchet:i.ratchetName,bit:r.bitName};return console.log(" PARSER: Custom parsing successful:",c),c}function P0(t,e){console.log(` PARSER: Finding bit in "${t}"`),console.log(" PARSER: Available bits:",e.map(n=>({shortcut:n.Shortcut,full:n.Bit})));const s=[...e].sort((n,r)=>{const i=n.Shortcut||n.Bit||"";return(r.Shortcut||r.Bit||"").length-i.length});for(const n of s){const r=n.Shortcut;if(r&&t.endsWith(r))return console.log(` PARSER: Found bit by shortcut: ${r}`),{bit:n,bitName:r}}for(const n of s){const r=n.Bit;if(r&&t.endsWith(r))return console.log(` PARSER: Found bit by full name: ${r}  ${n.Shortcut||r}`),{bit:n,bitName:n.Shortcut||r}}return console.log(` PARSER: No bit found in "${t}"`),null}function E0(t,e){console.log(` PARSER: Finding ratchet in "${t}"`);const s=[...e].sort((n,r)=>{const i=n.Ratchet||"";return(r.Ratchet||"").length-i.length});for(const n of s){const r=n.Ratchet;if(r&&t.endsWith(r))return console.log(` PARSER: Found ratchet: ${r}`),{ratchet:n,ratchetName:r}}return console.log(` PARSER: No ratchet found in "${t}"`),null}function T0(t,e){console.log(` PARSER: Finding blade in "${t}"`),console.log(" PARSER: Available blades:",e.map(s=>({name:s.Blades,line:s.Line})));for(const s of e){const n=s.Blades;if(n&&t===n)return console.log(` PARSER: Found blade: ${n} (${s.Line} line)`),{blade:s,bladeName:n}}return console.log(` PARSER: No blade found for "${t}" in available blades`),null}function K_(t,e){console.log(` PARSER: Finding lockchip in "${t}"`),console.log(" PARSER: Available lockchips:",e.map(n=>n.Lockchip));const s=[...e].sort((n,r)=>{const i=n.Lockchip||"";return(r.Lockchip||"").length-i.length});for(const n of s){const r=n.Lockchip;if(r&&t.startsWith(r))return console.log(` PARSER: Found lockchip: ${r}`),{lockchip:n,lockchipName:r}}return console.log(` PARSER: No lockchip found in "${t}"`),null}function Y_(t,e){console.log(` PARSER: Finding assist blade in "${t}"`),console.log(" PARSER: Available assist blades:",e.map(n=>n["Assist Blade"]));const s=[...e].sort((n,r)=>{const i=n["Assist Blade"]||"";return(r["Assist Blade"]||"").length-i.length});for(const n of s){const r=n["Assist Blade"];if(r&&t.endsWith(r))return console.log(` PARSER: Found assist blade: ${r}`),{assistBlade:n,assistBladeName:r}}return console.log(` PARSER: No assist blade found in "${t}"`),null}function yf(t,e,s){if(!t||!t.trim())return console.log(" PARSER: Empty beyblade name"),{isCustom:!1};console.log(`
 PARSER: Starting to parse "${t}"`);const n=["Basic","Unique","X-Over","Custom"];for(const r of n){if(console.log(` PARSER: Trying ${r} blade line...`),r==="Custom"){const i=q_(t,s);if(i)return console.log(` PARSER: Successfully parsed as ${r} Beyblade`),i}else{const i=V_(t,r,s);if(i)return console.log(` PARSER: Successfully parsed as ${r} Beyblade`),i}console.log(` PARSER: ${r} parsing failed`)}return console.log(` PARSER: All parsing attempts failed for "${t}"`),{isCustom:!1}}function G_({onBack:t}){var B;const[e,s]=k.useState([]),[n,r]=k.useState(""),[i,o]=k.useState(!0),[l,c]=k.useState(!1),[d,u]=k.useState(null),[h,f]=k.useState({blades:[],ratchets:[],bits:[],lockchips:[],assistBlades:[]}),[m,x]=k.useState({blade:{},ratchet:{},bit:{},lockchip:{},mainBlade:{},assistBlade:{}}),[y,b]=k.useState([]),[g,p]=k.useState(""),[v,w]=k.useState(""),[j,N]=k.useState([]),[P,A]=k.useState(null),[S,R]=k.useState([]),[L,V]=k.useState({key:"wilson",direction:"desc"});k.useEffect(()=>{M(),K()},[]),k.useEffect(()=>{n&&Object.keys(h.blades).length>0&&J()},[n,h]),k.useEffect(()=>{g&&v&&y.length>0&&ne()},[g,v,y]);const M=async()=>{try{console.log(" META ANALYSIS: Fetching tournaments...");const{data:C,error:q}=await Y.from("tournaments").select("id, name, status, tournament_date").order("tournament_date",{ascending:!1});if(q)throw q;s(C||[]),console.log(` META ANALYSIS: Loaded ${(C==null?void 0:C.length)||0} tournaments`);const X=C==null?void 0:C.find(se=>se.status==="completed");X&&(r(X.id),console.log(` META ANALYSIS: Auto-selected completed tournament: ${X.name}`))}catch(C){console.error(" META ANALYSIS: Error fetching tournaments:",C),u("Failed to load tournaments")}finally{o(!1)}},K=async()=>{try{console.log(" META ANALYSIS: Fetching all parts data...");const[C,q,X,se,pe]=await Promise.all([Y.from("beypart_blade").select("*"),Y.from("beypart_ratchet").select("*"),Y.from("beypart_bit").select("*"),Y.from("beypart_lockchip").select("*"),Y.from("beypart_assistblade").select("*")]);if(C.error)throw C.error;if(q.error)throw q.error;if(X.error)throw X.error;if(se.error)throw se.error;if(pe.error)throw pe.error;const re={blades:C.data||[],ratchets:q.data||[],bits:X.data||[],lockchips:se.data||[],assistBlades:pe.data||[]};f(re),console.log(" META ANALYSIS: Parts data loaded:",{blades:re.blades.length,ratchets:re.ratchets.length,bits:re.bits.length,lockchips:re.lockchips.length,assistBlades:re.assistBlades.length})}catch(C){console.error(" META ANALYSIS: Error fetching parts data:",C),u("Failed to load parts data")}},J=async()=>{if(n){c(!0),u(null);try{console.log(` META ANALYSIS: Processing data for tournament ${n}`);const{data:C,error:q}=await Y.from("match_results").select("player1_name, player2_name, player1_beyblade, player2_beyblade, player1_blade_line, player2_blade_line, winner_name, outcome, points_awarded").eq("tournament_id",n);if(q)throw q;if(!C||C.length===0){console.log(" META ANALYSIS: No matches found for this tournament"),x({blade:{},ratchet:{},bit:{},lockchip:{},mainBlade:{},assistBlade:{}}),b([]),c(!1);return}console.log(` META ANALYSIS: Processing ${C.length} matches`);const X=[],se={blade:{},ratchet:{},bit:{},lockchip:{},mainBlade:{},assistBlade:{}},pe=(re,D)=>{se[re][D]||(se[re][D]={name:D,usage:0,wins:0,losses:0,winRate:0,wilson:0})};C.forEach(re=>{if(!re.winner_name||!re.player1_name||!re.player2_name)return;const D=yf(re.player1_beyblade,re.player1_blade_line,h),T=yf(re.player2_beyblade,re.player2_blade_line,h),O={player:re.player1_name,opponent:re.player2_name,beyblade:re.player1_beyblade,opponentBeyblade:re.player2_beyblade,isWin:re.winner_name===re.player1_name,outcome:re.outcome||"Unknown",parsedParts:D},H={player:re.player2_name,opponent:re.player1_name,beyblade:re.player2_beyblade,opponentBeyblade:re.player1_beyblade,isWin:re.winner_name===re.player2_name,outcome:re.outcome||"Unknown",parsedParts:T};X.push(O,H);const te=(le,je)=>{Object.entries(le).forEach(([ue,Be])=>{if(ue==="isCustom"||!Be)return;pe(ue,Be);const _=se[ue][Be];_.usage++,je?_.wins++:_.losses++})};te(D,O.isWin),te(T,H.isWin)}),Object.keys(se).forEach(re=>{Object.values(se[re]).forEach(D=>{const T=D.wins+D.losses;D.winRate=T>0?D.wins/T*100:0,D.wilson=xf(D.wins,T)})}),x(se),b(X),console.log(" META ANALYSIS: Data processing complete"),console.log(" META ANALYSIS: Stats summary:",{totalProcessedMatches:X.length,uniqueBlades:Object.keys(se.blade).length,uniqueRatchets:Object.keys(se.ratchet).length,uniqueBits:Object.keys(se.bit).length})}catch(C){console.error(" META ANALYSIS: Error processing tournament data:",C),u("Failed to process tournament data")}finally{c(!1)}}},ne=()=>{console.log(` META ANALYSIS: Generating builds data for ${g}: ${v}`);const C={};y.forEach(X=>{if(X.parsedParts[g]!==v)return;const pe=`${X.beyblade}_${X.player}`;C[pe]||(C[pe]={build:X.beyblade,player:X.player,wins:0,losses:0,winRate:0,wilson:0}),X.isWin?C[pe].wins++:C[pe].losses++});const q=Object.values(C).map(X=>{const se=X.wins+X.losses;return X.winRate=se>0?X.wins/se*100:0,X.wilson=xf(X.wins,se),X}).sort((X,se)=>se.wilson-X.wilson);N(q),console.log(` META ANALYSIS: Generated ${q.length} builds for ${v}`)},G=(C,q)=>{A({build:C,player:q});const X=y.filter(se=>se.beyblade===C&&se.player===q);R(X),console.log(` META ANALYSIS: Showing ${X.length} matches for ${C} by ${q}`)},W=C=>{let q="asc";L.key===C&&L.direction==="asc"&&(q="desc"),V({key:C,direction:q})},I=C=>{const q=Object.values(m[C]||{}).filter(X=>X.usage>0);return L.key?[...q].sort((X,se)=>{const pe=X[L.key],re=se[L.key];if(typeof pe=="number"&&typeof re=="number")return L.direction==="asc"?pe-re:re-pe;const D=String(pe),T=String(re);return L.direction==="asc"?D.localeCompare(T):T.localeCompare(D)}):q.sort((X,se)=>se.wilson-X.wilson)},E=C=>{switch(C){case"blade":return"Blades";case"ratchet":return"Ratchets";case"bit":return"Bits";case"lockchip":return"Lockchips";case"mainBlade":return"Main Blades";case"assistBlade":return"Assist Blades";default:return C}},z=({children:C,sortKey:q})=>a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>W(q),children:a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("span",{children:C}),L.key===q&&(L.direction==="asc"?a.jsx(__,{size:12}):a.jsx(w_,{size:12}))]})});return i?a.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading tournaments..."})]})}):d?a.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-red-500 text-4xl mb-4",children:""}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Error"}),a.jsx("p",{className:"text-red-600 mb-4",children:d}),a.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"Reload Page"})]})}):a.jsx("div",{className:"page-container",children:a.jsxs("div",{className:"content-wrapper",children:[a.jsx("div",{className:"page-header",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"page-title",children:"Tournament Analytics"}),a.jsx("p",{className:"page-subtitle",children:"Comprehensive tournament and player statistics"})]}),a.jsxs("div",{className:"filter-tabs",children:[a.jsx("button",{onClick:()=>{t&&t()},className:"filter-tab filter-tab-inactive",children:"Overview"}),a.jsx("button",{className:"filter-tab filter-tab-active",children:"Meta Analysis"}),a.jsx("button",{onClick:()=>{t&&(t(),setTimeout(()=>{const C=new CustomEvent("navigateToPlayerAnalytics");window.dispatchEvent(C)},50))},className:"filter-tab filter-tab-inactive",children:"Player Analytics"})]})]})}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Tournament Selection"}),a.jsxs("div",{className:"max-w-md",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Tournament"}),a.jsxs("select",{value:n,onChange:C=>r(C.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"-- Select Tournament --"}),e.map(C=>a.jsxs("option",{value:C.id,children:[C.name," (",C.status,")"]},C.id))]})]})]}),n&&a.jsxs(a.Fragment,{children:[l&&a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-8",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mr-3"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-blue-800 font-medium",children:"Processing Tournament Data"}),a.jsx("p",{className:"text-blue-700 text-sm mt-1",children:"Parsing Beyblade names and calculating statistics..."})]})]})}),!l&&y.length===0&&a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 mb-8",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"text-yellow-600 mr-3",children:""}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-yellow-800 font-medium",children:"No Match Data Available"}),a.jsxs("p",{className:"text-yellow-700 text-sm mt-1",children:["This tournament has no completed matches yet. Meta analysis requires match results to generate statistics.",((B=e.find(C=>C.id===n))==null?void 0:B.status)==="upcoming"&&" Try selecting a completed tournament instead."]})]})]})}),!l&&y.length>0&&a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[a.jsx(N0,{className:"mr-2",size:24}),"Builds by Part"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Part Type"}),a.jsxs("select",{value:g,onChange:C=>{p(C.target.value),w(""),N([]),A(null),R([])},className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Select Part Type"}),a.jsx("option",{value:"blade",children:"Blade"}),a.jsx("option",{value:"ratchet",children:"Ratchet"}),a.jsx("option",{value:"bit",children:"Bit"}),a.jsx("option",{value:"lockchip",children:"Lockchip"}),a.jsx("option",{value:"mainBlade",children:"Main Blade"}),a.jsx("option",{value:"assistBlade",children:"Assist Blade"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Part Name"}),a.jsxs("select",{value:v,onChange:C=>w(C.target.value),disabled:!g,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100",children:[a.jsx("option",{value:"",children:"Select Part Name"}),g&&Object.values(m[g]||{}).filter(C=>C.usage>0).sort((C,q)=>q.wilson-C.wilson).map(C=>a.jsx("option",{value:C.name,children:C.name},C.name))]})]})]}),j.length>0&&a.jsxs("div",{className:"mb-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Builds using ",v," (",E(g),")"]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Build"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Wins"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Losses"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Win Rate"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Wilson Score"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:j.map((C,q)=>a.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>G(C.build,C.player),children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-600 hover:text-blue-800",children:C.build}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:C.player}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:C.wins}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:C.losses}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[C.winRate.toFixed(1),"%"]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:C.wilson.toFixed(3)})]},q))})]})})]}),P&&S.length>0&&a.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[a.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Matches for ",a.jsx("strong",{children:P.build})," by ",a.jsx("strong",{children:P.player})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-100",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Result"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Opponent"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Opponent's Bey"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Finish Type"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S.map((C,q)=>a.jsxs("tr",{className:C.isWin?"bg-green-50":"bg-red-50",children:[a.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm font-medium ${C.isWin?"text-green-800":"text-red-800"}`,children:C.isWin?"Win":"Loss"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:C.opponent}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:C.opponentBeyblade}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:C.outcome})]},q))})]})})]})]}),!l&&y.length>0&&a.jsx("div",{className:"space-y-8",children:["blade","ratchet","bit","lockchip","mainBlade","assistBlade"].map(C=>a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 capitalize flex items-center",children:[a.jsx(Eo,{className:"mr-2",size:24}),E(C)]}),Object.keys(m[C]||{}).length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Eo,{size:48,className:"mx-auto text-gray-400 mb-4"}),a.jsxs("p",{className:"text-gray-500",children:["No ",E(C).toLowerCase()," data available"]}),a.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:["No matches used ",E(C).toLowerCase()," from this category"]})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx(z,{sortKey:"name",children:"Name"}),a.jsx(z,{sortKey:"usage",children:"Usage"}),a.jsx(z,{sortKey:"wins",children:"Wins"}),a.jsx(z,{sortKey:"losses",children:"Losses"}),a.jsx(z,{sortKey:"winRate",children:"Win Rate"}),a.jsx(z,{sortKey:"wilson",children:"Wilson Score"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:I(C).map((q,X)=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:q.name}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:q.usage}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:q.wins}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:q.losses}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[q.winRate.toFixed(1),"%"]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:q.wilson.toFixed(3)})]},X))})]})})]},C))})]})]})})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function ta(t){return t+.5|0}const Ws=(t,e,s)=>Math.max(Math.min(t,s),e);function ri(t){return Ws(ta(t*2.55),0,255)}function tn(t){return Ws(ta(t*255),0,255)}function ws(t){return Ws(ta(t/2.55)/100,0,1)}function vf(t){return Ws(ta(t*100),0,100)}const Lt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},ud=[..."0123456789ABCDEF"],Q_=t=>ud[t&15],J_=t=>ud[(t&240)>>4]+ud[t&15],ka=t=>(t&240)>>4===(t&15),X_=t=>ka(t.r)&&ka(t.g)&&ka(t.b)&&ka(t.a);function Z_(t){var e=t.length,s;return t[0]==="#"&&(e===4||e===5?s={r:255&Lt[t[1]]*17,g:255&Lt[t[2]]*17,b:255&Lt[t[3]]*17,a:e===5?Lt[t[4]]*17:255}:(e===7||e===9)&&(s={r:Lt[t[1]]<<4|Lt[t[2]],g:Lt[t[3]]<<4|Lt[t[4]],b:Lt[t[5]]<<4|Lt[t[6]],a:e===9?Lt[t[7]]<<4|Lt[t[8]]:255})),s}const e1=(t,e)=>t<255?e(t):"";function t1(t){var e=X_(t)?Q_:J_;return t?"#"+e(t.r)+e(t.g)+e(t.b)+e1(t.a,e):void 0}const s1=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function A0(t,e,s){const n=e*Math.min(s,1-s),r=(i,o=(i+t/30)%12)=>s-n*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function n1(t,e,s){const n=(r,i=(r+t/60)%6)=>s-s*e*Math.max(Math.min(i,4-i,1),0);return[n(5),n(3),n(1)]}function r1(t,e,s){const n=A0(t,1,.5);let r;for(e+s>1&&(r=1/(e+s),e*=r,s*=r),r=0;r<3;r++)n[r]*=1-e-s,n[r]+=e;return n}function i1(t,e,s,n,r){return t===r?(e-s)/n+(e<s?6:0):e===r?(s-t)/n+2:(t-e)/n+4}function Nu(t){const s=t.r/255,n=t.g/255,r=t.b/255,i=Math.max(s,n,r),o=Math.min(s,n,r),l=(i+o)/2;let c,d,u;return i!==o&&(u=i-o,d=l>.5?u/(2-i-o):u/(i+o),c=i1(s,n,r,u,i),c=c*60+.5),[c|0,d||0,l]}function Su(t,e,s,n){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,s,n)).map(tn)}function Cu(t,e,s){return Su(A0,t,e,s)}function a1(t,e,s){return Su(r1,t,e,s)}function o1(t,e,s){return Su(n1,t,e,s)}function O0(t){return(t%360+360)%360}function l1(t){const e=s1.exec(t);let s=255,n;if(!e)return;e[5]!==n&&(s=e[6]?ri(+e[5]):tn(+e[5]));const r=O0(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?n=a1(r,i,o):e[1]==="hsv"?n=o1(r,i,o):n=Cu(r,i,o),{r:n[0],g:n[1],b:n[2],a:s}}function c1(t,e){var s=Nu(t);s[0]=O0(s[0]+e),s=Cu(s),t.r=s[0],t.g=s[1],t.b=s[2]}function d1(t){if(!t)return;const e=Nu(t),s=e[0],n=vf(e[1]),r=vf(e[2]);return t.a<255?`hsla(${s}, ${n}%, ${r}%, ${ws(t.a)})`:`hsl(${s}, ${n}%, ${r}%)`}const bf={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},wf={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function u1(){const t={},e=Object.keys(wf),s=Object.keys(bf);let n,r,i,o,l;for(n=0;n<e.length;n++){for(o=l=e[n],r=0;r<s.length;r++)i=s[r],l=l.replace(i,bf[i]);i=parseInt(wf[o],16),t[l]=[i>>16&255,i>>8&255,i&255]}return t}let Na;function h1(t){Na||(Na=u1(),Na.transparent=[0,0,0,0]);const e=Na[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const f1=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function m1(t){const e=f1.exec(t);let s=255,n,r,i;if(e){if(e[7]!==n){const o=+e[7];s=e[8]?ri(o):Ws(o*255,0,255)}return n=+e[1],r=+e[3],i=+e[5],n=255&(e[2]?ri(n):Ws(n,0,255)),r=255&(e[4]?ri(r):Ws(r,0,255)),i=255&(e[6]?ri(i):Ws(i,0,255)),{r:n,g:r,b:i,a:s}}}function p1(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${ws(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Ql=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Gn=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function g1(t,e,s){const n=Gn(ws(t.r)),r=Gn(ws(t.g)),i=Gn(ws(t.b));return{r:tn(Ql(n+s*(Gn(ws(e.r))-n))),g:tn(Ql(r+s*(Gn(ws(e.g))-r))),b:tn(Ql(i+s*(Gn(ws(e.b))-i))),a:t.a+s*(e.a-t.a)}}function Sa(t,e,s){if(t){let n=Nu(t);n[e]=Math.max(0,Math.min(n[e]+n[e]*s,e===0?360:1)),n=Cu(n),t.r=n[0],t.g=n[1],t.b=n[2]}}function R0(t,e){return t&&Object.assign(e||{},t)}function _f(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=tn(t[3]))):(e=R0(t,{r:0,g:0,b:0,a:1}),e.a=tn(e.a)),e}function x1(t){return t.charAt(0)==="r"?m1(t):l1(t)}class Wi{constructor(e){if(e instanceof Wi)return e;const s=typeof e;let n;s==="object"?n=_f(e):s==="string"&&(n=Z_(e)||h1(e)||x1(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=R0(this._rgb);return e&&(e.a=ws(e.a)),e}set rgb(e){this._rgb=_f(e)}rgbString(){return this._valid?p1(this._rgb):void 0}hexString(){return this._valid?t1(this._rgb):void 0}hslString(){return this._valid?d1(this._rgb):void 0}mix(e,s){if(e){const n=this.rgb,r=e.rgb;let i;const o=s===i?.5:s,l=2*o-1,c=n.a-r.a,d=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;i=1-d,n.r=255&d*n.r+i*r.r+.5,n.g=255&d*n.g+i*r.g+.5,n.b=255&d*n.b+i*r.b+.5,n.a=o*n.a+(1-o)*r.a,this.rgb=n}return this}interpolate(e,s){return e&&(this._rgb=g1(this._rgb,e._rgb,s)),this}clone(){return new Wi(this.rgb)}alpha(e){return this._rgb.a=tn(e),this}clearer(e){const s=this._rgb;return s.a*=1-e,this}greyscale(){const e=this._rgb,s=ta(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=s,this}opaquer(e){const s=this._rgb;return s.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Sa(this._rgb,2,e),this}darken(e){return Sa(this._rgb,2,-e),this}saturate(e){return Sa(this._rgb,1,e),this}desaturate(e){return Sa(this._rgb,1,-e),this}rotate(e){return c1(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function fs(){}const y1=(()=>{let t=0;return()=>t++})();function Te(t){return t==null}function Ie(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function ve(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function at(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function ns(t,e){return at(t)?t:e}function ge(t,e){return typeof t>"u"?e:t}const v1=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Se(t,e,s){if(t&&typeof t.call=="function")return t.apply(s,e)}function we(t,e,s,n){let r,i,o;if(Ie(t))for(i=t.length,r=0;r<i;r++)e.call(s,t[r],r);else if(ve(t))for(o=Object.keys(t),i=o.length,r=0;r<i;r++)e.call(s,t[o[r]],o[r])}function To(t,e){let s,n,r,i;if(!t||!e||t.length!==e.length)return!1;for(s=0,n=t.length;s<n;++s)if(r=t[s],i=e[s],r.datasetIndex!==i.datasetIndex||r.index!==i.index)return!1;return!0}function Ao(t){if(Ie(t))return t.map(Ao);if(ve(t)){const e=Object.create(null),s=Object.keys(t),n=s.length;let r=0;for(;r<n;++r)e[s[r]]=Ao(t[s[r]]);return e}return t}function M0(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function b1(t,e,s,n){if(!M0(t))return;const r=e[t],i=s[t];ve(r)&&ve(i)?Hi(r,i,n):e[t]=Ao(i)}function Hi(t,e,s){const n=Ie(e)?e:[e],r=n.length;if(!ve(t))return t;s=s||{};const i=s.merger||b1;let o;for(let l=0;l<r;++l){if(o=n[l],!ve(o))continue;const c=Object.keys(o);for(let d=0,u=c.length;d<u;++d)i(c[d],t,o,s)}return t}function bi(t,e){return Hi(t,e,{merger:w1})}function w1(t,e,s){if(!M0(t))return;const n=e[t],r=s[t];ve(n)&&ve(r)?bi(n,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Ao(r))}const jf={"":t=>t,x:t=>t.x,y:t=>t.y};function _1(t){const e=t.split("."),s=[];let n="";for(const r of e)n+=r,n.endsWith("\\")?n=n.slice(0,-1)+".":(s.push(n),n="");return s}function j1(t){const e=_1(t);return s=>{for(const n of e){if(n==="")break;s=s&&s[n]}return s}}function Vi(t,e){return(jf[e]||(jf[e]=j1(e)))(t)}function Pu(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Oo=t=>typeof t<"u",rn=t=>typeof t=="function",kf=(t,e)=>{if(t.size!==e.size)return!1;for(const s of t)if(!e.has(s))return!1;return!0};function k1(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Qe=Math.PI,Tt=2*Qe,N1=Tt+Qe,Ro=Number.POSITIVE_INFINITY,S1=Qe/180,Pt=Qe/2,pn=Qe/4,Nf=Qe*2/3,hd=Math.log10,Pr=Math.sign;function wi(t,e,s){return Math.abs(t-e)<s}function Sf(t){const e=Math.round(t);t=wi(t,e,t/1e3)?e:t;const s=Math.pow(10,Math.floor(hd(t))),n=t/s;return(n<=1?1:n<=2?2:n<=5?5:10)*s}function C1(t){const e=[],s=Math.sqrt(t);let n;for(n=1;n<s;n++)t%n===0&&(e.push(n),e.push(t/n));return s===(s|0)&&e.push(s),e.sort((r,i)=>r-i).pop(),e}function P1(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Mo(t){return!P1(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function E1(t,e){const s=Math.round(t);return s-e<=t&&s+e>=t}function T1(t,e,s){let n,r,i;for(n=0,r=t.length;n<r;n++)i=t[n][s],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function Cn(t){return t*(Qe/180)}function Eu(t){return t*(180/Qe)}function Cf(t){if(!at(t))return;let e=1,s=0;for(;Math.round(t*e)/e!==t;)e*=10,s++;return s}function A1(t,e){const s=e.x-t.x,n=e.y-t.y,r=Math.sqrt(s*s+n*n);let i=Math.atan2(n,s);return i<-.5*Qe&&(i+=Tt),{angle:i,distance:r}}function fd(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function O1(t,e){return(t-e+N1)%Tt-Qe}function St(t){return(t%Tt+Tt)%Tt}function L0(t,e,s,n){const r=St(t),i=St(e),o=St(s),l=St(i-r),c=St(o-r),d=St(r-i),u=St(r-o);return r===i||r===o||n&&i===o||l>c&&d<u}function ks(t,e,s){return Math.max(e,Math.min(s,t))}function R1(t){return ks(t,-32768,32767)}function dr(t,e,s,n=1e-6){return t>=Math.min(e,s)-n&&t<=Math.max(e,s)+n}function Tu(t,e,s){s=s||(o=>t[o]<e);let n=t.length-1,r=0,i;for(;n-r>1;)i=r+n>>1,s(i)?r=i:n=i;return{lo:r,hi:n}}const md=(t,e,s,n)=>Tu(t,s,n?r=>{const i=t[r][e];return i<s||i===s&&t[r+1][e]===s}:r=>t[r][e]<s),M1=(t,e,s)=>Tu(t,s,n=>t[n][e]>=s);function L1(t,e,s){let n=0,r=t.length;for(;n<r&&t[n]<e;)n++;for(;r>n&&t[r-1]>s;)r--;return n>0||r<t.length?t.slice(n,r):t}const D0=["push","pop","shift","splice","unshift"];function D1(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),D0.forEach(s=>{const n="_onData"+Pu(s),r=t[s];Object.defineProperty(t,s,{configurable:!0,enumerable:!1,value(...i){const o=r.apply(this,i);return t._chartjs.listeners.forEach(l=>{typeof l[n]=="function"&&l[n](...i)}),o}})})}function Pf(t,e){const s=t._chartjs;if(!s)return;const n=s.listeners,r=n.indexOf(e);r!==-1&&n.splice(r,1),!(n.length>0)&&(D0.forEach(i=>{delete t[i]}),delete t._chartjs)}function I1(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const I0=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function z0(t,e){let s=[],n=!1;return function(...r){s=r,n||(n=!0,I0.call(window,()=>{n=!1,t.apply(e,s)}))}}function z1(t,e){let s;return function(...n){return e?(clearTimeout(s),s=setTimeout(t,e,n)):t.apply(this,n),e}}const B0=t=>t==="start"?"left":t==="end"?"right":"center",kt=(t,e,s)=>t==="start"?e:t==="end"?s:(e+s)/2,B1=(t,e,s,n)=>t===(n?"left":"right")?s:t==="center"?(e+s)/2:e,Ca=t=>t===0||t===1,Ef=(t,e,s)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Tt/s)),Tf=(t,e,s)=>Math.pow(2,-10*t)*Math.sin((t-e)*Tt/s)+1,_i={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Pt)+1,easeOutSine:t=>Math.sin(t*Pt),easeInOutSine:t=>-.5*(Math.cos(Qe*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Ca(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Ca(t)?t:Ef(t,.075,.3),easeOutElastic:t=>Ca(t)?t:Tf(t,.075,.3),easeInOutElastic(t){return Ca(t)?t:t<.5?.5*Ef(t*2,.1125,.45):.5+.5*Tf(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-_i.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?_i.easeInBounce(t*2)*.5:_i.easeOutBounce(t*2-1)*.5+.5};function Au(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Af(t){return Au(t)?t:new Wi(t)}function Jl(t){return Au(t)?t:new Wi(t).saturate(.5).darken(.1).hexString()}const $1=["x","y","borderWidth","radius","tension"],F1=["color","borderColor","backgroundColor"];function U1(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:F1},numbers:{type:"number",properties:$1}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function W1(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Of=new Map;function H1(t,e){e=e||{};const s=t+JSON.stringify(e);let n=Of.get(s);return n||(n=new Intl.NumberFormat(t,e),Of.set(s,n)),n}function $0(t,e,s){return H1(e,s).format(t)}const F0={values(t){return Ie(t)?t:""+t},numeric(t,e,s){if(t===0)return"0";const n=this.chart.options.locale;let r,i=t;if(s.length>1){const d=Math.max(Math.abs(s[0].value),Math.abs(s[s.length-1].value));(d<1e-4||d>1e15)&&(r="scientific"),i=V1(t,s)}const o=hd(Math.abs(i)),l=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:r,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),$0(t,n,c)},logarithmic(t,e,s){if(t===0)return"0";const n=s[e].significand||t/Math.pow(10,Math.floor(hd(t)));return[1,2,3,5,10,15].includes(n)||e>.8*s.length?F0.numeric.call(this,t,e,s):""}};function V1(t,e){let s=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(s)>=1&&t!==Math.floor(t)&&(s=t-Math.floor(t)),s}var U0={formatters:F0};function q1(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,s)=>s.lineWidth,tickColor:(e,s)=>s.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:U0.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Bn=Object.create(null),pd=Object.create(null);function ji(t,e){if(!e)return t;const s=e.split(".");for(let n=0,r=s.length;n<r;++n){const i=s[n];t=t[i]||(t[i]=Object.create(null))}return t}function Xl(t,e,s){return typeof e=="string"?Hi(ji(t,e),s):Hi(ji(t,""),e)}class K1{constructor(e,s){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,r)=>Jl(r.backgroundColor),this.hoverBorderColor=(n,r)=>Jl(r.borderColor),this.hoverColor=(n,r)=>Jl(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(s)}set(e,s){return Xl(this,e,s)}get(e){return ji(this,e)}describe(e,s){return Xl(pd,e,s)}override(e,s){return Xl(Bn,e,s)}route(e,s,n,r){const i=ji(this,e),o=ji(this,n),l="_"+s;Object.defineProperties(i,{[l]:{value:i[s],writable:!0},[s]:{enumerable:!0,get(){const c=this[l],d=o[r];return ve(c)?Object.assign({},d,c):ge(c,d)},set(c){this[l]=c}}})}apply(e){e.forEach(s=>s(this))}}var ze=new K1({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[U1,W1,q1]);function Y1(t){return!t||Te(t.size)||Te(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Lo(t,e,s,n,r){let i=e[r];return i||(i=e[r]=t.measureText(r).width,s.push(r)),i>n&&(n=i),n}function G1(t,e,s,n){n=n||{};let r=n.data=n.data||{},i=n.garbageCollect=n.garbageCollect||[];n.font!==e&&(r=n.data={},i=n.garbageCollect=[],n.font=e),t.save(),t.font=e;let o=0;const l=s.length;let c,d,u,h,f;for(c=0;c<l;c++)if(h=s[c],h!=null&&!Ie(h))o=Lo(t,r,i,o,h);else if(Ie(h))for(d=0,u=h.length;d<u;d++)f=h[d],f!=null&&!Ie(f)&&(o=Lo(t,r,i,o,f));t.restore();const m=i.length/2;if(m>s.length){for(c=0;c<m;c++)delete r[i[c]];i.splice(0,m)}return o}function gn(t,e,s){const n=t.currentDevicePixelRatio,r=s!==0?Math.max(s/2,.5):0;return Math.round((e-r)*n)/n+r}function Rf(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function gd(t,e,s,n){W0(t,e,s,n,null)}function W0(t,e,s,n,r){let i,o,l,c,d,u,h,f;const m=e.pointStyle,x=e.rotation,y=e.radius;let b=(x||0)*S1;if(m&&typeof m=="object"&&(i=m.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(s,n),t.rotate(b),t.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),t.restore();return}if(!(isNaN(y)||y<=0)){switch(t.beginPath(),m){default:r?t.ellipse(s,n,r/2,y,0,0,Tt):t.arc(s,n,y,0,Tt),t.closePath();break;case"triangle":u=r?r/2:y,t.moveTo(s+Math.sin(b)*u,n-Math.cos(b)*y),b+=Nf,t.lineTo(s+Math.sin(b)*u,n-Math.cos(b)*y),b+=Nf,t.lineTo(s+Math.sin(b)*u,n-Math.cos(b)*y),t.closePath();break;case"rectRounded":d=y*.516,c=y-d,o=Math.cos(b+pn)*c,h=Math.cos(b+pn)*(r?r/2-d:c),l=Math.sin(b+pn)*c,f=Math.sin(b+pn)*(r?r/2-d:c),t.arc(s-h,n-l,d,b-Qe,b-Pt),t.arc(s+f,n-o,d,b-Pt,b),t.arc(s+h,n+l,d,b,b+Pt),t.arc(s-f,n+o,d,b+Pt,b+Qe),t.closePath();break;case"rect":if(!x){c=Math.SQRT1_2*y,u=r?r/2:c,t.rect(s-u,n-c,2*u,2*c);break}b+=pn;case"rectRot":h=Math.cos(b)*(r?r/2:y),o=Math.cos(b)*y,l=Math.sin(b)*y,f=Math.sin(b)*(r?r/2:y),t.moveTo(s-h,n-l),t.lineTo(s+f,n-o),t.lineTo(s+h,n+l),t.lineTo(s-f,n+o),t.closePath();break;case"crossRot":b+=pn;case"cross":h=Math.cos(b)*(r?r/2:y),o=Math.cos(b)*y,l=Math.sin(b)*y,f=Math.sin(b)*(r?r/2:y),t.moveTo(s-h,n-l),t.lineTo(s+h,n+l),t.moveTo(s+f,n-o),t.lineTo(s-f,n+o);break;case"star":h=Math.cos(b)*(r?r/2:y),o=Math.cos(b)*y,l=Math.sin(b)*y,f=Math.sin(b)*(r?r/2:y),t.moveTo(s-h,n-l),t.lineTo(s+h,n+l),t.moveTo(s+f,n-o),t.lineTo(s-f,n+o),b+=pn,h=Math.cos(b)*(r?r/2:y),o=Math.cos(b)*y,l=Math.sin(b)*y,f=Math.sin(b)*(r?r/2:y),t.moveTo(s-h,n-l),t.lineTo(s+h,n+l),t.moveTo(s+f,n-o),t.lineTo(s-f,n+o);break;case"line":o=r?r/2:Math.cos(b)*y,l=Math.sin(b)*y,t.moveTo(s-o,n-l),t.lineTo(s+o,n+l);break;case"dash":t.moveTo(s,n),t.lineTo(s+Math.cos(b)*(r?r/2:y),n+Math.sin(b)*y);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Ns(t,e,s){return s=s||.5,!e||t&&t.x>e.left-s&&t.x<e.right+s&&t.y>e.top-s&&t.y<e.bottom+s}function dl(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function ul(t){t.restore()}function Q1(t,e,s,n,r){if(!e)return t.lineTo(s.x,s.y);if(r==="middle"){const i=(e.x+s.x)/2;t.lineTo(i,e.y),t.lineTo(i,s.y)}else r==="after"!=!!n?t.lineTo(e.x,s.y):t.lineTo(s.x,e.y);t.lineTo(s.x,s.y)}function J1(t,e,s,n){if(!e)return t.lineTo(s.x,s.y);t.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?s.cp2x:s.cp1x,n?s.cp2y:s.cp1y,s.x,s.y)}function X1(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Te(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function Z1(t,e,s,n,r){if(r.strikethrough||r.underline){const i=t.measureText(n),o=e-i.actualBoundingBoxLeft,l=e+i.actualBoundingBoxRight,c=s-i.actualBoundingBoxAscent,d=s+i.actualBoundingBoxDescent,u=r.strikethrough?(c+d)/2:d;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,u),t.lineTo(l,u),t.stroke()}}function ej(t,e){const s=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=s}function Er(t,e,s,n,r,i={}){const o=Ie(e)?e:[e],l=i.strokeWidth>0&&i.strokeColor!=="";let c,d;for(t.save(),t.font=r.string,X1(t,i),c=0;c<o.length;++c)d=o[c],i.backdrop&&ej(t,i.backdrop),l&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),Te(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(d,s,n,i.maxWidth)),t.fillText(d,s,n,i.maxWidth),Z1(t,s,n,d,i),n+=Number(r.lineHeight);t.restore()}function Do(t,e){const{x:s,y:n,w:r,h:i,radius:o}=e;t.arc(s+o.topLeft,n+o.topLeft,o.topLeft,1.5*Qe,Qe,!0),t.lineTo(s,n+i-o.bottomLeft),t.arc(s+o.bottomLeft,n+i-o.bottomLeft,o.bottomLeft,Qe,Pt,!0),t.lineTo(s+r-o.bottomRight,n+i),t.arc(s+r-o.bottomRight,n+i-o.bottomRight,o.bottomRight,Pt,0,!0),t.lineTo(s+r,n+o.topRight),t.arc(s+r-o.topRight,n+o.topRight,o.topRight,0,-Pt,!0),t.lineTo(s+o.topLeft,n)}const tj=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,sj=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function nj(t,e){const s=(""+t).match(tj);if(!s||s[1]==="normal")return e*1.2;switch(t=+s[2],s[3]){case"px":return t;case"%":t/=100;break}return e*t}const rj=t=>+t||0;function H0(t,e){const s={},n=ve(e),r=n?Object.keys(e):e,i=ve(t)?n?o=>ge(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of r)s[o]=rj(i(o));return s}function ij(t){return H0(t,{top:"y",right:"x",bottom:"y",left:"x"})}function xr(t){return H0(t,["topLeft","topRight","bottomLeft","bottomRight"])}function ut(t){const e=ij(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Xe(t,e){t=t||{},e=e||ze.font;let s=ge(t.size,e.size);typeof s=="string"&&(s=parseInt(s,10));let n=ge(t.style,e.style);n&&!(""+n).match(sj)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const r={family:ge(t.family,e.family),lineHeight:nj(ge(t.lineHeight,e.lineHeight),s),size:s,style:n,weight:ge(t.weight,e.weight),string:""};return r.string=Y1(r),r}function Pa(t,e,s,n){let r,i,o;for(r=0,i=t.length;r<i;++r)if(o=t[r],o!==void 0&&o!==void 0)return o}function aj(t,e,s){const{min:n,max:r}=t,i=v1(e,(r-n)/2),o=(l,c)=>s&&l===0?0:l+c;return{min:o(n,-Math.abs(i)),max:o(r,i)}}function un(t,e){return Object.assign(Object.create(t),e)}function Ou(t,e=[""],s,n,r=()=>t[0]){const i=s||t;typeof n>"u"&&(n=Y0("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:n,_getTarget:r,override:l=>Ou([l,...t],e,i,n)};return new Proxy(o,{deleteProperty(l,c){return delete l[c],delete l._keys,delete t[0][c],!0},get(l,c){return q0(l,c,()=>mj(c,e,t,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(l,c){return Lf(l).includes(c)},ownKeys(l){return Lf(l)},set(l,c,d){const u=l._storage||(l._storage=r());return l[c]=u[c]=d,delete l._keys,!0}})}function Tr(t,e,s,n){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:s,_stack:new Set,_descriptors:V0(t,n),setContext:i=>Tr(t,i,s,n),override:i=>Tr(t.override(i),e,s,n)};return new Proxy(r,{deleteProperty(i,o){return delete i[o],delete t[o],!0},get(i,o,l){return q0(i,o,()=>lj(i,o,l))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(i,o,l){return t[o]=l,delete i[o],!0}})}function V0(t,e={scriptable:!0,indexable:!0}){const{_scriptable:s=e.scriptable,_indexable:n=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:s,indexable:n,isScriptable:rn(s)?s:()=>s,isIndexable:rn(n)?n:()=>n}}const oj=(t,e)=>t?t+Pu(e):e,Ru=(t,e)=>ve(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function q0(t,e,s){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const n=s();return t[e]=n,n}function lj(t,e,s){const{_proxy:n,_context:r,_subProxy:i,_descriptors:o}=t;let l=n[e];return rn(l)&&o.isScriptable(e)&&(l=cj(e,l,t,s)),Ie(l)&&l.length&&(l=dj(e,l,t,o.isIndexable)),Ru(e,l)&&(l=Tr(l,r,i&&i[e],o)),l}function cj(t,e,s,n){const{_proxy:r,_context:i,_subProxy:o,_stack:l}=s;if(l.has(t))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+t);l.add(t);let c=e(i,o||n);return l.delete(t),Ru(t,c)&&(c=Mu(r._scopes,r,t,c)),c}function dj(t,e,s,n){const{_proxy:r,_context:i,_subProxy:o,_descriptors:l}=s;if(typeof i.index<"u"&&n(t))return e[i.index%e.length];if(ve(e[0])){const c=e,d=r._scopes.filter(u=>u!==c);e=[];for(const u of c){const h=Mu(d,r,t,u);e.push(Tr(h,i,o&&o[t],l))}}return e}function K0(t,e,s){return rn(t)?t(e,s):t}const uj=(t,e)=>t===!0?e:typeof t=="string"?Vi(e,t):void 0;function hj(t,e,s,n,r){for(const i of e){const o=uj(s,i);if(o){t.add(o);const l=K0(o._fallback,s,r);if(typeof l<"u"&&l!==s&&l!==n)return l}else if(o===!1&&typeof n<"u"&&s!==n)return null}return!1}function Mu(t,e,s,n){const r=e._rootScopes,i=K0(e._fallback,s,n),o=[...t,...r],l=new Set;l.add(n);let c=Mf(l,o,s,i||s,n);return c===null||typeof i<"u"&&i!==s&&(c=Mf(l,o,i,c,n),c===null)?!1:Ou(Array.from(l),[""],r,i,()=>fj(e,s,n))}function Mf(t,e,s,n,r){for(;s;)s=hj(t,e,s,n,r);return s}function fj(t,e,s){const n=t._getTarget();e in n||(n[e]={});const r=n[e];return Ie(r)&&ve(s)?s:r||{}}function mj(t,e,s,n){let r;for(const i of e)if(r=Y0(oj(i,t),s),typeof r<"u")return Ru(t,r)?Mu(s,n,t,r):r}function Y0(t,e){for(const s of e){if(!s)continue;const n=s[t];if(typeof n<"u")return n}}function Lf(t){let e=t._keys;return e||(e=t._keys=pj(t._scopes)),e}function pj(t){const e=new Set;for(const s of t)for(const n of Object.keys(s).filter(r=>!r.startsWith("_")))e.add(n);return Array.from(e)}function gj(t,e,s,n){const{iScale:r}=t,{key:i="r"}=this._parsing,o=new Array(n);let l,c,d,u;for(l=0,c=n;l<c;++l)d=l+s,u=e[d],o[l]={r:r.parse(Vi(u,i),d)};return o}const xj=Number.EPSILON||1e-14,Ar=(t,e)=>e<t.length&&!t[e].skip&&t[e],G0=t=>t==="x"?"y":"x";function yj(t,e,s,n){const r=t.skip?e:t,i=e,o=s.skip?e:s,l=fd(i,r),c=fd(o,i);let d=l/(l+c),u=c/(l+c);d=isNaN(d)?0:d,u=isNaN(u)?0:u;const h=n*d,f=n*u;return{previous:{x:i.x-h*(o.x-r.x),y:i.y-h*(o.y-r.y)},next:{x:i.x+f*(o.x-r.x),y:i.y+f*(o.y-r.y)}}}function vj(t,e,s){const n=t.length;let r,i,o,l,c,d=Ar(t,0);for(let u=0;u<n-1;++u)if(c=d,d=Ar(t,u+1),!(!c||!d)){if(wi(e[u],0,xj)){s[u]=s[u+1]=0;continue}r=s[u]/e[u],i=s[u+1]/e[u],l=Math.pow(r,2)+Math.pow(i,2),!(l<=9)&&(o=3/Math.sqrt(l),s[u]=r*o*e[u],s[u+1]=i*o*e[u])}}function bj(t,e,s="x"){const n=G0(s),r=t.length;let i,o,l,c=Ar(t,0);for(let d=0;d<r;++d){if(o=l,l=c,c=Ar(t,d+1),!l)continue;const u=l[s],h=l[n];o&&(i=(u-o[s])/3,l[`cp1${s}`]=u-i,l[`cp1${n}`]=h-i*e[d]),c&&(i=(c[s]-u)/3,l[`cp2${s}`]=u+i,l[`cp2${n}`]=h+i*e[d])}}function wj(t,e="x"){const s=G0(e),n=t.length,r=Array(n).fill(0),i=Array(n);let o,l,c,d=Ar(t,0);for(o=0;o<n;++o)if(l=c,c=d,d=Ar(t,o+1),!!c){if(d){const u=d[e]-c[e];r[o]=u!==0?(d[s]-c[s])/u:0}i[o]=l?d?Pr(r[o-1])!==Pr(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}vj(t,r,i),bj(t,i,e)}function Ea(t,e,s){return Math.max(Math.min(t,s),e)}function _j(t,e){let s,n,r,i,o,l=Ns(t[0],e);for(s=0,n=t.length;s<n;++s)o=i,i=l,l=s<n-1&&Ns(t[s+1],e),i&&(r=t[s],o&&(r.cp1x=Ea(r.cp1x,e.left,e.right),r.cp1y=Ea(r.cp1y,e.top,e.bottom)),l&&(r.cp2x=Ea(r.cp2x,e.left,e.right),r.cp2y=Ea(r.cp2y,e.top,e.bottom)))}function jj(t,e,s,n,r){let i,o,l,c;if(e.spanGaps&&(t=t.filter(d=>!d.skip)),e.cubicInterpolationMode==="monotone")wj(t,r);else{let d=n?t[t.length-1]:t[0];for(i=0,o=t.length;i<o;++i)l=t[i],c=yj(d,l,t[Math.min(i+1,o-(n?0:1))%o],e.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,d=l}e.capBezierPoints&&_j(t,s)}function Lu(){return typeof window<"u"&&typeof document<"u"}function Du(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Io(t,e,s){let n;return typeof t=="string"?(n=parseInt(t,10),t.indexOf("%")!==-1&&(n=n/100*e.parentNode[s])):n=t,n}const hl=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function kj(t,e){return hl(t).getPropertyValue(e)}const Nj=["top","right","bottom","left"];function An(t,e,s){const n={};s=s?"-"+s:"";for(let r=0;r<4;r++){const i=Nj[r];n[i]=parseFloat(t[e+"-"+i+s])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const Sj=(t,e,s)=>(t>0||e>0)&&(!s||!s.shadowRoot);function Cj(t,e){const s=t.touches,n=s&&s.length?s[0]:t,{offsetX:r,offsetY:i}=n;let o=!1,l,c;if(Sj(r,i,t.target))l=r,c=i;else{const d=e.getBoundingClientRect();l=n.clientX-d.left,c=n.clientY-d.top,o=!0}return{x:l,y:c,box:o}}function wn(t,e){if("native"in t)return t;const{canvas:s,currentDevicePixelRatio:n}=e,r=hl(s),i=r.boxSizing==="border-box",o=An(r,"padding"),l=An(r,"border","width"),{x:c,y:d,box:u}=Cj(t,s),h=o.left+(u&&l.left),f=o.top+(u&&l.top);let{width:m,height:x}=e;return i&&(m-=o.width+l.width,x-=o.height+l.height),{x:Math.round((c-h)/m*s.width/n),y:Math.round((d-f)/x*s.height/n)}}function Pj(t,e,s){let n,r;if(e===void 0||s===void 0){const i=t&&Du(t);if(!i)e=t.clientWidth,s=t.clientHeight;else{const o=i.getBoundingClientRect(),l=hl(i),c=An(l,"border","width"),d=An(l,"padding");e=o.width-d.width-c.width,s=o.height-d.height-c.height,n=Io(l.maxWidth,i,"clientWidth"),r=Io(l.maxHeight,i,"clientHeight")}}return{width:e,height:s,maxWidth:n||Ro,maxHeight:r||Ro}}const Ta=t=>Math.round(t*10)/10;function Ej(t,e,s,n){const r=hl(t),i=An(r,"margin"),o=Io(r.maxWidth,t,"clientWidth")||Ro,l=Io(r.maxHeight,t,"clientHeight")||Ro,c=Pj(t,e,s);let{width:d,height:u}=c;if(r.boxSizing==="content-box"){const f=An(r,"border","width"),m=An(r,"padding");d-=m.width+f.width,u-=m.height+f.height}return d=Math.max(0,d-i.width),u=Math.max(0,n?d/n:u-i.height),d=Ta(Math.min(d,o,c.maxWidth)),u=Ta(Math.min(u,l,c.maxHeight)),d&&!u&&(u=Ta(d/2)),(e!==void 0||s!==void 0)&&n&&c.height&&u>c.height&&(u=c.height,d=Ta(Math.floor(u*n))),{width:d,height:u}}function Df(t,e,s){const n=e||1,r=Math.floor(t.height*n),i=Math.floor(t.width*n);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(s||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==n||o.height!==r||o.width!==i?(t.currentDevicePixelRatio=n,o.height=r,o.width=i,t.ctx.setTransform(n,0,0,n,0,0),!0):!1}const Tj=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Lu()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function If(t,e){const s=kj(t,e),n=s&&s.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function _n(t,e,s,n){return{x:t.x+s*(e.x-t.x),y:t.y+s*(e.y-t.y)}}function Aj(t,e,s,n){return{x:t.x+s*(e.x-t.x),y:n==="middle"?s<.5?t.y:e.y:n==="after"?s<1?t.y:e.y:s>0?e.y:t.y}}function Oj(t,e,s,n){const r={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},o=_n(t,r,s),l=_n(r,i,s),c=_n(i,e,s),d=_n(o,l,s),u=_n(l,c,s);return _n(d,u,s)}const Rj=function(t,e){return{x(s){return t+t+e-s},setWidth(s){e=s},textAlign(s){return s==="center"?s:s==="right"?"left":"right"},xPlus(s,n){return s-n},leftForLtr(s,n){return s-n}}},Mj=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function yr(t,e,s){return t?Rj(e,s):Mj()}function Q0(t,e){let s,n;(e==="ltr"||e==="rtl")&&(s=t.canvas.style,n=[s.getPropertyValue("direction"),s.getPropertyPriority("direction")],s.setProperty("direction",e,"important"),t.prevTextDirection=n)}function J0(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function X0(t){return t==="angle"?{between:L0,compare:O1,normalize:St}:{between:dr,compare:(e,s)=>e-s,normalize:e=>e}}function zf({start:t,end:e,count:s,loop:n,style:r}){return{start:t%s,end:e%s,loop:n&&(e-t+1)%s===0,style:r}}function Lj(t,e,s){const{property:n,start:r,end:i}=s,{between:o,normalize:l}=X0(n),c=e.length;let{start:d,end:u,loop:h}=t,f,m;if(h){for(d+=c,u+=c,f=0,m=c;f<m&&o(l(e[d%c][n]),r,i);++f)d--,u--;d%=c,u%=c}return u<d&&(u+=c),{start:d,end:u,loop:h,style:t.style}}function Z0(t,e,s){if(!s)return[t];const{property:n,start:r,end:i}=s,o=e.length,{compare:l,between:c,normalize:d}=X0(n),{start:u,end:h,loop:f,style:m}=Lj(t,e,s),x=[];let y=!1,b=null,g,p,v;const w=()=>c(r,v,g)&&l(r,v)!==0,j=()=>l(i,g)===0||c(i,v,g),N=()=>y||w(),P=()=>!y||j();for(let A=u,S=u;A<=h;++A)p=e[A%o],!p.skip&&(g=d(p[n]),g!==v&&(y=c(g,r,i),b===null&&N()&&(b=l(g,r)===0?A:S),b!==null&&P()&&(x.push(zf({start:b,end:A,loop:f,count:o,style:m})),b=null),S=A,v=g));return b!==null&&x.push(zf({start:b,end:h,loop:f,count:o,style:m})),x}function ex(t,e){const s=[],n=t.segments;for(let r=0;r<n.length;r++){const i=Z0(n[r],t.points,e);i.length&&s.push(...i)}return s}function Dj(t,e,s,n){let r=0,i=e-1;if(s&&!n)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,s&&(i+=r);i>r&&t[i%e].skip;)i--;return i%=e,{start:r,end:i}}function Ij(t,e,s,n){const r=t.length,i=[];let o=e,l=t[e],c;for(c=e+1;c<=s;++c){const d=t[c%r];d.skip||d.stop?l.skip||(n=!1,i.push({start:e%r,end:(c-1)%r,loop:n}),e=o=d.stop?c:null):(o=c,l.skip&&(e=c)),l=d}return o!==null&&i.push({start:e%r,end:o%r,loop:n}),i}function zj(t,e){const s=t.points,n=t.options.spanGaps,r=s.length;if(!r)return[];const i=!!t._loop,{start:o,end:l}=Dj(s,r,i,n);if(n===!0)return Bf(t,[{start:o,end:l,loop:i}],s,e);const c=l<o?l+r:l,d=!!t._fullLoop&&o===0&&l===r-1;return Bf(t,Ij(s,o,c,d),s,e)}function Bf(t,e,s,n){return!n||!n.setContext||!s?e:Bj(t,e,s,n)}function Bj(t,e,s,n){const r=t._chart.getContext(),i=$f(t.options),{_datasetIndex:o,options:{spanGaps:l}}=t,c=s.length,d=[];let u=i,h=e[0].start,f=h;function m(x,y,b,g){const p=l?-1:1;if(x!==y){for(x+=c;s[x%c].skip;)x-=p;for(;s[y%c].skip;)y+=p;x%c!==y%c&&(d.push({start:x%c,end:y%c,loop:b,style:g}),u=g,h=y%c)}}for(const x of e){h=l?h:x.start;let y=s[h%c],b;for(f=h+1;f<=x.end;f++){const g=s[f%c];b=$f(n.setContext(un(r,{type:"segment",p0:y,p1:g,p0DataIndex:(f-1)%c,p1DataIndex:f%c,datasetIndex:o}))),$j(b,u)&&m(h,f-1,x.loop,u),y=g,u=b}h<f-1&&m(h,f-1,x.loop,u)}return d}function $f(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function $j(t,e){if(!e)return!1;const s=[],n=function(r,i){return Au(i)?(s.includes(i)||s.push(i),s.indexOf(i)):i};return JSON.stringify(t,n)!==JSON.stringify(e,n)}function Aa(t,e,s){return t.options.clip?t[s]:e[s]}function Fj(t,e){const{xScale:s,yScale:n}=t;return s&&n?{left:Aa(s,e,"left"),right:Aa(s,e,"right"),top:Aa(n,e,"top"),bottom:Aa(n,e,"bottom")}:e}function tx(t,e){const s=e._clip;if(s.disabled)return!1;const n=Fj(e,t.chartArea);return{left:s.left===!1?0:n.left-(s.left===!0?0:s.left),right:s.right===!1?t.width:n.right+(s.right===!0?0:s.right),top:s.top===!1?0:n.top-(s.top===!0?0:s.top),bottom:s.bottom===!1?t.height:n.bottom+(s.bottom===!0?0:s.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class Uj{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,s,n,r){const i=s.listeners[r],o=s.duration;i.forEach(l=>l({chart:e,initial:s.initial,numSteps:o,currentStep:Math.min(n-s.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=I0.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let s=0;this._charts.forEach((n,r)=>{if(!n.running||!n.items.length)return;const i=n.items;let o=i.length-1,l=!1,c;for(;o>=0;--o)c=i[o],c._active?(c._total>n.duration&&(n.duration=c._total),c.tick(e),l=!0):(i[o]=i[i.length-1],i.pop());l&&(r.draw(),this._notify(r,n,e,"progress")),i.length||(n.running=!1,this._notify(r,n,e,"complete"),n.initial=!1),s+=i.length}),this._lastDate=e,s===0&&(this._running=!1)}_getAnims(e){const s=this._charts;let n=s.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},s.set(e,n)),n}listen(e,s,n){this._getAnims(e).listeners[s].push(n)}add(e,s){!s||!s.length||this._getAnims(e).items.push(...s)}has(e){return this._getAnims(e).items.length>0}start(e){const s=this._charts.get(e);s&&(s.running=!0,s.start=Date.now(),s.duration=s.items.reduce((n,r)=>Math.max(n,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const s=this._charts.get(e);return!(!s||!s.running||!s.items.length)}stop(e){const s=this._charts.get(e);if(!s||!s.items.length)return;const n=s.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();s.items=[],this._notify(e,s,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var ps=new Uj;const Ff="transparent",Wj={boolean(t,e,s){return s>.5?e:t},color(t,e,s){const n=Af(t||Ff),r=n.valid&&Af(e||Ff);return r&&r.valid?r.mix(n,s).hexString():e},number(t,e,s){return t+(e-t)*s}};class Hj{constructor(e,s,n,r){const i=s[n];r=Pa([e.to,r,i,e.from]);const o=Pa([e.from,i,r]);this._active=!0,this._fn=e.fn||Wj[e.type||typeof o],this._easing=_i[e.easing]||_i.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=s,this._prop=n,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,s,n){if(this._active){this._notify(!1);const r=this._target[this._prop],i=n-this._start,o=this._duration-i;this._start=n,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=Pa([e.to,s,r,e.from]),this._from=Pa([e.from,r,s])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const s=e-this._start,n=this._duration,r=this._prop,i=this._from,o=this._loop,l=this._to;let c;if(this._active=i!==l&&(o||s<n),!this._active){this._target[r]=l,this._notify(!0);return}if(s<0){this._target[r]=i;return}c=s/n%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[r]=this._fn(i,l,c)}wait(){const e=this._promises||(this._promises=[]);return new Promise((s,n)=>{e.push({res:s,rej:n})})}_notify(e){const s=e?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][s]()}}class sx{constructor(e,s){this._chart=e,this._properties=new Map,this.configure(s)}configure(e){if(!ve(e))return;const s=Object.keys(ze.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const i=e[r];if(!ve(i))return;const o={};for(const l of s)o[l]=i[l];(Ie(i.properties)&&i.properties||[r]).forEach(l=>{(l===r||!n.has(l))&&n.set(l,o)})})}_animateOptions(e,s){const n=s.options,r=qj(e,n);if(!r)return[];const i=this._createAnimations(r,n);return n.$shared&&Vj(e.options.$animations,n).then(()=>{e.options=n},()=>{}),i}_createAnimations(e,s){const n=this._properties,r=[],i=e.$animations||(e.$animations={}),o=Object.keys(s),l=Date.now();let c;for(c=o.length-1;c>=0;--c){const d=o[c];if(d.charAt(0)==="$")continue;if(d==="options"){r.push(...this._animateOptions(e,s));continue}const u=s[d];let h=i[d];const f=n.get(d);if(h)if(f&&h.active()){h.update(f,u,l);continue}else h.cancel();if(!f||!f.duration){e[d]=u;continue}i[d]=h=new Hj(f,e,d,u),r.push(h)}return r}update(e,s){if(this._properties.size===0){Object.assign(e,s);return}const n=this._createAnimations(e,s);if(n.length)return ps.add(this._chart,n),!0}}function Vj(t,e){const s=[],n=Object.keys(e);for(let r=0;r<n.length;r++){const i=t[n[r]];i&&i.active()&&s.push(i.wait())}return Promise.all(s)}function qj(t,e){if(!e)return;let s=t.options;if(!s){t.options=e;return}return s.$shared&&(t.options=s=Object.assign({},s,{$shared:!1,$animations:{}})),s}function Uf(t,e){const s=t&&t.options||{},n=s.reverse,r=s.min===void 0?e:0,i=s.max===void 0?e:0;return{start:n?i:r,end:n?r:i}}function Kj(t,e,s){if(s===!1)return!1;const n=Uf(t,s),r=Uf(e,s);return{top:r.end,right:n.end,bottom:r.start,left:n.start}}function Yj(t){let e,s,n,r;return ve(t)?(e=t.top,s=t.right,n=t.bottom,r=t.left):e=s=n=r=t,{top:e,right:s,bottom:n,left:r,disabled:t===!1}}function nx(t,e){const s=[],n=t._getSortedDatasetMetas(e);let r,i;for(r=0,i=n.length;r<i;++r)s.push(n[r].index);return s}function Wf(t,e,s,n={}){const r=t.keys,i=n.mode==="single";let o,l,c,d;if(e===null)return;let u=!1;for(o=0,l=r.length;o<l;++o){if(c=+r[o],c===s){if(u=!0,n.all)continue;break}d=t.values[c],at(d)&&(i||e===0||Pr(e)===Pr(d))&&(e+=d)}return!u&&!n.all?0:e}function Gj(t,e){const{iScale:s,vScale:n}=e,r=s.axis==="x"?"x":"y",i=n.axis==="x"?"x":"y",o=Object.keys(t),l=new Array(o.length);let c,d,u;for(c=0,d=o.length;c<d;++c)u=o[c],l[c]={[r]:u,[i]:t[u]};return l}function Zl(t,e){const s=t&&t.options.stacked;return s||s===void 0&&e.stack!==void 0}function Qj(t,e,s){return`${t.id}.${e.id}.${s.stack||s.type}`}function Jj(t){const{min:e,max:s,minDefined:n,maxDefined:r}=t.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:r?s:Number.POSITIVE_INFINITY}}function Xj(t,e,s){const n=t[e]||(t[e]={});return n[s]||(n[s]={})}function Hf(t,e,s,n){for(const r of e.getMatchingVisibleMetas(n).reverse()){const i=t[r.index];if(s&&i>0||!s&&i<0)return r.index}return null}function Vf(t,e){const{chart:s,_cachedMeta:n}=t,r=s._stacks||(s._stacks={}),{iScale:i,vScale:o,index:l}=n,c=i.axis,d=o.axis,u=Qj(i,o,n),h=e.length;let f;for(let m=0;m<h;++m){const x=e[m],{[c]:y,[d]:b}=x,g=x._stacks||(x._stacks={});f=g[d]=Xj(r,u,y),f[l]=b,f._top=Hf(f,o,!0,n.type),f._bottom=Hf(f,o,!1,n.type);const p=f._visualValues||(f._visualValues={});p[l]=b}}function ec(t,e){const s=t.scales;return Object.keys(s).filter(n=>s[n].axis===e).shift()}function Zj(t,e){return un(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function e2(t,e,s){return un(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:s,index:e,mode:"default",type:"data"})}function Kr(t,e){const s=t.controller.index,n=t.vScale&&t.vScale.axis;if(n){e=e||t._parsed;for(const r of e){const i=r._stacks;if(!i||i[n]===void 0||i[n][s]===void 0)return;delete i[n][s],i[n]._visualValues!==void 0&&i[n]._visualValues[s]!==void 0&&delete i[n]._visualValues[s]}}}const tc=t=>t==="reset"||t==="none",qf=(t,e)=>e?t:Object.assign({},t),t2=(t,e,s)=>t&&!e.hidden&&e._stacked&&{keys:nx(s,!0),values:null};class ki{constructor(e,s){this.chart=e,this._ctx=e.ctx,this.index=s,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Zl(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Kr(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,s=this._cachedMeta,n=this.getDataset(),r=(h,f,m,x)=>h==="x"?f:h==="r"?x:m,i=s.xAxisID=ge(n.xAxisID,ec(e,"x")),o=s.yAxisID=ge(n.yAxisID,ec(e,"y")),l=s.rAxisID=ge(n.rAxisID,ec(e,"r")),c=s.indexAxis,d=s.iAxisID=r(c,i,o,l),u=s.vAxisID=r(c,o,i,l);s.xScale=this.getScaleForId(i),s.yScale=this.getScaleForId(o),s.rScale=this.getScaleForId(l),s.iScale=this.getScaleForId(d),s.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const s=this._cachedMeta;return e===s.iScale?s.vScale:s.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Pf(this._data,this),e._stacked&&Kr(e)}_dataCheck(){const e=this.getDataset(),s=e.data||(e.data=[]),n=this._data;if(ve(s)){const r=this._cachedMeta;this._data=Gj(s,r)}else if(n!==s){if(n){Pf(n,this);const r=this._cachedMeta;Kr(r),r._parsed=[]}s&&Object.isExtensible(s)&&D1(s,this),this._syncList=[],this._data=s}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const s=this._cachedMeta,n=this.getDataset();let r=!1;this._dataCheck();const i=s._stacked;s._stacked=Zl(s.vScale,s),s.stack!==n.stack&&(r=!0,Kr(s),s.stack=n.stack),this._resyncElements(e),(r||i!==s._stacked)&&(Vf(this,s._parsed),s._stacked=Zl(s.vScale,s))}configure(){const e=this.chart.config,s=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),s,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,s){const{_cachedMeta:n,_data:r}=this,{iScale:i,_stacked:o}=n,l=i.axis;let c=e===0&&s===r.length?!0:n._sorted,d=e>0&&n._parsed[e-1],u,h,f;if(this._parsing===!1)n._parsed=r,n._sorted=!0,f=r;else{Ie(r[e])?f=this.parseArrayData(n,r,e,s):ve(r[e])?f=this.parseObjectData(n,r,e,s):f=this.parsePrimitiveData(n,r,e,s);const m=()=>h[l]===null||d&&h[l]<d[l];for(u=0;u<s;++u)n._parsed[u+e]=h=f[u],c&&(m()&&(c=!1),d=h);n._sorted=c}o&&Vf(this,f)}parsePrimitiveData(e,s,n,r){const{iScale:i,vScale:o}=e,l=i.axis,c=o.axis,d=i.getLabels(),u=i===o,h=new Array(r);let f,m,x;for(f=0,m=r;f<m;++f)x=f+n,h[f]={[l]:u||i.parse(d[x],x),[c]:o.parse(s[x],x)};return h}parseArrayData(e,s,n,r){const{xScale:i,yScale:o}=e,l=new Array(r);let c,d,u,h;for(c=0,d=r;c<d;++c)u=c+n,h=s[u],l[c]={x:i.parse(h[0],u),y:o.parse(h[1],u)};return l}parseObjectData(e,s,n,r){const{xScale:i,yScale:o}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=new Array(r);let u,h,f,m;for(u=0,h=r;u<h;++u)f=u+n,m=s[f],d[u]={x:i.parse(Vi(m,l),f),y:o.parse(Vi(m,c),f)};return d}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,s,n){const r=this.chart,i=this._cachedMeta,o=s[e.axis],l={keys:nx(r,!0),values:s._stacks[e.axis]._visualValues};return Wf(l,o,i.index,{mode:n})}updateRangeFromParsed(e,s,n,r){const i=n[s.axis];let o=i===null?NaN:i;const l=r&&n._stacks[s.axis];r&&l&&(r.values=l,o=Wf(r,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,s){const n=this._cachedMeta,r=n._parsed,i=n._sorted&&e===n.iScale,o=r.length,l=this._getOtherScale(e),c=t2(s,n,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=Jj(l);let f,m;function x(){m=r[f];const y=m[l.axis];return!at(m[e.axis])||u>y||h<y}for(f=0;f<o&&!(!x()&&(this.updateRangeFromParsed(d,e,m,c),i));++f);if(i){for(f=o-1;f>=0;--f)if(!x()){this.updateRangeFromParsed(d,e,m,c);break}}return d}getAllParsedValues(e){const s=this._cachedMeta._parsed,n=[];let r,i,o;for(r=0,i=s.length;r<i;++r)o=s[r][e.axis],at(o)&&n.push(o);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const s=this._cachedMeta,n=s.iScale,r=s.vScale,i=this.getParsed(e);return{label:n?""+n.getLabelForValue(i[n.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(e){const s=this._cachedMeta;this.update(e||"default"),s._clip=Yj(ge(this.options.clip,Kj(s.xScale,s.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,s=this.chart,n=this._cachedMeta,r=n.data||[],i=s.chartArea,o=[],l=this._drawStart||0,c=this._drawCount||r.length-l,d=this.options.drawActiveElementsOnTop;let u;for(n.dataset&&n.dataset.draw(e,i,l,c),u=l;u<l+c;++u){const h=r[u];h.hidden||(h.active&&d?o.push(h):h.draw(e,i))}for(u=0;u<o.length;++u)o[u].draw(e,i)}getStyle(e,s){const n=s?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,s,n){const r=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=e2(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=r.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=Zj(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!s,i.mode=n,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,s){return this._resolveElementOptions(this.dataElementType.id,s,e)}_resolveElementOptions(e,s="default",n){const r=s==="active",i=this._cachedDataOpts,o=e+"-"+s,l=i[o],c=this.enableOptionSharing&&Oo(n);if(l)return qf(l,c);const d=this.chart.config,u=d.datasetElementScopeKeys(this._type,e),h=r?[`${e}Hover`,"hover",e,""]:[e,""],f=d.getOptionScopes(this.getDataset(),u),m=Object.keys(ze.elements[e]),x=()=>this.getContext(n,r,s),y=d.resolveNamedOptions(f,m,x,h);return y.$shared&&(y.$shared=c,i[o]=Object.freeze(qf(y,c))),y}_resolveAnimations(e,s,n){const r=this.chart,i=this._cachedDataOpts,o=`animation-${s}`,l=i[o];if(l)return l;let c;if(r.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,s),f=u.getOptionScopes(this.getDataset(),h);c=u.createResolver(f,this.getContext(e,n,s))}const d=new sx(r,c&&c.animations);return c&&c._cacheable&&(i[o]=Object.freeze(d)),d}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,s){return!s||tc(e)||this.chart._animationsDisabled}_getSharedOptions(e,s){const n=this.resolveDataElementOptions(e,s),r=this._sharedOptions,i=this.getSharedOptions(n),o=this.includeOptions(s,i)||i!==r;return this.updateSharedOptions(i,s,n),{sharedOptions:i,includeOptions:o}}updateElement(e,s,n,r){tc(r)?Object.assign(e,n):this._resolveAnimations(s,r).update(e,n)}updateSharedOptions(e,s,n){e&&!tc(s)&&this._resolveAnimations(void 0,s).update(e,n)}_setStyle(e,s,n,r){e.active=r;const i=this.getStyle(s,r);this._resolveAnimations(s,n,r).update(e,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(e,s,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,s,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const s=this._data,n=this._cachedMeta.data;for(const[l,c,d]of this._syncList)this[l](c,d);this._syncList=[];const r=n.length,i=s.length,o=Math.min(i,r);o&&this.parse(0,o),i>r?this._insertElements(r,i-r,e):i<r&&this._removeElements(i,r-i)}_insertElements(e,s,n=!0){const r=this._cachedMeta,i=r.data,o=e+s;let l;const c=d=>{for(d.length+=s,l=d.length-1;l>=o;l--)d[l]=d[l-s]};for(c(i),l=e;l<o;++l)i[l]=new this.dataElementType;this._parsing&&c(r._parsed),this.parse(e,s),n&&this.updateElements(i,e,s,"reset")}updateElements(e,s,n,r){}_removeElements(e,s){const n=this._cachedMeta;if(this._parsing){const r=n._parsed.splice(e,s);n._stacked&&Kr(n,r)}n.data.splice(e,s)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[s,n,r]=e;this[s](n,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,s){s&&this._sync(["_removeElements",e,s]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}he(ki,"defaults",{}),he(ki,"datasetElementType",null),he(ki,"dataElementType",null);class Ja extends ki{getLabelAndValue(e){const s=this._cachedMeta.vScale,n=this.getParsed(e);return{label:s.getLabels()[e],value:""+s.getLabelForValue(n[s.axis])}}parseObjectData(e,s,n,r){return gj.bind(this)(e,s,n,r)}update(e){const s=this._cachedMeta,n=s.dataset,r=s.data||[],i=s.iScale.getLabels();if(n.points=r,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const l={_loop:!0,_fullLoop:i.length===r.length,options:o};this.updateElement(n,void 0,l,e)}this.updateElements(r,0,r.length,e)}updateElements(e,s,n,r){const i=this._cachedMeta.rScale,o=r==="reset";for(let l=s;l<s+n;l++){const c=e[l],d=this.resolveDataElementOptions(l,c.active?"active":r),u=i.getPointPositionForValue(l,this.getParsed(l).r),h=o?i.xCenter:u.x,f=o?i.yCenter:u.y,m={x:h,y:f,angle:u.angle,skip:isNaN(h)||isNaN(f),options:d};this.updateElement(c,l,m,r)}}}he(Ja,"id","radar"),he(Ja,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),he(Ja,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});function xn(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Iu{constructor(e){he(this,"options");this.options=e||{}}static override(e){Object.assign(Iu.prototype,e)}init(){}formats(){return xn()}parse(){return xn()}format(){return xn()}add(){return xn()}diff(){return xn()}startOf(){return xn()}endOf(){return xn()}}var s2={_date:Iu};function n2(t,e,s,n){const{controller:r,data:i,_sorted:o}=t,l=r._cachedMeta.iScale,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(l&&e===l.axis&&e!=="r"&&o&&i.length){const d=l._reversePixels?M1:md;if(n){if(r._sharedOptions){const u=i[0],h=typeof u.getRange=="function"&&u.getRange(e);if(h){const f=d(i,e,s-h),m=d(i,e,s+h);return{lo:f.lo,hi:m.hi}}}}else{const u=d(i,e,s);if(c){const{vScale:h}=r._cachedMeta,{_parsed:f}=t,m=f.slice(0,u.lo+1).reverse().findIndex(y=>!Te(y[h.axis]));u.lo-=Math.max(0,m);const x=f.slice(u.hi).findIndex(y=>!Te(y[h.axis]));u.hi+=Math.max(0,x)}return u}}return{lo:0,hi:i.length-1}}function sa(t,e,s,n,r){const i=t.getSortedVisibleDatasetMetas(),o=s[e];for(let l=0,c=i.length;l<c;++l){const{index:d,data:u}=i[l],{lo:h,hi:f}=n2(i[l],e,o,r);for(let m=h;m<=f;++m){const x=u[m];x.skip||n(x,d,m)}}}function r2(t){const e=t.indexOf("x")!==-1,s=t.indexOf("y")!==-1;return function(n,r){const i=e?Math.abs(n.x-r.x):0,o=s?Math.abs(n.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function sc(t,e,s,n,r){const i=[];return!r&&!t.isPointInArea(e)||sa(t,s,e,function(l,c,d){!r&&!Ns(l,t.chartArea,0)||l.inRange(e.x,e.y,n)&&i.push({element:l,datasetIndex:c,index:d})},!0),i}function i2(t,e,s,n){let r=[];function i(o,l,c){const{startAngle:d,endAngle:u}=o.getProps(["startAngle","endAngle"],n),{angle:h}=A1(o,{x:e.x,y:e.y});L0(h,d,u)&&r.push({element:o,datasetIndex:l,index:c})}return sa(t,s,e,i),r}function a2(t,e,s,n,r,i){let o=[];const l=r2(s);let c=Number.POSITIVE_INFINITY;function d(u,h,f){const m=u.inRange(e.x,e.y,r);if(n&&!m)return;const x=u.getCenterPoint(r);if(!(!!i||t.isPointInArea(x))&&!m)return;const b=l(e,x);b<c?(o=[{element:u,datasetIndex:h,index:f}],c=b):b===c&&o.push({element:u,datasetIndex:h,index:f})}return sa(t,s,e,d),o}function nc(t,e,s,n,r,i){return!i&&!t.isPointInArea(e)?[]:s==="r"&&!n?i2(t,e,s,r):a2(t,e,s,n,r,i)}function Kf(t,e,s,n,r){const i=[],o=s==="x"?"inXRange":"inYRange";let l=!1;return sa(t,s,e,(c,d,u)=>{c[o]&&c[o](e[s],r)&&(i.push({element:c,datasetIndex:d,index:u}),l=l||c.inRange(e.x,e.y,r))}),n&&!l?[]:i}var o2={evaluateInteractionItems:sa,modes:{index(t,e,s,n){const r=wn(e,t),i=s.axis||"x",o=s.includeInvisible||!1,l=s.intersect?sc(t,r,i,n,o):nc(t,r,i,!1,n,o),c=[];return l.length?(t.getSortedVisibleDatasetMetas().forEach(d=>{const u=l[0].index,h=d.data[u];h&&!h.skip&&c.push({element:h,datasetIndex:d.index,index:u})}),c):[]},dataset(t,e,s,n){const r=wn(e,t),i=s.axis||"xy",o=s.includeInvisible||!1;let l=s.intersect?sc(t,r,i,n,o):nc(t,r,i,!1,n,o);if(l.length>0){const c=l[0].datasetIndex,d=t.getDatasetMeta(c).data;l=[];for(let u=0;u<d.length;++u)l.push({element:d[u],datasetIndex:c,index:u})}return l},point(t,e,s,n){const r=wn(e,t),i=s.axis||"xy",o=s.includeInvisible||!1;return sc(t,r,i,n,o)},nearest(t,e,s,n){const r=wn(e,t),i=s.axis||"xy",o=s.includeInvisible||!1;return nc(t,r,i,s.intersect,n,o)},x(t,e,s,n){const r=wn(e,t);return Kf(t,r,"x",s.intersect,n)},y(t,e,s,n){const r=wn(e,t);return Kf(t,r,"y",s.intersect,n)}}};const rx=["left","top","right","bottom"];function Yr(t,e){return t.filter(s=>s.pos===e)}function Yf(t,e){return t.filter(s=>rx.indexOf(s.pos)===-1&&s.box.axis===e)}function Gr(t,e){return t.sort((s,n)=>{const r=e?n:s,i=e?s:n;return r.weight===i.weight?r.index-i.index:r.weight-i.weight})}function l2(t){const e=[];let s,n,r,i,o,l;for(s=0,n=(t||[]).length;s<n;++s)r=t[s],{position:i,options:{stack:o,stackWeight:l=1}}=r,e.push({index:s,box:r,pos:i,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&i+o,stackWeight:l});return e}function c2(t){const e={};for(const s of t){const{stack:n,pos:r,stackWeight:i}=s;if(!n||!rx.includes(r))continue;const o=e[n]||(e[n]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function d2(t,e){const s=c2(t),{vBoxMaxWidth:n,hBoxMaxHeight:r}=e;let i,o,l;for(i=0,o=t.length;i<o;++i){l=t[i];const{fullSize:c}=l.box,d=s[l.stack],u=d&&l.stackWeight/d.weight;l.horizontal?(l.width=u?u*n:c&&e.availableWidth,l.height=r):(l.width=n,l.height=u?u*r:c&&e.availableHeight)}return s}function u2(t){const e=l2(t),s=Gr(e.filter(d=>d.box.fullSize),!0),n=Gr(Yr(e,"left"),!0),r=Gr(Yr(e,"right")),i=Gr(Yr(e,"top"),!0),o=Gr(Yr(e,"bottom")),l=Yf(e,"x"),c=Yf(e,"y");return{fullSize:s,leftAndTop:n.concat(i),rightAndBottom:r.concat(c).concat(o).concat(l),chartArea:Yr(e,"chartArea"),vertical:n.concat(r).concat(c),horizontal:i.concat(o).concat(l)}}function Gf(t,e,s,n){return Math.max(t[s],e[s])+Math.max(t[n],e[n])}function ix(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function h2(t,e,s,n){const{pos:r,box:i}=s,o=t.maxPadding;if(!ve(r)){s.size&&(t[r]-=s.size);const h=n[s.stack]||{size:0,count:1};h.size=Math.max(h.size,s.horizontal?i.height:i.width),s.size=h.size/h.count,t[r]+=s.size}i.getPadding&&ix(o,i.getPadding());const l=Math.max(0,e.outerWidth-Gf(o,t,"left","right")),c=Math.max(0,e.outerHeight-Gf(o,t,"top","bottom")),d=l!==t.w,u=c!==t.h;return t.w=l,t.h=c,s.horizontal?{same:d,other:u}:{same:u,other:d}}function f2(t){const e=t.maxPadding;function s(n){const r=Math.max(e[n]-t[n],0);return t[n]+=r,r}t.y+=s("top"),t.x+=s("left"),s("right"),s("bottom")}function m2(t,e){const s=e.maxPadding;function n(r){const i={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{i[o]=Math.max(e[o],s[o])}),i}return n(t?["left","right"]:["top","bottom"])}function ii(t,e,s,n){const r=[];let i,o,l,c,d,u;for(i=0,o=t.length,d=0;i<o;++i){l=t[i],c=l.box,c.update(l.width||e.w,l.height||e.h,m2(l.horizontal,e));const{same:h,other:f}=h2(e,s,l,n);d|=h&&r.length,u=u||f,c.fullSize||r.push(l)}return d&&ii(r,e,s,n)||u}function Oa(t,e,s,n,r){t.top=s,t.left=e,t.right=e+n,t.bottom=s+r,t.width=n,t.height=r}function Qf(t,e,s,n){const r=s.padding;let{x:i,y:o}=e;for(const l of t){const c=l.box,d=n[l.stack]||{count:1,placed:0,weight:1},u=l.stackWeight/d.weight||1;if(l.horizontal){const h=e.w*u,f=d.size||c.height;Oo(d.start)&&(o=d.start),c.fullSize?Oa(c,r.left,o,s.outerWidth-r.right-r.left,f):Oa(c,e.left+d.placed,o,h,f),d.start=o,d.placed+=h,o=c.bottom}else{const h=e.h*u,f=d.size||c.width;Oo(d.start)&&(i=d.start),c.fullSize?Oa(c,i,r.top,f,s.outerHeight-r.bottom-r.top):Oa(c,i,e.top+d.placed,f,h),d.start=i,d.placed+=h,i=c.right}}e.x=i,e.y=o}var Hs={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(s){e.draw(s)}}]},t.boxes.push(e)},removeBox(t,e){const s=t.boxes?t.boxes.indexOf(e):-1;s!==-1&&t.boxes.splice(s,1)},configure(t,e,s){e.fullSize=s.fullSize,e.position=s.position,e.weight=s.weight},update(t,e,s,n){if(!t)return;const r=ut(t.options.layout.padding),i=Math.max(e-r.width,0),o=Math.max(s-r.height,0),l=u2(t.boxes),c=l.vertical,d=l.horizontal;we(t.boxes,y=>{typeof y.beforeLayout=="function"&&y.beforeLayout()});const u=c.reduce((y,b)=>b.box.options&&b.box.options.display===!1?y:y+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:s,padding:r,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/u,hBoxMaxHeight:o/2}),f=Object.assign({},r);ix(f,ut(n));const m=Object.assign({maxPadding:f,w:i,h:o,x:r.left,y:r.top},r),x=d2(c.concat(d),h);ii(l.fullSize,m,h,x),ii(c,m,h,x),ii(d,m,h,x)&&ii(c,m,h,x),f2(m),Qf(l.leftAndTop,m,h,x),m.x+=m.w,m.y+=m.h,Qf(l.rightAndBottom,m,h,x),t.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},we(l.chartArea,y=>{const b=y.box;Object.assign(b,t.chartArea),b.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class ax{acquireContext(e,s){}releaseContext(e){return!1}addEventListener(e,s,n){}removeEventListener(e,s,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,s,n,r){return s=Math.max(0,s||e.width),n=n||e.height,{width:s,height:Math.max(0,r?Math.floor(s/r):n)}}isAttached(e){return!0}updateConfig(e){}}class p2 extends ax{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Xa="$chartjs",g2={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Jf=t=>t===null||t==="";function x2(t,e){const s=t.style,n=t.getAttribute("height"),r=t.getAttribute("width");if(t[Xa]={initial:{height:n,width:r,style:{display:s.display,height:s.height,width:s.width}}},s.display=s.display||"block",s.boxSizing=s.boxSizing||"border-box",Jf(r)){const i=If(t,"width");i!==void 0&&(t.width=i)}if(Jf(n))if(t.style.height==="")t.height=t.width/(e||2);else{const i=If(t,"height");i!==void 0&&(t.height=i)}return t}const ox=Tj?{passive:!0}:!1;function y2(t,e,s){t&&t.addEventListener(e,s,ox)}function v2(t,e,s){t&&t.canvas&&t.canvas.removeEventListener(e,s,ox)}function b2(t,e){const s=g2[t.type]||t.type,{x:n,y:r}=wn(t,e);return{type:s,chart:e,native:t,x:n!==void 0?n:null,y:r!==void 0?r:null}}function zo(t,e){for(const s of t)if(s===e||s.contains(e))return!0}function w2(t,e,s){const n=t.canvas,r=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||zo(l.addedNodes,n),o=o&&!zo(l.removedNodes,n);o&&s()});return r.observe(document,{childList:!0,subtree:!0}),r}function _2(t,e,s){const n=t.canvas,r=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||zo(l.removedNodes,n),o=o&&!zo(l.addedNodes,n);o&&s()});return r.observe(document,{childList:!0,subtree:!0}),r}const qi=new Map;let Xf=0;function lx(){const t=window.devicePixelRatio;t!==Xf&&(Xf=t,qi.forEach((e,s)=>{s.currentDevicePixelRatio!==t&&e()}))}function j2(t,e){qi.size||window.addEventListener("resize",lx),qi.set(t,e)}function k2(t){qi.delete(t),qi.size||window.removeEventListener("resize",lx)}function N2(t,e,s){const n=t.canvas,r=n&&Du(n);if(!r)return;const i=z0((l,c)=>{const d=r.clientWidth;s(l,c),d<r.clientWidth&&s()},window),o=new ResizeObserver(l=>{const c=l[0],d=c.contentRect.width,u=c.contentRect.height;d===0&&u===0||i(d,u)});return o.observe(r),j2(t,i),o}function rc(t,e,s){s&&s.disconnect(),e==="resize"&&k2(t)}function S2(t,e,s){const n=t.canvas,r=z0(i=>{t.ctx!==null&&s(b2(i,t))},t);return y2(n,e,r),r}class C2 extends ax{acquireContext(e,s){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(x2(e,s),n):null}releaseContext(e){const s=e.canvas;if(!s[Xa])return!1;const n=s[Xa].initial;["height","width"].forEach(i=>{const o=n[i];Te(o)?s.removeAttribute(i):s.setAttribute(i,o)});const r=n.style||{};return Object.keys(r).forEach(i=>{s.style[i]=r[i]}),s.width=s.width,delete s[Xa],!0}addEventListener(e,s,n){this.removeEventListener(e,s);const r=e.$proxies||(e.$proxies={}),o={attach:w2,detach:_2,resize:N2}[s]||S2;r[s]=o(e,s,n)}removeEventListener(e,s){const n=e.$proxies||(e.$proxies={}),r=n[s];if(!r)return;({attach:rc,detach:rc,resize:rc}[s]||v2)(e,s,r),n[s]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,s,n,r){return Ej(e,s,n,r)}isAttached(e){const s=e&&Du(e);return!!(s&&s.isConnected)}}function P2(t){return!Lu()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?p2:C2}class an{constructor(){he(this,"x");he(this,"y");he(this,"active",!1);he(this,"options");he(this,"$animations")}tooltipPosition(e){const{x:s,y:n}=this.getProps(["x","y"],e);return{x:s,y:n}}hasValue(){return Mo(this.x)&&Mo(this.y)}getProps(e,s){const n=this.$animations;if(!s||!n)return this;const r={};return e.forEach(i=>{r[i]=n[i]&&n[i].active()?n[i]._to:this[i]}),r}}he(an,"defaults",{}),he(an,"defaultRoutes");function E2(t,e){const s=t.options.ticks,n=T2(t),r=Math.min(s.maxTicksLimit||n,n),i=s.major.enabled?O2(e):[],o=i.length,l=i[0],c=i[o-1],d=[];if(o>r)return R2(e,d,i,o/r),d;const u=A2(i,e,r);if(o>0){let h,f;const m=o>1?Math.round((c-l)/(o-1)):null;for(Ra(e,d,u,Te(m)?0:l-m,l),h=0,f=o-1;h<f;h++)Ra(e,d,u,i[h],i[h+1]);return Ra(e,d,u,c,Te(m)?e.length:c+m),d}return Ra(e,d,u),d}function T2(t){const e=t.options.offset,s=t._tickSize(),n=t._length/s+(e?0:1),r=t._maxLength/s;return Math.floor(Math.min(n,r))}function A2(t,e,s){const n=M2(t),r=e.length/s;if(!n)return Math.max(r,1);const i=C1(n);for(let o=0,l=i.length-1;o<l;o++){const c=i[o];if(c>r)return c}return Math.max(r,1)}function O2(t){const e=[];let s,n;for(s=0,n=t.length;s<n;s++)t[s].major&&e.push(s);return e}function R2(t,e,s,n){let r=0,i=s[0],o;for(n=Math.ceil(n),o=0;o<t.length;o++)o===i&&(e.push(t[o]),r++,i=s[r*n])}function Ra(t,e,s,n,r){const i=ge(n,0),o=Math.min(ge(r,t.length),t.length);let l=0,c,d,u;for(s=Math.ceil(s),r&&(c=r-n,s=c/Math.floor(c/s)),u=i;u<0;)l++,u=Math.round(i+l*s);for(d=Math.max(i,0);d<o;d++)d===u&&(e.push(t[d]),l++,u=Math.round(i+l*s))}function M2(t){const e=t.length;let s,n;if(e<2)return!1;for(n=t[0],s=1;s<e;++s)if(t[s]-t[s-1]!==n)return!1;return n}const L2=t=>t==="left"?"right":t==="right"?"left":t,Zf=(t,e,s)=>e==="top"||e==="left"?t[e]+s:t[e]-s,em=(t,e)=>Math.min(e||t,t);function tm(t,e){const s=[],n=t.length/e,r=t.length;let i=0;for(;i<r;i+=n)s.push(t[Math.floor(i)]);return s}function D2(t,e,s){const n=t.ticks.length,r=Math.min(e,n-1),i=t._startPixel,o=t._endPixel,l=1e-6;let c=t.getPixelForTick(r),d;if(!(s&&(n===1?d=Math.max(c-i,o-c):e===0?d=(t.getPixelForTick(1)-c)/2:d=(c-t.getPixelForTick(r-1))/2,c+=r<e?d:-d,c<i-l||c>o+l)))return c}function I2(t,e){we(t,s=>{const n=s.gc,r=n.length/2;let i;if(r>e){for(i=0;i<r;++i)delete s.data[n[i]];n.splice(0,r)}})}function Qr(t){return t.drawTicks?t.tickLength:0}function sm(t,e){if(!t.display)return 0;const s=Xe(t.font,e),n=ut(t.padding);return(Ie(t.text)?t.text.length:1)*s.lineHeight+n.height}function z2(t,e){return un(t,{scale:e,type:"scale"})}function B2(t,e,s){return un(t,{tick:s,index:e,type:"tick"})}function $2(t,e,s){let n=B0(t);return(s&&e!=="right"||!s&&e==="right")&&(n=L2(n)),n}function F2(t,e,s,n){const{top:r,left:i,bottom:o,right:l,chart:c}=t,{chartArea:d,scales:u}=c;let h=0,f,m,x;const y=o-r,b=l-i;if(t.isHorizontal()){if(m=kt(n,i,l),ve(s)){const g=Object.keys(s)[0],p=s[g];x=u[g].getPixelForValue(p)+y-e}else s==="center"?x=(d.bottom+d.top)/2+y-e:x=Zf(t,s,e);f=l-i}else{if(ve(s)){const g=Object.keys(s)[0],p=s[g];m=u[g].getPixelForValue(p)-b+e}else s==="center"?m=(d.left+d.right)/2-b+e:m=Zf(t,s,e);x=kt(n,o,r),h=s==="left"?-Pt:Pt}return{titleX:m,titleY:x,maxWidth:f,rotation:h}}class na extends an{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,s){return e}getUserBounds(){let{_userMin:e,_userMax:s,_suggestedMin:n,_suggestedMax:r}=this;return e=ns(e,Number.POSITIVE_INFINITY),s=ns(s,Number.NEGATIVE_INFINITY),n=ns(n,Number.POSITIVE_INFINITY),r=ns(r,Number.NEGATIVE_INFINITY),{min:ns(e,n),max:ns(s,r),minDefined:at(e),maxDefined:at(s)}}getMinMax(e){let{min:s,max:n,minDefined:r,maxDefined:i}=this.getUserBounds(),o;if(r&&i)return{min:s,max:n};const l=this.getMatchingVisibleMetas();for(let c=0,d=l.length;c<d;++c)o=l[c].controller.getMinMax(this,e),r||(s=Math.min(s,o.min)),i||(n=Math.max(n,o.max));return s=i&&s>n?n:s,n=r&&s>n?s:n,{min:ns(s,ns(n,s)),max:ns(n,ns(s,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Se(this.options.beforeUpdate,[this])}update(e,s,n){const{beginAtZero:r,grace:i,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=s,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=aj(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?tm(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=E2(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,s,n;this.isHorizontal()?(s=this.left,n=this.right):(s=this.top,n=this.bottom,e=!e),this._startPixel=s,this._endPixel=n,this._reversePixels=e,this._length=n-s,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Se(this.options.afterUpdate,[this])}beforeSetDimensions(){Se(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Se(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Se(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Se(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const s=this.options.ticks;let n,r,i;for(n=0,r=e.length;n<r;n++)i=e[n],i.label=Se(s.callback,[i.value,n,e],this)}afterTickToLabelConversion(){Se(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Se(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,s=e.ticks,n=em(this.ticks.length,e.ticks.maxTicksLimit),r=s.minRotation||0,i=s.maxRotation;let o=r,l,c,d;if(!this._isVisible()||!s.display||r>=i||n<=1||!this.isHorizontal()){this.labelRotation=r;return}const u=this._getLabelSizes(),h=u.widest.width,f=u.highest.height,m=ks(this.chart.width-h,0,this.maxWidth);l=e.offset?this.maxWidth/n:m/(n-1),h+6>l&&(l=m/(n-(e.offset?.5:1)),c=this.maxHeight-Qr(e.grid)-s.padding-sm(e.title,this.chart.options.font),d=Math.sqrt(h*h+f*f),o=Eu(Math.min(Math.asin(ks((u.highest.height+6)/l,-1,1)),Math.asin(ks(c/d,-1,1))-Math.asin(ks(f/d,-1,1)))),o=Math.max(r,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){Se(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Se(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:s,options:{ticks:n,title:r,grid:i}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const c=sm(r,s.options.font);if(l?(e.width=this.maxWidth,e.height=Qr(i)+c):(e.height=this.maxHeight,e.width=Qr(i)+c),n.display&&this.ticks.length){const{first:d,last:u,widest:h,highest:f}=this._getLabelSizes(),m=n.padding*2,x=Cn(this.labelRotation),y=Math.cos(x),b=Math.sin(x);if(l){const g=n.mirror?0:b*h.width+y*f.height;e.height=Math.min(this.maxHeight,e.height+g+m)}else{const g=n.mirror?0:y*h.width+b*f.height;e.width=Math.min(this.maxWidth,e.width+g+m)}this._calculatePadding(d,u,b,y)}}this._handleMargins(),l?(this.width=this._length=s.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=s.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,s,n,r){const{ticks:{align:i,padding:o},position:l}=this.options,c=this.labelRotation!==0,d=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,m=0;c?d?(f=r*e.width,m=n*s.height):(f=n*e.height,m=r*s.width):i==="start"?m=s.width:i==="end"?f=e.width:i!=="inner"&&(f=e.width/2,m=s.width/2),this.paddingLeft=Math.max((f-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((m-h+o)*this.width/(this.width-h),0)}else{let u=s.height/2,h=e.height/2;i==="start"?(u=0,h=e.height):i==="end"&&(u=s.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Se(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:s}=this.options;return s==="top"||s==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let s,n;for(s=0,n=e.length;s<n;s++)Te(e[s].label)&&(e.splice(s,1),n--,s--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const s=this.options.ticks.sampleSize;let n=this.ticks;s<n.length&&(n=tm(n,s)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,s,n){const{ctx:r,_longestTextCache:i}=this,o=[],l=[],c=Math.floor(s/em(s,n));let d=0,u=0,h,f,m,x,y,b,g,p,v,w,j;for(h=0;h<s;h+=c){if(x=e[h].label,y=this._resolveTickFontOptions(h),r.font=b=y.string,g=i[b]=i[b]||{data:{},gc:[]},p=y.lineHeight,v=w=0,!Te(x)&&!Ie(x))v=Lo(r,g.data,g.gc,v,x),w=p;else if(Ie(x))for(f=0,m=x.length;f<m;++f)j=x[f],!Te(j)&&!Ie(j)&&(v=Lo(r,g.data,g.gc,v,j),w+=p);o.push(v),l.push(w),d=Math.max(v,d),u=Math.max(w,u)}I2(i,s);const N=o.indexOf(d),P=l.indexOf(u),A=S=>({width:o[S]||0,height:l[S]||0});return{first:A(0),last:A(s-1),widest:A(N),highest:A(P),widths:o,heights:l}}getLabelForValue(e){return e}getPixelForValue(e,s){return NaN}getValueForPixel(e){}getPixelForTick(e){const s=this.ticks;return e<0||e>s.length-1?null:this.getPixelForValue(s[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const s=this._startPixel+e*this._length;return R1(this._alignToPixels?gn(this.chart,s,0):s)}getDecimalForPixel(e){const s=(e-this._startPixel)/this._length;return this._reversePixels?1-s:s}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:s}=this;return e<0&&s<0?s:e>0&&s>0?e:0}getContext(e){const s=this.ticks||[];if(e>=0&&e<s.length){const n=s[e];return n.$context||(n.$context=B2(this.getContext(),e,n))}return this.$context||(this.$context=z2(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,s=Cn(this.labelRotation),n=Math.abs(Math.cos(s)),r=Math.abs(Math.sin(s)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,l=i?i.widest.width+o:0,c=i?i.highest.height+o:0;return this.isHorizontal()?c*n>l*r?l/n:c/r:c*r<l*n?c/n:l/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const s=this.axis,n=this.chart,r=this.options,{grid:i,position:o,border:l}=r,c=i.offset,d=this.isHorizontal(),h=this.ticks.length+(c?1:0),f=Qr(i),m=[],x=l.setContext(this.getContext()),y=x.display?x.width:0,b=y/2,g=function(ne){return gn(n,ne,y)};let p,v,w,j,N,P,A,S,R,L,V,M;if(o==="top")p=g(this.bottom),P=this.bottom-f,S=p-b,L=g(e.top)+b,M=e.bottom;else if(o==="bottom")p=g(this.top),L=e.top,M=g(e.bottom)-b,P=p+b,S=this.top+f;else if(o==="left")p=g(this.right),N=this.right-f,A=p-b,R=g(e.left)+b,V=e.right;else if(o==="right")p=g(this.left),R=e.left,V=g(e.right)-b,N=p+b,A=this.left+f;else if(s==="x"){if(o==="center")p=g((e.top+e.bottom)/2+.5);else if(ve(o)){const ne=Object.keys(o)[0],G=o[ne];p=g(this.chart.scales[ne].getPixelForValue(G))}L=e.top,M=e.bottom,P=p+b,S=P+f}else if(s==="y"){if(o==="center")p=g((e.left+e.right)/2);else if(ve(o)){const ne=Object.keys(o)[0],G=o[ne];p=g(this.chart.scales[ne].getPixelForValue(G))}N=p-b,A=N-f,R=e.left,V=e.right}const K=ge(r.ticks.maxTicksLimit,h),J=Math.max(1,Math.ceil(h/K));for(v=0;v<h;v+=J){const ne=this.getContext(v),G=i.setContext(ne),W=l.setContext(ne),I=G.lineWidth,E=G.color,z=W.dash||[],B=W.dashOffset,C=G.tickWidth,q=G.tickColor,X=G.tickBorderDash||[],se=G.tickBorderDashOffset;w=D2(this,v,c),w!==void 0&&(j=gn(n,w,I),d?N=A=R=V=j:P=S=L=M=j,m.push({tx1:N,ty1:P,tx2:A,ty2:S,x1:R,y1:L,x2:V,y2:M,width:I,color:E,borderDash:z,borderDashOffset:B,tickWidth:C,tickColor:q,tickBorderDash:X,tickBorderDashOffset:se}))}return this._ticksLength=h,this._borderValue=p,m}_computeLabelItems(e){const s=this.axis,n=this.options,{position:r,ticks:i}=n,o=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:d,padding:u,mirror:h}=i,f=Qr(n.grid),m=f+u,x=h?-u:m,y=-Cn(this.labelRotation),b=[];let g,p,v,w,j,N,P,A,S,R,L,V,M="middle";if(r==="top")N=this.bottom-x,P=this._getXAxisLabelAlignment();else if(r==="bottom")N=this.top+x,P=this._getXAxisLabelAlignment();else if(r==="left"){const J=this._getYAxisLabelAlignment(f);P=J.textAlign,j=J.x}else if(r==="right"){const J=this._getYAxisLabelAlignment(f);P=J.textAlign,j=J.x}else if(s==="x"){if(r==="center")N=(e.top+e.bottom)/2+m;else if(ve(r)){const J=Object.keys(r)[0],ne=r[J];N=this.chart.scales[J].getPixelForValue(ne)+m}P=this._getXAxisLabelAlignment()}else if(s==="y"){if(r==="center")j=(e.left+e.right)/2-m;else if(ve(r)){const J=Object.keys(r)[0],ne=r[J];j=this.chart.scales[J].getPixelForValue(ne)}P=this._getYAxisLabelAlignment(f).textAlign}s==="y"&&(c==="start"?M="top":c==="end"&&(M="bottom"));const K=this._getLabelSizes();for(g=0,p=l.length;g<p;++g){v=l[g],w=v.label;const J=i.setContext(this.getContext(g));A=this.getPixelForTick(g)+i.labelOffset,S=this._resolveTickFontOptions(g),R=S.lineHeight,L=Ie(w)?w.length:1;const ne=L/2,G=J.color,W=J.textStrokeColor,I=J.textStrokeWidth;let E=P;o?(j=A,P==="inner"&&(g===p-1?E=this.options.reverse?"left":"right":g===0?E=this.options.reverse?"right":"left":E="center"),r==="top"?d==="near"||y!==0?V=-L*R+R/2:d==="center"?V=-K.highest.height/2-ne*R+R:V=-K.highest.height+R/2:d==="near"||y!==0?V=R/2:d==="center"?V=K.highest.height/2-ne*R:V=K.highest.height-L*R,h&&(V*=-1),y!==0&&!J.showLabelBackdrop&&(j+=R/2*Math.sin(y))):(N=A,V=(1-L)*R/2);let z;if(J.showLabelBackdrop){const B=ut(J.backdropPadding),C=K.heights[g],q=K.widths[g];let X=V-B.top,se=0-B.left;switch(M){case"middle":X-=C/2;break;case"bottom":X-=C;break}switch(P){case"center":se-=q/2;break;case"right":se-=q;break;case"inner":g===p-1?se-=q:g>0&&(se-=q/2);break}z={left:se,top:X,width:q+B.width,height:C+B.height,color:J.backdropColor}}b.push({label:w,font:S,textOffset:V,options:{rotation:y,color:G,strokeColor:W,strokeWidth:I,textAlign:E,textBaseline:M,translation:[j,N],backdrop:z}})}return b}_getXAxisLabelAlignment(){const{position:e,ticks:s}=this.options;if(-Cn(this.labelRotation))return e==="top"?"left":"right";let r="center";return s.align==="start"?r="left":s.align==="end"?r="right":s.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:s,ticks:{crossAlign:n,mirror:r,padding:i}}=this.options,o=this._getLabelSizes(),l=e+i,c=o.widest.width;let d,u;return s==="left"?r?(u=this.right+i,n==="near"?d="left":n==="center"?(d="center",u+=c/2):(d="right",u+=c)):(u=this.right-l,n==="near"?d="right":n==="center"?(d="center",u-=c/2):(d="left",u=this.left)):s==="right"?r?(u=this.left+i,n==="near"?d="right":n==="center"?(d="center",u-=c/2):(d="left",u-=c)):(u=this.left+l,n==="near"?d="left":n==="center"?(d="center",u+=c/2):(d="right",u=this.right)):d="right",{textAlign:d,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,s=this.options.position;if(s==="left"||s==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(s==="top"||s==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:s},left:n,top:r,width:i,height:o}=this;s&&(e.save(),e.fillStyle=s,e.fillRect(n,r,i,o),e.restore())}getLineWidthForValue(e){const s=this.options.grid;if(!this._isVisible()||!s.display)return 0;const r=this.ticks.findIndex(i=>i.value===e);return r>=0?s.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const s=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const l=(c,d,u)=>{!u.width||!u.color||(n.save(),n.lineWidth=u.width,n.strokeStyle=u.color,n.setLineDash(u.borderDash||[]),n.lineDashOffset=u.borderDashOffset,n.beginPath(),n.moveTo(c.x,c.y),n.lineTo(d.x,d.y),n.stroke(),n.restore())};if(s.display)for(i=0,o=r.length;i<o;++i){const c=r[i];s.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),s.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:s,options:{border:n,grid:r}}=this,i=n.setContext(this.getContext()),o=n.display?i.width:0;if(!o)return;const l=r.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let d,u,h,f;this.isHorizontal()?(d=gn(e,this.left,o)-o/2,u=gn(e,this.right,l)+l/2,h=f=c):(h=gn(e,this.top,o)-o/2,f=gn(e,this.bottom,l)+l/2,d=u=c),s.save(),s.lineWidth=i.width,s.strokeStyle=i.color,s.beginPath(),s.moveTo(d,h),s.lineTo(u,f),s.stroke(),s.restore()}drawLabels(e){if(!this.options.ticks.display)return;const n=this.ctx,r=this._computeLabelArea();r&&dl(n,r);const i=this.getLabelItems(e);for(const o of i){const l=o.options,c=o.font,d=o.label,u=o.textOffset;Er(n,d,0,u,c,l)}r&&ul(n)}drawTitle(){const{ctx:e,options:{position:s,title:n,reverse:r}}=this;if(!n.display)return;const i=Xe(n.font),o=ut(n.padding),l=n.align;let c=i.lineHeight/2;s==="bottom"||s==="center"||ve(s)?(c+=o.bottom,Ie(n.text)&&(c+=i.lineHeight*(n.text.length-1))):c+=o.top;const{titleX:d,titleY:u,maxWidth:h,rotation:f}=F2(this,c,s,l);Er(e,n.text,0,0,i,{color:n.color,maxWidth:h,rotation:f,textAlign:$2(l,s,r),textBaseline:"middle",translation:[d,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,s=e.ticks&&e.ticks.z||0,n=ge(e.grid&&e.grid.z,-1),r=ge(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==na.prototype.draw?[{z:s,draw:i=>{this.draw(i)}}]:[{z:n,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:s,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const s=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let i,o;for(i=0,o=s.length;i<o;++i){const l=s[i];l[n]===this.id&&(!e||l.type===e)&&r.push(l)}return r}_resolveTickFontOptions(e){const s=this.options.ticks.setContext(this.getContext(e));return Xe(s.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Ma{constructor(e,s,n){this.type=e,this.scope=s,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const s=Object.getPrototypeOf(e);let n;H2(s)&&(n=this.register(s));const r=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in r||(r[i]=e,U2(e,o,n),this.override&&ze.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const s=this.items,n=e.id,r=this.scope;n in s&&delete s[n],r&&n in ze[r]&&(delete ze[r][n],this.override&&delete Bn[n])}}function U2(t,e,s){const n=Hi(Object.create(null),[s?ze.get(s):{},ze.get(e),t.defaults]);ze.set(e,n),t.defaultRoutes&&W2(e,t.defaultRoutes),t.descriptors&&ze.describe(e,t.descriptors)}function W2(t,e){Object.keys(e).forEach(s=>{const n=s.split("."),r=n.pop(),i=[t].concat(n).join("."),o=e[s].split("."),l=o.pop(),c=o.join(".");ze.route(i,r,c,l)})}function H2(t){return"id"in t&&"defaults"in t}class V2{constructor(){this.controllers=new Ma(ki,"datasets",!0),this.elements=new Ma(an,"elements"),this.plugins=new Ma(Object,"plugins"),this.scales=new Ma(na,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,s,n){[...s].forEach(r=>{const i=n||this._getRegistryForType(r);n||i.isForType(r)||i===this.plugins&&r.id?this._exec(e,i,r):we(r,o=>{const l=n||this._getRegistryForType(o);this._exec(e,l,o)})})}_exec(e,s,n){const r=Pu(e);Se(n["before"+r],[],n),s[e](n),Se(n["after"+r],[],n)}_getRegistryForType(e){for(let s=0;s<this._typedRegistries.length;s++){const n=this._typedRegistries[s];if(n.isForType(e))return n}return this.plugins}_get(e,s,n){const r=s.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+n+".");return r}}var as=new V2;class q2{constructor(){this._init=[]}notify(e,s,n,r){s==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(i,e,s,n);return s==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,s,n,r){r=r||{};for(const i of e){const o=i.plugin,l=o[n],c=[s,r,i.options];if(Se(l,c,o)===!1&&r.cancelable)return!1}return!0}invalidate(){Te(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const s=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),s}_createDescriptors(e,s){const n=e&&e.config,r=ge(n.options&&n.options.plugins,{}),i=K2(n);return r===!1&&!s?[]:G2(e,i,r,s)}_notifyStateChanges(e){const s=this._oldCache||[],n=this._cache,r=(i,o)=>i.filter(l=>!o.some(c=>l.plugin.id===c.plugin.id));this._notify(r(s,n),e,"stop"),this._notify(r(n,s),e,"start")}}function K2(t){const e={},s=[],n=Object.keys(as.plugins.items);for(let i=0;i<n.length;i++)s.push(as.getPlugin(n[i]));const r=t.plugins||[];for(let i=0;i<r.length;i++){const o=r[i];s.indexOf(o)===-1&&(s.push(o),e[o.id]=!0)}return{plugins:s,localIds:e}}function Y2(t,e){return!e&&t===!1?null:t===!0?{}:t}function G2(t,{plugins:e,localIds:s},n,r){const i=[],o=t.getContext();for(const l of e){const c=l.id,d=Y2(n[c],r);d!==null&&i.push({plugin:l,options:Q2(t.config,{plugin:l,local:s[c]},d,o)})}return i}function Q2(t,{plugin:e,local:s},n,r){const i=t.pluginScopeKeys(e),o=t.getOptionScopes(n,i);return s&&e.defaults&&o.push(e.defaults),t.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function xd(t,e){const s=ze.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||s.indexAxis||"x"}function J2(t,e){let s=t;return t==="_index_"?s=e:t==="_value_"&&(s=e==="x"?"y":"x"),s}function X2(t,e){return t===e?"_index_":"_value_"}function nm(t){if(t==="x"||t==="y"||t==="r")return t}function Z2(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function yd(t,...e){if(nm(t))return t;for(const s of e){const n=s.axis||Z2(s.position)||t.length>1&&nm(t[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function rm(t,e,s){if(s[e+"AxisID"]===t)return{axis:e}}function ek(t,e){if(e.data&&e.data.datasets){const s=e.data.datasets.filter(n=>n.xAxisID===t||n.yAxisID===t);if(s.length)return rm(t,"x",s[0])||rm(t,"y",s[0])}return{}}function tk(t,e){const s=Bn[t.type]||{scales:{}},n=e.scales||{},r=xd(t.type,e),i=Object.create(null);return Object.keys(n).forEach(o=>{const l=n[o];if(!ve(l))return console.error(`Invalid scale configuration for scale: ${o}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const c=yd(o,l,ek(o,t),ze.scales[l.type]),d=X2(c,r),u=s.scales||{};i[o]=bi(Object.create(null),[{axis:c},l,u[c],u[d]])}),t.data.datasets.forEach(o=>{const l=o.type||t.type,c=o.indexAxis||xd(l,e),u=(Bn[l]||{}).scales||{};Object.keys(u).forEach(h=>{const f=J2(h,c),m=o[f+"AxisID"]||f;i[m]=i[m]||Object.create(null),bi(i[m],[{axis:f},n[m],u[h]])})}),Object.keys(i).forEach(o=>{const l=i[o];bi(l,[ze.scales[l.type],ze.scale])}),i}function cx(t){const e=t.options||(t.options={});e.plugins=ge(e.plugins,{}),e.scales=tk(t,e)}function dx(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function sk(t){return t=t||{},t.data=dx(t.data),cx(t),t}const im=new Map,ux=new Set;function La(t,e){let s=im.get(t);return s||(s=e(),im.set(t,s),ux.add(s)),s}const Jr=(t,e,s)=>{const n=Vi(e,s);n!==void 0&&t.add(n)};class nk{constructor(e){this._config=sk(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=dx(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),cx(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return La(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,s){return La(`${e}.transition.${s}`,()=>[[`datasets.${e}.transitions.${s}`,`transitions.${s}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,s){return La(`${e}-${s}`,()=>[[`datasets.${e}.elements.${s}`,`datasets.${e}`,`elements.${s}`,""]])}pluginScopeKeys(e){const s=e.id,n=this.type;return La(`${n}-plugin-${s}`,()=>[[`plugins.${s}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,s){const n=this._scopeCache;let r=n.get(e);return(!r||s)&&(r=new Map,n.set(e,r)),r}getOptionScopes(e,s,n){const{options:r,type:i}=this,o=this._cachedScopes(e,n),l=o.get(s);if(l)return l;const c=new Set;s.forEach(u=>{e&&(c.add(e),u.forEach(h=>Jr(c,e,h))),u.forEach(h=>Jr(c,r,h)),u.forEach(h=>Jr(c,Bn[i]||{},h)),u.forEach(h=>Jr(c,ze,h)),u.forEach(h=>Jr(c,pd,h))});const d=Array.from(c);return d.length===0&&d.push(Object.create(null)),ux.has(s)&&o.set(s,d),d}chartOptionScopes(){const{options:e,type:s}=this;return[e,Bn[s]||{},ze.datasets[s]||{},{type:s},ze,pd]}resolveNamedOptions(e,s,n,r=[""]){const i={$shared:!0},{resolver:o,subPrefixes:l}=am(this._resolverCache,e,r);let c=o;if(ik(o,s)){i.$shared=!1,n=rn(n)?n():n;const d=this.createResolver(e,n,l);c=Tr(o,n,d)}for(const d of s)i[d]=c[d];return i}createResolver(e,s,n=[""],r){const{resolver:i}=am(this._resolverCache,e,n);return ve(s)?Tr(i,s,void 0,r):i}}function am(t,e,s){let n=t.get(e);n||(n=new Map,t.set(e,n));const r=s.join();let i=n.get(r);return i||(i={resolver:Ou(e,s),subPrefixes:s.filter(l=>!l.toLowerCase().includes("hover"))},n.set(r,i)),i}const rk=t=>ve(t)&&Object.getOwnPropertyNames(t).some(e=>rn(t[e]));function ik(t,e){const{isScriptable:s,isIndexable:n}=V0(t);for(const r of e){const i=s(r),o=n(r),l=(o||i)&&t[r];if(i&&(rn(l)||rk(l))||o&&Ie(l))return!0}return!1}var ak="4.5.0";const ok=["top","bottom","left","right","chartArea"];function om(t,e){return t==="top"||t==="bottom"||ok.indexOf(t)===-1&&e==="x"}function lm(t,e){return function(s,n){return s[t]===n[t]?s[e]-n[e]:s[t]-n[t]}}function cm(t){const e=t.chart,s=e.options.animation;e.notifyPlugins("afterRender"),Se(s&&s.onComplete,[t],e)}function lk(t){const e=t.chart,s=e.options.animation;Se(s&&s.onProgress,[t],e)}function hx(t){return Lu()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Za={},dm=t=>{const e=hx(t);return Object.values(Za).filter(s=>s.canvas===e).pop()};function ck(t,e,s){const n=Object.keys(t);for(const r of n){const i=+r;if(i>=e){const o=t[r];delete t[r],(s>0||i>e)&&(t[i+s]=o)}}}function dk(t,e,s,n){return!s||t.type==="mouseout"?null:n?e:t}var Ms;let fl=(Ms=class{static register(...e){as.add(...e),um()}static unregister(...e){as.remove(...e),um()}constructor(e,s){const n=this.config=new nk(s),r=hx(e),i=dm(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||P2(r)),this.platform.updateConfig(n);const l=this.platform.acquireContext(r,o.aspectRatio),c=l&&l.canvas,d=c&&c.height,u=c&&c.width;if(this.id=y1(),this.ctx=l,this.canvas=c,this.width=u,this.height=d,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new q2,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=z1(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],Za[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}ps.listen(this,"complete",cm),ps.listen(this,"progress",lk),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:s},width:n,height:r,_aspectRatio:i}=this;return Te(e)?s&&i?i:r?n/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return as}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Df(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Rf(this.canvas,this.ctx),this}stop(){return ps.stop(this),this}resize(e,s){ps.running(this)?this._resizeBeforeDraw={width:e,height:s}:this._resize(e,s)}_resize(e,s){const n=this.options,r=this.canvas,i=n.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,s,i),l=n.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Df(this,l,!0)&&(this.notifyPlugins("resize",{size:o}),Se(n.onResize,[this,o],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const s=this.options.scales||{};we(s,(n,r)=>{n.id=r})}buildOrUpdateScales(){const e=this.options,s=e.scales,n=this.scales,r=Object.keys(n).reduce((o,l)=>(o[l]=!1,o),{});let i=[];s&&(i=i.concat(Object.keys(s).map(o=>{const l=s[o],c=yd(o,l),d=c==="r",u=c==="x";return{options:l,dposition:d?"chartArea":u?"bottom":"left",dtype:d?"radialLinear":u?"category":"linear"}}))),we(i,o=>{const l=o.options,c=l.id,d=yd(c,l),u=ge(l.type,o.dtype);(l.position===void 0||om(l.position,d)!==om(o.dposition))&&(l.position=o.dposition),r[c]=!0;let h=null;if(c in n&&n[c].type===u)h=n[c];else{const f=as.getScale(u);h=new f({id:c,type:u,ctx:this.ctx,chart:this}),n[h.id]=h}h.init(l,e)}),we(r,(o,l)=>{o||delete n[l]}),we(n,o=>{Hs.configure(this,o,o.options),Hs.addBox(this,o)})}_updateMetasets(){const e=this._metasets,s=this.data.datasets.length,n=e.length;if(e.sort((r,i)=>r.index-i.index),n>s){for(let r=s;r<n;++r)this._destroyDatasetMeta(r);e.splice(s,n-s)}this._sortedMetasets=e.slice(0).sort(lm("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:s}}=this;e.length>s.length&&delete this._stacks,e.forEach((n,r)=>{s.filter(i=>i===n._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],s=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=s.length;n<r;n++){const i=s[n];let o=this.getDatasetMeta(n);const l=i.type||this.config.type;if(o.type&&o.type!==l&&(this._destroyDatasetMeta(n),o=this.getDatasetMeta(n)),o.type=l,o.indexAxis=i.indexAxis||xd(l,this.options),o.order=i.order||0,o.index=n,o.label=""+i.label,o.visible=this.isDatasetVisible(n),o.controller)o.controller.updateIndex(n),o.controller.linkScales();else{const c=as.getController(l),{datasetElementType:d,dataElementType:u}=ze.datasets[l];Object.assign(c,{dataElementType:as.getElement(u),datasetElementType:d&&as.getElement(d)}),o.controller=new c(this,n),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){we(this.data.datasets,(e,s)=>{this.getDatasetMeta(s).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const s=this.config;s.update();const n=this._options=s.createResolver(s.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let d=0,u=this.data.datasets.length;d<u;d++){const{controller:h}=this.getDatasetMeta(d),f=!r&&i.indexOf(h)===-1;h.buildOrUpdateElements(f),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=n.layout.autoPadding?o:0,this._updateLayout(o),r||we(i,d=>{d.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(lm("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){we(this.scales,e=>{Hs.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,s=new Set(Object.keys(this._listeners)),n=new Set(e.events);(!kf(s,n)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,s=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:i}of s){const o=n==="_removeElements"?-i:i;ck(e,r,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const s=this.data.datasets.length,n=i=>new Set(e.filter(o=>o[0]===i).map((o,l)=>l+","+o.splice(1).join(","))),r=n(0);for(let i=1;i<s;i++)if(!kf(r,n(i)))return;return Array.from(r).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Hs.update(this,this.width,this.height,e);const s=this.chartArea,n=s.width<=0||s.height<=0;this._layers=[],we(this.boxes,r=>{n&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,i)=>{r._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let s=0,n=this.data.datasets.length;s<n;++s)this.getDatasetMeta(s).controller.configure();for(let s=0,n=this.data.datasets.length;s<n;++s)this._updateDataset(s,rn(e)?e({datasetIndex:s}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,s){const n=this.getDatasetMeta(e),r={meta:n,index:e,mode:s,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(n.controller._update(s),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ps.has(this)?this.attached&&!ps.running(this)&&ps.start(this):(this.draw(),cm({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:n,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const s=this._layers;for(e=0;e<s.length&&s[e].z<=0;++e)s[e].draw(this.chartArea);for(this._drawDatasets();e<s.length;++e)s[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const s=this._sortedMetasets,n=[];let r,i;for(r=0,i=s.length;r<i;++r){const o=s[r];(!e||o.visible)&&n.push(o)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let s=e.length-1;s>=0;--s)this._drawDataset(e[s]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const s=this.ctx,n={meta:e,index:e.index,cancelable:!0},r=tx(this,e);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(r&&dl(s,r),e.controller.draw(),r&&ul(s),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return Ns(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,s,n,r){const i=o2.modes[s];return typeof i=="function"?i(this,e,n,r):[]}getDatasetMeta(e){const s=this.data.datasets[e],n=this._metasets;let r=n.filter(i=>i&&i._dataset===s).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:s&&s.order||0,index:e,_dataset:s,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=un(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const s=this.data.datasets[e];if(!s)return!1;const n=this.getDatasetMeta(e);return typeof n.hidden=="boolean"?!n.hidden:!s.hidden}setDatasetVisibility(e,s){const n=this.getDatasetMeta(e);n.hidden=!s}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,s,n){const r=n?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,r);Oo(s)?(i.data[s].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),o.update(i,{visible:n}),this.update(l=>l.datasetIndex===e?r:void 0))}hide(e,s){this._updateVisibility(e,s,!1)}show(e,s){this._updateVisibility(e,s,!0)}_destroyDatasetMeta(e){const s=this._metasets[e];s&&s.controller&&s.controller._destroy(),delete this._metasets[e]}_stop(){let e,s;for(this.stop(),ps.remove(this),e=0,s=this.data.datasets.length;e<s;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:s}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Rf(e,s),this.platform.releaseContext(s),this.canvas=null,this.ctx=null),delete Za[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,s=this.platform,n=(i,o)=>{s.addEventListener(this,i,o),e[i]=o},r=(i,o,l)=>{i.offsetX=o,i.offsetY=l,this._eventHandler(i)};we(this.options.events,i=>n(i,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,s=this.platform,n=(c,d)=>{s.addEventListener(this,c,d),e[c]=d},r=(c,d)=>{e[c]&&(s.removeEventListener(this,c,d),delete e[c])},i=(c,d)=>{this.canvas&&this.resize(c,d)};let o;const l=()=>{r("attach",l),this.attached=!0,this.resize(),n("resize",i),n("detach",o)};o=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),n("attach",l)},s.isAttached(this.canvas)?l():o()}unbindEvents(){we(this._listeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._listeners={},we(this._responsiveListeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,s,n){const r=n?"set":"remove";let i,o,l,c;for(s==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),l=0,c=e.length;l<c;++l){o=e[l];const d=o&&this.getDatasetMeta(o.datasetIndex).controller;d&&d[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const s=this._active||[],n=e.map(({datasetIndex:i,index:o})=>{const l=this.getDatasetMeta(i);if(!l)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:l.data[o],index:o}});!To(n,s)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,s))}notifyPlugins(e,s,n){return this._plugins.notify(this,e,s,n)}isPluginEnabled(e){return this._plugins._cache.filter(s=>s.plugin.id===e).length===1}_updateHoverStyles(e,s,n){const r=this.options.hover,i=(c,d)=>c.filter(u=>!d.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),o=i(s,e),l=n?e:i(e,s);o.length&&this.updateHoverStyle(o,r.mode,!1),l.length&&r.mode&&this.updateHoverStyle(l,r.mode,!0)}_eventHandler(e,s){const n={event:e,replay:s,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",n,r)===!1)return;const i=this._handleEvent(e,s,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(i||n.changed)&&this.render(),this}_handleEvent(e,s,n){const{_active:r=[],options:i}=this,o=s,l=this._getActiveElements(e,r,n,o),c=k1(e),d=dk(e,this._lastEvent,n,c);n&&(this._lastEvent=null,Se(i.onHover,[e,l,this],this),c&&Se(i.onClick,[e,l,this],this));const u=!To(l,r);return(u||s)&&(this._active=l,this._updateHoverStyles(l,r,s)),this._lastEvent=d,u}_getActiveElements(e,s,n,r){if(e.type==="mouseout")return[];if(!n)return s;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,r)}},he(Ms,"defaults",ze),he(Ms,"instances",Za),he(Ms,"overrides",Bn),he(Ms,"registry",as),he(Ms,"version",ak),he(Ms,"getChart",dm),Ms);function um(){return we(fl.instances,t=>t._plugins.invalidate())}function fx(t,e,s=e){t.lineCap=ge(s.borderCapStyle,e.borderCapStyle),t.setLineDash(ge(s.borderDash,e.borderDash)),t.lineDashOffset=ge(s.borderDashOffset,e.borderDashOffset),t.lineJoin=ge(s.borderJoinStyle,e.borderJoinStyle),t.lineWidth=ge(s.borderWidth,e.borderWidth),t.strokeStyle=ge(s.borderColor,e.borderColor)}function uk(t,e,s){t.lineTo(s.x,s.y)}function hk(t){return t.stepped?Q1:t.tension||t.cubicInterpolationMode==="monotone"?J1:uk}function mx(t,e,s={}){const n=t.length,{start:r=0,end:i=n-1}=s,{start:o,end:l}=e,c=Math.max(r,o),d=Math.min(i,l),u=r<o&&i<o||r>l&&i>l;return{count:n,start:c,loop:e.loop,ilen:d<c&&!u?n+d-c:d-c}}function fk(t,e,s,n){const{points:r,options:i}=e,{count:o,start:l,loop:c,ilen:d}=mx(r,s,n),u=hk(i);let{move:h=!0,reverse:f}=n||{},m,x,y;for(m=0;m<=d;++m)x=r[(l+(f?d-m:m))%o],!x.skip&&(h?(t.moveTo(x.x,x.y),h=!1):u(t,y,x,f,i.stepped),y=x);return c&&(x=r[(l+(f?d:0))%o],u(t,y,x,f,i.stepped)),!!c}function mk(t,e,s,n){const r=e.points,{count:i,start:o,ilen:l}=mx(r,s,n),{move:c=!0,reverse:d}=n||{};let u=0,h=0,f,m,x,y,b,g;const p=w=>(o+(d?l-w:w))%i,v=()=>{y!==b&&(t.lineTo(u,b),t.lineTo(u,y),t.lineTo(u,g))};for(c&&(m=r[p(0)],t.moveTo(m.x,m.y)),f=0;f<=l;++f){if(m=r[p(f)],m.skip)continue;const w=m.x,j=m.y,N=w|0;N===x?(j<y?y=j:j>b&&(b=j),u=(h*u+w)/++h):(v(),t.lineTo(w,j),x=N,h=0,y=b=j),g=j}v()}function vd(t){const e=t.options,s=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!s?mk:fk}function pk(t){return t.stepped?Aj:t.tension||t.cubicInterpolationMode==="monotone"?Oj:_n}function gk(t,e,s,n){let r=e._path;r||(r=e._path=new Path2D,e.path(r,s,n)&&r.closePath()),fx(t,e.options),t.stroke(r)}function xk(t,e,s,n){const{segments:r,options:i}=e,o=vd(e);for(const l of r)fx(t,i,l.style),t.beginPath(),o(t,e,l,{start:s,end:s+n-1})&&t.closePath(),t.stroke()}const yk=typeof Path2D=="function";function vk(t,e,s,n){yk&&!e.options.segment?gk(t,e,s,n):xk(t,e,s,n)}class Vs extends an{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,s){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const r=n.spanGaps?this._loop:this._fullLoop;jj(this._points,n,e,r,s),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=zj(this,this.options.segment))}first(){const e=this.segments,s=this.points;return e.length&&s[e[0].start]}last(){const e=this.segments,s=this.points,n=e.length;return n&&s[e[n-1].end]}interpolate(e,s){const n=this.options,r=e[s],i=this.points,o=ex(this,{property:s,start:r,end:r});if(!o.length)return;const l=[],c=pk(n);let d,u;for(d=0,u=o.length;d<u;++d){const{start:h,end:f}=o[d],m=i[h],x=i[f];if(m===x){l.push(m);continue}const y=Math.abs((r-m[s])/(x[s]-m[s])),b=c(m,x,y,n.stepped);b[s]=e[s],l.push(b)}return l.length===1?l[0]:l}pathSegment(e,s,n){return vd(this)(e,this,s,n)}path(e,s,n){const r=this.segments,i=vd(this);let o=this._loop;s=s||0,n=n||this.points.length-s;for(const l of r)o&=i(e,this,l,{start:s,end:s+n-1});return!!o}draw(e,s,n,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),vk(e,this,n,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}he(Vs,"id","line"),he(Vs,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),he(Vs,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),he(Vs,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function hm(t,e,s,n){const r=t.options,{[s]:i}=t.getProps([s],n);return Math.abs(e-i)<r.radius+r.hitRadius}class eo extends an{constructor(s){super();he(this,"parsed");he(this,"skip");he(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,s&&Object.assign(this,s)}inRange(s,n,r){const i=this.options,{x:o,y:l}=this.getProps(["x","y"],r);return Math.pow(s-o,2)+Math.pow(n-l,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(s,n){return hm(this,s,"x",n)}inYRange(s,n){return hm(this,s,"y",n)}getCenterPoint(s){const{x:n,y:r}=this.getProps(["x","y"],s);return{x:n,y:r}}size(s){s=s||this.options||{};let n=s.radius||0;n=Math.max(n,n&&s.hoverRadius||0);const r=n&&s.borderWidth||0;return(n+r)*2}draw(s,n){const r=this.options;this.skip||r.radius<.1||!Ns(this,n,this.size(r)/2)||(s.strokeStyle=r.borderColor,s.lineWidth=r.borderWidth,s.fillStyle=r.backgroundColor,gd(s,r,this.x,this.y))}getRange(){const s=this.options||{};return s.radius+s.hitRadius}}he(eo,"id","point"),he(eo,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),he(eo,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function bk(t,e,s){const n=t.segments,r=t.points,i=e.points,o=[];for(const l of n){let{start:c,end:d}=l;d=ml(c,d,r);const u=bd(s,r[c],r[d],l.loop);if(!e.segments){o.push({source:l,target:u,start:r[c],end:r[d]});continue}const h=ex(e,u);for(const f of h){const m=bd(s,i[f.start],i[f.end],f.loop),x=Z0(l,r,m);for(const y of x)o.push({source:y,target:f,start:{[s]:fm(u,m,"start",Math.max)},end:{[s]:fm(u,m,"end",Math.min)}})}}return o}function bd(t,e,s,n){if(n)return;let r=e[t],i=s[t];return t==="angle"&&(r=St(r),i=St(i)),{property:t,start:r,end:i}}function wk(t,e){const{x:s=null,y:n=null}=t||{},r=e.points,i=[];return e.segments.forEach(({start:o,end:l})=>{l=ml(o,l,r);const c=r[o],d=r[l];n!==null?(i.push({x:c.x,y:n}),i.push({x:d.x,y:n})):s!==null&&(i.push({x:s,y:c.y}),i.push({x:s,y:d.y}))}),i}function ml(t,e,s){for(;e>t;e--){const n=s[e];if(!isNaN(n.x)&&!isNaN(n.y))break}return e}function fm(t,e,s,n){return t&&e?n(t[s],e[s]):t?t[s]:e?e[s]:0}function px(t,e){let s=[],n=!1;return Ie(t)?(n=!0,s=t):s=wk(t,e),s.length?new Vs({points:s,options:{tension:0},_loop:n,_fullLoop:n}):null}function mm(t){return t&&t.fill!==!1}function _k(t,e,s){let r=t[e].fill;const i=[e];let o;if(!s)return r;for(;r!==!1&&i.indexOf(r)===-1;){if(!at(r))return r;if(o=t[r],!o)return!1;if(o.visible)return r;i.push(r),r=o.fill}return!1}function jk(t,e,s){const n=Ck(t);if(ve(n))return isNaN(n.value)?!1:n;let r=parseFloat(n);return at(r)&&Math.floor(r)===r?kk(n[0],e,r,s):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function kk(t,e,s,n){return(t==="-"||t==="+")&&(s=e+s),s===e||s<0||s>=n?!1:s}function Nk(t,e){let s=null;return t==="start"?s=e.bottom:t==="end"?s=e.top:ve(t)?s=e.getPixelForValue(t.value):e.getBasePixel&&(s=e.getBasePixel()),s}function Sk(t,e,s){let n;return t==="start"?n=s:t==="end"?n=e.options.reverse?e.min:e.max:ve(t)?n=t.value:n=e.getBaseValue(),n}function Ck(t){const e=t.options,s=e.fill;let n=ge(s&&s.target,s);return n===void 0&&(n=!!e.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function Pk(t){const{scale:e,index:s,line:n}=t,r=[],i=n.segments,o=n.points,l=Ek(e,s);l.push(px({x:null,y:e.bottom},n));for(let c=0;c<i.length;c++){const d=i[c];for(let u=d.start;u<=d.end;u++)Tk(r,o[u],l)}return new Vs({points:r,options:{}})}function Ek(t,e){const s=[],n=t.getMatchingVisibleMetas("line");for(let r=0;r<n.length;r++){const i=n[r];if(i.index===e)break;i.hidden||s.unshift(i.dataset)}return s}function Tk(t,e,s){const n=[];for(let r=0;r<s.length;r++){const i=s[r],{first:o,last:l,point:c}=Ak(i,e,"x");if(!(!c||o&&l)){if(o)n.unshift(c);else if(t.push(c),!l)break}}t.push(...n)}function Ak(t,e,s){const n=t.interpolate(e,s);if(!n)return{};const r=n[s],i=t.segments,o=t.points;let l=!1,c=!1;for(let d=0;d<i.length;d++){const u=i[d],h=o[u.start][s],f=o[u.end][s];if(dr(r,h,f)){l=r===h,c=r===f;break}}return{first:l,last:c,point:n}}class gx{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,s,n){const{x:r,y:i,radius:o}=this;return s=s||{start:0,end:Tt},e.arc(r,i,o,s.end,s.start,!0),!n.bounds}interpolate(e){const{x:s,y:n,radius:r}=this,i=e.angle;return{x:s+Math.cos(i)*r,y:n+Math.sin(i)*r,angle:i}}}function Ok(t){const{chart:e,fill:s,line:n}=t;if(at(s))return Rk(e,s);if(s==="stack")return Pk(t);if(s==="shape")return!0;const r=Mk(t);return r instanceof gx?r:px(r,n)}function Rk(t,e){const s=t.getDatasetMeta(e);return s&&t.isDatasetVisible(e)?s.dataset:null}function Mk(t){return(t.scale||{}).getPointPositionForValue?Dk(t):Lk(t)}function Lk(t){const{scale:e={},fill:s}=t,n=Nk(s,e);if(at(n)){const r=e.isHorizontal();return{x:r?n:null,y:r?null:n}}return null}function Dk(t){const{scale:e,fill:s}=t,n=e.options,r=e.getLabels().length,i=n.reverse?e.max:e.min,o=Sk(s,e,i),l=[];if(n.grid.circular){const c=e.getPointPositionForValue(0,i);return new gx({x:c.x,y:c.y,radius:e.getDistanceFromCenterForValue(o)})}for(let c=0;c<r;++c)l.push(e.getPointPositionForValue(c,o));return l}function ic(t,e,s){const n=Ok(e),{chart:r,index:i,line:o,scale:l,axis:c}=e,d=o.options,u=d.fill,h=d.backgroundColor,{above:f=h,below:m=h}=u||{},x=r.getDatasetMeta(i),y=tx(r,x);n&&o.points.length&&(dl(t,s),Ik(t,{line:o,target:n,above:f,below:m,area:s,scale:l,axis:c,clip:y}),ul(t))}function Ik(t,e){const{line:s,target:n,above:r,below:i,area:o,scale:l,clip:c}=e,d=s._loop?"angle":e.axis;t.save();let u=i;i!==r&&(d==="x"?(pm(t,n,o.top),ac(t,{line:s,target:n,color:r,scale:l,property:d,clip:c}),t.restore(),t.save(),pm(t,n,o.bottom)):d==="y"&&(gm(t,n,o.left),ac(t,{line:s,target:n,color:i,scale:l,property:d,clip:c}),t.restore(),t.save(),gm(t,n,o.right),u=r)),ac(t,{line:s,target:n,color:u,scale:l,property:d,clip:c}),t.restore()}function pm(t,e,s){const{segments:n,points:r}=e;let i=!0,o=!1;t.beginPath();for(const l of n){const{start:c,end:d}=l,u=r[c],h=r[ml(c,d,r)];i?(t.moveTo(u.x,u.y),i=!1):(t.lineTo(u.x,s),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,l,{move:o}),o?t.closePath():t.lineTo(h.x,s)}t.lineTo(e.first().x,s),t.closePath(),t.clip()}function gm(t,e,s){const{segments:n,points:r}=e;let i=!0,o=!1;t.beginPath();for(const l of n){const{start:c,end:d}=l,u=r[c],h=r[ml(c,d,r)];i?(t.moveTo(u.x,u.y),i=!1):(t.lineTo(s,u.y),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,l,{move:o}),o?t.closePath():t.lineTo(s,h.y)}t.lineTo(s,e.first().y),t.closePath(),t.clip()}function ac(t,e){const{line:s,target:n,property:r,color:i,scale:o,clip:l}=e,c=bk(s,n,r);for(const{source:d,target:u,start:h,end:f}of c){const{style:{backgroundColor:m=i}={}}=d,x=n!==!0;t.save(),t.fillStyle=m,zk(t,o,l,x&&bd(r,h,f)),t.beginPath();const y=!!s.pathSegment(t,d);let b;if(x){y?t.closePath():xm(t,n,f,r);const g=!!n.pathSegment(t,u,{move:y,reverse:!0});b=y&&g,b||xm(t,n,h,r)}t.closePath(),t.fill(b?"evenodd":"nonzero"),t.restore()}}function zk(t,e,s,n){const r=e.chart.chartArea,{property:i,start:o,end:l}=n||{};if(i==="x"||i==="y"){let c,d,u,h;i==="x"?(c=o,d=r.top,u=l,h=r.bottom):(c=r.left,d=o,u=r.right,h=l),t.beginPath(),s&&(c=Math.max(c,s.left),u=Math.min(u,s.right),d=Math.max(d,s.top),h=Math.min(h,s.bottom)),t.rect(c,d,u-c,h-d),t.clip()}}function xm(t,e,s,n){const r=e.interpolate(s,n);r&&t.lineTo(r.x,r.y)}var Bk={id:"filler",afterDatasetsUpdate(t,e,s){const n=(t.data.datasets||[]).length,r=[];let i,o,l,c;for(o=0;o<n;++o)i=t.getDatasetMeta(o),l=i.dataset,c=null,l&&l.options&&l instanceof Vs&&(c={visible:t.isDatasetVisible(o),index:o,fill:jk(l,o,n),chart:t,axis:i.controller.options.indexAxis,scale:i.vScale,line:l}),i.$filler=c,r.push(c);for(o=0;o<n;++o)c=r[o],!(!c||c.fill===!1)&&(c.fill=_k(r,o,s.propagate))},beforeDraw(t,e,s){const n=s.drawTime==="beforeDraw",r=t.getSortedVisibleDatasetMetas(),i=t.chartArea;for(let o=r.length-1;o>=0;--o){const l=r[o].$filler;l&&(l.line.updateControlPoints(i,l.axis),n&&l.fill&&ic(t.ctx,l,i))}},beforeDatasetsDraw(t,e,s){if(s.drawTime!=="beforeDatasetsDraw")return;const n=t.getSortedVisibleDatasetMetas();for(let r=n.length-1;r>=0;--r){const i=n[r].$filler;mm(i)&&ic(t.ctx,i,t.chartArea)}},beforeDatasetDraw(t,e,s){const n=e.meta.$filler;!mm(n)||s.drawTime!=="beforeDatasetDraw"||ic(t.ctx,n,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const ym=(t,e)=>{let{boxHeight:s=e,boxWidth:n=e}=t;return t.usePointStyle&&(s=Math.min(s,e),n=t.pointStyleWidth||Math.min(n,e)),{boxWidth:n,boxHeight:s,itemHeight:Math.max(e,s)}},$k=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class vm extends an{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,s,n){this.maxWidth=e,this.maxHeight=s,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let s=Se(e.generateLabels,[this.chart],this)||[];e.filter&&(s=s.filter(n=>e.filter(n,this.chart.data))),e.sort&&(s=s.sort((n,r)=>e.sort(n,r,this.chart.data))),this.options.reverse&&s.reverse(),this.legendItems=s}fit(){const{options:e,ctx:s}=this;if(!e.display){this.width=this.height=0;return}const n=e.labels,r=Xe(n.font),i=r.size,o=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=ym(n,i);let d,u;s.font=r.string,this.isHorizontal()?(d=this.maxWidth,u=this._fitRows(o,i,l,c)+10):(u=this.maxHeight,d=this._fitCols(o,r,l,c)+10),this.width=Math.min(d,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,s,n,r){const{ctx:i,maxWidth:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],d=this.lineWidths=[0],u=r+l;let h=e;i.textAlign="left",i.textBaseline="middle";let f=-1,m=-u;return this.legendItems.forEach((x,y)=>{const b=n+s/2+i.measureText(x.text).width;(y===0||d[d.length-1]+b+2*l>o)&&(h+=u,d[d.length-(y>0?0:1)]=0,m+=u,f++),c[y]={left:0,top:m,row:f,width:b,height:r},d[d.length-1]+=b+l}),h}_fitCols(e,s,n,r){const{ctx:i,maxHeight:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],d=this.columnSizes=[],u=o-e;let h=l,f=0,m=0,x=0,y=0;return this.legendItems.forEach((b,g)=>{const{itemWidth:p,itemHeight:v}=Fk(n,s,i,b,r);g>0&&m+v+2*l>u&&(h+=f+l,d.push({width:f,height:m}),x+=f+l,y++,f=m=0),c[g]={left:x,top:m,col:y,width:p,height:v},f=Math.max(f,p),m+=v+l}),h+=f,d.push({width:f,height:m}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:s,options:{align:n,labels:{padding:r},rtl:i}}=this,o=yr(i,this.left,this.width);if(this.isHorizontal()){let l=0,c=kt(n,this.left+r,this.right-this.lineWidths[l]);for(const d of s)l!==d.row&&(l=d.row,c=kt(n,this.left+r,this.right-this.lineWidths[l])),d.top+=this.top+e+r,d.left=o.leftForLtr(o.x(c),d.width),c+=d.width+r}else{let l=0,c=kt(n,this.top+e+r,this.bottom-this.columnSizes[l].height);for(const d of s)d.col!==l&&(l=d.col,c=kt(n,this.top+e+r,this.bottom-this.columnSizes[l].height)),d.top=c,d.left+=this.left+r,d.left=o.leftForLtr(o.x(d.left),d.width),c+=d.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;dl(e,this),this._draw(),ul(e)}}_draw(){const{options:e,columnSizes:s,lineWidths:n,ctx:r}=this,{align:i,labels:o}=e,l=ze.color,c=yr(e.rtl,this.left,this.width),d=Xe(o.font),{padding:u}=o,h=d.size,f=h/2;let m;this.drawTitle(),r.textAlign=c.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=d.string;const{boxWidth:x,boxHeight:y,itemHeight:b}=ym(o,h),g=function(N,P,A){if(isNaN(x)||x<=0||isNaN(y)||y<0)return;r.save();const S=ge(A.lineWidth,1);if(r.fillStyle=ge(A.fillStyle,l),r.lineCap=ge(A.lineCap,"butt"),r.lineDashOffset=ge(A.lineDashOffset,0),r.lineJoin=ge(A.lineJoin,"miter"),r.lineWidth=S,r.strokeStyle=ge(A.strokeStyle,l),r.setLineDash(ge(A.lineDash,[])),o.usePointStyle){const R={radius:y*Math.SQRT2/2,pointStyle:A.pointStyle,rotation:A.rotation,borderWidth:S},L=c.xPlus(N,x/2),V=P+f;W0(r,R,L,V,o.pointStyleWidth&&x)}else{const R=P+Math.max((h-y)/2,0),L=c.leftForLtr(N,x),V=xr(A.borderRadius);r.beginPath(),Object.values(V).some(M=>M!==0)?Do(r,{x:L,y:R,w:x,h:y,radius:V}):r.rect(L,R,x,y),r.fill(),S!==0&&r.stroke()}r.restore()},p=function(N,P,A){Er(r,A.text,N,P+b/2,d,{strikethrough:A.hidden,textAlign:c.textAlign(A.textAlign)})},v=this.isHorizontal(),w=this._computeTitleHeight();v?m={x:kt(i,this.left+u,this.right-n[0]),y:this.top+u+w,line:0}:m={x:this.left+u,y:kt(i,this.top+w+u,this.bottom-s[0].height),line:0},Q0(this.ctx,e.textDirection);const j=b+u;this.legendItems.forEach((N,P)=>{r.strokeStyle=N.fontColor,r.fillStyle=N.fontColor;const A=r.measureText(N.text).width,S=c.textAlign(N.textAlign||(N.textAlign=o.textAlign)),R=x+f+A;let L=m.x,V=m.y;c.setWidth(this.width),v?P>0&&L+R+u>this.right&&(V=m.y+=j,m.line++,L=m.x=kt(i,this.left+u,this.right-n[m.line])):P>0&&V+j>this.bottom&&(L=m.x=L+s[m.line].width+u,m.line++,V=m.y=kt(i,this.top+w+u,this.bottom-s[m.line].height));const M=c.x(L);if(g(M,V,N),L=B1(S,L+x+f,v?L+R:this.right,e.rtl),p(c.x(L),V,N),v)m.x+=R+u;else if(typeof N.text!="string"){const K=d.lineHeight;m.y+=xx(N,K)+u}else m.y+=j}),J0(this.ctx,e.textDirection)}drawTitle(){const e=this.options,s=e.title,n=Xe(s.font),r=ut(s.padding);if(!s.display)return;const i=yr(e.rtl,this.left,this.width),o=this.ctx,l=s.position,c=n.size/2,d=r.top+c;let u,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+d,h=kt(e.align,h,this.right-f);else{const x=this.columnSizes.reduce((y,b)=>Math.max(y,b.height),0);u=d+kt(e.align,this.top,this.bottom-x-e.labels.padding-this._computeTitleHeight())}const m=kt(l,h,h+f);o.textAlign=i.textAlign(B0(l)),o.textBaseline="middle",o.strokeStyle=s.color,o.fillStyle=s.color,o.font=n.string,Er(o,s.text,m,u,n)}_computeTitleHeight(){const e=this.options.title,s=Xe(e.font),n=ut(e.padding);return e.display?s.lineHeight+n.height:0}_getLegendItemAt(e,s){let n,r,i;if(dr(e,this.left,this.right)&&dr(s,this.top,this.bottom)){for(i=this.legendHitBoxes,n=0;n<i.length;++n)if(r=i[n],dr(e,r.left,r.left+r.width)&&dr(s,r.top,r.top+r.height))return this.legendItems[n]}return null}handleEvent(e){const s=this.options;if(!Hk(e.type,s))return;const n=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,i=$k(r,n);r&&!i&&Se(s.onLeave,[e,r,this],this),this._hoveredItem=n,n&&!i&&Se(s.onHover,[e,n,this],this)}else n&&Se(s.onClick,[e,n,this],this)}}function Fk(t,e,s,n,r){const i=Uk(n,t,e,s),o=Wk(r,n,e.lineHeight);return{itemWidth:i,itemHeight:o}}function Uk(t,e,s,n){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((i,o)=>i.length>o.length?i:o)),e+s.size/2+n.measureText(r).width}function Wk(t,e,s){let n=t;return typeof e.text!="string"&&(n=xx(e,s)),n}function xx(t,e){const s=t.text?t.text.length:0;return e*s}function Hk(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var Vk={id:"legend",_element:vm,start(t,e,s){const n=t.legend=new vm({ctx:t.ctx,options:s,chart:t});Hs.configure(t,n,s),Hs.addBox(t,n)},stop(t){Hs.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,s){const n=t.legend;Hs.configure(t,n,s),n.options=s},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,s){const n=e.datasetIndex,r=s.chart;r.isDatasetVisible(n)?(r.hide(n),e.hidden=!0):(r.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:s,pointStyle:n,textAlign:r,color:i,useBorderRadius:o,borderRadius:l}}=t.legend.options;return t._getSortedDatasetMetas().map(c=>{const d=c.controller.getStyle(s?0:void 0),u=ut(d.borderWidth);return{text:e[c.index].label,fillStyle:d.backgroundColor,fontColor:i,hidden:!c.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:d.borderColor,pointStyle:n||d.pointStyle,rotation:d.rotation,textAlign:r||d.textAlign,borderRadius:o&&(l||d.borderRadius),datasetIndex:c.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};const ai={average(t){if(!t.length)return!1;let e,s,n=new Set,r=0,i=0;for(e=0,s=t.length;e<s;++e){const l=t[e].element;if(l&&l.hasValue()){const c=l.tooltipPosition();n.add(c.x),r+=c.y,++i}}return i===0||n.size===0?!1:{x:[...n].reduce((l,c)=>l+c)/n.size,y:r/i}},nearest(t,e){if(!t.length)return!1;let s=e.x,n=e.y,r=Number.POSITIVE_INFINITY,i,o,l;for(i=0,o=t.length;i<o;++i){const c=t[i].element;if(c&&c.hasValue()){const d=c.getCenterPoint(),u=fd(e,d);u<r&&(r=u,l=c)}}if(l){const c=l.tooltipPosition();s=c.x,n=c.y}return{x:s,y:n}}};function rs(t,e){return e&&(Ie(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function gs(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function qk(t,e){const{element:s,datasetIndex:n,index:r}=e,i=t.getDatasetMeta(n).controller,{label:o,value:l}=i.getLabelAndValue(r);return{chart:t,label:o,parsed:i.getParsed(r),raw:t.data.datasets[n].data[r],formattedValue:l,dataset:i.getDataset(),dataIndex:r,datasetIndex:n,element:s}}function bm(t,e){const s=t.chart.ctx,{body:n,footer:r,title:i}=t,{boxWidth:o,boxHeight:l}=e,c=Xe(e.bodyFont),d=Xe(e.titleFont),u=Xe(e.footerFont),h=i.length,f=r.length,m=n.length,x=ut(e.padding);let y=x.height,b=0,g=n.reduce((w,j)=>w+j.before.length+j.lines.length+j.after.length,0);if(g+=t.beforeBody.length+t.afterBody.length,h&&(y+=h*d.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),g){const w=e.displayColors?Math.max(l,c.lineHeight):c.lineHeight;y+=m*w+(g-m)*c.lineHeight+(g-1)*e.bodySpacing}f&&(y+=e.footerMarginTop+f*u.lineHeight+(f-1)*e.footerSpacing);let p=0;const v=function(w){b=Math.max(b,s.measureText(w).width+p)};return s.save(),s.font=d.string,we(t.title,v),s.font=c.string,we(t.beforeBody.concat(t.afterBody),v),p=e.displayColors?o+2+e.boxPadding:0,we(n,w=>{we(w.before,v),we(w.lines,v),we(w.after,v)}),p=0,s.font=u.string,we(t.footer,v),s.restore(),b+=x.width,{width:b,height:y}}function Kk(t,e){const{y:s,height:n}=e;return s<n/2?"top":s>t.height-n/2?"bottom":"center"}function Yk(t,e,s,n){const{x:r,width:i}=n,o=s.caretSize+s.caretPadding;if(t==="left"&&r+i+o>e.width||t==="right"&&r-i-o<0)return!0}function Gk(t,e,s,n){const{x:r,width:i}=s,{width:o,chartArea:{left:l,right:c}}=t;let d="center";return n==="center"?d=r<=(l+c)/2?"left":"right":r<=i/2?d="left":r>=o-i/2&&(d="right"),Yk(d,t,e,s)&&(d="center"),d}function wm(t,e,s){const n=s.yAlign||e.yAlign||Kk(t,s);return{xAlign:s.xAlign||e.xAlign||Gk(t,e,s,n),yAlign:n}}function Qk(t,e){let{x:s,width:n}=t;return e==="right"?s-=n:e==="center"&&(s-=n/2),s}function Jk(t,e,s){let{y:n,height:r}=t;return e==="top"?n+=s:e==="bottom"?n-=r+s:n-=r/2,n}function _m(t,e,s,n){const{caretSize:r,caretPadding:i,cornerRadius:o}=t,{xAlign:l,yAlign:c}=s,d=r+i,{topLeft:u,topRight:h,bottomLeft:f,bottomRight:m}=xr(o);let x=Qk(e,l);const y=Jk(e,c,d);return c==="center"?l==="left"?x+=d:l==="right"&&(x-=d):l==="left"?x-=Math.max(u,f)+r:l==="right"&&(x+=Math.max(h,m)+r),{x:ks(x,0,n.width-e.width),y:ks(y,0,n.height-e.height)}}function Da(t,e,s){const n=ut(s.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-n.right:t.x+n.left}function jm(t){return rs([],gs(t))}function Xk(t,e,s){return un(t,{tooltip:e,tooltipItems:s,type:"tooltip"})}function km(t,e){const s=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return s?t.override(s):t}const yx={beforeTitle:fs,title(t){if(t.length>0){const e=t[0],s=e.chart.data.labels,n=s?s.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return s[e.dataIndex]}return""},afterTitle:fs,beforeBody:fs,beforeLabel:fs,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const s=t.formattedValue;return Te(s)||(e+=s),e},labelColor(t){const s=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:s.borderColor,backgroundColor:s.backgroundColor,borderWidth:s.borderWidth,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const s=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:s.pointStyle,rotation:s.rotation}},afterLabel:fs,afterBody:fs,beforeFooter:fs,footer:fs,afterFooter:fs};function pt(t,e,s,n){const r=t[e].call(s,n);return typeof r>"u"?yx[e].call(s,n):r}class wd extends an{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const s=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&s.options.animation&&n.animations,i=new sx(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=Xk(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,s){const{callbacks:n}=s,r=pt(n,"beforeTitle",this,e),i=pt(n,"title",this,e),o=pt(n,"afterTitle",this,e);let l=[];return l=rs(l,gs(r)),l=rs(l,gs(i)),l=rs(l,gs(o)),l}getBeforeBody(e,s){return jm(pt(s.callbacks,"beforeBody",this,e))}getBody(e,s){const{callbacks:n}=s,r=[];return we(e,i=>{const o={before:[],lines:[],after:[]},l=km(n,i);rs(o.before,gs(pt(l,"beforeLabel",this,i))),rs(o.lines,pt(l,"label",this,i)),rs(o.after,gs(pt(l,"afterLabel",this,i))),r.push(o)}),r}getAfterBody(e,s){return jm(pt(s.callbacks,"afterBody",this,e))}getFooter(e,s){const{callbacks:n}=s,r=pt(n,"beforeFooter",this,e),i=pt(n,"footer",this,e),o=pt(n,"afterFooter",this,e);let l=[];return l=rs(l,gs(r)),l=rs(l,gs(i)),l=rs(l,gs(o)),l}_createItems(e){const s=this._active,n=this.chart.data,r=[],i=[],o=[];let l=[],c,d;for(c=0,d=s.length;c<d;++c)l.push(qk(this.chart,s[c]));return e.filter&&(l=l.filter((u,h,f)=>e.filter(u,h,f,n))),e.itemSort&&(l=l.sort((u,h)=>e.itemSort(u,h,n))),we(l,u=>{const h=km(e.callbacks,u);r.push(pt(h,"labelColor",this,u)),i.push(pt(h,"labelPointStyle",this,u)),o.push(pt(h,"labelTextColor",this,u))}),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=l,l}update(e,s){const n=this.options.setContext(this.getContext()),r=this._active;let i,o=[];if(!r.length)this.opacity!==0&&(i={opacity:0});else{const l=ai[n.position].call(this,r,this._eventPosition);o=this._createItems(n),this.title=this.getTitle(o,n),this.beforeBody=this.getBeforeBody(o,n),this.body=this.getBody(o,n),this.afterBody=this.getAfterBody(o,n),this.footer=this.getFooter(o,n);const c=this._size=bm(this,n),d=Object.assign({},l,c),u=wm(this.chart,n,d),h=_m(n,d,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,i={opacity:1,x:h.x,y:h.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:s})}drawCaret(e,s,n,r){const i=this.getCaretPosition(e,n,r);s.lineTo(i.x1,i.y1),s.lineTo(i.x2,i.y2),s.lineTo(i.x3,i.y3)}getCaretPosition(e,s,n){const{xAlign:r,yAlign:i}=this,{caretSize:o,cornerRadius:l}=n,{topLeft:c,topRight:d,bottomLeft:u,bottomRight:h}=xr(l),{x:f,y:m}=e,{width:x,height:y}=s;let b,g,p,v,w,j;return i==="center"?(w=m+y/2,r==="left"?(b=f,g=b-o,v=w+o,j=w-o):(b=f+x,g=b+o,v=w-o,j=w+o),p=b):(r==="left"?g=f+Math.max(c,u)+o:r==="right"?g=f+x-Math.max(d,h)-o:g=this.caretX,i==="top"?(v=m,w=v-o,b=g-o,p=g+o):(v=m+y,w=v+o,b=g+o,p=g-o),j=v),{x1:b,x2:g,x3:p,y1:v,y2:w,y3:j}}drawTitle(e,s,n){const r=this.title,i=r.length;let o,l,c;if(i){const d=yr(n.rtl,this.x,this.width);for(e.x=Da(this,n.titleAlign,n),s.textAlign=d.textAlign(n.titleAlign),s.textBaseline="middle",o=Xe(n.titleFont),l=n.titleSpacing,s.fillStyle=n.titleColor,s.font=o.string,c=0;c<i;++c)s.fillText(r[c],d.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+l,c+1===i&&(e.y+=n.titleMarginBottom-l)}}_drawColorBox(e,s,n,r,i){const o=this.labelColors[n],l=this.labelPointStyles[n],{boxHeight:c,boxWidth:d}=i,u=Xe(i.bodyFont),h=Da(this,"left",i),f=r.x(h),m=c<u.lineHeight?(u.lineHeight-c)/2:0,x=s.y+m;if(i.usePointStyle){const y={radius:Math.min(d,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},b=r.leftForLtr(f,d)+d/2,g=x+c/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,gd(e,y,b,g),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,gd(e,y,b,g)}else{e.lineWidth=ve(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const y=r.leftForLtr(f,d),b=r.leftForLtr(r.xPlus(f,1),d-2),g=xr(o.borderRadius);Object.values(g).some(p=>p!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,Do(e,{x:y,y:x,w:d,h:c,radius:g}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Do(e,{x:b,y:x+1,w:d-2,h:c-2,radius:g}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(y,x,d,c),e.strokeRect(y,x,d,c),e.fillStyle=o.backgroundColor,e.fillRect(b,x+1,d-2,c-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,s,n){const{body:r}=this,{bodySpacing:i,bodyAlign:o,displayColors:l,boxHeight:c,boxWidth:d,boxPadding:u}=n,h=Xe(n.bodyFont);let f=h.lineHeight,m=0;const x=yr(n.rtl,this.x,this.width),y=function(A){s.fillText(A,x.x(e.x+m),e.y+f/2),e.y+=f+i},b=x.textAlign(o);let g,p,v,w,j,N,P;for(s.textAlign=o,s.textBaseline="middle",s.font=h.string,e.x=Da(this,b,n),s.fillStyle=n.bodyColor,we(this.beforeBody,y),m=l&&b!=="right"?o==="center"?d/2+u:d+2+u:0,w=0,N=r.length;w<N;++w){for(g=r[w],p=this.labelTextColors[w],s.fillStyle=p,we(g.before,y),v=g.lines,l&&v.length&&(this._drawColorBox(s,e,w,x,n),f=Math.max(h.lineHeight,c)),j=0,P=v.length;j<P;++j)y(v[j]),f=h.lineHeight;we(g.after,y)}m=0,f=h.lineHeight,we(this.afterBody,y),e.y-=i}drawFooter(e,s,n){const r=this.footer,i=r.length;let o,l;if(i){const c=yr(n.rtl,this.x,this.width);for(e.x=Da(this,n.footerAlign,n),e.y+=n.footerMarginTop,s.textAlign=c.textAlign(n.footerAlign),s.textBaseline="middle",o=Xe(n.footerFont),s.fillStyle=n.footerColor,s.font=o.string,l=0;l<i;++l)s.fillText(r[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+n.footerSpacing}}drawBackground(e,s,n,r){const{xAlign:i,yAlign:o}=this,{x:l,y:c}=e,{width:d,height:u}=n,{topLeft:h,topRight:f,bottomLeft:m,bottomRight:x}=xr(r.cornerRadius);s.fillStyle=r.backgroundColor,s.strokeStyle=r.borderColor,s.lineWidth=r.borderWidth,s.beginPath(),s.moveTo(l+h,c),o==="top"&&this.drawCaret(e,s,n,r),s.lineTo(l+d-f,c),s.quadraticCurveTo(l+d,c,l+d,c+f),o==="center"&&i==="right"&&this.drawCaret(e,s,n,r),s.lineTo(l+d,c+u-x),s.quadraticCurveTo(l+d,c+u,l+d-x,c+u),o==="bottom"&&this.drawCaret(e,s,n,r),s.lineTo(l+m,c+u),s.quadraticCurveTo(l,c+u,l,c+u-m),o==="center"&&i==="left"&&this.drawCaret(e,s,n,r),s.lineTo(l,c+h),s.quadraticCurveTo(l,c,l+h,c),s.closePath(),s.fill(),r.borderWidth>0&&s.stroke()}_updateAnimationTarget(e){const s=this.chart,n=this.$animations,r=n&&n.x,i=n&&n.y;if(r||i){const o=ai[e.position].call(this,this._active,this._eventPosition);if(!o)return;const l=this._size=bm(this,e),c=Object.assign({},o,this._size),d=wm(s,e,c),u=_m(e,c,d,s);(r._to!==u.x||i._to!==u.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=l.width,this.height=l.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const s=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(s);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const o=ut(s.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;s.enabled&&l&&(e.save(),e.globalAlpha=n,this.drawBackground(i,e,r,s),Q0(e,s.textDirection),i.y+=o.top,this.drawTitle(i,e,s),this.drawBody(i,e,s),this.drawFooter(i,e,s),J0(e,s.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,s){const n=this._active,r=e.map(({datasetIndex:l,index:c})=>{const d=this.chart.getDatasetMeta(l);if(!d)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:d.data[c],index:c}}),i=!To(n,r),o=this._positionChanged(r,s);(i||o)&&(this._active=r,this._eventPosition=s,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,s,n=!0){if(s&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],o=this._getActiveElements(e,i,s,n),l=this._positionChanged(o,e),c=s||!To(o,i)||l;return c&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,s))),c}_getActiveElements(e,s,n,r){const i=this.options;if(e.type==="mouseout")return[];if(!r)return s.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,n);return i.reverse&&o.reverse(),o}_positionChanged(e,s){const{caretX:n,caretY:r,options:i}=this,o=ai[i.position].call(this,e,s);return o!==!1&&(n!==o.x||r!==o.y)}}he(wd,"positioners",ai);var Zk={id:"tooltip",_element:wd,positioners:ai,afterInit(t,e,s){s&&(t.tooltip=new wd({chart:t,options:s}))},beforeUpdate(t,e,s){t.tooltip&&t.tooltip.initialize(s)},reset(t,e,s){t.tooltip&&t.tooltip.initialize(s)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const s={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...s,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",s)}},afterEvent(t,e){if(t.tooltip){const s=e.replay;t.tooltip.handleEvent(e.event,s,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:yx},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function eN(t,e){const s=[],{bounds:r,step:i,min:o,max:l,precision:c,count:d,maxTicks:u,maxDigits:h,includeBounds:f}=t,m=i||1,x=u-1,{min:y,max:b}=e,g=!Te(o),p=!Te(l),v=!Te(d),w=(b-y)/(h+1);let j=Sf((b-y)/x/m)*m,N,P,A,S;if(j<1e-14&&!g&&!p)return[{value:y},{value:b}];S=Math.ceil(b/j)-Math.floor(y/j),S>x&&(j=Sf(S*j/x/m)*m),Te(c)||(N=Math.pow(10,c),j=Math.ceil(j*N)/N),r==="ticks"?(P=Math.floor(y/j)*j,A=Math.ceil(b/j)*j):(P=y,A=b),g&&p&&i&&E1((l-o)/i,j/1e3)?(S=Math.round(Math.min((l-o)/j,u)),j=(l-o)/S,P=o,A=l):v?(P=g?o:P,A=p?l:A,S=d-1,j=(A-P)/S):(S=(A-P)/j,wi(S,Math.round(S),j/1e3)?S=Math.round(S):S=Math.ceil(S));const R=Math.max(Cf(j),Cf(P));N=Math.pow(10,Te(c)?R:c),P=Math.round(P*N)/N,A=Math.round(A*N)/N;let L=0;for(g&&(f&&P!==o?(s.push({value:o}),P<o&&L++,wi(Math.round((P+L*j)*N)/N,o,Nm(o,w,t))&&L++):P<o&&L++);L<S;++L){const V=Math.round((P+L*j)*N)/N;if(p&&V>l)break;s.push({value:V})}return p&&f&&A!==l?s.length&&wi(s[s.length-1].value,l,Nm(l,w,t))?s[s.length-1].value=l:s.push({value:l}):(!p||A===l)&&s.push({value:A}),s}function Nm(t,e,{horizontal:s,minRotation:n}){const r=Cn(n),i=(s?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+t).length;return Math.min(e/i,o)}class Sm extends na{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,s){return Te(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:s,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this;const o=c=>r=s?r:c,l=c=>i=n?i:c;if(e){const c=Pr(r),d=Pr(i);c<0&&d<0?l(0):c>0&&d>0&&o(0)}if(r===i){let c=i===0?1:Math.abs(i*.05);l(i+c),e||o(r-c)}this.min=r,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:s,stepSize:n}=e,r;return n?(r=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),s=s||11),s&&(r=Math.min(s,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,s=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const r={maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:s.precision,step:s.stepSize,count:s.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:s.minRotation||0,includeBounds:s.includeBounds!==!1},i=this._range||this,o=eN(r,i);return e.bounds==="ticks"&&T1(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let s=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const r=(n-s)/Math.max(e.length-1,1)/2;s-=r,n+=r}this._startValue=s,this._endValue=n,this._valueRange=n-s}getLabelForValue(e){return $0(e,this.chart.options.locale,this.options.ticks.format)}}function _d(t){const e=t.ticks;if(e.display&&t.display){const s=ut(e.backdropPadding);return ge(e.font&&e.font.size,ze.font.size)+s.height}return 0}function tN(t,e,s){return s=Ie(s)?s:[s],{w:G1(t,e.string,s),h:s.length*e.lineHeight}}function Cm(t,e,s,n,r){return t===n||t===r?{start:e-s/2,end:e+s/2}:t<n||t>r?{start:e-s,end:e}:{start:e,end:e+s}}function sN(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},s=Object.assign({},e),n=[],r=[],i=t._pointLabels.length,o=t.options.pointLabels,l=o.centerPointLabels?Qe/i:0;for(let c=0;c<i;c++){const d=o.setContext(t.getPointLabelContext(c));r[c]=d.padding;const u=t.getPointPosition(c,t.drawingArea+r[c],l),h=Xe(d.font),f=tN(t.ctx,h,t._pointLabels[c]);n[c]=f;const m=St(t.getIndexAngle(c)+l),x=Math.round(Eu(m)),y=Cm(x,u.x,f.w,0,180),b=Cm(x,u.y,f.h,90,270);nN(s,e,m,y,b)}t.setCenterPoint(e.l-s.l,s.r-e.r,e.t-s.t,s.b-e.b),t._pointLabelItems=aN(t,n,r)}function nN(t,e,s,n,r){const i=Math.abs(Math.sin(s)),o=Math.abs(Math.cos(s));let l=0,c=0;n.start<e.l?(l=(e.l-n.start)/i,t.l=Math.min(t.l,e.l-l)):n.end>e.r&&(l=(n.end-e.r)/i,t.r=Math.max(t.r,e.r+l)),r.start<e.t?(c=(e.t-r.start)/o,t.t=Math.min(t.t,e.t-c)):r.end>e.b&&(c=(r.end-e.b)/o,t.b=Math.max(t.b,e.b+c))}function rN(t,e,s){const n=t.drawingArea,{extra:r,additionalAngle:i,padding:o,size:l}=s,c=t.getPointPosition(e,n+r+o,i),d=Math.round(Eu(St(c.angle+Pt))),u=cN(c.y,l.h,d),h=oN(d),f=lN(c.x,l.w,h);return{visible:!0,x:c.x,y:u,textAlign:h,left:f,top:u,right:f+l.w,bottom:u+l.h}}function iN(t,e){if(!e)return!0;const{left:s,top:n,right:r,bottom:i}=t;return!(Ns({x:s,y:n},e)||Ns({x:s,y:i},e)||Ns({x:r,y:n},e)||Ns({x:r,y:i},e))}function aN(t,e,s){const n=[],r=t._pointLabels.length,i=t.options,{centerPointLabels:o,display:l}=i.pointLabels,c={extra:_d(i)/2,additionalAngle:o?Qe/r:0};let d;for(let u=0;u<r;u++){c.padding=s[u],c.size=e[u];const h=rN(t,u,c);n.push(h),l==="auto"&&(h.visible=iN(h,d),h.visible&&(d=h))}return n}function oN(t){return t===0||t===180?"center":t<180?"left":"right"}function lN(t,e,s){return s==="right"?t-=e:s==="center"&&(t-=e/2),t}function cN(t,e,s){return s===90||s===270?t-=e/2:(s>270||s<90)&&(t-=e),t}function dN(t,e,s){const{left:n,top:r,right:i,bottom:o}=s,{backdropColor:l}=e;if(!Te(l)){const c=xr(e.borderRadius),d=ut(e.backdropPadding);t.fillStyle=l;const u=n-d.left,h=r-d.top,f=i-n+d.width,m=o-r+d.height;Object.values(c).some(x=>x!==0)?(t.beginPath(),Do(t,{x:u,y:h,w:f,h:m,radius:c}),t.fill()):t.fillRect(u,h,f,m)}}function uN(t,e){const{ctx:s,options:{pointLabels:n}}=t;for(let r=e-1;r>=0;r--){const i=t._pointLabelItems[r];if(!i.visible)continue;const o=n.setContext(t.getPointLabelContext(r));dN(s,o,i);const l=Xe(o.font),{x:c,y:d,textAlign:u}=i;Er(s,t._pointLabels[r],c,d+l.lineHeight/2,l,{color:o.color,textAlign:u,textBaseline:"middle"})}}function vx(t,e,s,n){const{ctx:r}=t;if(s)r.arc(t.xCenter,t.yCenter,e,0,Tt);else{let i=t.getPointPosition(0,e);r.moveTo(i.x,i.y);for(let o=1;o<n;o++)i=t.getPointPosition(o,e),r.lineTo(i.x,i.y)}}function hN(t,e,s,n,r){const i=t.ctx,o=e.circular,{color:l,lineWidth:c}=e;!o&&!n||!l||!c||s<0||(i.save(),i.strokeStyle=l,i.lineWidth=c,i.setLineDash(r.dash||[]),i.lineDashOffset=r.dashOffset,i.beginPath(),vx(t,s,o,n),i.closePath(),i.stroke(),i.restore())}function fN(t,e,s){return un(t,{label:s,index:e,type:"pointLabel"})}class oi extends Sm{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=ut(_d(this.options)/2),s=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+s/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(s,n)/2)}determineDataLimits(){const{min:e,max:s}=this.getMinMax(!1);this.min=at(e)&&!isNaN(e)?e:0,this.max=at(s)&&!isNaN(s)?s:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/_d(this.options))}generateTickLabels(e){Sm.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((s,n)=>{const r=Se(this.options.pointLabels.callback,[s,n],this);return r||r===0?r:""}).filter((s,n)=>this.chart.getDataVisibility(n))}fit(){const e=this.options;e.display&&e.pointLabels.display?sN(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,s,n,r){this.xCenter+=Math.floor((e-s)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,s,n,r))}getIndexAngle(e){const s=Tt/(this._pointLabels.length||1),n=this.options.startAngle||0;return St(e*s+Cn(n))}getDistanceFromCenterForValue(e){if(Te(e))return NaN;const s=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*s:(e-this.min)*s}getValueForDistanceFromCenter(e){if(Te(e))return NaN;const s=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-s:this.min+s}getPointLabelContext(e){const s=this._pointLabels||[];if(e>=0&&e<s.length){const n=s[e];return fN(this.getContext(),e,n)}}getPointPosition(e,s,n=0){const r=this.getIndexAngle(e)-Pt+n;return{x:Math.cos(r)*s+this.xCenter,y:Math.sin(r)*s+this.yCenter,angle:r}}getPointPositionForValue(e,s){return this.getPointPosition(e,this.getDistanceFromCenterForValue(s))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:s,top:n,right:r,bottom:i}=this._pointLabelItems[e];return{left:s,top:n,right:r,bottom:i}}drawBackground(){const{backgroundColor:e,grid:{circular:s}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),vx(this,this.getDistanceFromCenterForValue(this._endValue),s,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,s=this.options,{angleLines:n,grid:r,border:i}=s,o=this._pointLabels.length;let l,c,d;if(s.pointLabels.display&&uN(this,o),r.display&&this.ticks.forEach((u,h)=>{if(h!==0||h===0&&this.min<0){c=this.getDistanceFromCenterForValue(u.value);const f=this.getContext(h),m=r.setContext(f),x=i.setContext(f);hN(this,m,c,o,x)}}),n.display){for(e.save(),l=o-1;l>=0;l--){const u=n.setContext(this.getPointLabelContext(l)),{color:h,lineWidth:f}=u;!f||!h||(e.lineWidth=f,e.strokeStyle=h,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,c=this.getDistanceFromCenterForValue(s.reverse?this.min:this.max),d=this.getPointPosition(l,c),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(d.x,d.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,s=this.options,n=s.ticks;if(!n.display)return;const r=this.getIndexAngle(0);let i,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((l,c)=>{if(c===0&&this.min>=0&&!s.reverse)return;const d=n.setContext(this.getContext(c)),u=Xe(d.font);if(i=this.getDistanceFromCenterForValue(this.ticks[c].value),d.showLabelBackdrop){e.font=u.string,o=e.measureText(l.label).width,e.fillStyle=d.backdropColor;const h=ut(d.backdropPadding);e.fillRect(-o/2-h.left,-i-u.size/2-h.top,o+h.width,u.size+h.height)}Er(e,l.label,0,-i,u,{color:d.color,strokeColor:d.textStrokeColor,strokeWidth:d.textStrokeWidth})}),e.restore()}drawTitle(){}}he(oi,"id","radialLinear"),he(oi,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:U0.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),he(oi,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),he(oi,"descriptors",{angleLines:{_fallback:"grid"}});const pl={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},vt=Object.keys(pl);function Pm(t,e){return t-e}function Em(t,e){if(Te(e))return null;const s=t._adapter,{parser:n,round:r,isoWeekday:i}=t._parseOpts;let o=e;return typeof n=="function"&&(o=n(o)),at(o)||(o=typeof n=="string"?s.parse(o,n):s.parse(o)),o===null?null:(r&&(o=r==="week"&&(Mo(i)||i===!0)?s.startOf(o,"isoWeek",i):s.startOf(o,r)),+o)}function Tm(t,e,s,n){const r=vt.length;for(let i=vt.indexOf(t);i<r-1;++i){const o=pl[vt[i]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((s-e)/(l*o.size))<=n)return vt[i]}return vt[r-1]}function mN(t,e,s,n,r){for(let i=vt.length-1;i>=vt.indexOf(s);i--){const o=vt[i];if(pl[o].common&&t._adapter.diff(r,n,o)>=e-1)return o}return vt[s?vt.indexOf(s):0]}function pN(t){for(let e=vt.indexOf(t)+1,s=vt.length;e<s;++e)if(pl[vt[e]].common)return vt[e]}function Am(t,e,s){if(!s)t[e]=!0;else if(s.length){const{lo:n,hi:r}=Tu(s,e),i=s[n]>=e?s[n]:s[r];t[i]=!0}}function gN(t,e,s,n){const r=t._adapter,i=+r.startOf(e[0].value,n),o=e[e.length-1].value;let l,c;for(l=i;l<=o;l=+r.add(l,1,n))c=s[l],c>=0&&(e[c].major=!0);return e}function Om(t,e,s){const n=[],r={},i=e.length;let o,l;for(o=0;o<i;++o)l=e[o],r[l]=o,n.push({value:l,major:!1});return i===0||!s?n:gN(t,n,r,s)}class Bo extends na{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,s={}){const n=e.time||(e.time={}),r=this._adapter=new s2._date(e.adapters.date);r.init(s),bi(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=s.normalized}parse(e,s){return e===void 0?null:Em(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,s=this._adapter,n=e.time.unit||"day";let{min:r,max:i,minDefined:o,maxDefined:l}=this.getUserBounds();function c(d){!o&&!isNaN(d.min)&&(r=Math.min(r,d.min)),!l&&!isNaN(d.max)&&(i=Math.max(i,d.max))}(!o||!l)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),r=at(r)&&!isNaN(r)?r:+s.startOf(Date.now(),n),i=at(i)&&!isNaN(i)?i:+s.endOf(Date.now(),n)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let s=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(s=e[0],n=e[e.length-1]),{min:s,max:n}}buildTicks(){const e=this.options,s=e.time,n=e.ticks,r=n.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,o=this.max,l=L1(r,i,o);return this._unit=s.unit||(n.autoSkip?Tm(s.minUnit,this.min,this.max,this._getLabelCapacity(i)):mN(this,l.length,s.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:pN(this._unit),this.initOffsets(r),e.reverse&&l.reverse(),Om(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let s=0,n=0,r,i;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?s=1-r:s=(this.getDecimalForValue(e[1])-r)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?n=i:n=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;s=ks(s,0,o),n=ks(n,0,o),this._offsets={start:s,end:n,factor:1/(s+1+n)}}_generate(){const e=this._adapter,s=this.min,n=this.max,r=this.options,i=r.time,o=i.unit||Tm(i.minUnit,s,n,this._getLabelCapacity(s)),l=ge(r.ticks.stepSize,1),c=o==="week"?i.isoWeekday:!1,d=Mo(c)||c===!0,u={};let h=s,f,m;if(d&&(h=+e.startOf(h,"isoWeek",c)),h=+e.startOf(h,d?"day":o),e.diff(n,s,o)>1e5*l)throw new Error(s+" and "+n+" are too far apart with stepSize of "+l+" "+o);const x=r.ticks.source==="data"&&this.getDataTimestamps();for(f=h,m=0;f<n;f=+e.add(f,l,o),m++)Am(u,f,x);return(f===n||r.bounds==="ticks"||m===1)&&Am(u,f,x),Object.keys(u).sort(Pm).map(y=>+y)}getLabelForValue(e){const s=this._adapter,n=this.options.time;return n.tooltipFormat?s.format(e,n.tooltipFormat):s.format(e,n.displayFormats.datetime)}format(e,s){const r=this.options.time.displayFormats,i=this._unit,o=s||r[i];return this._adapter.format(e,o)}_tickFormatFunction(e,s,n,r){const i=this.options,o=i.ticks.callback;if(o)return Se(o,[e,s,n],this);const l=i.time.displayFormats,c=this._unit,d=this._majorUnit,u=c&&l[c],h=d&&l[d],f=n[s],m=d&&h&&f&&f.major;return this._adapter.format(e,r||(m?h:u))}generateTickLabels(e){let s,n,r;for(s=0,n=e.length;s<n;++s)r=e[s],r.label=this._tickFormatFunction(r.value,s,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const s=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((s.start+n)*s.factor)}getValueForPixel(e){const s=this._offsets,n=this.getDecimalForPixel(e)/s.factor-s.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const s=this.options.ticks,n=this.ctx.measureText(e).width,r=Cn(this.isHorizontal()?s.maxRotation:s.minRotation),i=Math.cos(r),o=Math.sin(r),l=this._resolveTickFontOptions(0).size;return{w:n*i+l*o,h:n*o+l*i}}_getLabelCapacity(e){const s=this.options.time,n=s.displayFormats,r=n[s.unit]||n.millisecond,i=this._tickFormatFunction(e,0,Om(this,[e],this._majorUnit),r),o=this._getLabelSize(i),l=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return l>0?l:1}getDataTimestamps(){let e=this._cache.data||[],s,n;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(s=0,n=r.length;s<n;++s)e=e.concat(r[s].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let s,n;if(e.length)return e;const r=this.getLabels();for(s=0,n=r.length;s<n;++s)e.push(Em(this,r[s]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return I1(e.sort(Pm))}}he(Bo,"id","time"),he(Bo,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Ia(t,e,s){let n=0,r=t.length-1,i,o,l,c;s?(e>=t[n].pos&&e<=t[r].pos&&({lo:n,hi:r}=md(t,"pos",e)),{pos:i,time:l}=t[n],{pos:o,time:c}=t[r]):(e>=t[n].time&&e<=t[r].time&&({lo:n,hi:r}=md(t,"time",e)),{time:i,pos:l}=t[n],{time:o,pos:c}=t[r]);const d=o-i;return d?l+(c-l)*(e-i)/d:l}class Rm extends Bo{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),s=this._table=this.buildLookupTable(e);this._minPos=Ia(s,this.min),this._tableRange=Ia(s,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:s,max:n}=this,r=[],i=[];let o,l,c,d,u;for(o=0,l=e.length;o<l;++o)d=e[o],d>=s&&d<=n&&r.push(d);if(r.length<2)return[{time:s,pos:0},{time:n,pos:1}];for(o=0,l=r.length;o<l;++o)u=r[o+1],c=r[o-1],d=r[o],Math.round((u+c)/2)!==d&&i.push({time:d,pos:o/(l-1)});return i}_generate(){const e=this.min,s=this.max;let n=super.getDataTimestamps();return(!n.includes(e)||!n.length)&&n.splice(0,0,e),(!n.includes(s)||n.length===1)&&n.push(s),n.sort((r,i)=>r-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const s=this.getDataTimestamps(),n=this.getLabelTimestamps();return s.length&&n.length?e=this.normalize(s.concat(n)):e=s.length?s:n,e=this._cache.all=e,e}getDecimalForValue(e){return(Ia(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const s=this._offsets,n=this.getDecimalForPixel(e)/s.factor-s.end;return Ia(this._table,n*this._tableRange+this._minPos,!0)}}he(Rm,"id","timeseries"),he(Rm,"defaults",Bo.defaults);const bx="label";function Mm(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function xN(t,e){const s=t.options;s&&e&&Object.assign(s,e)}function wx(t,e){t.labels=e}function _x(t,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:bx;const n=[];t.datasets=e.map(r=>{const i=t.datasets.find(o=>o[s]===r[s]);return!i||!r.data||n.includes(i)?{...r}:(n.push(i),Object.assign(i,r),i)})}function yN(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:bx;const s={labels:[],datasets:[]};return wx(s,t.labels),_x(s,t.datasets,e),s}function vN(t,e){const{height:s=150,width:n=300,redraw:r=!1,datasetIdKey:i,type:o,data:l,options:c,plugins:d=[],fallbackContent:u,updateMode:h,...f}=t,m=k.useRef(null),x=k.useRef(null),y=()=>{m.current&&(x.current=new fl(m.current,{type:o,data:yN(l,i),options:c&&{...c},plugins:d}),Mm(e,x.current))},b=()=>{Mm(e,null),x.current&&(x.current.destroy(),x.current=null)};return k.useEffect(()=>{!r&&x.current&&c&&xN(x.current,c)},[r,c]),k.useEffect(()=>{!r&&x.current&&wx(x.current.config.data,l.labels)},[r,l.labels]),k.useEffect(()=>{!r&&x.current&&l.datasets&&_x(x.current.config.data,l.datasets,i)},[r,l.datasets]),k.useEffect(()=>{x.current&&(r?(b(),setTimeout(y)):x.current.update(h))},[r,c,l.labels,l.datasets,h]),k.useEffect(()=>{x.current&&(b(),setTimeout(y))},[o]),k.useEffect(()=>(y(),()=>b()),[]),Ke.createElement("canvas",{ref:m,role:"img",height:s,width:n,...f},u)}const bN=k.forwardRef(vN);function wN(t,e){return fl.register(e),k.forwardRef((s,n)=>Ke.createElement(bN,{...s,ref:n,type:t}))}const _N=wN("radar",Ja);fl.register(oi,eo,Vs,Bk,Zk,Vk);const Lm=["Spin Finish","Burst Finish","Over Finish","Extreme Finish"],oc={"Spin Finish":1,"Burst Finish":2,"Over Finish":2,"Extreme Finish":3};function jN({onBack:t}){const[e,s]=k.useState([]),[n,r]=k.useState(""),[i,o]=k.useState({}),[l,c]=k.useState(""),[d,u]=k.useState(!0),[h,f]=k.useState(!1),[m,x]=k.useState(!1),[y,b]=k.useState("player");k.useEffect(()=>{g()},[]),k.useEffect(()=>{n&&p()},[n]);const g=async()=>{try{const{data:S,error:R}=await Y.from("tournaments").select("id, name, status, tournament_date").order("tournament_date",{ascending:!1});if(R)throw R;s(S||[]);const L=S==null?void 0:S.find(V=>V.status==="completed");L&&r(L.id)}catch(S){console.error("Error fetching tournaments:",S)}finally{u(!1)}},p=async()=>{f(!0),o({}),c("");try{const{data:S,error:R}=await Y.from("match_results").select(`
          player1_name,
          player2_name,
          player1_beyblade,
          player2_beyblade,
          winner_name,
          outcome,
          points_awarded
        `).eq("tournament_id",n);if(R)throw R;if(!S||S.length===0){o({});return}const L={};S.forEach(V=>{const M=V.player1_name,K=V.player2_name,J=V.player1_beyblade,ne=V.player2_beyblade,G=V.winner_name,I=(V.outcome||"").split(" (")[0].trim()||"Unknown",E=V.points_awarded||oc[I]||0;if(L[M]||(L[M]={name:M,beys:[],matches:[],winFinishes:{},loseFinishes:{},beyStats:{},wins:0,losses:0,points:0}),L[K]||(L[K]={name:K,beys:[],matches:[],winFinishes:{},loseFinishes:{},beyStats:{},wins:0,losses:0,points:0}),J&&!L[M].beys.includes(J)&&L[M].beys.push(J),ne&&!L[K].beys.includes(ne)&&L[K].beys.push(ne),!G||!M||!K)return;const z=G===M?K:M,B=G===M?J:ne,C=G===M?ne:J;L[G].wins++,L[G].points+=E,L[G].winFinishes[I]=(L[G].winFinishes[I]||0)+1,L[G].matches.push({result:"win",bey:B,outcome:I,opponent:z,opponentBey:C}),L[z].losses++,L[z].loseFinishes[I]=(L[z].loseFinishes[I]||0)+1,L[z].matches.push({result:"loss",bey:C,outcome:I,opponent:G,opponentBey:B}),!(!B||!C)&&(L[G].beyStats[B]||(L[G].beyStats[B]={win:0,loss:0,finishes:{},lossFinishes:{},points:0}),L[z].beyStats[C]||(L[z].beyStats[C]={win:0,loss:0,finishes:{},lossFinishes:{},points:0}),L[G].beyStats[B].win++,L[G].beyStats[B].points+=E,L[G].beyStats[B].finishes[I]=(L[G].beyStats[B].finishes[I]||0)+1,L[z].beyStats[C].loss++,L[z].beyStats[C].lossFinishes[I]=(L[z].beyStats[C].lossFinishes[I]||0)+1)}),o(L)}catch(S){console.error("Error fetching tournament data:",S),o({})}finally{f(!1)}},v=S=>Object.entries(S).reduce((R,[L,V])=>V>R[1]?[L,V]:R,["",-1])[0]||"N/A",w=S=>{let R="",L=-1;for(const K of S.beys){const J=S.beyStats[K]||{points:0,win:0};J.points>L&&(L=J.points,R=K)}const V=S.beyStats[R],M=V?`${V.win} wins, ${V.points} pts`:"No matches";return{bey:R||"N/A",reason:M}},j=S=>({labels:Lm,datasets:[{label:"Point Contribution",data:Lm.map(R=>{const L=S[R]||0,V=oc[R]||0;return L*V}),backgroundColor:"rgba(33, 150, 243, 0.2)",borderColor:"#2196f3",pointBackgroundColor:"#2196f3",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"#2196f3"}]}),N={responsive:!0,maintainAspectRatio:!1,scales:{r:{suggestedMin:0,ticks:{stepSize:2},title:{display:!0,text:"Points"}}},plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(S){const R=S.label,L=S.raw,V=winFinishes[R]||0,M=oc[R]||0;return`${R}: ${L} pts (${V}  ${M})`}}}}},P=()=>{if(!l||!i[l])return null;const S=i[l],{bey:R,reason:L}=w(S),V=S.wins+S.losses,M=V?(S.wins/V*100).toFixed(1):"0.0",K=V?(S.points/V).toFixed(2):"0.00";return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("div",{className:"flex items-center mb-6",children:[a.jsx("div",{className:"w-16 h-16 bg-blue-500 rounded-full flex items-center justify-center text-white text-2xl font-bold mr-4",children:S.name.charAt(0).toUpperCase()}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:S.name}),a.jsx("p",{className:"text-gray-600",children:"Tournament Player"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Most Valuable Bey"}),a.jsx("p",{className:"text-lg font-semibold text-gray-900",children:R}),a.jsx("p",{className:"text-sm text-gray-500",children:L})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Most Common Finish (Win)"}),a.jsx("p",{className:"text-lg font-semibold text-green-600",children:v(S.winFinishes)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Most Common Finish (Loss)"}),a.jsx("p",{className:"text-lg font-semibold text-red-600",children:v(S.loseFinishes)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Win Rate"}),a.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[M,"% (",S.wins," of ",V,")  ",K," pts/match"]})]})]}),a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{style:{width:"300px",height:"300px"},children:a.jsx(_N,{data:j(S.winFinishes),options:N})})})]}),a.jsxs("div",{className:"flex justify-center space-x-4 mt-6",children:[a.jsx("button",{onClick:()=>x(!m),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:m?"Hide Advanced":"Show Advanced"}),a.jsxs("button",{onClick:()=>b("matches"),className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors flex items-center space-x-2",children:[a.jsx(ju,{size:16}),a.jsx("span",{children:"Show All Matches"})]})]})]}),m&&a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"Advanced Statistics"}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Win by Finish"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Beyblade"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Spin"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Burst"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Over"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Extreme"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Wins"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Points"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S.beys.map(J=>{const ne=S.beyStats[J]||{finishes:{},win:0,points:0};return a.jsxs("tr",{className:"bg-green-50",children:[a.jsx("td",{className:"px-4 py-2 text-sm font-medium text-gray-900",children:J}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:ne.finishes["Spin Finish"]||0}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:ne.finishes["Burst Finish"]||0}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:ne.finishes["Over Finish"]||0}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:ne.finishes["Extreme Finish"]||0}),a.jsx("td",{className:"px-4 py-2 text-sm font-semibold text-gray-900",children:ne.win}),a.jsx("td",{className:"px-4 py-2 text-sm font-semibold text-gray-900",children:ne.points})]},J)})})]})})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Loss by Finish"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Beyblade"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Spin"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Burst"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Over"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Extreme"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Losses"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Points Given"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S.beys.map(J=>{const ne=S.beyStats[J]||{lossFinishes:{},loss:0},G=ne.lossFinishes||{},W=(G["Spin Finish"]||0)*1+(G["Burst Finish"]||0)*2+(G["Over Finish"]||0)*2+(G["Extreme Finish"]||0)*3;return a.jsxs("tr",{className:"bg-red-50",children:[a.jsx("td",{className:"px-4 py-2 text-sm font-medium text-gray-900",children:J}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:G["Spin Finish"]||0}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:G["Burst Finish"]||0}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:G["Over Finish"]||0}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:G["Extreme Finish"]||0}),a.jsx("td",{className:"px-4 py-2 text-sm font-semibold text-gray-900",children:ne.loss}),a.jsx("td",{className:"px-4 py-2 text-sm font-semibold text-gray-900",children:W})]},J)})})]})})]})]})]})]})},A=()=>{if(!l||!i[l])return null;const S=i[l];return a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:["All Matches for ",a.jsx("strong",{children:S.name})]}),a.jsxs("button",{onClick:()=>b("player"),className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700 transition-colors flex items-center space-x-2",children:[a.jsx(cl,{size:16}),a.jsx("span",{children:"Back to Player Stats"})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Result"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Your Bey"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Opponent"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Opponent's Bey"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Finish"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S.matches.map((R,L)=>a.jsxs("tr",{className:R.result==="win"?"bg-green-50":"bg-red-50",children:[a.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm font-medium ${R.result==="win"?"text-green-800":"text-red-800"}`,children:R.result==="win"?"Win":"Loss"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:R.bey}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:R.opponent}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:R.opponentBey||"-"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:R.outcome})]},L))})]})})]})};return d?a.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading tournaments..."})]})}):h?a.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Player Performance Analysis"}),a.jsx("p",{className:"text-gray-600",children:"Analyze individual player statistics and performance"})]}),a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading player data..."})]})]}):a.jsx("div",{className:"page-container",children:a.jsxs("div",{className:"content-wrapper",children:[a.jsx("div",{className:"page-header",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"page-title",children:"Tournament Analytics"}),a.jsx("p",{className:"page-subtitle",children:"Comprehensive tournament and player statistics"})]}),a.jsxs("div",{className:"filter-tabs",children:[a.jsx("button",{onClick:()=>{t&&t()},className:"filter-tab filter-tab-inactive",children:"Overview"}),a.jsx("button",{onClick:()=>{t&&(t(),setTimeout(()=>{const S=new CustomEvent("navigateToMetaAnalysis");window.dispatchEvent(S)},50))},className:"filter-tab filter-tab-inactive",children:"Meta Analysis"}),a.jsx("button",{className:"filter-tab filter-tab-active",children:"Player Analytics"})]})]})}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Tournament Selection"}),a.jsxs("div",{className:"max-w-md",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Tournament"}),a.jsxs("select",{value:n,onChange:S=>r(S.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"-- Select Tournament --"}),e.map(S=>a.jsxs("option",{value:S.id,children:[S.name," (",S.status,")"]},S.id))]})]})]}),n&&a.jsxs(a.Fragment,{children:[Object.keys(i).length===0&&a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 mb-8",children:a.jsx("p",{className:"text-yellow-800",children:"No player data found for this tournament. Make sure there are completed matches with valid player names and Beyblade information."})}),Object.keys(i).length>0&&a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[a.jsx(S0,{className:"mr-2",size:24}),"Player Selection"]}),a.jsxs("div",{className:"max-w-md",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Player"}),a.jsxs("select",{value:l,onChange:S=>{c(S.target.value),b("player"),x(!1)},className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"-- Select Player --"}),Object.keys(i).sort().map(S=>a.jsx("option",{value:S,children:S},S))]})]})]}),l&&(y==="player"?P():A())]})]})})}function kN(){const[t,e]=Ke.useState("overview"),[s,n]=Ke.useState(!1);Ke.useEffect(()=>{const h=()=>{n(!0),e("meta"),setTimeout(()=>n(!1),50)},f=()=>{n(!0),e("player"),setTimeout(()=>n(!1),50)};return window.addEventListener("navigateToMetaAnalysis",h),window.addEventListener("navigateToPlayerAnalytics",f),()=>{window.removeEventListener("navigateToMetaAnalysis",h),window.removeEventListener("navigateToPlayerAnalytics",f)}},[]);const[r,i]=Ke.useState({totalTournaments:0,activePlayers:0,completedMatches:0,upcomingEvents:0,completedTournaments:[],activeTournaments:0,upcomingTournaments:0}),[o,l]=Ke.useState(!0);Ke.useEffect(()=>{(async()=>{try{const[f,m,x,y]=await Promise.all([Y.from("tournaments").select("*"),Y.from("profiles").select("*",{count:"exact",head:!0}),Y.from("match_results").select("*"),Y.from("tournament_registrations").select("*",{count:"exact",head:!0})]),b=f.data||[],g=x.data||[],p=b.filter(N=>N.status==="completed"),v=b.filter(N=>N.status==="active").length,w=b.filter(N=>N.status==="upcoming").length,j=g.length;i({totalTournaments:b.length,activePlayers:m.count||0,completedMatches:j,upcomingEvents:w,completedTournaments:p,activeTournaments:v,upcomingTournaments:w})}catch(f){console.error("Error fetching analytics:",f),i({totalTournaments:0,activePlayers:0,completedMatches:0,upcomingEvents:0,completedTournaments:[],activeTournaments:0,upcomingTournaments:0})}finally{l(!1)}})()},[]);const[c,d]=Ke.useState([]);Ke.useEffect(()=>{(async()=>{try{const{data:f}=await Y.from("match_results").select("player1_name, player2_name, winner_name");if(!f)return;const m={};f.forEach(y=>{!y.player1_name||!y.player2_name||!y.winner_name||[y.player1_name,y.player2_name].forEach(b=>{m[b]||(m[b]={wins:0,matches:0}),m[b].matches++,y.winner_name===b&&m[b].wins++})});const x=Object.entries(m).map(([y,b])=>({player:y,wins:b.wins,matches:b.matches,winRate:Math.round(b.wins/b.matches*100)})).sort((y,b)=>b.winRate-y.winRate).slice(0,4);d(x)}catch(f){console.error("Error calculating win rates:",f),d([])}})()},[]);const u=[{icon:Qt,label:"Total Tournaments",value:r.totalTournaments,color:"text-blue-600",bgColor:"bg-blue-100"},{icon:ls,label:"Active Players",value:r.activePlayers,color:"text-green-600",bgColor:"bg-green-100"},{icon:N0,label:"Completed Matches",value:r.completedMatches,color:"text-purple-600",bgColor:"bg-purple-100"},{icon:In,label:"Upcoming Events",value:r.upcomingEvents,color:"text-orange-600",bgColor:"bg-orange-100"}];return o?a.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading analytics..."})]})}):t==="meta"?a.jsx(G_,{onBack:()=>{n(!0),e("overview"),setTimeout(()=>n(!1),50)}}):t==="player"?a.jsx(jN,{onBack:()=>{n(!0),e("overview"),setTimeout(()=>n(!1),50)}}):s?a.jsx("div",{className:"page-container",children:a.jsx("div",{className:"content-wrapper",children:a.jsx("div",{className:"text-center py-12",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"})})})}):a.jsx("div",{className:"page-container",children:a.jsxs("div",{className:"content-wrapper",children:[a.jsx("div",{className:"page-header",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"page-title",children:"Tournament Analytics"}),a.jsx("p",{className:"page-subtitle",children:"Comprehensive tournament and player statistics"})]}),a.jsxs("div",{className:"filter-tabs",children:[a.jsx("button",{onClick:()=>e("overview"),className:`filter-tab ${t==="overview"?"filter-tab-active":"filter-tab-inactive"}`,children:"Overview"}),a.jsx("button",{onClick:()=>e("meta"),className:`filter-tab ${t==="meta"?"filter-tab-active":"filter-tab-inactive"}`,children:"Meta Analysis"}),a.jsx("button",{onClick:()=>e("player"),className:`filter-tab ${t==="player"?"filter-tab-active":"filter-tab-inactive"}`,children:"Player Analytics"})]})]})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:u.map((h,f)=>a.jsx("div",{className:"metric-card",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"metric-label",children:h.label}),a.jsx("p",{className:"metric-value",children:h.value})]}),a.jsx("div",{className:`p-3 rounded-lg ${h.bgColor} ${h.color}`,children:a.jsx(h.icon,{size:24})})]})},f))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"chart-container",children:[a.jsx("h2",{className:"chart-title",children:"Tournament Status"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-700 font-inter font-medium",children:"Completed"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-40 bg-gray-200 rounded-full h-3",children:a.jsx("div",{className:"bg-green-500 h-3 rounded-full",style:{width:`${r.totalTournaments>0?r.completedTournaments.length/r.totalTournaments*100:0}%`}})}),a.jsx("span",{className:"text-lg font-space-grotesk font-bold text-gray-900",children:r.completedTournaments.length})]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-700 font-inter font-medium",children:"Active"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-40 bg-gray-200 rounded-full h-3",children:a.jsx("div",{className:"bg-blue-500 h-3 rounded-full",style:{width:`${r.totalTournaments>0?r.activeTournaments/r.totalTournaments*100:0}%`}})}),a.jsx("span",{className:"text-lg font-space-grotesk font-bold text-gray-900",children:r.activeTournaments})]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-700 font-inter font-medium",children:"Upcoming"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-40 bg-gray-200 rounded-full h-3",children:a.jsx("div",{className:"bg-orange-500 h-3 rounded-full",style:{width:`${r.totalTournaments>0?r.upcomingTournaments/r.totalTournaments*100:0}%`}})}),a.jsx("span",{className:"text-lg font-space-grotesk font-bold text-gray-900",children:r.upcomingTournaments})]})]})]})]}),a.jsxs("div",{className:"chart-container",children:[a.jsx("h2",{className:"chart-title",children:"Top Player Win Rates"}),a.jsx("div",{className:"space-y-4",children:c.map((h,f)=>a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gray-900 rounded-full flex items-center justify-center text-white font-space-grotesk font-bold",children:f+1}),a.jsxs("div",{children:[a.jsx("p",{className:"font-space-grotesk font-bold text-gray-900",children:h.player}),a.jsxs("p",{className:"text-gray-600 font-inter",children:[h.wins,"/",h.matches," matches"]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"font-space-grotesk font-bold text-xl text-gray-900",children:[h.winRate,"%"]}),a.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-3",children:a.jsx("div",{className:"bg-green-500 h-3 rounded-full",style:{width:`${h.winRate}%`}})})]})]},h.player))})]})]}),a.jsxs("div",{className:"chart-container mt-8",children:[a.jsx("h2",{className:"chart-title",children:"Match Statistics"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"metric-value text-blue-600",children:r.completedMatches}),a.jsx("p",{className:"metric-label",children:"Completed Matches"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"metric-value text-orange-600",children:"0"}),a.jsx("p",{className:"metric-label",children:"Ongoing Matches"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"metric-value text-green-600",children:"0"}),a.jsx("p",{className:"metric-label",children:"Scheduled Matches"})]})]})]})]})})}const lc={"Over Finish (2 pts)":2,"Burst Finish (2 pts)":2,"Spin Finish (1 pt)":1,"Extreme Finish (3 pts)":3};function NN(){const[t,e]=k.useState([]),[s,n]=k.useState(""),[r,i]=k.useState({}),[o,l]=k.useState({}),[c,d]=k.useState(!0),[u,h]=k.useState(!1),[f,m]=k.useState(""),[x,y]=k.useState(""),[b,g]=k.useState(1),[p,v]=k.useState(""),[w,j]=k.useState({}),[N,P]=k.useState(0),[A,S]=k.useState(0),[R,L]=k.useState(2),[V,M]=k.useState(!1),[K,J]=k.useState(!1),[ne,G]=k.useState(!1),[W,I]=k.useState(""),[E,z]=k.useState({}),[B,C]=k.useState(null);k.useEffect(()=>{q()},[]),k.useEffect(()=>{s&&X(s)},[s]);const q=async()=>{try{const{data:F,error:Q}=await Y.from("tournaments").select("id, name, status, tournament_date, location, beyblades_per_player").order("tournament_date",{ascending:!1});if(Q)throw Q;e(F||[]);const ee=F==null?void 0:F.find(de=>de.status==="active");ee&&n(ee.id)}catch(F){console.error("Error fetching tournaments:",F)}finally{d(!1)}},X=async F=>{h(!0);try{const{data:Q,error:ee}=await Y.from("tournament_registrations").select(`
          player_name,
          tournament_beyblades(
            beyblade_name,
            blade_line
          )
        `).eq("tournament_id",F).eq("status","confirmed").order("player_name",{ascending:!0});if(ee)throw ee;const de={},$e={};Q==null||Q.forEach(Pe=>{const ke=Pe.player_name,ot=Pe.tournament_beyblades.map(Mt=>Mt.beyblade_name),Ue=Pe.tournament_beyblades.map(Mt=>({name:Mt.beyblade_name,blade_line:Mt.blade_line}));ot.length>0&&(de[ke]=ot,$e[ke]=Ue)}),i(de),l($e),se()}catch(Q){console.error("Error fetching player data:",Q),i({})}finally{h(!1)}},se=()=>{m(""),y(""),g(1),v(""),j({}),P(0),S(0),L(2),M(!1),z({}),l({}),I("")},pe=(F,Q)=>{F===1?(m(Q),Q===x&&y("")):(y(Q),Q===f&&m("")),Q&&(j({}),P(0),S(0),L(2),M(!1),z({}))},re=(F,Q)=>{var ke,ot,Ue;const ee=(oe==null?void 0:oe.beyblades_per_player)||3,de=Math.floor(Q/ee)+1,$e=Q%ee;if(de===1)return((ke=r[F])==null?void 0:ke[$e])||"";const Pe=(ot=E[de])==null?void 0:ot[F];return Pe?Pe[$e]||"":((Ue=r[F])==null?void 0:Ue[$e])||""},D=(F,Q)=>{var ke,ot,Ue,Mt,hn,lt;const ee=(oe==null?void 0:oe.beyblades_per_player)||3,de=Math.floor(Q/ee)+1,$e=Q%ee;if(de===1)return((ot=(ke=o[F])==null?void 0:ke[$e])==null?void 0:ot.blade_line)||"";const Pe=(Ue=E[de])==null?void 0:Ue[F];if(Pe){const hs=Pe[$e],Wt=(Mt=o[F])==null?void 0:Mt.find(kx=>kx.name===hs);return(Wt==null?void 0:Wt.blade_line)||""}return((lt=(hn=o[F])==null?void 0:hn[$e])==null?void 0:lt.blade_line)||""},T=()=>{if(V){alert(`Click Shuffle before adding the next match (after every ${(oe==null?void 0:oe.beyblades_per_player)||3} matches).`);return}if(!f||!x){alert("Please select both players first.");return}let F=0;for(;w[F]!==void 0;)F++;const Q={...w,[F]:{outcome:null,winner:null,points:0}};j(Q);const ee=(oe==null?void 0:oe.beyblades_per_player)||3,de=Object.keys(Q).length;de>0&&de%ee===0&&M(!0)},O=(F,Q)=>{const ee={...w};if(ee[F]){ee[F].outcome=Q;const de=Q&&ee[F].winner&&lc[Q]||0;ee[F].points=de}j(ee),te(ee)},H=(F,Q)=>{const ee={...w};if(ee[F]){ee[F].winner=Q;const de=ee[F].outcome&&Q&&lc[ee[F].outcome]||0;ee[F].points=de}j(ee),te(ee)},te=F=>{let Q=0,ee=0;Object.values(F).forEach(de=>{de.winner&&de.outcome&&de.points>0&&(de.winner===f?Q+=de.points:de.winner===x&&(ee+=de.points))}),P(Q),S(ee)},le=F=>{const Q={...w};delete Q[F],j(Q),te(Q),M(!1)},je=()=>{const F=R,Q={...E};Q[F]||(Q[F]={[f]:[...r[f]||[]],[x]:[...r[x]||[]]}),z(Q),L(ee=>ee+1),M(!1)},ue=(F,Q,ee)=>{z(de=>({...de,[F]:{...de[F],[Q]:ee}}))},Be=(F,Q)=>{C(Q),F.dataTransfer.effectAllowed="move"},_=F=>{F.preventDefault(),F.dataTransfer.dropEffect="move"},$=(F,Q,ee,de)=>{var ot;if(F.preventDefault(),!B)return;const $e=((ot=E[Q])==null?void 0:ot[ee])||[],Pe=$e.indexOf(B);if(Pe===-1)return;const ke=[...$e];ke.splice(Pe,1),ke.splice(de,0,B),ue(Q,ee,ke),C(null)},xe=()=>{C(null)},ie=async()=>{if(!p.trim()){alert("Please enter the Tournament Officer name before submitting.");return}const F=Object.entries(w).filter(([Q,ee])=>ee.outcome&&ee.winner);if(F.length===0){alert("No complete matches to submit.");return}G(!0),I("Submitting matches...");try{const Q=F.map(([$e,Pe])=>{const ke=parseInt($e);return{tournament_id:s,round_number:b,player1_name:f,player2_name:x,player1_beyblade:re(f,ke),player2_beyblade:re(x,ke),player1_blade_line:D(f,ke),player2_blade_line:D(x,ke),outcome:Pe.outcome,winner_name:Pe.winner,points_awarded:Pe.points,match_number:ke+1,phase_number:Math.floor(ke/3)+1,tournament_officer:p}}),{error:ee}=await Y.from("match_results").insert(Q);if(ee)throw ee;const{error:de}=await Y.from("match_sessions").insert({tournament_id:s,round_number:b,player1_name:f,player2_name:x,player1_final_score:N,player2_final_score:A,winner_name:N>A?f:x,total_matches:F.length,tournament_officer:p,match_summary:F.map(([$e,Pe])=>{const ke=parseInt($e),ot=re(Pe.winner,ke),Ue=(oe==null?void 0:oe.beyblades_per_player)||3,Mt=Math.floor(ke/Ue)+1,hn=ke%Ue+1;return`Phase ${Mt}, Match ${hn}: ${Pe.outcome} by ${Pe.winner} using ${ot}`}).join("; "),phases:Object.keys(E).length+1,deck_orders:E});if(de)throw de;I(" Matches submitted successfully!"),J(!1),setTimeout(()=>{se(),I("")},2e3)}catch(Q){console.error("Error submitting matches:",Q),I(" Failed to submit matches. Please try again.")}finally{G(!1)}},ye=()=>Object.entries(w).filter(([Q,ee])=>ee.outcome&&ee.winner).map(([Q,ee])=>{const de=parseInt(Q),$e=re(ee.winner,de);return`Match ${de+1}: ${ee.outcome} by ${ee.winner} using ${$e}`}),oe=t.find(F=>F.id===s),ts=Object.keys(r),gl=ts.filter(F=>F!==x),jx=ts.filter(F=>F!==f);return c?a.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading tournaments..."})]})}):a.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"OBC Match Tracker"}),a.jsx("p",{className:"text-gray-600",children:"Track tournament matches in real-time"})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Tournament Selection"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Tournament"}),a.jsxs("select",{value:s,onChange:F=>n(F.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"-- Select Tournament --"}),t.map(F=>a.jsxs("option",{value:F.id,children:[F.name," (",F.status,")"]},F.id))]})]}),oe&&a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:oe.name}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Status: ",a.jsx("span",{className:`capitalize ${oe.status==="active"?"text-green-600":oe.status==="upcoming"?"text-blue-600":"text-gray-600"}`,children:oe.status})]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Date: ",new Date(oe.tournament_date).toLocaleDateString()]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Location: ",oe.location]})]})]})]}),s&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Match Setup"}),u?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading player data..."})]}):Object.keys(r).length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(ls,{size:48,className:"mx-auto text-gray-400 mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No confirmed registrations found for this tournament"})]}):a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Round #"}),a.jsx("input",{type:"number",min:"1",value:b,onChange:F=>g(parseInt(F.target.value)||1),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Player 1"}),a.jsxs("select",{value:f,onChange:F=>pe(1,F.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"-- Select Player 1 --"}),gl.map(F=>a.jsx("option",{value:F,children:F},F))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Player 2"}),a.jsxs("select",{value:x,onChange:F=>pe(2,F.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"-- Select Player 2 --"}),jx.map(F=>a.jsx("option",{value:F,children:F},F))]})]})]})]}),f&&x&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"bg-white border border-gray-200 rounded-lg shadow-md p-4 mb-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto flex justify-between items-center",children:[a.jsx("div",{children:a.jsx("input",{type:"text",placeholder:"Tournament Officer",value:p,onChange:F=>v(F.target.value),className:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})}),a.jsxs("div",{className:"text-lg font-bold",children:[a.jsxs("span",{className:`${N>A?"text-green-600":N<A?"text-red-600":"text-gray-600"}`,children:[f,": ",N]}),a.jsx("span",{className:"mx-4 text-gray-400",children:"|"}),a.jsxs("span",{className:`${A>N?"text-green-600":A<N?"text-red-600":"text-gray-600"}`,children:[x,": ",A]})]})]})}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:["Phase 1 Decks (",(oe==null?void 0:oe.beyblades_per_player)||3," Beyblades)"]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b",children:[a.jsx("th",{className:"text-left py-2"}),a.jsx("th",{className:"text-left py-2 font-semibold",children:f}),a.jsx("th",{className:"text-left py-2 font-semibold",children:x})]})}),a.jsx("tbody",{children:Array.from({length:(oe==null?void 0:oe.beyblades_per_player)||3},(F,Q)=>{var ee,de;return a.jsxs("tr",{className:"border-b",children:[a.jsxs("td",{className:"py-2 font-medium",children:["Bey ",Q+1]}),a.jsx("td",{className:"py-2",children:((ee=r[f])==null?void 0:ee[Q])||""}),a.jsx("td",{className:"py-2",children:((de=r[x])==null?void 0:de[Q])||""})]},Q)})})]})})]}),a.jsx("div",{className:"space-y-4 mb-6",children:Object.entries(w).map(([F,Q])=>{var Mt,hn;const ee=parseInt(F),de=re(f,ee),$e=re(x,ee),Pe=ee+1,ke=(oe==null?void 0:oe.beyblades_per_player)||3,ot=Pe%ke===0&&Pe>0,Ue=Math.floor(Pe/ke)+1;return a.jsxs("div",{children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("h3",{className:"text-lg font-bold",children:["Match ",Pe,": ",de," vs ",$e]}),a.jsx("button",{onClick:()=>le(ee),className:"text-red-600 hover:bg-red-50 p-1 rounded",children:a.jsx(us,{size:16})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold mb-2",children:"Outcome:"}),a.jsx("div",{className:"space-y-2",children:Object.keys(lc).map(lt=>a.jsx("button",{onClick:()=>O(ee,lt),className:`w-full text-left px-3 py-2 rounded border transition-colors ${Q.outcome===lt?"bg-blue-100 border-blue-300 text-blue-700":"bg-gray-50 border-gray-200 hover:bg-gray-100"}`,children:lt},lt))})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold mb-2",children:"Winner:"}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("button",{onClick:()=>H(ee,f),className:`w-full text-left px-3 py-2 rounded border transition-colors ${Q.winner===f?"bg-green-100 border-green-300 text-green-700":"bg-gray-50 border-gray-200 hover:bg-gray-100"}`,children:f}),a.jsx("button",{onClick:()=>H(ee,x),className:`w-full text-left px-3 py-2 rounded border transition-colors ${Q.winner===x?"bg-green-100 border-green-300 text-green-700":"bg-gray-50 border-gray-200 hover:bg-gray-100"}`,children:x})]})]})]})]}),ot&&Ue>1&&E[Ue]&&a.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg shadow-md p-6 mt-4 border-2 border-purple-200",children:[a.jsxs("h3",{className:"text-lg font-bold text-purple-900 mb-4 flex items-center",children:[a.jsx(mf,{className:"mr-2",size:20}),"Phase ",Ue," Decks - Drag to Reorder"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold mb-3 text-purple-800",children:f}),a.jsx("div",{className:"space-y-2",children:(Mt=E[Ue][f])==null?void 0:Mt.map((lt,hs)=>a.jsxs("div",{draggable:!0,onDragStart:Wt=>Be(Wt,lt),onDragOver:_,onDrop:Wt=>$(Wt,Ue,f,hs),onDragEnd:xe,className:`bg-white p-3 rounded border-2 cursor-move transition-all duration-200 flex items-center ${B===lt?"border-purple-400 shadow-lg opacity-50":"border-gray-200 hover:border-purple-300 hover:shadow-md"}`,children:[a.jsx(ff,{size:16,className:"text-gray-400 mr-2"}),a.jsxs("span",{className:"font-medium text-gray-700",children:[hs+1,"."]}),a.jsx("span",{className:"ml-2",children:lt})]},`${Ue}-${f}-${hs}`))})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold mb-3 text-purple-800",children:x}),a.jsx("div",{className:"space-y-2",children:(hn=E[Ue][x])==null?void 0:hn.map((lt,hs)=>a.jsxs("div",{draggable:!0,onDragStart:Wt=>Be(Wt,lt),onDragOver:_,onDrop:Wt=>$(Wt,Ue,x,hs),onDragEnd:xe,className:`bg-white p-3 rounded border-2 cursor-move transition-all duration-200 flex items-center ${B===lt?"border-purple-400 shadow-lg opacity-50":"border-gray-200 hover:border-purple-300 hover:shadow-md"}`,children:[a.jsx(ff,{size:16,className:"text-gray-400 mr-2"}),a.jsxs("span",{className:"font-medium text-gray-700",children:[hs+1,"."]}),a.jsx("span",{className:"ml-2",children:lt})]},`${Ue}-${x}-${hs}`))})]})]})]})]},F)})}),a.jsxs("div",{className:"flex justify-center space-x-4 mb-6",children:[a.jsxs("button",{onClick:V?je:T,className:"bg-blue-600 text-white px-6 py-3 rounded-md hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[a.jsx(Tn,{size:20}),a.jsx("span",{children:V?"Shuffle":"Add Match"})]}),a.jsxs("button",{onClick:()=>J(!0),disabled:Object.values(w).every(F=>!F.outcome||!F.winner),className:"bg-green-600 text-white px-6 py-3 rounded-md hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[a.jsx(D_,{size:20}),a.jsx("span",{children:"Submit Scores"})]}),a.jsxs("button",{onClick:se,className:"bg-gray-600 text-white px-6 py-3 rounded-md hover:bg-gray-700 transition-colors flex items-center space-x-2",children:[a.jsx(mf,{size:20}),a.jsx("span",{children:"Refresh"})]})]}),W&&a.jsx("div",{className:"text-center py-4",children:a.jsx("p",{className:`font-semibold ${W.includes("")?"text-green-600":W.includes("")?"text-red-600":"text-blue-600"}`,children:W})})]})]}),K&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Match Summary"}),a.jsx("button",{onClick:()=>J(!1),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:a.jsx(yt,{size:24})})]}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Final Scores"}),a.jsxs("p",{className:"text-xl",children:[a.jsxs("strong",{children:[f,":"]})," ",N," pts | ",a.jsxs("strong",{children:[x,":"]})," ",A," pts"]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Match Results"}),a.jsx("div",{className:"space-y-2",children:ye().map((F,Q)=>a.jsx("p",{className:"text-gray-700",dangerouslySetInnerHTML:{__html:F}},Q))})]}),a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx("button",{onClick:()=>J(!1),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsxs("button",{onClick:ie,disabled:ne,className:"px-6 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors disabled:opacity-50 flex items-center space-x-2",children:[ne&&a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"Confirm Submit"})]})]})]})]})})]})}function SN(){var ue,Be;const{user:t}=es(),[e,s]=k.useState([]),[n,r]=k.useState(!1),[i,o]=k.useState(null),[l,c]=k.useState({}),[d,u]=k.useState(null),[h,f]=k.useState([]),[m,x]=k.useState(!1),[y,b]=k.useState(!0),[g,p]=k.useState(null),[v,w]=k.useState([]),[j,N]=k.useState(!1),[P,A]=k.useState(null),[S,R]=k.useState({}),[L,V]=k.useState(!1),[M,K]=k.useState([]),[J,ne]=k.useState(!1),G=(t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="developer";Ke.useEffect(()=>{z()},[]);const W=async _=>{x(!0);try{const{data:$,error:xe}=await Y.from("tournament_registration_details").select("*").eq("tournament_id",_).order("registered_at",{ascending:!1});if(xe)throw xe;const ie={};$==null||$.forEach(ye=>{ie[ye.registration_id]||(ie[ye.registration_id]={registration_id:ye.registration_id,tournament_id:ye.tournament_id,player_name:ye.player_name,payment_mode:ye.payment_mode,registered_at:ye.registered_at,status:ye.status,payment_status:ye.payment_status,beyblades:[]}),ye.beyblade_id&&(ie[ye.registration_id].beyblades.find(ts=>ts.beyblade_id===ye.beyblade_id)||ie[ye.registration_id].beyblades.push({beyblade_id:ye.beyblade_id,beyblade_name:ye.beyblade_name,blade_line:ye.blade_line,parts:ye.beyblade_parts||[]}))}),f(Object.values(ie))}catch($){console.error("Error fetching registrations:",$),f([])}finally{x(!1)}},I=async(_,$)=>{try{const{error:xe}=await Y.from("tournament_registrations").update({payment_status:$}).eq("id",_);if(xe)throw xe;d&&await W(d)}catch(xe){console.error("Error updating payment status:",xe),alert("Failed to update payment status")}},E=(_,$)=>$==="Custom"?["Lockchip","Main Blade","Assist Blade","Ratchet","Bit"].map(ie=>_.find(ye=>ye.part_type===ie)).filter(Boolean):["Blade","Ratchet","Bit"].map(ie=>_.find(ye=>ye.part_type===ie)).filter(Boolean),z=async()=>{try{const{data:_,error:$}=await Y.from("tournaments").select("*").order("tournament_date",{ascending:!1});if($)throw $;s(_||[])}catch(_){console.error("Error fetching tournaments:",_)}finally{b(!1)}},B=()=>{r(!0),c({name:"",description:"",tournament_date:"",location:"",max_participants:16,status:"upcoming",registration_deadline:"",prize_pool:"",beyblades_per_player:3,players_per_team:1,is_free:!0,entry_fee:0,tournament_type:"casual"})},C=_=>{o(_.id),c(_)},q=async()=>{try{if(n){const{error:_}=await Y.from("tournaments").insert([l]);if(_){console.error("Insert error:",_),_.code==="42501"||_.message.includes("RLS")?alert("Permission denied. You need admin or developer role to create tournaments."):alert(`Failed to create tournament: ${_.message}`);return}}else if(i){const{error:_}=await Y.from("tournaments").update(l).eq("id",i);if(_){console.error("Update error:",_),_.code==="42501"||_.message.includes("RLS")||_.code==="42883"?alert("Permission denied. You need admin or developer role to edit tournaments."):alert(`Failed to update tournament: ${_.message}`);return}}await z(),r(!1),o(null),c({})}catch(_){console.error("Error saving tournament:",_),alert(`Failed to save tournament: ${_ instanceof Error?_.message:"Unknown error"}. Please try again.`)}},X=()=>{r(!1),o(null),c({})},se=async _=>{if(confirm("Are you sure you want to delete this tournament? This will also delete all associated registrations and matches. This action cannot be undone."))try{const{error:$}=await Y.from("tournaments").delete().eq("id",_);if($){console.error("Delete error:",$),$.code==="42501"||$.message.includes("RLS")?alert("Permission denied. You need admin or developer role to delete tournaments."):alert(`Failed to delete tournament: ${$.message}`);return}alert("Tournament deleted successfully!"),await z()}catch($){console.error("Error deleting tournament:",$),alert(`Failed to delete tournament: ${$ instanceof Error?$.message:"Unknown error"}. Please try again.`)}},pe=async _=>{N(!0),p(_);try{const{data:$,error:xe}=await Y.from("match_results").select("*").eq("tournament_id",_).order("submitted_at",{ascending:!1});if(xe)throw xe;w($||[])}catch($){console.error("Error fetching matches:",$),alert("Failed to load matches. Please try again.")}finally{N(!1)}},re=_=>{A(_.id),R({..._})},D=async()=>{if(!(!P||!G))try{const{error:_}=await Y.from("match_results").update(S).eq("id",P);if(_){console.error("Update error:",_),alert(`Failed to update match: ${_.message}`);return}A(null),R({}),await pe(g),alert("Match updated successfully!")}catch(_){console.error("Error updating match:",_),alert(`Failed to update match: ${_ instanceof Error?_.message:"Unknown error"}`)}},T=()=>{A(null),R({})},O=async _=>{if(confirm("Are you sure you want to delete this match? This action cannot be undone."))try{const{error:$}=await Y.from("match_results").delete().eq("id",_);if($){console.error("Delete error:",$),alert(`Failed to delete match: ${$.message}`);return}alert("Match deleted successfully!"),await pe(g)}catch($){console.error("Error deleting match:",$),alert(`Failed to delete match: ${$ instanceof Error?$.message:"Unknown error"}`)}},H=async()=>{ne(!0),V(!0);try{const{data:_,error:$}=await Y.from("tournament_registration_details").select("*").order("registered_at",{ascending:!1});if($)throw $;const xe={};_==null||_.forEach(ie=>{var ye;xe[ie.registration_id]||(xe[ie.registration_id]={registration_id:ie.registration_id,player_name:ie.player_name,payment_mode:ie.payment_mode,registered_at:ie.registered_at,status:ie.status,tournament_name:((ye=e.find(oe=>oe.id===ie.tournament_id))==null?void 0:ye.name)||"Unknown Tournament",tournament_id:ie.tournament_id,payment_status:ie.payment_status||"confirmed",beyblades:[]}),ie.beyblade_id&&(xe[ie.registration_id].beyblades.find(ts=>ts.beyblade_id===ie.beyblade_id)||xe[ie.registration_id].beyblades.push({beyblade_id:ie.beyblade_id,beyblade_name:ie.beyblade_name,blade_line:ie.blade_line,parts:ie.beyblade_parts||[]}))}),K(Object.values(xe))}catch(_){console.error("Error fetching all registrations:",_),alert("Failed to load registrations. Please try again.")}finally{ne(!1)}},te=_=>{switch(_){case"upcoming":return"bg-blue-100 text-blue-800";case"active":return"bg-green-100 text-green-800";case"completed":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},le=_=>{u(_),W(_)},je=()=>{u(null),f([])};if(y)return a.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading tournaments..."})]})});if(d){const _=e.find($=>$.id===d);return a.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("button",{onClick:je,className:"flex items-center space-x-2 text-blue-600 hover:text-blue-800 font-medium transition-colors mb-4",children:[a.jsx(cl,{size:20}),a.jsx("span",{children:"Back to Tournament Manager"})]}),a.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:[_==null?void 0:_.name," - Registrations"]}),a.jsx("p",{className:"text-gray-600",children:"Manage tournament registrations and payment status"})]}),m?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading registrations..."})]}):h.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(ls,{size:48,className:"mx-auto text-gray-400 mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No registrations found for this tournament"})]}):a.jsx("div",{className:"space-y-6",children:h.map($=>{var xe;return a.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white font-bold",children:$.player_name.charAt(0).toUpperCase()}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-lg text-gray-900",children:$.player_name}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Registered: ",new Date($.registered_at).toLocaleDateString()]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Payment Mode:"}),a.jsx("p",{className:"font-medium capitalize",children:((xe=$.payment_mode)==null?void 0:xe.replace("_"," "))||"N/A"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Status:"}),a.jsx("p",{className:"font-medium capitalize",children:$.status})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Payment Status"}),a.jsxs("select",{value:$.payment_status||"unpaid",onChange:ie=>I($.registration_id,ie.target.value),className:"text-xs border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"unpaid",children:"Unpaid"}),a.jsx("option",{value:"paid",children:"Paid"}),a.jsx("option",{value:"confirmed",children:"Confirmed"})]})]}),a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${$.payment_status==="confirmed"?"bg-green-100 text-green-800":$.payment_status==="paid"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:$.payment_status||"unpaid"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h4",{className:"font-semibold text-gray-900 flex items-center",children:[a.jsx(Qt,{size:16,className:"mr-2 text-yellow-500"}),"Registered Beyblades (",$.beyblades.length,")"]}),$.beyblades.length===0?a.jsx("p",{className:"text-gray-500 text-sm italic",children:"No Beyblades registered"}):a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:$.beyblades.map((ie,ye)=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[a.jsxs("div",{className:"flex justify-between items-center mb-3",children:[a.jsx("h5",{className:"font-semibold text-gray-900",children:ie.beyblade_name}),a.jsxs("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:[ie.blade_line," Line"]})]}),ie.parts.length>0?a.jsxs("div",{className:"space-y-2",children:[a.jsx("h6",{className:"text-xs font-medium text-gray-600 uppercase tracking-wide",children:"Parts"}),a.jsx("div",{className:"space-y-1",children:E(ie.parts,ie.blade_line).map((oe,ts)=>a.jsxs("div",{className:"flex justify-between items-center text-xs",children:[a.jsxs("span",{className:"font-medium text-gray-700",children:[oe.part_type,":"]}),a.jsx("span",{className:"text-gray-600",children:oe.part_name})]},ts))})]}):a.jsx("p",{className:"text-gray-500 text-xs",children:"No parts configured"})]},ie.beyblade_id))})]})]},$.registration_id)})})]})}return a.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[a.jsxs("div",{className:"flex justify-between items-center mb-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Tournament Manager"}),a.jsx("p",{className:"text-gray-600",children:"Create and manage tournaments"})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsxs("button",{onClick:H,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors flex items-center space-x-2",children:[a.jsx(ls,{size:20}),a.jsx("span",{children:"All Registrations"})]}),G&&a.jsxs("button",{onClick:B,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[a.jsx(Tn,{size:20}),a.jsx("span",{children:"Create Tournament"})]})]})]}),(n||i)&&a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:n?"Create New Tournament":"Edit Tournament"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tournament Name"}),a.jsx("input",{type:"text",value:l.name||"",onChange:_=>c({...l,name:_.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),a.jsx("input",{type:"text",value:l.location||"",onChange:_=>c({...l,location:_.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tournament Date"}),a.jsx("input",{type:"date",value:l.tournament_date||"",onChange:_=>c({...l,tournament_date:_.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Registration Deadline"}),a.jsx("input",{type:"date",value:l.registration_deadline||"",onChange:_=>c({...l,registration_deadline:_.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Participants"}),a.jsx("input",{type:"number",value:l.max_participants||"",onChange:_=>c({...l,max_participants:parseInt(_.target.value)}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prize Pool"}),a.jsx("input",{type:"text",value:l.prize_pool||"",onChange:_=>c({...l,prize_pool:_.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., $500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tournament Type"}),a.jsxs("select",{value:l.tournament_type||"casual",onChange:_=>c({...l,tournament_type:_.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"casual",children:"Casual"}),a.jsx("option",{value:"ranked",children:"Ranked"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Entry Type"}),a.jsxs("select",{value:l.is_free?"free":"paid",onChange:_=>{const $=_.target.value==="free";c({...l,is_free:$,entry_fee:$?0:l.entry_fee||50})},className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"free",children:"Free Entry"}),a.jsx("option",{value:"paid",children:"Paid Entry"})]})]}),!l.is_free&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Entry Fee"}),a.jsx("input",{type:"number",step:"0.01",min:"0",value:l.entry_fee||"",onChange:_=>c({...l,entry_fee:parseFloat(_.target.value)||0}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Beyblades per Player"}),a.jsx("input",{type:"number",min:"1",max:"5",value:l.beyblades_per_player||3,onChange:_=>c({...l,beyblades_per_player:parseInt(_.target.value)}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Players per Team"}),a.jsx("input",{type:"number",min:"1",max:"4",value:l.players_per_team||1,onChange:_=>c({...l,players_per_team:parseInt(_.target.value)}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),a.jsx("textarea",{value:l.description||"",onChange:_=>c({...l,description:_.target.value}),rows:3,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),!n&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),a.jsxs("select",{value:l.status||"",onChange:_=>c({...l,status:_.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"upcoming",children:"Upcoming"}),a.jsx("option",{value:"active",children:"Active"}),a.jsx("option",{value:"completed",children:"Completed"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tournament Type"}),a.jsxs("select",{value:l.tournament_type||"casual",onChange:_=>c({...l,tournament_type:_.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"casual",children:"Casual"}),a.jsx("option",{value:"ranked",children:"Ranked"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Entry Type"}),a.jsxs("select",{value:l.is_free?"free":"paid",onChange:_=>{const $=_.target.value==="free";c({...l,is_free:$,entry_fee:$?0:l.entry_fee||50})},className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"free",children:"Free Entry"}),a.jsx("option",{value:"paid",children:"Paid Entry"})]})]}),!l.is_free&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Entry Fee ()"}),a.jsx("input",{type:"number",step:"0.01",min:"0",value:l.entry_fee||"",onChange:_=>c({...l,entry_fee:parseFloat(_.target.value)||0}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"50.00"})]})]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[a.jsxs("button",{onClick:X,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors flex items-center space-x-2",children:[a.jsx(yt,{size:16}),a.jsx("span",{children:"Cancel"})]}),a.jsxs("button",{onClick:q,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[a.jsx(Cr,{size:16}),a.jsx("span",{children:"Save"})]})]})]}),a.jsx("div",{className:"space-y-4",children:e.map(_=>a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900",children:_.name}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium capitalize ${te(_.status)}`,children:_.status})]}),a.jsx("p",{className:"text-gray-600 mb-2",children:_.description}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-gray-600",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Date:"})," ",new Date(_.tournament_date).toLocaleDateString()]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Location:"})," ",_.location]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Participants:"})," ",_.current_participants,"/",_.max_participants]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Prize Pool:"})," ",_.prize_pool]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Type:"}),a.jsx("span",{className:`ml-1 capitalize ${_.tournament_type==="ranked"?"text-orange-600 font-semibold":"text-gray-600"}`,children:_.tournament_type})]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Entry:"}),a.jsx("span",{className:`ml-1 ${_.is_free?"text-green-600":"text-blue-600"} font-semibold`,children:_.is_free?"Free":`${_.entry_fee}`})]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Beyblades/Player:"})," ",_.beyblades_per_player]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Players/Team:"})," ",_.players_per_team]})]})]}),a.jsxs("div",{className:"flex space-x-2",children:[G&&a.jsx("button",{onClick:()=>C(_),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-md transition-colors",title:"Edit Tournament",children:a.jsx(zn,{size:16})}),a.jsx("button",{onClick:()=>le(_.id),className:"p-2 text-green-600 hover:bg-green-50 rounded-md transition-colors",title:"View Registrations",children:a.jsx(ju,{size:16})}),a.jsx("button",{onClick:()=>pe(_.id),className:"p-2 text-purple-600 hover:bg-purple-50 rounded-md transition-colors",title:"View Matches",children:a.jsx(pf,{size:16})}),G&&a.jsx("button",{onClick:()=>se(_.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-md transition-colors",title:"Delete Tournament",children:a.jsx(us,{size:16})})]})]}),a.jsx("div",{className:"border-t pt-4",children:a.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[a.jsxs("span",{children:["Registration Deadline: ",new Date(_.registration_deadline).toLocaleDateString()]}),a.jsxs("span",{children:["Tournament ID: ",_.id]})]})})]},_.id))}),d&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Tournament Registrations"}),a.jsx("p",{className:"text-gray-600",children:(ue=e.find(_=>_.id===d))==null?void 0:ue.name})]}),a.jsx("button",{onClick:()=>u(null),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:a.jsx(yt,{size:24})})]}),a.jsx("div",{className:"p-6",children:m?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading registrations..."})]}):h.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(ls,{size:48,className:"mx-auto text-gray-400 mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No registrations yet for this tournament"})]}):a.jsx("div",{className:"space-y-6",children:h.map(_=>a.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg p-6 shadow-sm",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900",children:_.player_name}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Registered: ",new Date(_.registered_at).toLocaleString()]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Payment: ",a.jsx("span",{className:"capitalize",children:_.payment_mode.replace("_"," ")})]})]}),a.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${_.status==="confirmed"?"bg-green-100 text-green-800":_.status==="cancelled"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:_.status})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"font-semibold text-gray-900",children:"Registered Beyblades:"}),_.beyblades.map($=>a.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("h5",{className:"font-medium text-gray-900",children:$.beyblade_name}),a.jsxs("span",{className:"text-sm text-gray-600 bg-white px-2 py-1 rounded",children:[$.blade_line," Line"]})]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-2 text-sm",children:$.parts.map((xe,ie)=>a.jsxs("div",{className:"bg-white border border-gray-300 p-2 rounded",children:[a.jsx("div",{className:"font-medium text-gray-700",children:xe.part_type}),a.jsx("div",{className:"text-gray-600",children:xe.part_name})]},ie))})]},$.beyblade_id))]})]},_.registration_id))})})]})}),L&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-7xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"All Tournament Registrations"}),a.jsx("p",{className:"text-gray-600",children:"Manage payment status and registration details"})]}),a.jsx("button",{onClick:()=>V(!1),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:a.jsx(yt,{size:24})})]}),a.jsx("div",{className:"p-6",children:J?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading all registrations..."})]}):M.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(ls,{size:48,className:"mx-auto text-gray-400 mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No registrations found across all tournaments"})]}):a.jsx("div",{className:"space-y-4",children:M.map(_=>a.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg p-6 shadow-sm",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900",children:_.player_name}),a.jsx("span",{className:"text-sm text-gray-600 bg-gray-100 px-2 py-1 rounded",children:_.tournament_name})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-gray-600",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Registered:"}),a.jsx("p",{children:new Date(_.registered_at).toLocaleDateString()})]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Payment Mode:"}),a.jsx("p",{className:"capitalize",children:_.payment_mode.replace("_"," ")})]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Status:"}),a.jsx("span",{className:`ml-1 px-2 py-1 rounded-full text-xs font-medium ${_.status==="confirmed"?"bg-green-100 text-green-800":_.status==="cancelled"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:_.status})]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Payment:"}),a.jsx("span",{className:`ml-1 px-2 py-1 rounded-full text-xs font-medium ${_.payment_status==="confirmed"?"bg-green-100 text-green-800":_.payment_status==="paid"?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"}`,children:_.payment_status})]})]})]}),G&&a.jsxs("div",{className:"flex space-x-2",children:[_.payment_status==="unpaid"&&a.jsxs("button",{onClick:()=>I(_.registration_id,"paid"),className:"bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700 transition-colors flex items-center space-x-1",children:[a.jsx(j_,{size:14}),a.jsx("span",{children:"Mark Paid"})]}),_.payment_status==="paid"&&a.jsxs("button",{onClick:()=>I(_.registration_id,"confirmed"),className:"bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700 transition-colors flex items-center space-x-1",children:[a.jsx(b_,{size:14}),a.jsx("span",{children:"Confirm"})]}),_.payment_status!=="unpaid"&&a.jsx("button",{onClick:()=>I(_.registration_id,"unpaid"),className:"bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700 transition-colors",children:"Mark Unpaid"})]})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Beyblades:"}),a.jsxs("span",{className:"text-sm text-gray-600",children:[_.beyblades.length," registered"]})]}),a.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:_.beyblades.length>0?_.beyblades.map(($,xe)=>a.jsx("span",{className:"inline-block bg-white px-3 py-1 rounded-full text-xs font-medium text-gray-700 border",children:$.beyblade_name},xe)):a.jsx("span",{className:"text-sm text-gray-500 italic",children:"No Beyblades registered"})})]})]},_.registration_id))})})]})}),g&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-7xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Tournament Matches"}),a.jsx("p",{className:"text-gray-600",children:(Be=e.find(_=>_.id===g))==null?void 0:Be.name})]}),a.jsx("button",{onClick:()=>{p(null),A(null),R({})},className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:a.jsx(yt,{size:24})})]}),a.jsx("div",{className:"p-6",children:j?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading matches..."})]}):v.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(pf,{size:48,className:"mx-auto text-gray-400 mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No matches found for this tournament"})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Round"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Match #"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Player 1"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Player 1 Bey"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Player 2"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Player 2 Bey"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Winner"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Outcome"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Points"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Officer"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),G&&a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:v.map(_=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:P===_.id?a.jsx("input",{type:"number",value:S.round_number||"",onChange:$=>R({...S,round_number:parseInt($.target.value)}),className:"w-16 border border-gray-300 rounded px-2 py-1 text-sm"}):_.round_number}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:P===_.id?a.jsx("input",{type:"number",value:S.match_number||"",onChange:$=>R({...S,match_number:parseInt($.target.value)}),className:"w-16 border border-gray-300 rounded px-2 py-1 text-sm"}):_.match_number}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:P===_.id?a.jsx("input",{type:"text",value:S.player1_name||"",onChange:$=>R({...S,player1_name:$.target.value}),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm"}):_.player1_name}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:P===_.id?a.jsx("input",{type:"text",value:S.player1_beyblade||"",onChange:$=>R({...S,player1_beyblade:$.target.value}),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm"}):_.player1_beyblade}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:P===_.id?a.jsx("input",{type:"text",value:S.player2_name||"",onChange:$=>R({...S,player2_name:$.target.value}),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm"}):_.player2_name}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:P===_.id?a.jsx("input",{type:"text",value:S.player2_beyblade||"",onChange:$=>R({...S,player2_beyblade:$.target.value}),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm"}):_.player2_beyblade}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:P===_.id?a.jsxs("select",{value:S.winner_name||"",onChange:$=>R({...S,winner_name:$.target.value}),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm",children:[a.jsx("option",{value:"",children:"Select Winner"}),a.jsx("option",{value:S.player1_name,children:S.player1_name}),a.jsx("option",{value:S.player2_name,children:S.player2_name})]}):a.jsx("span",{className:`font-medium ${_.winner_name===_.player1_name?"text-green-600":"text-blue-600"}`,children:_.winner_name})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:P===_.id?a.jsxs("select",{value:S.outcome||"",onChange:$=>R({...S,outcome:$.target.value}),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm",children:[a.jsx("option",{value:"",children:"Select Outcome"}),a.jsx("option",{value:"Spin Finish (1 pt)",children:"Spin Finish (1 pt)"}),a.jsx("option",{value:"Burst Finish (2 pts)",children:"Burst Finish (2 pts)"}),a.jsx("option",{value:"Over Finish (2 pts)",children:"Over Finish (2 pts)"}),a.jsx("option",{value:"Extreme Finish (3 pts)",children:"Extreme Finish (3 pts)"})]}):_.outcome}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:P===_.id?a.jsx("input",{type:"number",value:S.points_awarded||"",onChange:$=>R({...S,points_awarded:parseInt($.target.value)}),className:"w-16 border border-gray-300 rounded px-2 py-1 text-sm"}):_.points_awarded}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:P===_.id?a.jsx("input",{type:"text",value:S.tournament_officer||"",onChange:$=>R({...S,tournament_officer:$.target.value}),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm"}):_.tournament_officer}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(In,{size:12,className:"mr-1"}),new Date(_.created_at).toLocaleDateString()]})}),G&&a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.jsx("div",{className:"flex space-x-2",children:P===_.id?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:D,className:"text-green-600 hover:text-green-900 p-1 rounded hover:bg-green-50",title:"Save Changes",children:a.jsx(Cr,{size:16})}),a.jsx("button",{onClick:T,className:"text-gray-600 hover:text-gray-900 p-1 rounded hover:bg-gray-50",title:"Cancel",children:a.jsx(yt,{size:16})})]}):a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>re(_),className:"text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-50",title:"Edit Match",children:a.jsx(zn,{size:16})}),a.jsx("button",{onClick:()=>O(_.id),className:"text-red-600 hover:text-red-900 p-1 rounded hover:bg-red-50",title:"Delete Match",children:a.jsx(us,{size:16})})]})})})]},_.id))})]})})})]})})]})}function CN(){const{user:t}=es(),[e,s]=k.useState([]),[n,r]=k.useState("all"),[i,o]=k.useState("all"),[l,c]=k.useState(!0),d=(t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="developer";Ke.useEffect(()=>{u()},[]);const u=async()=>{try{console.log(" USER MANAGEMENT: Fetching profiles...");const{data:b,error:g}=await Y.from("profiles").select("*").order("created_at",{ascending:!1});if(g)throw console.error(" USER MANAGEMENT: Error fetching profiles:",g),g;console.log(" USER MANAGEMENT: Raw profiles data:",{count:(b==null?void 0:b.length)||0,sample:(b==null?void 0:b.slice(0,3))||[],allProfiles:b||[]});const p=(b||[]).map(v=>({id:v.id,username:v.username,email:v.email||"",role:v.role,joinedDate:v.created_at,status:"active",lastLogin:null}));console.log(" USER MANAGEMENT: Formatted profiles as users:",{count:p.length,sample:p.slice(0,3),roles:p.map(v=>v.role),statuses:p.map(v=>v.status)}),s(p),console.log(" USER MANAGEMENT: Profiles loaded successfully as users")}catch(b){console.error("Error fetching profiles:",b)}finally{c(!1)}},h=e.filter(b=>{const g=n==="all"||b.status===n,p=i==="all"||b.role===i;return g&&p}),f=async(b,g)=>{try{const{error:p}=await Y.from("profiles").update(g).eq("id",b);if(p){const v=p.code==="42501"||p.message.includes("RLS")?"Permission denied. You need admin or developer role to update users.":`Failed to update user: ${p.message}`;alert(v);return}await u()}catch(p){console.error("Error updating user:",p),alert(`Failed to update user: ${p instanceof Error?p.message:"Unknown error"}`)}},m=async b=>{if(confirm("Are you sure you want to delete this user? This will also delete all their registrations and data. This action cannot be undone."))try{const{data:g,error:p}=await Y.rpc("delete_user_completely",{user_id_to_delete:b});if(p){console.error("Delete error:",p),p.code==="42501"||p.message.includes("RLS")?alert("Permission denied. You need admin or developer role to delete users."):p.message.includes("cannot delete themselves")?alert("You cannot delete your own account."):alert(`Failed to delete user: ${p.message}`);return}alert("User deleted successfully!"),await u()}catch(g){console.error("Error deleting user:",g),alert(`Failed to delete user: ${g instanceof Error?g.message:"Unknown error"}. Please try again.`)}},x=b=>{switch(b){case"active":return"bg-green-100 text-green-800";case"suspended":return"bg-red-100 text-red-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},y=b=>{switch(b){case"admin":return"bg-red-100 text-red-800";case"developer":return"bg-purple-100 text-purple-800";case"technical_officer":return"bg-blue-100 text-blue-800";case"user":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return l?a.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading users..."})]})}):a.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"User Management"}),a.jsx("p",{className:"text-gray-600",children:"Manage user accounts and permissions"})]}),a.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Status"}),a.jsxs("select",{value:n,onChange:b=>r(b.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"active",children:"Active"}),a.jsx("option",{value:"suspended",children:"Suspended"}),a.jsx("option",{value:"pending",children:"Pending"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Role"}),a.jsxs("select",{value:i,onChange:b=>o(b.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"all",children:"All Roles"}),a.jsx("option",{value:"user",children:"User"}),a.jsx("option",{value:"technical_officer",children:"Technical Officer"}),a.jsx("option",{value:"admin",children:"Admin"}),a.jsx("option",{value:"developer",children:"Developer"})]})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[a.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 rounded-lg bg-blue-100 text-blue-600",children:a.jsx(ls,{size:24})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.length})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 rounded-lg bg-green-100 text-green-600",children:a.jsx(vi,{size:24})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Users"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.length})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 rounded-lg bg-red-100 text-red-600",children:a.jsx(vi,{size:24})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Suspended"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"0"})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 rounded-lg bg-purple-100 text-purple-600",children:a.jsx(vi,{size:24})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Admins"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.filter(b=>b.role==="admin"||b.role==="developer").length})]})]})})]}),a.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Joined"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Login"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.map(b=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold",children:b.username.charAt(0).toUpperCase()}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:b.username}),a.jsxs("div",{className:"text-sm text-gray-500 flex items-center",children:[a.jsx(T_,{size:12,className:"mr-1"}),b.email]})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("select",{value:b.role,onChange:g=>f(b.id,{role:g.target.value}),disabled:!d,className:`text-xs font-medium px-2 py-1 rounded-full border-0 ${y(b.role)}`,children:[a.jsx("option",{value:"user",children:"User"}),a.jsx("option",{value:"technical_officer",children:"Technical Officer"}),a.jsx("option",{value:"admin",children:"Admin"}),a.jsx("option",{value:"developer",children:"Developer"})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("select",{value:"active",disabled:!d,className:`text-xs font-medium px-2 py-1 rounded-full border-0 ${x("active")}`,children:a.jsx("option",{value:"active",children:"Active"})})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(In,{size:12,className:"mr-1"}),new Date(b.joinedDate).toLocaleDateString()]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:"Never"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.jsx("div",{className:"flex space-x-2",children:d&&a.jsxs(a.Fragment,{children:[a.jsx("button",{className:"text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-50",children:a.jsx(zn,{size:16})}),a.jsx("button",{onClick:()=>m(b.id),className:"text-red-600 hover:text-red-900 p-1 rounded hover:bg-red-50",children:a.jsx(us,{size:16})})]})})})]},b.id))})]})})})]})}function PN(){var pe,re,D;const{user:t}=es(),[e,s]=k.useState("tournaments"),[n,r]=k.useState(null),[i,o]=k.useState(!1),[l,c]=k.useState([]),[d,u]=k.useState(!1),[h,f]=k.useState(null),[m,x]=k.useState([]),[y,b]=k.useState(null),[g,p]=k.useState({}),[v,w]=k.useState(null),[j,N]=k.useState([]),[P,A]=k.useState(""),[S,R]=k.useState(1),[L]=k.useState(10);Ke.useEffect(()=>{r(null),w(null),b(null),p({}),A(""),R(1)},[e]);const V=(t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="developer",M=async()=>{try{console.log(" DATABASE: Fetching table counts...");const[T,O,H,te]=await Promise.all([Y.from("profiles").select("*",{count:"exact",head:!0}),Y.from("tournaments").select("*",{count:"exact",head:!0}),Y.from("match_results").select("*",{count:"exact",head:!0}),Y.from("tournament_registrations").select("*",{count:"exact",head:!0})]);x([{name:"users",records:T.count||0,icon:a.jsx(ls,{size:20}),description:"User accounts and profiles",color:"from-blue-500 to-blue-600"},{name:"tournaments",records:O.count||0,icon:a.jsx(Qt,{size:20}),description:"Tournament information",color:"from-yellow-500 to-orange-500"},{name:"matches",records:H.count||0,icon:a.jsx(In,{size:20}),description:"Match results and schedules",color:"from-green-500 to-emerald-500"},{name:"registrations",records:te.count||0,icon:a.jsx(z_,{size:20}),description:"Tournament registrations with Beyblades",color:"from-purple-500 to-violet-500"}]);const{data:le}=await Y.from("tournaments").select("id, name").order("name");N(le||[]),console.log(" DATABASE: Table counts loaded successfully")}catch(T){console.error("Error fetching table counts:",T)}},K=async(T,O)=>{u(!0),f(null),console.log(" DATABASE: Fetching table data for:",{tableName:T,tournamentId:O});try{let H=[];if(T==="registrations"&&O){const{data:te,error:le}=await Y.from("tournament_registration_details").select("*").eq("tournament_id",O).order("registered_at",{ascending:!1});if(le)throw le;const je={};te==null||te.forEach(ue=>{var Be;je[ue.registration_id]||(je[ue.registration_id]={registration_id:ue.registration_id,tournament_id:ue.tournament_id,tournament_name:((Be=j.find(_=>_.id===ue.tournament_id))==null?void 0:Be.name)||"Unknown Tournament",player_name:ue.player_name,payment_mode:ue.payment_mode,registered_at:ue.registered_at,status:ue.status,beyblades:[]}),ue.beyblade_id&&(je[ue.registration_id].beyblades.find($=>$.beyblade_id===ue.beyblade_id)||je[ue.registration_id].beyblades.push({beyblade_id:ue.beyblade_id,beyblade_name:ue.beyblade_name,blade_line:ue.blade_line,parts:ue.beyblade_parts||[]}))}),H=Object.values(je)}else if(T==="registrations"&&!O)H=j;else{let te=T;T==="registrations"?te="tournament_registrations":T==="users"?te="profiles":T==="matches"&&(te="match_results");const{data:le,error:je}=await Y.from(te).select("*").order(T==="tournaments"?"tournament_date":T==="matches"?"submitted_at":"created_at",{ascending:!1});if(je)throw console.error(` DATABASE: Error fetching ${T}:`,je),je;H=le||[]}(T!=="registrations"||O)&&H.sort((te,le)=>{const je=Object.values(te).find(Be=>typeof Be=="string")||"",ue=Object.values(le).find(Be=>typeof Be=="string")||"";return je.localeCompare(ue)}),c(H),console.log(` DATABASE: Table data loaded for ${T}:`,{finalCount:H.length,hasData:H.length>0})}catch(H){console.error("Error fetching table data:",H),f(`Failed to load ${T} data. Please try again.`)}finally{u(!1)}},J=async()=>{o(!0),await Promise.all([M(),K(e,n||void 0)]),o(!1)},ne=T=>{const O=JSON.stringify(l,null,2),H=new Blob([O],{type:"application/json"}),te=URL.createObjectURL(H),le=document.createElement("a");le.href=te,le.download=`${T}_export_${new Date().toISOString().split("T")[0]}.json`,le.click(),URL.revokeObjectURL(te)},G=T=>{b(T.id||T.registration_id||T.tournament_id),p({...T})},W=async()=>{if(!(!y||!V))try{let T=e;e==="registrations"?T="tournament_registrations":e==="users"?T="profiles":e==="matches"&&(T="match_results");const{error:O}=await Y.from(T).update(g).eq("id",y);if(O){console.error("Update error:",O),O.code==="42501"||O.message.includes("RLS")?alert("Permission denied. You need admin or developer role to edit records."):alert(`Failed to update record: ${O.message}`);return}b(null),p({}),await K(e)}catch(T){console.error("Error updating row:",T),alert(`Failed to update record: ${T instanceof Error?T.message:"Unknown error"}. Please try again.`)}},I=async T=>{if(confirm("Are you sure you want to delete this record? This action cannot be undone."))try{let O=e;e==="registrations"?O="tournament_registrations":e==="users"?O="profiles":e==="matches"&&(O="match_results");const{error:H}=await Y.from(O).delete().eq("id",T);if(H){console.error("Delete error:",H),H.code==="42501"||H.message.includes("RLS")?alert("Permission denied. You need admin or developer role to delete records."):alert(`Failed to delete record: ${H.message}`);return}await Promise.all([M(),K(e,n||void 0)])}catch(O){console.error("Error deleting row:",O),alert(`Failed to delete record: ${O instanceof Error?O.message:"Unknown error"}. Please try again.`)}},E=T=>{r(T),K("registrations",T)},z=()=>{r(null),K("registrations")},B=T=>{w(T)};k.useEffect(()=>{M()},[]),k.useEffect(()=>{e==="registrations"&&r(null),K(e)},[e]);const C=l.filter(T=>P?Object.values(T).filter(H=>typeof H=="string").join(" ").toLowerCase().includes(P.toLowerCase()):!0),q=Math.ceil(C.length/L),X=C.slice((S-1)*L,S*L),se=()=>{var T;return d?a.jsx("div",{className:"flex items-center justify-center py-16",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-500 border-t-transparent mx-auto mb-4"}),a.jsxs("p",{className:"text-gray-600 font-medium",children:["Loading ",e==="registrations"&&n?"registration":e," data..."]})]})}):h?a.jsx("div",{className:"flex items-center justify-center py-16",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx("span",{className:"text-red-500 text-2xl",children:""})}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Error Loading Data"}),a.jsx("p",{className:"text-red-600 mb-4",children:h}),a.jsx("button",{onClick:()=>K(e,n||void 0),className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"Try Again"})]})}):l.length===0?a.jsx("div",{className:"flex items-center justify-center py-16",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(Qa,{size:32,className:"text-gray-400"})}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Data Available"}),a.jsxs("p",{className:"text-gray-500",children:["No data available for ",e==="registrations"&&n?"this tournament":e]})]})}):e==="registrations"&&!n?a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-500 to-violet-500 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(Qt,{size:32,className:"text-white"})}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Select Tournament"}),a.jsx("p",{className:"text-gray-600",children:"Choose a tournament to view its registrations and participant details"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l.map(O=>a.jsxs("button",{onClick:()=>E(O.id),className:"group text-left p-6 bg-white border-2 border-gray-200 rounded-xl hover:border-purple-300 hover:shadow-lg transition-all duration-200 transform hover:-translate-y-1",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h4",{className:"font-semibold text-gray-900 group-hover:text-purple-700 transition-colors",children:O.name}),a.jsx(b0,{size:20,className:"text-gray-400 group-hover:text-purple-500 transition-colors"})]}),a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:O.location}),a.jsx("p",{className:"text-sm text-gray-500",children:new Date(O.tournament_date).toLocaleDateString()}),a.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:a.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${O.status==="upcoming"?"bg-blue-100 text-blue-800":O.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:O.status})})]},O.id))})]}):e==="registrations"&&n?a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("button",{onClick:z,className:"flex items-center space-x-2 text-purple-600 hover:text-purple-800 font-medium transition-colors",children:[a.jsx(cl,{size:20}),a.jsx("span",{children:"Back to Tournaments"})]}),a.jsxs("h3",{className:"text-xl font-semibold text-gray-900",children:[((T=j.find(O=>O.id===n))==null?void 0:T.name)||"Tournament"," Registrations"]})]}),a.jsx("div",{className:"space-y-4",children:l.map(O=>{var H;return a.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 hover:shadow-md transition-all duration-200",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white font-bold",children:O.player_name.charAt(0).toUpperCase()}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-lg text-gray-900",children:O.player_name}),a.jsx("p",{className:"text-sm text-gray-600",children:O.tournament_name})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Registered:"}),a.jsx("p",{className:"font-medium",children:new Date(O.registered_at).toLocaleDateString()})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Payment:"}),a.jsx("p",{className:"font-medium capitalize",children:((H=O.payment_mode)==null?void 0:H.replace("_"," "))||"N/A"})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${O.status==="confirmed"?"bg-green-100 text-green-800":O.status==="cancelled"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:O.status}),a.jsxs("div",{className:"flex space-x-1",children:[a.jsx("button",{onClick:()=>B(O),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"View Details",children:a.jsx(ju,{size:16})}),V&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>G(O),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Edit",children:a.jsx(zn,{size:16})}),a.jsx("button",{onClick:()=>I(O.registration_id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:a.jsx(us,{size:16})})]})]})]})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Beyblades:"}),a.jsxs("span",{className:"text-sm text-gray-600",children:[O.beyblades.length," registered"]})]}),a.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:O.beyblades.length>0?O.beyblades.map((te,le)=>a.jsx("span",{className:"inline-block bg-white px-3 py-1 rounded-full text-xs font-medium text-gray-700 border",children:te.beyblade_name},le)):a.jsx("span",{className:"text-sm text-gray-500 italic",children:"No Beyblades registered"})})]})]},O.registration_id)})})]}):a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-6 space-y-4 sm:space-y-0",children:[a.jsxs("div",{className:"relative",children:[a.jsx(_0,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:`Search ${e}...`,value:P,onChange:O=>{A(O.target.value),R(1)},className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 w-64"})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("span",{className:"text-sm text-gray-600",children:["Showing ",X.length," of ",C.length," records"]}),q>1&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>R(Math.max(1,S-1)),disabled:S===1,className:"px-3 py-1 border border-gray-300 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors",children:"Previous"}),a.jsxs("span",{className:"text-sm text-gray-600",children:["Page ",S," of ",q]}),a.jsx("button",{onClick:()=>R(Math.min(q,S+1)),disabled:S===q,className:"px-3 py-1 border border-gray-300 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors",children:"Next"})]})]})]}),a.jsx("div",{className:"bg-white border border-gray-200 rounded-xl overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[X.length>0&&X[0]&&Object.keys(X[0]).map(O=>a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:O.replace(/_/g," ")},O)),V&&a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:X.map((O,H)=>a.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[Object.entries(O).map(([te,le],je)=>a.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:y===(O.id||O.registration_id||O.tournament_id)&&V?a.jsx("input",{type:"text",value:g[te]||"",onChange:ue=>p({...g,[te]:ue.target.value}),className:"w-full border border-gray-300 rounded-md px-2 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}):a.jsx("div",{className:"max-w-xs",children:typeof le=="object"&&le!==null?a.jsx("div",{className:"bg-gray-100 rounded-md px-2 py-1 text-xs font-mono",children:JSON.stringify(le).length>50?JSON.stringify(le).substring(0,50)+"...":JSON.stringify(le)}):le instanceof Date?le.toLocaleString():a.jsx("span",{className:te.includes("email")?"font-mono text-blue-600":"",children:String(le||"")})})},je)),V&&a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"flex items-center space-x-2",children:y===(O.id||O.registration_id||O.tournament_id)?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:W,className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Save Changes",children:a.jsx(Cr,{size:16})}),a.jsx("button",{onClick:()=>{b(null),p({})},className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",title:"Cancel",children:a.jsx(yt,{size:16})})]}):a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>G(O),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit Record",children:a.jsx(zn,{size:16})}),a.jsx("button",{onClick:()=>I(O.id||O.registration_id||O.tournament_id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete Record",children:a.jsx(us,{size:16})})]})})})]},O.id||H))})]})})})]})};return a.jsx("div",{className:"page-container",children:a.jsxs("div",{className:"content-wrapper",children:[a.jsx("div",{className:"page-header",children:a.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center space-y-4 lg:space-y-0",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"page-title flex items-center",children:[a.jsx(Qa,{size:32,className:"mr-3 text-blue-600"}),"Database Management"]}),a.jsx("p",{className:"page-subtitle",children:"Monitor and manage application data from Supabase"})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("button",{onClick:J,disabled:i,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2 disabled:opacity-50",children:[a.jsx(L_,{size:16,className:i?"animate-spin":""}),a.jsx("span",{children:"Refresh"})]}),a.jsxs("button",{onClick:()=>ne(e),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2",children:[a.jsx(N_,{size:16}),a.jsx("span",{children:"Export"})]})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-4 gap-8",children:[a.jsxs("div",{className:"xl:col-span-1",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[a.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 px-6 py-4 border-b border-gray-200",children:a.jsxs("h2",{className:"text-lg font-bold text-gray-900 flex items-center",children:[a.jsx(Qa,{size:20,className:"mr-2 text-gray-700"}),"Database Tables"]})}),a.jsx("div",{className:"p-4 space-y-2",children:m.map(T=>a.jsxs("button",{onClick:()=>s(T.name),className:`w-full text-left p-4 rounded-xl transition-all duration-200 group ${e===T.name?"bg-gradient-to-r "+T.color+" text-white shadow-lg transform scale-105":"hover:bg-gray-50 border border-gray-200"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:`p-2 rounded-lg ${e===T.name?"bg-white/20":"bg-gray-100 group-hover:bg-gray-200"} transition-colors`,children:Ke.cloneElement(T.icon,{className:e===T.name?"text-white":"text-gray-600"})}),a.jsx("span",{className:`font-semibold capitalize ${e===T.name?"text-white":"text-gray-900"}`,children:T.name})]}),a.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-bold ${e===T.name?"bg-white/20 text-white":"bg-gray-100 text-gray-600"}`,children:T.records})]}),a.jsx("p",{className:`text-xs ${e===T.name?"text-white/80":"text-gray-600"}`,children:T.description})]},T.name))})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 mt-6 overflow-hidden",children:[a.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 px-6 py-4 border-b border-gray-200",children:a.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center",children:[a.jsx(Eo,{size:20,className:"mr-2 text-gray-700"}),"Database Stats"]})}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-600 font-medium",children:"Total Records"}),a.jsx("span",{className:"text-2xl font-bold text-gray-900",children:m.reduce((T,O)=>T+O.records,0)})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-600 font-medium",children:"Active Tables"}),a.jsx("span",{className:"text-2xl font-bold text-gray-900",children:m.length})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-600 font-medium",children:"Database"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),a.jsx("span",{className:"text-green-600 font-bold",children:"Supabase"})]})]}),a.jsx("div",{className:"pt-4 border-t border-gray-100",children:a.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["Last updated: ",new Date().toLocaleTimeString()]})})]})]})]}),a.jsx("div",{className:"xl:col-span-3",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[a.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 px-6 py-4 border-b border-gray-200",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-900 capitalize flex items-center",children:[((pe=m.find(T=>T.name===e))==null?void 0:pe.icon)&&Ke.cloneElement(m.find(T=>T.name===e).icon,{className:"mr-2 text-gray-700",size:24}),e==="registrations"&&n?`${((re=j.find(T=>T.id===n))==null?void 0:re.name)||"Tournament"} Registrations`:e==="registrations"?"Tournament Selection":`${e} Management`]}),a.jsx("p",{className:"text-gray-600 mt-1",children:(D=m.find(T=>T.name===e))==null?void 0:D.description})]}),a.jsx("div",{className:"flex items-center space-x-2",children:a.jsx("span",{className:"text-sm text-gray-500 bg-gray-100 px-3 py-1 rounded-full",children:e==="registrations"&&!n?`${j.length} tournaments`:`${C.length} records`})})]})}),se()]})})]}),v&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-5xl w-full max-h-[90vh] overflow-hidden",children:[a.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-violet-500 px-6 py-4 text-white",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Registration Details"}),a.jsx("p",{className:"text-purple-100",children:v.player_name})]}),a.jsx("button",{onClick:()=>w(null),className:"p-2 hover:bg-white/20 rounded-full transition-colors",children:a.jsx(yt,{size:24})})]})}),a.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-80px)]",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Player Name"}),a.jsx("p",{className:"text-xl font-bold text-gray-900",children:v.player_name})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Tournament"}),a.jsx("p",{className:"text-lg text-gray-900",children:v.tournament_name})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Payment Mode"}),a.jsx("span",{className:"inline-block bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium capitalize",children:v.payment_mode.replace("_"," ")})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Status"}),a.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-sm font-medium ${v.status==="confirmed"?"bg-green-100 text-green-800":v.status==="cancelled"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:v.status})]})]})]}),a.jsx("div",{className:"bg-gray-50 rounded-xl p-4 mb-8",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(In,{size:16,className:"text-gray-600"}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Registered on:"}),a.jsx("span",{className:"text-sm text-gray-900 font-semibold",children:new Date(v.registered_at).toLocaleString()})]})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h3",{className:"text-xl font-bold text-gray-900 flex items-center",children:[a.jsx(Qt,{size:24,className:"mr-2 text-yellow-500"}),"Registered Beyblades"]}),a.jsxs("span",{className:"bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm font-medium",children:[v.beyblades.length," Beyblades"]})]}),v.beyblades.length===0?a.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-xl",children:[a.jsx(Qt,{size:48,className:"mx-auto text-gray-400 mb-4"}),a.jsx("p",{className:"text-gray-500 font-medium",children:"No Beyblades registered"})]}):a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:v.beyblades.map((T,O)=>a.jsxs("div",{className:"border-2 border-gray-200 rounded-xl p-6 hover:border-purple-300 transition-colors",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-lg text-gray-900",children:T.beyblade_name}),a.jsxs("span",{className:"inline-block bg-gradient-to-r from-blue-500 to-purple-500 text-white px-3 py-1 rounded-full text-sm font-medium mt-2",children:[T.blade_line," Line"]})]}),a.jsx("div",{className:"text-right",children:a.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full flex items-center justify-center text-white font-bold text-lg",children:O+1})})]}),T.parts.length>0?a.jsxs("div",{className:"space-y-3",children:[a.jsx("h5",{className:"font-semibold text-gray-700 text-sm uppercase tracking-wide",children:"Parts Configuration"}),a.jsx("div",{className:"grid grid-cols-1 gap-2",children:T.parts.map((H,te)=>a.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3 flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-gray-900 text-sm",children:H.part_type}),a.jsx("div",{className:"text-gray-600 text-xs",children:H.part_name})]}),a.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-blue-600 text-xs font-bold",children:te+1})})]},te))})]}):a.jsx("div",{className:"text-center py-4 bg-gray-50 rounded-lg",children:a.jsx("p",{className:"text-gray-500 text-sm",children:"No parts configured"})})]},T.beyblade_id))})]})]})]})})]})})}function EN({showHeader:t=!0}){const{user:e}=es();if(!e||e.id.startsWith("guest-"))return a.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Deck Builder"}),a.jsx("p",{className:"text-gray-600",children:"Create and save Beyblade deck presets"})]}),a.jsxs("div",{className:"text-center py-12",children:[a.jsx(en,{size:64,className:"mx-auto text-gray-400 mb-6"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Advanced Deck Builder"}),a.jsx("p",{className:"text-gray-600 mb-8 max-w-2xl mx-auto",children:"Create powerful Beyblade combinations from your inventory. Build multiple deck presets, analyze stats, and save your favorite combinations for quick tournament registration."}),a.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-xl p-8 max-w-md mx-auto mb-8",children:[a.jsx("div",{className:"flex items-center justify-center mb-6",children:a.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-600 rounded-full flex items-center justify-center text-white text-2xl font-bold shadow-lg",children:""})}),a.jsx("h3",{className:"text-xl font-bold text-purple-900 mb-3",children:"Login to Start Building"}),a.jsx("p",{className:"text-purple-800 text-sm mb-6",children:"Create a free account to access the advanced deck builder and save your custom combinations!"}),a.jsxs("div",{className:"space-y-2 text-sm text-purple-700",children:[a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full mr-2"}),"Build from your inventory"]}),a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full mr-2"}),"Save unlimited deck presets"]}),a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full mr-2"}),"Analyze combined stats"]})]})]}),a.jsx("div",{className:"bg-gray-50 rounded-lg p-6 max-w-lg mx-auto",children:a.jsxs("p",{className:"text-gray-600 text-sm",children:[a.jsx("strong",{children:"Ready to build?"}),' Click the "Login" button in the top right corner to create your account and start building powerful deck combinations.']})})]})]});const[s,n]=k.useState([]),[r,i]=k.useState([]),[o,l]=k.useState(!0),[c,d]=k.useState(!1),[u,h]=k.useState(null),[f,m]=k.useState(""),[x,y]=k.useState(""),[b,g]=k.useState(3),[p,v]=k.useState([{id:"1",name:"",blade_line:"Basic",parts:{}}]);k.useEffect(()=>{w(),j()},[e]);const w=async()=>{try{const{data:E,error:z}=await Y.from("deck_presets").select("*").eq("user_id",e.id).order("updated_at",{ascending:!1});if(z)throw z;n(E||[])}catch(E){console.error("Error fetching presets:",E)}finally{l(!1)}},j=async()=>{try{const{data:E,error:z}=await Y.from("user_inventory").select("*").eq("user_id",e.id).gt("quantity",0);if(z)throw z;i(E||[])}catch(E){console.error("Error fetching inventory:",E)}},N=E=>{switch(E){case"Basic":case"Unique":case"X-Over":return["Blade","Ratchet","Bit"];case"Custom":return["Lockchip","Main Blade","Assist Blade","Ratchet","Bit"];default:return[]}},P=E=>{const z=E==="Main Blade"?"Blade":E;return r.filter(C=>C.part_type===z)},A=(E,z)=>{var q,X,se,pe,re,D,T,O;if(!E||!N(E).every(H=>z[H]))return"";if(E==="Custom"){const H=((q=z.Lockchip)==null?void 0:q.Lockchip)||"",te=((X=z["Main Blade"])==null?void 0:X.Blades)||"",le=((se=z["Assist Blade"])==null?void 0:se["Assist Blade"])||"",je=((pe=z.Ratchet)==null?void 0:pe.Ratchet)||"",ue=((re=z.Bit)==null?void 0:re.Shortcut)||"";return`${H}${te} ${le}${je}${ue}`}else{const H=((D=z.Blade)==null?void 0:D.Blades)||"",te=((T=z.Ratchet)==null?void 0:T.Ratchet)||"",le=((O=z.Bit)==null?void 0:O.Shortcut)||"";return`${H} ${te}${le}`}},S=E=>{let z={attack:0,defense:0,stamina:0,dash:0,burstRes:0};return Object.values(E).forEach(B=>{B&&(z.attack+=B.Attack||0,z.defense+=B.Defense||0,z.stamina+=B.Stamina||0,z.dash+=B.Dash||0,z.burstRes+=B["Burst Res"]||0)}),z},R=()=>{d(!0),m(""),y(""),g(3),v([{id:"1",name:"",blade_line:"Basic",parts:{}}])},L=E=>{h(E.id),m(E.name),y(E.description||""),g(E.beyblades.length),v(E.beyblades)},V=()=>{p.length<b&&v([...p,{id:Date.now().toString(),name:"",blade_line:"Basic",parts:{}}])},M=E=>{p.length>1&&v(p.filter(z=>z.id!==E))},K=(E,z,B)=>{v(p.map(C=>{if(C.id===E){const q={...C,[z]:B,parts:{}};return q.name=A(B,{}),q}return C}))},J=(E,z,B)=>{v(p.map(C=>{if(C.id===E){const q={...C.parts,[z]:B},X=A(C.blade_line,q);return{...C,parts:q,name:X}}return C}))},ne=async()=>{if(!f.trim()){alert("Please enter a deck name.");return}const E=p.filter(z=>{const B=N(z.blade_line);return z.blade_line&&B.every(C=>z.parts[C])});if(E.length===0){alert("Please configure at least one complete Beyblade.");return}try{const z={user_id:e.id,name:f.trim(),description:x.trim()||null,beyblades:E};if(c){const{error:B}=await Y.from("deck_presets").insert([z]);if(B)throw B}else if(u){const{error:B}=await Y.from("deck_presets").update({...z,updated_at:new Date().toISOString()}).eq("id",u);if(B)throw B}await w(),W(),alert("Deck preset saved successfully!")}catch(z){console.error("Error saving preset:",z),alert("Failed to save deck preset. Please try again.")}},G=async E=>{if(confirm("Are you sure you want to delete this deck preset?"))try{const{error:z}=await Y.from("deck_presets").delete().eq("id",E);if(z)throw z;await w()}catch(z){console.error("Error deleting preset:",z),alert("Failed to delete deck preset. Please try again.")}},W=()=>{d(!1),h(null),m(""),y(""),g(3),v([{id:"1",name:"",blade_line:"Basic",parts:{}}])},I=E=>{switch(E){case"attack":return a.jsx(ku,{size:12,className:"text-red-500"});case"defense":return a.jsx(vi,{size:12,className:"text-blue-500"});case"stamina":return a.jsx(_u,{size:12,className:"text-green-500"});case"dash":return a.jsx(Po,{size:12,className:"text-yellow-500"});case"burstRes":return a.jsx(k0,{size:12,className:"text-purple-500"});default:return null}};return o?a.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading deck builder..."})]})}):a.jsxs("div",{className:t?"p-6 max-w-7xl mx-auto":"",children:[t&&a.jsxs("div",{className:"flex justify-between items-center mb-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Deck Builder"}),a.jsx("p",{className:"text-gray-600",children:"Create and save Beyblade deck presets from your inventory"})]}),a.jsxs("button",{onClick:R,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[a.jsx(Tn,{size:20}),a.jsx("span",{children:"New Deck"})]})]}),!t&&a.jsx("div",{className:"flex justify-end mb-8",children:a.jsxs("button",{onClick:R,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[a.jsx(Tn,{size:20}),a.jsx("span",{children:"New Deck"})]})}),(c||u)&&a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:c?"Create New Deck":"Edit Deck"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Deck Name"}),a.jsx("input",{type:"text",value:f,onChange:E=>m(E.target.value),placeholder:"Enter deck name",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description (Optional)"}),a.jsx("input",{type:"text",value:x,onChange:E=>y(E.target.value),placeholder:"Deck strategy or notes",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),a.jsx("div",{className:"space-y-6",children:p.map((E,z)=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Beyblade #",z+1]}),p.length>1&&a.jsx("button",{onClick:()=>M(E.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-full transition-colors",children:a.jsx(us,{size:16})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Blade Line"}),a.jsxs("select",{value:E.blade_line,onChange:B=>K(E.id,"blade_line",B.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"Basic",children:"Basic"}),a.jsx("option",{value:"Unique",children:"Unique"}),a.jsx("option",{value:"Custom",children:"Custom"}),a.jsx("option",{value:"X-Over",children:"X-Over"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Generated Name"}),a.jsx("div",{className:"w-full border border-gray-200 rounded-md px-3 py-2 bg-gray-50 text-gray-700 font-mono",children:E.name||"Select all parts to generate name"})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4",children:N(E.blade_line).map(B=>a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:B}),a.jsxs("select",{value:E.parts[B]?JSON.stringify(E.parts[B]):"",onChange:C=>{if(C.target.value){const q=JSON.parse(C.target.value);J(E.id,B,q)}},className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsxs("option",{value:"",children:["Select ",B]}),P(B).filter(C=>{var q;return(B==="Blade"||B==="Main Blade")&&((q=C.part_data)!=null&&q.Line)?C.part_data.Line===E.blade_line:!0}).map(C=>a.jsxs("option",{value:JSON.stringify(C.part_data),children:[C.part_name," (Qty: ",C.quantity,")"]},C.id))]})]},B))}),Object.keys(E.parts).length>0&&a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsxs("h5",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center",children:[a.jsx(Po,{size:16,className:"mr-2"}),"Combined Stats"]}),a.jsx("div",{className:"grid grid-cols-5 gap-4",children:Object.entries(S(E.parts)).map(([B,C])=>a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"flex items-center justify-center mb-1",children:I(B)}),a.jsx("div",{className:"text-xs font-medium text-gray-600 capitalize",children:B==="burstRes"?"Burst Res":B}),a.jsx("div",{className:"text-lg font-bold text-gray-900",children:C})]},B))})]})]},E.id))}),p.length<5&&a.jsxs("button",{onClick:V,className:"mt-4 w-full border-2 border-dashed border-gray-300 rounded-lg p-4 text-gray-600 hover:border-blue-400 hover:text-blue-600 transition-colors flex items-center justify-center space-x-2",children:[a.jsx(Tn,{size:20}),a.jsxs("span",{children:["Add Another Beyblade (",p.length,"/5)"]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[a.jsxs("button",{onClick:W,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors flex items-center space-x-2",children:[a.jsx(yt,{size:16}),a.jsx("span",{children:"Cancel"})]}),a.jsxs("button",{onClick:ne,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[a.jsx(Cr,{size:16}),a.jsx("span",{children:"Save Preset"})]})]})]}),s.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(en,{size:48,className:"mx-auto text-gray-400 mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No deck presets yet"}),a.jsx("button",{onClick:R,className:"mt-4 text-blue-600 hover:text-blue-800 underline",children:"Create your first deck preset"})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(E=>a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:E.name}),E.description&&a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:E.description})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>L(E),className:"p-1 text-blue-600 hover:bg-blue-50 rounded",children:a.jsx(zn,{size:16})}),a.jsx("button",{onClick:()=>G(E.id),className:"p-1 text-red-600 hover:bg-red-50 rounded",children:a.jsx(us,{size:16})})]})]}),a.jsxs("div",{className:"space-y-2 mb-4",children:[a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsx("span",{className:"font-medium",children:E.beyblades.length})," Beyblades configured"]}),a.jsxs("div",{className:"space-y-1",children:[E.beyblades.slice(0,3).map((z,B)=>a.jsx("div",{className:"text-xs text-gray-500 font-mono",children:z.name||`Beyblade ${B+1}`},B)),E.beyblades.length>3&&a.jsxs("div",{className:"text-xs text-gray-400",children:["+",E.beyblades.length-3," more..."]})]})]}),a.jsxs("div",{className:"text-xs text-gray-500 pt-2 border-t",children:["Updated: ",new Date(E.updated_at).toLocaleDateString()]})]},E.id))})]})}function TN(){const{user:t}=es(),[e,s]=k.useState("inventory");if(!t||t.id.startsWith("guest-"))return a.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Inventory & Deck Builder"}),a.jsx("p",{className:"text-gray-600",children:"Track your parts and build custom decks"})]}),a.jsxs("div",{className:"text-center py-12",children:[a.jsxs("div",{className:"flex justify-center space-x-4 mb-6",children:[a.jsx(ni,{size:64,className:"text-gray-400"}),a.jsx(en,{size:64,className:"text-gray-400"})]}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Inventory & Deck Builder"}),a.jsx("p",{className:"text-gray-600 mb-8 max-w-2xl mx-auto",children:"Track your Beyblade parts collection and build powerful custom decks. Save deck presets for quick tournament registration."}),a.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-xl p-8 max-w-md mx-auto mb-8",children:[a.jsx("div",{className:"flex items-center justify-center mb-6",children:a.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white text-2xl font-bold shadow-lg",children:""})}),a.jsx("h3",{className:"text-xl font-bold text-blue-900 mb-3",children:"Login to Access Tools"}),a.jsx("p",{className:"text-blue-800 text-sm mb-6",children:"Create a free account to access inventory tracking and deck building tools!"}),a.jsxs("div",{className:"space-y-2 text-sm text-blue-700",children:[a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full mr-2"}),"Track unlimited Beyblade parts"]}),a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full mr-2"}),"Build and save custom decks"]}),a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full mr-2"}),"Quick tournament registration"]})]})]}),a.jsx("div",{className:"bg-gray-50 rounded-lg p-6 max-w-lg mx-auto",children:a.jsxs("p",{className:"text-gray-600 text-sm",children:[a.jsx("strong",{children:"Ready to start?"}),' Click the "Login" button to create your account and unlock inventory & deck building features.']})})]})]});const[n,r]=k.useState([]),[i,o]=k.useState(!0),[l,c]=k.useState(!1),[d,u]=k.useState(null),[h,f]=k.useState(""),[m,x]=k.useState("all"),[y,b]=k.useState({part_type:"Blade",part_name:"",part_data:null,quantity:1,notes:""}),[g,p]=k.useState({blades:[],ratchets:[],bits:[],lockchips:[],assistBlades:[]});k.useEffect(()=>{v(),w()},[t]);const v=async()=>{try{const{data:M,error:K}=await Y.from("user_inventory").select("*").eq("user_id",t.id).order("created_at",{ascending:!1});if(K)throw K;r(M||[])}catch(M){console.error("Error fetching inventory:",M)}finally{o(!1)}},w=async()=>{try{const[M,K,J,ne,G]=await Promise.all([Y.from("beypart_blade").select("*"),Y.from("beypart_ratchet").select("*"),Y.from("beypart_bit").select("*"),Y.from("beypart_lockchip").select("*"),Y.from("beypart_assistblade").select("*")]);p({blades:M.data||[],ratchets:K.data||[],bits:J.data||[],lockchips:ne.data||[],assistBlades:G.data||[]})}catch(M){console.error("Error fetching parts data:",M)}},j=M=>{switch(M){case"Blade":return g.blades;case"Ratchet":return g.ratchets;case"Bit":return g.bits;case"Lockchip":return g.lockchips;case"Assist Blade":return g.assistBlades;default:return[]}},N=(M,K)=>{switch(K){case"Blade":return M.Blades;case"Ratchet":return M.Ratchet;case"Bit":return`${M.Bit} (${M.Shortcut})`;case"Lockchip":return M.Lockchip;case"Assist Blade":return`${M["Assist Blade Name"]} (${M["Assist Blade"]})`;default:return""}},P=()=>{c(!0),b({part_type:"Blade",part_name:"",part_data:null,quantity:1,notes:""})},A=M=>{u(M.id),b({part_type:M.part_type,part_name:M.part_name,part_data:M.part_data,quantity:M.quantity,notes:M.notes||""})},S=async()=>{if(!y.part_name||!y.part_data){alert("Please select a part.");return}try{const M={user_id:t.id,part_type:y.part_type,part_name:y.part_name,part_data:y.part_data,quantity:y.quantity,notes:y.notes||null};if(l){const{error:K}=await Y.from("user_inventory").insert([M]);if(K)throw K}else if(d){const{error:K}=await Y.from("user_inventory").update(M).eq("id",d);if(K)throw K}await v(),L()}catch(M){console.error("Error saving inventory item:",M),alert("Failed to save inventory item. Please try again.")}},R=async M=>{if(confirm("Are you sure you want to delete this inventory item?"))try{const{error:K}=await Y.from("user_inventory").delete().eq("id",M);if(K)throw K;await v()}catch(K){console.error("Error deleting inventory item:",K),alert("Failed to delete inventory item. Please try again.")}},L=()=>{c(!1),u(null),b({part_type:"Blade",part_name:"",part_data:null,quantity:1,notes:""})},V=n.filter(M=>{const K=M.part_name.toLowerCase().includes(h.toLowerCase())||M.notes&&M.notes.toLowerCase().includes(h.toLowerCase()),J=m==="all"||M.part_type===m;return K&&J});return i?a.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading inventory..."})]})}):e==="deck-builder"?a.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[a.jsx("div",{className:"mb-8",children:a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Inventory & Deck Builder"}),a.jsx("p",{className:"text-gray-600",children:"Track your parts and build custom decks"})]}),a.jsxs("div",{className:"filter-tabs",children:[a.jsxs("button",{onClick:()=>s("inventory"),className:`filter-tab ${e==="inventory"?"filter-tab-active":"filter-tab-inactive"}`,children:[a.jsx(ni,{size:16,className:"mr-2"}),"Inventory"]}),a.jsxs("button",{onClick:()=>s("deck-builder"),className:`filter-tab ${e==="deck-builder"?"filter-tab-active":"filter-tab-inactive"}`,children:[a.jsx(en,{size:16,className:"mr-2"}),"Deck Builder"]})]})]})}),a.jsx(EN,{})]}):a.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Inventory & Deck Builder"}),a.jsx("p",{className:"text-gray-600",children:"Track your parts and build custom decks"})]}),a.jsxs("div",{className:"filter-tabs",children:[a.jsxs("button",{onClick:()=>s("inventory"),className:`filter-tab ${e==="inventory"?"filter-tab-active":"filter-tab-inactive"}`,children:[a.jsx(ni,{size:16,className:"mr-2"}),"Inventory"]}),a.jsxs("button",{onClick:()=>s("deck-builder"),className:`filter-tab ${e==="deck-builder"?"filter-tab-active":"filter-tab-inactive"}`,children:[a.jsx(en,{size:16,className:"mr-2"}),"Deck Builder"]})]})]})}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{onClick:P,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[a.jsx(Tn,{size:20}),a.jsx("span",{children:"Add Part"})]})})]}),a.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(_0,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search parts or notes...",value:h,onChange:M=>f(M.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(S_,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsxs("select",{value:m,onChange:M=>x(M.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"all",children:"All Parts"}),a.jsx("option",{value:"Blade",children:"Blades"}),a.jsx("option",{value:"Ratchet",children:"Ratchets"}),a.jsx("option",{value:"Bit",children:"Bits"}),a.jsx("option",{value:"Lockchip",children:"Lockchips"}),a.jsx("option",{value:"Assist Blade",children:"Assist Blades"})]})]})]})}),(l||d)&&a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:l?"Add New Part":"Edit Part"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Part Type"}),a.jsxs("select",{value:y.part_type,onChange:M=>b({...y,part_type:M.target.value,part_name:"",part_data:null}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"Blade",children:"Blade"}),a.jsx("option",{value:"Ratchet",children:"Ratchet"}),a.jsx("option",{value:"Bit",children:"Bit"}),a.jsx("option",{value:"Lockchip",children:"Lockchip"}),a.jsx("option",{value:"Assist Blade",children:"Assist Blade"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Part"}),a.jsxs("select",{value:y.part_data?JSON.stringify(y.part_data):"",onChange:M=>{if(M.target.value){const K=JSON.parse(M.target.value);b({...y,part_name:N(K,y.part_type),part_data:K})}},className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Select Part"}),j(y.part_type).map((M,K)=>a.jsx("option",{value:JSON.stringify(M),children:N(M,y.part_type)},K))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantity"}),a.jsx("input",{type:"number",min:"1",value:y.quantity,onChange:M=>b({...y,quantity:parseInt(M.target.value)||1}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes (Optional)"}),a.jsx("input",{type:"text",value:y.notes,onChange:M=>b({...y,notes:M.target.value}),placeholder:"e.g., condition, source, etc.",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[a.jsxs("button",{onClick:L,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors flex items-center space-x-2",children:[a.jsx(yt,{size:16}),a.jsx("span",{children:"Cancel"})]}),a.jsxs("button",{onClick:S,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[a.jsx(Cr,{size:16}),a.jsx("span",{children:"Save"})]})]})]}),V.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(ni,{size:48,className:"mx-auto text-gray-400 mb-4"}),a.jsx("p",{className:"text-gray-500",children:n.length===0?"No parts in your inventory yet":"No parts match your search"}),n.length===0&&a.jsx("button",{onClick:P,className:"mt-4 text-blue-600 hover:text-blue-800 underline",children:"Add your first part"})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:V.map(M=>a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{children:[a.jsx("span",{className:"inline-block px-2 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded-full mb-2",children:M.part_type}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:M.part_name})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>A(M),className:"p-1 text-blue-600 hover:bg-blue-50 rounded",children:a.jsx(zn,{size:16})}),a.jsx("button",{onClick:()=>R(M.id),className:"p-1 text-red-600 hover:bg-red-50 rounded",children:a.jsx(us,{size:16})})]})]}),a.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Quantity:"}),a.jsx("span",{className:"font-medium",children:M.quantity})]}),M.notes&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Notes:"}),a.jsx("p",{className:"text-gray-700 mt-1",children:M.notes})]}),a.jsxs("div",{className:"text-xs text-gray-500 pt-2 border-t",children:["Added: ",new Date(M.created_at).toLocaleDateString()]})]}),M.part_data&&a.jsx("div",{className:"mt-4 pt-4 border-t",children:a.jsx("div",{className:"grid grid-cols-2 gap-2 text-xs",children:Object.entries(M.part_data).map(([K,J])=>typeof J=="number"&&J>0&&["Attack","Defense","Stamina","Dash","Burst Res"].includes(K)?a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("span",{className:"text-gray-600",children:[K,":"]}),a.jsx("span",{className:"font-medium",children:J})]},K):null)})})]},M.id))})]})}function AN(){const[t,e]=k.useState("dashboard"),[s,n]=k.useState(!1),r=()=>{n(!s)},i=()=>{switch(t){case"dashboard":return a.jsx(gf,{onViewChange:e});case"tournaments":return a.jsx(H_,{});case"inventory":return a.jsx(TN,{});case"analytics":return a.jsx(kN,{});case"match-tracker":return a.jsx(NN,{});case"tournament-manager":return a.jsx(SN,{});case"user-management":return a.jsx(CN,{});case"database":return a.jsx(PN,{});default:return a.jsx(gf,{})}};return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[!s&&a.jsx("button",{onClick:r,className:`fixed top-6 left-0 z-50 p-3 rounded-r-xl shadow-lg backdrop-blur-sm transition-all duration-300 hover:scale-105 ${t==="dashboard"?"bg-slate-800/90 hover:bg-slate-700/90 text-white":"bg-white/90 hover:bg-white text-gray-800 border border-gray-200"}`,children:a.jsx(O_,{size:24})}),a.jsx(U_,{isOpen:s,currentView:t,onViewChange:e,onToggle:r}),a.jsx("div",{className:`${s?"lg:ml-64":"lg:ml-0"} transition-all duration-300`,children:a.jsx("main",{className:"flex-1",children:i()})})]})}function ON(){return a.jsx(x_,{children:a.jsx(AN,{})})}Yg(document.getElementById("root")).render(a.jsx(k.StrictMode,{children:a.jsx(ON,{})}));
